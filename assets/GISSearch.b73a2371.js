var EZ=Object.defineProperty,AZ=Object.defineProperties;var MZ=Object.getOwnPropertyDescriptors;var Y_=Object.getOwnPropertySymbols;var TR=Object.prototype.hasOwnProperty,$R=Object.prototype.propertyIsEnumerable;var IR=(e,t,i)=>t in e?EZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,k=(e,t)=>{for(var i in t||(t={}))TR.call(t,i)&&IR(e,i,t[i]);if(Y_)for(var i of Y_(t))$R.call(t,i)&&IR(e,i,t[i]);return e},be=(e,t)=>AZ(e,MZ(t));var K_=(e,t)=>{var i={};for(var r in e)TR.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&Y_)for(var r of Y_(e))t.indexOf(r)<0&&$R.call(e,r)&&(i[r]=e[r]);return i};import{_ as se,l as OZ,r as kZ,o as PZ,c as LZ,a as Nr,b as Lp,w as Rp,F as RZ,e as FZ,f as AO}from"./index.8ac88fb7.js";import{_ as NZ}from"./ProjectWeberRenew.dc78a7b0.js";import{_ as DZ}from"./plugin-vue_export-helper.21dcd24c.js";function c(e,t,i,r){var s,n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o}function jZ(e){return e&&e.release&&typeof e.release=="function"}function zZ(e){return e&&e.acquire&&typeof e.acquire=="function"}class ua{constructor(t,i,r,s=1,n=0){if(this.ctor=t,this.acquireFunction=i,this.releaseFunction=r,this.allocationSize=s,this._pool=new Array(n),this._initialSize=n,this.ctor)for(let o=0;o<n;o++)this._pool[o]=new this.ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){let i;if(ua.test.disabled)i=new this.ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let s=0;s<r;s++)this._pool[s]=new this.ctor}i=this._pool.pop()}return this.acquireFunction?this.acquireFunction(i,...t):zZ(i)&&i.acquire(...t),i}release(t){t&&!ua.test.disabled&&(this.releaseFunction?this.releaseFunction(t):jZ(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}}ua.test={disabled:!1};function VZ(e){e.length=0}class ws{constructor(t=50,i=50){this._pool=new ua(Array,void 0,VZ,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return ST.acquire()}static release(t){return ST.release(t)}static prune(){ST.prune()}}const ST=new ws(100);var CR,ER;let tc;var AR,MR;(CR=globalThis.dojoConfig)!=null&&CR.has||(ER=globalThis.esriConfig)!=null&&ER.has?tc=k(k({},(AR=globalThis.dojoConfig)==null?void 0:AR.has),(MR=globalThis.esriConfig)==null?void 0:MR.has):tc={};function re(e){return typeof tc[e]=="function"?tc[e]=tc[e](globalThis):tc[e]}re.add=(e,t,i,r)=>((r||tc[e]===void 0)&&(tc[e]=t),i&&re(e)),re.cache=tc,re.add("esri-deprecation-warnings",!0),(()=>{var e;re.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window!="undefined"&&typeof location!="undefined"&&typeof document!="undefined"&&window.location===location&&window.document===document;if(re.add("host-browser",t),re.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),re.add("dom",t),re("host-browser")){const i=navigator,r=i.userAgent,s=i.appVersion,n=parseFloat(s);if(re.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),re.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),re.add("khtml",s.includes("Konqueror")?n:void 0),re.add("edge",parseFloat(r.split("Edge/")[1])||void 0),re.add("opr",parseFloat(r.split("OPR/")[1])||void 0),re.add("webkit",!re("wp")&&!re("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),re.add("chrome",!re("edge")&&!re("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),re.add("android",!re("wp")&&parseFloat(r.split("Android ")[1])||void 0),re.add("safari",!s.includes("Safari")||re("wp")||re("chrome")||re("android")||re("edge")||re("opr")?void 0:parseFloat(s.split("Version/")[1])),re.add("mac",s.includes("Macintosh")),!re("wp")&&r.match(/(iPhone|iPod|iPad)/)){const o=RegExp.$1.replace(/P/,"p"),a=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replace(/_/g,""));re.add(o,l),re.add("ios",l)}re.add("trident",parseFloat(s.split("Trident/")[1])||void 0),re("webkit")||(!r.includes("Gecko")||re("wp")||re("khtml")||re("trident")||re("edge")||re.add("mozilla",n),re("mozilla")&&re.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&re.add("esri-mobile",t),i&&re.add("esri-iPhone",i),re.add("esri-geolocation",!!navigator.geolocation)}re.add("esri-canvas-svg-support",!re("trident")),re.add("esri-wasm","WebAssembly"in globalThis),re.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),re.add("esri-atomics","Atomics"in globalThis),re.add("esri-workers","Worker"in globalThis),re.add("web-feat:cache","caches"in globalThis),re.add("esri-workers-arraybuffer-transfer",!re("safari")||Number(re("safari"))>=12),re.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),re.add("featurelayer-simplify-payload-size-factors",[1,1,4]),re.add("featurelayer-snapshot-enabled",!0),re.add("featurelayer-snapshot-point-min-threshold",8e4),re.add("featurelayer-snapshot-point-max-threshold",4e5),re.add("featurelayer-snapshot-point-coverage",.1),re.add("featurelayer-advanced-symbols",!1),re.add("featurelayer-pbf",!0),re.add("featurelayer-pbf-statistics",!1),re.add("feature-layers-workers",!0),re.add("feature-polyline-generalization-factor",1),re.add("mapview-transitions-duration",200),re.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),re.add("mapserver-pbf-enabled",!1),re("host-webworker")||re("host-browser")&&(re.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),re.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{re.add("esri-image-decode",!0,!0,!0)}).catch(()=>{re.add("esri-image-decode",!1,!0,!0)})}return!1}),re.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();const OR=new Set;function UZ(e,t,i=!1){i&&OR.has(t)||(i&&OR.add(t),e.warn(`\u{1F6D1} DEPRECATED - ${t}`))}function ef(e,t,i={}){if(re("esri-deprecation-warnings")){const{moduleName:r}=i;$x(e,`Function: ${(r?r+"::":"")+t+"()"}`,i)}}function Y0(e,t,i={}){if(re("esri-deprecation-warnings")){const{moduleName:r}=i;$x(e,`Property: ${(r?r+"::":"")+t}`,i)}}function $x(e,t,i={}){if(re("esri-deprecation-warnings")){const{replacement:r,version:s,see:n,warnOnce:o}=i;let a=t;r&&(a+=`
	\u{1F6E0}\uFE0F Replacement: ${r}`),s&&(a+=`
	\u2699\uFE0F Version: ${s}`),n&&(a+=`
	\u{1F517} See ${n} for more details.`),UZ(e,a,o)}}const BZ=null;function N(e){return e!=null}function Q(e){return e==null}function $Me(e){return e===void 0}function ku(e,t){return N(e)?t(e):BZ}function CMe(e){return e}function qZ(e,t){if(Q(e))throw new Error(t);return e}function MO(e,t){return N(e)?e:typeof t=="function"?t():t}function EMe(e,t){return N(e)?e:t}function Ha(e){return N(e)&&e.destroy(),null}function AMe(e){return N(e)&&e.dispose(),null}function hp(e){return N(e)&&e.remove(),null}function CC(e){return N(e)&&e.abort(),null}function MMe(e){return N(e)&&e.release(),null}function GZ(e){return null}function OMe(e,t){const i=new Array;for(const r of e)i.push(yg(r,null,t));return i}function kMe(e,t){for(const i of e)ku(i,t)}function yg(e,t,i){return N(e)?i(e):t}function PMe(e){return e.filter(t=>N(t))}function Cx(e,...t){let i=e;for(let r=0;r<t.length&&i;++r)i=i[t[r]];return i}function LMe(e){return e}class Xo{constructor(t=1){this._seed=t}set seed(t){this._seed=t==null?Math.random()*Xo._m:t}getInt(){return this._seed=(Xo._a*this._seed+Xo._c)%Xo._m,this._seed}getFloat(){return this.getInt()/(Xo._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const r=i-t;return t+this.getInt()/Xo._m*r}}Xo._m=2147483647,Xo._a=48271,Xo._c=0;function OO(e,t,i){if(Q(e)&&Q(t))return!0;if(Q(e)||Q(t)||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function RMe(e){return e&&typeof e.length=="number"}const HZ=!!Array.prototype.fill;function FMe(e,t){if(HZ)return new Array(e).fill(t);const i=new Array(e);for(let r=0;r<e;r++)i[r]=t;return i}function NMe(e,t){t===void 0&&(t=e,e=0);const i=new Array(t-e);for(let r=e;r<t;r++)i[r-e]=r;return i}class az{constructor(){this.last=0}}const lz=new az;function cz(e,t,i,r){r=r||lz;const s=Math.max(0,r.last-10);for(let o=s;o<i;++o)if(e[o]===t)return r.last=o,o;const n=Math.min(s,i);for(let o=0;o<n;++o)if(e[o]===t)return r.last=o,o;return-1}function uz(e,t,i,r){const s=i==null?e.length:i,n=cz(e,t,s,r);if(n!==-1)return e[n]=e[s-1],i==null&&e.pop(),t}const Co=new Set;function WZ(e,t,i=e.length,r=t.length,s,n){if(r===0||i===0)return i;Co.clear();for(let a=0;a<r;++a)Co.add(t[a]);s=s||lz;const o=Math.max(0,s.last-10);for(let a=o;a<i;++a)if(Co.has(e[a])&&(n&&n.push(e[a]),Co.delete(e[a]),e[a]=e[i-1],--i,--a,Co.size===0||i===0))return Co.clear(),i;for(let a=0;a<o;++a)if(Co.has(e[a])&&(n&&n.push(e[a]),Co.delete(e[a]),e[a]=e[i-1],--i,--a,Co.size===0||i===0))return Co.clear(),i;return Co.clear(),i}new Xo;function pw(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}function DMe(e,t){if(e.forEach)e.forEach(t);else for(let i=0;i<e.length;i++)t(e[i],i,e)}function JZ(e,t,i){if(e.slice)return e.slice(t,i);t===void 0?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),i===void 0?i=e.length:(i<0&&(i+=e.length),i=Math.min(e.length,Math.max(0,i)));const r=Math.max(0,i-t),s=new e.constructor(r);for(let n=0;n<r;n++)s[n]=e[t+n];return s}function jMe(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}function ZZ(e){return e instanceof Int8Array||e&&e.constructor&&e.constructor.name==="Int8Array"}function YZ(e){return e instanceof Uint8Array||e&&e.constructor&&e.constructor.name==="Uint8Array"}function KZ(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&e.constructor.name==="Uint8ClampedArray"}function QZ(e){return e instanceof Int16Array||e&&e.constructor&&e.constructor.name==="Int16Array"}function XZ(e){return e instanceof Uint16Array||e&&e.constructor&&e.constructor.name==="Uint16Array"}function eY(e){return e instanceof Int32Array||e&&e.constructor&&e.constructor.name==="Int32Array"}function tY(e){return e instanceof Uint32Array||e&&e.constructor&&e.constructor.name==="Uint32Array"}function iY(e){return e instanceof Float32Array||e&&e.constructor&&e.constructor.name==="Float32Array"}function rY(e){return e instanceof Float64Array||e&&e.constructor&&e.constructor.name==="Float64Array"}function Ex(e,t){let i;if(t)for(i in e)e.hasOwnProperty(i)&&(e[i]===void 0?delete e[i]:e[i]instanceof Object&&Ex(e[i],!0));else for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function K(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=fz(e);if(N(t))return t;if(dz(e))return e.clone();if(hz(e))return e.map(K);if(pz(e))return e.clone();const i={};for(const r of Object.getOwnPropertyNames(e))i[r]=K(e[r]);return i}function EC(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=fz(e);if(N(t))return t;if(hz(e)){let i=!0;const r=e.map(s=>{const n=EC(s);return s!=null&&n==null&&(i=!1),n});return i?r:null}if(dz(e))return e.clone();if(!pz(e)){const i=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const s=e[r],n=EC(s);if(s!=null&&n==null)return null;i[r]=n}return i}return null}function dz(e){return typeof e.clone=="function"}function hz(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function pz(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function fz(e){if(ZZ(e)||YZ(e)||KZ(e)||QZ(e)||XZ(e)||eY(e)||tY(e)||iY(e)||rY(e))return JZ(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;return e.forEach((i,r)=>{t.set(r,K(i))}),t}if(e instanceof Set){const t=new Set;return e.forEach(i=>{t.add(K(i))}),t}return null}function Ax(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function mz(e,t,i=!1){return gz(e,t,i)}function Ja(e,t){if(t!=null)return t[e]||yz(e.split("."),!1,t)}function Ln(e,t,i){const r=e.split("."),s=r.pop(),n=yz(r,!0,i);n&&s&&(n[s]=t)}function yz(e,t,i){let r=i;for(const s of e){if(r==null)return;if(!(s in r)){if(!t)return;r[s]={}}r=r[s]}return r}function gz(e,t,i){return t?Object.keys(t).reduce(function(r,s){let n=r[s],o=t[s];return n===o?r:n===void 0?(r[s]=K(o),r):(Array.isArray(o)||Array.isArray(r)?(n=n?Array.isArray(n)?r[s]=n.concat():r[s]=[n]:r[s]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(a=>{n.indexOf(a)===-1&&n.push(a)}):r[s]=o.concat())):o&&typeof o=="object"?r[s]=gz(n,o,i):r.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(r[s]=o),r)},e||{}):e}var kR;const Tt={apiKey:void 0,applicationUrl:(kR=globalThis.location)==null?void 0:kR.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(mz(Tt,globalThis.esriConfig,!0),delete Tt.has),!Tt.assetsPath){const e="4.23.7";Tt.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}Tt.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(Tt,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),Tt.request.corsEnabledServers=[],Tt.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};const sY=/\{([^\}]+)\}/g;function PR(e){return e==null?"":e}function Xa(e,t){return e.replace(sY,typeof t=="object"?(i,r)=>PR(Ja(r,t)):(i,r)=>PR(t(r)))}function kO(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>t&&t.indexOf(i)!==-1?i:`\\${i}`)}function PO(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function zMe(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}const LR={info:0,warn:1,error:2,none:3};class fe{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,fe._loggers[this.module]=this;const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=fe.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(t={}){const i=fe._loggers;return fe._loggers=t,i},set throttlingDisabled(t){fe._throttlingDisabled=t}}}static getLogger(t){let i=fe._loggers[t];return i||(i=new fe({module:t})),i}_log(t,i,...r){if(!!this._matchLevel(t)){if(i!=="always"&&!fe._throttlingDisabled){const s=this._argsToKey(r),n=this._loggedMessages[t].get(s);if(i==="once"&&n!=null||i==="oncePerTick"&&n&&n>=fe._tickCounter)return;this._loggedMessages[t].set(s,fe._tickCounter),fe._scheduleTickCounterIncrement()}for(const s of Tt.log.interceptors)if(s(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,i){let r=this;for(;N(r);){const s=r[t];if(N(s))return s;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,i,...r){console[t](`[${i}]`,...r)}_matchLevel(t){const i=Tt.log.level?Tt.log.level:"warn";return LR[this._parentWithMember("level",i)]<=LR[t]}_argsToKey(...t){const i=(r,s)=>typeof s!="object"||Array.isArray(s)?s:"[Object]";return PO(JSON.stringify(t,i))}static _scheduleTickCounterIncrement(){fe._tickCounterScheduled||(fe._tickCounterScheduled=!0,Promise.resolve().then(()=>{fe._tickCounter++,fe._tickCounterScheduled=!1}))}}fe._loggers={},fe._tickCounter=0,fe._tickCounterScheduled=!1,fe._throttlingDisabled=!1;function Mx(e){return pp(()=>e.forEach(t=>N(t)&&t.remove()))}function pp(e){return{remove:()=>{e&&(e(),e=void 0)}}}function Cs(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function nY(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function fw(e,t,i){return i?N1(e,t,{policy:i,path:""}):N1(e,t,null)}function N1(e,t,i){return t?Object.keys(t).reduce(function(r,s){let n=null,o="merge";if(i&&(n=i.path?`${i.path}.${s}`:s,o=i.policy(n)),o==="replace")return r[s]=t[s],r;if(r[s]===void 0)return r[s]=K(t[s]),r;let a=r[s],l=t[s];if(a===l)return r;if(Array.isArray(l)||Array.isArray(r))a=a?Array.isArray(a)?r[s]=a.concat():r[s]=[a]:r[s]=[],l&&(Array.isArray(l)||(l=[l]),l.forEach(u=>{a.indexOf(u)===-1&&a.push(u)}));else if(l&&typeof l=="object")if(i){const u=i.path;i.path=n,r[s]=N1(a,l,i),i.path=u}else r[s]=N1(a,l,null);else r.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(r[s]=l);return r},e||{}):e}function vz(e){return Array.isArray(e)?e:e.split(".")}function RR(e){return e.indexOf(",")>-1?e.split(",").map(t=>t.trim()):[e.trim()]}function oY(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...RR(i));return t}return RR(e)}function _z(e,t,i,r){const s=oY(t);if(s.length!==1){const n=s.map(o=>r(e,o,i));return Mx(n)}return r(e,s[0],i)}function bz(e){let t=!1;return()=>{t||(t=!0,e())}}function wz(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.getItemAt(s)}const r=Cs(t);return nY(r,i)?r.get(i):t[i]}function Sz(e,t,i){if(e==null)return e;const r=wz(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:Sz(r,t,i+1)}function Gv(e,t,i=0){return typeof t=="string"&&t.indexOf(".")===-1?wz(t,e):Sz(e,vz(t),i)}function D1(e,t){return Gv(e,t)}function FR(e,t){return Gv(t,e)!==void 0}var Wa;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(Wa||(Wa={}));class NR{constructor(t){this.autoDestroy=!1,this.properties=t}}function Hv(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){const r=Object.create(t.properties),s=t.autoDestroy;for(const n in r)r[n]=K(r[n]);t=new NR(r),t.autoDestroy=s,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new NR({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function aY(e){return Hv(e).properties}function Ox(e,t){const i=aY(e);let r=i[t];return r||(r=i[t]={}),r}function lY(e,t){return fw(e,t,uY)}const cY=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function uY(e){return cY.test(e)?"replace":"merge"}var it;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.USER=6]="USER"})(it||(it={}));const AC=it.USER+1;function Ru(e){switch(e){case"defaults":return it.DEFAULTS;case"service":return it.SERVICE;case"portal-item":return it.PORTAL_ITEM;case"web-scene":return it.WEB_SCENE;case"web-map":return it.WEB_MAP;case"user":return it.USER}}function j1(e){switch(e){case it.DEFAULTS:return"defaults";case it.SERVICE:return"service";case it.PORTAL_ITEM:return"portal-item";case it.WEB_SCENE:return"web-scene";case it.WEB_MAP:return"web-map";case it.USER:return"user"}return void 0}function dY(e){return j1(e)}var Gt;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Gt||(Gt={}));let z1,gg=[];const hY=fe.getLogger("esri.core.Accessor");function dt(e){z1!==void 0&&z1.onObservableAccessed(e)}let mw=!1,yw=!1;function cc(e,t,i){if(mw)return LO(e,t,i);xz(e);const r=t.call(i);return Iz(),r}function pY(e,t){return cc(void 0,e,t)}function LO(e,t,i){const r=mw;mw=!0,xz(e);let s=null;try{s=t.call(i)}catch(n){yw&&hY.error(n)}return Iz(),mw=r,s}function xz(e){z1=e,gg.push(e)}function Iz(){const e=gg.pop();z1=gg.length>0?gg[gg.length-1]:void 0,e!==void 0&&e.onTrackingEnd()}function Tz(e,t){if(t.flags&Gt.DepTrackingInitialized)return;const i=yw;yw=!1,t.flags&Gt.AutoTracked?LO(t,t.metadata.get,e):$z(e,t),yw=i}const fY=[];function $z(e,t){t.flags&Gt.ExplicitlyTracking||(t.flags|=Gt.ExplicitlyTracking,LO(t,()=>{const i=t.metadata.dependsOn||fY;for(const r of i)if(typeof r=="string"&&r.indexOf(".")===-1)DR(e,r,!1);else{const s=vz(r);for(let n=0,o=e;n<s.length&&o!=null&&typeof o=="object";++n)o=DR(o,s[n],n!==s.length-1)}}),t.flags&=~Gt.ExplicitlyTracking)}function DR(e,t,i){const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const o=parseInt(r,10);if(!isNaN(o))return Array.isArray(e)?e[o]:e.getItemAt(o)}const s=Cs(e),n=s==null?void 0:s.properties.get(r);return n&&(dt(n),Tz(e,n)),i?e[r]:void 0}class Cz{constructor(t,i){this._observers=t,this._observer=i}remove(){pw(this._observers,this._observer)}}class jR{constructor(t,i,r){this.properties=t,this.propertyName=i,this.metadata=r,this._observers=null,this._accessed=null,this._handles=null,this.flags=Gt.Dirty|(r.nonNullable?Gt.NonNullable:0)|(r.hasOwnProperty("value")?Gt.HasDefaultValue:0)|(r.get===void 0?Gt.DepTrackingInitialized:0)|(r.dependsOn===void 0?Gt.AutoTracked:0)}destroy(){this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){dt(this);const t=this.properties.store,i=this.propertyName,r=this.flags,s=t.get(i);if(r&Gt.Computing||~r&Gt.Dirty&&t.has(i))return s;this.flags|=Gt.Computing;const n=this.properties.host;let o;r&Gt.AutoTracked?o=cc(this,this.metadata.get,n):($z(n,this),o=this.metadata.get.call(n)),t.set(i,o,it.COMPUTED);const a=t.get(i);return a===s?this.flags&=~Gt.Dirty:pY(this.commit,this),this.flags&=~Gt.Computing,a}onObservableAccessed(t){t!==this&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(t)||this._accessed.push(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=Gt.DepTrackingInitialized;const t=this._accessed;if(t===null)return;let i=this._handles;i===null&&(i=this._handles=[]);for(let r=0;r<t.length;++r)i.push(t[r].observe(this));t.length=0}observe(t){return this._observers===null&&(this._observers=[]),this._observers.includes(t)||this._observers.push(t),new Cz(this._observers,t)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&Gt.Overriden&&(this.flags|=Gt.Dirty);const t=this._observers;if(t!==null)for(let i=0;i<t.length;++i)t[i].onInvalidated()}commit(){this.flags&=~Gt.Dirty,this.onCommitted()}onCommitted(){if(this._observers===null)return;const t=this._observers.slice();for(let i=0;i<t.length;++i)t[i].onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}}class RO{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new RO;return this._values.forEach((r,s)=>{t&&t.has(s)||i.set(s,K(r))}),i}get(t){return this._values.get(t)}originOf(){return it.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}function Q_(e,t,i){return e!==void 0}function zR(e,t,i,r){return e!==void 0&&(!(i==null&&e.flags&Gt.NonNullable)||(r.lifecycle,Wa.INITIALIZING,!1))}function mY(e){return e&&typeof e.destroy=="function"}fe.getLogger("esri.core.accessorSupport.Properties");class yY{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Wa.INITIALIZING,this.store=new RO,this._origin=it.USER;const i=this.host.constructor.__accessorMetadata__,r=i.properties;for(const s in r){const n=new jR(this,s,r[s]);this.properties.set(s,n)}this.metadatas=r,this._autoDestroy=i.autoDestroy}initialize(){this.lifecycle=Wa.CONSTRUCTING}constructed(){this.lifecycle=Wa.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,i]of this.properties){const r=this.internalGet(t);r&&mY(r)&&(r.destroy(),~i.flags&Gt.NonNullable&&this._internalSet(i,null)),i.destroy()}else for(const[t,i]of this.properties)i.destroy()}get initialized(){return this.lifecycle!==Wa.INITIALIZING}get(t){const i=this.properties.get(t);if(i.metadata.get)return i.getComputed();dt(i);const r=this.store;return r.has(t)?r.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const r=this.properties.get(t);if(r!==void 0&&r.flags&Gt.HasDefaultValue)return"defaults"}return j1(i)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const i=this.properties.get(t);if(Q_(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const r=this.properties.get(t);Q_(r)&&this._internalSet(r,i)}getDependsInfo(t,i,r){const s=this.properties.get(i);if(!Q_(s))return"";const n=new Set,o=cc({onObservableAccessed:l=>n.add(l),onTrackingEnd:()=>{}},()=>{var l;return(l=s.metadata.get)==null?void 0:l.call(t)});let a=`${r}${t.declaredClass.split(".").pop()}.${i}: ${o}
`;if(n.size===0)return a;r+="  ";for(const l of n){if(!(l instanceof jR))continue;const u=l.properties.host,h=l.propertyName,f=Cs(u);a+=f?f.getDependsInfo(u,h,r):`${r}${h}: undefined
`}return a}setAtOrigin(t,i,r){const s=this.properties.get(t);if(Q_(s))return this._setAtOrigin(s,i,r)}isOverridden(t){const i=this.properties.get(t);return i!==void 0&&!!(i.flags&Gt.Overriden)}clearOverride(t){const i=this.properties.get(t);i!==void 0&&i.flags&Gt.Overriden&&(i.flags&=~Gt.Overriden,i.notifyChange())}override(t,i){const r=this.properties.get(t);if(!zR(r,t,i,this))return;const s=r.metadata.cast;if(s){const n=this._cast(s,i),{valid:o,value:a}=n;if(xT.release(n),!o)return;i=a}r.flags|=Gt.Overriden,this._internalSet(r,i)}set(t,i){const r=this.properties.get(t);if(!zR(r,t,i,this))return;const s=r.metadata.cast;if(s){const o=this._cast(s,i),{valid:a,value:l}=o;if(xT.release(o),!a)return;i=l}const n=r.metadata.set;n?n.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(t){this._origin=Ru(t)}getDefaultOrigin(){return j1(this._origin)}notifyChange(t){const i=this.properties.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.properties.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.properties.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const r=this.lifecycle!==Wa.INITIALIZING?this._origin:it.DEFAULTS;this._setAtOrigin(t,i,r)}_setAtOrigin(t,i,r){const s=this.store,n=t.propertyName;s.has(n,r)&&Ax(i,s.get(n))&&~t.flags&Gt.Overriden&&r===s.originOf(n)||(t.invalidate(),s.set(n,i,r),t.commit(),Tz(this.host,t))}_cast(t,i){const r=xT.acquire();return r.valid=!0,r.value=i,t&&(r.value=t.call(this.host,i,r)),r}}class gY{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const xT=new ua(gY);function vY(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(i,r){if(r==="")return"$";const s=Ja(r,t),n=s==null?"":s;if(n===void 0)throw new Error(`could not find key "${r}" in template`);return n.toString()})}class kx{constructor(t,i,r){this.name=t,this.details=r,this.message=void 0,this instanceof kx&&(this.message=i&&vY(i,r)||"")}toString(){return"["+this.name+"]: "+this.message}}class B extends kx{constructor(t,i,r){if(super(t,i,r),!(this instanceof B))return new B(t,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return K(i)}catch{return"[object]"}}))}}catch(t){throw fe.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new B(t.name,t.message,t.details)}}B.prototype.type="error";function V1(e,t,i){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))V1(e,r,t[r]);else{if(t.indexOf(".")!==-1){const s=t.split("."),n=s.splice(s.length-1,1)[0];return void V1(D1(e,s),n,i)}const r=e.__accessor__;r!=null&&_Y(t,r),e[t]=i}}function _Y(e,t){if(re("esri-unknown-property-errors")&&!bY(e,t))throw new B("set:unknown-property",wY(e,t))}function bY(e,t){return t.metadatas[e]!=null}function wY(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}fe.getLogger("esri.core.accessorSupport.set");class SY extends ua{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=GZ(this._set)}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}const X_=[];function U1(e){X_.push(e),X_.length===1&&queueMicrotask(()=>{const t=X_.slice();X_.length=0;for(const i of t)i()})}const xY=29;class _0{constructor(t,i=xY){this.name=t,this._counter=0,this._items=new Array(i)}record(t){this._items[++this._counter%this._items.length]=t}get median(){return this._items.slice().sort((t,i)=>t-i)[Math.floor(this._items.length/2)]}get average(){return this._items.reduce((t,i)=>t+i,0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}var MC;(function(e){const t=(n,o,a,l)=>{let u=o,h=o;const f=a>>>1,y=n[u-1];for(;h<=f;){h=u<<1,h<a&&l(n[h-1],n[h])<0&&++h;const g=n[h-1];if(l(g,y)<=0)break;n[u-1]=g,u=h}n[u-1]=y},i=(n,o)=>n<o?-1:n>o?1:0;function r(n,o,a,l){o===void 0&&(o=0),a===void 0&&(a=n.length),l===void 0&&(l=i);for(let h=a>>>1;h>o;h--)t(n,h,a,l);const u=o+1;for(let h=a-1;h>o;h--){const f=n[o];n[o]=n[h],n[h]=f,t(n,u,h,l)}}function*s(n,o,a,l){o===void 0&&(o=0),a===void 0&&(a=n.length),l===void 0&&(l=i);for(let h=a>>>1;h>o;h--)t(n,h,a,l),yield;const u=o+1;for(let h=a-1;h>o;h--){const f=n[o];n[o]=n[h],n[h]=f,t(n,u,h,l),yield}}e.sort=r,e.iterableSort=s})(MC||(MC={}));const VR=MC,IY=1.5,TY=1.1;class Nh{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new az,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>UR(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let r=0;r<this._length;r++){const s=this.data[r];t(s)&&i.push(s)}return i}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let r=0;r<i;r++)this.data[this._length++]=t[r]}fill(t,i){for(let r=0;r<i;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,UR(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=cz(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){const i=uz(this.data,t,this.length,this._hint);return i!==void 0&&(this.length=this.length-1),this._shrink(),i}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,r){this.length=WZ(this.data,t,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){t>=this.length||i>=this.length||t===i||([this.data[t],this.data[i]]=[this.data[i],this.data[t]])}sort(t){VR.sort(this.data,0,this.length,t)}iterableSort(t){return VR.iterableSort(this.data,0,this.length,t)}some(t,i){for(let r=0;r<this.length;++r)if(t.call(i,this.data[r],r,this.data))return!0;return!1}filterInPlace(t,i){let r=0;for(let s=0;s<this._length;++s){const n=this.data[s];t.call(i,n,s,this.data)&&(this.data[s]=this.data[r],this.data[r]=n,r++)}if(this._deallocator)for(let s=r;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=r,this._shrink(),this}forAll(t,i){const r=this.length,s=this.data;for(let n=0;n<r;++n)t.call(i,s[n],n,s)}forEach(t,i){for(let r=0;r<this.length;++r)t.call(i,this.data[r],r,this.data)}map(t,i){const r=new Array(this.length);for(let s=0;s<this.length;++s)r[s]=t.call(i,this.data[s],s,this.data);return r}reduce(t,i){let r=i;for(let s=0;s<this.length;++s)r=t(r,this.data[s],s,this.data);return r}has(t){const i=this.length,r=this.data;for(let s=0;s<i;++s)if(r[s]===t)return!0;return!1}}function UR(e){e.data.length>IY*e.length&&(e.data.length=Math.floor(e.length*TY))}function $Y(e){return{setTimeout:(t,i)=>{const r=e.setTimeout(t,i);return{remove:()=>e.clearTimeout(r)}}}}const Wv=$Y(globalThis);function Px(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function sa(e,t,i){if(!Px(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,i);if(Array.isArray(t)){const r=t.slice();for(const s of r)e.addEventListener(s,i);return{remove(){for(const s of r)e.removeEventListener(s,i)}}}return e.addEventListener(t,i),{remove(){e.removeEventListener(t,i)}}}function Ez(e,t,i){if(!Px(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=sa(e,t,s=>{r.remove(),i.call(e,s)});return{remove(){r.remove()}}}function CY(e,t,i){let r=!1;const s=sa(e,t,n=>{r||i.call(e,n)});return{resume(){r=!1},pause(){r=!0},remove(){s.remove()}}}const EY={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function Us({key:e}){return EY[e]||e}function Az(e){return Promise.all(e)}function FO(e){return new Promise((t,i)=>{try{e(t,i)}catch(r){Promise.resolve().then(()=>i(r))}})}function qi(e="Aborted"){return new B("AbortError",e)}function Gi(e,t="Aborted"){if(da(e))throw qi(t)}function Lx(e){return N(e)?"aborted"in e?e:e.signal:e}function da(e){const t=Lx(e);return N(t)&&t.aborted}function Jv(e){if(_o(e))throw e}function OC(e){if(!_o(e))throw e}function rs(e,t){const i=Lx(e);if(!Q(i)){if(!i.aborted)return Ez(i,"abort",()=>t());t()}}function Rx(e,t){const i=Lx(e);if(!Q(i))return Gi(i),Ez(i,"abort",()=>t(qi()))}function Mz(e,t){const i=Lx(t);return Q(i)?e:new Promise((r,s)=>{let n=rs(t,()=>s(qi()));const o=()=>n=hp(n);e.then(o,o),e.then(r,s)})}function _o(e){return e&&e.name==="AbortError"}function B1(e){return e.catch(t=>{if(!_o(t))throw t})}function uc(){let e=null;const t=new Promise((i,r)=>{e={promise:void 0,resolve:i,reject:r}});return e.promise=t,e}function mi(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e);return mi(i.map(r=>e[r])).then(r=>{const s={};return i.forEach((n,o)=>s[n]=r[o]),s})}const t=e;return FO(i=>{const r=[];let s=t.length;s===0&&i(r),t.forEach(n=>{const o={promise:n||Promise.resolve(n)};r.push(o),o.promise.then(a=>{o.value=a}).catch(a=>{o.error=a}).then(()=>{--s,s===0&&i(r)})})})}function AY(e){return mi(e).then(t=>t.filter(i=>!!i.value).map(i=>i.value))}function BR(e){return Promise.reject(e)}function Gf(e){return Promise.resolve(e)}function Fx(e,t,i){const r=new AbortController;return rs(i,()=>r.abort()),new Promise((s,n)=>{let o=setTimeout(()=>{o=0,s(t)},e);rs(r,()=>{o&&(clearTimeout(o),n(qi()))})})}function yc(e){return e&&typeof e.then=="function"}function kC(e){return yc(e)?e:Promise.resolve(e)}function Nx(e,t=-1){let i,r,s,n,o=null;const a=(...l)=>{if(i){r=l,n&&n.reject(qi()),n=uc();const y=n.promise;if(o){const g=o;o=null,g.abort()}return y}if(s=n||uc(),n=null,t>0){const y=new AbortController;i=kC(e(...l,y.signal));const g=i;Fx(t).then(()=>{i===g&&(n?y.abort():o=y)})}else i=1,i=kC(e(...l));const u=()=>{const y=r;r=s=i=o=null,y!=null&&a(...y)},h=i,f=s;return h.then(u,u),h.then(f.resolve,f.reject),f.promise};return a}function vg(){let e,t;const i=new Promise((s,n)=>{e=s,t=n}),r=s=>{e(s)};return r.resolve=s=>e(s),r.reject=s=>t(s),r.timeout=(s,n)=>Wv.setTimeout(()=>r.reject(n),s),r.promise=i,r}function Oz(e,t){let i,r=new AbortController;const s=e(r.signal);let n={promise:s,finished:!1,abort:()=>{r&&(r.abort(),r=null)}};const o=()=>{n&&(n.finished=!0,n=null),N(i)&&(i.remove(),i=null),r=null};return s.then(o,o),i=rs(t,()=>{N(n)&&n.abort()}),n}function VMe(e){return Promise.resolve().then(()=>{Gi(e)})}function UMe(e){return e}class MY{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}}class OY{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let PC=0;const Fy={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},LC=["prepare","preRender","render","postRender","update","finish"],RC=[],Jh=new Nh;class kY{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const q1={frameTasks:Jh,willDispatch:!1,clearFrameTasks:PY,dispatch:Lz,executeFrameTasks:LY};function Zv(e){const t=new OY(e);return RC.push(t),q1.willDispatch||(q1.willDispatch=!0,U1(Lz)),t}function $m(e){const t=new MY(e);return Jh.push(t),G1==null&&(PC=performance.now(),G1=requestAnimationFrame(kz)),new kY(t)}let G1=null;function PY(e=!1){Jh.forAll(t=>{t.removed=!0}),e&&Pz()}function kz(){const e=performance.now();G1=null,G1=Jh.length>0?requestAnimationFrame(kz):null,q1.executeFrameTasks(e)}function LY(e){const t=e-PC;PC=e;const i=1e3/60,r=Math.max(0,t-i);for(let s=0;s<LC.length;s++){const n=performance.now(),o=LC[s];Jh.forAll(a=>{var l;a.paused||a.removed||(s===0&&a.ticks++,a.phases[o]&&(Fy.time=e,Fy.deltaTime=a.ticks===0?0:t,Fy.elapsedFrameTime=performance.now()-e,Fy.frameDuration=i-r,(l=a.phases[o])==null||l.call(a,Fy)))}),RY[s].record(performance.now()-n)}Pz(),FY.record(performance.now()-e)}const eb=new Nh;function Pz(){Jh.forAll(e=>{e.removed&&eb.push(e)}),Jh.removeUnorderedMany(eb.data,eb.length),eb.clear()}function Lz(){for(;RC.length;){const e=RC.shift();e.isActive&&e.callback()}q1.willDispatch=!1}function BMe(e=1,t){const i=vg(),r=()=>{da(t)?i.reject(qi()):e===0?i():(--e,U1(()=>r()))};return r(),i.promise}const RY=LC.map(e=>new _0(e)),FY=new _0("total");let NY=0;function lm(){return++NY}class Dx{constructor(t){this._notify=t,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}onObservableAccessed(t){this._accessed.includes(t)||this._accessed.push(t)}onTrackingEnd(){const t=this._handles,i=this._accessed;for(let r=0;r<i.length;++r)t.push(i[r].observe(this));i.length=0}clear(){const t=this._handles;for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}let cm=!1;const H1=[];function Rz(e,t){let i=new Dx(n),r=null,s=!1;function n(){if(!i||s)return;if(cm)return void Dz(n);const a=r;i.clear(),cm=!0,s=!0,r=cc(i,e),s=!1,cm=!1,t(r,a),jz()}function o(){i&&(i.destroy(),i=null,r=null)}return s=!0,r=cc(i,e),s=!1,{remove:o}}function Fz(e,t){let i=new Dx(s),r=null;function s(){t(r,o)}function n(){i&&(i.destroy(),i=null),r=null}function o(){return i?(i.clear(),r=cc(i,e),r):null}return o(),{remove:n}}function Nz(e){let t=new Dx(r),i=!1;function r(){t&&!i&&(cm?Dz(r):(t.clear(),cm=!0,i=!0,cc(t,e),i=!1,cm=!1,jz()))}function s(){t&&(t.destroy(),t=null)}return i=!0,cc(t,e),i=!1,{remove:s}}function Dz(e){H1.includes(e)||H1.unshift(e)}function jz(){for(;H1.length;)H1.pop()()}var b0;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(b0||(b0={}));class K0{constructor(){this.uid=lm(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,r,s,n){return this.pool.acquire(b0.Untracked,t,i,r,s,n,Ax)}static acquireTracked(t,i,r,s){return this.pool.acquire(b0.Tracked,t,i,r,null,null,s)}notify(t,i){this.type===b0.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i)}acquire(t,i,r,s,n,o,a){this.uid=lm(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=r,this.getValue=s,this.target=n,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=lm(),this.removed=!0}}K0.pool=new SY(K0);const gw=new ws,Gu=new Set;let W1;function J1(e){Gu.delete(e),Gu.add(e),W1||(W1=Zv(zY))}function DY(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function jY(e){for(const t of Gu.values())t.target===e&&(t.removed=!0)}function zY(){let e=10;for(;W1&&e--;){W1=null;const t=VY(),i=gw.acquire();for(const r of t){const s=r.uid;DY(r),s===r.uid&&r.removed&&i.push(r)}for(const r of Gu)r.removed&&(i.push(r),Gu.delete(r));for(const r of i)K0.pool.release(r);gw.release(i),gw.release(t),UY.forEach(r=>r())}}function VY(){const e=gw.acquire();e.length=Gu.size;let t=0;for(const i of Gu)e[t]=i,++t;return Gu.clear(),e}const UY=new Set;function BY(e,t,i){let r=_z(e,t,i,(s,n,o)=>{let a,l,u=Fz(()=>Gv(s,n),(h,f)=>{s.__accessor__.destroyed||a&&a.uid!==l?r.remove():(a||(a=K0.acquireUntracked(h,o,f,s,n),l=a.uid),J1(a))});return{remove:bz(()=>{u.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,J1(a)),a=null),r=u=null})}});return r}function qY(e,t,i){const r=_z(e,t,i,(s,n,o)=>{let a=!1;return Rz(()=>Gv(s,n),(l,u)=>{s.__accessor__.destroyed?r.remove():a||(a=!0,Ax(u,l)||o.call(s,l,u,n,s),a=!1)})});return r}function GY(e,t,i,r=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:r?qY(e,t,i):BY(e,t,i)}function HY(e,t,i){let r,s,n=Fz(e,(o,a)=>{r&&r.uid!==s?n.remove():(r||(r=K0.acquireTracked(o,t,a,i),s=r.uid),J1(r))});return{remove:bz(()=>{n.remove(),r&&(r.uid!==s||r.removed||(r.removed=!0,J1(r)),r=null),n=null})}}function WY(e,t,i){let r=!1;return Rz(e,(s,n)=>{r||(r=!0,i(n,s)||t(s,n),r=!1)})}function JY(e,t,i=!1,r=Ax){return i?WY(e,t,r):HY(e,t,r)}function jx(e,t){for(const[i,r]of e)if(t(r,i))return!0;return!1}function ZY(e,t,i){const r=e.get(t);if(r!==void 0)return r;const s=i();return e.set(t,s),s}const um=fe.getLogger("esri.core.Accessor");function YY(e){return e==null?e:new Date(e)}function KY(e){return e==null?e:!!e}function Yv(e){return e==null?e:e.toString()}function oo(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function NO(e){return e==null?e:Math.round(parseFloat(e))}function zz(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function Z1(e,t){return t!=null&&e&&!(t instanceof e)}function Vz(e){return e&&"isCollection"in e}function qR(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function QY(e,t){if(!t||!t.constructor||!Vz(t.constructor))return FC(e,t)?t:new e(t);const i=qR(e.prototype.itemType),r=qR(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):(FC(e,t),t):new e(t):t}function FC(e,t){return!!zz(t)&&(um.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+zx(e)+"'"),!0)}function DO(e,t){return t==null?t:Vz(e)?QY(e,t):Z1(e,t)?FC(e,t)?t:new e(t):t}function zx(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const XY=new WeakMap;function eK(e){switch(e){case Number:return oo;case si:return NO;case Boolean:return KY;case String:return Yv;case Date:return YY;default:return ZY(XY,e,()=>DO.bind(null,e))}}function jt(e,t){const i=eK(e);return arguments.length===1?i:i(t)}function Q0(e,t,i){return arguments.length===1?Q0.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,i)):[e(t,i)])}function tK(e,t){return arguments.length===1?Q0(jt.bind(null,e)):Q0(jt.bind(null,e),t)}function Uz(e,t,i){return t!==0&&Array.isArray(i)?i.map(r=>Uz(e,t-1,r)):e(i)}function Y1(e,t,i){if(arguments.length===2)return Y1.bind(null,e,t);if(!i)return i;let r=t,s=i=Uz(e,t,i);for(;r>0&&Array.isArray(s);)r--,s=s[0];if(s!==void 0)for(let n=0;n<r;n++)i=[i];return i}function iK(e,t,i){return arguments.length===2?Y1(jt.bind(null,e),t):Y1(jt.bind(null,e),t,i)}function Bz(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function NC(e,t){if(arguments.length===2)return NC(e).call(null,t);const i=new Set,r=e.filter(a=>typeof a!="function"),s=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||i.add(a);let n=null,o=null;return(a,l)=>{if(a==null)return a;const u=typeof a,h=u==="string"||u==="number";return h&&(i.has(a)||s.some(f=>u==="string"&&f===String||u==="number"&&f===Number))||u==="object"&&s.some(f=>!Z1(a,f))?a:(h&&r.length?(n||(n=r.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),um.error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${n}`)):typeof a=="object"&&s.length?(o||(o=s.map(f=>zx(f)).join(", ")),um.error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):um.error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function el(e,t){if(arguments.length===2)return el(e).call(null,t);const i={},r=[],s=[];for(const l in e.typeMap){const u=e.typeMap[l];i[l]=jt(u),r.push(zx(u)),s.push(l)}const n=()=>`'${r.join("', '")}'`,o=()=>`'${s.join("', '")}'`,a=typeof e.key=="string"?l=>l[e.key]:e.key;return l=>{if(e.base&&!Z1(e.base,l)||l==null)return l;const u=a(l)||e.defaultKeyValue,h=i[u];if(!h)return um.error("Accessor#set",`Invalid property value, value needs to be one of ${n()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!Z1(e.typeMap[u],l))return l;if(typeof e.key=="string"&&!zz(l)){const f={};for(const y in l)y!==e.key&&(f[y]=l[y]);return h(f)}return h(l)}}class si{}const qMe={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function rK(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function qz(e){switch(e.type){case"native":return jt(e.value);case"array":return Q0(qz(e.value));case"one-of":return sK(e);default:return null}}function sK(e){let t=null;return(i,r)=>jC(i,e)?i:(t==null&&(t=DC(e)),um.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function DC(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case si:return"integer";case Date:return"date";default:return zx(e.value)}case"array":return`array of ${DC(e.value)}`;case"one-of":{const t=e.values.map(i=>DC(i));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function jC(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case si:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!jC(i,t.value));case"one-of":return t.values.some(i=>jC(e,i))}}function d(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,i),s=Ox(t,i);r&&(r.get||r.set?(s.get=r.get||s.get,s.set=r.set||s.set):"value"in r&&("value"in e&&fe.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=r.value)),e.readOnly!=null&&(s.readOnly=e.readOnly);const n=e.aliasOf;if(n){const l=typeof n=="string"?n:n.source,u=typeof n=="string"?null:n.overridable===!0;let h;s.dependsOn=[l],s.get=function(){let f=D1(this,l);if(typeof f=="function"){h||(h=l.split(".").slice(0,-1).join("."));const y=D1(this,h);y&&(f=f.bind(y))}return f},s.readOnly||(s.set=u?function(f){f!==void 0?this._override(i,f):this._clearOverride(i)}:function(f){V1(this,l,f)})}const o=e.type,a=e.types;s.cast||(o?s.cast=nK(o):a&&(Array.isArray(a)?s.cast=Q0(el(a[0])):s.cast=el(a))),e.range&&(s.cast=oK(s.cast,e.range)),lY(s,e)}}function Gz(e,t,i){const r=Ox(e,i);r.json||(r.json={});let s=r.json;return t!==void 0&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function nK(e){let t=0,i=e;if(rK(e))return qz(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const r=i;if(Bz(r))return t===0?NC(r):Y1(NC(r),t);if(t===1)return tK(r);if(t>1)return iK(r,t);const s=e;return s.from?s.from:jt(s)}function oK(e,t){return i=>{let r=+e(i);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}function aK(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(t[r]){const s=t[r];i[r].forEach(n=>{t[n]=s}),delete t[r]}}}class Es extends kx{constructor(t,i,r){if(super(t,i,r),!(this instanceof Es))return new Es(t,i,r)}}Es.prototype.type="warning";function Hz(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const zC=fe.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function GR(e,t,i){var r,s;e&&(!i&&!t.read||(r=t.read)!=null&&r.reader||((s=t.read)==null?void 0:s.enabled)===!1||uK(e)&&Ln("read.reader",ty(e),t))}function ty(e){var t;const i=(t=e.ndimArray)!=null?t:0;if(i>1)return cK(e);if(i===1)return HR(e);if("type"in e&&Jz(e.type)){var r,s;const n=(r=e.type.prototype)==null||(s=r.itemType)==null?void 0:s.Type,o=HR(typeof n=="function"?{type:n}:{types:n});return(a,l,u)=>{const h=o(a,l,u);return h&&new e.type(h)}}return jO(e)}function jO(e){return"type"in e?lK(e.type):dK(e.types)}function lK(e){return e.prototype.read?(t,i,r)=>{if(t==null)return t;const s=typeof t;if(s!=="object")return void zC.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const n=new e;return n.read(t,r),n}:e.fromJSON}function Wz(e,t,i,r){return r!==0&&Array.isArray(t)?t.map(s=>Wz(e,s,i,r-1)):e(t,void 0,i)}function cK(e){var t;const i=jO(e),r=Wz.bind(null,i),s=(t=e.ndimArray)!=null?t:0;return(n,o,a)=>{if(n==null)return n;n=r(n,a,s);let l=s,u=n;for(;l>0&&Array.isArray(u);)l--,u=u[0];if(u!==void 0)for(let h=0;h<l;h++)n=[n];return n}}function HR(e){const t=jO(e);return(i,r,s)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const l=t(a,void 0,s);l!==void 0&&o.push(l)}return o}const n=t(i,void 0,s);return n!==void 0?[n]:void 0}}function Jz(e){if(!Hz(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?zO(t.Type):Zz(t.Type))}function uK(e){return"types"in e?Zz(e.types):zO(e.type)}function zO(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||Jz(e))}function Zz(e){for(const t in e.typeMap)if(!zO(e.typeMap[t]))return!1;return!0}function dK(e){var t;let i=null;const r=(t=e.errorContext)!=null?t:"type";return(s,n,o)=>{if(s==null)return s;const a=typeof s;if(a!=="object")return void zC.error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);i||(i=hK(e));const l=e.key;if(typeof l!="string")return;const u=s[l],h=u?i[u]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){const y=`Type '${u||"unknown"}' is not supported`;return o&&o.messages&&s&&o.messages.push(new Es(`${r}:unsupported`,y,{definition:s,context:o})),void zC.error(y)}const f=new h;return f.read(s,o),f}}function hK(e){const t={};for(const s in e.typeMap){var i,r;const n=e.typeMap[s],o=Hv(n.prototype);if(typeof e.key=="function")continue;const a=o.properties[e.key];if(!a)continue;(i=a.json)!=null&&i.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"&&(t[a.json.type[0]]=n);const l=(r=a.json)==null?void 0:r.write;if(!l||!l.writer){t[s]=n;continue}const u=l.target,h=typeof u=="string"?u:e.key,f={};l.writer(s,f,h),f[h]&&(t[f[h]]=n)}return t}function pK(e){if(e.json||(e.json={}),JR(e.json),ZR(e.json),WR(e.json),e.json.origins)for(const t in e.json.origins)JR(e.json.origins[t]),ZR(e.json.origins[t]),WR(e.json.origins[t]);return!0}function WR(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function JR(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function ZR(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}const fK=fe.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function YR(e,t){var i;if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=(i=e==null?void 0:e.ndimArray)!=null?i:0;e&&(r===1||"type"in e&&Hz(e.type))?t.write.writer=gK:r>1?t.write.writer=vK(r):t.types?Array.isArray(t.types)?t.write.writer=yK(t.types[0]):t.write.writer=mK(t.types):t.write.writer=X0}function mK(e){return(t,i,r,s)=>t?Yz(t,e,s)?X0(t,i,r,s):void 0:X0(t,i,r,s)}function Yz(e,t,i){for(const n in t.typeMap)if(e instanceof t.typeMap[n])return!0;if(i!=null&&i.messages){var r,s;const n=(r=t.errorContext)!=null?r:"type",o=`Values of type '${(s=typeof t.key!="function"?e[t.key]:e.declaredClass)!=null?s:"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new B(`${n}:unsupported`,o,{definition:e,context:i})),fK.error(o)}return!1}function yK(e){return(t,i,r,s)=>!t||!Array.isArray(t)?X0(t,i,r,s):X0(t.filter(n=>Yz(n,e,s)),i,r,s)}function X0(e,t,i,r){Ln(i,K1(e,r),t)}function K1(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?Q1(e):e}function Q1(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function gK(e,t,i,r){let s;e===null?s=null:e&&typeof e.map=="function"?(s=e.map(n=>K1(n,r)),typeof s.toArray=="function"&&(s=s.toArray())):s=[K1(e,r)],Ln(i,s,t)}function Kz(e,t,i){return i!==0&&Array.isArray(e)?e.map(r=>Kz(r,t,i-1)):K1(e,t)}function vK(e){return function(t,i,r,s){let n;if(t===null)n=null;else{n=Kz(t,s,e);let o=e,a=n;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)n=[n]}Ln(r,n,i)}}function VC(e,t){return VO(e,"read",t)}function Qz(e,t){return VO(e,"write",t)}function VO(e,t,i){let r=e&&e.json;if(e&&e.json&&e.json.origins&&i){const s=e.json.origins[i.origin];s&&(t==="any"||t in s)&&(r=s)}return r}function _K(e){const t=bK(e);if(e.json.origins)for(const i in e.json.origins){const r=e.json.origins[i],s=r.types?wK(r):t;GR(s,r,!1),r.types&&!r.write&&e.json.write&&e.json.write.enabled&&(r.write=k({},e.json.write)),YR(s,r)}GR(t,e.json,!0),YR(t,e.json)}function bK(e){return e.json.types?UC(e.json):e.type?Xz(e):UC(e)}function wK(e){return e.type?Xz(e):UC(e)}function Xz(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!Bz(i);)i=i[0],t++;return{type:i,ndimArray:t}}function UC(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function SK(e){pK(e)&&(aK(e),_K(e))}const IT=new Set,TT=new Set;function O(e){return t=>{t.prototype.declaredClass=e,IK(t);const i=[],r=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!IT.has(s.initialize)&&(IT.add(s.initialize),i.push(s.initialize)),s.hasOwnProperty("destroy")&&!TT.has(s.destroy)&&(TT.add(s.destroy),r.push(s.destroy)),s=Object.getPrototypeOf(s);IT.clear(),TT.clear();class n extends t{constructor(...a){if(super(...a),this.constructor===n&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=i.length-1;l>=0;l--)i[l].call(this)}}),r.length){let l=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0;for(let u=0;u<r.length;u++)r[u].call(this)}}})}this.postscript(...a)}}}return n.__accessorMetadata__=Hv(t.prototype),n.prototype.declaredClass=e,n}}function xK(e,t){return t.get==null?function(){const i=this.__accessor__.properties.get(e);if(i===void 0)return;dt(i);const r=this.__accessor__.store;return r.has(e)?r.get(e):i.metadata.value}:function(){const i=this.__accessor__.properties.get(e);if(i!==void 0)return i.getComputed()}}function IK(e){const t=e.prototype,i=Hv(t).properties,r={};for(const s of Object.getOwnPropertyNames(i)){const n=i[s];SK(n),r[s]={enumerable:!0,configurable:!0,get:xK(s,n),set(o){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this)){if(a.initialized&&n.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${s}' of ${this.declaredClass}`);if(a.lifecycle===Wa.CONSTRUCTED&&n.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${s}' of ${this.declaredClass}`);a.set(s,o)}}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,r)}function TK(e){if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor&&e.constructor.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}class Ee{constructor(...t){if(this.constructor===Ee)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new yY(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const n=this;class o extends n{constructor(...l){super(...l),this.inherited=null,s&&s.apply(this,l)}}Hv(o.prototype);for(const a in t){const l=t[a];o.prototype[a]=typeof l=="function"?function(...u){const h=this.inherited;let f;this.inherited=function(...y){if(n.prototype[a])return n.prototype[a].apply(this,y)};try{f=l.apply(this,u)}catch(y){throw this.inherited=h,y}return this.inherited=h,f}:t[a]}for(const a in i){const l=TK(i[a]);d(l)(o.prototype,a)}return O(r)(o)}postscript(t){const i=this.__accessor__,r=i.ctorArgs||t;i.initialize(),r&&(this.set(r),i.ctorArgs=null),i.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(jY(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&this.__accessor__.lifecycle===Wa.CONSTRUCTED||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return D1(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}isInstanceOf(t){return ef(fe.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof t}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return V1(this,t,i),this}watch(t,i,r){return GY(this,t,i,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,i){return this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}}class dm{constructor(){this._emitter=new dm.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}}(function(e){class t{constructor(s=null){this.target=s,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(s,n){const o=this._listenersMap&&this._listenersMap.get(s);if(!o)return!1;const a=this.target||this;return[...o].forEach(l=>{l.call(a,n)}),o.length>0}on(s,n){if(Array.isArray(s)){const a=s.map(l=>this.on(l,n));return Mx(a)}if(s.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const o=this._listenersMap.get(s)||[];return o.push(n),this._listenersMap.set(s,o),{remove:()=>{const a=this._listenersMap&&this._listenersMap.get(s)||[],l=a.indexOf(n);l>=0&&a.splice(l,1)}}}once(s,n){const o=this.on(s,a=>{o.remove(),n.call(null,a)});return o}hasEventListener(s){const n=this._listenersMap&&this._listenersMap.get(s);return n!=null&&n.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let s=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(n,o){return this._emitter.emit(n,o)}on(n,o){return this._emitter.on(n,o)}once(n,o){return this._emitter.once(n,o)}hasEventListener(n){return this._emitter.hasEventListener(n)}};return s=c([O("esri.core.Evented")],s),s};let i=class extends Ee{constructor(){super(...arguments),this._emitter=new dm.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,s){return this._emitter.emit(r,s)}on(r,s){return this._emitter.on(r,s)}once(r,s){return this._emitter.once(r,s)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=c([O("esri.core.Evented")],i),e.EventedAccessor=i})(dm||(dm={}));const bo=dm;var Rt;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Rt||(Rt={}));function UO(e){return(t,i)=>{t[i]=e}}class $K{constructor(){this._observers=[]}observe(t){return this._observers.includes(t)||this._observers.push(t),new Cz(this._observers,t)}notify(){const t=this._observers.slice();for(let i=0;i<t.length;++i){const r=t[i];r.onInvalidated(),r.onCommitted()}}}var Ql;class CK{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}}const Bn=new ua(CK,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),EK=()=>{};function $T(e){return e?e instanceof fh?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function CT(e){if(e&&e.length)return e[0]}function AK(e,t,i,r){const s=Math.min(e.length-i,t.length-r);let n=0;for(;n<s&&e[i+n]===t[r+n];)n++;return n}function eV(e,t,i,r){t&&t.forEach((s,n,o)=>{e.push(s),eV(e,i.call(r,s,n,o),i,r)})}const Tc=new Set,$c=new Set,Cc=new Set,ET=new Map;let MK=0,fh=Ql=class extends bo.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new $K,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:MK++})}static isCollection(e){return e!=null&&e instanceof Ql}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Ql?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return dt(this._observable),this._items}set items(e){this._emitBeforeChanges(Rt.ADD)||(this._splice(0,this.length,$T(e)),this._emitAfterChanges(Rt.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const i=this._chgListeners,r={removed:!1,callback:t};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=EK,r.removed=!0,i.splice(i.indexOf(r),1)}}}return this._emitter.on(e,t)}once(e,t){const i=this.on(e,t);return{remove(){i.remove()}}}add(e,t){if(dt(this._observable),this._emitBeforeChanges(Rt.ADD))return this;const i=this.getNextIndex(t!=null?t:null);return this._splice(i,0,[e]),this._emitAfterChanges(Rt.ADD),this}addMany(e,t=this._items.length){if(dt(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(Rt.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,$T(e)),this._emitAfterChanges(Rt.ADD),this}at(e){if(dt(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(dt(this._observable),!this.length||this._emitBeforeChanges(Rt.REMOVE))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(Rt.REMOVE),e}clone(){return dt(this._observable),this._createNewInstance({items:this._items.map(K)})}concat(...e){dt(this._observable);const t=e.map($T);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(dt(this._observable),!this.length||this._emitBeforeChanges(Rt.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let s=0;s<r;s++)e.call(t,i[s],s,i);this._emitAfterChanges(Rt.REMOVE)}every(e,t){return dt(this._observable),this._items.every(e,t)}filter(e,t){let i;return dt(this._observable),i=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return dt(this._observable),this._items.find(e,t)}findIndex(e,t){return dt(this._observable),this._items.findIndex(e,t)}flatten(e,t){dt(this._observable);const i=[];return eV(i,this,e,t),new Ql(i)}forEach(e,t){return dt(this._observable),this._items.forEach(e,t)}getItemAt(e){return dt(this._observable),this._items[e]}getNextIndex(e){dt(this._observable);const t=this.length;return(e=e==null?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return dt(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return dt(this._observable),this._items.indexOf(e,t)}join(e=","){return dt(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return dt(this._observable),this._items.lastIndexOf(e,t)}map(e,t){dt(this._observable);const i=this._items.map(e,t);return new Ql({items:i})}reorder(e,t=this.length-1){dt(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(Rt.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(Rt.MOVE)}return e}}pop(){if(dt(this._observable),!this.length||this._emitBeforeChanges(Rt.REMOVE))return;const e=CT(this._splice(this.length-1,1));return this._emitAfterChanges(Rt.REMOVE),e}push(...e){return dt(this._observable),this._emitBeforeChanges(Rt.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Rt.ADD)),this.length}reduce(e,t){dt(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){dt(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return dt(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(dt(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Rt.REMOVE))return;const t=CT(this._splice(e,1));return this._emitAfterChanges(Rt.REMOVE),t}removeMany(e){if(dt(this._observable),!e||!e.length||this._emitBeforeChanges(Rt.REMOVE))return[];const t=e instanceof Ql?e.toArray():e,i=this._items,r=[],s=t.length;for(let n=0;n<s;n++){const o=t[n],a=i.indexOf(o);if(a>-1){const l=1+AK(t,i,n+1,a+1),u=this._splice(a,l);u&&u.length>0&&r.push.apply(r,u),n+=l-1}}return this._emitAfterChanges(Rt.REMOVE),r}reverse(){if(dt(this._observable),this._emitBeforeChanges(Rt.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Rt.MOVE),this}shift(){if(dt(this._observable),!this.length||this._emitBeforeChanges(Rt.REMOVE))return;const e=CT(this._splice(0,1));return this._emitAfterChanges(Rt.REMOVE),e}slice(e=0,t=this.length){return dt(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return dt(this._observable),this._items.some(e,t)}sort(e){if(dt(this._observable),!this.length||this._emitBeforeChanges(Rt.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Rt.MOVE),this}splice(e,t,...i){dt(this._observable);const r=(t?Rt.REMOVE:0)|(i.length?Rt.ADD:0);if(this._emitBeforeChanges(r))return[];const s=this._splice(e,t,i)||[];return this._emitAfterChanges(r),s}toArray(){return dt(this._observable),this._items.slice()}toJSON(){return dt(this._observable),this.toArray()}toLocaleString(){return dt(this._observable),this._items.toLocaleString()}toString(){return dt(this._observable),this._items.toString()}unshift(...e){return dt(this._observable),!e.length||this._emitBeforeChanges(Rt.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Rt.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,s=this.itemType;let n,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Zv(()=>this._dispatchChange())),t){if(o=r.splice(e,t),this.hasEventListener("before-remove")){const a=Bn.acquire();a.target=this,a.cancellable=!0;for(let l=0,u=o.length;l<u;l++)n=o[l],a.reset(n),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),r.splice(e,0,n),e+=1,l-=1,u-=1);Bn.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=Bn.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let u=0;u<l;u++)a.reset(o[u]),this.emit("after-remove",a);Bn.release(a)}}if(i&&i.length){if(s){const h=[];for(const f of i){const y=s.ensureType(f);y==null&&f!=null||h.push(y)}i=h}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),u=e===this.length;if(a||l){const h=Bn.acquire();h.target=this,h.cancellable=!0;const f=Bn.acquire();f.target=this,f.cancellable=!1;for(const y of i)a?(h.reset(y),this.emit("before-add",h),h.defaultPrevented||(u?r.push(y):r.splice(e++,0,y),this._set("length",r.length),l&&(f.reset(y),this.emit("after-add",f)))):(u?r.push(y):r.splice(e++,0,y),this._set("length",r.length),f.reset(y),this.emit("after-add",f));Bn.release(f),Bn.release(h)}else{if(u)for(const h of i)r.push(h);else r.splice(e,0,...i);this._set("length",r.length)}}return(i&&i.length||o&&o.length)&&this._notifyChangeEvent(i,o),o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=Bn.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,Bn.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Bn.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Bn.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;Tc.clear(),$c.clear(),Cc.clear();for(const{added:l,removed:u}of i){if(l)if(Cc.size===0&&$c.size===0)for(const h of l)Tc.add(h);else for(const h of l)$c.has(h)?(Cc.add(h),$c.delete(h)):Cc.has(h)||Tc.add(h);if(u)if(Cc.size===0&&Tc.size===0)for(const h of u)$c.add(h);else for(const h of u)Tc.has(h)?Tc.delete(h):(Cc.delete(h),$c.add(h))}const r=ws.acquire();Tc.forEach(l=>{r.push(l)});const s=ws.acquire();$c.forEach(l=>{s.push(l)});const n=this._items,o=t.items,a=ws.acquire();if(Cc.forEach(l=>{o.indexOf(l)!==n.indexOf(l)&&a.push(l)}),t.listeners&&(r.length||s.length||a.length)){const l={target:this,added:r,removed:s,moved:a},u=t.listeners.length;for(let h=0;h<u;h++){const f=t.listeners[h];f.removed||f.callback.call(this,l)}}ws.release(r),ws.release(s),ws.release(a)}Tc.clear(),$c.clear(),Cc.clear()}};fh.ofType=e=>{if(!e)return Ql;if(ET.has(e))return ET.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const s=e.typeMap[r].prototype.declaredClass;t?t+=` | ${s}`:t=s}let i=class extends Ql{};return c([UO({Type:e,ensureType:typeof e=="function"?jt(e):el(e)})],i.prototype,"itemType",void 0),i=c([O(`esri.core.Collection<${t}>`)],i),ET.set(e,i),i},c([d()],fh.prototype,"length",void 0),c([d()],fh.prototype,"items",null),fh=Ql=c([O("esri.core.Collection")],fh);const ke=fh;function Zh(e,t,i=ke){return t||(t=new i),t===e||(t.removeAll(),OK(e)?t.addMany(e):e&&t.add(e)),t}function tV(e){return e}function OK(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}class BO{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new BO;return this._values.forEach((r,s)=>{t&&t.has(s)||i.set(s,K(r.value),r.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const r=this._values.get(t);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(t){var i,r;return(i=(r=this._values.get(t))==null?void 0:r.origin)!=null?i:it.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(r=>{var s;return((s=this._values.get(r))==null?void 0:s.origin)===t})}set(t,i,r){if((r=this._normalizeOrigin(r))===it.DEFAULTS){const s=this._values.get(t);if(s&&s.origin!=null&&s.origin>r)return}this._values.set(t,new kK(i,r))}delete(t,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(t))==null?void 0:r.origin)!==i||this._values.delete(t)}has(t,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(t))==null?void 0:r.origin)===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},r)=>t(i,r))}_normalizeOrigin(t){if(t!=null)return t===it.DEFAULTS?t:it.USER}}class kK{constructor(t,i){this.value=t,this.origin=i}}function iV(e,t,i){t.keys().forEach(s=>{i.set(s,t.get(s),it.DEFAULTS)});const r=e.metadatas;Object.keys(r).forEach(s=>{e.internalGet(s)&&i.set(s,e.internalGet(s),it.DEFAULTS)})}function PK(e,t,i){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.indexOf(".")>-1&&r.indexOf(t)===0&&FR(r,i))return!0}else for(const s of r)if(s===t||s.indexOf(".")>-1&&s.indexOf(t)===0&&FR(s,i))return!0;return!1}function LK(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function RK(e,t,i,r,s){let n=VC(t[i],s);LK(n)&&(e[i]=!0);for(const o of Object.getOwnPropertyNames(t))n=VC(t[o],s),PK(n,i,r)&&(e[o]=!0)}function FK(e,t,i,r){const s=i.metadatas,n=VO(s[t],"any",r),o=n&&n.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,r):o;a!==void 0&&i.set(t,a)}const rV={origin:"service"};function sV(e,t,i=rV){if(!t||typeof t!="object")return;const r=Cs(e),s=r.metadatas,n={};for(const o of Object.getOwnPropertyNames(t))RK(n,s,o,t,i);r.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(n)){const a=VC(s[o],i).read,l=a&&a.source;let u;u=l&&typeof l=="string"?Gv(t,l):t[o],a&&a.reader&&(u=a.reader.call(e,u,t,i)),u!==void 0&&r.set(o,u)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(s))n[o]||FK(e,o,r,i)}r.setDefaultOrigin("user")}function NK(e,t,i,r=rV){var s;const n=be(k({},r),{messages:[]});i(n),(s=n.messages)==null||s.forEach(o=>{o.type!=="warning"||e.loaded?r&&r.messages&&r.messages.push(o):e.loadWarnings.push(o)})}const DK=fe.getLogger("esri.core.accessorSupport.write");function jK(e,t,i,r,s){var n,o;const a={};return(n=t.write)==null||(o=n.writer)==null||o.call(e,r,a,i,s),a}function nV(e,t,i,r,s,n){if(!r||!r.write)return!1;const o=e.get(i);if(!s&&r.write.overridePolicy){const a=r.write.overridePolicy.call(e,o,i,n);a!==void 0&&(s=a)}if(s||(s=r.write),!s||s.enabled===!1)return!1;if((o===null&&!s.allowNull&&!s.writerEnsuresNonNull||o===void 0)&&s.isRequired){const a=new B("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return a&&n&&n.messages?n.messages.push(a):a&&!n&&DK.error(a.name,a.message),!1}return!(o===void 0||o===null&&!s.allowNull&&!s.writerEnsuresNonNull||(!t.store.multipleOriginsSupported||t.store.originOf(i)===it.DEFAULTS)&&zK(e,i,n,r,o)||!s.ignoreOrigin&&n&&n.origin&&t.store.multipleOriginsSupported&&t.store.originOf(i)<Ru(n.origin))}function zK(e,t,i,r,s){const n=r.default;if(n===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(s);if(typeof n=="function"){if(Array.isArray(s)){const o=n.call(e,t,i);return OO(o,s)}return!1}return n===s}function VK(e,t,i,r){const s=Cs(e),n=s.metadatas,o=Qz(n[t],r);return!!o&&nV(e,s,t,o,i,r)}function oV(e,t,i){if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return fw(t,e.toJSON());const r=Cs(e),s=r.metadatas;for(const a in s){const l=Qz(s[a],i);if(!nV(e,r,a,l,void 0,i))continue;const u=e.get(a),h=jK(e,l,l.write&&typeof l.write.target=="string"?l.write.target:a,u,i);var n,o;Object.keys(h).length>0&&(t=fw(t,h),i!=null&&(n=i.resources)!=null&&(o=n.pendingOperations)!=null&&o.length&&Promise.all(i.resources.pendingOperations).then(()=>fw(t,h)),i&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:a,oldOrigin:dY(r.store.originOf(a)),newOrigin:i.origin}))}return t}const Kv=e=>{let t=class extends e{constructor(...i){super(...i);const r=Cs(this),s=r.store,n=new BO;r.store=n,iV(r,s,n)}read(i,r){sV(this,i,r)}write(i={},r){return oV(this,i,r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return UK.call(this,i,r)}};return t=c([O("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function UK(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}let ue=class extends Kv(Ee){};ue=c([O("esri.core.JSONSupport")],ue);var Iu;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Iu||(Iu={}));class BK{constructor(t){this.instance=t,this._resolver=uc(),this._status=Iu.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Iu.RESOLVED,this._cleanUp()},()=>{this._status=Iu.REJECTED,this._cleanUp()})}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Iu.RESOLVED}isRejected(){return this._status===Iu.REJECTED}isFulfilled(){return this._status!==Iu.PENDING}abort(){this._resolver.reject(qi())}when(t,i){return this._resolver.promise.then(t,i)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const t=uc(),i=[...this._resolvingPromises,t.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve(this.instance)},s=>{this.isFulfilled()||this._allPromise!==r||_o(s)||this._resolver.reject(s)}),t.resolve()}}const Vx=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new BK(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return new Promise((s,n)=>{this._promiseProps.when(s,n)}).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=c([O("esri.core.Promise")],t),t};let X1=class extends Vx(Ee){};X1=c([O("esri.core.Promise")],X1);const qK="not-loaded",GK="loading",HK="failed",KR="loaded",aV=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const s=this.load.bind(this);this.load=n=>{const o=new Promise((a,l)=>{const u=Rx(n,l);this.destroyed&&l(new B("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(a,l).finally(()=>{u&&u.remove()})});if(this.loadStatus===qK){this._set("loadStatus",GK);const a=this._loadController=new AbortController;s({signal:a.signal}),rs(a.signal,()=>{this._promiseProps.abort()})}return r(),o}})),this.when(()=>{this._set("loadStatus",KR),this._loadController=null},r=>{this._set("loadStatus",HK),this._set("loadError",r),this._loadController=null})}get loaded(){return this.loadStatus===KR}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new B("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return c([d({readOnly:!0})],t.prototype,"loaded",null),c([d({readOnly:!0})],t.prototype,"loadError",void 0),c([d({clonable:!1})],t.prototype,"loadStatus",void 0),c([d({type:[Es],readOnly:!0})],t.prototype,"loadWarnings",null),t=c([O("esri.core.Loadable")],t),t};let _g=class extends aV(X1){};_g=c([O("esri.core.Loadable")],_g),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=aV,e.isLoadable=t}(_g||(_g={}));const dc=_g;function WK(e,t,i){return mi(e.map((r,s)=>t.apply(i,[r,s])))}function JK(e,t,i){return mi(e.map((r,s)=>t.apply(i,[r,s]))).then(r=>r.map(s=>s.value))}function Ux(e){return Q(e)?Gf():e.then(t=>({ok:!0,value:t})).catch(t=>({ok:!1,error:t}))}function GMe(e){return e.then(t=>({ok:!0,value:t})).catch(t=>(Jv(t),{ok:!1,error:t}))}async function lV(e,t){return await e.load(),ZK(e,t)}async function ZK(e,t){const i=[],r=(...n)=>{for(const o of n)Q(o)||(Array.isArray(o)?r(...o):ke.isCollection(o)?o.forEach(a=>r(a)):dc.isLoadable(o)&&i.push(o))};t(r);let s=null;if(await JK(i,async n=>{(await Ux(YK(n)?n.loadAll():n.load())).ok!==!1||s||(s=n)}),s)throw s.loadError;return e}function YK(e){return"loadAll"in e&&typeof e.loadAll=="function"}const KK=fe.getLogger("esri.core.urlUtils"),iy=Tt.request,QR="esri/config: esriConfig.request.proxyUrl is not set.",cV=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,uV=/^\s*http:/i,QK=/^\s*https:/i,XK=/^\s*file:/i,eQ=/:\d+$/,tQ=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,iQ=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),rQ=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class En{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(iQ);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(rQ),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}}const tb={},sQ=new En(Tt.applicationUrl);let ss=sQ;const nQ=oQ();let qO=nQ;const dV=()=>ss,HMe=()=>qO;function oQ(){const e=ss.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${ss.scheme}://${ss.host}${ss.port!=null?`:${ss.port}`:""}`}${t}`}function _i(e){const t={path:null,query:null},i=new En(e),r=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.substring(0,r),t.query=Hf(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.substring(0,t.path.length-(i.fragment.length+1)))),t}function Hf(e){const t=e.split("&"),i={};for(const r of t){if(!r)continue;const s=r.indexOf("=");let n,o;s<0?(n=decodeURIComponent(r),o=""):(n=decodeURIComponent(r.slice(0,s)),o=decodeURIComponent(r.slice(s+1)));let a=i[n];typeof a=="string"&&(a=i[n]=[a]),Array.isArray(a)?a.push(o):i[n]=o}return i}function XR(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function Yh(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(t(i,e[i]))).join("&"):Object.keys(e).map(i=>{const r=e[i];if(r==null)return"";const s=encodeURIComponent(i)+"=",n=t&&t[i];return n?s+encodeURIComponent(n(r)):Array.isArray(r)?r.map(o=>XR(o)?s+encodeURIComponent(JSON.stringify(o)):s+encodeURIComponent(o)).join("&"):XR(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function aQ(e=!1){let t,i=iy.proxyUrl;if(typeof e=="string"){t=fQ(e);const r=Qv(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw KK.warn(QR),new B("urlutils:proxy-not-set",QR);return t&&BC()&&(i=ZO(i)),_i(i)}function lQ(e){const t=Qv(e);let i,r;if(t){const s=GO(t.proxyUrl);i=s.path,r=s.query?Hf(s.query):null}if(i){const s=_i(e);e=i+"?"+s.path;const n=Yh(k(k({},r),s.query));n&&(e=`${e}?${n}`)}return e}const Ny={path:"",query:""};function GO(e){const t=e.indexOf("?");return t!==-1?(Ny.path=e.slice(0,t),Ny.query=e.slice(t+1)):(Ny.path=e,Ny.query=null),Ny}function hV(e){return e=(e=eS(e=_Q(e=GO(e).path),!0)).toLowerCase()}function cQ(e){const t={proxyUrl:e.proxyUrl,urlPrefix:hV(e.urlPrefix)},i=iy.proxyRules,r=t.urlPrefix;let s=i.length;for(let n=0;n<i.length;n++){const o=i[n].urlPrefix;if(r.indexOf(o)===0){if(r.length===o.length)return-1;s=n;break}o.indexOf(r)===0&&(s=n+1)}return i.splice(s,0,t),s}function Qv(e){const t=iy.proxyRules,i=hV(e);for(let r=0;r<t.length;r++)if(i.indexOf(t[r].urlPrefix)===0)return t[r]}function pV(e,t){return e=e3(e),t=e3(t),eS(e)===eS(t)}function e3(e){const t=(e=uo(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function fV(e){const t=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r),i=iy.interceptors;if(i){for(const r of i)if(Array.isArray(r.urls)){if(r.urls.some(t))return r}else if(t(r.urls))return r}return null}function so(e,t,i=!1){const r=GC(e),s=GC(t);return!(!i&&r.scheme!==s.scheme)&&r.host!=null&&s.host!=null&&r.host.toLowerCase()===s.host.toLowerCase()&&r.port===s.port}function HO(e){if(typeof e=="string"){if(!On(e))return!0;e=GC(e)}if(so(e,ss))return!0;const t=iy.trustedServers||[];for(let i=0;i<t.length;i++){const r=uQ(t[i]);for(let s=0;s<r.length;s++)if(so(e,r[s]))return!0}return!1}function uQ(e){return tb[e]||(JO(e)||tl(e)?tb[e]=[new En(An(e))]:tb[e]=[new En(`http://${e}`),new En(`https://${e}`)]),tb[e]}function An(e,t=qO,i){return tl(e)?i&&i.preserveProtocolRelative?e:ss.scheme==="http"&&ss.authority===ry(e).slice(2)?`http:${e}`:`https:${e}`:JO(e)?e:Ku(e[0]==="/"?vQ(t):t,e)}function WO(e,t=qO,i){if(!On(e))return e;const r=uo(e),s=r.toLowerCase(),n=uo(t).toLowerCase().replace(/\/+$/,""),o=i?uo(i).toLowerCase().replace(/\/+$/,""):null;if(o&&n.indexOf(o)!==0)return e;const a=(f,y,g)=>(g=f.indexOf(y,g))===-1?f.length:g;let l=a(s,"/",s.indexOf("//")+2),u=-1;for(;s.slice(0,l+1)===n.slice(0,l)+"/"&&(u=l+1,l!==s.length);)l=a(s,"/",l+1);if(u===-1||o&&u<o.length)return e;e=r.slice(u);const h=n.slice(u-1).replace(/[^/]+/g,"").length;if(h>0)for(let f=0;f<h;f++)e=`../${e}`;else e=`./${e}`;return e}function uo(e){return e=SQ(e=wQ(e=bQ(e=An(e=e.trim()))))}function Ku(...e){const t=e.filter(N);if(!t||!t.length)return;const i=[];if(On(t[0])){const s=t[0],n=s.indexOf("//");n!==-1&&(i.push(s.slice(0,n+1)),yQ(t[0])&&(i[0]+="/"),t[0]=s.slice(n+2))}else t[0][0]==="/"&&i.push("");const r=t.reduce((s,n)=>n?s.concat(n.split("/")):s,[]);for(let s=0;s<r.length;s++){const n=r[s];n===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!n&&s===r.length-1||n&&(n!=="."||i.length===0))&&i.push(n)}return i.join("/")}function ry(e,t=!1){if(Bx(e)||fp(e))return null;let i=e.indexOf("://");if(i===-1&&tl(e))i=2;else{if(i===-1)return null;i+=3}const r=e.indexOf("/",i);return r!==-1&&(e=e.slice(0,r)),t&&(e=eS(e,!0)),e}function On(e){return tl(e)||JO(e)}function Bx(e){return e!=null&&e.slice(0,5)==="blob:"}function fp(e){return e.slice(0,5)==="data:"}function WMe(e){const t=mV(e);if(!t||!t.isBase64)return null;const i=atob(t.data),r=new Uint8Array(i.length);for(let s=0;s<i.length;s++)r[s]=i.charCodeAt(s);return r.buffer}function AT(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const dQ=/^data:(.*?)(;base64)?,(.*)$/;function mV(e){const t=e.match(dQ);if(!t)return null;const[,i,r,s]=t;return{mediaType:i,isBase64:!!r,data:s}}function yV(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function JMe(e,t){hQ(e,t)||pQ(e,t)}function hQ(e,t){if(!e)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(e);return i.download=t,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}function pQ(e,t){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(e,t)}function tl(e){return e!=null&&e!==void 0&&e[0]==="/"&&e[1]==="/"}function JO(e){return cV.test(e)}function fQ(e){return QK.test(e)||ss.scheme==="https"&&tl(e)}function mQ(e){return uV.test(e)||ss.scheme==="http"&&tl(e)}function yQ(e){return XK.test(e)}function ZO(e){return tl(e)?`https:${e}`:e.replace(uV,"https:")}function gQ(){return ss.scheme==="http"}function BC(){return ss.scheme==="https"}function eS(e,t=!1){return tl(e)?e.slice(2):(e=e.replace(cV,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function vQ(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function YO(e){let t=0;if(On(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function ZMe(e,t){if(!e)return"";const i=_i(e).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(t==null||!t.length)return r;const s=new RegExp(`.(${t.join("|")})$`,"ig");return r.replace(s,"")}function _Q(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function gV(e){return e.replace(/\/+$/,"")}function bQ(e){if(/^https?:\/\//i.test(e)){const t=GO(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function wQ(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function SQ(e){const t=iy.httpsDomains;if(!mQ(e))return e;const i=e.indexOf("/",7);let r;if(r=i===-1?e:e.slice(0,i),r=r.toLowerCase().slice(7),eQ.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return gQ()&&r===ss.authority&&!tQ.test(e)||(BC()&&r===ss.authority||t&&t.some(s=>r===s||r.endsWith(`.${s}`))||BC()&&!Qv(e))&&(e=ZO(e)),e}function qC(e,t,i){if(!(t&&i&&e&&On(e)))return e;const r=e.indexOf("//"),s=e.indexOf("/",r+2),n=e.indexOf(":",r+2),o=Math.min(s<0?e.length:s,n<0?e.length:n);return e.slice(r+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(o)}`}function GC(e){return typeof e=="string"?new En(An(e)):(e.scheme||(e.scheme=ss.scheme),e)}function YMe(e){return IQ.test(e)}function vV(e,t){const i=_i(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function _V(e,t,i){const r=_i(e),s=r.query||{};return s[t]=String(i),`${r.path}?${Yh(s)}`}function tS(e,t){const i=_i(e),r=i.query||{};for(const n in t)r[n]=t[n];const s=Yh(r);return s?`${i.path}?${s}`:i.path}function KMe(e){if(Q(e))return null;const t=e.match(xQ);return t?t[1]:null}const xQ=/.*?\.([^\/]*)$/,IQ=/(^data:image\/svg|\.svg$)/i;function $e(e,t,i){let r,s;return t===void 0?(s=e,r=[void 0]):typeof t!="string"?(s=e,r=[void 0],i=t):(s=t,r=Array.isArray(e)?e:[e]),(n,o)=>{const a=n.constructor.prototype;for(const l of r){const u=Gz(n,l,s);u.write&&typeof u.write=="object"||(u.write={}),i&&(u.write.target=i),u.write.writer=a[o]}}}var Kh;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(Kh||(Kh={}));let p;const A={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(p=2e3;p<=2045;p++)A[p]=0;for(p=2056;p<=2065;p++)A[p]=0;for(p=2067;p<=2135;p++)A[p]=0;for(p=2137;p<=2154;p++)A[p]=0;for(p=2161;p<=2170;p++)A[p]=0;for(p=2172;p<=2193;p++)A[p]=0;for(p=2195;p<=2198;p++)A[p]=0;for(p=2200;p<=2203;p++)A[p]=0;for(p=2205;p<=2217;p++)A[p]=0;for(p=2222;p<=2224;p++)A[p]=1;for(p=2225;p<=2250;p++)A[p]=2;for(p=2251;p<=2253;p++)A[p]=1;for(p=2257;p<=2264;p++)A[p]=2;for(p=2274;p<=2279;p++)A[p]=2;for(p=2280;p<=2282;p++)A[p]=1;for(p=2283;p<=2289;p++)A[p]=2;for(p=2290;p<=2292;p++)A[p]=0;for(p=2308;p<=2313;p++)A[p]=0;for(p=2315;p<=2491;p++)A[p]=0;for(p=2494;p<=2866;p++)A[p]=0;for(p=2867;p<=2869;p++)A[p]=1;for(p=2870;p<=2888;p++)A[p]=2;for(p=2891;p<=2895;p++)A[p]=2;for(p=2896;p<=2898;p++)A[p]=1;for(p=2902;p<=2908;p++)A[p]=2;for(p=2915;p<=2920;p++)A[p]=2;for(p=2921;p<=2923;p++)A[p]=1;for(p=2924;p<=2930;p++)A[p]=2;for(p=2931;p<=2962;p++)A[p]=0;for(p=2964;p<=2968;p++)A[p]=2;for(p=2969;p<=2973;p++)A[p]=0;for(p=2975;p<=2991;p++)A[p]=0;for(p=2995;p<=3051;p++)A[p]=0;for(p=3054;p<=3079;p++)A[p]=0;for(p=3081;p<=3088;p++)A[p]=0;for(p=3092;p<=3101;p++)A[p]=0;for(p=3106;p<=3138;p++)A[p]=0;for(p=3146;p<=3151;p++)A[p]=0;for(p=3153;p<=3166;p++)A[p]=0;for(p=3168;p<=3172;p++)A[p]=0;for(p=3174;p<=3203;p++)A[p]=0;for(p=3294;p<=3358;p++)A[p]=0;for(p=3367;p<=3403;p++)A[p]=0;for(p=3408;p<=3416;p++)A[p]=0;for(p=3417;p<=3438;p++)A[p]=2;for(p=3441;p<=3446;p++)A[p]=2;for(p=3447;p<=3450;p++)A[p]=0;for(p=3451;p<=3459;p++)A[p]=2;for(p=3460;p<=3478;p++)A[p]=0;for(p=3554;p<=3559;p++)A[p]=0;for(p=3560;p<=3570;p++)A[p]=2;for(p=3571;p<=3581;p++)A[p]=0;for(p=3594;p<=3597;p++)A[p]=0;for(p=3601;p<=3604;p++)A[p]=0;for(p=3637;p<=3639;p++)A[p]=0;for(p=3665;p<=3667;p++)A[p]=0;for(p=3693;p<=3695;p++)A[p]=0;for(p=3701;p<=3727;p++)A[p]=0;for(p=3728;p<=3739;p++)A[p]=2;for(p=3740;p<=3751;p++)A[p]=0;for(p=3753;p<=3760;p++)A[p]=2;for(p=3761;p<=3773;p++)A[p]=0;for(p=3775;p<=3777;p++)A[p]=0;for(p=3779;p<=3781;p++)A[p]=0;for(p=3783;p<=3785;p++)A[p]=0;for(p=3788;p<=3791;p++)A[p]=0;for(p=3797;p<=3802;p++)A[p]=0;for(p=3814;p<=3816;p++)A[p]=0;for(p=3825;p<=3829;p++)A[p]=0;for(p=3832;p<=3841;p++)A[p]=0;for(p=3844;p<=3852;p++)A[p]=0;for(p=3873;p<=3885;p++)A[p]=0;for(p=3890;p<=3893;p++)A[p]=0;for(p=3907;p<=3912;p++)A[p]=0;for(p=3942;p<=3950;p++)A[p]=0;for(p=3968;p<=3970;p++)A[p]=0;for(p=3973;p<=3976;p++)A[p]=0;for(p=3986;p<=3989;p++)A[p]=0;for(p=3994;p<=3997;p++)A[p]=0;for(p=4048;p<=4051;p++)A[p]=0;for(p=4056;p<=4063;p++)A[p]=0;for(p=4093;p<=4096;p++)A[p]=0;for(p=4390;p<=4398;p++)A[p]=0;for(p=4399;p<=4413;p++)A[p]=2;for(p=4418;p<=4433;p++)A[p]=2;for(p=4455;p<=4457;p++)A[p]=2;for(p=4484;p<=4489;p++)A[p]=0;for(p=4491;p<=4554;p++)A[p]=0;for(p=4568;p<=4589;p++)A[p]=0;for(p=4652;p<=4656;p++)A[p]=0;for(p=4766;p<=4800;p++)A[p]=0;for(p=5014;p<=5016;p++)A[p]=0;for(p=5069;p<=5072;p++)A[p]=0;for(p=5105;p<=5130;p++)A[p]=0;for(p=5173;p<=5188;p++)A[p]=0;for(p=5253;p<=5259;p++)A[p]=0;for(p=5269;p<=5275;p++)A[p]=0;for(p=5292;p<=5311;p++)A[p]=0;for(p=5329;p<=5331;p++)A[p]=0;for(p=5343;p<=5349;p++)A[p]=0;for(p=5355;p<=5357;p++)A[p]=0;for(p=5387;p<=5389;p++)A[p]=0;for(p=5459;p<=5463;p++)A[p]=0;for(p=5479;p<=5482;p++)A[p]=0;for(p=5518;p<=5520;p++)A[p]=0;for(p=5530;p<=5539;p++)A[p]=0;for(p=5550;p<=5552;p++)A[p]=0;for(p=5562;p<=5583;p++)A[p]=0;for(p=5623;p<=5625;p++)A[p]=2;for(p=5631;p<=5639;p++)A[p]=0;for(p=5649;p<=5653;p++)A[p]=0;for(p=5663;p<=5680;p++)A[p]=0;for(p=5682;p<=5685;p++)A[p]=0;for(p=5875;p<=5877;p++)A[p]=0;for(p=5896;p<=5899;p++)A[p]=0;for(p=5921;p<=5940;p++)A[p]=0;for(p=6050;p<=6125;p++)A[p]=0;for(p=6244;p<=6275;p++)A[p]=0;for(p=6328;p<=6348;p++)A[p]=0;for(p=6350;p<=6356;p++)A[p]=0;for(p=6366;p<=6372;p++)A[p]=0;for(p=6381;p<=6387;p++)A[p]=0;for(p=6393;p<=6404;p++)A[p]=0;for(p=6480;p<=6483;p++)A[p]=0;for(p=6511;p<=6514;p++)A[p]=0;for(p=6579;p<=6581;p++)A[p]=0;for(p=6619;p<=6624;p++)A[p]=0;for(p=6625;p<=6627;p++)A[p]=2;for(p=6628;p<=6632;p++)A[p]=0;for(p=6634;p<=6637;p++)A[p]=0;for(p=6669;p<=6692;p++)A[p]=0;for(p=6707;p<=6709;p++)A[p]=0;for(p=6720;p<=6723;p++)A[p]=0;for(p=6732;p<=6738;p++)A[p]=0;for(p=6931;p<=6933;p++)A[p]=0;for(p=6956;p<=6959;p++)A[p]=0;for(p=7005;p<=7007;p++)A[p]=0;for(p=7057;p<=7070;p++)A[p]=2;for(p=7074;p<=7082;p++)A[p]=0;for(p=7109;p<=7118;p++)A[p]=0;for(p=7119;p<=7127;p++)A[p]=1;for(p=7374;p<=7376;p++)A[p]=0;for(p=7528;p<=7586;p++)A[p]=0;for(p=7587;p<=7645;p++)A[p]=2;for(p=7692;p<=7696;p++)A[p]=0;for(p=7755;p<=7787;p++)A[p]=0;for(p=7791;p<=7795;p++)A[p]=0;for(p=7799;p<=7801;p++)A[p]=0;for(p=7803;p<=7805;p++)A[p]=0;for(p=7825;p<=7831;p++)A[p]=0;for(p=7845;p<=7859;p++)A[p]=0;for(p=8013;p<=8032;p++)A[p]=0;for(p=8065;p<=8068;p++)A[p]=1;for(p=8518;p<=8529;p++)A[p]=2;for(p=8533;p<=8536;p++)A[p]=2;for(p=8538;p<=8540;p++)A[p]=2;for(p=8677;p<=8679;p++)A[p]=0;for(p=8836;p<=8840;p++)A[p]=0;for(p=8857;p<=8859;p++)A[p]=0;for(p=8908;p<=8910;p++)A[p]=0;for(p=9154;p<=9159;p++)A[p]=0;for(p=9205;p<=9218;p++)A[p]=0;for(p=9271;p<=9273;p++)A[p]=0;for(p=9295;p<=9297;p++)A[p]=0;for(p=9356;p<=9360;p++)A[p]=0;for(p=9404;p<=9407;p++)A[p]=0;for(p=9476;p<=9482;p++)A[p]=0;for(p=9487;p<=9494;p++)A[p]=0;for(p=9697;p<=9699;p++)A[p]=0;for(p=20002;p<=20032;p++)A[p]=0;for(p=20062;p<=20092;p++)A[p]=0;for(p=20135;p<=20138;p++)A[p]=0;for(p=20248;p<=20258;p++)A[p]=0;for(p=20348;p<=20358;p++)A[p]=0;for(p=20436;p<=20440;p++)A[p]=0;for(p=20822;p<=20824;p++)A[p]=0;for(p=20904;p<=20932;p++)A[p]=0;for(p=20934;p<=20936;p++)A[p]=0;for(p=21004;p<=21032;p++)A[p]=0;for(p=21035;p<=21037;p++)A[p]=0;for(p=21095;p<=21097;p++)A[p]=0;for(p=21148;p<=21150;p++)A[p]=0;for(p=21207;p<=21264;p++)A[p]=0;for(p=21307;p<=21364;p++)A[p]=0;for(p=21413;p<=21423;p++)A[p]=0;for(p=21453;p<=21463;p++)A[p]=0;for(p=21473;p<=21483;p++)A[p]=0;for(p=21780;p<=21782;p++)A[p]=0;for(p=21891;p<=21894;p++)A[p]=0;for(p=21896;p<=21899;p++)A[p]=0;for(p=22171;p<=22177;p++)A[p]=0;for(p=22181;p<=22187;p++)A[p]=0;for(p=22191;p<=22197;p++)A[p]=0;for(p=22234;p<=22236;p++)A[p]=0;for(p=22521;p<=22525;p++)A[p]=0;for(p=22991;p<=22994;p++)A[p]=0;for(p=23028;p<=23038;p++)A[p]=0;for(p=23830;p<=23853;p++)A[p]=0;for(p=23866;p<=23872;p++)A[p]=0;for(p=23877;p<=23884;p++)A[p]=0;for(p=23886;p<=23894;p++)A[p]=0;for(p=23946;p<=23948;p++)A[p]=0;for(p=24311;p<=24313;p++)A[p]=0;for(p=24342;p<=24347;p++)A[p]=0;for(p=24370;p<=24374;p++)A[p]=10;for(p=24375;p<=24381;p++)A[p]=0;for(p=24718;p<=24721;p++)A[p]=0;for(p=24817;p<=24821;p++)A[p]=0;for(p=24877;p<=24882;p++)A[p]=0;for(p=24891;p<=24893;p++)A[p]=0;for(p=25391;p<=25395;p++)A[p]=0;for(p=25828;p<=25838;p++)A[p]=0;for(p=26191;p<=26195;p++)A[p]=0;for(p=26391;p<=26393;p++)A[p]=0;for(p=26701;p<=26722;p++)A[p]=0;for(p=26729;p<=26799;p++)A[p]=2;for(p=26801;p<=26803;p++)A[p]=2;for(p=26811;p<=26813;p++)A[p]=2;for(p=26847;p<=26870;p++)A[p]=2;for(p=26891;p<=26899;p++)A[p]=0;for(p=26901;p<=26923;p++)A[p]=0;for(p=26929;p<=26946;p++)A[p]=0;for(p=26948;p<=26998;p++)A[p]=0;for(p=27037;p<=27040;p++)A[p]=0;for(p=27205;p<=27232;p++)A[p]=0;for(p=27258;p<=27260;p++)A[p]=0;for(p=27391;p<=27398;p++)A[p]=0;for(p=27561;p<=27564;p++)A[p]=0;for(p=27571;p<=27574;p++)A[p]=0;for(p=27581;p<=27584;p++)A[p]=0;for(p=27591;p<=27594;p++)A[p]=0;for(p=28191;p<=28193;p++)A[p]=0;for(p=28348;p<=28358;p++)A[p]=0;for(p=28402;p<=28432;p++)A[p]=0;for(p=28462;p<=28492;p++)A[p]=0;for(p=29118;p<=29122;p++)A[p]=0;for(p=29168;p<=29172;p++)A[p]=0;for(p=29177;p<=29185;p++)A[p]=0;for(p=29187;p<=29195;p++)A[p]=0;for(p=29900;p<=29903;p++)A[p]=0;for(p=30161;p<=30179;p++)A[p]=0;for(p=30491;p<=30494;p++)A[p]=0;for(p=30729;p<=30732;p++)A[p]=0;for(p=31251;p<=31259;p++)A[p]=0;for(p=31265;p<=31268;p++)A[p]=0;for(p=31275;p<=31279;p++)A[p]=0;for(p=31281;p<=31297;p++)A[p]=0;for(p=31461;p<=31469;p++)A[p]=0;for(p=31491;p<=31495;p++)A[p]=0;for(p=31917;p<=31922;p++)A[p]=0;for(p=31965;p<=32e3;p++)A[p]=0;for(p=32001;p<=32003;p++)A[p]=2;for(p=32005;p<=32031;p++)A[p]=2;for(p=32033;p<=32060;p++)A[p]=2;for(p=32064;p<=32067;p++)A[p]=2;for(p=32074;p<=32077;p++)A[p]=2;for(p=32081;p<=32086;p++)A[p]=0;for(p=32107;p<=32130;p++)A[p]=0;for(p=32133;p<=32158;p++)A[p]=0;for(p=32164;p<=32167;p++)A[p]=2;for(p=32180;p<=32199;p++)A[p]=0;for(p=32201;p<=32260;p++)A[p]=0;for(p=32301;p<=32360;p++)A[p]=0;for(p=32601;p<=32662;p++)A[p]=0;for(p=32664;p<=32667;p++)A[p]=2;for(p=32701;p<=32761;p++)A[p]=0;for(p=53001;p<=53004;p++)A[p]=0;for(p=53008;p<=53019;p++)A[p]=0;for(p=53021;p<=53032;p++)A[p]=0;for(p=53034;p<=53037;p++)A[p]=0;for(p=53042;p<=53046;p++)A[p]=0;for(p=53074;p<=53080;p++)A[p]=0;for(p=54001;p<=54004;p++)A[p]=0;for(p=54008;p<=54019;p++)A[p]=0;for(p=54021;p<=54032;p++)A[p]=0;for(p=54034;p<=54037;p++)A[p]=0;for(p=54042;p<=54046;p++)A[p]=0;for(p=54048;p<=54053;p++)A[p]=0;for(p=54074;p<=54080;p++)A[p]=0;for(p=54098;p<=54101;p++)A[p]=0;for(p=102001;p<=102040;p++)A[p]=0;for(p=102042;p<=102063;p++)A[p]=0;for(p=102065;p<=102067;p++)A[p]=0;for(p=102070;p<=102117;p++)A[p]=0;for(p=102122;p<=102216;p++)A[p]=0;for(p=102221;p<=102377;p++)A[p]=0;for(p=102382;p<=102388;p++)A[p]=0;for(p=102389;p<=102398;p++)A[p]=2;for(p=102399;p<=102444;p++)A[p]=0;for(p=102445;p<=102447;p++)A[p]=2;for(p=102448;p<=102458;p++)A[p]=0;for(p=102459;p<=102468;p++)A[p]=2;for(p=102469;p<=102499;p++)A[p]=0;for(p=102500;p<=102519;p++)A[p]=1;for(p=102520;p<=102524;p++)A[p]=0;for(p=102525;p<=102529;p++)A[p]=2;for(p=102530;p<=102588;p++)A[p]=0;for(p=102590;p<=102598;p++)A[p]=0;for(p=102601;p<=102603;p++)A[p]=0;for(p=102605;p<=102628;p++)A[p]=0;for(p=102629;p<=102646;p++)A[p]=2;for(p=102648;p<=102700;p++)A[p]=2;for(p=102701;p<=102703;p++)A[p]=0;for(p=102707;p<=102730;p++)A[p]=2;for(p=102733;p<=102758;p++)A[p]=2;for(p=102767;p<=102900;p++)A[p]=0;for(p=102901;p<=102933;p++)A[p]=2;for(p=102934;p<=102950;p++)A[p]=13;for(p=102951;p<=102960;p++)A[p]=0;for(p=102965;p<=102969;p++)A[p]=0;for(p=102971;p<=102973;p++)A[p]=0;for(p=102975;p<=102989;p++)A[p]=0;for(p=102990;p<=102992;p++)A[p]=1;for(p=102997;p<=103002;p++)A[p]=0;for(p=103003;p<=103008;p++)A[p]=2;for(p=103009;p<=103011;p++)A[p]=0;for(p=103012;p<=103014;p++)A[p]=2;for(p=103019;p<=103021;p++)A[p]=0;for(p=103022;p<=103024;p++)A[p]=2;for(p=103029;p<=103031;p++)A[p]=0;for(p=103032;p<=103034;p++)A[p]=2;for(p=103065;p<=103068;p++)A[p]=0;for(p=103074;p<=103076;p++)A[p]=0;for(p=103077;p<=103079;p++)A[p]=1;for(p=103080;p<=103082;p++)A[p]=0;for(p=103083;p<=103085;p++)A[p]=2;for(p=103090;p<=103093;p++)A[p]=0;for(p=103097;p<=103099;p++)A[p]=0;for(p=103100;p<=103102;p++)A[p]=2;for(p=103107;p<=103109;p++)A[p]=0;for(p=103110;p<=103112;p++)A[p]=2;for(p=103113;p<=103116;p++)A[p]=0;for(p=103117;p<=103120;p++)A[p]=2;for(p=103153;p<=103157;p++)A[p]=0;for(p=103158;p<=103162;p++)A[p]=2;for(p=103163;p<=103165;p++)A[p]=0;for(p=103166;p<=103168;p++)A[p]=1;for(p=103169;p<=103171;p++)A[p]=2;for(p=103186;p<=103188;p++)A[p]=0;for(p=103189;p<=103191;p++)A[p]=2;for(p=103192;p<=103195;p++)A[p]=0;for(p=103196;p<=103199;p++)A[p]=2;for(p=103200;p<=103224;p++)A[p]=0;for(p=103225;p<=103227;p++)A[p]=1;for(p=103232;p<=103237;p++)A[p]=0;for(p=103238;p<=103243;p++)A[p]=2;for(p=103244;p<=103246;p++)A[p]=0;for(p=103247;p<=103249;p++)A[p]=2;for(p=103254;p<=103256;p++)A[p]=0;for(p=103257;p<=103259;p++)A[p]=2;for(p=103264;p<=103266;p++)A[p]=0;for(p=103267;p<=103269;p++)A[p]=2;for(p=103300;p<=103375;p++)A[p]=0;for(p=103381;p<=103383;p++)A[p]=0;for(p=103384;p<=103386;p++)A[p]=1;for(p=103387;p<=103389;p++)A[p]=0;for(p=103390;p<=103392;p++)A[p]=2;for(p=103397;p<=103399;p++)A[p]=0;for(p=103400;p<=103471;p++)A[p]=2;for(p=103476;p<=103478;p++)A[p]=0;for(p=103479;p<=103481;p++)A[p]=2;for(p=103486;p<=103488;p++)A[p]=0;for(p=103489;p<=103491;p++)A[p]=2;for(p=103492;p<=103495;p++)A[p]=0;for(p=103496;p<=103499;p++)A[p]=2;for(p=103528;p<=103543;p++)A[p]=0;for(p=103544;p<=103548;p++)A[p]=2;for(p=103549;p<=103551;p++)A[p]=0;for(p=103552;p<=103554;p++)A[p]=1;for(p=103555;p<=103557;p++)A[p]=2;for(p=103558;p<=103560;p++)A[p]=0;for(p=103571;p<=103573;p++)A[p]=0;for(p=103574;p<=103576;p++)A[p]=2;for(p=103577;p<=103580;p++)A[p]=0;for(p=103581;p<=103583;p++)A[p]=2;for(p=103595;p<=103694;p++)A[p]=0;for(p=103696;p<=103699;p++)A[p]=0;for(p=103700;p<=103793;p++)A[p]=2;for(p=103794;p<=103872;p++)A[p]=0;for(p=103900;p<=103971;p++)A[p]=2;const TQ={102113:!0,102100:!0,3857:!0,3785:!0},$Q={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0},t3='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',ib=[-20037508342788905e-9,20037508342788905e-9],rb=[-20037508342787e-6,20037508342787e-6],bV={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:ib,origin:rb,dx:1e-5},102100:{wkTemplate:t3,valid:ib,origin:rb,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:ib,origin:rb,dx:1e-5},3857:{wkTemplate:t3,valid:ib,origin:rb,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Qs(e,t){return!Q(e)&&!Q(t)&&(e===t||(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||Qh(e)&&Qh(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))}function na(e){return Zs(e)&&e.wkid?bV[e.wkid]:null}function wV(e){return!!Zs(e)&&(e.wkid?A[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function CQ(e){return!(qx(e)||Gx(e))}function ev(e){return Zs(e)&&e.wkid===4326}function QMe(e){return Zs(e)&&e.wkid===Kh.CGCS2000}function Qh(e){return Zs(e)&&e.wkid!=null&&TQ[e.wkid]===!0}function EQ(e){return Zs(e)&&e.wkid===32662}function KO(e){return e===Kh.GCSMARS2000||e===Kh.GCSMARS2000_SPHERE}function qx(e){return Zs(e)&&e.wkid!=null&&KO(e.wkid)}function QO(e){return e===Kh.GCSMOON2000}function Gx(e){return Zs(e)&&e.wkid!=null&&QO(e.wkid)}function AQ(e){return Zs(e)&&e.wkid!=null&&$Q[e.wkid]===!0}function Zs(e){return N(e)&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const MQ={wkid:4326,wkt:Xa(bV[4326].wkTemplate,{Central_Meridian:"0.0"})},OQ={wkid:102100,latestWkid:3857},kQ={wkid:32662};var Sa;let Ut=Sa=class extends ue{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return Sa.WebMercator;if(e.wkid===4326)return Sa.WGS84}const t=new Sa;return t.read(e),t}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return ev(this)}get isWebMercator(){return Qh(this)}get isGeographic(){return wV(this)}get isWrappable(){return AQ(this)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Sa.WGS84)return Sa.WGS84;if(this===Sa.WebMercator)return Sa.WebMercator;const e=new Sa;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=K(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return t==null||r?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):i?s.id===t&&s.referenceServiceName===i:s.id===t}return Qs(this,e)}toJSON(e){return this.write(void 0,e)}};Ut.GCS_NAD_1927=null,Ut.WGS84=null,Ut.WebMercator=null,Ut.PlateCarree=null,c([d({readOnly:!0})],Ut.prototype,"isWGS84",null),c([d({readOnly:!0})],Ut.prototype,"isWebMercator",null),c([d({readOnly:!0})],Ut.prototype,"isGeographic",null),c([d({readOnly:!0})],Ut.prototype,"isWrappable",null),c([d({type:si,json:{write:!0}})],Ut.prototype,"latestWkid",void 0),c([d({type:si,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],Ut.prototype,"wkid",void 0),c([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],Ut.prototype,"wkt",void 0),c([$e("wkt"),$e("web-scene","wkt")],Ut.prototype,"writeWkt",null),c([d({type:si,json:{write:!0}})],Ut.prototype,"vcsWkid",void 0),c([d({type:si,json:{write:!0}})],Ut.prototype,"latestVcsWkid",void 0),c([d()],Ut.prototype,"imageCoordinateSystem",void 0),Ut=Sa=c([O("esri.geometry.SpatialReference")],Ut),Ut.prototype.toJSON.isDefaultToJSON=!0,Ut.GCS_NAD_1927=new Ut({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Ut.WGS84=new Ut(MQ),Ut.WebMercator=new Ut(OQ),Ut.PlateCarree=new Ut(kQ),Object.freeze&&(Object.freeze(Ut.GCS_NAD_1927),Object.freeze(Ut.WGS84),Object.freeze(Ut.WebMercator));const Xe=Ut,SV="20220404",xV="ecb69ff5e08a61c162de0ddc0b1f397ed5d4071b",IV="4.23",PQ={async request(e,t){var i;const{default:r}=await se(()=>Promise.resolve().then(function(){return JQ}),void 0),s=e.options,n=s.responseType;s.signal=t==null?void 0:t.signal,s.responseType=n==="native"||n==="native-request-init"?"native-request-init":["blob","json","text"].includes(n)&&(i=fV(e.url))!=null&&i.after?n:"array-buffer";const o=await r(e.url,s),a={data:o.data,ssl:o.ssl};switch(o.requestOptions.responseType){case"native-request-init":return delete a.data.signal,a;case"blob":a.data=await a.data.arrayBuffer();break;case"json":a.data=new TextEncoder().encode(JSON.stringify(a.data)).buffer;break;case"text":a.data=new TextEncoder().encode(a.data).buffer}return{result:a,transferList:[a.data]}}};let ht;function LQ(e){ht=e}function TV(e){const t=ht&&ht.findCredential(e);return t&&t.token?_V(e,"token",t.token):e}re("host-webworker")||(re("edge")||re("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");const RQ=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function $V(e){const t=ry(e,!0);return t&&t.endsWith(".arcgis.com")&&!RQ.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function FQ(e,t,i=!1,r){return new Promise((s,n)=>{if(da(r))return void n(i3());let o=()=>{u(),n(new Error(`Unable to load ${t}`))},a=()=>{const h=e;u(),s(h)},l=()=>{if(!e)return;const h=e;u(),h.src="",n(i3())};const u=()=>{re("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,N(r)&&r.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(t)};N(r)&&r.addEventListener("abort",l),re("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function i3(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}async function ft(e,t){var i;const r=fp(e),s=Bx(e);s||r||(e=uo(e));const n={url:e,requestOptions:k({},t)};let o=fV(e);if(o){const h=await qQ(o,n);if(h!=null)return{data:h,getHeader:XO,requestOptions:n.requestOptions,url:n.url};o.after||o.error||(o=null)}if(e=n.url,(t=n.requestOptions).responseType==="image"){if(re("host-webworker")||re("host-node"))throw ta("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n)}else if(r)throw ta("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),n);if(t.method==="head"){if(t.body)throw ta("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(r||s)throw ta("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await VQ(),iS)return iS.execute(e,t);const a=new AbortController;rs(t,()=>a.abort());const l={controller:a,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:o,params:n,redoRequest:!1,useIdentity:Zl.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},u=await HQ(l);return(i=o)==null||i.after==null||i.after(u),u}let iS;const Zl=Tt.request,CV="FormData"in globalThis,NQ=[499,498,403,401],DQ=["COM_0056","COM_0057","SB_0008"],jQ=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],XO=()=>null,HC=Symbol();function zQ(e){const t=ry(e);t&&!ft._corsServers.includes(t)&&ft._corsServers.push(t)}function r3(e){const t=ry(e);return!t||t.endsWith(".arcgis.com")||ft._corsServers.includes(t)||HO(t)}function ta(e,t,i,r){let s="Error";const n={url:i.url,requestOptions:i.requestOptions,getHeader:XO,ssl:!1};if(t instanceof B)return t.details?(t.details=K(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=n,t;if(t){const o=r&&(u=>r.headers.get(u)),a=r&&r.status,l=t.message;l&&(s=l),o&&(n.getHeader=o),n.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||a||0,n.subCode=t.subcode,n.messageCode=t.messageCode,typeof t.details=="string"?n.messages=[t.details]:n.messages=t.details,n.raw=HC in t?t[HC]:t}return _o(t)?qi():new B(e,s,n)}async function VQ(){re("host-webworker")?iS||(iS=await se(()=>import("./request.9c6dbabc.js"),["assets/request.9c6dbabc.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])):ft._abortableFetch||(ft._abortableFetch=globalThis.fetch.bind(globalThis))}async function WC(){ht||await se(()=>Promise.resolve().then(function(){return $xe}),void 0)}async function UQ(e){const t=e.params.url,i=e.params.requestOptions,r=e.controller.signal,s=i.body;let n=null,o=null,a=null;if(CV&&"HTMLFormElement"in globalThis&&(s instanceof FormData?n=s:s instanceof HTMLFormElement&&(o=s,n=new FormData(o))),typeof s=="string"&&(a=s),e.fetchOptions={cache:i.cacheBust&&!ft._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",redirect:"follow",signal:r},(n||a)&&(e.fetchOptions.body=n||a),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||i.query&&i.query.token||n&&n.get&&n.get("token")||o&&o.elements.token),!e.hasToken&&Tt.apiKey&&$V(t)&&(i.query||(i.query={}),i.query.token=Tt.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!EV(t)&&!da(r)){let l;i.authMode==="immediate"?(await WC(),l=await ht.getCredential(t,{signal:r}),e.credential=l):i.authMode==="no-prompt"?(await WC(),l=await ht.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=l):ht&&(l=ht.findCredential(t)),l&&(e.credentialToken=l.token,e.useSSL=!!l.ssl)}}function EV(e){return jQ.some(t=>t.test(e))}async function BQ(e){let t=e.params.url;const i=e.params.requestOptions,r=e.fetchOptions,s=Bx(t)||fp(t),n=i.responseType||"json",o=s?0:i.timeout!=null?i.timeout:Zl.timeout;let a=!1;if(!s){e.useSSL&&(t=ZO(t)),i.cacheBust&&r.cache==="default"&&(t=_V(t,"request.preventCache",Date.now()));let y=k({},i.query);e.credentialToken&&(y.token=e.credentialToken);let g=Yh(y);re("esri-url-encodes-apostrophe")&&(g=g.replace(/'/g,"%27"));const b=t.length+1+g.length;let w;a=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||b>Zl.maxUrlLength;const x=i.useProxy||!!Qv(t);if(x){const T=aQ(t);w=T.path,!a&&w.length+1+b>Zl.maxUrlLength&&(a=!0),T.query&&(y=k(k({},T.query),y))}if(r.method==="HEAD"&&(a||x)){if(a)throw b>Zl.maxUrlLength?ta("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):ta("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(x)throw ta("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=tS(t,y):(r.body=Yh(y),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=tS(t,y),x&&(e.useProxy=!0,t=`${w}?${t}`),y.token&&CV&&r.body instanceof FormData){const T=r.body;T.set?T.set("token",y.token):T.append("token",y.token)}if(i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!so(t,dV())){if(HO(t))e.withCredentials=!0;else if(ht){const T=ht.findServerInfo(t);T&&T.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(r.credentials="include")}let l,u,h=0,f=!1;o>0&&(h=setTimeout(()=>{f=!0,e.controller.abort()},o));try{if(i.responseType==="native-request-init")u=r,u.url=t;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||a||GQ(i.headers)||!s&&!e.useProxy&&Zl.proxyUrl&&!r3(t)){if(l=await ft._abortableFetch(t,r),e.useProxy||zQ(t),i.responseType==="native")u=l;else if(r.method!=="HEAD")if(l.ok){switch(n){case"array-buffer":u=await l.arrayBuffer();break;case"blob":case"image":u=await l.blob();break;default:u=await l.text()}if(h&&(clearTimeout(h),h=0),n==="json"||n==="xml"||n==="document")if(u)switch(n){case"json":u=JSON.parse(u);break;case"xml":u=s3(u,"application/xml");break;case"document":u=s3(u,"text/html")}else u=null;if(u){if(n==="array-buffer"||n==="blob"){const y=l.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(y)&&u[n==="blob"?"size":"byteLength"]<=750)try{const g=await new Response(u).json();g.error&&(u=g)}catch{}}n==="image"&&u instanceof Blob&&(u=await n3(URL.createObjectURL(u),e,!0))}}else u=await l.text()}else u=await n3(t,e)}catch(y){if(y.name==="AbortError")throw f?new Error("Timeout exceeded"):qi("Request canceled");if(!(!l&&y instanceof TypeError&&Zl.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||r3(t))throw y;e.redoRequest=!0,cQ({proxyUrl:Zl.proxyUrl,urlPrefix:ry(t)})}finally{h&&clearTimeout(h)}return[l,u]}async function qQ(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers=k(k({},t.requestOptions.headers),e.headers)),e.query&&(t.requestOptions.query=k(k({},t.requestOptions.query),e.query)),e.before){let i,r;try{r=await e.before(t)}catch(s){i=ta("request:interceptor",s,t)}if((r instanceof Error||r instanceof B)&&(i=ta("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}function GQ(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function s3(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function HQ(e){var t,i;let r,s;await UQ(e);try{do[r,s]=await BQ(e);while(!await WQ(e,r,s))}catch(a){const l=ta("request:server",a,e.params,r);throw l.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(l),l}const n=e.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(n)&&!e.hasToken&&!e.credentialToken&&(t=s)!=null&&(i=t.user)!=null&&i.username&&!HO(n)){const a=ry(n,!0);a&&Zl.trustedServers.push(a)}const o=e.credential;if(o&&ht){const a=ht.findServerInfo(o.server);let l=a&&a.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const u=ht.findCredential(l,o.userId);u&&ht._getIdenticalSvcIdx(l,u)===-1&&u.resources.unshift(l)}}return{data:s,getHeader:r?a=>r.headers.get(a):XO,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function WQ(e,t,i){if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let s,n,o,a;if(!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[HC]=i,s;i!=null&&i.error&&(s=i.error),s&&(n=Number(s.code),o=s.hasOwnProperty("subcode")?Number(s.subcode):null,a=s.messageCode,a=a&&a.toUpperCase());const l=r.authMode;if(n===403&&(o===4||s.message&&s.message.toLowerCase().indexOf("ssl")>-1&&s.message.toLowerCase().indexOf("permission")===-1)){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(l!=="no-prompt"||n===498)&&NQ.indexOf(n)!==-1&&!EV(e.params.url)&&(n!==403||DQ.indexOf(a)===-1&&(o==null||o===2&&e.credentialToken))){await WC();try{const u=await ht.getCredential(e.params.url,{error:ta("request:server",s,e.params),prompt:l!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=u,e.credentialToken=u.token,e.useSSL=e.useSSL||u.ssl,!1}catch(u){if(l==="no-prompt")return e.credential=null,e.credentialToken=null,!1;s=u}}if(s)throw s;return!0}function n3(e,t,i=!1){const r=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.src=e,FQ(s,e,i,r)}ft._abortableFetch=null,ft._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];var JQ=Object.freeze(Object.defineProperty({__proto__:null,default:ft},Symbol.toStringTag,{value:"Module"}));function xe(e,t,i){let r,s;return t===void 0||Array.isArray(t)?(s=e,i=t,r=[void 0]):(s=t,r=Array.isArray(e)?e:[e]),(n,o)=>{const a=n.constructor.prototype;r.forEach(l=>{const u=Gz(n,l,s);u.read&&typeof u.read=="object"||(u.read={}),u.read.reader=a[o],i&&(u.read.source=(u.read.source||[]).concat(i))})}}let xa=class extends ue{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Xe.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof Xe)return e;if(e!=null){const i=new Xe;return i.read(e,t),i}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};c([d()],xa.prototype,"type",void 0),c([d({readOnly:!0})],xa.prototype,"cache",null),c([d({readOnly:!0})],xa.prototype,"extent",null),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],xa.prototype,"hasM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],xa.prototype,"hasZ",void 0),c([d({type:Xe,json:{write:!0}})],xa.prototype,"spatialReference",void 0),c([xe("spatialReference")],xa.prototype,"readSpatialReference",null),xa=c([O("esri.geometry.Geometry")],xa);const Ys=xa,ZQ=Object.prototype.toString;function YQ(e){const t="__accessorMetadata__"in e?jt(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return KQ.apply(this,i)}}function KQ(e,t,i,r){Ox(e,t).cast=r}function QQ(e){return function(t,i){Ox(t,e).cast=t[i]}}function gt(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&ZQ.call(e[0])==="[object Function]"?YQ(e[0]):e.length===1&&typeof e[0]=="string"?QQ(e[0]):void 0}function XQ(e,t,i,r){var s;return e.x=e.x+t,e.y=e.y+i,r!=null&&(e.z=((s=e.z)!=null?s:0)+r),e}function eX(e,t){const i=e.x-t.x,r=e.y-t.y,s=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(i*i+r*r+s*s)}class ek{constructor(t,i,r,s){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=r;const n=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*n,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=s||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const li=new ek(6378137,1/298.257223563,3e5,.006694379990137799),sc=new ek(3396190,1/169.8944472236118,23e4),Qu=new ek(1737400,0,0),tX=57.29577951308232,iX=.017453292519943;function o3(e){return e*tX}function a3(e){return e*iX}function XMe(e){return Math.PI/2-2*Math.atan(Math.exp(-e/li.radius))}function JC(e){return e.wkid!=null||e.wkt!=null}const MT=[0,0];function rS(e,t,i,r,s){const n=e,o=s;if(o.spatialReference=i,"x"in n&&"x"in o)[o.x,o.y]=t(n.x,n.y,MT,r);else if("xmin"in n&&"xmin"in o)[o.xmin,o.ymin]=t(n.xmin,n.ymin,MT,r),[o.xmax,o.ymax]=t(n.xmax,n.ymax,MT,r);else if("paths"in n&&"paths"in o||"rings"in n&&"rings"in o){const a="paths"in n?n.paths:n.rings,l=[];let u;for(let h=0;h<a.length;h++){const f=a[h];u=[],l.push(u);for(let y=0;y<f.length;y++)u.push(t(f[y][0],f[y][1],[0,0],r)),f[y].length>2&&u[y].push(f[y][2]),f[y].length>3&&u[y].push(f[y][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in n&&"points"in o){const a=n.points,l=[];for(let u=0;u<a.length;u++)l[u]=t(a[u][0],a[u][1],[0,0],r),a[u].length>2&&l[u].push(a[u][2]),a[u].length>3&&l[u].push(a[u][3]);o.points=l}return s}function vw(e,t){const i=e&&(JC(e)?e:e.spatialReference),r=t&&(JC(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!r)&&(!!Qs(r,i)||Qh(r)&&ev(i)||Qh(i)&&ev(r))}function Hx(e,t){if(Q(e))return null;const i=e.spatialReference,r=t&&(JC(t)?t:t.spatialReference);return vw(i,r)?Qs(i,r)?K(e):Qh(r)?rS(e,Wf,Xe.WebMercator,!1,K(e)):ev(r)?rS(e,w0,Xe.WGS84,!1,K(e)):null:null}function Wf(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=a3(t);return i[0]=a3(e)*li.radius,i[1]=li.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function w0(e,t,i=[0,0],r=!1){const s=o3(e/li.radius);return i[0]=r?s:s-360*Math.floor((s+180)/360),i[1]=o3(Math.PI/2-2*Math.atan(Math.exp(-t/li.radius))),i}function nc(e,t=!1,i=K(e)){return rS(e,Wf,Xe.WebMercator,t,i)}function bg(e,t=!1,i=K(e)){return rS(e,w0,Xe.WGS84,t,i)}var _w;const Dy=[0,0];function l3(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}const sb=fe.getLogger("esri.geometry.Point");let hs=_w=class extends Ys{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(i)?i:i.clone())}normalizeCtorArgs(e,t,i,r,s){let n;if(Array.isArray(e))n=e,s=t,e=n[0],t=n[1],i=n[2],r=n[3];else if(e&&typeof e=="object"){if(n=e,e=n.x!=null?n.x:n.longitude,t=n.y!=null?n.y:n.latitude,i=n.z,r=n.m,(s=n.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new Xe(s)),n.longitude!=null||n.latitude!=null){if(n.longitude==null)sb.warn(".longitude=","Latitude was defined without longitude");else if(n.latitude==null)sb.warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&s&&s.isWebMercator){const a=Wf(n.longitude,n.latitude,Dy);e=a[0],t=a[1]}}}else l3(i)?(s=i,i=null):l3(r)&&(s=r,r=null);const o={x:e,y:t};return o.x==null&&o.y!=null?sb.warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&sb.warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(o.spatialReference=s),i!=null&&(o.z=i),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:i}=this;if(e){if(e.isWebMercator)return w0(t,i,Dy)[1];if(e.isGeographic)return i}return null}set latitude(e){const{spatialReference:t,x:i}=this;t&&(t.isWebMercator?this._set("y",Wf(i,e,Dy)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:i}=this;if(i){if(i.isWebMercator)return w0(e,t,Dy)[0];if(i.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:i}=this;i&&(i.isWebMercator?this._set("x",Wf(e,t,Dy)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new _w;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return _w.copy(e,this),this}equals(e){if(Q(e))return!1;const{x:t,y:i,z:r,m:s,spatialReference:n}=this,{z:o,m:a}=e;let{x:l,y:u,spatialReference:h}=e;if(!n.equals(h))if(n.isWebMercator&&h.isWGS84)[l,u]=Wf(l,u),h=n;else{if(!n.isWGS84||!h.isWebMercator)return!1;[l,u]=w0(l,u),h=n}return t===l&&i===u&&r===o&&s===a&&n.wkid===h.wkid}offset(e,t,i){return XQ(this,e,t,i)}normalize(){if(!this.spatialReference)return this;const e=na(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,s=2*r;let n;return t>r?(n=Math.ceil(Math.abs(t-r)/s),t-=n*s):t<i&&(n=Math.ceil(Math.abs(t-i)/s),t+=n*s),this._set("x",t),this}distance(e){return eX(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};c([d({readOnly:!0})],hs.prototype,"cache",null),c([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],hs.prototype,"hasM",null),c([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],hs.prototype,"hasZ",null),c([d({type:Number})],hs.prototype,"latitude",null),c([d({type:Number})],hs.prototype,"longitude",null),c([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),gt(e=>isNaN(e)?e:oo(e))],hs.prototype,"x",void 0),c([$e("x")],hs.prototype,"writeX",null),c([xe("x")],hs.prototype,"readX",null),c([d({type:Number,json:{write:!0}})],hs.prototype,"y",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],hs.prototype,"z",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],hs.prototype,"m",void 0),hs=_w=c([O("esri.geometry.Point")],hs),hs.prototype.toJSON.isDefaultToJSON=!0;const Le=hs,OT=[0,0];function Wx(e,t){return!!N(t)&&gs(e,t.x,t.y,t.z)}function eOe(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!Cm(e,i))return!1;return!0}function rX(e,t){const{xmin:i,ymin:r,zmin:s,xmax:n,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?gs(e,i,r,s)&&gs(e,i,o,s)&&gs(e,n,o,s)&&gs(e,n,r,s)&&gs(e,i,r,a)&&gs(e,i,o,a)&&gs(e,n,o,a)&&gs(e,n,r,a):gs(e,i,r)&&gs(e,i,o)&&gs(e,n,o)&&gs(e,n,r)}function Cm(e,t){return gs(e,t[0],t[1])}function sX(e,t){return gs(e,t[0],t[1],t[2])}function gs(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function AV(e,t){return OT[1]=t.y,OT[0]=t.x,MV(e,OT)}function MV(e,t){return nX(e.rings,t)}function nX(e,t){if(!e)return!1;if(oX(e))return c3(!1,e,t);let i=!1;for(let r=0,s=e.length;r<s;r++)i=c3(i,e[r],t);return i}function oX(e){return!Array.isArray(e[0][0])}function c3(e,t,i){const[r,s]=i;let n=e,o=0;for(let a=0,l=t.length;a<l;a++){o++,o===l&&(o=0);const[u,h]=t[a],[f,y]=t[o];(h<s&&y>=s||y<s&&h>=s)&&u+(s-h)/(y-h)*(f-u)<r&&(n=!n)}return n}function aX(e,t){return Wx(e,t)}function lX(e,t){const i=e.hasZ&&t.hasZ;let r,s,n;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(s=t.ymin,e.ymax<s)return!1}else if(s=e.ymin,t.ymax<s)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(n=t.zmin,e.zmax<n)return!1}else if(n=e.zmin,t.zmax<n)return!1}return!0}function cX(e,t){const{points:i,hasZ:r}=t,s=r?sX:Cm;for(const n of i)if(s(e,n))return!0;return!1}const Xh=[0,0],ep=[0,0],tp=[0,0],ip=[0,0],uX=[Xh,ep,tp,ip],OV=[[tp,Xh],[Xh,ep],[ep,ip],[ip,tp]];function dX(e,t){Xh[0]=e.xmin,Xh[1]=e.ymax,ep[0]=e.xmax,ep[1]=e.ymax,tp[0]=e.xmin,tp[1]=e.ymin,ip[0]=e.xmax,ip[1]=e.ymin;for(const i of uX)if(MV(t,i))return!0;for(const i of t.rings){if(!i.length)continue;let r=i[0];if(Cm(e,r))return!0;for(let s=1;s<i.length;s++){const n=i[s];if(Cm(e,n)||kV(r,n,OV))return!0;r=n}}return!1}function hX(e,t){Xh[0]=e.xmin,Xh[1]=e.ymax,ep[0]=e.xmax,ep[1]=e.ymax,tp[0]=e.xmin,tp[1]=e.ymin,ip[0]=e.xmax,ip[1]=e.ymin;const i=t.paths;for(const r of i){if(!i.length)continue;let s=r[0];if(Cm(e,s))return!0;for(let n=1;n<r.length;n++){const o=r[n];if(Cm(e,o)||kV(s,o,OV))return!0;s=o}}return!1}const gr=[0,0];function pX(e){for(let t=0;t<e.length;t++){const i=e[t];for(let s=0;s<i.length-1;s++){const n=i[s],o=i[s+1];for(let a=t+1;a<e.length;a++)for(let l=0;l<e[a].length-1;l++){const u=e[a][l],h=e[a][l+1];if(ZC(n,o,u,h,gr)&&!(gr[0]===n[0]&&gr[1]===n[1]||gr[0]===u[0]&&gr[1]===u[1]||gr[0]===o[0]&&gr[1]===o[1]||gr[0]===h[0]&&gr[1]===h[1]))return!0}}const r=i.length;if(!(r<=4))for(let s=0;s<r-3;s++){let n=r-1;s===0&&(n=r-2);const o=i[s],a=i[s+1];for(let l=s+2;l<n;l++){const u=i[l],h=i[l+1];if(ZC(o,a,u,h,gr)&&!(gr[0]===o[0]&&gr[1]===o[1]||gr[0]===u[0]&&gr[1]===u[1]||gr[0]===a[0]&&gr[1]===a[1]||gr[0]===h[0]&&gr[1]===h[1]))return!0}}}return!1}function kV(e,t,i){for(let r=0;r<i.length;r++)if(ZC(e,t,i[r][0],i[r][1]))return!0;return!1}function ZC(e,t,i,r,s){const[n,o]=e,[a,l]=t,[u,h]=i,[f,y]=r,g=f-u,b=n-u,w=a-n,x=y-h,T=o-h,M=l-o,F=x*w-g*M;if(F===0)return!1;const D=(g*T-x*b)/F,R=(w*T-M*b)/F;return D>=0&&D<=1&&R>=0&&R<=1&&(s&&(s[0]=n+D*(a-n),s[1]=o+D*(l-o)),!0)}function fX(e){switch(e){case"esriGeometryEnvelope":case"extent":return lX;case"esriGeometryMultipoint":case"multipoint":return cX;case"esriGeometryPoint":case"point":return aX;case"esriGeometryPolygon":case"polygon":return dX;case"esriGeometryPolyline":case"polyline":return hX}}var Wn;function mX(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Ec(e,t,i){return t==null?i:i==null?t:e(t,i)}let or=Wn=class extends Ys{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,s){return mX(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?Xe.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:s==null?Xe.WGS84:s}}static fromBounds(e,t){return new Wn({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new Wn({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new Le({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Wn;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&vw(t,i)&&(e=t.isWebMercator?nc(e):bg(e,!0)),e.type==="point"?Wx(this,e):e.type==="extent"&&rX(this,e)}equals(e){if(this===e)return!0;if(Q(e))return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&vw(t,i)&&(e=t.isWebMercator?nc(e):bg(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const s=(this.zmax-this.zmin)*t;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*t;this.mmin+=s,this.mmax-=s}return this}intersects(e){if(Q(e))return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&vw(t,i)&&(e=t.isWebMercator?nc(e):bg(e,!0)),fX(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Ec(Math.min,this.zmin,e.zmin),this.zmax=Ec(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Ec(Math.min,this.mmin,e.mmin),this.mmax=Ec(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:Q(e)||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Ec(Math.max,this.zmin,e.zmin),this.zmax=Ec(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Ec(Math.max,this.mmin,e.mmin),this.mmax=Ec(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=na(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const r=t.isWebMercator?bg(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(r.x=this._normalizeX(r.x,e).x),this.spatialReference=new Xe(Xa(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,s=this.xmin,n=this.xmax;return s>=i&&s<=r&&n>=i&&n<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;if(!(i=i||na(r)))return this;const s=this._getParts(i).map(a=>a.extent);if(s.length<2)return s[0]||this;if(s.length>2)return e?this._shiftCM(i):this.set({xmin:i.valid[0],xmax:i.valid[1]});if(e)return this._shiftCM(i);if(t)return s;let n=!0,o=!0;return s.forEach(a=>{a.hasZ||(n=!1),a.hasM||(o=!1)}),{rings:s.map(a=>{const l=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(n){const u=(a.zmax-a.zmin)/2;for(let h=0;h<l.length;h++)l[h].push(u)}if(o){const u=(a.mmax-a.mmin)/2;for(let h=0;h<l.length;h++)l[h].push(u)}return l}),hasZ:n,hasM:o,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:s,ymax:n,spatialReference:o}=this,a=this.width,l=this.xmin,u=this.xmax;let h;e=e||na(o);const[f,y]=e.valid;h=this._normalizeX(this.xmin,e);const g=h.x,b=h.frameId;h=this._normalizeX(this.xmax,e);const w=h.x,x=h.frameId,T=g===w&&a>0;if(a>2*y){const M=new Wn(l<u?g:w,s,y,n,o),F=new Wn(f,s,l<u?w:g,n,o),D=new Wn(0,s,y,n,o),R=new Wn(f,s,0,n,o),_=[],q=[];M.contains(D)&&_.push(b),M.contains(R)&&q.push(b),F.contains(D)&&_.push(x),F.contains(R)&&q.push(x);for(let W=b+1;W<x;W++)_.push(W),q.push(W);t.push({extent:M,frameIds:[b]},{extent:F,frameIds:[x]},{extent:D,frameIds:_},{extent:R,frameIds:q})}else g>w||T?t.push({extent:new Wn(g,s,y,n,o),frameIds:[b]},{extent:new Wn(f,s,w,n,o),frameIds:[x]}):t.push({extent:new Wn(g,s,w,n,o),frameIds:[b]});this.cache._parts=t}const i=this.hasZ,r=this.hasM;if(i||r){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),r&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let n=0;n<t.length;n++)t[n].extent.set(s)}return t}_normalizeX(e,t){const[i,r]=t.valid,s=2*r;let n,o=0;return e>r?(n=Math.ceil(Math.abs(e-r)/s),e-=n*s,o=n):e<i&&(n=Math.ceil(Math.abs(e-i)/s),e+=n*s,o=-n),{x:e,frameId:o}}};c([d({readOnly:!0})],or.prototype,"cache",null),c([d({readOnly:!0})],or.prototype,"center",null),c([d({readOnly:!0})],or.prototype,"extent",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],or.prototype,"hasM",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],or.prototype,"hasZ",null),c([d({readOnly:!0})],or.prototype,"height",null),c([d({readOnly:!0})],or.prototype,"width",null),c([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],or.prototype,"xmin",void 0),c([d({type:Number,json:{write:!0}})],or.prototype,"ymin",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],or.prototype,"mmin",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],or.prototype,"zmin",void 0),c([d({type:Number,json:{write:!0}})],or.prototype,"xmax",void 0),c([d({type:Number,json:{write:!0}})],or.prototype,"ymax",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],or.prototype,"mmax",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],or.prototype,"zmax",void 0),or=Wn=c([O("esri.geometry.Extent")],or),or.prototype.toJSON.isDefaultToJSON=!0;const Et=or;var u3,d3,h3;let yX,S0;const p3=(u3=(d3=globalThis.esriConfig)==null?void 0:d3.locale)!=null?u3:(h3=globalThis.dojoConfig)==null?void 0:h3.locale;function PV(){var e,t;return(e=p3!=null?p3:(t=globalThis.navigator)==null?void 0:t.language)!=null?e:"en"}function mr(){return S0===void 0&&(S0=PV()),S0}function gX(e=mr()){const t=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(e);return t==null?void 0:t[1].toLowerCase()}const x0=[];function Xv(e){return x0.push(e),{remove(){x0.splice(x0.indexOf(e),1)}}}const YC=[];function tk(e){return YC.push(e),{remove(){x0.splice(YC.indexOf(e),1)}}}function vX(){var e;const t=(e=yX)!=null?e:PV();S0!==t&&(S0=t,[...YC].forEach(i=>{i.call(null,t)}),[...x0].forEach(i=>{i.call(null,t)}))}globalThis.addEventListener==null||globalThis.addEventListener("languagechange",vX);class rt{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this.jsonToAPI=t,this.options=i,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this.apiToJSON),this.jsonValues=this._getKeysSorted(this.jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,s,n)=>{const o=this.toJSON(r);o!==void 0&&Ln(n,o,s)},this.write.isJSONMapWriter=!0}toJSON(t){if(this.apiToJSON.hasOwnProperty(t)){const i=this.apiToJSON[t];return this.options.useNumericKeys?+i:i}return this.options.ignoreUnknown?void 0:t}fromJSON(t){return this.jsonToAPI.hasOwnProperty(t)?this.jsonToAPI[t]:this.options.ignoreUnknown?void 0:t}_invertMap(t){const i={};for(const r in t)i[t[r]]=r;return i}_getKeysSorted(t){const i=[];for(const r in t)i.push(r);return i.sort(),i}}function Br(){return function(e,t){return new rt(e,k({ignoreUnknown:!0},t))}}var KC;const _X=new rt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Jn=KC=class extends Ee{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new KC({categories:this.categories?K(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i,r;if(this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o)),this.extent){const o=Hx(this.extent,Xe.WGS84);N(o)&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const n={categories:i,bbox:r,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map(o=>_X.toJSON(o.trim())).join(","),n.sortOrder=this.sortOrder),{query:k(k({},t),n)}}};c([d()],Jn.prototype,"categories",void 0),c([d()],Jn.prototype,"disableExtraQuery",void 0),c([d({type:Et})],Jn.prototype,"extent",void 0),c([d()],Jn.prototype,"filter",void 0),c([d()],Jn.prototype,"num",void 0),c([d()],Jn.prototype,"query",void 0),c([d()],Jn.prototype,"sortField",void 0),c([d()],Jn.prototype,"sortOrder",null),c([d()],Jn.prototype,"start",void 0),Jn=KC=c([O("esri.portal.PortalQueryParams")],Jn);const ec=Jn;let Md=class extends Ee{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};c([d()],Md.prototype,"nextQueryParams",void 0),c([d()],Md.prototype,"queryParams",void 0),c([d()],Md.prototype,"results",void 0),c([d()],Md.prototype,"total",void 0),Md=c([O("esri.portal.PortalQueryResult")],Md);const bX=Md;let Tl=class extends ue{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new B("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};c([d({type:Date})],Tl.prototype,"created",void 0),c([d()],Tl.prototype,"id",void 0),c([d()],Tl.prototype,"portal",void 0),c([d()],Tl.prototype,"title",void 0),c([d({readOnly:!0})],Tl.prototype,"url",null),c([d()],Tl.prototype,"username",void 0),Tl=c([O("esri.portal.PortalFolder")],Tl);const wX=Tl;let ar=class extends ue{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal._request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return this.portal._request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new B("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){let i=jt(ec,e);return parseFloat(this.portal.currentVersion)>5?(i=i||new ec,this.portal._queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new ec,i.query="group:"+this.id+(i.query?" "+i.query:""),this.portal.queryItems(i,t))}_fetchCategorySchemaSet(e,t){return this.portal._fetchSelf(this.portal.authMode,!0,t).then(i=>{const r=i.contentCategorySetsGroupQuery;if(r){const s=new ec;return s.disableExtraQuery=!0,s.num=1,s.query=r,this.portal.queryGroups(s,t)}throw new B("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const r=i.results[0],s=new ec;return s.num=1,s.query=`typekeywords:"${e}"`,r.queryItems(s,t)}throw new B("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",t).then(r=>{const s=r&&r.categorySchema;return s&&s.length?s:[]}):[])}};c([d()],ar.prototype,"access",void 0),c([d({type:Date})],ar.prototype,"created",void 0),c([d()],ar.prototype,"description",void 0),c([d()],ar.prototype,"id",void 0),c([d()],ar.prototype,"isInvitationOnly",void 0),c([d({type:Date})],ar.prototype,"modified",void 0),c([d()],ar.prototype,"owner",void 0),c([d()],ar.prototype,"portal",void 0),c([d()],ar.prototype,"snippet",void 0),c([d()],ar.prototype,"sortField",void 0),c([d()],ar.prototype,"sortOrder",void 0),c([d()],ar.prototype,"tags",void 0),c([d()],ar.prototype,"thumbnail",void 0),c([d({readOnly:!0})],ar.prototype,"thumbnailUrl",null),c([d()],ar.prototype,"title",void 0),c([d({readOnly:!0})],ar.prototype,"url",null),ar=c([O("esri.portal.PortalGroup")],ar);const QC=ar;var SX=Object.freeze(Object.defineProperty({__proto__:null,default:QC},Symbol.toStringTag,{value:"Module"})),XC;let oi=XC=class extends ue{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e&&e.data,r=e&&e.folder,s={method:"post"};t&&(s.query=t.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let n=this.userContentUrl;return r&&(n+="/"+(typeof r=="string"?r:r.id)),this.portal._request(n+"/addItem",s).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",i=e.map(r=>r.id);if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal._request(t,r).then(()=>{e.forEach(s=>{s.id=null,s.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal._request(this.userContentUrl,e).then(t=>{let i;return i=t&&t.folders?t.folders.map(r=>{const s=wX.fromJSON(r);return s.portal=this.portal,s}):[],i})}fetchGroups(){return this.portal._request(this.url).then(e=>{let t;return t=e&&e.groups?e.groups.map(i=>{const r=QC.fromJSON(i);return r.portal=this.portal,r}):[],t})}fetchItems(e){e||(e={});let t,i=this.userContentUrl;return e.folder&&(i+="/"+e.folder.id),se(()=>Promise.resolve().then(function(){return LV}),void 0).then(({default:r})=>{t=r;const s={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal._request(i,{query:s})}).then(r=>{let s;return r&&r.items?(s=r.items.map(n=>{const o=t.fromJSON(n);return o.portal=this.portal,o}),Promise.all(s.map(n=>n.load())).catch(n=>n).then(()=>({items:s,nextStart:r.nextStart,total:r.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new QC({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new B("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new B("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new XC;return t.sourceJSON=e,t.read(e),t}};c([d()],oi.prototype,"access",void 0),c([d({type:Date})],oi.prototype,"created",void 0),c([d()],oi.prototype,"culture",void 0),c([d()],oi.prototype,"description",void 0),c([d()],oi.prototype,"email",void 0),c([d()],oi.prototype,"favGroupId",void 0),c([d()],oi.prototype,"fullName",void 0),c([d({type:Date})],oi.prototype,"modified",void 0),c([d()],oi.prototype,"orgId",void 0),c([d()],oi.prototype,"portal",void 0),c([d()],oi.prototype,"preferredView",void 0),c([d()],oi.prototype,"privileges",void 0),c([d()],oi.prototype,"region",void 0),c([d()],oi.prototype,"role",void 0),c([d()],oi.prototype,"roleId",void 0),c([d()],oi.prototype,"sourceJSON",void 0),c([d()],oi.prototype,"thumbnail",void 0),c([d({readOnly:!0})],oi.prototype,"thumbnailUrl",null),c([d()],oi.prototype,"units",void 0),c([d({readOnly:!0})],oi.prototype,"userContentUrl",null),c([d({readOnly:!0})],oi.prototype,"url",null),c([d()],oi.prototype,"username",void 0),c([d()],oi.prototype,"userType",void 0),oi=XC=c([O("esri.portal.PortalUser")],oi);const ik=oi;var xX=Object.freeze(Object.defineProperty({__proto__:null,default:ik},Symbol.toStringTag,{value:"Module"})),pn;let kT;const f3={PortalGroup:()=>se(()=>Promise.resolve().then(function(){return SX}),void 0),PortalItem:()=>se(()=>Promise.resolve().then(function(){return LV}),void 0),PortalUser:()=>se(()=>Promise.resolve().then(function(){return xX}),void 0)};let we=pn=class extends Kv(dc){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Tt.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Tt.request.trustedServers.indexOf(t)===-1&&Tt.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get stylesGroupQuery(){return Y0(fe.getLogger(this.declaredClass),"stylesGroupQuery",{replacement:"stylesGroupQuery3d",version:"4.21"}),this.stylesGroupQuery3d}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=ik.fromJSON(e),t.portal=this),t}load(e){const t=se(()=>Promise.resolve().then(function(){return zX}),void 0).then(({default:i})=>{Gi(e),kT=i}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e)).then(i=>{if(ht){const r=ht;this.credential=r.findCredential(this.restUrl),this.credential||this.authMode!==pn.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=r.on("credential-create",()=>{r.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createClosestFacilityTask(){ef(fe.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/closestFacility",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("closestFacility");return new(await se(()=>import("./ClosestFacilityTask.58f94844.js"),["assets/ClosestFacilityTask.58f94844.js","assets/NAMessage.ba4db950.js","assets/GPMessage.9e6158b7.js","assets/DirectionsFeatureSet.b55ca167.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])).default(e)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await se(()=>import("./ElevationLayer.c2c8f7ab.js"),["assets/ElevationLayer.c2c8f7ab.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ArcGISCachedService.da524381.js","assets/TilemapCache.5774a91c.js","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}async createGeometryService(){ef(fe.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/geometryService",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("geometry");return new(await se(()=>import("./GeometryService.55ca7d61.js"),["assets/GeometryService.55ca7d61.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])).default({url:e})}async createPrintTask(){ef(fe.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/print",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("printTask");return new(await se(()=>import("./PrintTask.70360cac.js"),["assets/PrintTask.70360cac.js","assets/GPMessage.9e6158b7.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])).default(e)}async createRouteTask(){ef(fe.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/route",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("route");return new(await se(()=>import("./RouteTask.aafbb737.js"),["assets/RouteTask.aafbb737.js","assets/route.d095460c.js","assets/NAMessage.ba4db950.js","assets/GPMessage.9e6158b7.js","assets/DirectionsFeatureSet.b55ca167.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])).default(e)}async createServiceAreaTask(){ef(fe.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/serviceArea",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("serviceArea");return new(await se(()=>import("./ServiceAreaTask.b43e80da.js"),["assets/ServiceAreaTask.b43e80da.js","assets/NAMessage.ba4db950.js","assets/GPMessage.9e6158b7.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])).default(e)}fetchBasemaps(e,t){const i=new ec;return i.query=e||(Tt.apiKey&&$V(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0,this.queryGroups(i,t).then(r=>{if(i.num=100,i.query='type:"Web Map" -type:"Web Application"',r.total){const s=r.results[0];return i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc",s.queryItems(i,t)}return null}).then(r=>{let s;return s=r&&r.total?r.results.filter(n=>n.type==="Web Map").map(n=>new kT({portalItem:n})):[],s})}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):da(e)?Promise.reject(qi()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new ec;if(i.num=100,i.sortField="title",t&&t.length){const r=[];for(const s of t)r.push(`(title:"${s.title}" AND owner:${s.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then(s=>s.results)}return da(e)?Promise.reject(qi()):Promise.resolve([])}fetchRegions(e){var t;const i=((t=this.user)==null?void 0:t.culture)||this.culture||mr();return this._request(this.restUrl+"/portals/regions",be(k({},e),{query:{culture:i}}))}fetchSettings(e){var t;const i=((t=this.user)==null?void 0:t.culture)||this.culture||mr();return this._request(this.restUrl+"/portals/self/settings",be(k({},e),{query:{culture:i}}))}static getDefault(){return pn._default&&!pn._default.destroyed||(pn._default=new pn),pn._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new B("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new pn({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new B("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new B("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",s=k({authMode:e,query:{culture:mr().toLowerCase()}},i);return s.authMode==="auto"&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this._request(r,s)}_queryPortal(e,t,i,r){const s=jt(ec,t),n=o=>this._request(this.restUrl+e,k(k({},s.toRequestOptions(this)),r)).then(a=>{const l=s.clone();return l.start=a.nextStart,new bX({nextQueryParams:l,queryParams:s,total:a.total,results:pn._resultsToTypedArray(o,{portal:this},a,r)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(Jv(l),a)));return i&&f3[i]?f3[i]().then(({default:o})=>(Gi(r),n(o))):n()}_signIn(){if(this.authMode===pn.AUTH_MODE_ANONYMOUS)return Promise.reject(new B("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this._fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this._fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return ht?ht.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.indexOf("?")>-1?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,i){return this._request(e,t).then(r=>{const s=pn._resultsToTypedArray(i,{portal:this},r);return Promise.all(s.map(n=>typeof n.when=="function"?n.when():r)).then(()=>s,()=>s)})}_readBasemap(e){if(e){const t=kT.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const i=k({f:"json"},t.query),{authMode:r=this.authMode===pn.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:s=null,cacheBust:n=!1,method:o="auto",responseType:a="json",signal:l}=t,u={authMode:r,body:s,cacheBust:n,method:o,query:i,responseType:a,timeout:0,signal:l};return ft(this._normalizeSSL(e),u).then(h=>h.data)}static _resultsToTypedArray(e,t,i,r){let s;if(i){const n=N(r)?r.signal:null;s=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(s=s.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(n),a}))}else s=[];return s}};we.AUTH_MODE_ANONYMOUS="anonymous",we.AUTH_MODE_AUTO="auto",we.AUTH_MODE_IMMEDIATE="immediate",c([d()],we.prototype,"access",void 0),c([d()],we.prototype,"allSSL",void 0),c([d()],we.prototype,"authMode",void 0),c([d()],we.prototype,"authorizedCrossOriginDomains",void 0),c([xe("authorizedCrossOriginDomains")],we.prototype,"readAuthorizedCrossOriginDomains",null),c([d()],we.prototype,"basemapGalleryGroupQuery",void 0),c([d()],we.prototype,"bingKey",void 0),c([d()],we.prototype,"canListApps",void 0),c([d()],we.prototype,"canListData",void 0),c([d()],we.prototype,"canListPreProvisionedItems",void 0),c([d()],we.prototype,"canProvisionDirectPurchase",void 0),c([d()],we.prototype,"canSearchPublic",void 0),c([d()],we.prototype,"canShareBingPublic",void 0),c([d()],we.prototype,"canSharePublic",void 0),c([d()],we.prototype,"canSignInArcGIS",void 0),c([d()],we.prototype,"canSignInIDP",void 0),c([d()],we.prototype,"colorSetsGroupQuery",void 0),c([d()],we.prototype,"commentsEnabled",void 0),c([d({type:Date})],we.prototype,"created",void 0),c([d()],we.prototype,"credential",void 0),c([d()],we.prototype,"culture",void 0),c([d()],we.prototype,"currentVersion",void 0),c([d()],we.prototype,"customBaseUrl",void 0),c([d()],we.prototype,"defaultBasemap",void 0),c([xe("defaultBasemap")],we.prototype,"readDefaultBasemap",null),c([d()],we.prototype,"defaultDevBasemap",void 0),c([xe("defaultDevBasemap")],we.prototype,"readDefaultDevBasemap",null),c([d({type:Et})],we.prototype,"defaultExtent",void 0),c([d()],we.prototype,"defaultVectorBasemap",void 0),c([xe("defaultVectorBasemap")],we.prototype,"readDefaultVectorBasemap",null),c([d()],we.prototype,"description",void 0),c([d()],we.prototype,"devBasemapGalleryGroupQuery",void 0),c([d()],we.prototype,"eueiEnabled",void 0),c([d({readOnly:!0})],we.prototype,"extraQuery",null),c([d()],we.prototype,"featuredGroups",void 0),c([d()],we.prototype,"featuredItemsGroupQuery",void 0),c([d()],we.prototype,"galleryTemplatesGroupQuery",void 0),c([d()],we.prototype,"livingAtlasGroupQuery",void 0),c([d()],we.prototype,"hasCategorySchema",void 0),c([d()],we.prototype,"helpBase",void 0),c([d()],we.prototype,"helperServices",void 0),c([d()],we.prototype,"helpMap",void 0),c([d()],we.prototype,"homePageFeaturedContent",void 0),c([d()],we.prototype,"homePageFeaturedContentCount",void 0),c([d()],we.prototype,"httpPort",void 0),c([d()],we.prototype,"httpsPort",void 0),c([d()],we.prototype,"id",void 0),c([d()],we.prototype,"ipCntryCode",void 0),c([d({readOnly:!0})],we.prototype,"isOrganization",null),c([d()],we.prototype,"isPortal",void 0),c([d()],we.prototype,"isReadOnly",void 0),c([d()],we.prototype,"layerTemplatesGroupQuery",void 0),c([d()],we.prototype,"maxTokenExpirationMinutes",void 0),c([d({type:Date})],we.prototype,"modified",void 0),c([d()],we.prototype,"name",void 0),c([d()],we.prototype,"portalHostname",void 0),c([d()],we.prototype,"portalMode",void 0),c([d()],we.prototype,"portalProperties",void 0),c([d()],we.prototype,"region",void 0),c([d({readOnly:!0})],we.prototype,"restUrl",null),c([d()],we.prototype,"rotatorPanels",void 0),c([d()],we.prototype,"showHomePageDescription",void 0),c([d()],we.prototype,"sourceJSON",void 0),c([d()],we.prototype,"staticImagesUrl",void 0),c([d({readOnly:!0,json:{read:!1}})],we.prototype,"stylesGroupQuery",null),c([d({json:{name:"2DStylesGroupQuery"}})],we.prototype,"stylesGroupQuery2d",void 0),c([d({json:{name:"stylesGroupQuery"}})],we.prototype,"stylesGroupQuery3d",void 0),c([d()],we.prototype,"supportsHostedServices",void 0),c([d()],we.prototype,"symbolSetsGroupQuery",void 0),c([d()],we.prototype,"templatesGroupQuery",void 0),c([d()],we.prototype,"thumbnail",void 0),c([d({readOnly:!0})],we.prototype,"thumbnailUrl",null),c([d()],we.prototype,"units",void 0),c([d()],we.prototype,"url",void 0),c([d()],we.prototype,"urlKey",void 0),c([xe("urlKey")],we.prototype,"readUrlKey",null),c([d()],we.prototype,"user",void 0),c([xe("user")],we.prototype,"readUser",null),c([d()],we.prototype,"useStandardizedQuery",void 0),c([d()],we.prototype,"useVectorBasemaps",void 0),c([d()],we.prototype,"vectorBasemapGalleryGroupQuery",void 0),we=pn=c([O("esri.portal.Portal")],we);const zr=we,IX=fe.getLogger("esri.assets");function It(e){if(!Tt.assetsPath)throw IX.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new B("assets:path-not-set","config.assetsPath is not set");return Ku(Tt.assetsPath,e)}const TX=fe.getLogger("esri.portal.PortalItemResource");let Vc=class extends Ee{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?be(k({},e),{path:this._normalizePath(e.path,e.portalItem)}):e}set path(e){N(e)&&On(e)?TX.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const i=this.url;if(Q(i))throw new B("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(i,{responseType:e,query:{token:this.portalItem.apiKey},signal:Cx(t,"signal")})}async update(e,t){return(await se(()=>import("./resourceUtils.17d76049.js"),["assets/resourceUtils.17d76049.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])).addOrUpdateResource(this,"update",e,t)}hasPath(){return N(this.path)}_normalizePath(e,t){return Q(e)?e:(e=e.replace(/^\/+/,""),N(t)&&On(e)&&(e=WO(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};c([d()],Vc.prototype,"portalItem",void 0),c([d({type:String,value:null})],Vc.prototype,"path",null),c([gt("path")],Vc.prototype,"_castPath",null),c([d({type:String,readOnly:!0})],Vc.prototype,"url",null),c([d({type:String,readOnly:!0})],Vc.prototype,"itemRelativeUrl",null),Vc=c([O("esri.portal.PortalItemResource")],Vc);const $X=Vc;let wg=class extends Ee{constructor(e){super(e),this.created=null,this.rating=null}};c([d()],wg.prototype,"created",void 0),c([d()],wg.prototype,"rating",void 0),wg=c([O("esri.portal.PortalRating")],wg);const PT=wg;var tf;let mt=tf=class extends Kv(dc){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return DO(tf,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":e==="Image Service"?i=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Media Service"?i="Media Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?i=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":e==="Geocoding Service"?i="Locator":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.indexOf("Spatiotemporal")===-1&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&t.indexOf("Relational")===-1?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?i=e.replace(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.indexOf("configurableApp")>-1&&(i="Instant App"),i}readExtent(e){return e&&e.length?new Et(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],i="esri/images/portal/",r="16";let s,n=!1,o=!1,a=!1,l=!1,u=!1,h=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(n=t.indexOf("Hosted Service")>-1,e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.indexOf("Table")>-1,a=t.indexOf("Route Layer")>-1,l=t.indexOf("Markup")>-1,u=t.indexOf("Spatiotemporal")!==-1,h=t.indexOf("UtilityNetwork")!==-1,s=u&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":u?"spatiotemporal":n?"featureshosted":h?"utilitynetwork":"features"):s=e==="map service"||e==="wms"||e==="wmts"?n||t.indexOf("Tiled")>-1||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.indexOf("Line")>-1?"sceneweblayerline":t.indexOf("3DObject")>-1?"sceneweblayermultipatch":t.indexOf("Point")>-1?"sceneweblayerpoint":t.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":t.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":t.indexOf("Polygon")>-1?"sceneweblayerpolygon":t.indexOf("Building")>-1?"sceneweblayerbuilding":t.indexOf("Voxel")>-1?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.indexOf("Elevation 3D Layer")>-1?"elevationlayer":t.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="media service"?"mediaservice":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"&&t.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):s=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.indexOf("configurableApp")>-1?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.indexOf("ArcGIS Pro")>-1||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="360 vr experience"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.indexOf("Explorer Mapping Application")>-1||t.indexOf("Document")>-1?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="hub project"?"hubproject":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="experience builder widget"?"experiencebuilderwidget":e==="experience builder widget package"?"experiencebuilderwidgetpackage":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":"maps",s?It(i+s+r+".png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=zr.getDefault());const t=this.portal.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:N(e)?e.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof PT&&(e=e.rating),isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then(()=>new PT({rating:e,created:new Date}))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:K(this.applicationProxies),avgRating:this.avgRating,categories:K(this.categories),created:K(this.created),culture:this.culture,description:this.description,extent:K(this.extent),groupCategories:K(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:K(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:K(this.screenshots),size:this.size,snippet:this.snippet,tags:K(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:K(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new tf({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",be(k({responseType:e},t),{query:{token:this.apiKey}}))}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",k({query:{token:this.apiKey}},e)).then(t=>t.rating!=null?(t.created=new Date(t.created),new PT(t)):null)}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",k({query:be(k({},e),{token:this.apiKey})},t),tf)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e&&e.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new B("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if(typeof t=="string")fp(t)?r.query={data:t}:r.query={url:An(t)},N(i)&&(r.query.filename=i);else{const s=new FormData;N(i)?s.append("file",t,i):s.append("file",t),r.body=s}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new B("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await se(()=>import("./resourceUtils.17d76049.js"),["assets/resourceUtils.17d76049.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])).fetchResources(this,e,t)}async addResource(e,t,i){const r=await se(()=>import("./resourceUtils.17d76049.js"),["assets/resourceUtils.17d76049.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]);return e.portalItem=this,r.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const i=await se(()=>import("./resourceUtils.17d76049.js"),["assets/resourceUtils.17d76049.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new B("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,e,t)}async removeAllResources(e){return(await se(()=>import("./resourceUtils.17d76049.js"),["assets/resourceUtils.17d76049.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])).removeAllResources(this,e)}resourceFromPath(e){return new $X({portalItem:this,path:e})}toJSON(){const e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return Ex(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new tf({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};c([d({type:["private","shared","org","public"]})],mt.prototype,"access",void 0),c([d()],mt.prototype,"accessInformation",void 0),c([d({type:String})],mt.prototype,"apiKey",void 0),c([d({json:{read:{source:"appProxies"}}})],mt.prototype,"applicationProxies",void 0),c([d()],mt.prototype,"avgRating",void 0),c([d()],mt.prototype,"categories",void 0),c([d({type:Date})],mt.prototype,"created",void 0),c([d()],mt.prototype,"culture",void 0),c([d()],mt.prototype,"description",void 0),c([d({readOnly:!0})],mt.prototype,"displayName",null),c([d({type:Et})],mt.prototype,"extent",void 0),c([xe("extent")],mt.prototype,"readExtent",null),c([d()],mt.prototype,"groupCategories",void 0),c([d({readOnly:!0})],mt.prototype,"iconUrl",null),c([d()],mt.prototype,"id",void 0),c([d({readOnly:!0})],mt.prototype,"isLayer",null),c([d()],mt.prototype,"itemControl",void 0),c([d({readOnly:!0})],mt.prototype,"itemUrl",null),c([d()],mt.prototype,"licenseInfo",void 0),c([d({type:Date})],mt.prototype,"modified",void 0),c([d()],mt.prototype,"name",void 0),c([d()],mt.prototype,"numComments",void 0),c([d()],mt.prototype,"numRatings",void 0),c([d()],mt.prototype,"numViews",void 0),c([d()],mt.prototype,"owner",void 0),c([d()],mt.prototype,"ownerFolder",void 0),c([d({type:zr})],mt.prototype,"portal",void 0),c([d()],mt.prototype,"screenshots",void 0),c([d()],mt.prototype,"size",void 0),c([d()],mt.prototype,"snippet",void 0),c([d()],mt.prototype,"sourceJSON",void 0),c([d()],mt.prototype,"tags",void 0),c([d()],mt.prototype,"thumbnail",void 0),c([d({readOnly:!0})],mt.prototype,"thumbnailUrl",null),c([d()],mt.prototype,"title",void 0),c([d()],mt.prototype,"type",void 0),c([d()],mt.prototype,"typeKeywords",void 0),c([d()],mt.prototype,"url",void 0),c([d({readOnly:!0})],mt.prototype,"userItemUrl",null),mt=tf=c([O("esri.portal.PortalItem")],mt);const sS=mt;var LV=Object.freeze(Object.defineProperty({__proto__:null,default:sS},Symbol.toStringTag,{value:"Module"}));const m3=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,CX={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function y3(e){var t;return(t=CX[e])!=null&&t}const Sg=[],hm=new Map;function g3(e){for(const t of hm.keys())RV(e.pattern,t)&&hm.delete(t)}function EX(e){return Sg.includes(e)||(g3(e),Sg.unshift(e)),{remove(){const t=Sg.indexOf(e);t>-1&&(Sg.splice(t,1),g3(e))}}}async function Em(e){const t=mr();hm.has(e)||hm.set(e,MX(e,t));const i=hm.get(e);return await OX.add(i),i}function AX(e){if(!m3.test(e))return null;const[,t,i]=m3.exec(e),r=t+(i?"-"+i.toUpperCase():"");return y3(r)?r:y3(t)?t:null}async function MX(e,t){const i=[];for(const r of Sg)if(RV(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(s){i.push(s)}throw i.length?new B("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new B("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function RV(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}tk(()=>{hm.clear()});const OX=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=uc())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function kX(e){if(!e)return;const t=e.indexOf("-vector")>-1?e.slice(0,e.indexOf("-vector")):e,i=await Em("esri/t9n/basemaps");return i[e]||i[t]}const eE={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return It("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return It("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return It("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return It("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return It("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return It("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return It("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return It("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return It("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return It("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return It("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return It("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return It("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return It("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return It("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}},PX=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),LX=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function RX(e){return e.layerContainerType==="basemap"?PX:e.layerContainerType==="operational-layers"?LX:null}function rk(e){return!(e.type!=="feature"||e.url||!e.source||e.source.type!=="memory")}function FX(e,t){if(t.restrictedWebMapWriting){const i=RX(t);return!N(i)||i.has(e.type)&&!rk(e)}return!0}function NX(e,t){if(rk(e)){const i=Ja("featureCollection.layers",t),r=i&&i[0]&&i[0].layerDefinition;r&&LT(e,r)}else e.type==="stream"?LT(e,t.layerDefinition=t.layerDefinition||{}):e.type!=="group"&&LT(e,t)}function LT(e,t){"maxScale"in e&&(t.maxScale=Q1(e.maxScale)),"minScale"in e&&(t.minScale=Q1(e.minScale))}function DX(e,t){if(NX(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=Q1(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts")if(rk(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function v3(e,t,i){if(!("write"in e)||!e.write)return i&&i.messages&&i.messages.push(new B("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(FX(e,i)){const r={};return e.write(r,i)?r:null}return N(t)&&DX(e,t=K(t)),t}var bw;let jX=0;const RT=fe.getLogger("esri.Basemap");let Zn=bw=class extends Kv(dc){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+jX++,this.baseLayers=new ke,this.referenceLayers=new ke;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&RT.error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.baseLayers.on("after-add",r=>t(r.item)),this.referenceLayers.on("after-add",r=>t(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{RT.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var e;const t=this.baseLayers.removeAll();for(const r of t)r.destroy();const i=this.referenceLayers.removeAll();for(const r of i)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(e=this.portalItem)==null||e.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e=k({},e)).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Zh(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e&&(i=be(k({},i),{layerContainerType:"basemap"}),this.baseLayers.forEach(s=>{const n=v3(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);N(n)&&r.push(n)}),this.referenceLayers.forEach(s=>{const n=v3(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);N(n)&&(n.isReference=!0,r.push(n))})),t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",Zh(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return lV(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new bw({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t=k({origin:"web-map"},t)),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=K(i);return r.url&&tl(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&tl(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i}=this;Gi(e);const r=[];if(t){const s=t.context?t.context.url:null;if(r.push(this._loadLayersFromJSON(t.data,s,e)),t.data.id&&!t.data.title){const n=t.data.id;r.push(kX(n).then(o=>{o&&this.read({title:o},t.context)}))}}else i&&r.push(this._loadFromItem(i,e));await Promise.all(r)}async _loadLayersFromJSON(e,t,i){const r=this.resourceInfo&&this.resourceInfo.context,s=this.portalItem&&this.portalItem.portal||r&&r.portal||null,n=r&&r.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:o}=await se(()=>import("./layersCreator.aea15660.js"),["assets/layersCreator.aea15660.js","assets/lazyLayerLoader.33db2725.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/portalLayers.36d64293.js","assets/layersLoader.fec01d11.js","assets/jsonContext.afa43f42.js","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]),a=[];if(Gi(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const l={context:{origin:n,url:t,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},u=o(this.baseLayers,e.baseMapLayers.filter(f=>!f.isReference),l);a.push(u);const h=o(this.referenceLayers,e.baseMapLayers.filter(f=>f.isReference),l);a.push(h)}await mi(a)}async _loadFromItem(e,t){const i=await e.load(t),r=await i.fetchData("json",t),s=_i(e.itemUrl);return this._set("resourceInfo",{data:r.baseMap,context:{origin:"web-map",portal:e.portal||zr.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||zr.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}static fromId(e){const t=eE[e];if(t){if(t.deprecated){let i=null;e==="dark-gray"?i="dark-gray-vector":e==="gray"?i="gray-vector":e==="streets"?i="streets-vector":e==="topo"&&(i="topo-vector"),$x(RT,`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return bw.fromJSON(t)}return null}};c([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:ke}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],Zn.prototype,"baseLayers",null),c([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],Zn.prototype,"id",void 0),c([d({type:sS})],Zn.prototype,"portalItem",void 0),c([d()],Zn.prototype,"referenceLayers",null),c([d({readOnly:!0})],Zn.prototype,"resourceInfo",void 0),c([d({type:Xe})],Zn.prototype,"spatialReference",void 0),c([d()],Zn.prototype,"thumbnailUrl",void 0),c([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Zn.prototype,"title",void 0),c([$e("title")],Zn.prototype,"writeTitle",null),Zn=bw=c([O("esri.Basemap")],Zn);const nS=Zn;var zX=Object.freeze(Object.defineProperty({__proto__:null,default:nS},Symbol.toStringTag,{value:"Module"}));const oS={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function FV(e){return oS[e]||oS[e.toLowerCase()]}function sk(e){var t;return(t=oS[e])!=null?t:oS[e.toLowerCase()]}function VX(e){return[...sk(e)]}function FT(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function NV(e,t,i,r=1){const s=(e%360+360)%360/360,n=i<=.5?i*(t+1):i+t-i*t,o=2*i-n;return[Math.round(255*FT(o,n,s+1/3)),Math.round(255*FT(o,n,s)),Math.round(255*FT(o,n,s-1/3)),r]}function UX(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,s=t?1:17,n=t?e.length===9:e.length===5;let o=Number("0x"+e.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return n&&(l=o&r,o>>=i,a[3]=s*l/255),l=o&r,o>>=i,a[2]=s*l,l=o&r,o>>=i,a[1]=s*l,l=o&r,o>>=i,a[0]=s*l,a}function ol(){return[0,0,0]}function BX(e){return[e[0],e[1],e[2]]}function sy(e,t,i){return[e,t,i]}function qX(e){const t=ol(),i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function GX(e,t){return new Float64Array(e,t,3)}function DV(){return ol()}function jV(){return sy(1,1,1)}function zV(){return sy(1,0,0)}function VV(){return sy(0,1,0)}function UV(){return sy(0,0,1)}const HX=DV(),BV=jV(),WX=zV(),JX=VV(),ZX=UV();Object.freeze({__proto__:null,create:ol,clone:BX,fromValues:sy,fromArray:qX,createView:GX,zeros:DV,ones:jV,unitX:zV,unitY:VV,unitZ:UV,ZEROS:HX,ONES:BV,UNIT_X:WX,UNIT_Y:JX,UNIT_Z:ZX});const Ke=1e-6,Fu=Math.random,YX=Math.PI/180,KX=180/Math.PI;function nk(e){return e*YX}function QX(e){return e*KX}function XX(e,t){return Math.abs(e-t)<=Ke*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze({__proto__:null,EPSILON:Ke,RANDOM:Fu,toRadian:nk,toDegree:QX,equals:XX});function ok(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function tE(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function qV(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function eee(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function GV(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function HV(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function WV(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function tee(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function iee(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function ree(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function see(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function nee(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function JV(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function oee(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function ZV(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(i*i+r*r+s*s)}function YV(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return i*i+r*r+s*s}function KV(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function aee(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function lee(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function iE(e,t){const i=t[0],r=t[1],s=t[2];let n=i*i+r*r+s*s;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n),e}function QV(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cee(e,t,i){const r=t[0],s=t[1],n=t[2],o=i[0],a=i[1],l=i[2];return e[0]=s*l-n*a,e[1]=n*o-r*l,e[2]=r*a-s*o,e}function uee(e,t,i,r){const s=t[0],n=t[1],o=t[2];return e[0]=s+r*(i[0]-s),e[1]=n+r*(i[1]-n),e[2]=o+r*(i[2]-o),e}function dee(e,t,i,r,s,n){const o=n*n,a=o*(2*n-3)+1,l=o*(n-2)+n,u=o*(n-1),h=o*(3-2*n);return e[0]=t[0]*a+i[0]*l+r[0]*u+s[0]*h,e[1]=t[1]*a+i[1]*l+r[1]*u+s[1]*h,e[2]=t[2]*a+i[2]*l+r[2]*u+s[2]*h,e}function hee(e,t,i,r,s,n){const o=1-n,a=o*o,l=n*n,u=a*o,h=3*n*a,f=3*l*o,y=l*n;return e[0]=t[0]*u+i[0]*h+r[0]*f+s[0]*y,e[1]=t[1]*u+i[1]*h+r[1]*f+s[1]*y,e[2]=t[2]*u+i[2]*h+r[2]*f+s[2]*y,e}function pee(e,t){t=t||1;const i=2*Fu()*Math.PI,r=2*Fu()-1,s=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(i)*s,e[1]=Math.sin(i)*s,e[2]=r*t,e}function fee(e,t,i){const r=t[0],s=t[1],n=t[2];return e[0]=i[0]*r+i[4]*s+i[8]*n+i[12],e[1]=i[1]*r+i[5]*s+i[9]*n+i[13],e[2]=i[2]*r+i[6]*s+i[10]*n+i[14],e}function mee(e,t,i){const r=t[0],s=t[1],n=t[2];return e[0]=r*i[0]+s*i[3]+n*i[6],e[1]=r*i[1]+s*i[4]+n*i[7],e[2]=r*i[2]+s*i[5]+n*i[8],e}function yee(e,t,i){const r=i[0],s=i[1],n=i[2],o=i[3],a=t[0],l=t[1],u=t[2];let h=s*u-n*l,f=n*a-r*u,y=r*l-s*a,g=s*y-n*f,b=n*h-r*y,w=r*f-s*h;const x=2*o;return h*=x,f*=x,y*=x,g*=2,b*=2,w*=2,e[0]=a+h+g,e[1]=l+f+b,e[2]=u+y+w,e}function gee(e,t,i,r){const s=[],n=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],n[0]=s[0],n[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),n[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),e[0]=n[0]+i[0],e[1]=n[1]+i[1],e[2]=n[2]+i[2],e}function vee(e,t,i,r){const s=[],n=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],n[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),n[1]=s[1],n[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),e[0]=n[0]+i[0],e[1]=n[1]+i[1],e[2]=n[2]+i[2],e}function _ee(e,t,i,r){const s=[],n=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],n[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),n[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),n[2]=s[2],e[0]=n[0]+i[0],e[1]=n[1]+i[1],e[2]=n[2]+i[2],e}function bee(e,t){tE(nb,e),tE(ob,t),iE(nb,nb),iE(ob,ob);const i=QV(nb,ob);return i>1?0:i<-1?Math.PI:Math.acos(i)}const nb=ol(),ob=ol();function wee(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function See(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function xee(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],n=t[0],o=t[1],a=t[2];return Math.abs(i-n)<=Ke*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-o)<=Ke*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(s-a)<=Ke*Math.max(1,Math.abs(s),Math.abs(a))}function Iee(e,t,i){const r=i[0]-t[0],s=i[1]-t[1],n=i[2]-t[2];let o=r*r+s*s+n*n;return o>0?(o=1/Math.sqrt(o),e[0]=r*o,e[1]=s*o,e[2]=n*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const Tee=GV,$ee=HV,Cee=WV,Eee=ZV,Aee=YV,Mee=ok,Oee=KV;Object.freeze({__proto__:null,length:ok,copy:tE,set:qV,add:eee,subtract:GV,multiply:HV,divide:WV,ceil:tee,floor:iee,min:ree,max:see,round:nee,scale:JV,scaleAndAdd:oee,distance:ZV,squaredDistance:YV,squaredLength:KV,negate:aee,inverse:lee,normalize:iE,dot:QV,cross:cee,lerp:uee,hermite:dee,bezier:hee,random:pee,transformMat4:fee,transformMat3:mee,transformQuat:yee,rotateX:gee,rotateY:vee,rotateZ:_ee,angle:bee,str:wee,exactEquals:See,equals:xee,direction:Iee,sub:Tee,mul:$ee,div:Cee,dist:Eee,sqrDist:Aee,len:Mee,sqrLen:Oee});function kee(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Pee(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}function Lee(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function XV(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function e6(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function t6(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function Ree(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Fee(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Nee(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function Dee(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function jee(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function zee(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function Vee(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}function i6(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],n=t[3]-e[3];return Math.sqrt(i*i+r*r+s*s+n*n)}function r6(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],n=t[3]-e[3];return i*i+r*r+s*s+n*n}function s6(e){const t=e[0],i=e[1],r=e[2],s=e[3];return Math.sqrt(t*t+i*i+r*r+s*s)}function n6(e){const t=e[0],i=e[1],r=e[2],s=e[3];return t*t+i*i+r*r+s*s}function Uee(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function Bee(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function qee(e,t){const i=t[0],r=t[1],s=t[2],n=t[3];let o=i*i+r*r+s*s+n*n;return o>0&&(o=1/Math.sqrt(o),e[0]=i*o,e[1]=r*o,e[2]=s*o,e[3]=n*o),e}function Gee(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Hee(e,t,i,r){const s=t[0],n=t[1],o=t[2],a=t[3];return e[0]=s+r*(i[0]-s),e[1]=n+r*(i[1]-n),e[2]=o+r*(i[2]-o),e[3]=a+r*(i[3]-a),e}function Wee(e,t){let i,r,s,n,o,a;t=t||1;do i=2*Fu()-1,r=2*Fu()-1,o=i*i+r*r;while(o>=1);do s=2*Fu()-1,n=2*Fu()-1,a=s*s+n*n;while(a>=1);const l=Math.sqrt((1-o)/a);return e[0]=t*i,e[1]=t*r,e[2]=t*s*l,e[3]=t*n*l,e}function Jee(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3];return e[0]=i[0]*r+i[4]*s+i[8]*n+i[12]*o,e[1]=i[1]*r+i[5]*s+i[9]*n+i[13]*o,e[2]=i[2]*r+i[6]*s+i[10]*n+i[14]*o,e[3]=i[3]*r+i[7]*s+i[11]*n+i[15]*o,e}function Zee(e,t,i){const r=t[0],s=t[1],n=t[2],o=i[0],a=i[1],l=i[2],u=i[3],h=u*r+a*n-l*s,f=u*s+l*r-o*n,y=u*n+o*s-a*r,g=-o*r-a*s-l*n;return e[0]=h*u+g*-o+f*-l-y*-a,e[1]=f*u+g*-a+y*-o-h*-l,e[2]=y*u+g*-l+h*-a-f*-o,e[3]=t[3],e}function Yee(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function Kee(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Qee(e,t){const i=e[0],r=e[1],s=e[2],n=e[3],o=t[0],a=t[1],l=t[2],u=t[3];return Math.abs(i-o)<=Ke*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=Ke*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(s-l)<=Ke*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(n-u)<=Ke*Math.max(1,Math.abs(n),Math.abs(u))}const Xee=XV,ete=e6,tte=t6,ite=i6,rte=r6,ste=s6,nte=n6;Object.freeze({__proto__:null,copy:kee,set:Pee,add:Lee,subtract:XV,multiply:e6,divide:t6,ceil:Ree,floor:Fee,min:Nee,max:Dee,round:jee,scale:zee,scaleAndAdd:Vee,distance:i6,squaredDistance:r6,length:s6,squaredLength:n6,negate:Uee,inverse:Bee,normalize:qee,dot:Gee,lerp:Hee,random:Wee,transformMat4:Jee,transformQuat:Zee,str:Yee,exactEquals:Kee,equals:Qee,sub:Xee,mul:ete,div:tte,dist:ite,sqrDist:rte,len:ste,sqrLen:nte});const _3=new Float32Array(1);function tOe(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function fo(e,t,i){return Math.min(Math.max(e,t),i)}function iOe(e){return(e&e-1)==0}function rOe(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function sOe(e,t,i){return e+(t-e)*i}function ote(e){return e*Math.PI/180}function o6(e){return 180*e/Math.PI}function nOe(e){return Math.acos(fo(e,-1,1))}function a6(e){return Math.asin(fo(e,-1,1))}function oOe(e){return l6(Math.max(-b3,Math.min(e,b3)))}function l6(e){return _3[0]=e,_3[0]}function aOe(e,t){const i=ok(e),r=a6(e[2]/i),s=Math.atan2(e[1]/i,e[0]/i);return qV(t,i,r,s),t}const b3=l6(34028234663852886e22);function ab(e){return fo(NO(e),0,255)}function lb(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}class Bi{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}static blendColors(t,i,r,s=new Bi){return s.r=Math.round(t.r+(i.r-t.r)*r),s.g=Math.round(t.g+(i.g-t.g)*r),s.b=Math.round(t.b+(i.b-t.b)*r),s.a=t.a+(i.a-t.a)*r,s._sanitize()}static fromRgb(t,i){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const s=r[2].split(/\s*,\s*/),n=r[1];if(n==="rgb"&&s.length===3||n==="rgba"&&s.length===4){const o=s[0];if(o.charAt(o.length-1)==="%"){const a=s.map(l=>2.56*parseFloat(l));return s.length===4&&(a[3]=parseFloat(s[3])),Bi.fromArray(a,i)}return Bi.fromArray(s.map(a=>parseFloat(a)),i)}if(n==="hsl"&&s.length===3||n==="hsla"&&s.length===4)return Bi.fromArray(NV(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),i)}return null}static fromHex(t,i=new Bi){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const r=t.length===4?4:8,s=(1<<r)-1;let n=Number("0x"+t.substr(1));return isNaN(n)?null:(["b","g","r"].forEach(o=>{const a=n&s;n>>=r,i[o]=r===4?17*a:a}),i.a=1,i)}static fromArray(t,i=new Bi){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const r=FV(t)?sk(t):null;return r&&Bi.fromArray(r,i)||Bi.fromRgb(t,i)||Bi.fromHex(t,i)}static fromJSON(t){return t&&new Bi([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return N(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return N(t)?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){if(typeof t=="string")Bi.fromString(t,this);else if(Array.isArray(t))Bi.fromArray(t,this);else{var i,r,s,n;this._set((i=t.r)!=null?i:0,(r=t.g)!=null?r:0,(s=t.b)!=null?s:0,(n=t.a)!=null?n:1),t instanceof Bi||this._sanitize()}return this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return`#${t.length<2?"0"+t:t}${i.length<2?"0"+i:i}${r.length<2?"0"+r:r}`}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Bi.AlphaMode.ALWAYS){const i=ab(this.r),r=ab(this.g),s=ab(this.b);return t===Bi.AlphaMode.ALWAYS||this.a!==1?[i,r,s,ab(255*this.a)]:[i,r,s]}clone(){return new Bi(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return N(t)&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(lb(this.r,0,255)),this.g=Math.round(lb(this.g,0,255)),this.b=Math.round(lb(this.b,0,255)),this.a=lb(this.a,0,1),this}_set(t,i,r,s){this.r=t,this.g=i,this.b=r,this.a=s}}Bi.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Bi||(Bi={}));const Oe=Bi;function lOe(e){}function ate(e){return()=>e}function Ue(e,t={}){var i;const r=e instanceof rt?e:new rt(e,t),s={type:(i=t==null?void 0:t.ignoreUnknown)==null||i?r.apiValues:String,json:{type:r.jsonValues,read:(t==null||!t.readOnly)&&{reader:r.read},write:{writer:r.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(s.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(s.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(s.json.name=t.name),d(s)}var rE;let ww=rE=class extends ue{constructor(e){super(e),this.type="none"}clone(){return new rE({type:this.type})}};c([Ue({none:"none",stayAbove:"stay-above"})],ww.prototype,"type",void 0),ww=rE=c([O("esri.ground.NavigationConstraint")],ww);function ak(e){const t=NO(100*(1-e));return Math.max(0,Math.min(t,100))}function tv(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var sE;const w3=fe.getLogger("esri.Ground");let $l=sE=class extends Kv(dc){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new ke;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&w3.error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{w3.error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e=k({},e)).resourceInfo),e}set layers(e){this._set("layers",Zh(e,this._get("layers")))}writeLayers(e,t,i,r){const s=[];e&&(r=be(k({},r),{layerContainerType:"ground"}),e.forEach(n=>{if("write"in n){const o={};ate(n)().write(o,r)&&s.push(o)}else r&&r.messages&&r.messages.push(new B("layer:unsupported",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted in the ground`,{layer:n}))})),t.layers=s}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return lV(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await se(()=>import("./ElevationQuery.465be2cb.js"),["assets/ElevationQuery.465be2cb.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]);Gi(t);const r=new i,s=this.layers.filter(S3).toArray();return r.queryAll(s,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await se(()=>import("./ElevationQuery.465be2cb.js"),["assets/ElevationQuery.465be2cb.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]);Gi(t);const r=new i,s=this.layers.filter(S3).toArray();return r.createSamplerAll(s,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:K(this.surfaceColor),navigationConstraint:K(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new sE({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,i){const r=t&&t.origin||"web-scene",s=t&&t.portal||null,n=t&&t.url||null;return se(()=>import("./layersCreator.aea15660.js"),["assets/layersCreator.aea15660.js","assets/lazyLayerLoader.33db2725.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/portalLayers.36d64293.js","assets/layersLoader.fec01d11.js","assets/jsonContext.afa43f42.js","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]).then(({populateOperationalLayers:o})=>{Gi(i);const a=[];if(e.layers&&Array.isArray(e.layers)){const l={context:{origin:r,url:n,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,l))}return mi(a)}).then(()=>{})}};function lte(e){return e&&"createElevationSampler"in e}function S3(e){return e.type==="elevation"||lte(e)}c([d({json:{read:!1}})],$l.prototype,"layers",null),c([$e("layers")],$l.prototype,"writeLayers",null),c([d({readOnly:!0})],$l.prototype,"resourceInfo",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:si,read:{reader:tv,source:"transparency"},write:{writer:(e,t)=>{t.transparency=ak(e)},target:"transparency"}}})],$l.prototype,"opacity",void 0),c([d({type:Oe,json:{type:[si],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],$l.prototype,"surfaceColor",void 0),c([d({type:ww,json:{write:!0}})],$l.prototype,"navigationConstraint",void 0),$l=sE=c([O("esri.Ground")],$l);const aS=$l;let Sw=class extends Ee{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!ke.isCollection(e))return this;const i=this._getOrCreateGroup(t);return Array.isArray(e)||ke.isCollection(e)?e.forEach(r=>this._isHandle(r)&&i.push(r)):i.push(e),this.notifyChange("size"),this}forEach(e,t){if(typeof e=="function")this._groups.forEach(i=>i.forEach(e));else{const i=this._getGroup(e);i&&t&&i.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||ke.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let i=0;i<t.length;i++)t[i].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(e=>{for(let t=0;t<e.length;t++)e[t].remove()}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};c([d({readOnly:!0})],Sw.prototype,"size",null),Sw=c([O("esri.core.Handles")],Sw);const Ai=Sw;function St(e,t,i={}){return lk(e,t,i,c6)}function Jx(e,t,i={}){return lk(e,t,i,u6)}function lk(e,t,i={},r){let s=null;const n=i.once?(o,a)=>{r(o)&&(hp(s),t(o,a))}:(o,a)=>{r(o)&&t(o,a)};if(s=JY(e,n,i.sync,i.equals),i.initial){const o=e();n(o,o)}return s}function Hu(e,t,i,r={}){let s=null,n=null,o=null;function a(){s&&n&&(n.remove(),r.onListenerRemove==null||r.onListenerRemove(s),s=null,n=null)}function l(h){r.once&&r.once&&hp(o),i(h)}const u=St(e,(h,f)=>{a(),Px(h)&&(s=h,n=sa(h,t,l),r.onListenerAdd==null||r.onListenerAdd(h))},{sync:r.sync,initial:!0});return o=pp(()=>{u.remove(),a()}),o}function iv(e,t){return cte(e,u6,t)}function cte(e,t,i){if(da(i))return Promise.reject(qi());const r=e();if(t!=null&&t(r))return Promise.resolve(r);let s=null;function n(){s=hp(s)}return new Promise((o,a)=>{s=Mx([rs(i,()=>{n(),a(qi())}),lk(e,l=>{n(),o(l)},{sync:!1,once:!0},t!=null?t:c6)])})}function c6(e){return!0}function u6(e){return!!e}const lS={sync:!0},Ya={initial:!0},Od={sync:!0,initial:!0};let pm=class extends Ee{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new Ai,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,i={}){return this._installWatch(e,t,i,St)}addWhen(e,t,i={}){return this._installWatch(e,t,i,Jx)}addOnCollectionChange(e,t,{initial:i=!1}={}){const r=++this.handleId;return this.handles.add([Hu(e,"after-changes",this._createSyncUpdatingCallback(),lS),Hu(e,"change",t,{onListenerAdd:i?s=>t({added:s.toArray(),removed:[]}):void 0})],r),{remove:()=>this.handles.remove(r)}}addPromise(e){if(Q(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(this.pendingPromises.size!==0||this.handles.has(cb)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const i=()=>this.handles.remove(t);return e.then(i,i),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}_installWatch(e,t,i={},r){const s=++this.handleId;i.sync||this._installSyncUpdatingWatch(e,s);const n=r(e,t,i);return this.handles.add(n,s),{remove:()=>this.handles.remove(s)}}_installSyncUpdatingWatch(e,t){const i=this._createSyncUpdatingCallback(),r=St(e,i,{sync:!0,equals:()=>!1});return this.handles.add(r,t),r}_createSyncUpdatingCallback(){return()=>{this.handles.remove(cb),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Zv(()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(cb))}),cb)}}};c([d({readOnly:!0})],pm.prototype,"updating",void 0),pm=c([O("esri.views.support.WatchUpdatingTracking")],pm);const cb=-42;var x3;(function(e){e[e.NONE=0]="NONE",e[e.SYNC=1]="SYNC",e[e.INIT=2]="INIT"})(x3||(x3={}));const Xs=e=>{let t=class extends e{destroy(){var i,r;this.destroyed||((i=this._get("handles"))==null||i.destroy(),(r=this._get("updatingHandles"))==null||r.destroy())}get handles(){return this._get("handles")||new Ai}get updatingHandles(){return this._get("updatingHandles")||new pm}};return c([d({readOnly:!0})],t.prototype,"handles",null),c([d({readOnly:!0})],t.prototype,"updatingHandles",null),t=c([O("esri.core.HandleOwner")],t),t};let Am=class extends Xs(Ee){};Am=c([O("esri.core.HandleOwner")],Am);let rf=class extends Xs(ke){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add(Nz(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=N(this.getCollections)?this.getCollections():null;if(Q(e))return void this.removeAll();let t=0;for(const i of e)N(i)&&(t=this._processCollection(t,i));this.splice(t,this.length)}_createNewInstance(e){return new ke(e)}_processCollection(e,t){if(!t)return e;const i=this.itemFilterFunction?this.itemFilterFunction:r=>!!r;for(const r of t)if(r){if(i(r)){const s=this.indexOf(r,e);s>=0?s!==e&&this.reorder(r,e):this.add(r,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(r);if(Array.isArray(s))for(const n of s)e=this._processCollection(e,n);else e=this._processCollection(e,s)}}return e}};c([d()],rf.prototype,"getCollections",void 0),c([d()],rf.prototype,"getChildrenFunction",void 0),c([d()],rf.prototype,"itemFilterFunction",void 0),rf=c([O("esri.core.CollectionFlattener")],rf);const fm=rf;function ute(e){var t;return!!(e&&e.loaded&&"capabilities"in e&&e!=null&&(t=e.capabilities)!=null&&t.operations&&"supportsEditing"in e.capabilities.operations&&e.capabilities.operations.supportsEditing===!0)&&!("editingEnabled"in e&&!e.editingEnabled)}const I3=fe.getLogger("esri.support.basemapUtils");function dte(){return{}}function hte(e){for(const t in e){const i=e[t];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete e[t]}}function pte(e,t){var i;let r;if(typeof e=="string"){if(!(e in eE)){const s=Object.entries(eE).filter(([n,o])=>Tt.apiKey&&!o.classic||!Tt.apiKey&&o.classic&&!o.deprecated).map(([n])=>`"${n}"`).join(", ");return I3.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${s}`),null}t&&(r=t[e]),r||(r=nS.fromId(e),t&&(t[e]=r))}else r=jt(nS,e);return(i=r)!=null&&i.destroyed&&(I3.warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}const fte=fe.getLogger("esri.support.groundUtils"),T3={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function mte(e){let t=null;if(typeof e=="string")if(e in T3){const i=T3[e];t=new aS({resourceInfo:{data:{layers:[i]}}})}else fte.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=jt(aS,e);return t}function Mm(e,t,i=!1){let{hasM:r,hasZ:s}=e;Array.isArray(t)?t.length!==4||r||s?t.length===3&&i&&!r?(s=!0,r=!1):t.length===3&&r&&s&&(r=!1,s=!1):(r=!0,s=!0):(s=!s&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!s||t.hasZ)),e.hasZ=s,e.hasM=r}var nE;function $3(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function yte(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Uc=nE=class extends Ys{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return null;const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):yte(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=i.points&&i.points[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Et,i=this.hasZ,r=this.hasM,s=i?3:2,n=e[0],o=$3(Math.min),a=$3(Math.max);let l,u,h,f,[y,g]=n,[b,w]=n;for(let x=0,T=e.length;x<T;x++){const M=e[x],[F,D]=M;if(y=o(y,F),g=o(g,D),b=a(b,F),w=a(w,D),i&&M.length>2){const R=M[2];l=o(l,R),h=a(h,R)}if(r&&M.length>s){const R=M[s];u=o(u,R),f=a(f,R)}}return t.xmin=y,t.ymin=g,t.xmax=b,t.ymax=w,t.spatialReference=this.spatialReference,i?(t.zmin=l,t.zmax=h):(t.zmin=null,t.zmax=null),r?(t.mmin=u,t.mmax=f):(t.mmin=null,t.mmax=null),t}writePoints(e,t){t.points=K(this.points)}addPoint(e){return Mm(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:K(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new nE(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new Le(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new Le(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Mm(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};c([d({readOnly:!0})],Uc.prototype,"cache",null),c([d()],Uc.prototype,"extent",null),c([d({type:[[Number]],json:{write:{isRequired:!0}}})],Uc.prototype,"points",void 0),c([$e("points")],Uc.prototype,"writePoints",null),Uc=nE=c([O("esri.geometry.Multipoint")],Uc),Uc.prototype.toJSON.isDefaultToJSON=!0;const ny=Uc;function gte(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const s=e[2]-t[2];return Math.sqrt(i*i+r*r+s*s)}return Math.sqrt(i*i+r*r)}function vte(e,t,i){const r=e[0]+i*(t[0]-e[0]),s=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,s,e[2]+i*(t[2]-e[2])]:[r,s]}function _te(e,t,i,r){const[s,n]=t,[o,a]=i[r],[l,u]=i[r+1],h=l-o,f=u-a,y=h*h+f*f,g=(s-o)*h+(n-a)*f,b=Math.min(1,Math.max(0,g/y));return e[0]=o+h*b,e[1]=a+f*b,e}function bte(e,t){return vte(e,t,.5)}function ck(e,t,i){const r=e.length;let s=0,n=0,o=0;for(let a=0;a<r;a++){const l=e[a],u=e[(a+1)%r];let h=2;s+=l[0]*u[1]-u[0]*l[1],l.length>2&&u.length>2&&i&&(n+=l[0]*u[2]-u[0]*l[2],h=3),l.length>h&&u.length>h&&t&&(o+=l[0]*u[h]-u[0]*l[h])}return s<=0&&n<=0&&o<=0}function cOe(e){if("rings"in e){for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]);if(e.rings.length>0&&!ck(e.rings[0],e.hasM,e.hasZ))for(let t=0;t<e.rings.length;++t)e.rings[t]=e.rings[t].reverse()}}function uOe(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function wte(e){return e?Ste(e.rings,e.hasZ):null}function Ste(e,t){if(!e||!e.length)return null;const i=[],r=[],s=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,o=e.length;n<o;n++){const a=xte(e[n],t,s);a&&r.push(a)}if(r.sort((n,o)=>{let a=n[2]-o[2];return a===0&&t&&(a=n[4]-o[4]),a}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||t&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const n=e[0]&&e[0].length?Ite(e[0],t):null;if(!n)return null;i[0]=n[0],i[1]=n[1],t&&n.length>2&&(i[2]=n[2])}return i}function xte(e,t,i){let r=0,s=0,n=0,o=0,a=0;const l=e.length?e[0][0]:0,u=e.length?e[0][1]:0,h=e.length&&t?e[0][2]:0;for(let y=0;y<e.length;y++){const g=e[y],b=e[(y+1)%e.length],[w,x,T]=g,M=w-l,F=x-u,D=t?T-h:void 0,[R,_,q]=b,W=R-l,oe=_-u,te=t?q-h:void 0,he=M*oe-W*F;if(o+=he,r+=(M+W)*he,s+=(F+oe)*he,t&&g.length>2&&b.length>2){const ge=M*te-W*D;n+=(D+te)*ge,a+=ge}w<i[0]&&(i[0]=w),w>i[1]&&(i[1]=w),x<i[2]&&(i[2]=x),x>i[3]&&(i[3]=x),t&&(T<i[4]&&(i[4]=T),T>i[5]&&(i[5]=T))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const f=[r/(6*o)+l,s/(6*o)+u,o];return t&&(i[4]===i[5]||a===0?(f[3]=(i[4]+i[5])/2,f[4]=0):(f[3]=n/(6*a)+h,f[4]=a)),f}function Ite(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;for(let l=0,u=e.length;l<u-1;l++){const h=e[l],f=e[l+1];if(h&&f){i[0]=h[0],i[1]=h[1],r[0]=f[0],r[1]=f[1],t&&h.length>2&&f.length>2&&(i[2]=h[2],r[2]=f[2]);const y=gte(i,r);if(y){s+=y;const g=bte(h,f);n+=y*g[0],o+=y*g[1],t&&g.length>2&&(a+=y*g[2])}}}return s>0?t?[n/s,o/s,a/s]:[n/s,o/s]:e.length?e[0]:null}function d6(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function h6(e){return e.points!==void 0}function p6(e){return e.x!==void 0&&e.y!==void 0}function f6(e){return e.paths!==void 0}function m6(e){return e.rings!==void 0}function y6(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}const Nu=y6(Math.min),Du=y6(Math.max);function dOe(e,t){return f6(t)?Om(e,t.paths,!1,!1):m6(t)?Om(e,t.rings,!1,!1):h6(t)?uk(e,t.points,!1,!1,!1,!1):d6(t)?g6(e,t):(p6(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function hOe(e,t){return f6(t)?Om(e,t.paths,!0,!1):m6(t)?Om(e,t.rings,!0,!1):h6(t)?uk(e,t.points,!0,!1,!0,!1):d6(t)?g6(e,t,!0,!1,!0,!1):(p6(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Om(e,t,i,r){const s=i?3:2;if(!t.length||!t[0].length)return null;let n,o,a,l,[u,h]=t[0][0],[f,y]=t[0][0];for(let g=0;g<t.length;g++){const b=t[g];for(let w=0;w<b.length;w++){const x=b[w],[T,M]=x;if(u=Nu(u,T),h=Nu(h,M),f=Du(f,T),y=Du(y,M),i&&x.length>2){const F=x[2];n=Nu(n,F),o=Du(o,F)}if(r&&x.length>s){const F=x[s];a=Nu(n,F),l=Du(o,F)}}}return i?r?(e[0]=u,e[1]=h,e[2]=n,e[3]=a,e[4]=f,e[5]=y,e[6]=o,e[7]=l,e.length=8,e):(e[0]=u,e[1]=h,e[2]=n,e[3]=f,e[4]=y,e[5]=o,e.length=6,e):r?(e[0]=u,e[1]=h,e[2]=a,e[3]=f,e[4]=y,e[5]=l,e.length=6,e):(e[0]=u,e[1]=h,e[2]=f,e[3]=y,e.length=4,e)}function g6(e,t,i,r,s,n){const o=t.xmin,a=t.xmax,l=t.ymin,u=t.ymax;let h=t.zmin,f=t.zmax,y=t.mmin,g=t.mmax;return s?(h=h||0,f=f||0,n?(y=y||0,g=g||0,e[0]=o,e[1]=l,e[2]=h,e[3]=y,e[4]=a,e[5]=u,e[6]=f,e[7]=g,e):(e[0]=o,e[1]=l,e[2]=h,e[3]=a,e[4]=u,e[5]=f,e)):n?(y=y||0,g=g||0,e[0]=o,e[1]=l,e[2]=y,e[3]=a,e[4]=u,e[5]=g,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=u,e)}function uk(e,t,i,r,s,n){const o=i?3:2,a=r&&n,l=i&&s;if(!t.length||!t[0].length)return null;let u,h,f,y,[g,b]=t[0],[w,x]=t[0];for(let T=0;T<t.length;T++){const M=t[T],[F,D]=M;if(g=Nu(g,F),b=Nu(b,D),w=Du(w,F),x=Du(x,D),l&&M.length>2){const R=M[2];u=Nu(u,R),h=Du(h,R)}if(a&&M.length>o){const R=M[o];f=Nu(u,R),y=Du(h,R)}}return s?(u=u||0,h=h||0,n?(f=f||0,y=y||0,e[0]=g,e[1]=b,e[2]=u,e[3]=f,e[4]=w,e[5]=x,e[6]=h,e[7]=y,e):(e[0]=g,e[1]=b,e[2]=u,e[3]=w,e[4]=x,e[5]=h,e)):n?(f=f||0,y=y||0,e[0]=g,e[1]=b,e[2]=f,e[3]=w,e[4]=x,e[5]=y,e):(e[0]=g,e[1]=b,e[2]=w,e[3]=x,e)}function Tte(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function $te(e){return e.points!==void 0}function Cte(e){return e.x!==void 0&&e.y!==void 0}function Ete(e){return e.paths!==void 0}function Ate(e){return e.rings!==void 0}const dk=[];function v6(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function _6(e,t,i,r,s,n){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:s,zmax:n}}function b6(e,t,i,r,s,n){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:s,mmax:n}}function w6(e,t,i,r,s,n,o,a){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:s,ymax:n,zmax:o,mmax:a}}function hk(e,t=!1,i=!1){return t?i?w6(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):_6(e[0],e[1],e[2],e[3],e[4],e[5]):i?b6(e[0],e[1],e[2],e[3],e[4],e[5]):v6(e[0],e[1],e[2],e[3])}function pOe(e){return e?Tte(e)?e:Cte(e)?Ote(e):Ate(e)?S6(e):Ete(e)?x6(e):$te(e)?Mte(e):null:null}function Mte(e){const{hasZ:t,hasM:i,points:r}=e;return hk(uk(dk,r,t,i),t,i)}function Ote(e){const{x:t,y:i,z:r,m:s}=e,n=s!=null;return r!=null?n?w6(t,i,r,s,t,i,r,s):_6(t,i,r,t,i,r):n?b6(t,i,s,t,i,s):v6(t,i,t,i)}function S6(e){const{hasZ:t,hasM:i,rings:r}=e,s=Om(dk,r,t,i);return s?hk(s,t,i):null}function x6(e){const{hasZ:t,hasM:i,paths:r}=e,s=Om(dk,r,t,i);return s?hk(s,t,i):null}var xw;function C3(e){return!Array.isArray(e[0])}let Ia=xw=class extends Ys{constructor(...e){super(...e),this.rings=[],this.type="polygon"}static fromExtent(e){const t=e.clone().normalize(),i=e.spatialReference;let r=!1,s=!1;for(const o of t)o.hasZ&&(r=!0),o.hasM&&(s=!0);const n={rings:t.map(function(o){const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let u=0;u<a.length;u++)a[u].push(l)}if(s&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let u=0;u<a.length;u++)a[u].push(l)}return a}),spatialReference:i};return r&&(n.hasZ=!0),s&&(n.hasM=!0),new xw(n)}normalizeCtorArgs(e,t){let i,r,s=null,n=null;return e&&!Array.isArray(e)?(s=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),i=e.hasZ,r=e.hasM):s=e,s=s||[],t=t||Xe.WGS84,s.length&&s[0]&&s[0][0]!=null&&typeof s[0][0]=="number"&&(s=[s]),n=s[0]&&s[0][0],n&&(i===void 0&&r===void 0?(i=n.length>2,r=n.length>3):i===void 0?i=r?n.length>3:n.length>2:r===void 0&&(r=i?n.length>3:n.length>2)),{rings:s,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=wte(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new Le;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=S6(this);if(!t)return null;const i=new Et(t);return i.spatialReference=e,i}get isSelfIntersecting(){return pX(this.rings)}writeRings(e,t){t.rings=K(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(C3(e)){const r=[];for(let s=0,n=e.length;s<n;s++)r[s]=e[s].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new xw;return e.spatialReference=this.spatialReference,e.rings=K(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(Q(e))return!1;const t=this.spatialReference,i=e.spatialReference;if(N(t)!==N(i)||N(t)&&N(i)&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const r=([s,n,o,a],[l,u,h,f])=>s===l&&n===u&&(o==null&&h==null||o===h)&&(a==null&&f==null||a===f);for(let s=0;s<this.rings.length;s++){const n=this.rings[s],o=e.rings[s];if(!OO(n,o,r))return!1}return!0}contains(e){if(!e)return!1;const t=Hx(e,this.spatialReference);return AV(this,N(t)?t:e)}isClockwise(e){let t;return t=C3(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e,ck(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,s=this.hasM;return r&&!s?new Le(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new Le(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new Le(i[0],i[1],i[2],i[3],this.spatialReference):new Le(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Mm(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new Le(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map(s=>new Le(s,i));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?(Mm(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};c([d({readOnly:!0})],Ia.prototype,"cache",null),c([d({readOnly:!0})],Ia.prototype,"centroid",null),c([d({readOnly:!0})],Ia.prototype,"extent",null),c([d({readOnly:!0})],Ia.prototype,"isSelfIntersecting",null),c([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Ia.prototype,"rings",void 0),c([$e("rings")],Ia.prototype,"writeRings",null),Ia=xw=c([O("esri.geometry.Polygon")],Ia),Ia.prototype.toJSON.isDefaultToJSON=!0;const Rn=Ia;var oE;function kte(e){return!Array.isArray(e[0])}let Bc=oE=class extends Ys{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let i,r,s=null,n=null;return e&&!Array.isArray(e)?(s=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),i=e.hasZ,r=e.hasM):s=e,s=s||[],t=t||Xe.WGS84,s.length&&s[0]&&s[0][0]!=null&&typeof s[0][0]=="number"&&(s=[s]),n=s[0]&&s[0][0],n&&(i===void 0&&r===void 0?(i=n.length>2,r=!1):i===void 0?i=!r&&n.length>3:r===void 0&&(r=!i&&n.length>3)),{paths:s,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=x6(this);if(!t)return null;const i=new Et(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=K(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(kte(e)){const r=[];for(let s=0,n=e.length;s<n;s++)r[s]=e[s].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new oE;return e.spatialReference=this.spatialReference,e.paths=K(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,s=this.hasM;return r&&!s?new Le(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new Le(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new Le(i[0],i[1],i[2],i[3],this.spatialReference):new Le(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Mm(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map(s=>new Le(s,i));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new Le(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(Mm(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};c([d({readOnly:!0})],Bc.prototype,"cache",null),c([d({readOnly:!0})],Bc.prototype,"extent",null),c([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Bc.prototype,"paths",void 0),c([$e("paths")],Bc.prototype,"writePaths",null),Bc=oE=c([O("esri.geometry.Polyline")],Bc),Bc.prototype.toJSON.isDefaultToJSON=!0;const xs=Bc,Pte=Br()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),E3=Br()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function I6(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function pk(e){return e.points!==void 0}function fk(e){return e.x!==void 0&&e.y!==void 0}function mk(e){return e.paths!==void 0}function Dh(e){return e.rings!==void 0}function As(e){return Q(e)?null:e instanceof Ys?e:fk(e)?Le.fromJSON(e):mk(e)?xs.fromJSON(e):Dh(e)?Rn.fromJSON(e):pk(e)?ny.fromJSON(e):I6(e)?Et.fromJSON(e):null}function mo(e){return e?fk(e)?"esriGeometryPoint":mk(e)?"esriGeometryPolyline":Dh(e)?"esriGeometryPolygon":I6(e)?"esriGeometryEnvelope":pk(e)?"esriGeometryMultipoint":null:null}const Lte={esriGeometryPoint:Le,esriGeometryPolyline:xs,esriGeometryPolygon:Rn,esriGeometryEnvelope:Et,esriGeometryMultipoint:ny};function T6(e){return e&&Lte[e]||null}const mp={base:Ys,key:"type",typeMap:{extent:Et,multipoint:ny,point:Le,polyline:xs,polygon:Rn}};el(mp);let Rte=0;const Zx=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Rte++})}};return t=c([O("esri.core.Identifiable")],t),t};let A3=class extends Zx(class{}){};A3=c([O("esri.core.Identifiable")],A3);let Fte=0;const M3=fe.getLogger("esri.layers.Layer");let lr=class extends bo.EventedMixin(Zx(dc)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Et(-180,-90,180,90,Xe.WGS84),this.id=Date.now().toString(16)+"-layer-"+Fte++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Xe.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e,i=await se(()=>import("./arcgisLayers.973b4736.js"),["assets/arcgisLayers.973b4736.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/lazyLayerLoader.33db2725.js","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]);try{return await i.fromUrl(t)}catch(r){throw M3.error("#fromArcGISServerUrl({ url: '"+t.url+"'})","Failed to create layer from arcgis server url",r),r}}static async fromPortalItem(e){const t="portalItem"in e?e:{portalItem:e},i=await se(()=>import("./portalLayers.36d64293.js"),["assets/portalLayers.36d64293.js","assets/lazyLayerLoader.33db2725.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/layersLoader.fec01d11.js","assets/jsonContext.afa43f42.js","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]);try{return await i.fromItem(t)}catch(r){const s=t&&t.portalItem,n=s&&s.id||"unset",o=s&&s.portal&&s.portal.url||Tt.portalUrl;throw M3.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+n+"')",r),r}}initialize(){this.when().catch(e=>{var t,i;_o(e)||fe.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${(t=this.title)!=null?t:"no title"}', id: '${(i=this.id)!=null?i:"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){const e=this.url;return e?_i(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await ft(e,{query:{f:"json"},responseType:"json"})).data;throw new B("layer:no-attribution-data","Layer does not have attribution data")}};c([d({type:String})],lr.prototype,"attributionDataUrl",void 0),c([d({type:Et})],lr.prototype,"fullExtent",void 0),c([d({readOnly:!0})],lr.prototype,"hasAttributionData",null),c([d({type:String,clonable:!1})],lr.prototype,"id",void 0),c([d({type:Boolean,nonNullable:!0})],lr.prototype,"legendEnabled",void 0),c([d({type:["show","hide","hide-children"]})],lr.prototype,"listMode",void 0),c([d({type:Number,range:{min:0,max:1},nonNullable:!0})],lr.prototype,"opacity",void 0),c([d({clonable:!1})],lr.prototype,"parent",void 0),c([d({readOnly:!0})],lr.prototype,"parsedUrl",null),c([d({type:Boolean})],lr.prototype,"popupEnabled",void 0),c([d({type:Boolean})],lr.prototype,"attributionVisible",void 0),c([d({type:Xe})],lr.prototype,"spatialReference",void 0),c([d({type:String})],lr.prototype,"title",void 0),c([d({type:String,readOnly:!0,json:{read:!1}})],lr.prototype,"type",void 0),c([d()],lr.prototype,"url",void 0),c([d({type:Boolean,nonNullable:!0})],lr.prototype,"visible",void 0),lr=c([O("esri.layers.Layer")],lr);const yk=lr;function Nte(e){return e&&e.type==="group"}function aE(e,t,i){let r,s;if(e)for(let n=0,o=e.length;n<o;n++){if(r=e.getItemAt(n),r[t]===i)return r;if(Nte(r)&&(s=aE(r.layers,t,i),s))return s}}const O3=fe.getLogger("esri.support.LayersMixin"),Dte=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new ke;const r=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},s=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||O3.error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},n=o=>{o.parent=null,this.layerRemoved(o)};this.layers.on("before-add",o=>r(o.item)),this.layers.on("after-add",o=>s(o.item)),this.layers.on("after-remove",o=>n(o.item))}destroy(){const i=this.layers.removeAll();for(const r of i)this.layerRemoved(r),r.destroy();this.layers.destroy()}set layers(i){this._set("layers",Zh(i,this._get("layers")))}add(i,r){const s=this.layers;if(r=s.getNextIndex(r),i instanceof yk){const n=i;n.parent===this?this.reorder(n,r):s.add(n,r)}else yc(i)?i.then(n=>{this.destroyed||this.add(n,r)}):O3.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const s=this.layers;r=s.getNextIndex(r),i.slice().forEach(n=>{n.parent!==this?(s.add(n,r),r+=1):this.reorder(n,r)})}findLayerById(i){return aE(this.layers,"id",i)}findLayerByUid(i){return aE(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return c([d()],t.prototype,"layers",null),t=c([O("esri.support.LayersMixin")],t),t},$6="esri.support.TablesMixin",jte=fe.getLogger($6);function zte(e){return e&&e.type==="group"}function lE(e,t,i){if(e)for(let r=0,s=e.length;r<s;r++){const n=e.getItemAt(r);if(n[t]===i)return n;if(zte(n)){const o=lE(n.tables,t,i);if(o)return o}}}const Vte=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new ke,this.tables.on("after-add",r=>{const s=r.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,s.type!=="feature"&&jte.error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})}destroy(){const i=this.tables.removeAll();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",Zh(i,this._get("tables")))}findTableById(i){return lE(this.tables,"id",i)}findTableByUid(i){return lE(this.tables,"uid",i)}};return c([d()],t.prototype,"tables",null),t=c([O($6)],t),t};let Ta=class extends Vte(Dte(bo.EventedMixin(Ee))){constructor(e){super(e),this.allLayers=new fm({getCollections:()=>{var t,i,r;return[(t=this.basemap)==null?void 0:t.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(r=this.basemap)==null?void 0:r.referenceLayers]},getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=new fm({getCollections:()=>[this.tables,this.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return i&&"tables"in i&&i.tables.includes(t)}}),this.basemap=null,this.editableLayers=new fm({getCollections:()=>[this.allLayers],itemFilterFunction:ute}),this.ground=new aS,this._basemapCache=dte()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(t=this.basemap)==null||t.destroy(),hte(this._basemapCache),this._basemapCache=null}castBasemap(e){return pte(e,this._basemapCache)}castGround(e){const t=mte(e);return Q(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};c([d({readOnly:!0,dependsOn:[]})],Ta.prototype,"allLayers",void 0),c([d({readOnly:!0})],Ta.prototype,"allTables",void 0),c([d({type:nS})],Ta.prototype,"basemap",void 0),c([gt("basemap")],Ta.prototype,"castBasemap",null),c([d({readOnly:!0})],Ta.prototype,"editableLayers",void 0),c([d({type:aS,nonNullable:!0})],Ta.prototype,"ground",void 0),c([gt("ground")],Ta.prototype,"castGround",null),Ta=c([O("esri.Map")],Ta);const C6=Ta;var Xu;function E6(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,r="range"in e?e.range[1]:e.maxValue;if(+t<i||+t>r)return Xu.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(i=>i==null||i.code!==t))return Xu.INVALID_CODED_VALUE}return null}function A6(e){if(!(!e||e.type!=="range"))return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Xu||(Xu={}));let NT;function hc(){return NT||(NT=(async()=>{const e=await se(()=>import("./arcadeUtils.5397352e.js").then(function(t){return t.q}),["assets/arcadeUtils.5397352e.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css"]);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),NT}const fOe=(e,t,i)=>e_.create(e,t,i,null,["$feature"]),mOe=(e,t,i)=>e_.create(e,t,i,null,["$feature","$view"]),Ute=(e,t,i,r)=>e_.create(e,t,i,r,["$feature","$view"]);class e_{constructor(t,i,r,s,n,o,a,l){this.script=t,this.evaluate=n;const u=Array.isArray(a)?a:a.fields;this.fields=u,this._syntaxTree=s,this._arcade=i,this._arcadeDictionary=r,this._arcadeFeature=o,this._spatialReference=l,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,i,r,s,n,o){const{arcade:a,Feature:l,Dictionary:u}=await hc(),h=Xe.fromJSON(i),f=a.parseScript(t,o),y=n.reduce((R,_)=>be(k({},R),{[_]:null}),{});let g=null;N(s)&&(g=new u(s),g.immutable=!0,y.$config=null);const b=a.scriptUsesGeometryEngine(f)&&a.enableGeometrySupport(),w=a.scriptUsesFeatureSet(f)&&a.enableFeatureSetSupport(),x=a.scriptIsAsync(f)&&a.enableAsyncSupport(),T={vars:y,spatialReference:h,useAsync:!!x},M=new u;M.immutable=!1,M.setField("scale",0);const F=a.compileScript(f,T),D=R=>("$view"in R&&R.$view&&(M.setField("scale",R.$view.scale),R.$view=M),g&&(R.$config=g),F({vars:R,spatialReference:h}));return await Promise.all([b,w,x]),new e_(t,a,u,f,D,new l,r,h)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(t){return this._arcade.referencesMember(this._syntaxTree,t)}referencesFunction(t){return this._arcade.referencesFunction(this._syntaxTree,t)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}const Bte=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],qte=["field","normalizationField"];function k3(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(P3(Bte,i,t),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)P3(qte,r,t)}}function P3(e,t,i){if(e)for(const r of e){const s=Ja(r,t),n=s&&typeof s!="function"&&i.get(s);n&&Ln(r,n.name,t)}}function M6(e,t){if(e!=null&&t!=null&&t.fields.length)if("startField"in e){const i=t.get(e.startField),r=t.get(e.endField);e.startField=i&&i.name||null,e.endField=r&&r.name||null}else{const i=t.get(e.startTimeField),r=t.get(e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=r&&r.name||null}}const DT=new Set;function gk(e,t){return e&&t?(DT.clear(),rv(DT,e,t),Array.from(DT).sort()):[]}function rv(e,t,i){var r;if(i)if(t!=null&&(r=t.fields)!=null&&r.length)if(i.includes("*"))for(const{name:s}of t.fields)e.add(s);else for(const s of i)ho(e,t,s);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const s of i)e.add(s)}}function ho(e,t,i){if(typeof i=="string")if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function yOe(e,t){return Q(t)||Q(e)?[]:t.includes("*")?e.fields.map(i=>i.name):t}async function Fn(e,t,i){var r;if(!i)return;const{arcadeUtils:s}=await hc(),n=s.extractFieldNames(i,t==null||(r=t.fields)==null?void 0:r.map(o=>o.name));for(const o of n)ho(e,t,o)}async function O6(e,t,i){if(i&&i!=="1=1"){const r=(await se(()=>import("./WhereClause.2f3ccd67.js"),["assets/WhereClause.2f3ccd67.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])).WhereClause.create(i,t);if(!r.isStandardized)throw new B("fieldUtils:collectFilterFields","Where clause is not standardized");rv(e,t,r.fieldNames)}}function Gte({displayField:e,fields:t}){return e||(t&&t.length?jT(t,"name-or-title")||jT(t,"unique-identifier")||jT(t,"type-or-category")||Hte(t):null)}function Hte(e){for(const t of e){if(!t||!t.name)continue;const i=t.name.toLowerCase();if(i.indexOf("name")>-1||i.indexOf("title")>-1)return t.name}return null}function jT(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function gOe(e,t){if(!t)return;const i=Ja("elevationInfo.featureExpressionInfo",t);return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}async function Wte(e,t,i){i.outStatistic.onStatisticValueExpression?Fn(e,t,i.outStatistic.onStatisticValueExpression):e.add(i.outStatistic.onStatisticField)}async function vOe(e,t,i){var r,s;if(!t||!i||i.type!=="cluster")return;const n=[];if((r=i.popupTemplate)!=null&&r.expressionInfos&&n.push(...i.popupTemplate.expressionInfos.map(o=>Fn(e,t.fieldsIndex,o.expression))),Array.isArray((s=i.popupTemplate)==null?void 0:s.content)){const o=i.popupTemplate.content;for(const a of o)a.type==="expression"&&a.expressionInfo&&n.push(Fn(e,t.fieldsIndex,a.expressionInfo.expression))}i.fields&&n.push(...i.fields.map(o=>Wte(e,t.fieldsIndex,o))),await Promise.all(n)}async function _Oe(e,t,i){t&&(t.timeInfo&&N(i)&&i.timeExtent&&rv(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&rv(e,t.fieldsIndex,[t.floorInfo.floorField]),N(i)&&N(i.where)&&await O6(e,t.fieldsIndex,i.where))}async function bOe(e,t,i){t&&i&&await Promise.all(i.map(r=>Jte(e,t,r)))}async function Jte(e,t,i){t&&i&&(i.valueExpression?await Fn(e,t.fieldsIndex,i.valueExpression):i.field&&ho(e,t.fieldsIndex,i.field))}function Zte(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?gk(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function Yte(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?gk(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function wOe(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i&&i.length&&await Promise.all(i.map(s=>Kte(e,r,s)))}async function Kte(e,t,i){if(!i)return;const r=i.getLabelExpression(),s=i.where;if(r.type==="arcade")await Fn(e,t,r.expression);else{const n=r.expression.match(/{[^}]*}/g);n&&n.forEach(o=>{ho(e,t,o.slice(1,-1))})}await O6(e,t,s)}function Qte(e){const t=e.defaultValue;return t!==void 0&&L6(e,t)?t:e.nullable?null:void 0}function k6(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function Xte(e){return e===null||k6(e)}const vk="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function eie(e){return e===null||vk(e)}function P6(e){return e!=null&&typeof e=="string"}function tie(e){return e===null||P6(e)}function iie(){return!0}function L6(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?eie:vk;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?Xte:k6;break;case"string":case"esriFieldTypeString":i=e.nullable?tie:P6;break;default:i=iie}return arguments.length===1?i:i(t)}const rie=["integer","small-integer","single","double"],sie=new Set([...rie,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function ia(e){return e!=null&&sie.has(e.type)}function cE(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function uE(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}var sv,km;function SOe(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function nie(e,t){return e.nullable&&t===null?null:ia(e)&&!oie(e.type,Number(t))?sv.OUT_OF_RANGE:L6(e,t)?e.domain?E6(e.domain,t):null:km.INVALID_TYPE}function oie(e,t){const i=typeof e=="string"?_k(e):e;return!!i&&(i.isInteger?vk(t)&&t>=i.min&&t<=i.max:t>=i.min&&t<=i.max)}function aie(e){return A6(e.domain)||(ia(e)?_k(e.type):void 0)}function _k(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return lie;case"esriFieldTypeInteger":case"integer":return cie;case"esriFieldTypeSingle":case"single":return uie;case"esriFieldTypeDouble":case"double":return die}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(sv||(sv={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(km||(km={}));const lie={min:-32768,max:32767,isInteger:!0},cie={min:-2147483648,max:2147483647,isInteger:!0},uie={min:-34e37,max:12e37,isInteger:!1},die={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function xOe(e,t,i){switch(e){case Xu.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Xu.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case km.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case sv.OUT_OF_RANGE:{const{min:r,max:s}=_k(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${s}`}}}function hie(e,t){return!pie(e,t,null)}function pie(e,t,i){if(!t||!t.attributes||!e){if(N(i))for(const n of e)i.add(n);return!0}const r=t.attributes;let s=!1;for(const n of e)if(!(n in r)){if(s=!0,!N(i))break;i.add(n)}return s}let Iw=class extends ue{constructor(e){super(e),this.type=null}};c([d({type:["attachments","custom","fields","media","text","expression"],readOnly:!0,json:{read:!1,write:!0}})],Iw.prototype,"type",void 0),Iw=c([O("esri.popup.content.Content")],Iw);const yp=Iw;var dE;let kd=dE=class extends yp{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new dE({description:this.description,displayType:this.displayType,title:this.title})}};c([d({type:String,json:{write:!0}})],kd.prototype,"description",void 0),c([d({type:["auto","preview","list"],json:{write:!0}})],kd.prototype,"displayType",void 0),c([d({type:String,json:{write:!0}})],kd.prototype,"title",void 0),c([d({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],kd.prototype,"type",void 0),kd=dE=c([O("esri.popup.content.AttachmentsContent")],kd);const nv=kd;var hE;let Pd=hE=class extends yp{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new hE({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?K(this.outFields):null})}};c([d()],Pd.prototype,"creator",void 0),c([d()],Pd.prototype,"destroyer",void 0),c([d()],Pd.prototype,"outFields",void 0),c([d({type:["custom"],readOnly:!0})],Pd.prototype,"type",void 0),Pd=hE=c([O("esri.popup.content.CustomContent")],Pd);const fie=Pd;var pE;let sf=pE=class extends ue{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new pE({title:this.title,expression:this.expression})}};c([d({type:String,json:{write:!0}})],sf.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],sf.prototype,"expression",void 0),c([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],sf.prototype,"returnType",void 0),sf=pE=c([O("esri.popup.ElementExpressionInfo")],sf);const R6=sf;var fE;let xg=fE=class extends yp{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new fE({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};c([d({type:R6,json:{write:!0}})],xg.prototype,"expressionInfo",void 0),c([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],xg.prototype,"type",void 0),xg=fE=c([O("esri.popup.content.ExpressionContent")],xg);const bk=xg,ov=Br()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});ov.toJSON.bind(ov);ov.fromJSON.bind(ov);const va={year:"numeric",month:"numeric",day:"numeric"},jy={year:"numeric",month:"long",day:"numeric"},zy={year:"numeric",month:"short",day:"numeric"},Vy={year:"numeric",month:"long",weekday:"long",day:"numeric"},Yn={hour:"numeric",minute:"numeric"},Eo=be(k({},Yn),{second:"numeric"}),wk={"short-date":va,"short-date-short-time":k(k({},va),Yn),"short-date-short-time-24":be(k(k({},va),Yn),{hour12:!1}),"short-date-long-time":k(k({},va),Eo),"short-date-long-time-24":be(k(k({},va),Eo),{hour12:!1}),"short-date-le":va,"short-date-le-short-time":k(k({},va),Yn),"short-date-le-short-time-24":be(k(k({},va),Yn),{hour12:!1}),"short-date-le-long-time":k(k({},va),Eo),"short-date-le-long-time-24":be(k(k({},va),Eo),{hour12:!1}),"long-month-day-year":jy,"long-month-day-year-short-time":k(k({},jy),Yn),"long-month-day-year-short-time-24":be(k(k({},jy),Yn),{hour12:!1}),"long-month-day-year-long-time":k(k({},jy),Eo),"long-month-day-year-long-time-24":be(k(k({},jy),Eo),{hour12:!1}),"day-short-month-year":zy,"day-short-month-year-short-time":k(k({},zy),Yn),"day-short-month-year-short-time-24":be(k(k({},zy),Yn),{hour12:!1}),"day-short-month-year-long-time":k(k({},zy),Eo),"day-short-month-year-long-time-24":be(k(k({},zy),Eo),{hour12:!1}),"long-date":Vy,"long-date-short-time":k(k({},Vy),Yn),"long-date-short-time-24":be(k(k({},Vy),Yn),{hour12:!1}),"long-date-long-time":k(k({},Vy),Eo),"long-date-long-time-24":be(k(k({},Vy),Eo),{hour12:!1}),"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Yn,"long-time":Eo},av=Br()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});av.apiValues;av.toJSON.bind(av);av.fromJSON.bind(av);const mie={ar:"ar-u-nu-latn-ca-gregory"};let Tw=new WeakMap,F6=wk["short-date-short-time"];function N6(e){const t=e||F6;if(!Tw.has(t)){const i=mr(),r=mie[mr()]||i;Tw.set(t,new Intl.DateTimeFormat(r,t))}return Tw.get(t)}function oy(e){return wk[e]||null}function fi(e,t){return N6(t).format(e)}tk(()=>{Tw=new WeakMap,F6=wk["short-date-short-time"]});const yie={ar:"ar-u-nu-latn"};let $w=new WeakMap,D6={};function gie(e){const t=e||D6;if(!$w.has(t)){const i=mr(),r=yie[mr()]||i;$w.set(t,new Intl.NumberFormat(r,e))}return $w.get(t)}function Yx(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function ha(e,t){return gie(t).format(e)}tk(()=>{$w=new WeakMap,D6={}});var mE;let Ld=mE=class extends ue{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new mE({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?fi(e,k(k({},oy(this.dateFormat)),this.dateTimeFormatOptions)):ha(e,Yx(this))}};c([Ue(ov)],Ld.prototype,"dateFormat",void 0),c([d({type:Object,json:{read:!1}})],Ld.prototype,"dateTimeFormatOptions",void 0),c([d({type:Boolean,json:{write:!0}})],Ld.prototype,"digitSeparator",void 0),c([d({type:si,json:{write:!0}})],Ld.prototype,"places",void 0),Ld=mE=c([O("esri.popup.support.FieldInfoFormat")],Ld);const I0=Ld;var yE;let Ro=yE=class extends ue{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new yE({fieldName:this.fieldName,format:this.format?K(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};c([d({type:String,json:{write:!0}})],Ro.prototype,"fieldName",void 0),c([d({type:I0,json:{write:!0}})],Ro.prototype,"format",void 0),c([d({type:Boolean,json:{write:!0,default:!1}})],Ro.prototype,"isEditable",void 0),c([d({type:String,json:{write:!0}})],Ro.prototype,"label",void 0),c([Ue(new rt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Ro.prototype,"stringFieldOption",void 0),c([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Ro.prototype,"statisticType",void 0),c([d({type:String,json:{write:!0}})],Ro.prototype,"tooltip",void 0),c([d({type:Boolean,json:{write:!0}})],Ro.prototype,"visible",void 0),Ro=yE=c([O("esri.popup.FieldInfo")],Ro);const t_=Ro;var gE;let Cl=gE=class extends yp{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new gE(K({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};c([d({type:Object,json:{write:!0}})],Cl.prototype,"attributes",void 0),c([d({type:String,json:{write:!0}})],Cl.prototype,"description",void 0),c([d({type:[t_]})],Cl.prototype,"fieldInfos",void 0),c([$e("fieldInfos")],Cl.prototype,"writeFieldInfos",null),c([d({type:String,json:{write:!0}})],Cl.prototype,"title",void 0),c([d({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Cl.prototype,"type",void 0),Cl=gE=c([O("esri.popup.content.FieldsContent")],Cl);const Pm=Cl;let Rd=class extends ue{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};c([d({type:String,json:{write:!0}})],Rd.prototype,"altText",void 0),c([d({type:String,json:{write:!0}})],Rd.prototype,"caption",void 0),c([d({type:String,json:{write:!0}})],Rd.prototype,"title",void 0),c([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Rd.prototype,"type",void 0),Rd=c([O("esri.popup.content.mixins.MediaInfo")],Rd);const Sk=Rd;var vE;let Ig=vE=class extends Ee{constructor(e){super(e),this.tooltip=null,this.value=null}clone(){return new vE({tooltip:this.tooltip,value:this.value})}};c([d()],Ig.prototype,"tooltip",void 0),c([d()],Ig.prototype,"value",void 0),Ig=vE=c([O("esri.popup.content.support.ChartMediaInfoValueSeries")],Ig);const j6=Ig;var _E;let Fd=_E=class extends ue{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new _E({fields:K(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};c([d({type:[String],json:{write:!0}})],Fd.prototype,"fields",void 0),c([d({type:String,json:{write:!0}})],Fd.prototype,"normalizeField",void 0),c([d({type:[j6],json:{read:!1}})],Fd.prototype,"series",void 0),c([d({type:String,json:{write:!0}})],Fd.prototype,"tooltipField",void 0),Fd=_E=c([O("esri.popup.content.support.ChartMediaInfoValue")],Fd);const vie=Fd;let Tg=class extends Sk{constructor(e){super(e),this.type=null,this.value=null}};c([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Tg.prototype,"type",void 0),c([d({type:vie,json:{write:!0}})],Tg.prototype,"value",void 0),Tg=c([O("esri.popup.content.mixins.ChartMediaInfo")],Tg);const Kx=Tg,Qx=Br()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var bE;let Cw=bE=class extends Kx{constructor(e){super(e),this.type="bar-chart"}clone(){return new bE({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:Qx.write}})],Cw.prototype,"type",void 0),Cw=bE=c([O("esri.popup.content.BarChartMediaInfo")],Cw);const z6=Cw;var wE;let Ew=wE=class extends Kx{constructor(e){super(e),this.type="column-chart"}clone(){return new wE({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:Qx.write}})],Ew.prototype,"type",void 0),Ew=wE=c([O("esri.popup.content.ColumnChartMediaInfo")],Ew);const V6=Ew;var SE;let $g=SE=class extends ue{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new SE({linkURL:this.linkURL,sourceURL:this.sourceURL})}};c([d({type:String,json:{write:!0}})],$g.prototype,"linkURL",void 0),c([d({type:String,json:{write:!0}})],$g.prototype,"sourceURL",void 0),$g=SE=c([O("esri.popup.content.support.ImageMediaInfoValue")],$g);const _ie=$g;var xE;let nf=xE=class extends Sk{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new xE({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};c([d({type:Number,json:{write:!0}})],nf.prototype,"refreshInterval",void 0),c([d({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],nf.prototype,"type",void 0),c([d({type:_ie,json:{write:!0}})],nf.prototype,"value",void 0),nf=xE=c([O("esri.popup.content.ImageMediaInfo")],nf);const U6=nf;var IE;let Aw=IE=class extends Kx{constructor(e){super(e),this.type="line-chart"}clone(){return new IE({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:Qx.write}})],Aw.prototype,"type",void 0),Aw=IE=c([O("esri.popup.content.LineChartMediaInfo")],Aw);const B6=Aw;var TE;let Mw=TE=class extends Kx{constructor(e){super(e),this.type="pie-chart"}clone(){return new TE({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:Qx.write}})],Mw.prototype,"type",void 0),Mw=TE=c([O("esri.popup.content.PieChartMediaInfo")],Mw);const q6=Mw,G6={base:Sk,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":z6,"column-chart":V6,"line-chart":B6,"pie-chart":q6,image:U6}};var $E;let Fo=$E=class extends yp{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?U6.fromJSON(t):t.type==="barchart"?z6.fromJSON(t):t.type==="columnchart"?V6.fromJSON(t):t.type==="linechart"?B6.fromJSON(t):t.type==="piechart"?q6.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new $E(K({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};c([d()],Fo.prototype,"activeMediaInfoIndex",void 0),c([d({type:Object,json:{write:!0}})],Fo.prototype,"attributes",void 0),c([d({type:String,json:{write:!0}})],Fo.prototype,"description",void 0),c([d({types:[G6]})],Fo.prototype,"mediaInfos",void 0),c([xe("mediaInfos")],Fo.prototype,"readMediaInfos",null),c([$e("mediaInfos")],Fo.prototype,"writeMediaInfos",null),c([d({type:String,json:{write:!0}})],Fo.prototype,"title",void 0),c([d({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Fo.prototype,"type",void 0),Fo=$E=c([O("esri.popup.content.MediaContent")],Fo);const lv=Fo;var CE;let Cg=CE=class extends yp{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new CE({text:this.text})}};c([d({type:String,json:{write:!0}})],Cg.prototype,"text",void 0),c([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Cg.prototype,"type",void 0),Cg=CE=c([O("esri.popup.content.TextContent")],Cg);const Lm=Cg,bie={base:null,key:"type",typeMap:{attachment:nv,media:lv,text:Lm,expression:bk,field:Pm}};var EE;let Nd=EE=class extends ue{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new EE({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};c([d({type:String,json:{write:!0}})],Nd.prototype,"name",void 0),c([d({type:String,json:{write:!0}})],Nd.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],Nd.prototype,"expression",void 0),c([d({type:["string","number"],json:{write:!0}})],Nd.prototype,"returnType",void 0),Nd=EE=c([O("esri.popup.ExpressionInfo")],Nd);const H6=Nd;var AE;let Eg=AE=class extends ue{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new AE({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};c([d({type:Boolean,json:{write:!0}})],Eg.prototype,"returnTopmostRaster",void 0),c([d({type:Boolean,json:{write:!0}})],Eg.prototype,"showNoDataRecords",void 0),Eg=AE=c([O("esri.popup.LayerOptions")],Eg);const wie=Eg;var ME;let Ag=ME=class extends ue{constructor(e){super(e),this.field=null,this.order=null}clone(){return new ME({field:this.field,order:this.order})}};c([d({type:String,json:{write:!0}})],Ag.prototype,"field",void 0),c([d({type:["asc","desc"],json:{write:!0}})],Ag.prototype,"order",void 0),Ag=ME=c([O("esri.popup.support.RelatedRecordsInfoFieldOrder")],Ag);const W6=Ag;var OE;let Mg=OE=class extends ue{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new OE({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?K(this.orderByFields):null})}};c([d({type:Boolean,json:{write:!0}})],Mg.prototype,"showRelatedRecords",void 0),c([d({type:[W6],json:{write:!0}})],Mg.prototype,"orderByFields",void 0),Mg=OE=c([O("esri.popup.RelatedRecordsInfo")],Mg);const Sie=Mg;var kE;let No=kE=class extends Zx(Ee){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new kE({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};c([d()],No.prototype,"active",void 0),c([d()],No.prototype,"className",void 0),c([d()],No.prototype,"disabled",void 0),c([d()],No.prototype,"id",void 0),c([d()],No.prototype,"indicator",void 0),c([d()],No.prototype,"title",void 0),c([d()],No.prototype,"type",void 0),c([d()],No.prototype,"visible",void 0),No=kE=c([O("esri.support.actions.ActionBase")],No);const Xx=No;var PE;let Ow=PE=class extends Xx{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new PE({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};c([d()],Ow.prototype,"image",void 0),Ow=PE=c([O("esri.support.Action.ActionButton")],Ow);const ay=Ow;var LE;let Og=LE=class extends Xx{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new LE({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};c([d()],Og.prototype,"image",void 0),c([d()],Og.prototype,"value",void 0),Og=LE=c([O("esri.support.Action.ActionToggle")],Og);const J6=Og;var RE;const xie=ke.ofType({key:"type",defaultKeyValue:"button",base:Xx,typeMap:{button:ay,toggle:J6}}),Iie={base:yp,key:"type",typeMap:{media:lv,custom:fie,text:Lm,attachments:nv,fields:Pm,expression:bk}},Z6="esri.PopupTemplate",Tie=fe.getLogger(Z6),$ie=["attachments","fields","media","text","expression"];let Zi=RE=class extends ue{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(e){return Array.isArray(e)?e.map(t=>el(Iie,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||yc(e)?e:(Tie.error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:i}=t;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(t):this._readPopupInfo(t)}writeContent(e,t,i,r){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(s=>$ie.indexOf(s.type)!==-1).map(s=>s&&s.toJSON(r)),t.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(t):s.type==="media"?this._writeMediaContent(s,t):s.type==="text"&&this._writeTextContent(s,t)})):t.description=e}writeFieldInfos(e,t,i,r){const{content:s}=this,n=Array.isArray(s)?s:null;if(e){const o=n?n.filter(l=>l.type==="fields"):[],a=o.length&&o.every(l=>{var u;return(u=l.fieldInfos)==null?void 0:u.length});t.fieldInfos=e.filter(Boolean).map(l=>{const u=l.toJSON(r);return a&&(u.visible=!1),u})}if(n)for(const o of n)o.type==="fields"&&this._writeFieldsContent(o,t)}writeLayerOptions(e,t,i,r){t[i]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(r)}writeTitle(e,t){t.title=e||""}clone(){const{actions:e}=this,t=e?K(e.toArray()):[];return new RE({actions:t,content:Array.isArray(this.content)?K(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?K(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?K(this.fieldInfos):null,layerOptions:this.layerOptions?K(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?K(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?K(this.relatedRecordsInfo):null})}async collectRequiredFields(e,t){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...i,...this._getContentExpressionInfos(this.content,i)]),rv(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const i=K(e.fieldInfos);Array.isArray(t.fieldInfos)?i.forEach(r=>{const s=t.fieldInfos.find(n=>n.fieldName.toLowerCase()===r.fieldName.toLowerCase());s?s.visible=!0:t.fieldInfos.push(r)}):t.fieldInfos=i}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=K(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...i]:t.mediaInfos=i}_readPopupInfoElements({description:e,mediaInfos:t,popupElements:i}){const r={description:!1,mediaInfos:!1};return i.map(s=>s.type==="media"?(s.mediaInfos||!t||r.mediaInfos||(s.mediaInfos=t,r.mediaInfos=!0),lv.fromJSON(s)):s.type==="text"?(s.text||!e||r.description||(s.text=e,r.description=!0),Lm.fromJSON(s)):s.type==="attachments"?nv.fromJSON(s):s.type==="fields"?Pm.fromJSON(s):s.type==="expression"?bk.fromJSON(s):void 0).filter(Boolean)}_readPopupInfo({description:e,mediaInfos:t,showAttachments:i}){const r=[];return e?r.push(new Lm({text:e})):r.push(new Pm),Array.isArray(t)&&t.length&&r.push(lv.fromJSON({mediaInfos:t})),i&&r.push(nv.fromJSON({displayType:"auto"})),r.length?r:e}_getContentElementFields(e){const t=e==null?void 0:e.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos||this.fieldInfos)];if(t==="media"){const i=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...i.reduce((r,s)=>[...r,...this._getMediaInfoFields(s)],[])]}return t==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:i,value:r}=e,s=r||{},{fields:n=[],normalizeField:o,tooltipField:a,sourceURL:l,linkURL:u}=s,h=[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(l),...this._extractFieldNames(u),...n];return o&&h.push(o),a&&h.push(a),h}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((i,r)=>[...i,...r.type==="expression"&&r.expressionInfo?[r.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,i)=>[...t,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(e,t,i){i&&await Promise.all(i.map(r=>Fn(e,t,r.expression)))}_getFieldInfoFields(e){return e?e.filter(t=>t.visible===void 0||!!t.visible).map(t=>t.fieldName).filter(t=>t.indexOf("relationships/")===-1&&t.indexOf("expression/")===-1):[]}_getActionsFields(e){return e?e.toArray().reduce((t,i)=>[...t,...this._getActionFields(i)],[]):[]}_getActionFields(e){const{className:t,title:i,type:r}=e,s=r==="button"||r==="toggle"?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const t=/{[^}]*}/g,i=e.match(t);if(!i)return[];const r=/\{(\w+):.+\}/,s=i.filter(n=>!(n.indexOf("{relationships/")===0||n.indexOf("{expression/")===0)).map(n=>n.replace(r,"{$1}"));return s?s.map(n=>n.slice(1,-1)):[]}};c([d({type:xie})],Zi.prototype,"actions",void 0),c([d()],Zi.prototype,"content",void 0),c([gt("content")],Zi.prototype,"castContent",null),c([xe("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],Zi.prototype,"readContent",null),c([$e("content",{popupElements:{type:ke.ofType(bie)},showAttachments:{type:Boolean},mediaInfos:{type:ke.ofType(G6)},description:{type:String}})],Zi.prototype,"writeContent",null),c([d({type:[H6],json:{write:!0}})],Zi.prototype,"expressionInfos",void 0),c([d({type:[t_]})],Zi.prototype,"fieldInfos",void 0),c([$e("fieldInfos")],Zi.prototype,"writeFieldInfos",null),c([d({type:wie})],Zi.prototype,"layerOptions",void 0),c([$e("layerOptions")],Zi.prototype,"writeLayerOptions",null),c([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Zi.prototype,"lastEditInfoEnabled",void 0),c([d()],Zi.prototype,"outFields",void 0),c([d()],Zi.prototype,"overwriteActions",void 0),c([d()],Zi.prototype,"returnGeometry",void 0),c([d({json:{type:String}})],Zi.prototype,"title",void 0),c([$e("title")],Zi.prototype,"writeTitle",null),c([d({type:Sie,json:{write:!0}})],Zi.prototype,"relatedRecordsInfo",void 0),Zi=RE=c([O(Z6)],Zi);const ly=Zi,L3=new rt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Cie=0,of=class extends ue{constructor(e){super(e),this.id="sym"+Cie++,this.type=null,this.color=new Oe([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};c([d({type:L3.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:L3.write}}})],of.prototype,"type",void 0),c([d({type:Oe,json:{write:{allowNull:!0}}})],of.prototype,"color",void 0),c([xe("color")],of.prototype,"readColor",null),of=c([O("esri.symbols.Symbol")],of);const en=of;var FE;let qc=FE=class extends en{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const i in e)t[i]=e[i]}async collectRequiredFields(e,t){if(this.data.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const r=i.map(s=>{const n=s.valueExpressionInfo;return Fn(e,t,n.expression)});await Promise.all(r)}}}clone(){return new FE({data:K(this.data)})}hash(){return PO(JSON.stringify(this.data)).toString()}};c([d({json:{write:!1}})],qc.prototype,"color",void 0),c([d({json:{write:!0}})],qc.prototype,"data",void 0),c([xe("data",["symbol"])],qc.prototype,"readData",null),c([$e("data",{})],qc.prototype,"writeData",null),c([Ue({CIMSymbolReference:"cim"},{readOnly:!0})],qc.prototype,"type",void 0),qc=FE=c([O("esri.symbols.CIMSymbol")],qc);const i_=qc;let af=class extends ue{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,t,i){e||(t[i]=e)}};c([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],af.prototype,"enabled",void 0),c([$e("enabled")],af.prototype,"writeEnabled",null),c([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],af.prototype,"type",void 0),af=c([O("esri.symbols.Symbol3DLayer")],af);const al=af,Eie=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Aie="screenUtils.toPt: input not recognized!",Y6=96;function Ei(e){return e?e/72*Y6:0}function il(e){return e?72*e/Y6:0}function Nt(e){if(typeof e=="string"){const t=e.match(Eie);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),s=e.charAt(0)==="-",n=r==="px"?il(i):i;return s?-n:n}return console.warn(Aie),null}return e}function qs(e=0,t=0){return{x:e,y:t}}function IOe(e=0,t=0){return[e,t]}function Mie(e,t){const i=t.transparency!=null?tv(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new Oe([r[0]||0,r[1]||0,r[2]||0,i]):null}function Oie(e,t){t.color=e.toJSON().slice(0,3);const i=ak(e.a);i!==0&&(t.transparency=i)}const rd={type:Oe,json:{type:[si],default:null,read:{source:["color","transparency"],reader:Mie},write:{target:{color:{type:[si]},transparency:{type:si}},writer:Oie}}},rl={type:Number,cast:Nt,json:{write:!0}};let Dd=class extends ue{constructor(e){super(e),this.color=new Oe([0,0,0,1]),this.extensionLength=0,this.size=il(1)}clone(){}cloneProperties(){return{color:K(this.color),size:this.size,extensionLength:this.extensionLength}}};c([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Dd.prototype,"type",void 0),c([d(rd)],Dd.prototype,"color",void 0),c([d(be(k({},rl),{json:{write:{overridePolicy:e=>({enabled:!!e})}}}))],Dd.prototype,"extensionLength",void 0),c([d(rl)],Dd.prototype,"size",void 0),Dd=c([O("esri.symbols.edges.Edges3D")],Dd);const xk=Dd;var NE;let kw=NE=class extends xk{constructor(e){super(e),this.type="sketch"}clone(){return new NE(this.cloneProperties())}};c([Ue({sketch:"sketch"},{readOnly:!0})],kw.prototype,"type",void 0),kw=NE=c([O("esri.symbols.edges.SketchEdges3D")],kw);const kie=kw;var DE;let Pw=DE=class extends xk{constructor(e){super(e),this.type="solid"}clone(){return new DE(this.cloneProperties())}};c([Ue({solid:"solid"},{readOnly:!0})],Pw.prototype,"type",void 0),Pw=DE=c([O("esri.symbols.support.SolidEdges3D")],Pw);const Pie=Pw,K6={types:{key:"type",base:xk,typeMap:{solid:Pie,sketch:kie}},json:{write:!0}};var jE;let kn=jE=class extends ue{constructor(e){super(e),this.color=null}clone(){const e={color:N(this.color)?this.color.clone():null};return new jE(e)}};c([d(rd)],kn.prototype,"color",void 0),kn=jE=c([O("esri.symbols.support.Symbol3DMaterial")],kn);var zE;let Gc=zE=class extends al{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new zE({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:N(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};c([Ue({Extrude:"extrude"},{readOnly:!0})],Gc.prototype,"type",void 0),c([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Gc.prototype,"size",void 0),c([d({type:kn,json:{write:!0}})],Gc.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Gc.prototype,"castShadows",void 0),c([d(K6)],Gc.prototype,"edges",void 0),Gc=zE=c([O("esri.symbols.ExtrudeSymbol3DLayer")],Gc);const Ik=Gc;let kg=class extends en{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};c([Ue({esriSLS:"simple-line"},{readOnly:!0})],kg.prototype,"type",void 0),c([d({type:Number,cast:Nt,json:{write:!0}})],kg.prototype,"width",void 0),kg=c([O("esri.symbols.LineSymbol")],kg);const Lie=kg,Rie=["begin","end","begin-end"],Q6=["arrow","circle","square","diamond","cross","x"];var VE;let $a=VE=class extends ue{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){(r==null?void 0:r.origin)==="web-map"?t[i]="arrow":t[i]=e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){(r==null?void 0:r.origin)==="web-map"||(t[i]=e)}clone(){return new VE({color:K(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};c([d({type:["begin","end","begin-end"],json:{write:!0}})],$a.prototype,"placement",void 0),c([Ue({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],$a.prototype,"type",void 0),c([d({type:Q6})],$a.prototype,"style",void 0),c([$e("style")],$a.prototype,"writeStyle",null),c([d({type:Oe,value:null,json:{write:{allowNull:!0}}})],$a.prototype,"color",null),c([xe("color")],$a.prototype,"readColor",null),c([$e("color")],$a.prototype,"writeColor",null),$a=VE=c([O("esri.symbols.LineSymbolMarker")],$a);const Fie=$a;var UE;const zT=new rt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let El=UE=class extends Lie{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,s,n){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),i!=null&&(o.width=Nt(i)),r!=null&&(o.cap=r),s!=null&&(o.join=s),n!=null&&(o.miterLimit=Nt(n)),o}clone(){var e;return new UE({color:K(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};c([Ue({esriSLS:"simple-line"},{readOnly:!0})],El.prototype,"type",void 0),c([d({type:zT.apiValues,json:{read:zT.read,write:zT.write}})],El.prototype,"style",void 0),c([d({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],El.prototype,"cap",void 0),c([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],El.prototype,"join",void 0),c([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":Fie}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],El.prototype,"marker",void 0),c([d({type:Number,json:{read:!1,write:!1}})],El.prototype,"miterLimit",void 0),El=UE=c([O("esri.symbols.SimpleLineSymbol")],El);const Nn=El;let Pg=class extends en{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};c([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Nn}},json:{default:null,write:!0}})],Pg.prototype,"outline",void 0),c([d({type:["simple-fill","picture-fill"],readOnly:!0})],Pg.prototype,"type",void 0),Pg=c([O("esri.symbols.FillSymbol")],Pg);const X6=Pg;let Lw=class extends ue{constructor(e){super(e)}clone(){}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Lw.prototype,"type",void 0),Lw=c([O("esri.symbols.patterns.LinePattern3D")],Lw);const e8=Lw,Nie=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var BE;const Die=Br()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Lg=BE=class extends e8{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new BE(e)}};c([d({type:["style"]})],Lg.prototype,"type",void 0),c([Ue(Die),d({type:Nie})],Lg.prototype,"style",void 0),Lg=BE=c([O("esri.symbols.patterns.LineStylePattern3D")],Lg);const Tk=Lg;let Rw=class extends ue{constructor(e){super(e)}clone(){}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Rw.prototype,"type",void 0),Rw=c([O("esri.symbols.patterns.Pattern3D")],Rw);const t8=Rw,jie=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var qE;let Rg=qE=class extends t8{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new qE(e)}};c([d({type:["style"]})],Rg.prototype,"type",void 0),c([d({type:jie,json:{read:!0,write:!0}})],Rg.prototype,"style",void 0),Rg=qE=c([O("esri.symbols.patterns.StylePattern3D")],Rg);const i8=Rg,zie={types:{key:"type",base:t8,typeMap:{style:i8}},json:{write:!0}},r8={types:{key:"type",base:e8,typeMap:{style:Tk}},json:{write:!0}},T0=new Oe("white");new Oe("black");const Vie=new Oe([255,255,255,0]);function Uie(e){return e.r===0&&e.g===0&&e.b===0}var GE;let $0=GE=class extends kn{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:N(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new GE(e)}};c([Ue({multiply:"multiply",replace:"replace",tint:"tint"})],$0.prototype,"colorMixMode",void 0),$0=GE=c([O("esri.symbols.support.Symbol3DFillMaterial")],$0);function rp(e=Hie){return[e[0],e[1],e[2],e[3]]}function TOe(e){return[e[0],e[1],e[2],e[3]]}function $Oe(e,t,i,r,s=rp()){return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s}function COe(e,t=rp()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function EOe(e,t){return new Et({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function AOe(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Bie(e){return Q(e)||e[0]>=e[2]?0:e[2]-e[0]}function qie(e){return e[1]>=e[3]?0:e[3]-e[1]}function MOe(e){return Bie(e)*qie(e)}function OOe(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function kOe(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function Gie(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}const POe=[1/0,1/0,-1/0,-1/0],Hie=[0,0,0,0];function $k(e=Kie){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function Ck(e,t,i,r,s,n,o=$k()){return o[0]=e,o[1]=t,o[2]=i,o[3]=r,o[4]=s,o[5]=n,o}function LOe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function ROe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function Wie(e){return e[0]>=e[3]?0:e[3]-e[0]}function Jie(e){return e[1]>=e[4]?0:e[4]-e[1]}function Zie(e){return e[2]>=e[5]?0:e[5]-e[2]}function FOe(e,t=[0,0,0]){return t[0]=Wie(e),t[1]=Jie(e),t[2]=Zie(e),t}function NOe(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function DOe(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function Yie(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function jOe(e){return e?Yie(e,F3):$k(F3)}function zOe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function R3(e){return e.length===6}function VOe(e,t,i){if(Q(e)||Q(t))return e===t;if(!R3(e)||!R3(t))return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const F3=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Kie=[0,0,0,0,0,0];$k();function UOe(e,{isPrimitive:t,width:i,depth:r,height:s}){const n=t?10:1;if(i==null&&s==null&&r==null)return[n*e[0],n*e[1],n*e[2]];const o=sy(i,r,s);let a;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/e[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=e[l]*a);return o}const Qie=Ck(-.5,-.5,-.5,.5,.5,.5),Xie=Ck(-.5,-.5,0,.5,.5,1),ere=Ck(-.5,-.5,0,.5,.5,.5);function BOe(e){switch(e){case"sphere":case"cube":case"diamond":return Qie;case"cylinder":case"cone":case"inverted-cone":return Xie;case"tetrahedron":return ere;default:return}}const Ek=["butt","square","round"],tre=[...Ek,"none"],s8=["miter","bevel","round"];var HE;let jd=HE=class extends ue{constructor(e){super(e),this.color=new Oe([0,0,0,1]),this.size=il(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:N(this.color)?this.color.clone():null,size:this.size,pattern:N(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new HE(e)}};c([d(rd)],jd.prototype,"color",void 0),c([d(rl)],jd.prototype,"size",void 0),c([d(r8)],jd.prototype,"pattern",void 0),c([d({type:Ek,json:{default:"butt",write:{overridePolicy(){return{enabled:N(this.pattern)}}}}})],jd.prototype,"patternCap",void 0),jd=HE=c([O("esri.symbols.support.Symbol3DOutline")],jd);var Fw;let Al=Fw=class extends al{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:N(this.edges)?this.edges.clone():null,enabled:this.enabled,material:N(this.material)?this.material.clone():null,pattern:N(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:N(this.outline)?this.outline.clone():null};return new Fw(e)}static fromSimpleFillSymbol(e){var t,i,r,s,n,o;const a=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new Tk({style:e.outline.style}):null,l={size:(t=(i=e.outline)==null?void 0:i.width)!=null?t:0,color:((r=(s=e.outline)==null?void 0:s.color)!=null?r:T0).clone(),pattern:a};return a&&(n=e.outline)!=null&&n.cap&&(l.patternCap=e.outline.cap),new Fw({material:new $0({color:((o=e.color)!=null?o:Vie).clone()}),pattern:e.style&&e.style!=="solid"?new i8({style:e.style}):null,outline:l})}};c([Ue({Fill:"fill"},{readOnly:!0})],Al.prototype,"type",void 0),c([d({type:$0,json:{write:!0}})],Al.prototype,"material",void 0),c([d(zie)],Al.prototype,"pattern",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Al.prototype,"castShadows",void 0),c([d({type:jd,json:{write:!0}})],Al.prototype,"outline",void 0),c([d(K6)],Al.prototype,"edges",void 0),Al=Fw=c([O("esri.symbols.FillSymbol3DLayer")],Al);const r_=Al,ire=["none","underline","line-through"],rre=["normal","italic","oblique"],sre=["normal","lighter","bold","bolder"],n8={type:Number,cast:e=>{const t=oo(e);return t===0?1:fo(t,.1,4)},nonNullable:!0},nre=["left","right","center","justify"],ore=["left","right","center"],are=["baseline","top","middle","bottom"],lre={type:nre,nonNullable:!0},cre={type:ore,nonNullable:!0},o8={type:are,nonNullable:!0};var WE;let Ml=WE=class extends ue{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Nt(e)}clone(){return new WE({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};c([d({type:ire,json:{default:"none",write:!0}})],Ml.prototype,"decoration",void 0),c([d({type:String,json:{write:!0}})],Ml.prototype,"family",void 0),c([d({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],Ml.prototype,"size",void 0),c([gt("size")],Ml.prototype,"castSize",null),c([d({type:rre,json:{default:"normal",write:!0}})],Ml.prototype,"style",void 0),c([d({type:sre,json:{default:"normal",write:!0}})],Ml.prototype,"weight",void 0),Ml=WE=c([O("esri.symbols.Font")],Ml);const eI=Ml;function ed(e,t){const i=t&&t.url&&t.url.path;if(e&&i&&(e=An(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=WO(e,t.portalItem.itemUrl);dre.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return JE(e,t&&t.portal)}function s_(e,t,i=cv.YES){if(!e)return e;!On(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let r=An(e);if(t){const s=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(s){const n=JE(s,t.portal);r=WO(JE(r,t.portal),n,n),r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=pre(r,t&&t.portal),On(r)&&(r=uo(r)),t!=null&&t.resources&&t!=null&&t.portalItem&&!On(r)&&!fp(r)&&i===cv.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r)}),r}function Ak(e,t,i){return ed(e,i)}function sp(e,t,i,r){const s=s_(e,r);s!==void 0&&(t[i]=s)}const ure=/\/items\/([^\/]+)\/resources\//,dre=/^\.\/resources\//;function hre(e){const t=N(e)?e.match(ure):null;return N(t)?t[1]:null}function pre(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?qC(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function JE(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=dV();return so(r,`${r.scheme}://${i}`)?qC(e,t.portalHostname,i):qC(e,i,t.portalHostname)}var cv;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(cv||(cv={}));const qOe=Object.freeze({__proto__:null,fromJSON:ed,toJSON:s_,read:Ak,write:sp,itemIdFromResourceUrl:hre,get MarkKeep(){return cv}});var ZE;const fre=Br()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let zd=ZE=class extends ue{constructor(e){super(e)}readHref(e,t,i){return e?ed(e,i):t.dataURI}writeHref(e,t,i,r){e&&(fp(e)?t.dataURI=e:(t.href=s_(e,r),On(t.href)&&(t.href=uo(t.href))))}clone(){return new ZE({href:this.href,primitive:this.primitive})}};c([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],zd.prototype,"href",void 0),c([xe("href")],zd.prototype,"readHref",null),c([$e("href",{href:{type:String},dataURI:{type:String}})],zd.prototype,"writeHref",null),c([Ue(fre)],zd.prototype,"primitive",void 0),zd=ZE=c([O("esri.symbols.support.IconSymbol3DLayerResource")],zd);const mre="circle";var YE;let Jf=YE=class extends Ee{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new YE({x:this.x,y:this.y})}};c([d({type:Number})],Jf.prototype,"x",void 0),c([d({type:Number})],Jf.prototype,"y",void 0),Jf=YE=c([O("esri.symbols.support.Symbol3DAnchorPosition2D")],Jf);var KE;let Fg=KE=class extends ue{constructor(e){super(e),this.color=new Oe([0,0,0,1]),this.size=il(1)}clone(){const e={color:N(this.color)?this.color.clone():null,size:this.size};return new KE(e)}};c([d(rd)],Fg.prototype,"color",void 0),c([d(rl)],Fg.prototype,"size",void 0),Fg=KE=c([O("esri.symbols.support.Symbol3DIconOutline")],Fg);var lf;const yre=fe.getLogger("esri.symbols.IconSymbol3DLayer");let Ca=lf=class extends al{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new lf({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:N(this.material)?this.material.clone():null,outline:N(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||T0,i=N3(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||T0).clone()}:null;return new lf({size:e.size,resource:{primitive:vre(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||Uie(e.color)?T0:e.color,i=N3(e);return new lf({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new lf({resource:{href:yV({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function N3(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=D3(e.xoffset),s=D3(e.yoffset);return(r||s)&&t&&i?{x:-r/t,y:s/i}:null}function D3(e){return isFinite(e)?e:0}c([d({type:kn,json:{write:!0}})],Ca.prototype,"material",void 0),c([d({type:zd,json:{write:!0}})],Ca.prototype,"resource",void 0),c([Ue({Icon:"icon"},{readOnly:!0})],Ca.prototype,"type",void 0),c([d(rl)],Ca.prototype,"size",void 0),c([Ue({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),d({json:{default:"center"}})],Ca.prototype,"anchor",void 0),c([d({type:Jf,json:{type:[Number],read:{reader:e=>new Jf({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ca.prototype,"anchorPosition",void 0),c([d({type:Fg,json:{write:!0}})],Ca.prototype,"outline",void 0),Ca=lf=c([O("esri.symbols.IconSymbol3DLayer")],Ca);const gre={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function vre(e){return gre[e]||(yre.warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const ju=Ca;fe.getLogger("esri.core.Clonable");const ll=e=>{let t=class extends e{clone(){const i=qZ(Cs(this),"unable to clone instance of non-accessor class"),r=i.metadatas,s=i.store,n={},o=new Map;for(const u in r){const h=r[u],f=s==null?void 0:s.originOf(u),y=h.clonable;if(h.readOnly||y===!1||f!==it.USER&&f!==it.DEFAULTS&&f!==it.WEB_MAP&&f!==it.WEB_SCENE)continue;const g=this[u];let b=null;b=typeof y=="function"?y(g):y==="reference"?g:EC(g),g!=null&&b==null||(f===it.DEFAULTS?o.set(u,b):n[u]=b)}const a=new(Object.getPrototypeOf(this)).constructor(n);if(o.size){var l;const u=(l=Cs(a))==null?void 0:l.store;if(u)for(const[h,f]of o)u.set(h,f,it.DEFAULTS)}return a}};return t=c([O("esri.core.Clonable")],t),t};let j3=class extends ll(Ee){};j3=c([O("esri.core.Clonable")],j3);let Vd=class extends ll(ue){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return N(e)&&e.placement===this.placement&&e.style===this.style&&(Q(this.color)&&Q(e.color)||N(this.color)&&N(e.color)&&this.color.toJSON()===e.color.toJSON())}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Vd.prototype,"type",void 0),c([d({type:Rie,json:{default:"begin-end",write:!0}})],Vd.prototype,"placement",void 0),c([d({type:Q6,json:{default:"arrow",write:!0}})],Vd.prototype,"style",void 0),c([d({type:Oe,json:{type:[si],default:null,write:!0}})],Vd.prototype,"color",void 0),Vd=c([O("esri.symbols.LineStyleMarker3D")],Vd);const QE=Vd;var Nw;let Ea=Nw=class extends al{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=il(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:N(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:N(this.pattern)?this.pattern.clone():null,marker:N(this.marker)?this.marker.clone():null};return new Nw(e)}static fromSimpleLineSymbol(e){var t,i,r;const s={enabled:!0,size:(t=e.width)!=null?t:il(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new Tk({style:e.style}):null,material:new kn({color:(e.color||T0).clone()}),marker:e.marker?new QE({placement:e.marker.placement,style:e.marker.style,color:(i=(r=e.marker.color)==null?void 0:r.clone())!=null?i:null}):null};return new Nw(s)}};c([d({type:kn,json:{write:!0}})],Ea.prototype,"material",void 0),c([Ue({Line:"line"},{readOnly:!0})],Ea.prototype,"type",void 0),c([d({type:s8,json:{write:!0,default:"miter"}})],Ea.prototype,"join",void 0),c([d({type:Ek,json:{write:!0,default:"butt"}})],Ea.prototype,"cap",void 0),c([d(rl)],Ea.prototype,"size",void 0),c([d(r8)],Ea.prototype,"pattern",void 0),c([d({types:{key:"type",base:QE,typeMap:{style:QE}},json:{write:!0}})],Ea.prototype,"marker",void 0),Ea=Nw=c([O("esri.symbols.LineSymbol3DLayer")],Ea);const cy=Ea;var XE;const _re=Br()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Ng=XE=class extends ue{clone(){return new XE({href:this.href,primitive:this.primitive})}};c([d({type:String,json:{read:Ak,write:sp}})],Ng.prototype,"href",void 0),c([Ue(_re)],Ng.prototype,"primitive",void 0),Ng=XE=c([O("esri.symbols.support.ObjectSymbol3DLayerResource")],Ng);const bre="sphere";var e2;let mh=e2=class extends Ee{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new e2({x:this.x,y:this.y,z:this.z})}};c([d({type:Number})],mh.prototype,"x",void 0),c([d({type:Number})],mh.prototype,"y",void 0),c([d({type:Number})],mh.prototype,"z",void 0),mh=e2=c([O("esri.symbols.support.Symbol3DAnchorPosition3D")],mh);var t2;let Zr=t2=class extends al{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new t2({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:N(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};c([d({type:kn,json:{write:!0}})],Zr.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Zr.prototype,"castShadows",void 0),c([d({type:Ng,json:{write:!0}})],Zr.prototype,"resource",void 0),c([Ue({Object:"object"},{readOnly:!0})],Zr.prototype,"type",void 0),c([d({type:Number,json:{write:!0}})],Zr.prototype,"width",void 0),c([d({type:Number,json:{write:!0}})],Zr.prototype,"height",void 0),c([d({type:Number,json:{write:!0}})],Zr.prototype,"depth",void 0),c([Ue({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),d({json:{default:"origin"}})],Zr.prototype,"anchor",void 0),c([d({type:mh,json:{type:[Number],read:{reader:e=>new mh({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Zr.prototype,"anchorPosition",void 0),c([d({type:Number,json:{write:!0}})],Zr.prototype,"heading",void 0),c([d({type:Number,json:{write:!0}})],Zr.prototype,"tilt",void 0),c([d({type:Number,json:{write:!0}})],Zr.prototype,"roll",void 0),c([d({readOnly:!0})],Zr.prototype,"isPrimitive",null),Zr=t2=c([O("esri.symbols.ObjectSymbol3DLayer")],Zr);const tI=Zr;var i2;let ps=i2=class extends al{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e!=null?e:t.height==null&&t.size!=null?t.size:void 0}readHeight(e,t){return e!=null?e:t.width==null&&t.size!=null?t.size:void 0}clone(){return new i2({enabled:this.enabled,material:N(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};c([d({type:kn,json:{write:!0}})],ps.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ps.prototype,"castShadows",void 0),c([Ue({Path:"path"},{readOnly:!0})],ps.prototype,"type",void 0),c([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],ps.prototype,"profile",void 0),c([d({type:s8,json:{write:!0,default:"miter"}})],ps.prototype,"join",void 0),c([d({type:tre,json:{write:!0,default:"butt"}})],ps.prototype,"cap",void 0),c([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],ps.prototype,"width",void 0),c([xe("width",["width","size","height"])],ps.prototype,"readWidth",null),c([d({type:Number,json:{write:!0}})],ps.prototype,"height",void 0),c([xe("height",["height","size","width"])],ps.prototype,"readHeight",null),c([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],ps.prototype,"anchor",void 0),c([d({type:["heading","all"],json:{write:!0,default:"all"}})],ps.prototype,"profileRotation",void 0),ps=i2=c([O("esri.symbols.PathSymbol3DLayer")],ps);const Mk=ps;var r2;let Zf=r2=class extends ue{constructor(){super(...arguments),this.color=new Oe([0,0,0,1]),this.size=0}clone(){const e={color:K(this.color),size:this.size};return new r2(e)}};c([d(rd)],Zf.prototype,"color",void 0),c([d(rl)],Zf.prototype,"size",void 0),Zf=r2=c([O("esri.symbols.support.Symbol3DHalo")],Zf);let C0=class extends ll(ue){constructor(e){super(e),this.color=null}};c([d(rd)],C0.prototype,"color",void 0),C0=c([O("esri.symbols.support.Symbol3DTextBackground")],C0);var Dw;let Ls=Dw=class extends al{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){N(e)&&N(this._userSize)&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const s=be(k({},r),{textSymbol3D:!0});t.font=e.write({},s),delete t.font.size}get size(){return N(this._userSize)?this._userSize:N(this.font)&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,N(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new Dw({enabled:this.enabled,font:this.font&&K(this.font),halo:this.halo&&K(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:N(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:K(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new Dw({font:N(e.font)?e.font.clone():new eI,halo:wre(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new kn({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new C0({color:e.backgroundColor.clone()}):null})}};function wre(e,t){return e&&t>0?new Zf({color:K(e),size:t}):null}c([d({type:eI,json:{write:!0}})],Ls.prototype,"font",null),c([$e("font")],Ls.prototype,"writeFont",null),c([d({type:Zf,json:{write:!0}})],Ls.prototype,"halo",void 0),c([d(be(k({},cre),{json:{default:"center",write:!0}}))],Ls.prototype,"horizontalAlignment",void 0),c([d(be(k({},n8),{json:{default:1,write:!0}}))],Ls.prototype,"lineHeight",void 0),c([d({type:kn,json:{write:!0}})],Ls.prototype,"material",void 0),c([d({type:C0,json:{write:!0}})],Ls.prototype,"background",void 0),c([d(rl)],Ls.prototype,"size",null),c([d({type:String,json:{write:!0}})],Ls.prototype,"text",void 0),c([Ue({Text:"text"},{readOnly:!0})],Ls.prototype,"type",void 0),c([d(be(k({},o8),{json:{default:"baseline",write:!0}}))],Ls.prototype,"verticalAlignment",void 0),Ls=Dw=c([O("esri.symbols.TextSymbol3DLayer")],Ls);const uy=Ls;var s2;let Hc=s2=class extends al{constructor(e){super(e),this.color=n2.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new s2({color:K(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};c([d({type:Oe,nonNullable:!0,json:{type:[si],write:(e,t,i)=>t[i]=e.toArray(Oe.AlphaMode.UNLESS_OPAQUE),default:()=>n2.clone(),defaultEquals:e=>e.toCss(!0)===n2.toCss(!0)}})],Hc.prototype,"color",void 0),c([Ue({Water:"water"},{readOnly:!0})],Hc.prototype,"type",void 0),c([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Hc.prototype,"waterbodySize",void 0),c([d({type:Number,json:{write:!0,default:null}})],Hc.prototype,"waveDirection",void 0),c([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Hc.prototype,"waveStrength",void 0),Hc=s2=c([O("esri.symbols.WaterSymbol3DLayer")],Hc);const n2=new Oe([0,119,190]),Ok=Hc;var o2;let Ud=o2=class extends Ee{constructor(){super(...arguments),this.portal=null}clone(){return new o2({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};c([d({type:String})],Ud.prototype,"name",void 0),c([d({type:String})],Ud.prototype,"styleUrl",void 0),c([d({type:String})],Ud.prototype,"styleName",void 0),c([d({type:zr})],Ud.prototype,"portal",void 0),Ud=o2=c([O("esri.symbols.support.StyleOrigin")],Ud);const uv=Ud;var a2;let jh=a2=class extends Ee{clone(){return new a2({url:this.url})}};c([d({type:String})],jh.prototype,"url",void 0),jh=a2=c([O("esri.symbols.support.Thumbnail")],jh);const a8={icon:ju,object:tI,line:cy,path:Mk,fill:r_,extrude:Ik,text:uy,water:Ok},Sre=ke.ofType({base:al,key:"type",typeMap:a8,errorContext:"symbol-layer"}),xre=fe.getLogger("esri.symbols.Symbol3D");let Aa=class extends en{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,i=t&&t.type||ke;this._set("symbolLayers",new i)}get color(){return null}set color(e){this.initialized&&xre.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Zh(e,this._get("symbolLayers"))}readStyleOrigin(e,t,i){if(e.styleUrl&&e.name){const r=ed(e.styleUrl,i);return new uv({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new uv({portal:i&&i.portal||zr.getDefault(),styleName:e.styleName,name:e.name});i&&i.messages&&i.messages.push(new Es("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:e}))}writeStyleOrigin(e,t,i,r){if(e.styleUrl&&e.name){let s=s_(e.styleUrl,r);On(s)&&(s=uo(s)),t.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&r&&r.portal&&!pV(e.portal.restUrl,r.portal.restUrl)?r&&r.messages&&r.messages.push(new Es("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof al||e&&a8[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};c([d({json:{read:!1,write:!1}})],Aa.prototype,"color",null),c([d({type:Sre,nonNullable:!0,json:{write:!0}}),gt(tV)],Aa.prototype,"symbolLayers",null),c([d({type:uv})],Aa.prototype,"styleOrigin",void 0),c([xe("styleOrigin")],Aa.prototype,"readStyleOrigin",null),c([$e("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Aa.prototype,"writeStyleOrigin",null),c([d({type:jh,json:{read:!1}})],Aa.prototype,"thumbnail",void 0),c([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Aa.prototype,"type",void 0),Aa=c([O("esri.symbols.Symbol3D")],Aa);const dy=Aa;let Dg=class extends ue{constructor(e){super(e),this.visible=!0}clone(){}};c([d({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],Dg.prototype,"type",void 0),c([d({readOnly:!0})],Dg.prototype,"visible",void 0),Dg=c([O("esri.symbols.callouts.Callout3D")],Dg);const l8=Dg;var l2;let E0=l2=class extends ue{constructor(){super(...arguments),this.color=new Oe("white")}clone(){return new l2({color:K(this.color)})}};c([d(rd)],E0.prototype,"color",void 0),E0=l2=c([O("esri.symbols.callouts.LineCallout3DBorder")],E0);const c8=E0;Object.freeze({__proto__:null,get LineCallout3DBorder(){return E0},default:c8});var c2;let Wc=c2=class extends l8{constructor(e){super(e),this.type="line",this.color=new Oe([0,0,0,1]),this.size=il(1),this.border=null}get visible(){return this.size>0&&N(this.color)&&this.color.a>0}clone(){return new c2({color:K(this.color),size:this.size,border:K(this.border)})}};c([Ue({line:"line"},{readOnly:!0})],Wc.prototype,"type",void 0),c([d(rd)],Wc.prototype,"color",void 0),c([d(rl)],Wc.prototype,"size",void 0),c([d({type:c8,json:{write:!0}})],Wc.prototype,"border",void 0),c([d({readOnly:!0})],Wc.prototype,"visible",null),Wc=c2=c([O("esri.symbols.callouts.LineCallout3D")],Wc);const Ire=Wc;function kk(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength<=0)}function u8(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!kk(e)}const d8={types:{key:"type",base:l8,typeMap:{line:Ire}},json:{write:!0}};var u2;let yh=u2=class extends ue{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new u2({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};c([d(rl)],yh.prototype,"screenLength",void 0),c([d({type:Number,json:{write:!0,default:0}})],yh.prototype,"minWorldLength",void 0),c([d({type:Number,json:{write:!0}})],yh.prototype,"maxWorldLength",void 0),yh=u2=c([O("esri.symbols.support.Symbol3DVerticalOffset")],yh);var jw;const h8=ke.ofType({base:null,key:"type",typeMap:{text:uy}});let Jc=jw=class extends dy{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new h8,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return u8(this)}hasVisibleVerticalOffset(){return kk(this)}clone(){return new jw({styleOrigin:K(this.styleOrigin),symbolLayers:K(this.symbolLayers),thumbnail:K(this.thumbnail),callout:K(this.callout),verticalOffset:K(this.verticalOffset)})}static fromTextSymbol(e){return new jw({symbolLayers:[uy.fromTextSymbol(e)]})}};c([d({type:yh,json:{write:!0}})],Jc.prototype,"verticalOffset",void 0),c([d(d8)],Jc.prototype,"callout",void 0),c([d({json:{read:!1,write:!1}})],Jc.prototype,"styleOrigin",void 0),c([d({type:h8})],Jc.prototype,"symbolLayers",void 0),c([Ue({LabelSymbol3D:"label-3d"},{readOnly:!0})],Jc.prototype,"type",void 0),Jc=jw=c([O("esri.symbols.LabelSymbol3D")],Jc);const iI=Jc;var zw;const p8=ke.ofType({base:null,key:"type",typeMap:{line:cy,path:Mk}}),Tre=ke.ofType({base:null,key:"type",typeMap:{line:cy,path:Mk}});let jg=zw=class extends dy{constructor(e){super(e),this.symbolLayers=new p8,this.type="line-3d"}clone(){return new zw({styleOrigin:K(this.styleOrigin),symbolLayers:K(this.symbolLayers),thumbnail:K(this.thumbnail)})}static fromSimpleLineSymbol(e){return new zw({symbolLayers:[cy.fromSimpleLineSymbol(e)]})}};c([d({type:p8,json:{type:Tre}})],jg.prototype,"symbolLayers",void 0),c([Ue({LineSymbol3D:"line-3d"},{readOnly:!0})],jg.prototype,"type",void 0),jg=zw=c([O("esri.symbols.LineSymbol3D")],jg);const rI=jg;let Zc=class extends en{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};c([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Zc.prototype,"angle",void 0),c([d({type:["simple-marker","picture-marker"],readOnly:!0})],Zc.prototype,"type",void 0),c([d({type:Number,cast:Nt,json:{write:!0}})],Zc.prototype,"xoffset",void 0),c([d({type:Number,cast:Nt,json:{write:!0}})],Zc.prototype,"yoffset",void 0),c([d({type:Number,cast:e=>e==="auto"?e:Nt(e),json:{write:!0}})],Zc.prototype,"size",void 0),Zc=c([O("esri.symbols.MarkerSymbol")],Zc);const f8=Zc;var d2;const m8=ke.ofType({base:null,key:"type",typeMap:{fill:r_}});let zg=d2=class extends dy{constructor(e){super(e),this.symbolLayers=new m8,this.type="mesh-3d"}clone(){return new d2({styleOrigin:K(this.styleOrigin),symbolLayers:K(this.symbolLayers),thumbnail:K(this.thumbnail)})}};c([d({type:m8})],zg.prototype,"symbolLayers",void 0),c([Ue({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],zg.prototype,"type",void 0),zg=d2=c([O("esri.symbols.MeshSymbol3D")],zg);const Pk=zg;function $re(e,t,i){return t.imageData?yV({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):y8(t.url,i)}function y8(e,t){return Ere(t)&&!On(e)&&t.layer.parsedUrl?Ku(t.layer.parsedUrl.path,"images",e):ed(e,t)}function Cre(e,t,i,r){if(fp(e)){const s=mV(e);t.contentType=s.mediaType,t.imageData=s.data,i&&i.imageData===t.imageData&&i.url&&sp(i.url,t,"url",r)}else sp(e,t,"url",r)}const g8={json:{read:{source:["imageData","url"],reader:$re},write:{writer(e,t,i,r){Cre(e,t,this.source,r)}}}},v8={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=y8(t.url,i)),r}}}};function Ere(e){return e&&(e.origin==="service"||e.origin==="portal-item")&&e.layer&&(e.layer.type==="feature"||e.layer.type==="stream")}var h2;let Kn=h2=class extends X6{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t&&(s.outline=t),i!=null&&(s.width=Nt(i)),r!=null&&(s.height=Nt(r)),s}clone(){const e=new h2({color:K(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",K(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};c([Ue({esriPFS:"picture-fill"},{readOnly:!0})],Kn.prototype,"type",void 0),c([d(g8)],Kn.prototype,"url",void 0),c([d({type:Number,json:{write:!0}})],Kn.prototype,"xscale",void 0),c([d({type:Number,json:{write:!0}})],Kn.prototype,"yscale",void 0),c([d({type:Number,cast:Nt,json:{write:!0}})],Kn.prototype,"width",void 0),c([d({type:Number,cast:Nt,json:{write:!0}})],Kn.prototype,"height",void 0),c([d({type:Number,cast:Nt,json:{write:!0}})],Kn.prototype,"xoffset",void 0),c([d({type:Number,cast:Nt,json:{write:!0}})],Kn.prototype,"yoffset",void 0),c([d(v8)],Kn.prototype,"source",void 0),Kn=h2=c([O("esri.symbols.PictureFillSymbol")],Kn);const _8=Kn;var p2;let Do=p2=class extends f8{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=Nt(t)),i!=null&&(r.height=Nt(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new p2({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",K(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};c([d({json:{write:!1}})],Do.prototype,"color",void 0),c([Ue({esriPMS:"picture-marker"},{readOnly:!0})],Do.prototype,"type",void 0),c([d(g8)],Do.prototype,"url",void 0),c([d(v8)],Do.prototype,"source",void 0),c([d({type:Number,cast:Nt,json:{write:!0}})],Do.prototype,"height",void 0),c([xe("height",["height","size"])],Do.prototype,"readHeight",null),c([d({type:Number,cast:Nt,json:{write:!0}})],Do.prototype,"width",void 0),c([d({json:{write:!1}})],Do.prototype,"size",void 0),Do=p2=c([O("esri.symbols.PictureMarkerSymbol")],Do);const n_=Do;var Yc;const b8=ke.ofType({base:null,key:"type",typeMap:{icon:ju,object:tI,text:uy}});let Bd=Yc=class extends dy{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new b8,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return u8(this)}hasVisibleVerticalOffset(){return kk(this)}clone(){return new Yc({verticalOffset:K(this.verticalOffset),callout:K(this.callout),styleOrigin:K(this.styleOrigin),symbolLayers:K(this.symbolLayers),thumbnail:K(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Yc({symbolLayers:[ju.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new Yc({symbolLayers:[ju.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var t,i;return((t=e.data)==null||(i=t.symbol)==null?void 0:i.type)!=="CIMPointSymbol"?null:e.data.symbol.callout?new Yc({symbolLayers:[ju.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new Yc({symbolLayers:[ju.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new Yc({symbolLayers:[uy.fromTextSymbol(e)]})}};c([d({type:yh,json:{write:!0}})],Bd.prototype,"verticalOffset",void 0),c([d(d8)],Bd.prototype,"callout",void 0),c([d({type:b8,json:{origins:{"web-scene":{write:!0}}}})],Bd.prototype,"symbolLayers",void 0),c([Ue({PointSymbol3D:"point-3d"},{readOnly:!0})],Bd.prototype,"type",void 0),Bd=Yc=c([O("esri.symbols.PointSymbol3D")],Bd);const Sh=Bd;var Vg;const w8=ke.ofType({base:null,key:"type",typeMap:{extrude:Ik,fill:r_,icon:ju,line:cy,object:tI,text:uy,water:Ok}}),Are=ke.ofType({base:null,key:"type",typeMap:{extrude:Ik,fill:r_,icon:ju,line:cy,object:tI,water:Ok}});let cf=Vg=class extends dy{constructor(e){super(e),this.symbolLayers=new w8,this.type="polygon-3d"}writeSymbolLayers(e,t,i,r){const s=e.filter(n=>n.type!=="text");if(r&&r.messages&&s.length<e.length){const n=e.find(o=>o.type==="text");r.messages.push(new B("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:n}))}t[i]=s.map(n=>n.write({},r)).toArray()}clone(){return new Vg({styleOrigin:K(this.styleOrigin),symbolLayers:K(this.symbolLayers),thumbnail:K(this.thumbnail)})}static fromJSON(e){const t=new Vg;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.getItemAt(0).type==="fill"&&t.symbolLayers.getItemAt(1).type==="line"){const i=t.symbolLayers.getItemAt(0),r=t.symbolLayers.getItemAt(1);!r.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:N(r.material)?r.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Vg({symbolLayers:[r_.fromSimpleFillSymbol(e)]})}};c([d({type:w8,json:{type:Are}})],cf.prototype,"symbolLayers",void 0),c([$e("web-scene","symbolLayers")],cf.prototype,"writeSymbolLayers",null),c([Ue({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],cf.prototype,"type",void 0),cf=Vg=c([O("esri.symbols.PolygonSymbol3D")],cf);const o_=cf;var f2;const VT=new rt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let qd=f2=class extends X6{constructor(...e){super(...e),this.color=new Oe([0,0,0,.25]),this.outline=new Nn,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new f2({color:K(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};c([d()],qd.prototype,"color",void 0),c([d()],qd.prototype,"outline",void 0),c([Ue({esriSFS:"simple-fill"},{readOnly:!0})],qd.prototype,"type",void 0),c([d({type:VT.apiValues,json:{read:VT.read,write:VT.write}})],qd.prototype,"style",void 0),qd=f2=c([O("esri.symbols.SimpleFillSymbol")],qd);const cl=qd;var m2;const UT=new rt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Ma=m2=class extends f8{constructor(...e){super(...e),this.color=new Oe([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Nn}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t!=null&&(s.size=Nt(t)),i&&(s.outline=i),r&&(s.color=r),s}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new m2({angle:this.angle,color:K(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};c([d()],Ma.prototype,"color",void 0),c([$e("color")],Ma.prototype,"writeColor",null),c([Ue({esriSMS:"simple-marker"},{readOnly:!0})],Ma.prototype,"type",void 0),c([d()],Ma.prototype,"size",void 0),c([d({type:UT.apiValues,json:{read:UT.read,write:UT.write}})],Ma.prototype,"style",void 0),c([d({type:String,json:{write:!0}})],Ma.prototype,"path",null),c([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Nn}},json:{default:null,write:!0}})],Ma.prototype,"outline",void 0),Ma=m2=c([O("esri.symbols.SimpleMarkerSymbol")],Ma);const sd=Ma;var y2;let di=y2=class extends en{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new eI,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}castLineWidth(e){return Nt(e)}writeLineHeight(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}clone(){return new y2({angle:this.angle,backgroundColor:K(this.backgroundColor),borderLineColor:K(this.borderLineColor),borderLineSize:this.borderLineSize,color:K(this.color),font:this.font&&this.font.clone(),haloColor:K(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};c([d({type:Oe,json:{write:!0}})],di.prototype,"backgroundColor",void 0),c([d({type:Oe,json:{write:!0}})],di.prototype,"borderLineColor",void 0),c([d({type:Number,json:{write:!0}})],di.prototype,"borderLineSize",void 0),c([d({type:eI,json:{write:!0}})],di.prototype,"font",void 0),c([d(be(k({},lre),{json:{write:!0}}))],di.prototype,"horizontalAlignment",void 0),c([d({type:Boolean,json:{write:!0}})],di.prototype,"kerning",void 0),c([d({type:Oe,json:{write:!0}})],di.prototype,"haloColor",void 0),c([d({type:Number,cast:Nt,json:{write:!0}})],di.prototype,"haloSize",void 0),c([d({type:Boolean,json:{write:!0}})],di.prototype,"rightToLeft",void 0),c([d({type:Boolean,json:{write:!0}})],di.prototype,"rotated",void 0),c([d({type:String,json:{write:!0}})],di.prototype,"text",void 0),c([Ue({esriTS:"text"},{readOnly:!0})],di.prototype,"type",void 0),c([d(be(k({},o8),{json:{write:!0}}))],di.prototype,"verticalAlignment",void 0),c([d({type:Number,cast:Nt,json:{write:!0}})],di.prototype,"xoffset",void 0),c([d({type:Number,cast:Nt,json:{write:!0}})],di.prototype,"yoffset",void 0),c([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],di.prototype,"angle",void 0),c([d({type:Number,json:{write:!0}})],di.prototype,"width",void 0),c([d({type:Number})],di.prototype,"lineWidth",void 0),c([$e("lineWidth")],di.prototype,"writeLineWidth",null),c([gt("lineWidth")],di.prototype,"castLineWidth",null),c([d(n8)],di.prototype,"lineHeight",void 0),c([$e("lineHeight")],di.prototype,"writeLineHeight",null),di=y2=c([O("esri.symbols.TextSymbol")],di);const gp=di;var g2;const Mre=fe.getLogger("esri.symbols.WebStyleSymbol");let Oa=g2=class extends en{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}read(e,t){this.portal=t?t.portal:void 0,super.read(e,t)}clone(){return new g2({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=await Ore();Gi(t);const r=i.resolveWebStyleSymbol(this,{portal:this.portal},e,t);return r.catch(s=>{Mre.error("#fetchSymbol()","Failed to create symbol from style",s)}),r}};function Ore(){return se(()=>Promise.resolve().then(function(){return EIe}),void 0)}c([d({json:{write:!1}})],Oa.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],Oa.prototype,"styleName",void 0),c([d({type:zr,json:{write:!1}})],Oa.prototype,"portal",void 0),c([d({type:String,json:{read:Ak,write:sp}})],Oa.prototype,"styleUrl",void 0),c([d({type:jh,json:{read:!1}})],Oa.prototype,"thumbnail",void 0),c([d({type:String,json:{write:!0}})],Oa.prototype,"name",void 0),c([Ue({styleSymbolReference:"web-style"},{readOnly:!0})],Oa.prototype,"type",void 0),Oa=g2=c([O("esri.symbols.WebStyleSymbol")],Oa);const vp=Oa;function Lk(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function pc(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const zh={base:en,key:"type",typeMap:{"simple-fill":cl,"picture-fill":_8,"picture-marker":n_,"simple-line":Nn,"simple-marker":sd,text:gp,"label-3d":iI,"line-3d":rI,"mesh-3d":Pk,"point-3d":Sh,"polygon-3d":o_,"web-style":vp,cim:i_},errorContext:"symbol"},kre={base:en,key:"type",typeMap:{"picture-marker":n_,"simple-marker":sd,text:gp,"web-style":vp,cim:i_},errorContext:"symbol"},Pre=ty({types:zh}),S8={base:en,key:"type",typeMap:{"simple-fill":cl,"picture-fill":_8,"picture-marker":n_,"simple-line":Nn,"simple-marker":sd,text:gp,"line-3d":rI,"mesh-3d":Pk,"point-3d":Sh,"polygon-3d":o_,"web-style":vp,cim:i_},errorContext:"symbol"},Lre={base:en,key:"type",typeMap:{text:gp,"label-3d":iI},errorContext:"symbol"},z3={base:en,key:"type",typeMap:{"line-3d":rI,"mesh-3d":Pk,"point-3d":Sh,"polygon-3d":o_,"web-style":vp,cim:i_},errorContext:"symbol"},Rre={base:en,key:"type",typeMap:{"label-3d":iI},errorContext:"symbol"},x8=el(zh);function Fre(e){if(!e)return null;const t={};for(const i in e){const r=As(e[i]);r&&(t[i]=r)}return Object.keys(t).length!==0?t:null}function Nre(e){if(!N(e))return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return Object.keys(t).length!==0?t:null}let Rs=class extends ll(ue){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:lm(),configurable:!0})}normalizeCtorArgs(e,t,i,r){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:r}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&N(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:Nre(this.aggregateGeometries),geometry:N(this.geometry)?this.geometry.toJSON():null,symbol:N(this.symbol)?this.symbol.toJSON():null,attributes:k({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){N(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,t,i,r){if(!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:t,newValue:i};e==="attributes"&&(s.attributeName=r),this.layer.graphicChanged(s)}};c([d({value:null,json:{read:Fre}})],Rs.prototype,"aggregateGeometries",null),c([d({value:null})],Rs.prototype,"attributes",null),c([d({value:null,types:mp,json:{read:As}})],Rs.prototype,"geometry",null),c([d({type:Boolean})],Rs.prototype,"isAggregate",void 0),c([d({clonable:"reference"})],Rs.prototype,"layer",void 0),c([d({type:ly})],Rs.prototype,"popupTemplate",void 0),c([d({clonable:"reference"})],Rs.prototype,"sourceLayer",void 0),c([d({value:null,types:zh})],Rs.prototype,"symbol",null),c([d({type:Boolean,value:!0})],Rs.prototype,"visible",null),Rs=c([O("esri.Graphic")],Rs),function(e){e.generateUID=lm}(Rs||(Rs={}));const xr=Rs;class Rk{constructor(t,i){this.min=t,this.max=i,this.range=i-t}ndiff(t,i=0){return Math.ceil((t-i)/this.range)*this.range+i}_normalize(t,i,r,s=0,n=!1){return(r-=s)<t?r+=this.ndiff(t-r):r>i&&(r-=this.ndiff(r-i)),n&&r===i&&(r=t),r+s}normalize(t,i=0,r=!1){return this._normalize(this.min,this.max,t,i,r)}clamp(t,i=0){return fo(t-i,this.min,this.max)+i}monotonic(t,i,r){return t<i?i:i+this.ndiff(t-i,r)}minimalMonotonic(t,i,r){return this._normalize(t,t+this.range,i,r)}center(t,i,r){return i=this.monotonic(t,i,r),this.normalize((t+i)/2,r)}diff(t,i,r){return this.monotonic(t,i,r)-t}shortestSignedDiff(t,i){t=this.normalize(t);const r=(i=this.normalize(i))-t,s=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(r)<Math.abs(s)?r:s}contains(t,i,r){return i=this.minimalMonotonic(t,i),(r=this.minimalMonotonic(t,r))>t&&r<i}}function Fk(e){for(const t in e){const i=e[t];i instanceof Function&&(e[t]=i.bind(e))}return e}Fk(new Rk(0,2*Math.PI));Fk(new Rk(-Math.PI,Math.PI));const Dre=Fk(new Rk(0,360));let Ol=class extends ll(ue){constructor(...e){super(...e),this.position=new Le([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,i,r){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return t!=null&&(s.heading=t),i!=null&&(s.tilt=i),r!=null&&(s.fov=r),s}return e}writePosition(e,t,i,r){const s=e.clone();s.x=oo(e.x||0),s.y=oo(e.y||0),s.z=e.hasZ?oo(e.z||0):e.z,t[i]=s.write({},r)}readPosition(e,t){const i=new Le;return i.read(e,t),i.x=oo(i.x||0),i.y=oo(i.y||0),i.z=i.hasZ?oo(i.z||0):i.z,i}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};c([d({type:Le,json:{write:{isRequired:!0}}})],Ol.prototype,"position",void 0),c([$e("position")],Ol.prototype,"writePosition",null),c([xe("position")],Ol.prototype,"readPosition",null),c([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),gt(e=>Dre.normalize(oo(e)))],Ol.prototype,"heading",void 0),c([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),gt(e=>fo(oo(e),-180,180))],Ol.prototype,"tilt",void 0),c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Ol.prototype,"fov",void 0),Ol=c([O("esri.Camera")],Ol);const jre=Ol;var v2;let Kc=v2=class extends ue{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new v2({rotation:this.rotation,scale:this.scale,targetGeometry:N(this.targetGeometry)?this.targetGeometry.clone():null,camera:N(this.camera)?this.camera.clone():null})}};function BT(){return{enabled:!this.camera}}c([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:BT}}}}})],Kc.prototype,"rotation",void 0),c([gt("rotation")],Kc.prototype,"castRotation",null),c([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:BT}}}}})],Kc.prototype,"scale",void 0),c([d({types:mp,json:{read:As,write:!0,origins:{"web-scene":{read:As,write:{overridePolicy:BT}}}}})],Kc.prototype,"targetGeometry",void 0),c([d({type:jre,json:{write:!0}})],Kc.prototype,"camera",void 0),Kc=v2=c([O("esri.Viewpoint")],Kc);const Ka=Kc;function GOe(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function HOe(e,t){for(const i of e)if(i!=null&&t(i))return i}function V3(e){return e!=null&&typeof e[Symbol.iterator]=="function"}var $s;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})($s||($s={}));let zre=0;function I8(){return zre++}function Vre(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function cS(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function T8(e,t,i,r){if(t.type===$s.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==$s.INVOKE&&t.type!==$s.RESPONSE)return void e.postMessage(t);let s;Vre(i)?(s=U3(i.transferList),t.data=i.result):(s=U3(r),t.data=i),s?e.postMessage(t,s):e.postMessage(t)}function dv(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function U3(e){if(!e||!e.length)return null;if(re("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!Ure(i));return t.length?t:null}function Ure(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}const Bre={statsWorker:()=>se(()=>import("./statsWorker.f4d6dfd0.js"),["assets/statsWorker.f4d6dfd0.js","assets/utils.80b0e4c7.js","assets/ClassBreaksDefinition.723cff01.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]),geometryEngineWorker:()=>se(()=>import("./geometryEngineWorker.49a69fdc.js"),["assets/geometryEngineWorker.49a69fdc.js","assets/geometryEngineJSON.1865e318.js","assets/geometryEngineBase.40db0853.js","assets/json.da51edc4.js"]),CSVSourceWorker:()=>se(()=>import("./CSVSourceWorker.16114f83.js"),["assets/CSVSourceWorker.16114f83.js","assets/json.da51edc4.js","assets/FeatureStore.60d6ca2b.js","assets/PooledRBush.ba079a73.js","assets/projectionSupport.66acda0b.js","assets/QueryEngine.9a552d99.js","assets/WhereClause.2f3ccd67.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/QueryEngineCapabilities.650d7541.js","assets/quantizationUtils.48cd94ed.js","assets/utils.80b0e4c7.js","assets/ClassBreaksDefinition.723cff01.js","assets/spatialQuerySupport.aeffcc70.js","assets/clientSideDefaults.9630694d.js"]),EdgeProcessingWorker:()=>se(()=>import("./EdgeProcessingWorker.28c2453a.js"),["assets/EdgeProcessingWorker.28c2453a.js","assets/deduplicate.5321880a.js","assets/BufferView.1e32fae3.js","assets/enums.457e23f9.js","assets/VertexElementDescriptor.0406f2d4.js","assets/InterleavedLayout.20aae7f8.js","assets/types.4f965df2.js","assets/VertexAttribute.ebaf629c.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]),ElevationSamplerWorker:()=>se(()=>import("./ElevationSamplerWorker.76141f13.js"),["assets/ElevationSamplerWorker.76141f13.js","assets/PooledRBush.ba079a73.js","assets/georeference.0bf97b52.js","assets/quat.65fc175c.js","assets/vec33.9f4eafd3.js","assets/BufferView.1e32fae3.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]),FeatureServiceSnappingSourceWorker:()=>se(()=>import("./FeatureServiceSnappingSourceWorker.a52169c5.js"),["assets/FeatureServiceSnappingSourceWorker.a52169c5.js","assets/FeatureStore.60d6ca2b.js","assets/PooledRBush.ba079a73.js","assets/projectionSupport.66acda0b.js","assets/json.da51edc4.js","assets/QueryEngine.9a552d99.js","assets/WhereClause.2f3ccd67.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/QueryEngineCapabilities.650d7541.js","assets/quantizationUtils.48cd94ed.js","assets/utils.80b0e4c7.js","assets/ClassBreaksDefinition.723cff01.js","assets/spatialQuerySupport.aeffcc70.js"]),GeoJSONSourceWorker:()=>se(()=>import("./GeoJSONSourceWorker.cdf1d78b.js"),["assets/GeoJSONSourceWorker.cdf1d78b.js","assets/FeatureStore.60d6ca2b.js","assets/PooledRBush.ba079a73.js","assets/projectionSupport.66acda0b.js","assets/json.da51edc4.js","assets/QueryEngine.9a552d99.js","assets/WhereClause.2f3ccd67.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/QueryEngineCapabilities.650d7541.js","assets/quantizationUtils.48cd94ed.js","assets/utils.80b0e4c7.js","assets/ClassBreaksDefinition.723cff01.js","assets/spatialQuerySupport.aeffcc70.js","assets/geojson.9b2f9361.js","assets/clientSideDefaults.9630694d.js","assets/sourceUtils.cd4bd573.js"]),LercWorker:()=>se(()=>import("./LercWorker.e7de39b4.js"),["assets/LercWorker.e7de39b4.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]),MemorySourceWorker:()=>se(()=>import("./MemorySourceWorker.1d3e10bc.js"),["assets/MemorySourceWorker.1d3e10bc.js","assets/objectIdUtils.924cdb7f.js","assets/FeatureStore.60d6ca2b.js","assets/PooledRBush.ba079a73.js","assets/projectionSupport.66acda0b.js","assets/json.da51edc4.js","assets/QueryEngine.9a552d99.js","assets/WhereClause.2f3ccd67.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/QueryEngineCapabilities.650d7541.js","assets/quantizationUtils.48cd94ed.js","assets/utils.80b0e4c7.js","assets/ClassBreaksDefinition.723cff01.js","assets/spatialQuerySupport.aeffcc70.js","assets/clientSideDefaults.9630694d.js","assets/sourceUtils.cd4bd573.js"]),PBFDecoderWorker:()=>se(()=>import("./PBFDecoderWorker.74ff1a0e.js"),["assets/PBFDecoderWorker.74ff1a0e.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]),Pipeline:()=>se(()=>import("./Pipeline.9a72d435.js"),["assets/Pipeline.9a72d435.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/QueryEngine.9a552d99.js","assets/WhereClause.2f3ccd67.js","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/projectionSupport.66acda0b.js","assets/json.da51edc4.js","assets/QueryEngineCapabilities.650d7541.js","assets/quantizationUtils.48cd94ed.js","assets/utils.80b0e4c7.js","assets/ClassBreaksDefinition.723cff01.js","assets/spatialQuerySupport.aeffcc70.js","assets/FeatureStore2D.6ed2f3fd.js","assets/CircularArray.e6c8d66c.js","assets/ComputedAttributeStorage.2a68a55c.js","assets/enums.84480fc7.js","assets/visualVariablesUtils.65d2f75d.js","assets/number.dc47462b.js","assets/Utils.e0214b13.js","assets/enums.457e23f9.js","assets/Texture.df7d53ef.js","assets/VertexElementDescriptor.0406f2d4.js","assets/visualVariablesUtils.54823ca9.js","assets/ogcFeatureUtils.f31af8ed.js","assets/geojson.9b2f9361.js","assets/clientSideDefaults.9630694d.js"]),PointCloudWorker:()=>se(()=>import("./PointCloudWorker.c41ab09c.js"),["assets/PointCloudWorker.c41ab09c.js","assets/quat.65fc175c.js","assets/vec3f32.8179e08f.js","assets/PointCloudUniqueValueRenderer.7778d4c5.js","assets/VertexAttribute.ebaf629c.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]),RasterWorker:()=>se(()=>import("./RasterWorker.1c6e9e8e.js"),["assets/RasterWorker.1c6e9e8e.js","assets/pixelUtils.9fff4c99.js","assets/RasterSymbolizer.39b5fa0c.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/rasterProjectionHelper.2cc83b03.js","assets/dataUtils.bafd031e.js","assets/utils.34146b36.js","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]),SceneLayerWorker:()=>se(()=>import("./SceneLayerWorker.a709f200.js"),["assets/SceneLayerWorker.a709f200.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/vec4f64.a3e91e77.js","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]),WFSSourceWorker:()=>se(()=>import("./WFSSourceWorker.1aa4b661.js"),["assets/WFSSourceWorker.1aa4b661.js","assets/FeatureStore.60d6ca2b.js","assets/PooledRBush.ba079a73.js","assets/projectionSupport.66acda0b.js","assets/json.da51edc4.js","assets/QueryEngine.9a552d99.js","assets/WhereClause.2f3ccd67.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/QueryEngineCapabilities.650d7541.js","assets/quantizationUtils.48cd94ed.js","assets/utils.80b0e4c7.js","assets/ClassBreaksDefinition.723cff01.js","assets/spatialQuerySupport.aeffcc70.js","assets/geojson.9b2f9361.js","assets/sourceUtils.cd4bd573.js","assets/wfsUtils.50213af6.js","assets/xmlUtils.0a9bf91b.js"]),WorkerTileHandler:()=>se(()=>import("./WorkerTileHandler.6b680811.js"),["assets/WorkerTileHandler.6b680811.js","assets/enums.1ba846bb.js","assets/GeometryUtils.e53da643.js","assets/BidiEngine.b9926823.js","assets/config.bd364997.js","assets/StyleDefinition.809d5a5e.js","assets/enums.84480fc7.js","assets/Geometry.e891c191.js","assets/TileClipper.2c69e8d5.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/GeometryUtils.5ea26345.js","assets/StyleRepository.1c171c74.js","assets/enums.457e23f9.js","assets/VertexElementDescriptor.0406f2d4.js","assets/earcut.91e104de.js","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])},{CLOSE:B3,ABORT:q3,INVOKE:G3,RESPONSE:Uy,OPEN_PORT:H3,ON:qre}=$s;class Gre{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===$s.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class Bs{constructor(t,i){this._port=t,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new Gre(r=>this._onInvokeMessage(r)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(t){const i=new MessageChannel;let r;r=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const s=new Bs(i.port1,{channel:i,client:r});return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=s),Bs.clients.set(s,r),i.port2}static loadWorker(t){const i=Bre[t];return i?i():Promise.resolve(null)}close(){this._post({type:B3}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,r){const s=r&&r.signal,n=r&&r.transferList;if(!this._port)return Promise.reject(new B("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const o=I8();return new Promise((a,l)=>{const u=Rx(s,()=>{var f;const y=this._outJobs.get(o);y&&(this._outJobs.delete(o),(f=y.abortHandle)==null||f.remove(),this._post({type:q3,jobId:o}),l(qi()))}),h={resolve:a,reject:l,abortHandle:u,debugInfo:t};this._outJobs.set(o,h),this._post({type:G3,jobId:o,methodName:t,abortable:s!=null},i,n)})}on(t,i){const r=new MessageChannel;function s(n){i(n.data)}return this._port.postMessage({type:$s.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",s),r.port1.start(),{remove(){r.port1.postMessage({type:$s.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",s)}}}openPort(){const t=new MessageChannel;return this._post({type:H3,port:t.port2}),t.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{var i;(i=t.abortHandle)==null||i.remove(),t.reject(qi(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(t){N(this._schedule)?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const i=dv(t);if(i)switch(i.type){case Uy:this._onResponseMessage(i);break;case G3:this._invokeQueue.push(i);break;case q3:this._onAbortMessage(i);break;case B3:this._onCloseMessage();break;case H3:this._onOpenPortMessage(i);break;case qre:this._onOnMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,s=i.get(r);this._invokeQueue.push(t),s&&(s.controller&&s.controller.abort(),i.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Bs.clients.get(this)===t&&t.destroy(),Bs.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:r,data:s,abortable:n}=t,o=n?new AbortController:null,a=this._inJobs;let l,u=this._client,h=u[i];try{if(!h&&i&&i.indexOf(".")!==-1){const f=i.split(".");for(let y=0;y<f.length-1;y++)u=u[f[y]],h=u[f[y+1]]}if(typeof h!="function")throw new TypeError(`${i} is not a function`);l=h.call(u,s,{client:this,signal:o?o.signal:null})}catch(f){return void this._post({type:Uy,jobId:r,error:cS(f)})}yc(l)?(a.set(r,{controller:o,promise:l}),l.then(f=>{a.has(r)&&(a.delete(r),this._post({type:Uy,jobId:r},f))},f=>{a.has(r)&&(a.delete(r),_o(f)||this._post({type:Uy,jobId:r,error:cS(f||{message:`Error encountered at method ${i}`})}))})):this._post({type:Uy,jobId:r},l)}_onOpenPortMessage(t){new Bs(t.port,{client:this._client})}_onOnMessage(t){const{port:i}=t,r=this._client.on(t.eventType,n=>{i.postMessage(n)}),s=sa(t.port,"message",n=>{dv(n).type===$s.CLOSE&&(s.remove(),r.remove(),i.close())})}_onResponseMessage(t){var i;const{jobId:r,error:s,data:n}=t,o=this._outJobs;if(!o.has(r))return;const a=o.get(r);o.delete(r),(i=a.abortHandle)==null||i.remove(),s?a.reject(B.fromJSON(JSON.parse(s))):a.resolve(n)}_post(t,i,r){return T8(this._port,t,i,r)}}Bs.kernelInfo={revision:xV,version:IV,buildDate:SV},Bs.clients=new Map;const Hre=fe.getLogger("esri.core.workers.Connection");class Wre{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,i){return new Promise((r,s)=>{let n=!0;const o=a=>{Gi(i.signal),n&&(n=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length;for(let a=0;a<t.length;++a){const l=t[a];yc(l)?this._clientPromises[a]=l.then(u=>(this._clients[a]=new Bs(u,i),o(r),this._clients[a]),()=>(o(s),null)):(this._clients[a]=new Bs(l,i),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(t,i,r){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];s[n]=o.then(a=>a.invoke(t,i,r))}return s}close(){for(const t of this._clientPromises)t.then(i=>i.close());this._clients.length=0,this._clientPromises.length=0}getAvailableClient(){let t;for(let i=0;i<this._clients.length;++i){const r=this._clients[i];if(r){if(!r.isBusy())return Promise.resolve(r)}else t=t||[],t.push(this._clientPromises[i])}return t?Promise.race(t):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}invoke(t,i,r){let s=null;return Array.isArray(r)?(Hre.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),s={transferList:r}):s=r,this.closed?Promise.reject(new Error("Connection closed")):this.getAvailableClient().then(n=>n.invoke(t,i,s))}on(t,i){return Promise.all(this._clientPromises).then(()=>Mx(this._clients.map(r=>r.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(n=>{i[s]=n.openPort(),--r==0&&t(i)})})}get test(){return{numClients:this._clients.length}}}const $8=fe.getLogger("esri.intl");function wr(e,t,i={}){const{format:r={}}=i;return Xa(e,s=>Jre(s,t,r))}function Jre(e,t,i){let r,s;const n=e.indexOf(":");if(n===-1?r=e.trim():(r=e.slice(0,n).trim(),s=e.slice(n+1).trim()),!r)return"";const o=Ja(r,t);if(o==null)return"";const a=i[s]||i[r];return a?Zre(o,a):s?Yre(o,s):Nk(o)}function Zre(e,t){switch(t.type){case"date":return fi(e,t.intlOptions);case"number":return ha(e,t.intlOptions);default:return $8.warn("missing format descriptor for key {key}"),Nk(e)}}function Yre(e,t){switch(t.toLowerCase()){case"dateformat":return fi(e);case"numberformat":return ha(e);default:return $8.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?fi(e):/^numberformat/i.test(t)?ha(e):Nk(e)}}function Nk(e){switch(typeof e){case"string":return e;case"number":return ha(e);case"boolean":return""+e;default:return e instanceof Date?fi(e):""}}async function Kre(e,t,i,r){const s=t.exec(i);if(!s)throw new B("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const n=s[1]?`${s[1]}/`:"",o=s[2],a=AX(r),l=`${n}${o}.json`,u=a?`${n}${o}_${a}.json`:l;let h;try{h=await W3(e(u))}catch(f){if(u===l)throw new B("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:f});try{h=await W3(e(l))}catch(y){throw new B("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:y})}}return h}async function W3(e){if(N(J3.fetchBundleAsset))return J3.fetchBundleAsset(e);const t=await ft(e,{responseType:"text"});return JSON.parse(t.data)}class Qre{constructor({base:t="",pattern:i,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?n=>new URL(n,new URL(r,window.location.href)).href:r instanceof URL?n=>new URL(n,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,i){return Kre(this.getAssetUrl,this.matcher,t,i)}}function Xre(e){return new Qre(e)}const J3={};EX(Xre({pattern:"esri/",location:It}));const Z3={};function ese(e,t){for(const i of e)if(i.name===t.name)return;e.push(t)}function tse(e){var t;const i={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:k({},e.has),map:k({},e.map),packages:e.packages&&e.packages.concat()||[],paths:k({},e.paths)};return e.hasOwnProperty("async")||(i.async=!0),e.hasOwnProperty("isDebug")||(i.isDebug=!1),e.baseUrl||(i.baseUrl=Z3.baseUrl),(t=Z3.packages)==null||t.forEach(r=>{ese(i.packages,r)}),i}class ise{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>t[i](...r)})}}class Vw{constructor(){this._dispatcher=new ise,this._workerPostMessage({type:$s.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){U1(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,r){this._dispatcher.addEventListener(t,i,r)}removeEventListener(t,i,r){this._dispatcher.removeEventListener(t,i,r)}_workerPostMessage(t){U1(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=dv(t);if(i&&i.type===$s.OPEN){const{modulePath:r,jobId:s}=i;let n=await Bs.loadWorker(r);n||(n=await se(()=>import(r),[]));const o=Bs.connect(n);this._workerPostMessage({type:$s.OPENED,jobId:s,data:o})}}}const _2=fe.getLogger("esri.core.workers"),{HANDSHAKE:rse}=$s,sse='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let ub,db;const Y3="Failed to create Worker. Fallback to execute module in main thread";async function nse(){if(!re("esri-workers")||(re("mozilla"),0))return K3(new Vw);if(!ub&&!db)try{const t=sse.replace('"{CONFIGURATION}"',`'${ose()}'`);ub=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){db=t||{}}let e;if(ub)try{e=new Worker(ub,{name:"esri-worker-"+ase++})}catch{_2.warn(Y3,db),e=new Vw}else _2.warn(Y3,db),e=new Vw;return K3(e)}async function K3(e){return new Promise(t=>{function i(s){const n=dv(s);n&&n.type===rse&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(s){s.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),_2.warn("Failed to create Worker. Fallback to execute module in main thread",s),(e=new Vw).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)})}function ose(){let e;if(Tt.default!=null){const s=k({},Tt);delete s.default,e=JSON.parse(JSON.stringify(s))}else e=JSON.parse(JSON.stringify(Tt));e.assetsPath=An(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=mr(),e.has={"esri-csp-restrictions":re("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":re("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":re("esri-2d-query-centroid-enabled"),"featurelayer-pbf":re("featurelayer-pbf"),"featurelayer-simplify-thresholds":re("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":re("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":re("featurelayer-simplify-mobile-factor"),"esri-atomics":re("esri-atomics"),"esri-shared-array-buffer":re("esri-shared-array-buffer"),"esri-tiles-debug":re("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":re("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":re("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=An(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=An(e.workers.workerPath):e.workers.workerPath=An(It("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Tt.workers.loaderConfig,i=tse({baseUrl:t==null?void 0:t.baseUrl,locale:mr(),has:k({"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1},t==null?void 0:t.has),map:k({},t==null?void 0:t.map),paths:k({},t==null?void 0:t.paths),packages:(t==null?void 0:t.packages)||[]}),r={version:IV,buildDate:SV,revision:xV};return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:r})}let ase=0;const lse=fe.getLogger("esri.core.workers"),{ABORT:Q3,INVOKE:cse,OPEN:use,OPENED:dse,RESPONSE:By}=$s;class Dk{constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),lse.error(r)})}static async create(t){const i=await nse();return new Dk(i,t)}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:r}=i,s=I8();return new Promise((n,o)=>{const a={resolve:n,reject:o,abortHandle:Rx(r,()=>{this._outJobs.delete(s),this._post({type:Q3,jobId:s})})};this._outJobs.set(s,a),this._post({type:use,jobId:s,modulePath:t})})}_onMessage(t){const i=dv(t);if(i)switch(i.type){case dse:this._onOpenedMessage(i);break;case By:this._onResponseMessage(i);break;case Q3:this._onAbortMessage(i);break;case cse:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,s=i.get(r);s&&(s.controller&&s.controller.abort(),i.delete(r))}_onInvokeMessage(t){const{methodName:i,jobId:r,data:s,abortable:n}=t,o=n?new AbortController:null,a=this._inJobs,l=PQ[i];let u;try{if(typeof l!="function")throw new TypeError(`${i} is not a function`);u=l.call(null,s,{signal:o?o.signal:null})}catch(h){return void this._post({type:By,jobId:r,error:cS(h)})}yc(u)?(a.set(r,{controller:o,promise:u}),u.then(h=>{a.has(r)&&(a.delete(r),this._post({type:By,jobId:r},h))},h=>{a.has(r)&&(a.delete(r),h||(h={message:"Error encountered at method"+i}),_o(h)||this._post({type:By,jobId:r,error:cS(h||{message:`Error encountered at method ${i}`})}))})):this._post({type:By,jobId:r},u)}_onOpenedMessage(t){var i;const{jobId:r,data:s}=t,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),(i=n.abortHandle)==null||i.remove(),n.resolve(s))}_onResponseMessage(t){var i;const{jobId:r,error:s,data:n}=t,o=this._outJobs.get(r);o&&(this._outJobs.delete(r),(i=o.abortHandle)==null||i.remove(),s?o.reject(B.fromJSON(JSON.parse(s))):o.resolve(n))}_post(t,i,r){return T8(this.worker,t,i,r)}}let xh=re("esri-workers-debug")?1:re("host-browser")?navigator.hardwareConcurrency-1:0;xh||(xh=re("safari")&&re("mac")||re("trident")?7:2);let X3=0;const Uw=[];function hse(){C8()}async function hb(e,t){const i=new Wre;return await i.open(e,t),i}async function pse(e,t={}){if(typeof e!="string")throw new B("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(re("host-webworker")&&!re("esri-workers")&&(i="local"),i==="local"){let r=await Bs.loadWorker(e);r||(r=await se(()=>import(e),[])),Gi(t.signal);const s=t.client||r;return hb([Bs.connect(r)],be(k({},t),{client:s}))}if(await C8(),Gi(t.signal),i==="dedicated"){const r=X3++%xh;return hb([await Uw[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,xh);if(r<xh){const s=new Array(r);for(let n=0;n<r;++n){const o=X3++%xh;s[n]=Uw[o].open(e,t)}return hb(s,t)}}return hb(Uw.map(r=>r.open(e,t)),t)}let pb=null;async function C8(){if(pb)return pb;new AbortController;const e=[];for(let t=0;t<xh;t++){const i=Dk.create(t).then(r=>(Uw[t]=r,r));e.push(i)}return pb=Promise.all(e),pb}function jk(e){return new Xe({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const E8=jk(li),uS=jk(sc),dS=jk(Qu),fse=new Xe({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${li.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function WOe(e){return e&&(qx(e)||e===uS)?uS:e&&(Gx(e)||e===dS)?dS:E8}function mse(e){return e&&(qx(e)||e===uS)?sc:e&&(Gx(e)||e===dS)?Qu:li}function JOe(e){return KO(e)?sc:QO(e)?Qu:li}const A8=39.37,yse=li.radius*Math.PI/200,M8=/UNIT\[([^\]]+)\]\]$/i,Vh=A,O8=/UNIT\[([^\]]+)\]/i,gse=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),vse=Br()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),_a=e=>e*e,Ac=e=>e*e*e,hv={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:_a(.001)},"square-centimeters":{inBaseUnits:_a(.01)},"square-decimeters":{inBaseUnits:_a(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:_a(1e3)},"square-inches":{inBaseUnits:_a(.0254)},"square-feet":{inBaseUnits:_a(.3048)},"square-yards":{inBaseUnits:_a(.9144)},"square-miles":{inBaseUnits:_a(1609.344)},"square-us-feet":{inBaseUnits:_a(1200/3937)},acres:{inBaseUnits:.0015625*_a(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Ac(.001)},"cubic-centimeters":{inBaseUnits:1e3*Ac(.01)},"cubic-decimeters":{inBaseUnits:1e3*Ac(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Ac(1e3)},"cubic-inches":{inBaseUnits:1e3*Ac(.0254)},"cubic-feet":{inBaseUnits:1e3*Ac(.3048)},"cubic-yards":{inBaseUnits:1e3*Ac(.9144)},"cubic-miles":{inBaseUnits:1e3*Ac(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},_se=function(){const e={};for(const t in hv)for(const i in hv[t].units)e[i]=t;return e}();function bse(e,t,i){return e*hv[i].units[t].inBaseUnits}function wse(e,t,i){return e/hv[i].units[t].inBaseUnits}function b2(e){const t=_se[e];if(t)return t;throw new Error("unknown type")}function eF(e,t=null){return t=t||b2(e),hv[t].baseUnit===e}function Qn(e,t,i){if(t===i)return e;const r=b2(t);if(r!==b2(i))throw new Error("incompatible units");const s=eF(t,r)?e:bse(e,t,r);return eF(i,r)?s:wse(s,i,r)}function Sse(e,t,i){return Qn(e,t,"meters")/(i*Math.PI/180)}function k8(e){return vse.fromJSON(e.toLowerCase())||null}function Rm(e){if(e&&typeof e=="object"&&!CQ(e))return 1;const t=nd(e);return t>1e5?1:t}function xse(e){return nd(e)>=(e instanceof Xe?mse(e).metersPerDegree:1e5)?"meters":Tse(e)}function nd(e,t=li.metersPerDegree){return Ise(e,!0)||t}function Ise(e,t=!1){let i,r,s=null;if(e!=null&&(typeof e=="object"?(i=e.wkid,r=e.wkt):typeof e=="number"?i=e:typeof e=="string"&&(r=e)),i){if(KO(i))return sc.metersPerDegree;if(QO(i))return Qu.metersPerDegree;s=Vh.values[Vh[i]],!s&&t&&gse.has(i)&&(s=yse)}else r&&(R8(r)?s=tF(M8.exec(r),s):L8(r)&&(s=tF(O8.exec(r),s)));return s}function tF(e,t){return e&&e[1]?P8(e[1]):t}function P8(e){return parseFloat(e.split(",")[1])}function Tse(e){let t,i,r=null;if(e!=null&&(typeof e=="object"?(t=e.wkid,i=e.wkt):typeof e=="number"?t=e:typeof e=="string"&&(i=e)),t)r=Vh.units[Vh[t]];else if(i){const s=R8(i)?M8:L8(i)?O8:null;if(s){const n=s.exec(i);n&&n[1]&&(r=Cse(n[1]))}}return N(r)?k8(r):null}function L8(e){return/^GEOCCS/i.test(e)}function R8(e){return/^PROJCS/i.test(e)}const $se=1e-7;function Cse(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let i=t&&t[1];if(!i||Vh.units.indexOf(i)===-1){const r=P8(e);i=null;const s=Vh.values;for(let n=0;n<s.length;++n)if(Math.abs(r-s[n])<$se){i=Vh.units[n];break}}return i}const F8={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},N8={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Ese=Br()(F8),Ase=Br()(N8);Br()(k(k({},F8),N8));function Mse(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function od(e,t,i,r,s,n,o,a,l,u,h,f,y,g,b,w,x){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=n,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e[9]=h,e[10]=f,e[11]=y,e[12]=g,e[13]=b,e[14]=w,e[15]=x,e}function zk(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function gc(e,t){if(e===t){const i=t[1],r=t[2],s=t[3],n=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=n,e[11]=t[14],e[12]=s,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Ose(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],f=t[9],y=t[10],g=t[11],b=t[12],w=t[13],x=t[14],T=t[15],M=i*a-r*o,F=i*l-s*o,D=i*u-n*o,R=r*l-s*a,_=r*u-n*a,q=s*u-n*l,W=h*w-f*b,oe=h*x-y*b,te=h*T-g*b,he=f*x-y*w,ge=f*T-g*w,Te=y*T-g*x;let Se=M*Te-F*ge+D*he+R*te-_*oe+q*W;return Se?(Se=1/Se,e[0]=(a*Te-l*ge+u*he)*Se,e[1]=(s*ge-r*Te-n*he)*Se,e[2]=(w*q-x*_+T*R)*Se,e[3]=(y*_-f*q-g*R)*Se,e[4]=(l*te-o*Te-u*oe)*Se,e[5]=(i*Te-s*te+n*oe)*Se,e[6]=(x*D-b*q-T*F)*Se,e[7]=(h*q-y*D+g*F)*Se,e[8]=(o*ge-a*te+u*W)*Se,e[9]=(r*te-i*ge-n*W)*Se,e[10]=(b*_-w*D+T*M)*Se,e[11]=(f*D-h*_-g*M)*Se,e[12]=(a*oe-o*he-l*W)*Se,e[13]=(i*he-r*oe+s*W)*Se,e[14]=(w*F-b*R-x*M)*Se,e[15]=(h*R-f*F+y*M)*Se,e):null}function kse(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],f=t[9],y=t[10],g=t[11],b=t[12],w=t[13],x=t[14],T=t[15];return e[0]=a*(y*T-g*x)-f*(l*T-u*x)+w*(l*g-u*y),e[1]=-(r*(y*T-g*x)-f*(s*T-n*x)+w*(s*g-n*y)),e[2]=r*(l*T-u*x)-a*(s*T-n*x)+w*(s*u-n*l),e[3]=-(r*(l*g-u*y)-a*(s*g-n*y)+f*(s*u-n*l)),e[4]=-(o*(y*T-g*x)-h*(l*T-u*x)+b*(l*g-u*y)),e[5]=i*(y*T-g*x)-h*(s*T-n*x)+b*(s*g-n*y),e[6]=-(i*(l*T-u*x)-o*(s*T-n*x)+b*(s*u-n*l)),e[7]=i*(l*g-u*y)-o*(s*g-n*y)+h*(s*u-n*l),e[8]=o*(f*T-g*w)-h*(a*T-u*w)+b*(a*g-u*f),e[9]=-(i*(f*T-g*w)-h*(r*T-n*w)+b*(r*g-n*f)),e[10]=i*(a*T-u*w)-o*(r*T-n*w)+b*(r*u-n*a),e[11]=-(i*(a*g-u*f)-o*(r*g-n*f)+h*(r*u-n*a)),e[12]=-(o*(f*x-y*w)-h*(a*x-l*w)+b*(a*y-l*f)),e[13]=i*(f*x-y*w)-h*(r*x-s*w)+b*(r*y-s*f),e[14]=-(i*(a*x-l*w)-o*(r*x-s*w)+b*(r*l-s*a)),e[15]=i*(a*y-l*f)-o*(r*y-s*f)+h*(r*l-s*a),e}function Pse(e){const t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],o=e[5],a=e[6],l=e[7],u=e[8],h=e[9],f=e[10],y=e[11],g=e[12],b=e[13],w=e[14],x=e[15];return(t*o-i*n)*(f*x-y*w)-(t*a-r*n)*(h*x-y*b)+(t*l-s*n)*(h*w-f*b)+(i*a-r*o)*(u*x-y*g)-(i*l-s*o)*(u*w-f*g)+(r*l-s*a)*(u*b-h*g)}function D8(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],f=t[8],y=t[9],g=t[10],b=t[11],w=t[12],x=t[13],T=t[14],M=t[15];let F=i[0],D=i[1],R=i[2],_=i[3];return e[0]=F*r+D*a+R*f+_*w,e[1]=F*s+D*l+R*y+_*x,e[2]=F*n+D*u+R*g+_*T,e[3]=F*o+D*h+R*b+_*M,F=i[4],D=i[5],R=i[6],_=i[7],e[4]=F*r+D*a+R*f+_*w,e[5]=F*s+D*l+R*y+_*x,e[6]=F*n+D*u+R*g+_*T,e[7]=F*o+D*h+R*b+_*M,F=i[8],D=i[9],R=i[10],_=i[11],e[8]=F*r+D*a+R*f+_*w,e[9]=F*s+D*l+R*y+_*x,e[10]=F*n+D*u+R*g+_*T,e[11]=F*o+D*h+R*b+_*M,F=i[12],D=i[13],R=i[14],_=i[15],e[12]=F*r+D*a+R*f+_*w,e[13]=F*s+D*l+R*y+_*x,e[14]=F*n+D*u+R*g+_*T,e[15]=F*o+D*h+R*b+_*M,e}function Lse(e,t,i){const r=i[0],s=i[1],n=i[2];let o,a,l,u,h,f,y,g,b,w,x,T;return t===e?(e[12]=t[0]*r+t[4]*s+t[8]*n+t[12],e[13]=t[1]*r+t[5]*s+t[9]*n+t[13],e[14]=t[2]*r+t[6]*s+t[10]*n+t[14],e[15]=t[3]*r+t[7]*s+t[11]*n+t[15]):(o=t[0],a=t[1],l=t[2],u=t[3],h=t[4],f=t[5],y=t[6],g=t[7],b=t[8],w=t[9],x=t[10],T=t[11],e[0]=o,e[1]=a,e[2]=l,e[3]=u,e[4]=h,e[5]=f,e[6]=y,e[7]=g,e[8]=b,e[9]=w,e[10]=x,e[11]=T,e[12]=o*r+h*s+b*n+t[12],e[13]=a*r+f*s+w*n+t[13],e[14]=l*r+y*s+x*n+t[14],e[15]=u*r+g*s+T*n+t[15]),e}function Rse(e,t,i){const r=i[0],s=i[1],n=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Fse(e,t,i,r){let s,n,o,a,l,u,h,f,y,g,b,w,x,T,M,F,D,R,_,q,W,oe,te,he,ge=r[0],Te=r[1],Se=r[2],vt=Math.sqrt(ge*ge+Te*Te+Se*Se);return vt<Ke?null:(vt=1/vt,ge*=vt,Te*=vt,Se*=vt,s=Math.sin(i),n=Math.cos(i),o=1-n,a=t[0],l=t[1],u=t[2],h=t[3],f=t[4],y=t[5],g=t[6],b=t[7],w=t[8],x=t[9],T=t[10],M=t[11],F=ge*ge*o+n,D=Te*ge*o+Se*s,R=Se*ge*o-Te*s,_=ge*Te*o-Se*s,q=Te*Te*o+n,W=Se*Te*o+ge*s,oe=ge*Se*o+Te*s,te=Te*Se*o-ge*s,he=Se*Se*o+n,e[0]=a*F+f*D+w*R,e[1]=l*F+y*D+x*R,e[2]=u*F+g*D+T*R,e[3]=h*F+b*D+M*R,e[4]=a*_+f*q+w*W,e[5]=l*_+y*q+x*W,e[6]=u*_+g*q+T*W,e[7]=h*_+b*q+M*W,e[8]=a*oe+f*te+w*he,e[9]=l*oe+y*te+x*he,e[10]=u*oe+g*te+T*he,e[11]=h*oe+b*te+M*he,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Nse(e,t,i){const r=Math.sin(i),s=Math.cos(i),n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],h=t[9],f=t[10],y=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=n*s+u*r,e[5]=o*s+h*r,e[6]=a*s+f*r,e[7]=l*s+y*r,e[8]=u*s-n*r,e[9]=h*s-o*r,e[10]=f*s-a*r,e[11]=y*s-l*r,e}function Dse(e,t,i){const r=Math.sin(i),s=Math.cos(i),n=t[0],o=t[1],a=t[2],l=t[3],u=t[8],h=t[9],f=t[10],y=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s-u*r,e[1]=o*s-h*r,e[2]=a*s-f*r,e[3]=l*s-y*r,e[8]=n*r+u*s,e[9]=o*r+h*s,e[10]=a*r+f*s,e[11]=l*r+y*s,e}function jse(e,t,i){const r=Math.sin(i),s=Math.cos(i),n=t[0],o=t[1],a=t[2],l=t[3],u=t[4],h=t[5],f=t[6],y=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s+u*r,e[1]=o*s+h*r,e[2]=a*s+f*r,e[3]=l*s+y*r,e[4]=u*s-n*r,e[5]=h*s-o*r,e[6]=f*s-a*r,e[7]=y*s-l*r,e}function j8(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function zse(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Vse(e,t,i){let r,s,n,o=i[0],a=i[1],l=i[2],u=Math.sqrt(o*o+a*a+l*l);return u<Ke?null:(u=1/u,o*=u,a*=u,l*=u,r=Math.sin(t),s=Math.cos(t),n=1-s,e[0]=o*o*n+s,e[1]=a*o*n+l*r,e[2]=l*o*n-a*r,e[3]=0,e[4]=o*a*n-l*r,e[5]=a*a*n+s,e[6]=l*a*n+o*r,e[7]=0,e[8]=o*l*n+a*r,e[9]=a*l*n-o*r,e[10]=l*l*n+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Use(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Bse(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function qse(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function z8(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=r+r,l=s+s,u=n+n,h=r*a,f=r*l,y=r*u,g=s*l,b=s*u,w=n*u,x=o*a,T=o*l,M=o*u;return e[0]=1-(g+w),e[1]=f+M,e[2]=y-T,e[3]=0,e[4]=f-M,e[5]=1-(h+w),e[6]=b+x,e[7]=0,e[8]=y+T,e[9]=b-x,e[10]=1-(h+g),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function Gse(e,t){const i=Hse,r=-t[0],s=-t[1],n=-t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],f=r*r+s*s+n*n+o*o;return f>0?(i[0]=2*(a*o+h*r+l*n-u*s)/f,i[1]=2*(l*o+h*s+u*r-a*n)/f,i[2]=2*(u*o+h*n+a*s-l*r)/f):(i[0]=2*(a*o+h*r+l*n-u*s),i[1]=2*(l*o+h*s+u*r-a*n),i[2]=2*(u*o+h*n+a*s-l*r)),z8(e,t,i),e}const Hse=ol();function Wse(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Jse(e,t){const i=t[0],r=t[1],s=t[2],n=t[4],o=t[5],a=t[6],l=t[8],u=t[9],h=t[10];return e[0]=Math.sqrt(i*i+r*r+s*s),e[1]=Math.sqrt(n*n+o*o+a*a),e[2]=Math.sqrt(l*l+u*u+h*h),e}function Zse(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function Yse(e,t,i,r){const s=t[0],n=t[1],o=t[2],a=t[3],l=s+s,u=n+n,h=o+o,f=s*l,y=s*u,g=s*h,b=n*u,w=n*h,x=o*h,T=a*l,M=a*u,F=a*h,D=r[0],R=r[1],_=r[2];return e[0]=(1-(b+x))*D,e[1]=(y+F)*D,e[2]=(g-M)*D,e[3]=0,e[4]=(y-F)*R,e[5]=(1-(f+x))*R,e[6]=(w+T)*R,e[7]=0,e[8]=(g+M)*_,e[9]=(w-T)*_,e[10]=(1-(f+b))*_,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function Kse(e,t,i,r,s){const n=t[0],o=t[1],a=t[2],l=t[3],u=n+n,h=o+o,f=a+a,y=n*u,g=n*h,b=n*f,w=o*h,x=o*f,T=a*f,M=l*u,F=l*h,D=l*f,R=r[0],_=r[1],q=r[2],W=s[0],oe=s[1],te=s[2],he=(1-(w+T))*R,ge=(g+D)*R,Te=(b-F)*R,Se=(g-D)*_,vt=(1-(y+T))*_,$t=(x+M)*_,st=(b+F)*q,Kt=(x-M)*q,yi=(1-(y+w))*q;return e[0]=he,e[1]=ge,e[2]=Te,e[3]=0,e[4]=Se,e[5]=vt,e[6]=$t,e[7]=0,e[8]=st,e[9]=Kt,e[10]=yi,e[11]=0,e[12]=i[0]+W-(he*W+Se*oe+st*te),e[13]=i[1]+oe-(ge*W+vt*oe+Kt*te),e[14]=i[2]+te-(Te*W+$t*oe+yi*te),e[15]=1,e}function Qse(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=i+i,a=r+r,l=s+s,u=i*o,h=r*o,f=r*a,y=s*o,g=s*a,b=s*l,w=n*o,x=n*a,T=n*l;return e[0]=1-f-b,e[1]=h+T,e[2]=y-x,e[3]=0,e[4]=h-T,e[5]=1-u-b,e[6]=g+w,e[7]=0,e[8]=y+x,e[9]=g-w,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Xse(e,t,i,r,s,n,o){const a=1/(i-t),l=1/(s-r),u=1/(n-o);return e[0]=2*n*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*n*l,e[6]=0,e[7]=0,e[8]=(i+t)*a,e[9]=(s+r)*l,e[10]=(o+n)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*n*2*u,e[15]=0,e}function ene(e,t,i,r,s){const n=1/Math.tan(t/2);let o;return e[0]=n/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(o=1/(r-s),e[10]=(s+r)*o,e[14]=2*s*r*o):(e[10]=-1,e[14]=-2*r),e}function tne(e,t,i,r){const s=Math.tan(t.upDegrees*Math.PI/180),n=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),u=2/(s+n);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(s-n)*u*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function ine(e,t,i,r,s,n,o){const a=1/(t-i),l=1/(r-s),u=1/(n-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+i)*a,e[13]=(s+r)*l,e[14]=(o+n)*u,e[15]=1,e}function rne(e,t,i,r){let s,n,o,a,l,u,h,f,y,g;const b=t[0],w=t[1],x=t[2],T=r[0],M=r[1],F=r[2],D=i[0],R=i[1],_=i[2];return Math.abs(b-D)<Ke&&Math.abs(w-R)<Ke&&Math.abs(x-_)<Ke?zk(e):(h=b-D,f=w-R,y=x-_,g=1/Math.sqrt(h*h+f*f+y*y),h*=g,f*=g,y*=g,s=M*y-F*f,n=F*h-T*y,o=T*f-M*h,g=Math.sqrt(s*s+n*n+o*o),g?(g=1/g,s*=g,n*=g,o*=g):(s=0,n=0,o=0),a=f*o-y*n,l=y*s-h*o,u=h*n-f*s,g=Math.sqrt(a*a+l*l+u*u),g?(g=1/g,a*=g,l*=g,u*=g):(a=0,l=0,u=0),e[0]=s,e[1]=a,e[2]=h,e[3]=0,e[4]=n,e[5]=l,e[6]=f,e[7]=0,e[8]=o,e[9]=u,e[10]=y,e[11]=0,e[12]=-(s*b+n*w+o*x),e[13]=-(a*b+l*w+u*x),e[14]=-(h*b+f*w+y*x),e[15]=1,e)}function sne(e,t,i,r){const s=t[0],n=t[1],o=t[2],a=r[0],l=r[1],u=r[2];let h=s-i[0],f=n-i[1],y=o-i[2],g=h*h+f*f+y*y;g>0&&(g=1/Math.sqrt(g),h*=g,f*=g,y*=g);let b=l*y-u*f,w=u*h-a*y,x=a*f-l*h;return g=b*b+w*w+x*x,g>0&&(g=1/Math.sqrt(g),b*=g,w*=g,x*=g),e[0]=b,e[1]=w,e[2]=x,e[3]=0,e[4]=f*x-y*w,e[5]=y*b-h*x,e[6]=h*w-f*b,e[7]=0,e[8]=h,e[9]=f,e[10]=y,e[11]=0,e[12]=s,e[13]=n,e[14]=o,e[15]=1,e}function nne(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function one(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function ane(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function V8(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function lne(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function cne(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function une(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function dne(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],f=e[9],y=e[10],g=e[11],b=e[12],w=e[13],x=e[14],T=e[15],M=t[0],F=t[1],D=t[2],R=t[3],_=t[4],q=t[5],W=t[6],oe=t[7],te=t[8],he=t[9],ge=t[10],Te=t[11],Se=t[12],vt=t[13],$t=t[14],st=t[15];return Math.abs(i-M)<=Ke*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(r-F)<=Ke*Math.max(1,Math.abs(r),Math.abs(F))&&Math.abs(s-D)<=Ke*Math.max(1,Math.abs(s),Math.abs(D))&&Math.abs(n-R)<=Ke*Math.max(1,Math.abs(n),Math.abs(R))&&Math.abs(o-_)<=Ke*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-q)<=Ke*Math.max(1,Math.abs(a),Math.abs(q))&&Math.abs(l-W)<=Ke*Math.max(1,Math.abs(l),Math.abs(W))&&Math.abs(u-oe)<=Ke*Math.max(1,Math.abs(u),Math.abs(oe))&&Math.abs(h-te)<=Ke*Math.max(1,Math.abs(h),Math.abs(te))&&Math.abs(f-he)<=Ke*Math.max(1,Math.abs(f),Math.abs(he))&&Math.abs(y-ge)<=Ke*Math.max(1,Math.abs(y),Math.abs(ge))&&Math.abs(g-Te)<=Ke*Math.max(1,Math.abs(g),Math.abs(Te))&&Math.abs(b-Se)<=Ke*Math.max(1,Math.abs(b),Math.abs(Se))&&Math.abs(w-vt)<=Ke*Math.max(1,Math.abs(w),Math.abs(vt))&&Math.abs(x-$t)<=Ke*Math.max(1,Math.abs(x),Math.abs($t))&&Math.abs(T-st)<=Ke*Math.max(1,Math.abs(T),Math.abs(st))}function hne(e){const t=Ke,i=e[0],r=e[1],s=e[2],n=e[4],o=e[5],a=e[6],l=e[8],u=e[9],h=e[10];return Math.abs(1-(i*i+n*n+l*l))<=t&&Math.abs(1-(r*r+o*o+u*u))<=t&&Math.abs(1-(s*s+a*a+h*h))<=t}const pne=D8,fne=V8;Object.freeze({__proto__:null,copy:Mse,set:od,identity:zk,transpose:gc,invert:Ose,adjoint:kse,determinant:Pse,multiply:D8,translate:Lse,scale:Rse,rotate:Fse,rotateX:Nse,rotateY:Dse,rotateZ:jse,fromTranslation:j8,fromScaling:zse,fromRotation:Vse,fromXRotation:Use,fromYRotation:Bse,fromZRotation:qse,fromRotationTranslation:z8,fromQuat2:Gse,getTranslation:Wse,getScaling:Jse,getRotation:Zse,fromRotationTranslationScale:Yse,fromRotationTranslationScaleOrigin:Kse,fromQuat:Qse,frustum:Xse,perspective:ene,perspectiveFromFieldOfView:tne,ortho:ine,lookAt:rne,targetTo:sne,str:nne,frob:one,add:ane,subtract:V8,multiplyScalar:lne,multiplyScalarAndAdd:cne,exactEquals:une,equals:dne,isOrthoNormal:hne,mul:pne,sub:fne});let qT,J=null;function U8(){return!!J}function mne(){return!!re("esri-wasm")}function B8(){return qT||(qT=se(()=>import("./pe-wasm.1d1b20e7.js"),[]).then(e=>e.p).then(({default:e})=>e({locateFile:t=>It(`esri/geometry/support/${t}`)})).then(e=>{G8(e)}),qT)}var w2,pi,S2;(function(e){function t(n,o,a){J.ensureCache.prepare();const l=gh(a),u=a===l,h=J.ensureFloat64(l),f=J._pe_geog_to_proj(J.getPointer(n),o,h);return f&&Pu(a,o,h,u),f}function i(n,o,a,l){switch(l){case pi.PE_TRANSFORM_P_TO_G:return r(n,o,a);case pi.PE_TRANSFORM_G_TO_P:return t(n,o,a)}return 0}function r(n,o,a){return s(n,o,a,0)}function s(n,o,a,l){J.ensureCache.prepare();const u=gh(a),h=a===u,f=J.ensureFloat64(u),y=J._pe_proj_to_geog_center(J.getPointer(n),o,f,l);return y&&Pu(a,o,f,h),y}e.geogToProj=t,e.projGeog=i,e.projToGeog=r,e.projToGeogCenter=s})(w2||(w2={})),function(e){function t(){e.PE_BUFFER_MAX=J.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=J.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=J.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=J.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=J.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=J.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=J.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=J.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=J.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=J.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=J.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=J.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=J.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=J.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=J.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=J.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=J.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=J.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=J.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=J.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=J.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=J.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=J.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=J.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=J.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=J.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=J.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=J.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=J.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=J.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(pi||(pi={})),function(e){const t={},i={},r=g=>{if(g){const b=g.getType();switch(b){case pi.PE_TYPE_GEOGCS:g=J.castObject(g,J.PeGeogcs);break;case pi.PE_TYPE_PROJCS:g=J.castObject(g,J.PeProjcs);break;case pi.PE_TYPE_GEOGTRAN:g=J.castObject(g,J.PeGeogtran);break;default:b&pi.PE_TYPE_UNIT&&(g=J.castObject(g,J.PeUnit))}}return g};function s(){J.PeFactory.prototype.initialize(null)}function n(g){return o(pi.PE_TYPE_COORDSYS,g)}function o(g,b){let w=null,x=t[g];if(x||(x={},t[g]=x),x.hasOwnProperty(String(b)))w=x[b];else{const T=J.PeFactory.prototype.factoryByType(g,b);J.compare(T,J.NULL)||(w=T,x[b]=w)}return w=r(w),w}function a(g,b){let w=null,x=i[g];if(x||(x={},i[g]=x),x.hasOwnProperty(b))w=x[b];else{const T=J.PeFactory.prototype.fromString(g,b);J.compare(T,J.NULL)||(w=T,x[b]=w)}return w=r(w),w}function l(g){return o(pi.PE_TYPE_GEOGCS,g)}function u(g){return o(pi.PE_TYPE_GEOGTRAN,g)}function h(g){return J.PeFactory.prototype.getCode(g)}function f(g){return o(pi.PE_TYPE_PROJCS,g)}function y(g){return o(pi.PE_TYPE_UNIT,g)}e.initialize=s,e.coordsys=n,e.factoryByType=o,e.fromString=a,e.geogcs=l,e.geogtran=u,e.getCode=h,e.projcs=f,e.unit=y}(S2||(S2={}));let q8=null;var hS,x2,I2,T2,pS,$2,fS,mS,C2;function G8(e){function t(n,o,a){n[o]=a(n[o])}J=e,pi.init(),hS.init(),pS.init(),fS.init(),mS.init(),q8=class extends J.PeGCSExtent{destroy(){J.destroy(this)}};const i=[J.PeDatum,J.PeGeogcs,J.PeGeogtran,J.PeObject,J.PeParameter,J.PePrimem,J.PeProjcs,J.PeSpheroid,J.PeUnit];for(const n of i)t(n.prototype,"getName",o=>function(){return o.call(this,new Array(pi.PE_NAME_MAX))});for(const n of[J.PeGeogtran,J.PeProjcs])t(n.prototype,"getParameters",o=>function(){const a=new Array(pi.PE_PARM_MAX);let l=o.call(this);for(let u=0;u<a.length;u++){const h=J.getValue(l,"*");a[u]=h?J.wrapPointer(h,J.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});t(J.PeHorizon.prototype,"getCoord",n=>function(){const o=this.getSize();if(!o)return null;const a=[];return Pu(a,o,n.call(this)),a}),t(J.PeGTlistExtendedEntry.prototype,"getEntries",n=>{const o=J._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=n.call(this);if(!J.compare(l,J.NULL)){a=[l];const u=this.getSteps();if(u>1){const h=J.getPointer(l);for(let f=1;f<u;f++)a.push(J.wrapPointer(h+o*f,J.PeGTlistExtendedGTs))}}return a}});const r=J._pe_getPeHorizonSize(),s=n=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(n))return o.get(n);let a=null;const l=n.call(this);if(!J.compare(l,J.NULL)){a=[l];const u=l.getNump();if(u>1){const h=J.getPointer(l);for(let f=1;f<u;f++)a.push(J.wrapPointer(h+r*f,J.PeHorizon))}}return o.set(n,a),a};t(J.PeProjcs.prototype,"horizonGcsGenerate",s),t(J.PeProjcs.prototype,"horizonPcsGenerate",s),J.PeObject.prototype.toString=function(n=pi.PE_STR_OPTS_NONE){J.ensureCache.prepare();const o=J.getPointer(this),a=J.ensureInt8(new Array(pi.PE_BUFFER_MAX));return J.UTF8ToString(J._pe_object_to_string_ext(o,n,a))}}function _l(e){if(!e)return;const t=J.getClass(e);if(!t)return;const i=J.getCache(t);if(!i)return;const r=J.getPointer(e);r&&delete i[r]}function fb(e,t){const i=[],r=new Array(t);for(let s=0;s<e;s++)i.push(J.ensureInt8(r));return i}function gh(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(i=>{t.push(i[0],i[1])})):t=e,t}function Pu(e,t,i,r=!1){if(r)for(let s=0;s<2*t;s++)e[s]=J.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=e.length===0;for(let n=0;n<t;n++)s&&(e[n]=new Array(2)),e[n][0]=J.getValue(i,"double"),e[n][1]=J.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=J.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=J._pe_getPeGTlistExtendedEntrySize()}function r(s,n,o,a,l,u){let h=null;const f=new J.PeInteger(u);try{const y=J.PeGTlistExtended.prototype.getGTlist(s,n,o,a,l,f);if((u=f.val)&&(h=[y],u>1)){const g=J.getPointer(y);for(let b=1;b<u;b++)h.push(J.wrapPointer(g+t*b,J.PeGTlistExtendedEntry))}}finally{J.destroy(f)}return h}e.init=i,e.getGTlist=r})(hS||(hS={})),function(e){function t(i){if(i&&i.length){for(const r of i)_l(r),r.getEntries().forEach(s=>{_l(s);const n=s.getGeogtran();_l(n),n.getParameters().forEach(_l),[n.getGeogcs1(),n.getGeogcs2()].forEach(o=>{_l(o);const a=o.getDatum();_l(a),_l(a.getSpheroid()),_l(o.getPrimem()),_l(o.getUnit())})});J.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(x2||(x2={})),function(e){function t(i,r,s,n,o){J.ensureCache.prepare();const a=gh(s),l=s===a,u=J.ensureFloat64(a);let h=0;n&&(h=J.ensureFloat64(n));const f=J._pe_geog_to_geog(J.getPointer(i),r,u,h,o);return f&&Pu(s,r,u,l),f}e.geogToGeog=t}(I2||(I2={})),function(e){const t=(u,h,f,y,g,b)=>{let w,x;switch(J.ensureCache.prepare(),u){case"dd":w=J._pe_geog_to_dd,x=pi.PE_DD_MAX;break;case"ddm":w=J._pe_geog_to_ddm,x=pi.PE_DDM_MAX;break;case"dms":w=J._pe_geog_to_dms,x=pi.PE_DMS_MAX}let T=0;h&&(T=J.getPointer(h));const M=gh(y),F=J.ensureFloat64(M),D=fb(f,x),R=w(T,f,F,g,J.ensureInt32(D));if(R)for(let _=0;_<f;_++)b[_]=J.UTF8ToString(D[_]);return R},i=(u,h,f,y,g)=>{let b;switch(J.ensureCache.prepare(),u){case"dd":b=J._pe_dd_to_geog;break;case"ddm":b=J._pe_ddm_to_geog;break;case"dms":b=J._pe_dms_to_geog}let w=0;h&&(w=J.getPointer(h));const x=y.map(D=>J.ensureString(D)),T=J.ensureInt32(x),M=J.ensureFloat64(new Array(2*f)),F=b(w,f,T,M);return F&&Pu(g,f,M),F};function r(u,h,f,y,g){return t("dms",u,h,f,y,g)}function s(u,h,f,y){return i("dms",u,h,f,y)}function n(u,h,f,y,g){return t("ddm",u,h,f,y,g)}function o(u,h,f,y){return i("ddm",u,h,f,y)}function a(u,h,f,y,g){return t("dd",u,h,f,y,g)}function l(u,h,f,y){return i("dd",u,h,f,y)}e.geogToDms=r,e.dmsToGeog=s,e.geogToDdm=n,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=l}(T2||(T2={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=J.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=J.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=J.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=J.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=J.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(s,n,o,a,l,u,h){J.ensureCache.prepare();let f=0;s&&(f=J.getPointer(s));const y=gh(o),g=J.ensureFloat64(y),b=fb(n,pi.PE_MGRS_MAX),w=J.ensureInt32(b),x=J._pe_geog_to_mgrs_extended(f,n,g,a,l,u,w);if(x)for(let T=0;T<n;T++)h[T]=J.UTF8ToString(b[T]);return x}function r(s,n,o,a,l){J.ensureCache.prepare();let u=0;s&&(u=J.getPointer(s));const h=o.map(b=>J.ensureString(b)),f=J.ensureInt32(h),y=J.ensureFloat64(new Array(2*n)),g=J._pe_mgrs_to_geog_extended(u,n,f,a,y);return g&&Pu(l,n,y),g}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=r}(pS||(pS={})),function(e){function t(r,s,n,o,a,l,u){J.ensureCache.prepare();let h=0;r&&(h=J.getPointer(r));const f=gh(n),y=J.ensureFloat64(f),g=fb(s,pi.PE_MGRS_MAX),b=J.ensureInt32(g),w=J._pe_geog_to_usng(h,s,y,o,a,l,b);if(w)for(let x=0;x<s;x++)u[x]=J.UTF8ToString(g[x]);return w}function i(r,s,n,o){J.ensureCache.prepare();let a=0;r&&(a=J.getPointer(r));const l=n.map(y=>J.ensureString(y)),u=J.ensureInt32(l),h=J.ensureFloat64(new Array(2*s)),f=J._pe_usng_to_geog(a,s,u,h);return f&&Pu(o,s,h),f}e.geogToUsng=t,e.usngToGeog=i}($2||($2={})),function(e){function t(){e.PE_UTM_OPTS_NONE=J.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=J.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=J.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(s,n,o,a,l){J.ensureCache.prepare();let u=0;s&&(u=J.getPointer(s));const h=gh(o),f=J.ensureFloat64(h),y=fb(n,pi.PE_UTM_MAX),g=J.ensureInt32(y),b=J._pe_geog_to_utm(u,n,f,a,g);if(b)for(let w=0;w<n;w++)l[w]=J.UTF8ToString(y[w]);return b}function r(s,n,o,a,l){J.ensureCache.prepare();let u=0;s&&(u=J.getPointer(s));const h=o.map(b=>J.ensureString(b)),f=J.ensureInt32(h),y=J.ensureFloat64(new Array(2*n)),g=J._pe_utm_to_geog(u,n,f,a,y);return g&&Pu(l,n,y),g}e.init=t,e.geogToUtm=i,e.utmToGeog=r}(fS||(fS={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=J.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=J.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=J.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=J.PePCSInfo.prototype.PE_POLE_POINT}function r(s,n=e.PE_PCSINFO_OPTION_DOMAIN){let o,a;return t.has(s)&&(a=t.get(s),a[n]&&(o=a[n])),o||(o=J.PePCSInfo.prototype.generate(s,n),a||(a=[],t.set(s,a)),a[n]=o),o}e.init=i,e.generate=r}(mS||(mS={})),function(e){function t(){return J.PeVersion.prototype.version_string()}e.versionString=t}(C2||(C2={}));const yne=Object.freeze({__proto__:null,get _pe(){return J},isLoaded:U8,isSupported:mne,load:B8,get PeCSTransformations(){return w2},get PeDefs(){return pi},get PeFactory(){return S2},get PeGCSExtent(){return q8},get PeGTlistExtended(){return hS},get PeGTlistExtendedEntry(){return x2},get PeGTTransformations(){return I2},get PeNotationDms(){return T2},get PeNotationMgrs(){return pS},get PeNotationUsng(){return $2},get PeNotationUtm(){return fS},get PePCSInfo(){return mS},get PeVersion(){return C2},_init:G8}),Mc=li.radius,Ao=li.eccentricitySquared,gne={a1:Mc*Ao,a2:Mc*Ao*Mc*Ao,a3:Mc*Ao*Ao/2,a4:Mc*Ao*Mc*Ao*2.5,a5:Mc*Ao+Mc*Ao*Ao/2,a6:1-Ao};1/294.9786982,1/298.257222101,li.radius,li.flattening,Qu.radius,Qu.flattening,1/192.0430107526882,sc.radius,sc.flattening,1/10.2079945799458,1/43.61604095563141,sc.radius;let mb=0;class mm{constructor(t=null){this.uid=mb++,t?(this._wkt=t.wkt!==void 0?t.wkt:null,this._wkid=t.wkid!==void 0?t.wkid:-1,this._isInverse=t.isInverse!==void 0&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(t){const i=new mm;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=mb++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=mb++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=mb++}getInverse(){const t=new mm;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}class zu{constructor(t){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,t&&t.steps)for(const i of t.steps)i instanceof mm?this.steps.push(i):this.steps.push(new mm({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}static cacheKey(t,i){return[t.wkid!==void 0&&t.wkid!==null?t.wkid.toString():"-1",t.wkt!==void 0&&t.wkt!==null?t.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(t){const i=new zu;let r="";for(const s of t.steps){const n=mm.fromGE(s);i.steps.push(n),r+=n.uid.toString()+","}return i._cached_projection={},i._gtlistentry=null,i._chain=r,i}getInverse(){const t=new zu;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,r){this._cached_projection[zu.cacheKey(t,i)]=r}getCachedGeTransformation(t,i){let r="";for(const n of this.steps)r+=n.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=r);const s=this._cached_projection[zu.cacheKey(t,i)];return s===void 0?null:s}}function H8(e,t,i){if(Q(t)||Q(i)||i.vcsWkid||Qs(t,i))return null;const r=Rm(t)/Rm(i);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return s=>vne(s,r);case"polyline":case"esriGeometryPolyline":return s=>bne(s,r);case"polygon":case"esriGeometryPolygon":return s=>_ne(s,r);case"multipoint":case"esriGeometryMultipoint":return s=>wne(s,r);case"extent":case"esriGeometryExtent":return s=>Sne(s,r);default:return null}}function vne(e,t){e&&e.z!=null&&(e.z*=t)}function _ne(e,t){if(e)for(const i of e.rings)for(const r of i)r.length>2&&(r[2]*=t)}function bne(e,t){if(e)for(const i of e.paths)for(const r of i)r.length>2&&(r[2]*=t)}function wne(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function Sne(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let np=null,yS=null,GT=null,HT={};function Fm(){return!!np&&U8()}function Nm(e){return Q(GT)&&(GT=Promise.all([B8(),se(()=>import("./geometryEngineBase.40db0853.js"),[]).then(t=>t.g),se(()=>import("./hydrated.28abac09.js"),["assets/hydrated.28abac09.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])])),GT.then(([,t,{hydratedAdapter:i}])=>{Gi(e),yS=i,np=t.default,np._enableProjection(yne)})}function a_(e,t,i=null){return Array.isArray(e)?e.length===0?[]:iF(yS,e,e[0].spatialReference,t,i):iF(yS,[e],e.spatialReference,t,i)[0]}function iF(e,t,i,r,s=null){if(Q(i)||Q(r))return t;if(op(i,r,s))return t.map(n=>Ine(n,i,r));if(Q(s)){const n=zu.cacheKey(i,r);HT[n]!==void 0?s=HT[n]:(s=xne(i,r,null),Q(s)&&(s=new zu),HT[n]=s)}if(Q(np))throw new W8;return np._project(e,t,i,r,s)}function xne(e,t,i=null){if(Q(np))throw new W8;if(Q(e)||Q(t))return null;const r=np._getTransformation(yS,e,t,i,i==null?void 0:i.spatialReference);return r!==null?zu.fromGE(r):null}class W8 extends B{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var G;function op(e,t,i){return!i&&(!!Qs(e,t)||Zs(e)&&Zs(t)&&!!K8(e,t,Q8))}async function ZOe(e,t,i,r){if(!Fm()){if(Array.isArray(e)){for(const{source:s,dest:n,geographicTransformation:o}of e)if(!op(s,n,o))return Nm(r)}else if(!op(e,t,i))return Nm(r)}}function Ine(e,t,i){return e?"x"in e?Tne(e,t,new Le,i,0):"xmin"in e?Ene(e,t,new Et,i,0):"rings"in e?J8(e,t,new Rn,i,0):"paths"in e?Cne(e,t,new xs,i,0):"points"in e?$ne(e,t,new ny,i,0):null:null}function Tne(e,t,i,r,s){tr[0]=e.x,tr[1]=e.y;const n=e.z;return tr[2]=n!==void 0?n:s,l_(tr,t,0,tr,r,0,1)?(i.x=tr[0],i.y=tr[1],i.spatialReference=r,n===void 0?(i.z=void 0,i.hasZ=!1):(i.z=tr[2],i.hasZ=!0),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function $ne(e,t,i,r,s){const{points:n,hasZ:o,hasM:a}=e,l=[],u=n.length,h=[];for(const f of n)h.push(f[0],f[1],o?f[2]:s);if(!l_(h,t,0,h,r,0,u))return null;for(let f=0;f<u;++f){const y=3*f,g=h[y],b=h[y+1];o&&a?l.push([g,b,h[y+2],n[f][3]]):o?l.push([g,b,h[y+2]]):a?l.push([g,b,n[f][2]]):l.push([g,b])}return i.points=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i}function Cne(e,t,i,r,s){const{paths:n,hasZ:o,hasM:a}=e,l=[];return Z8(n,o,a,t,l,r,s)?(i.paths=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i):null}function YOe(e,t,i=t.spatialReference,r=0){return N(i)&&N(J8(e,e.spatialReference,t,i,r))}function J8(e,t,i,r,s){const{rings:n,hasZ:o,hasM:a}=e,l=[];return Z8(n,o,a,t,l,r,s)?(i.rings=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i):null}function Ene(e,t,i,r,s){const{xmin:n,ymin:o,xmax:a,ymax:l,hasZ:u,hasM:h}=e;return rF(n,o,u?e.zmin:s,t,tr,r)?(i.xmin=tr[0],i.ymin=tr[1],u&&(i.zmin=tr[2]),rF(a,l,u?e.zmax:s,t,tr,r)?(i.xmax=tr[0],i.ymax=tr[1],u&&(i.zmax=tr[2]),h&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null):null}function KOe(e,t,i,r=0){tr[0]=e.x,tr[1]=e.y;const s=e.z;return tr[2]=s!==void 0?s:r,l_(tr,e.spatialReference,0,t,i,0,1)}function rF(e,t,i,r,s,n){return yb[0]=e,yb[1]=t,yb[2]=i,l_(yb,r,0,s,n,0,1)}function l_(e,t,i,r,s,n,o=1){const a=K8(t,s,Q8);if(Q(a))return!1;if(a===Jt){if(e===r&&i===n)return!0;const u=i+3*o;for(let h=i,f=n;h<u;h++,f++)r[f]=e[h];return!0}const l=i+3*o;for(let u=i,h=n;u<l;u+=3,h+=3)a(e,u,r,h);return!0}function Z8(e,t,i,r,s,n,o=0){const a=new Array;for(const u of e)for(const h of u)a.push(h[0],h[1],t?h[2]:o);if(!l_(a,r,0,a,n,0,a.length/3))return!1;let l=0;s.length=0;for(const u of e){const h=new Array;for(const f of u)t&&i?h.push([a[l++],a[l++],a[l++],f[3]]):t?h.push([a[l++],a[l++],a[l++]]):i?(h.push([a[l++],a[l++],f[2]]),l++):(h.push([a[l++],a[l++]]),l++);s.push(h)}return!0}function QOe(e,t,i,r){if(Q(e)||Q(r))return!1;const s=gS(e,Gne),n=gS(r,Hne);if(s===n&&!sF(n)&&(s!==G.UNKNOWN||Qs(e,r)))return j8(i,t),!0;if(sF(n)){const o=Ug[s][G.LON_LAT],a=Ug[G.LON_LAT][n];return!Q(o)&&!Q(a)&&(o(t,0,Oc,0),a(Oc,0,kc,0),Y8(Za*Oc[0],Za*Oc[1],i),i[12]=kc[0],i[13]=kc[1],i[14]=kc[2],!0)}if((n===G.WEB_MERCATOR||n===G.PLATE_CARREE)&&(s===G.WGS84||s===G.CGCS2000&&n===G.PLATE_CARREE||s===G.SPHERICAL_ECEF||s===G.WEB_MERCATOR)){const o=Ug[s][G.LON_LAT],a=Ug[G.LON_LAT][n];return!Q(o)&&!Q(a)&&(o(t,0,Oc,0),a(Oc,0,kc,0),s===G.SPHERICAL_ECEF?Ane(Za*Oc[0],Za*Oc[1],i):zk(i),i[12]=kc[0],i[13]=kc[1],i[14]=kc[2],!0)}return!1}function sF(e){return e===G.SPHERICAL_ECEF||e===G.SPHERICAL_MARS_PCPF||e===G.SPHERICAL_MOON_PCPF}function Y8(e,t,i){const r=Math.sin(e),s=Math.cos(e),n=Math.sin(t),o=Math.cos(t),a=i;return a[0]=-r,a[4]=-n*s,a[8]=o*s,a[12]=0,a[1]=s,a[5]=-n*r,a[9]=o*r,a[13]=0,a[2]=0,a[6]=o,a[10]=n,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function Ane(e,t,i){return Y8(e,t,i),gc(i,i),i}function gS(e,t){return t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=nd(e,1)),e.wkt===E8.wkt?t.spatialReferenceId=G.SPHERICAL_ECEF:ev(e)?t.spatialReferenceId=G.WGS84:Qh(e)?t.spatialReferenceId=G.WEB_MERCATOR:EQ(e)?t.spatialReferenceId=G.PLATE_CARREE:e.wkt===fse.wkt?t.spatialReferenceId=G.WGS84_ECEF:e.wkid===Kh.CGCS2000?t.spatialReferenceId=G.CGCS2000:e.wkt===uS.wkt?t.spatialReferenceId=G.SPHERICAL_MARS_PCPF:e.wkt===dS.wkt?t.spatialReferenceId=G.SPHERICAL_MOON_PCPF:qx(e)?t.spatialReferenceId=G.GCSMARS2000:Gx(e)?t.spatialReferenceId=G.GCSMOON2000:t.spatialReferenceId=G.UNKNOWN)}function Jt(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function ym(e,t,i,r){i[r++]=Dm*(e[t++]/li.radius),i[r++]=Dm*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/li.radius))),i[r]=e[t]}function Mne(e,t,i,r){ym(e,t,i,r),$h(i,r,i,r)}function One(e,t,i,r){ym(e,t,i,r),Eh(i,r,i,r)}function kne(e,t,i,r,s){const n=.4999999*Math.PI,o=fo(Za*e[t+1],-n,n),a=Math.sin(o);i[r++]=Za*e[t]*s.radius,i[r++]=s.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=e[t+2]}function pv(e,t,i,r){kne(e,t,i,r,li)}(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(G||(G={}));const nF=li.radius*Math.PI/180,oF=180/(li.radius*Math.PI);function Ih(e,t,i,r){i[r]=e[t]*nF,i[r+1]=e[t+1]*nF,i[r+2]=e[t+2]}function Th(e,t,i,r){i[r]=e[t]*oF,i[r+1]=e[t+1]*oF,i[r+2]=e[t+2]}function Pne(e,t,i,r){ym(e,t,i,r),Ih(i,r,i,r)}function Lne(e,t,i,r){Ah(e,t,i,r),Ih(i,r,i,r)}function Rne(e,t,i,r){Ch(e,t,i,r),Ih(i,r,i,r)}function Fne(e,t,i,r){Th(e,t,i,r),$h(i,r,i,r)}function Nne(e,t,i,r){Th(e,t,i,r),pv(i,r,i,r)}function Dne(e,t,i,r){Th(e,t,i,r),Eh(i,r,i,r)}function Vk(e,t,i,r,s){const n=s+e[t+2],o=Za*e[t+1],a=Za*e[t],l=Math.cos(o);i[r++]=Math.cos(a)*l*n,i[r++]=Math.sin(a)*l*n,i[r]=Math.sin(o)*n}function aF(e,t,i,r){Vk(e,t,i,r,Qu.radius)}function lF(e,t,i,r){Vk(e,t,i,r,sc.radius)}function $h(e,t,i,r){Vk(e,t,i,r,li.radius)}function Uk(e,t,i,r,s){const n=e[t],o=e[t+1],a=e[t+2],l=Math.sqrt(n*n+o*o+a*a),u=a6(a/(l===0?1:l)),h=Math.atan2(o,n);i[r++]=Dm*h,i[r++]=Dm*u,i[r]=l-s}function cF(e,t,i,r){Uk(e,t,i,r,Qu.radius)}function uF(e,t,i,r){Uk(e,t,i,r,sc.radius)}function Ch(e,t,i,r){Uk(e,t,i,r,li.radius)}function jne(e,t,i,r){Ch(e,t,i,r),pv(i,r,i,r)}function zne(e,t,i,r){Ch(e,t,i,r),Eh(i,r,i,r)}function Vne(e,t,i,r,s){const n=Za*e[t],o=Za*e[t+1],a=e[t+2],l=Math.sin(o),u=Math.cos(o),h=s.radius/Math.sqrt(1-s.eccentricitySquared*l*l);i[r++]=(h+a)*u*Math.cos(n),i[r++]=(h+a)*u*Math.sin(n),i[r++]=(h*(1-s.eccentricitySquared)+a)*l}function Eh(e,t,i,r){Vne(e,t,i,r,li)}function Ah(e,t,i,r){const s=gne,n=e[t],o=e[t+1],a=e[t+2];let l,u,h,f,y,g,b,w,x,T,M,F,D,R,_,q,W,oe,te,he,ge;l=Math.abs(a),u=n*n+o*o,h=Math.sqrt(u),f=u+a*a,y=Math.sqrt(f),he=Math.atan2(o,n),g=a*a/f,b=u/f,R=s.a2/y,_=s.a3-s.a4/y,b>.3?(w=l/y*(1+b*(s.a1+R+g*_)/y),te=Math.asin(w),T=w*w,x=Math.sqrt(1-T)):(x=h/y*(1-g*(s.a5-R-b*_)/y),te=Math.acos(x),T=1-x*x,w=Math.sqrt(T)),M=1-li.eccentricitySquared*T,F=li.radius/Math.sqrt(M),D=s.a6*F,R=h-F*x,_=l-D*w,W=x*R+w*_,q=x*_-w*R,oe=q/(D/M+W),te+=oe,ge=W+q*oe/2,a<0&&(te=-te),i[r++]=Dm*he,i[r++]=Dm*te,i[r]=ge}function Une(e,t,i,r){Ah(e,t,i,r),$h(i,r,i,r)}function Bne(e,t,i,r){Ah(e,t,i,r),pv(i,r,i,r)}const Ug={[G.WGS84]:{[G.CGCS2000]:null,[G.GCSMARS2000]:null,[G.GCSMOON2000]:null,[G.LON_LAT]:Jt,[G.WGS84_COMPARABLE_LON_LAT]:Jt,[G.SPHERICAL_ECEF]:$h,[G.SPHERICAL_MARS_PCPF]:null,[G.SPHERICAL_MOON_PCPF]:null,[G.UNKNOWN]:null,[G.WEB_MERCATOR]:pv,[G.PLATE_CARREE]:Ih,[G.WGS84]:Jt,[G.WGS84_ECEF]:Eh},[G.CGCS2000]:{[G.CGCS2000]:Jt,[G.GCSMARS2000]:null,[G.GCSMOON2000]:null,[G.LON_LAT]:Jt,[G.WGS84_COMPARABLE_LON_LAT]:Jt,[G.SPHERICAL_ECEF]:$h,[G.SPHERICAL_MARS_PCPF]:null,[G.SPHERICAL_MOON_PCPF]:null,[G.UNKNOWN]:null,[G.WEB_MERCATOR]:null,[G.PLATE_CARREE]:Ih,[G.WGS84]:null,[G.WGS84_ECEF]:Eh},[G.GCSMARS2000]:{[G.CGCS2000]:null,[G.GCSMARS2000]:Jt,[G.GCSMOON2000]:null,[G.LON_LAT]:Jt,[G.WGS84_COMPARABLE_LON_LAT]:null,[G.SPHERICAL_ECEF]:null,[G.SPHERICAL_MARS_PCPF]:lF,[G.SPHERICAL_MOON_PCPF]:null,[G.UNKNOWN]:null,[G.WEB_MERCATOR]:null,[G.PLATE_CARREE]:null,[G.WGS84]:null,[G.WGS84_ECEF]:null},[G.GCSMOON2000]:{[G.CGCS2000]:null,[G.GCSMARS2000]:null,[G.GCSMOON2000]:Jt,[G.LON_LAT]:Jt,[G.WGS84_COMPARABLE_LON_LAT]:null,[G.SPHERICAL_ECEF]:null,[G.SPHERICAL_MARS_PCPF]:null,[G.SPHERICAL_MOON_PCPF]:aF,[G.UNKNOWN]:null,[G.WEB_MERCATOR]:null,[G.PLATE_CARREE]:null,[G.WGS84]:null,[G.WGS84_ECEF]:null},[G.WEB_MERCATOR]:{[G.CGCS2000]:null,[G.GCSMARS2000]:null,[G.GCSMOON2000]:null,[G.LON_LAT]:ym,[G.WGS84_COMPARABLE_LON_LAT]:ym,[G.SPHERICAL_ECEF]:Mne,[G.SPHERICAL_MARS_PCPF]:null,[G.SPHERICAL_MOON_PCPF]:null,[G.UNKNOWN]:null,[G.WEB_MERCATOR]:Jt,[G.PLATE_CARREE]:Pne,[G.WGS84]:ym,[G.WGS84_ECEF]:One},[G.WGS84_ECEF]:{[G.CGCS2000]:Ah,[G.GCSMARS2000]:null,[G.GCSMOON2000]:null,[G.LON_LAT]:Ah,[G.WGS84_COMPARABLE_LON_LAT]:Ah,[G.SPHERICAL_ECEF]:Une,[G.SPHERICAL_MARS_PCPF]:null,[G.SPHERICAL_MOON_PCPF]:null,[G.UNKNOWN]:null,[G.WEB_MERCATOR]:Bne,[G.PLATE_CARREE]:Lne,[G.WGS84]:Ah,[G.WGS84_ECEF]:Jt},[G.SPHERICAL_ECEF]:{[G.CGCS2000]:Ch,[G.GCSMARS2000]:null,[G.GCSMOON2000]:null,[G.LON_LAT]:Ch,[G.WGS84_COMPARABLE_LON_LAT]:Ch,[G.SPHERICAL_ECEF]:Jt,[G.SPHERICAL_MARS_PCPF]:null,[G.SPHERICAL_MOON_PCPF]:null,[G.UNKNOWN]:null,[G.WEB_MERCATOR]:jne,[G.PLATE_CARREE]:Rne,[G.WGS84]:Ch,[G.WGS84_ECEF]:zne},[G.SPHERICAL_MARS_PCPF]:{[G.CGCS2000]:null,[G.GCSMARS2000]:uF,[G.GCSMOON2000]:null,[G.LON_LAT]:uF,[G.WGS84_COMPARABLE_LON_LAT]:null,[G.SPHERICAL_ECEF]:null,[G.SPHERICAL_MARS_PCPF]:Jt,[G.SPHERICAL_MOON_PCPF]:null,[G.UNKNOWN]:null,[G.WEB_MERCATOR]:null,[G.PLATE_CARREE]:null,[G.WGS84]:null,[G.WGS84_ECEF]:null},[G.SPHERICAL_MOON_PCPF]:{[G.CGCS2000]:null,[G.GCSMARS2000]:null,[G.GCSMOON2000]:cF,[G.LON_LAT]:cF,[G.WGS84_COMPARABLE_LON_LAT]:null,[G.SPHERICAL_ECEF]:null,[G.SPHERICAL_MARS_PCPF]:null,[G.SPHERICAL_MOON_PCPF]:Jt,[G.UNKNOWN]:null,[G.WEB_MERCATOR]:null,[G.PLATE_CARREE]:null,[G.WGS84]:null,[G.WGS84_ECEF]:null},[G.UNKNOWN]:{[G.CGCS2000]:null,[G.GCSMARS2000]:null,[G.GCSMOON2000]:null,[G.LON_LAT]:null,[G.WGS84_COMPARABLE_LON_LAT]:null,[G.SPHERICAL_ECEF]:null,[G.SPHERICAL_MARS_PCPF]:null,[G.SPHERICAL_MOON_PCPF]:null,[G.UNKNOWN]:Jt,[G.WEB_MERCATOR]:null,[G.PLATE_CARREE]:null,[G.WGS84]:null,[G.WGS84_ECEF]:null},[G.LON_LAT]:{[G.CGCS2000]:Jt,[G.GCSMARS2000]:Jt,[G.GCSMOON2000]:Jt,[G.LON_LAT]:Jt,[G.WGS84_COMPARABLE_LON_LAT]:Jt,[G.SPHERICAL_ECEF]:$h,[G.SPHERICAL_MARS_PCPF]:lF,[G.SPHERICAL_MOON_PCPF]:aF,[G.UNKNOWN]:null,[G.WEB_MERCATOR]:pv,[G.PLATE_CARREE]:Ih,[G.WGS84]:Jt,[G.WGS84_ECEF]:Eh},[G.WGS84_COMPARABLE_LON_LAT]:{[G.CGCS2000]:null,[G.GCSMARS2000]:null,[G.GCSMOON2000]:null,[G.LON_LAT]:Jt,[G.WGS84_COMPARABLE_LON_LAT]:Jt,[G.SPHERICAL_ECEF]:$h,[G.SPHERICAL_MARS_PCPF]:null,[G.SPHERICAL_MOON_PCPF]:null,[G.UNKNOWN]:null,[G.WEB_MERCATOR]:null,[G.PLATE_CARREE]:Ih,[G.WGS84]:Jt,[G.WGS84_ECEF]:Eh},[G.PLATE_CARREE]:{[G.CGCS2000]:Th,[G.GCSMARS2000]:null,[G.GCSMOON2000]:null,[G.LON_LAT]:Th,[G.WGS84_COMPARABLE_LON_LAT]:Th,[G.SPHERICAL_ECEF]:Fne,[G.SPHERICAL_MARS_PCPF]:null,[G.SPHERICAL_MOON_PCPF]:null,[G.UNKNOWN]:null,[G.WEB_MERCATOR]:Nne,[G.PLATE_CARREE]:Jt,[G.WGS84]:Th,[G.WGS84_ECEF]:Dne}};function K8(e,t,i=Bk()){return Q(e)||Q(t)?null:qne(e,t,i).projector}function qne(e,t,i){if(Q(e)||Q(t)||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const r=gS(e,i.source),s=gS(t,i.dest);return r===G.UNKNOWN&&s===G.UNKNOWN?Qs(e,t)?i.projector=Jt:i.projector=null:i.projector=Ug[r][s],i}function Bk(){return{source:{spatialReference:null,spatialReferenceId:G.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:G.UNKNOWN,metersPerUnit:1},projector:Jt}}const Gne={spatialReference:null,spatialReferenceId:G.UNKNOWN},Hne={spatialReference:null,spatialReferenceId:G.UNKNOWN},Q8=Bk();Bk();const Za=ote(1),Dm=o6(1),yb=ol(),Oc=ol(),kc=ol(),tr=ol();var E2;let ka=E2=class extends ue{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new E2({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ka.prototype,"cols",void 0),c([d({type:si,json:{write:!0}})],ka.prototype,"level",void 0),c([d({type:String,json:{write:!0}})],ka.prototype,"levelValue",void 0),c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ka.prototype,"origin",void 0),c([d({type:Number,json:{write:!0}})],ka.prototype,"resolution",void 0),c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ka.prototype,"rows",void 0),c([d({type:Number,json:{write:!0}})],ka.prototype,"scale",void 0),ka=E2=c([O("esri.layers.support.LOD")],ka);const qk=ka;var Qc;const dF=new rt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let cr=Qc=class extends ue{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:s=Xe.WebMercator,numLODs:n=24}=e;if(!Zs(s)){const f=[];if(i)for(let y=0;y<i.length;y++){const g=i[y];f.push({level:y,scale:g,resolution:g})}else{let y=5e-4;for(let g=n-1;g>=0;g--)f.unshift({level:g,scale:y,resolution:y}),y*=2}return new Qc({dpi:96,lods:f,origin:new Le(0,0,s),size:[r,r],spatialReference:s})}const o=na(s),a=e.origin?new Le({x:e.origin.x,y:e.origin.y,spatialReference:s}):new Le(o?{x:o.origin[0],y:o.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),l=96,u=1/(nd(s)*39.37*l),h=[];if(i)for(let f=0;f<i.length;f++){const y=i[f],g=y*u;h.push({level:f,scale:y,resolution:g})}else{let f=wV(s)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const y=Math.ceil(n/t);h.push({level:0,scale:f,resolution:f*u});for(let g=1;g<y;g++){const b=f/2**t,w=b*u;h.push({level:g,scale:b,resolution:w}),f=b}}return new Qc({dpi:l,lods:h,origin:a,size:[r,r],spatialReference:s})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=na(e);return e.isWrappable&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return Le.fromJSON(k({spatialReference:t.spatialReference},e))}set lods(e){let t=0,i=0;const r=[];this._levelToLOD={},e&&(t=-1/0,i=1/0,e.forEach(s=>{r.push(s.scale),t=s.scale>t?s.scale:t,i=s.scale<i?s.scale:i,this._levelToLOD[s.level]=s})),this._set("scales",r),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const s=t[r],n=t[r+1];if(s<=e)return r;if(n===e)return r+1;if(s>e&&n<e)return r+Math.log(s/e)/Math.log(s/n)}return r}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,r){const s=this.lodAt(e);if(!s)return null;let n,o;if(typeof t=="number")n=t,o=i;else if(Qs(t.spatialReference,this.spatialReference))n=t.x,o=t.y,r=i;else{const u=Hx(t,this.spatialReference);if(Q(u))return null;n=u.x,o=u.y,r=i}const a=s.resolution*this.size[0],l=s.resolution*this.size[1];return r||(r={id:null,level:0,row:0,col:0,extent:rp()}),r.level=e,r.row=Math.floor((this.origin.y-o)/l+.001),r.col=Math.floor((n-this.origin.x)/a+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=Qc.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===Qc.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(i=o)}if(!i)return;const r=e.level-i.level,s=i.resolution*this.size[0]/2**r,n=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=rp()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*n,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+n}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:i}=this.lodAt(t.level),r=i*this.size[0],s=i*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+r,e[3]=e[1]+s,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return Qc.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const i=[],r=this.lods.length;for(let s=0;s<r;s++){const n=this.lods[s],o=n.resolution*t;i.push(new qk({level:n.level,scale:n.scale,resolution:o}))}return new Qc({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};c([d({type:Number,json:{write:!0}})],cr.prototype,"compressionQuality",void 0),c([d({type:Number,json:{write:!0}})],cr.prototype,"dpi",void 0),c([d({type:String,json:{read:dF.read,write:dF.write,origins:{"web-scene":{read:!1,write:!1}}}})],cr.prototype,"format",void 0),c([d({readOnly:!0})],cr.prototype,"isWrappable",null),c([d({type:Le,json:{write:!0}})],cr.prototype,"origin",void 0),c([xe("origin")],cr.prototype,"readOrigin",null),c([d({type:[qk],value:null,json:{write:!0}})],cr.prototype,"lods",null),c([d({readOnly:!0})],cr.prototype,"minScale",void 0),c([d({readOnly:!0})],cr.prototype,"maxScale",void 0),c([d({readOnly:!0})],cr.prototype,"scales",void 0),c([d({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],cr.prototype,"size",void 0),c([xe("size",["rows","cols"])],cr.prototype,"readSize",null),c([$e("size",{cols:{type:si},rows:{type:si}})],cr.prototype,"writeSize",null),c([d({type:Xe,json:{write:!0}})],cr.prototype,"spatialReference",void 0),cr=Qc=c([O("esri.layers.support.TileInfo")],cr),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(cr||(cr={}));const Wne=cr,Bw={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],s=this.values;return r>=i?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},WT={xsmall:544,small:768,medium:992,large:1200};function Jne(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function JT(e,t){return t?Bw[e].valueToClassName[t].split(" "):[]}const Zne=e=>{let t=class extends e{constructor(...i){super(...i),this._breakpointsHandles=new Ai,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=WT}initialize(){this._breakpointsHandles.add(St(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Ya))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=Ha(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const r=Jne(i);if(!r){const s=JSON.stringify(WT,null,2);console.warn("provided breakpoints are not valid, using defaults:"+s)}i=r?i:WT,this._set("breakpoints",k({},i))}_updateClassNames(){if(!this.container)return;const i=ws.acquire(),r=ws.acquire();let s,n=!1;for(s in Bw){const o=this[s],a=Bw[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(n=!0,this[s]=a,JT(s,o).forEach(l=>r.push(l)),JT(s,a).forEach(l=>i.push(l)))}n&&(this._applyClassNameChanges(i,r),ws.release(i),ws.release(r))}_applyClassNameChanges(i,r){const s=this.container;s&&(r.forEach(n=>s.classList.remove(n)),i.forEach(n=>s.classList.add(n)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in Bw)JT(r,this[r]).forEach(s=>i.classList.remove(s))}};return c([d()],t.prototype,"breakpoints",null),c([d()],t.prototype,"orientation",void 0),c([d()],t.prototype,"widthBreakpoint",void 0),c([d()],t.prototype,"heightBreakpoint",void 0),t=c([O("esri.views.BreakpointsOwner")],t),t};function sI(e){return typeof e=="string"?document.getElementById(e):e}function X8(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function hF(e,t){const i=t.parentNode;i&&i.insertBefore(e,t)}function pF(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}function Yne(e){e.parentNode&&e.parentNode.removeChild(e)}/*!
 * @esri/arcgis-html-sanitizer - v2.9.0 - Mon Dec 13 2021 15:07:01 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2021 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */var Kne="[object Object]";function Qne(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function Xne(e,t){return function(i){return e(t(i))}}var eoe=Function.prototype,eU=Object.prototype,tU=eoe.toString,toe=eU.hasOwnProperty,ioe=tU.call(Object),roe=eU.toString,soe=Xne(Object.getPrototypeOf,Object);function noe(e){return!!e&&typeof e=="object"}function ooe(e){if(!noe(e)||roe.call(e)!=Kne||Qne(e))return!1;var t=soe(e);if(t===null)return!0;var i=toe.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&tU.call(i)==ioe}var aoe=ooe,Yf={exports:{}},Mi={},fv={exports:{}},_p={};function iU(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function loe(e,t,i){}function coe(e,t,i){}var uoe=/javascript\s*\:/img;function doe(e,t){return uoe.test(t)?"":t}_p.whiteList=iU();_p.getDefaultWhiteList=iU;_p.onAttr=loe;_p.onIgnoreAttr=coe;_p.safeAttrValue=doe;var hoe={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,s;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},qy=hoe;function poe(e,t){e=qy.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,r=!1,s=0,n=0,o="";function a(){if(!r){var h=qy.trim(e.slice(s,n)),f=h.indexOf(":");if(f!==-1){var y=qy.trim(h.slice(0,f)),g=qy.trim(h.slice(f+1));if(y){var b=t(s,o.length,y,g,h);b&&(o+=b+"; ")}}}s=n+1}for(;n<i;n++){var l=e[n];if(l==="/"&&e[n+1]==="*"){var u=e.indexOf("*/",n+2);if(u===-1)break;n=u+1,s=n+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||a():l===`
`&&a()}return qy.trim(o)}var foe=poe,gb=_p,moe=foe;function fF(e){return e==null}function yoe(e){var t={};for(var i in e)t[i]=e[i];return t}function rU(e){e=yoe(e||{}),e.whiteList=e.whiteList||gb.whiteList,e.onAttr=e.onAttr||gb.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||gb.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||gb.safeAttrValue,this.options=e}rU.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,s=i.onAttr,n=i.onIgnoreAttr,o=i.safeAttrValue,a=moe(e,function(l,u,h,f,y){var g=r[h],b=!1;if(g===!0?b=g:typeof g=="function"?b=g(f):g instanceof RegExp&&(b=g.test(f)),b!==!0&&(b=!1),f=o(h,f),!!f){var w={position:u,sourcePosition:l,source:y,isWhite:b};if(b){var x=s(h,f,w);return fF(x)?h+":"+f:x}else{var x=n(h,f,w);if(!fF(x))return x}}});return a};var goe=rU;(function(e,t){var i=_p,r=goe;function s(o,a){var l=new r(a);return l.process(o)}t=e.exports=s,t.FilterCSS=r;for(var n in i)t[n]=i[n]})(fv,fv.exports);var Gk={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,s;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},voe=fv.exports.FilterCSS,_oe=fv.exports.getDefaultWhiteList,vS=Gk;function sU(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var nU=new voe;function boe(e,t,i){}function woe(e,t,i){}function Soe(e,t,i){}function xoe(e,t,i){}function oU(e){return e.replace(Toe,"&lt;").replace($oe,"&gt;")}function Ioe(e,t,i,r){if(i=hU(i),t==="href"||t==="src"){if(i=vS.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(vb.lastIndex=0,vb.test(i))return""}else if(t==="style"){if(mF.lastIndex=0,mF.test(i)||(yF.lastIndex=0,yF.test(i)&&(vb.lastIndex=0,vb.test(i))))return"";r!==!1&&(r=r||nU,i=r.process(i))}return i=pU(i),i}var Toe=/</g,$oe=/>/g,Coe=/"/g,Eoe=/&quot;/g,Aoe=/&#([a-zA-Z0-9]*);?/gim,Moe=/&colon;?/gim,Ooe=/&newline;?/gim,vb=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,mF=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,yF=/u\s*r\s*l\s*\(.*/gi;function aU(e){return e.replace(Coe,"&quot;")}function lU(e){return e.replace(Eoe,'"')}function cU(e){return e.replace(Aoe,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function uU(e){return e.replace(Moe,":").replace(Ooe," ")}function dU(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return vS.trim(t)}function hU(e){return e=lU(e),e=cU(e),e=uU(e),e=dU(e),e}function pU(e){return e=aU(e),e=oU(e),e}function koe(){return""}function Poe(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function r(o){return i?!0:vS.indexOf(e,o)!==-1}var s=[],n=!1;return{onIgnoreTag:function(o,a,l){if(r(o))if(l.isClosing){var u="[/removed]",h=l.position+u.length;return s.push([n!==!1?n:l.position,h]),n=!1,u}else return n||(n=l.position),"[removed]";else return t(o,a,l)},remove:function(o){var a="",l=0;return vS.forEach(s,function(u){a+=o.slice(l,u[0]),l=u[1]}),a+=o.slice(l),a}}}function Loe(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("<!--",i);if(r===-1){t+=e.slice(i);break}t+=e.slice(i,r);var s=e.indexOf("-->",r);if(s===-1)break;i=s+3}return t}function Roe(e){var t=e.split("");return t=t.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}Mi.whiteList=sU();Mi.getDefaultWhiteList=sU;Mi.onTag=boe;Mi.onIgnoreTag=woe;Mi.onTagAttr=Soe;Mi.onIgnoreTagAttr=xoe;Mi.safeAttrValue=Ioe;Mi.escapeHtml=oU;Mi.escapeQuote=aU;Mi.unescapeQuote=lU;Mi.escapeHtmlEntities=cU;Mi.escapeDangerHtml5Entities=uU;Mi.clearNonPrintableCharacter=dU;Mi.friendlyAttrValue=hU;Mi.escapeAttrValue=pU;Mi.onIgnoreTagStripAll=koe;Mi.StripTagBody=Poe;Mi.stripCommentTag=Loe;Mi.stripBlankChar=Roe;Mi.cssFilter=nU;Mi.getDefaultCSSWhiteList=_oe;var nI={},Tu=Gk;function Foe(e){var t=Tu.spaceIndex(e);if(t===-1)var i=e.slice(1,-1);else var i=e.slice(1,t+1);return i=Tu.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function Noe(e){return e.slice(0,2)==="</"}function Doe(e,t,i){var r="",s=0,n=!1,o=!1,a=0,l=e.length,u="",h="";e:for(a=0;a<l;a++){var f=e.charAt(a);if(n===!1){if(f==="<"){n=a;continue}}else if(o===!1){if(f==="<"){r+=i(e.slice(s,a)),n=a,s=a;continue}if(f===">"){r+=i(e.slice(s,n)),h=e.slice(n,a+1),u=Foe(h),r+=t(n,r.length,u,h,Noe(h)),s=a+1,n=!1;continue}if(f==='"'||f==="'")for(var y=1,g=e.charAt(a-y);g.trim()===""||g==="=";){if(g==="="){o=f;continue e}g=e.charAt(a-++y)}}else if(f===o){o=!1;continue}}return s<e.length&&(r+=i(e.substr(s))),r}var joe=/[^a-zA-Z0-9_:\.\-]/gim;function zoe(e,t){var i=0,r=[],s=!1,n=e.length;function o(f,y){if(f=Tu.trim(f),f=f.replace(joe,"").toLowerCase(),!(f.length<1)){var g=t(f,y||"");g&&r.push(g)}}for(var a=0;a<n;a++){var l=e.charAt(a),u,h;if(s===!1&&l==="="){s=e.slice(i,a),i=a+1;continue}if(s!==!1&&a===i&&(l==='"'||l==="'")&&e.charAt(a-1)==="="){if(h=e.indexOf(l,a+1),h===-1)break;u=Tu.trim(e.slice(i+1,h)),o(s,u),s=!1,a=h,i=a+1;continue}if(/\s|\n|\t/.test(l))if(e=e.replace(/\s|\n|\t/g," "),s===!1)if(h=Voe(e,a),h===-1){u=Tu.trim(e.slice(i,a)),o(u),s=!1,i=a+1;continue}else{a=h-1;continue}else if(h=Uoe(e,a-1),h===-1){u=Tu.trim(e.slice(i,a)),u=gF(u),o(s,u),s=!1,i=a+1;continue}else continue}return i<e.length&&(s===!1?o(e.slice(i)):o(s,gF(Tu.trim(e.slice(i))))),Tu.trim(r.join(" "))}function Voe(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function Uoe(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function Boe(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function gF(e){return Boe(e)?e.substr(1,e.length-2):e}nI.parseTag=Doe;nI.parseAttr=zoe;var qoe=fv.exports.FilterCSS,Ko=Mi,fU=nI,Goe=fU.parseTag,Hoe=fU.parseAttr,qw=Gk;function _b(e){return e==null}function Woe(e){var t=qw.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=qw.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=qw.trim(e.slice(0,-1))),{html:e,closing:i}}function Joe(e){var t={};for(var i in e)t[i]=e[i];return t}function mU(e){e=Joe(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Ko.onIgnoreTagStripAll),e.whiteList=e.whiteList||Ko.whiteList,e.onTag=e.onTag||Ko.onTag,e.onTagAttr=e.onTagAttr||Ko.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Ko.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Ko.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Ko.safeAttrValue,e.escapeHtml=e.escapeHtml||Ko.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new qoe(e.css))}mU.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,s=i.onTag,n=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,l=i.safeAttrValue,u=i.escapeHtml,h=t.cssFilter;i.stripBlankChar&&(e=Ko.stripBlankChar(e)),i.allowCommentTag||(e=Ko.stripCommentTag(e));var f=!1;if(i.stripIgnoreTagBody){var f=Ko.StripTagBody(i.stripIgnoreTagBody,n);n=f.onIgnoreTag}var y=Goe(e,function(g,b,w,x,T){var M={sourcePosition:g,position:b,isClosing:T,isWhite:r.hasOwnProperty(w)},F=s(w,x,M);if(!_b(F))return F;if(M.isWhite){if(M.isClosing)return"</"+w+">";var D=Woe(x),R=r[w],_=Hoe(D.html,function(W,oe){var te=qw.indexOf(R,W)!==-1,he=o(w,W,oe,te);if(!_b(he))return he;if(te)return oe=l(w,W,oe,h),oe?W+'="'+oe+'"':W;var he=a(w,W,oe,te);return _b(he)?void 0:he}),x="<"+w;return _&&(x+=" "+_),D.closing&&(x+=" /"),x+=">",x}else{var F=n(w,x,M);return _b(F)?u(x):F}},u);return f&&(y=f.remove(y)),y};var Zoe=mU;(function(e,t){var i=Mi,r=nI,s=Zoe;function n(l,u){var h=new s(u);return h.process(l)}t=e.exports=n,t.filterXSS=n,t.FilterXSS=s;for(var o in i)t[o]=i[o];for(var o in r)t[o]=r[o];function a(){return typeof self!="undefined"&&typeof DedicatedWorkerGlobalScope!="undefined"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=e.exports)})(Yf,Yf.exports);var Yoe=function(){function e(t,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(n,o,a,l){return n==="a"&&o==="href"||(n==="img"||n==="source")&&o==="src"?r.sanitizeUrl(a):Yf.exports.safeAttrValue(n,o,a,l)}};var s;t&&!i?s=t:t&&i?(s=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(n){n==="whiteList"?s.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]):s[n]=t[n]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList),this.xssFilterOptions=s,this._xssFilter=new Yf.exports.FilterXSS(s)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t=="undefined"?void 0:null}},e.prototype.sanitizeUrl=function(t){var i=this._trim(t.substring(0,t.indexOf(":")));return t==="/"||t==="#"||t[0]==="#"||this.allowedProtocols.indexOf(i.toLowerCase())>-1?Yf.exports.escapeAttrValue(t):""},e.prototype.sanitizeHTMLAttribute=function(t,i,r,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,r,s):Yf.exports.safeAttrValue(t,i,r,s)},e.prototype.validate=function(t,i){i===void 0&&(i={});var r=this.sanitize(t,i);return{isValid:t===r,sanitized:r}},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(r){Object.keys(r).forEach(function(s){Array.isArray(r[s])&&Array.isArray(i[s])?i[s]=i[s].concat(r[s]):i[s]=r[s]})}),i},e.prototype._iterateOverObject=function(t,i){var r=this;i===void 0&&(i={});try{var s=!1,n=void 0;if(Array.isArray(t))n=t.reduce(function(a,l){var u=r.validate(l,i);return u.isValid?a.concat([l]):(s=!0,a.concat([u.sanitized]))},[]);else if(aoe(t)){var o=Object.keys(t);n=o.reduce(function(a,l){var u=t[l],h=r.validate(u,i);return h.isValid?a[l]=u:(s=!0,a[l]=h.sanitized),a},{})}else return i.allowUndefined&&typeof t=="undefined"?void 0:null;return s?n:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const oI=new Map;function yU(){oI.clear()}function Koe(e){return oI.get(e)}function Qoe(e,t){oI.set(e,t)}function ZT(e){oI.delete(e)}var ap,jm,Xoe=function(e){if("WebkitTransition"in e.style)ap="webkitTransitionEnd",jm="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");ap="transitionend",jm="animationend"}},gU=function(e){ap||Xoe(e)},eae=function(e,t){return t===void 0&&(t=e+"-active"),function(i){gU(i);var r=!1,s=function(n){r||(r=!0,i.removeEventListener(ap,s),i.removeEventListener(jm,s),i.classList.remove(e),i.classList.remove(t))};i.classList.add(e),i.addEventListener(ap,s),i.addEventListener(jm,s),requestAnimationFrame(function(){i.classList.add(t)})}},tae=function(e,t){return t===void 0&&(t=e+"-active"),function(i,r){gU(i);var s=!1,n=function(o){s||(s=!0,i.removeEventListener(ap,n),i.removeEventListener(jm,n),r())};i.classList.add(e),i.addEventListener(ap,n),i.addEventListener(jm,n),requestAnimationFrame(function(){i.classList.add(t)})}};const iae=fe.getLogger("esri.widgets.support.widgetUtils");function Kf(e){const t=ws.acquire();for(let r=0;r<arguments.length;r++){const s=arguments[r],n=typeof s;if(n==="string")t.push(s);else if(Array.isArray(s))t.push.apply(t,s);else if(n==="object")for(const o in s)s[o]&&t.push(o)}const i=t.join(" ");return ws.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(i=>{yU();for(const r of i)e.get(r.target)(r)});return(i,r,s)=>(e.has(i)&&iae.error("Already observing element",i),e.set(i,r),t.observe(i,s),pp(()=>{t.unobserve(i),e.delete(i)}))})();function Is(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function rae(e){return Is(e)?"rtl":"ltr"}function vF(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function Mn(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function sae(e,t){return(e==="enter"?eae:tae)(t)}const nae=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],oae=nae.reduce((e,t)=>(e[t]=[],e),{}),aae=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],mv=new Yoe({whiteList:oae,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(aae.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function lae(e,t){const i=e.getBoundingClientRect(),r=t.getBoundingClientRect(),s=i.top+i.height,n=r.top+r.height,o=i.top,a=r.top;(s>n||o<a)&&e.scrollIntoView({block:"end"})}function Mh(e){return e==="Enter"||e===" "}const vU="http://www.w3.org/",aI=`${vU}2000/svg`,_U=`${vU}1999/xlink`;let _S,_F=[],Hk=(e,t)=>{let i={};return Object.keys(e).forEach(r=>{i[r]=e[r]}),t&&Object.keys(t).forEach(r=>{i[r]=t[r]}),i},Wk=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),bU=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},cae=(e,t,i)=>{if(t.vnodeSelector!==""){for(let r=i;r<e.length;r++)if(Wk(e[r],t))return r}return-1},YT=(e,t,i,r)=>{let s=e[t];if(s.vnodeSelector==="")return;let n=s.properties;if(!(n&&(n.key===void 0?n.bind:n.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(Wk(a,s))throw new Error(`${i.vnodeSelector} had a ${s.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},uae=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},A2=[],M2=!1,wU=e=>{(e.children||[]).forEach(wU),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},bF=()=>{M2=!1,A2.forEach(wU),A2.length=0},wF=e=>{A2.push(e),M2||(M2=!0,typeof window!="undefined"&&"requestIdleCallback"in window?window.requestIdleCallback(bF,{timeout:16}):setTimeout(bF,16))},SF=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),wF(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),wF(e))},dae=(e,t,i)=>{if(!t)return;let r=i.eventHandlerInterceptor,s=Object.keys(t),n=s.length;for(let o=0;o<n;o++){let a=s[o],l=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")O2(e,l,!0);else if(a==="classes"){let u=Object.keys(l),h=u.length;for(let f=0;f<h;f++){let y=u[f];l[y]&&e.classList.add(y)}}else if(a==="styles"){let u=Object.keys(l),h=u.length;for(let f=0;f<h;f++){let y=u[f],g=l[y];g&&(bU(g),i.styleApplyer(e,y,g))}}else if(a!=="key"&&l!=null){let u=typeof l;u==="function"?(a.lastIndexOf("on",0)===0&&(r&&(l=r(a,l,e,t)),a==="oninput"&&function(){let h=l;l=function(f){h.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),e[a]=l):i.namespace===aI?a==="href"?e.setAttributeNS(_U,a,l):e.setAttribute(a,l):u==="string"&&a!=="value"?a==="innerHTML"?e[a]=mv.sanitize(l):e.setAttribute(a,l):e[a]=l}}},hae=(e,t,i)=>{if(t)for(let r of t)Qf(r,e,void 0,i)},SU=(e,t,i)=>{hae(e,t.children,i),t.text&&(e.textContent=t.text),dae(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},Qf=(e,t,i,r)=>{let s,n=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")s=e.domNode=a.createTextNode(e.text),i!==void 0?t.insertBefore(s,i):t.appendChild(s);else{for(let l=0;l<=o.length;++l){let u=o.charAt(l);if(l===o.length||u==="."||u==="#"){let h=o.charAt(n-1),f=o.slice(n,l);h==="."?s.classList.add(f):h==="#"?s.id=f:(f==="svg"&&(r=Hk(r,{namespace:aI})),r.namespace!==void 0?s=e.domNode=a.createElementNS(r.namespace,f):(s=e.domNode=e.domNode||a.createElement(f),f==="input"&&e.properties&&e.properties.type!==void 0&&s.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(s,i):s.parentNode!==t&&t.appendChild(s)),n=l+1}}SU(s,e,r)}},O2=(e,t,i)=>{t&&t.split(" ").forEach(r=>{r&&e.classList.toggle(r,i)})},pae=(e,t,i,r)=>{if(!i)return;let s=!1,n=Object.keys(i),o=n.length;for(let a=0;a<o;a++){let l=n[a],u=i[l],h=t[l];if(l==="class")h!==u&&(O2(e,h,!1),O2(e,u,!0));else if(l==="classes"){let f=e.classList,y=Object.keys(u),g=y.length;for(let b=0;b<g;b++){let w=y[b],x=!!u[w];x!==!!h[w]&&(s=!0,x?f.add(w):f.remove(w))}}else if(l==="styles"){let f=Object.keys(u),y=f.length;for(let g=0;g<y;g++){let b=f[g],w=u[b];w!==h[b]&&(s=!0,w?(bU(w),r.styleApplyer(e,b,w)):r.styleApplyer(e,b,""))}}else if(u||typeof h!="string"||(u=""),l==="value"){let f=e[l];f!==u&&(e["oninput-value"]?f===e["oninput-value"]:u!==h)&&(e[l]=u,e["oninput-value"]=void 0),u!==h&&(s=!0)}else if(u!==h){let f=typeof u;f==="function"&&r.eventHandlerInterceptor||(r.namespace===aI?l==="href"?e.setAttributeNS(_U,l,u):e.setAttribute(l,u):f==="string"?l==="innerHTML"?e[l]=mv.sanitize(u):l==="role"&&u===""?e.removeAttribute(l):e.setAttribute(l,u):e[l]!==u&&(e[l]=u),s=!0)}}return s},fae=(e,t,i,r,s)=>{if(i===r)return!1;r=r||_F;let n,o=(i=i||_F).length,a=r.length,l=0,u=0,h=!1;for(;u<a;){let f=l<o?i[l]:void 0,y=r[u];if(f!==void 0&&Wk(f,y))h=_S(f,y,s)||h,l++;else{let g=cae(i,y,l+1);if(g>=0){for(n=l;n<g;n++)SF(i[n]),YT(i,n,e,"removed");h=_S(i[g],y,s)||h,l=g+1}else Qf(y,t,l<o?i[l].domNode:void 0,s),uae(y),YT(r,u,e,"added")}u++}if(o>l)for(n=l;n<o;n++)SF(i[n]),YT(i,n,e,"removed");return h};_S=(e,t,i)=>{let r=e.domNode,s=!1;if(e===t)return!1;let n=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(o,r),t.domNode=o,s=!0,s}t.domNode=r}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=Hk(i,{namespace:aI})),e.text!==t.text&&(n=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,n=fae(t,r,e.children,t.children,i)||n,n=pae(r,e.properties,t.properties,i)||n,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return n&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),s};let Gy=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,_S(r,i,t)},domNode:e.domNode});const mae={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let uf=e=>Hk(mae,e),Vu={create:(e,t)=>(t=uf(t),Qf(e,document.createElement("div"),void 0,t),Gy(e,t)),append:(e,t,i)=>(i=uf(i),Qf(t,e,void 0,i),Gy(t,i)),insertBefore:(e,t,i)=>(i=uf(i),Qf(t,e.parentNode,e,i),Gy(t,i)),merge:(e,t,i)=>(i=uf(i),t.domNode=e,SU(e,t,i),Gy(t,i)),replace:(e,t,i)=>(i=uf(i),Qf(t,e.parentNode,e,i),e.parentNode.removeChild(e),Gy(t,i))},xU,yae=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};xU=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let gae=(e,t)=>{let i=e;return t.forEach(r=>{i=i&&i.children?xU(i.children,s=>s.domNode===r):void 0}),i},vae=(e,t,i)=>{let r=function(s){i("domEvent",s);let n=t(),o=yae(s.currentTarget,n.domNode);o.reverse();let a,l=gae(n.getLastRender(),o);return e.scheduleRender(),l&&(a=l.properties[`on${s.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",s),a};return(s,n,o,a)=>r},bS=e=>{let t,i,r=uf(e),s=r.performanceLogger,n=!0,o=!1,a=[],l=[],u=(f,y,g)=>{let b,w=()=>b;r.eventHandlerInterceptor=vae(t,w,s),b=f(y,g(),r),a.push(b),l.push(g)},h=()=>{if(i=void 0,n){n=!1,s("renderStart",void 0);for(let f=0;f<a.length;f++){let y=l[f]();s("rendered",void 0),a[f].update(y),s("patched",void 0)}s("renderDone",void 0),n=!0}};return t={renderNow:h,scheduleRender:()=>{i||o||(i=requestAnimationFrame(h))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,n=!0,t.scheduleRender()},append:(f,y)=>{u(Vu.append,f,y)},insertBefore:(f,y)=>{u(Vu.insertBefore,f,y)},merge:(f,y)=>{u(Vu.merge,f,y)},replace:(f,y)=>{u(Vu.replace,f,y)},detach:f=>{for(let y=0;y<l.length;y++)if(l[y]===f)return l.splice(y,1),a.splice(y,1)[0];throw new Error("renderFunction was not found")}},t},Xc=class extends Ee{constructor(){super(...arguments),this.items=new ke,this._watchUpdatingTracking=new pm,this._callbacks=new Map,this._projector=bS(),this._hiddenProjector=bS()}get needsRender(){return this.items.length>0}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const i of t.added){const r=()=>i.render();this._callbacks.set(i,r),this._projector.append(this.surface,r)}for(const i of t.removed){const r=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(r.domNode),this._callbacks.delete(i)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,i=this._hiddenProjector;let r=null;const s=()=>(r=e.render(),r);i.append(t,s),i.renderNow();const n={left:0,top:0,right:0,bottom:0};if(r&&r.domNode){const o=r.domNode.getBoundingClientRect();n.left=o.left,n.top=o.top,n.right=o.right,n.bottom=o.bottom}for(i.detach(s);t.firstChild;)t.removeChild(t.firstChild);return n}overlaps(e,t){const i=this.computeBoundingRect(e),r=this.computeBoundingRect(t);return Math.max(i.left,r.left)<=Math.min(i.right,r.right)&&Math.max(i.top,r.top)<=Math.min(i.bottom,r.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}renderCanvas(e){if(!this.items.some(i=>i.visible))return;const t=e.getContext("2d");t.save(),t.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach(i=>{t.save(),i.renderCanvas(t),t.restore()}),t.restore()}};c([d({readOnly:!0})],Xc.prototype,"surface",void 0),c([d({readOnly:!0})],Xc.prototype,"items",void 0),c([d({readOnly:!0})],Xc.prototype,"needsRender",null),c([d({readOnly:!0})],Xc.prototype,"_watchUpdatingTracking",void 0),c([d({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],Xc.prototype,"updating",void 0),Xc=c([O("esri.views.overlay.ViewOverlay")],Xc);const xF=Xc;function Jk(e,t,i,r){let s=null,n=1e3;typeof t=="number"?(n=t,r=i):(s=t!=null?t:null,n=i);let o,a=0;const l=()=>{a=0,e.apply(r,o)},u=(...h)=>{s&&s.apply(r,h),o=h,n?a||(a=setTimeout(l,n)):l()};return u.remove=()=>{a&&(clearTimeout(a),a=0)},u.forceUpdate=()=>{a&&(clearTimeout(a),l())},u.hasPendingUpdates=()=>!!a,u}const _ae=/\?(\.|$)/g;function Pt(e,t,i,r){const s=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],n=Qe(e,t,i,r);for(const o of s){const a=o.trim().replace(_ae,"$1"),l=e.get(a);i.call(e,l,l,a,e)}return n}function Qe(e,t,i,r){return e.watch(t,i,r)}function IU(e,t,i,r){return c_(e,t,Sae,i,r)}function bae(e,t,i,r){return c_(e,t,CU,i,r)}function XOe(e,t,i,r){return Zk(e,t,CU,i,r)}function TU(e,t,i,r){return c_(e,t,EU,i,r)}function IF(e,t,i,r){return Zk(e,t,EU,i,r)}function k2(e,t,i,r){return c_(e,t,AU,i,r)}function wae(e,t,i,r){return Zk(e,t,AU,i,r)}function $U(e,t,i,r){let s=!1;const n=e.watch(t,(o,a,l,u)=>{s||i.call(e,o,a,l,u)},r);return{remove(){n.remove()},pause(){s=!0},resume(){s=!1}}}function oa(e,t,i,r,s,n,o){const a={};function l(h){const f=a[h];f&&(n&&n(f.target,h,e,i),f.handle.remove(),delete a[h])}const u=Pt(e,t,(h,f,y)=>{l(y),Px(h)&&(a[y]={handle:sa(h,i,r),target:h},s&&s(h,y,e,i))},o);return{remove(){u.remove();for(const h in a)l(h)}}}function c_(e,t,i,r,s){const n=e.watch(t,(o,a,l,u)=>{i&&!i(o)||r==null||r.call(e,o,a,l,u)},s);if(Array.isArray(t))for(const o of t){const a=e.get(o);i&&i(a)&&(r==null||r.call(e,a,a,t,e))}else{const o=e.get(t);i&&i(o)&&(r==null||r.call(e,o,o,t,e))}return n}function Zk(e,t,i,r,s){const n=typeof r=="function"?r:null,o=typeof r=="object"?r:null;typeof r=="boolean"&&(s=r);let a,l=!1;function u(){a&&(a.remove(),a=null)}const h=uc();rs(o,()=>{u(),h.reject(qi())});const f={then:h.promise.then.bind(h.promise),catch:h.promise.catch.bind(h.promise),remove:u};return Object.freeze(f),a=c_(e,t,i,(y,g,b,w)=>{l=!0,u(),n&&n.call(e,y,g,b,w),h.resolve({value:y,oldValue:g,propertyName:b,target:w})},s),l&&u(),f}function Sae(e){return!!e}function CU(e){return!e}function EU(e){return e===!0}function AU(e){return e===!1}function ne(e,t){const i=t?be(k({},t),{source:e}):e;return d({aliasOf:i})}function xae(){const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16);return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}const Iae={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},Tae={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{e.style[t]=i}},$ae=e=>k(k({},Tae),e),Cae=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},Eae=(e,t)=>e.find(t),TF=(e,t,i=!1)=>{let r=e;return t.forEach((s,n)=>{var o;const a=(o=r)!=null&&o.children?Eae(r.children,l=>l.domNode===s):void 0;i&&!a&&n!==t.length-1||(r=a)}),r},Aae=e=>{let t;const i=k(k({},Iae),e),r=$ae(i),s=r.performanceLogger;let n,o=!0,a=!1;const l=[],u=[],h=(y,g,b)=>{let w;r.eventHandlerInterceptor=(T,M,F,D)=>function(R){let _;s("domEvent",R);const q=Cae(R.currentTarget,w.domNode),W=q.some(te=>{var he;return customElements.get(te==null||(he=te.tagName)==null?void 0:he.toLowerCase())});if(R.eventPhase===Event.CAPTURING_PHASE||!W)q.reverse(),_=TF(w.getLastRender(),q);else{const te=R.composedPath(),he=te.slice(te.indexOf(R.currentTarget),te.indexOf(w.domNode)).filter(ge=>ge.getRootNode()===ge.ownerDocument).reverse();_=TF(w.getLastRender(),he,!0)}let oe;return _&&(oe=i.handleInterceptedEvent(t,_,this,R)),s("domEventProcessed",R),oe},i.postProcessProjectionOptions==null||i.postProcessProjectionOptions(r);const x=b();w=y(g,x,r),l.push(w),u.push(b),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(w,x)};let f=()=>{if(n=void 0,o){o=!1,s("renderStart",void 0);for(let y=0;y<l.length;y++){const g=u[y]();s("rendered",void 0),l[y].update(g),s("patched",void 0)}s("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(f=i.modifyDoRenderImplementation(f,l,u)),t={renderNow:f,scheduleRender:()=>{n||a||(n=requestAnimationFrame(f))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(y,g)=>{h(Vu.append,y,g)},insertBefore:(y,g)=>{h(Vu.insertBefore,y,g)},merge:(y,g)=>{h(Vu.merge,y,g)},replace:(y,g)=>{h(Vu.replace,y,g)},detach:y=>{for(let g=0;g<u.length;g++)if(u[g]===y)return u.splice(g,1),l.splice(g,1)[0];throw new Error("renderFunction was not found")}},t},ri={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let df,MU,lI,OU=!1,wS=!1,Yk=!1,Tn=!1,$F=null,P2=!1;const hy=typeof window!="undefined"?window:{};ri.cssVarShim&&hy.CSS;const aa=hy.document||{head:{}},eke=hy.HTMLElement||class{},Vr={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},SS=ri.shadowDomShim&&ri.shadowDom?(()=>(aa.head.attachShadow+"").indexOf("[native")>-1)():!0,Mae=(()=>{let e=!1;try{aa.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),Oae=e=>Promise.resolve(e),kae=ri.constructableCSS?(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replace=="function"}catch{}return!1})():!1,kU=(e,t,i,r)=>{i&&i.map(([s,n,o])=>{const a=Lae(e,s),l=Pae(t,o),u=Rae(s);Vr.ael(a,n,l,u),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Vr.rel(a,n,l,u))})},Pae=(e,t)=>i=>{try{ri.lazyLoad||e.$hostElement$[t](i)}catch(r){u_(r)}},Lae=(e,t)=>t&4?aa:t&8?hy:t&16?aa.body:e,Rae=e=>Mae?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,CF="http://www.w3.org/1999/xlink",lp=(e,t="")=>()=>{},EF=new WeakMap,Fae=(e,t,i)=>{let r=TS.get(e);kae&&i?(r=r||new CSSStyleSheet,r.replace(t)):r=t,TS.set(e,r)},Nae=(e,t,i,r)=>{let s=PU(t,i),n=TS.get(s);if(e=e.nodeType===11?e:aa,n)if(typeof n=="string"){e=e.head||e;let o=EF.get(e),a;o||EF.set(e,o=new Set),o.has(s)||(a=aa.createElement("style"),a.innerHTML=n,e.insertBefore(a,e.querySelector("link")),o&&o.add(s))}else e.adoptedStyleSheets.includes(n)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,n]);return s},Dae=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,s=lp("attachStyles",t.$tagName$),n=Nae(SS&&i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);r&10&&(i["s-sc"]=n,i.classList.add(n+"-h"),r&2&&i.classList.add(n+"-s")),s()},PU=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),jae=e=>mle.map(t=>t(e)).find(t=>!!t),AF={},zae="http://www.w3.org/2000/svg",Vae="http://www.w3.org/1999/xhtml",Uae=e=>e!=null,Kk=e=>(e=typeof e,e==="object"||e==="function"),LU=(e,t,...i)=>{let r=null,s=null,n=null,o=!1,a=!1,l=[];const u=f=>{for(let y=0;y<f.length;y++)r=f[y],Array.isArray(r)?u(r):r!=null&&typeof r!="boolean"&&((o=typeof e!="function"&&!Kk(r))&&(r=String(r)),o&&a?l[l.length-1].$text$+=r:l.push(o?xS(null,r):r),a=o)};if(u(i),t&&(ri.isDev&&e==="input"&&Hae(t),ri.vdomKey&&t.key&&(s=t.key),ri.slotRelocation&&t.name&&(n=t.name),ri.vdomClass)){const f=t.className||t.class;f&&(t.class=typeof f!="object"?f:Object.keys(f).filter(y=>f[y]).join(" "))}if(ri.isDev&&l.some(RU)&&fle(`The <Host> must be the single root component. Make sure:
- You are NOT using hostData() and <Host> in the same component.
- <Host> is used once, and it's the single root component of the render() function.`),ri.vdomFunctional&&typeof e=="function")return e(t===null?{}:t,l,qae);const h=xS(e,null);return h.$attrs$=t,l.length>0&&(h.$children$=l),ri.vdomKey&&(h.$key$=s),ri.slotRelocation&&(h.$name$=n),h},xS=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return ri.vdomAttribute&&(i.$attrs$=null),ri.vdomKey&&(i.$key$=null),ri.slotRelocation&&(i.$name$=null),i},Bae={},RU=e=>e&&e.$tag$===Bae,qae={forEach:(e,t)=>e.map(MF).forEach(t),map:(e,t)=>e.map(MF).map(t).map(Gae)},MF=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),Gae=e=>{if(typeof e.vtag=="function"){const i=Object.assign({},e.vattrs);return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),LU(e.vtag,i,...e.vchildren||[])}const t=xS(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Hae=e=>{const t=Object.keys(e),i=t.indexOf("value");if(i===-1)return;const r=t.indexOf("type"),s=t.indexOf("min"),n=t.indexOf("max"),o=t.indexOf("step");(i<r||i<s||i<n||i<o)&&GU('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},OF=(e,t,i,r,s,n)=>{if(i!==r){let o=RF(e,t),a=t.toLowerCase();if(t==="class"){const l=e.classList,u=kF(i),h=kF(r);l.remove(...u.filter(f=>f&&!h.includes(f))),l.add(...h.filter(f=>f&&!u.includes(f)))}else if(t==="style"){for(const l in i)(!r||r[l]==null)&&(l.includes("-")?e.style.removeProperty(l):e.style[l]="");for(const l in r)(!i||r[l]!==i[l])&&(l.includes("-")?e.style.setProperty(l,r[l]):e.style[l]=r[l])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):RF(hy,a)?t=a.slice(2):t=a[2]+t.slice(3),i&&Vr.rel(e,t,i,!1),r&&Vr.ael(e,t,r,!1);else{const l=Kk(r);if((o||l&&r!==null)&&!s)try{if(e.tagName.includes("-"))e[t]=r;else{let h=r==null?"":r;t==="list"?o=!1:(i==null||e[t]!=h)&&(e[t]=h)}}catch{}let u=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,u=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(u?e.removeAttributeNS(CF,t):e.removeAttribute(t)):(!o||n&4||s)&&!l&&(r=r===!0?"":r,u?e.setAttributeNS(CF,t,r):e.setAttribute(t,r))}}},Wae=/\s/,kF=e=>e?e.split(Wae):[],FU=(e,t,i,r)=>{const s=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,n=e&&e.$attrs$||AF,o=t.$attrs$||AF;for(r in n)r in o||OF(s,r,n[r],void 0,i,t.$flags$);for(r in o)OF(s,r,n[r],o[r],i,t.$flags$)},IS=(e,t,i,r)=>{let s=t.$children$[i],n=0,o,a,l;if(OU||(Yk=!0,s.$tag$==="slot"&&(df&&r.classList.add(df+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)o=s.$elm$=aa.createTextNode(s.$text$);else if(s.$flags$&1)o=s.$elm$=aa.createTextNode("");else{if(Tn||(Tn=s.$tag$==="svg"),o=s.$elm$=aa.createElementNS(Tn?zae:Vae,s.$flags$&2?"slot-fb":s.$tag$),Tn&&s.$tag$==="foreignObject"&&(Tn=!1),FU(null,s,Tn),Uae(df)&&o["s-si"]!==df&&o.classList.add(o["s-si"]=df),s.$children$)for(n=0;n<s.$children$.length;++n)a=IS(e,s,n,o),a&&o.appendChild(a);s.$tag$==="svg"?Tn=!1:o.tagName==="foreignObject"&&(Tn=!0)}return o["s-hn"]=lI,s.$flags$&3&&(o["s-sr"]=!0,o["s-cr"]=MU,o["s-sn"]=s.$name$||"",l=e&&e.$children$&&e.$children$[i],l&&l.$tag$===s.$tag$&&e.$elm$&&yv(e.$elm$,!1)),o},yv=(e,t)=>{Vr.$flags$|=1;const i=e.childNodes;for(let r=i.length-1;r>=0;r--){const s=i[r];s["s-hn"]!==lI&&s["s-ol"]&&(jU(s).insertBefore(s,Qk(s)),s["s-ol"].remove(),s["s-ol"]=void 0,Yk=!0),t&&yv(s,t)}Vr.$flags$&=-2},NU=(e,t,i,r,s,n)=>{let o=e["s-cr"]&&e["s-cr"].parentNode||e,a;for(o.shadowRoot&&o.tagName===lI&&(o=o.shadowRoot);s<=n;++s)r[s]&&(a=IS(null,i,s,e),a&&(r[s].$elm$=a,o.insertBefore(a,Qk(t))))},DU=(e,t,i,r,s)=>{for(;t<=i;++t)(r=e[t])&&(s=r.$elm$,UU(r),wS=!0,s["s-ol"]?s["s-ol"].remove():yv(s,!0),s.remove())},Jae=(e,t,i,r)=>{let s=0,n=0,o=0,a=0,l=t.length-1,u=t[0],h=t[l],f=r.length-1,y=r[0],g=r[f],b,w;for(;s<=l&&n<=f;)if(u==null)u=t[++s];else if(h==null)h=t[--l];else if(y==null)y=r[++n];else if(g==null)g=r[--f];else if(bb(u,y))hf(u,y),u=t[++s],y=r[++n];else if(bb(h,g))hf(h,g),h=t[--l],g=r[--f];else if(bb(u,g))(u.$tag$==="slot"||g.$tag$==="slot")&&yv(u.$elm$.parentNode,!1),hf(u,g),e.insertBefore(u.$elm$,h.$elm$.nextSibling),u=t[++s],g=r[--f];else if(bb(h,y))(u.$tag$==="slot"||g.$tag$==="slot")&&yv(h.$elm$.parentNode,!1),hf(h,y),e.insertBefore(h.$elm$,u.$elm$),h=t[--l],y=r[++n];else{for(o=-1,a=s;a<=l;++a)if(t[a]&&t[a].$key$!==null&&t[a].$key$===y.$key$){o=a;break}o>=0?(w=t[o],w.$tag$!==y.$tag$?b=IS(t&&t[n],i,o,e):(hf(w,y),t[o]=void 0,b=w.$elm$),y=r[++n]):(b=IS(t&&t[n],i,n,e),y=r[++n]),b&&jU(u.$elm$).insertBefore(b,Qk(u.$elm$))}s>l?NU(e,r[f+1]==null?null:r[f+1].$elm$,i,r,n,f):n>f&&DU(t,s,l)},bb=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,Qk=e=>e&&e["s-ol"]||e,jU=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,hf=(e,t)=>{const i=t.$elm$=e.$elm$,r=e.$children$,s=t.$children$,n=t.$tag$,o=t.$text$;let a;o===null?(Tn=n==="svg"?!0:n==="foreignObject"?!1:Tn,n==="slot"||FU(e,t,Tn),r!==null&&s!==null?Jae(i,r,t,s):s!==null?(e.$text$!==null&&(i.textContent=""),NU(i,null,t,s,0,s.length-1)):r!==null&&DU(r,0,r.length-1),Tn&&n==="svg"&&(Tn=!1)):(a=i["s-cr"])?a.parentNode.textContent=o:e.$text$!==o&&(i.data=o)},zU=e=>{let t=e.childNodes,i,r,s,n,o,a;for(r=0,s=t.length;r<s;r++)if(i=t[r],i.nodeType===1){if(i["s-sr"]){for(o=i["s-sn"],i.hidden=!1,n=0;n<s;n++)if(a=t[n].nodeType,t[n]["s-hn"]!==i["s-hn"]||o!==""){if(a===1&&o===t[n].getAttribute("slot")){i.hidden=!0;break}}else if(a===1||a===3&&t[n].textContent.trim()!==""){i.hidden=!0;break}}zU(i)}},ea=[],VU=e=>{let t,i,r,s,n,o,a=0,l=e.childNodes,u=l.length;for(;a<u;a++){if(t=l[a],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,s=t["s-sn"],o=r.length-1;o>=0;o--)i=r[o],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==t["s-hn"]&&(PF(i,s)?(n=ea.find(h=>h.$nodeToRelocate$===i),wS=!0,i["s-sn"]=i["s-sn"]||s,n?n.$slotRefNode$=t:ea.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&ea.map(h=>{PF(h.$nodeToRelocate$,i["s-sn"])&&(n=ea.find(f=>f.$nodeToRelocate$===i),n&&!h.$slotRefNode$&&(h.$slotRefNode$=n.$slotRefNode$))})):ea.some(h=>h.$nodeToRelocate$===i)||ea.push({$nodeToRelocate$:i}));t.nodeType===1&&VU(t)}},PF=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",UU=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(UU)},Zae=(e,t)=>{const i=e.$hostElement$,r=e.$cmpMeta$,s=e.$vnode$||xS(null,null),n=RU(t)?t:LU(null,null,t);lI=i.tagName,r.$attrsToReflect$&&(n.$attrs$=n.$attrs$||{},r.$attrsToReflect$.map(([o,a])=>n.$attrs$[a]=i[o])),n.$tag$=null,n.$flags$|=4,e.$vnode$=n,n.$elm$=s.$elm$=i.shadowRoot||i,df=i["s-sc"],MU=i["s-cr"],OU=SS&&(r.$flags$&1)!==0,wS=!1,hf(s,n);{if(Vr.$flags$|=1,Yk){VU(n.$elm$);let o,a,l,u,h,f,y=0;for(;y<ea.length;y++)o=ea[y],a=o.$nodeToRelocate$,a["s-ol"]||(l=aa.createTextNode(""),l["s-nr"]=a,a.parentNode.insertBefore(a["s-ol"]=l,a));for(y=0;y<ea.length;y++)if(o=ea[y],a=o.$nodeToRelocate$,o.$slotRefNode$){for(u=o.$slotRefNode$.parentNode,h=o.$slotRefNode$.nextSibling,l=a["s-ol"];l=l.previousSibling;)if(f=l["s-nr"],f&&f["s-sn"]===a["s-sn"]&&u===f.parentNode&&(f=f.nextSibling,!f||!f["s-nr"])){h=f;break}(!h&&u!==a.parentNode||a.nextSibling!==h)&&a!==h&&(!a["s-hn"]&&a["s-ol"]&&(a["s-hn"]=a["s-ol"].parentNode.nodeName),u.insertBefore(a,h))}else a.nodeType===1&&(a.hidden=!0)}wS&&zU(n.$elm$),Vr.$flags$&=-2,ea.length=0}},Yae=e=>ri.lazyLoad?py(e).$hostElement$:e,tke=(e,t,i)=>{const r=Yae(e);return{emit:s=>(ri.isDev&&!r.isConnected&&GU(`The "${t}" event was emitted, but the dispatcher node is no longer connected to the dom.`),Kae(r,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:s}))}},Kae=(e,t,i)=>{const r=Vr.ce(t,i);return e.dispatchEvent(r),r},Qae=(e,t)=>{},Xk=(e,t)=>(e.$flags$|=16,Qae(e,e.$ancestorComponent$),vle(()=>Xae(e,t))),Xae=(e,t)=>{const i=e.$hostElement$,r=lp("scheduleUpdate",e.$cmpMeta$.$tagName$),s=i;let n;return t?n=gm(s,"componentWillLoad"):n=gm(s,"componentWillUpdate"),n=LF(n,()=>gm(s,"componentWillRender")),r(),LF(n,()=>ele(e,s,t))},ele=async(e,t,i)=>{const r=e.$hostElement$,s=lp("update",e.$cmpMeta$.$tagName$);r["s-rc"],i&&Dae(e);const n=lp("render",e.$cmpMeta$.$tagName$);tle(e,t,r),n(),s(),ile(e)},tle=(e,t,i)=>{try{$F=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(ri.hasRenderFn||ri.reflect)&&(ri.vdomRender||ri.reflect)&&(ri.hydrateServerSide||Zae(e,t))}catch(a){u_(a,e.$hostElement$)}return $F=null,null},ile=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,r=lp("postUpdate",t),s=i;e.$ancestorComponent$,gm(s,"componentDidRender"),e.$flags$&64?(gm(s,"componentDidUpdate"),r()):(e.$flags$|=64,gm(s,"componentDidLoad"),r())},ike=e=>{if(ri.updatable){const t=py(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&Xk(t,!1),i}return!1},gm=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(r){u_(r)}},LF=(e,t)=>e&&e.then?e.then(t):t(),rle=(e,t)=>e!=null&&!Kk(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,sle=(e,t)=>py(e).$instanceValues$.get(t),nle=(e,t,i,r)=>{const s=py(e),n=e,o=s.$instanceValues$.get(t),a=s.$flags$,l=n;if(i=rle(i,r.$members$[t][0]),i!==o){s.$instanceValues$.set(t,i);{if(r.$watchers$&&a&128){const u=r.$watchers$[t];u&&u.map(h=>{try{l[h](i,o,t)}catch(f){u_(f,n)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(i,o,t)===!1)return;Xk(s,!1)}}}},ole=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),s=e.prototype;r.map(([n,[o]])=>{(o&31||o&32)&&Object.defineProperty(s,n,{get(){return sle(this,n)},set(a){nle(this,n,a,t)},configurable:!0,enumerable:!0})});{const n=new Map;s.attributeChangedCallback=function(o,a,l){Vr.jmp(()=>{const u=n.get(o);if(this.hasOwnProperty(u))l=this[u],delete this[u];else if(s.hasOwnProperty(u)&&typeof this[u]=="number"&&this[u]==l)return;this[u]=l===null&&typeof this[u]=="boolean"?!1:l})},e.observedAttributes=r.filter(([o,a])=>a[0]&15).map(([o,a])=>{const l=a[1]||o;return n.set(l,o),a[0]&512&&t.$attrsToReflect$.push([o,l]),l})}}return e},ale=async(e,t,i,r,s)=>{if((t.$flags$&32)===0&&(s=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>t.$flags$|=128),s.style)){let o=s.style;typeof o!="string"&&(o=o[t.$modeName$=jae(e)]);const a=PU(i,t.$modeName$);if(!TS.has(a)){const l=lp("registerStyles",i.$tagName$);Fae(a,o,!!(i.$flags$&1)),l()}}t.$ancestorComponent$,(()=>Xk(t,!0))()},lle=e=>{},cle=e=>{if((Vr.$flags$&1)===0){const t=py(e),i=t.$cmpMeta$,r=lp("connectedCallback",i.$tagName$);t.$flags$&1?(kU(e,t,i.$listeners$),lle(t.$lazyInstance$)):(t.$flags$|=1,i.$flags$&12&&ule(e),i.$members$&&Object.entries(i.$members$).map(([s,[n]])=>{if(n&31&&e.hasOwnProperty(s)){const o=e[s];delete e[s],e[s]=o}}),ale(e,t,i)),r()}},ule=e=>{const t=e["s-cr"]=aa.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},dle=e=>{if((Vr.$flags$&1)===0){const t=py(e);t.$rmListeners$&&(t.$rmListeners$.map(i=>i()),t.$rmListeners$=void 0)}},rke=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};i.$members$=t[2],i.$listeners$=t[3],i.$watchers$=e.$watchers$,i.$attrsToReflect$=[],!SS&&i.$flags$&1&&(i.$flags$|=8);const r=e.prototype.connectedCallback,s=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){ple(this,i)},connectedCallback(){cle(this),r&&r.call(this)},disconnectedCallback(){dle(this),s&&s.call(this)},__attachShadow(){SS?this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)}):this.shadowRoot=this}}),e.is=i.$tagName$,ole(e,i)},ske=e=>{const t=new URL(e,Vr.$resourcesUrl$);return t.origin!==hy.location.origin?t.href:t.pathname},hle=e=>Vr.$resourcesUrl$=e,BU=new WeakMap,py=e=>BU.get(e),ple=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return kU(e,i,t.$listeners$),BU.set(e,i)},RF=(e,t)=>t in e,u_=(e,t)=>(0,console.error)(e,t),qU=ri.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],fle=(...e)=>console.error(...qU,...e),GU=(...e)=>console.warn(...qU,...e),TS=new Map,mle=[],FF=[],HU=[],yle=(e,t)=>i=>{e.push(i),P2||(P2=!0,t&&Vr.$flags$&4?gle(L2):Vr.raf(L2))},NF=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){u_(i)}e.length=0},L2=()=>{NF(FF),NF(HU),(P2=FF.length>0)&&Vr.raf(L2)},gle=e=>Oae().then(e),vle=yle(HU,!0),nke={isDev:!!ri.isDev,isBrowser:!0,isServer:!1,isTesting:!!ri.isTesting};let WU;function _le(){hle(An(It(WU)))}WU="components/assets";const JU=Symbol("widget"),ble=[],wle={},$S=new WeakMap;function ZU(e,t){let i=t.children;if(i&&i.length)for(let s=0;s<i.length;++s)i[s]=ZU(e,i[s]);else i=ble;const r=t.vnodeSelector;if(eP(r)){const s=t.properties||wle,n=s.key||r;return{vnodeSelector:"div",properties:{key:n,afterCreate:Sle,afterUpdate:xle,afterRemoved:YU,parentWidget:e,widgetConstructor:r,widgetProperties:be(k({},s),{key:n,children:i})},children:void 0,text:void 0,domNode:null}}return t}function Sle(e,t,i,{parentWidget:r,widgetConstructor:s,widgetProperties:n}){const o=new s(n);o.container=e,$S.set(e,o),o.afterCreate==null||o.afterCreate(o,e),r._internalHandles.add(pp(()=>YU(e)))}function xle(e,t,i,{widgetProperties:r}){const s=$S.get(e);s&&(s.set(r),s.afterUpdate==null||s.afterUpdate(s,e))}function YU(e){const t=$S.get(e);t&&(t.destroy(),$S.delete(e))}function eP(e){return typeof e=="function"&&e[JU]}function KU(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function tP(){return KU().startsWith("dark")}function Ile(){return"calcite-theme-"+(tP()?"dark":"light")}const QU="esri.widgets.Widget",DF=fe.getLogger(QU);let Tle=0;const $le={widgetIcon:"esri-icon-checkbox-unchecked"};function XU(e,t){for(const i in t)e[i]!=null&&(typeof e[i]=="object"&&typeof t[i]=="object"?XU(e[i],t[i]):e[i]=t[i]);return e}const Cle=Aae({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(r,s,n,o)=>{const a=t(r,s,n,o),l=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in n)||l){const u=r[2].toLowerCase()+r.slice(3),h=g=>a.call(n,g);n.addEventListener(u,h,l);const f=()=>n.removeEventListener(u,h,l),y=o.afterRemoved;o.afterRemoved=g=>{y==null||y(g),f()}}return a}},handleInterceptedEvent(e,t,i,r){const{eventPhase:s,type:n}=r,o=s===Event.CAPTURING_PHASE;let a=`on${n}${o?"capture":""}`;const l=t.properties;(a in l||(a=`on${n[0].toUpperCase()}${n.slice(1)}${o?"Capture":""}`,a in l))&&(yU(),e.scheduleRender(),l[a].call(l.bind||i,r))}});let KT=!1,Yi=class extends Vx(bo.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new Ai,this._projector=Cle,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=$le.widgetIcon,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=Nx(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const a=await mi(this._messageBundleProps.map(async({bundlePath:l,propertyName:u})=>{let h=await Em(l);this.uiStrings&&Object.keys(this.uiStrings)&&(h=XU(K(h),this.uiStrings)),this[u]=h}));for(const l of a)l.error&&DF.error("widget-intl:locale-error",this.declaredClass,l.error)}await this.loadLocale()}),_le();const i=["light","dark"],r=KU()||"light";i.includes(r)||$x(DF,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,see:"https://developers.arcgis.com/javascript/latest/styling/"});const s="esri-widget-uid-"+xae(),n=this.render.bind(this);this._trackingTarget=new Dx(()=>this.scheduleRender());const o=()=>{var a;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:s,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const l=n();let{properties:u}=l;u||(l.properties=u={});let{key:h,styles:f}=u;h||(u.key=s),f||(u.styles=f={}),f.display||(f.display="");let y=0;return(a=l.children)==null||a.forEach(g=>{if(eP(g.vnodeSelector))return;let{properties:b}=g;b||(g.properties=b={}),b.key||(b.key=`${this.id}--${y++}`)}),ZU(this,l)};this.render=()=>{if(KT)return o();let a=Koe(this);if(a)return a;this._trackingTarget.clear(),KT=!0;try{a=cc(this._trackingTarget,o)}finally{KT=!1}return Qoe(this,a),a},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()}))}normalizeCtorArgs(e,t){const i=k({},e);return t&&(i.container=t),i}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(OC)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(this._trackingTarget=Ha(this._trackingTarget),this.viewModel=Ha(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,ZT(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return sI(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+Tle++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector,handles:this._internalHandles}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(ZT(this),this._projector.scheduleRender())}classes(...e){return Kf.apply(this,e)}own(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments)),this._internalHandles.add(e)}renderNow(){ZT(this),this._projector.renderNow()}_postInitialize(){var e;if(this.destroyed)return;this.scheduleRender(),(e=this._delegatedEventNames)!=null&&e.length&&this._internalHandles.add(St(()=>this.viewModel,(i,r)=>{r&&this._internalHandles.remove("delegated-events"),i&&this._internalHandles.add(this._delegatedEventNames.map(s=>i.on(s,n=>{this.emit(s,n)})),"delegated-events")},Ya)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(OC),this.scheduleRender()};this._internalHandles.add([Xv(t),St(()=>this.uiStrings,t),Jx(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};Yi[JU]=!0,c([d()],Yi.prototype,"_readyForTrueRender",void 0),c([d({value:null})],Yi.prototype,"container",null),c([gt("container")],Yi.prototype,"castContainer",null),c([d({aliasOf:"container"})],Yi.prototype,"domNode",void 0),c([d()],Yi.prototype,"iconClass",void 0),c([d()],Yi.prototype,"id",null),c([d()],Yi.prototype,"label",void 0),c([d()],Yi.prototype,"renderable",null),c([d()],Yi.prototype,"uiStrings",void 0),c([d()],Yi.prototype,"viewModel",void 0),c([d()],Yi.prototype,"visible",void 0),c([d()],Yi.prototype,"key",void 0),c([d()],Yi.prototype,"children",void 0),c([d()],Yi.prototype,"afterCreate",void 0),c([d()],Yi.prototype,"afterUpdate",void 0),c([d()],Yi.prototype,"afterRemoved",void 0),Yi=c([O(QU)],Yi);const Yt=Yi;function Ele(e){return 32+e.length}function Ale(){return 16}function oke(e){if(!e)return 0;let t=32;for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];switch(typeof r){case"string":t+=Ele(r);break;case"number":t+=Ale();break;case"boolean":t+=4}}return t}function ake(e,t){return 32+e.length*t}var CS;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(CS||(CS={}));const jF=["B","kB","MB","GB","TB"];function Mle(e,t){let i=t===0?0:Math.floor(Math.log(t)/Math.log(CS.KILOBYTES));i=fo(i,0,jF.length-1);const r=ha(t/CS.KILOBYTES**i,{maximumFractionDigits:2});return Xa(e.units.bytes[jF[i]],{fileSize:r})}function Ole(e){const{exifInfo:t,exifName:i,tagName:r}=e;if(!t||!i||!r)return null;const s=t.find(n=>n.name===i);return s?kle({tagName:r,tags:s.tags}):null}function kle(e){const{tagName:t,tags:i}=e;if(!i||!t)return null;const r=i.find(s=>s.name===t);return r&&r.value||null}var R2;const Ple={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let Fs=R2=class extends ue{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=Ole({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return Ple[t]||null}clone(){return new R2({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};c([d({type:String})],Fs.prototype,"contentType",void 0),c([d()],Fs.prototype,"exifInfo",void 0),c([d({readOnly:!0})],Fs.prototype,"orientationInfo",null),c([d({type:si})],Fs.prototype,"id",void 0),c([d({type:String})],Fs.prototype,"globalId",void 0),c([d({type:String})],Fs.prototype,"keywords",void 0),c([d({type:String})],Fs.prototype,"name",void 0),c([d({json:{read:!1}})],Fs.prototype,"parentGlobalId",void 0),c([d({json:{read:!1}})],Fs.prototype,"parentObjectId",void 0),c([d({type:si})],Fs.prototype,"size",void 0),c([d({json:{read:!1}})],Fs.prototype,"url",void 0),Fs=R2=c([O("esri.layers.support.AttachmentInfo")],Fs);const e9=Fs;var F2;let Mr=F2=class extends ue{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new F2(K({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};c([d({type:[String],json:{write:!0}})],Mr.prototype,"attachmentTypes",void 0),c([d({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Mr.prototype,"attachmentsWhere",void 0),c([d({type:[String],json:{write:!0}})],Mr.prototype,"keywords",void 0),c([d({type:[Number],json:{write:!0}})],Mr.prototype,"globalIds",void 0),c([d({json:{write:!0}})],Mr.prototype,"name",void 0),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],Mr.prototype,"num",void 0),c([d({type:[Number],json:{write:!0}})],Mr.prototype,"objectIds",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],Mr.prototype,"returnMetadata",void 0),c([d({type:[Number],json:{write:!0}})],Mr.prototype,"size",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],Mr.prototype,"start",void 0),c([$e("start"),$e("num")],Mr.prototype,"writeStart",null),c([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Mr.prototype,"where",void 0),Mr=F2=c([O("esri.rest.support.AttachmentQuery")],Mr),Mr.from=jt(Mr);const gv=Mr,Lle="esri.widgets.Feature.support.featureUtils",zF=fe.getLogger(Lle),Rle=/href=(""|'')/gi,Fle=/(\{([^\{\r\n]+)\})/g,Nle=/\'/g,t9=/^\s*expression\//i,Dle=/(\n)/gi,jle=/[\u00A0-\u9999<>\&]/gim,zle=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,Vle=/^(?:mailto:|tel:)/,i9="relationships/",N2=oy("short-date-short-time");function r9(e){if(!Q(e))return e.get("sourceLayer")||e.get("layer")}async function ES(e,t){return typeof e=="function"?e.call(null,t):e}function s9(e=""){if(e)return!Vle.test(e.trim().toLowerCase())}function n9(e){return!!e&&t9.test(e)}function Ule(e,t){if(!n9(t)||!e)return null;const i=t.replace(t9,"").toLowerCase();let r;return e.some(s=>s.name.toLowerCase()===i&&(r=s,!0)),r}function o9(e,t){const i=Ule(t,e==null?void 0:e.fieldName);return i?i.title||null:e?e.label||e.fieldName:null}function Ble(e,t){const i=t.get(e.toLowerCase());return`{${i&&i.fieldName||e}}`}function qle(e){return e.replace(Rle,"")}function AS(e,t){const i=iP(t,e);return i?i.name:e}function Gle(e,t){return e&&e.map(i=>AS(i,t))}function iP(e,t){return e&&typeof e.getField=="function"?e.getField(t):null}function a9(e){return`${e}`.trim()}function Oh({attributes:e,globalAttributes:t,layer:i,text:r,expressionAttributes:s,fieldInfoMap:n}){return r?D2({formattedAttributes:t,template:Zle(r,k(k(k({},t),s),e),i),fieldInfoMap:n}):""}function D2({formattedAttributes:e,template:t,fieldInfoMap:i}){return a9(qle(Xa(Xa(t,r=>Ble(r,i)),e)))}function Hle(e,t,i=!1){const r=t[e];if(typeof r=="string"){const s="%27",n=(i?encodeURIComponent(r):r).replace(Nle,s);t[e]=n}}function Wle(e,t=!1){const i=k({},e);return Object.keys(i).forEach(r=>Hle(r,i,t)),i}function Jle(e,t,i){const r=(t=a9(t))&&t[0]!=="{";return Xa(e,Wle(i,r))}function j2(e,t){return e.replace(Fle,(i,r,s)=>{const n=iP(t,s);return n?`{${n.name}}`:r})}function Zle(e,t,i){const r=j2(e,i);return r&&r.replace(zle,(s,n,o)=>Jle(s,n||o,t))}function Yle(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const i=Number(e);if(!isNaN(i))return i}return e}function Kle(e){return(e==null?void 0:e.type)==="feature"}function Qle(e){return(e==null?void 0:e.type)==="map-image"}function Xle(e){return!(e==null||!e.layer)}function l9(e,t){const i=t.fieldInfos,r=t.fieldName,s=c9(i,r),n=s==null?void 0:s.clone(),o=t.preventPlacesFormatting,a=t.layer,l=iP(a,r);if(n&&(l==null?void 0:l.type)==="date"){const h=n.format||new I0;h.dateFormat=h.dateFormat||"short-date-short-time",h.dateTimeFormatOptions=Kle(a)&&a.datesInUnknownTimezone||Xle(a)&&Qle(a.layer)&&a.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,n.format=h}const u=n&&n.format;return typeof(e=Yle(e,u))=="string"||e==null||u==null?d_(e):o?ha(e,be(k({},Yx(u)),{minimumFractionDigits:0,maximumFractionDigits:20})):u.format(e)}function c9(e,t){if(!e||!e.length||!t)return;const i=t.toLowerCase();let r;return e.some(s=>!(!s.fieldName||s.fieldName.toLowerCase()!==i)&&(r=s,!0)),r}function ece({fieldName:e,graphic:t,layer:i}){if(ic(e)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||e!==r)return null;const s=i.getFeatureType(t);return s?s.name:null}function tce({fieldName:e,value:t,graphic:i,layer:r}){if(ic(e)||!r||typeof r.getFieldDomain!="function")return null;const s=r.getFieldDomain(e,{feature:i});return s&&s.type==="coded-value"?s.getName(t):null}function ice(e,t){const{creatorField:i,creationDateField:r,editorField:s,editDateField:n}=e;if(!t)return;const o=t[n];if(typeof o=="number"){const l=t[s];return{type:"edit",date:fi(o,N2),user:l}}const a=t[r];if(typeof a=="number"){const l=t[i];return{type:"create",date:fi(a,N2),user:l}}return null}function rce(e,t){const i=new Map;return e&&e.forEach(r=>{const s=AS(r.fieldName,t);r.fieldName=s,i.set(s.toLowerCase(),r)}),i}function VF(e){const t=[];if(!e)return t;const{fieldInfos:i,content:r}=e;return i&&t.push(...i),r&&Array.isArray(r)&&r.forEach(s=>{if(s.type==="fields"){const n=s&&s.fieldInfos;n&&t.push(...n)}}),t}function rP(e){return e.replace(jle,t=>`&#${t.charCodeAt(0)};`)}function d_(e){return typeof e=="string"?e.replace(Dle,'<br class="esri-text-new-line" />'):e}function sce(e){const{value:t,fieldName:i,fieldInfos:r,fieldInfoMap:s,layer:n,graphic:o}=e;if(t==null)return"";const a=tce({fieldName:i,value:t,graphic:o,layer:n});if(a)return a;const l=ece({fieldName:i,graphic:o,layer:n});if(l)return l;if(s.get(i.toLowerCase()))return l9(t,{fieldInfos:r,fieldName:i,layer:n});const u=n&&n.fieldsIndex;return u&&u.isDateField(i)?fi(t,N2):d_(t)}function QT({fieldInfos:e,attributes:t,layer:i,graphic:r,fieldInfoMap:s,relatedInfos:n}){const o={};return n==null||n.forEach(a=>cce(o,a)),Object.keys(t).forEach(a=>{const l=t[a];o[a]=sce({fieldName:a,fieldInfos:e,fieldInfoMap:s,layer:i,value:l,graphic:r})}),o}async function nce(e,t){var i,r;const{layer:s,graphic:n,outFields:o,objectIds:a,returnGeometry:l,spatialReference:u}=e,h=a[0];if(typeof h!="number"&&typeof h!="string"){const y="Could not query required fields for the specified feature. The feature's ID is invalid.",g={layer:s,graphic:n,objectId:h,requiredFields:o};return zF.warn(y,g),null}if((i=s.capabilities)==null||(r=i.operations)==null||!r.supportsQuery){const y="The specified layer cannot be queried. The following fields will not be available.",g={layer:s,graphic:n,requiredFields:o,returnGeometry:l};return zF.warn(y,g),null}const f=s.createQuery();return f.objectIds=a,f.outFields=o!=null&&o.length?o:[s.objectIdField],f.returnGeometry=!!l,f.returnZ=!!l,f.returnM=!!l,f.outSpatialReference=u,(await s.queryFeatures(f,t)).features[0]}async function oce(e){var t;if((t=e.expressionInfos)==null||!t.length)return!1;const i=await hc(),{arcadeUtils:{hasGeometryFunctions:r}}=i;return r(e)}async function ace({graphic:e,popupTemplate:t,layer:i,spatialReference:r},s){if(!i||!t||(typeof i.load=="function"&&await i.load(s),!e.attributes))return;const n=e.attributes[i.objectIdField];if(n==null)return;const o=[n],a=await t.getRequiredFields(i.fieldsIndex),l=hie(a,e),u=l?[]:a,h=t.returnGeometry||await oce(t);if(l&&!h)return;const f=await nce({layer:i,graphic:e,outFields:u,objectIds:o,returnGeometry:h,spatialReference:r},s);f&&(f.geometry&&(e.geometry=f.geometry),f.attributes&&(e.attributes=k(k({},e.attributes),f.attributes)))}function ic(e=""){return!!e&&e.indexOf(i9)!==-1}function lce(e){return e?`${i9}${e.layerId}/${e.fieldName}`:""}function UF({attributes:e,graphic:t,relatedInfo:i}){e&&t&&i&&Object.keys(t.attributes).forEach(r=>{const s=lce({layerId:i.relation.id.toString(),fieldName:r});e[s]=t.attributes[r]})}function cce(e,t){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach(i=>UF({attributes:e,graphic:i,relatedInfo:t})),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach(i=>UF({attributes:e,graphic:i,relatedInfo:t})))}const BF=e=>{if(!e)return!1;const t=e.toUpperCase();return t.indexOf("CURRENT_TIMESTAMP")>-1||t.indexOf("CURRENT_DATE")>-1||t.indexOf("CURRENT_TIME")>-1},u9=({layer:e,method:t,query:i,definitionExpression:r})=>{var s,n;if((s=e.capabilities)==null||(n=s.query)==null||!n.supportsCacheHint||t==="attachments")return;const o=N(i.where)&&i.where,a=N(i.geometry)&&i.geometry;BF(r)||BF(o)||(a==null?void 0:a.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},uce=({query:e,layer:t,method:i})=>{u9({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},dce=({queryPayload:e,layer:t,method:i})=>{u9({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},qF={editing:!1,operations:{add:!0,update:!0,delete:!0}},d9=ke.ofType(e9),hce="graphic.layer.capabilities.operations.supportsResizeAttachments";let jo=class extends Am{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities=k({},qF),this.activeAttachmentInfo=null,this.attachmentInfos=new d9,this.graphic=null,this.mode="view",this.handles.add([Pt(this,"graphic",()=>this._graphicChanged())])}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return k(k({},qF),e)}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get(hce)||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||typeof e.queryAttachments!="function")throw new B("invalid-layer","getAttachments(): A valid layer is required.");const i=this._getFeatureId(),r=new gv({objectIds:[i],returnMetadata:!0}),s=[],n=e.queryAttachments(r).then(a=>a[i]||s).catch(()=>s);this._getAttachmentsPromise=n,this.notifyChange("state");const o=await n;return t.removeAll(),o.length&&t.addMany(o),this._getAttachmentsPromise=null,this.notifyChange("state"),o}async addAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:r,abilities:s}=this;if(!e)throw new B("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!s.operations.add)throw new B("invalid-abilities","addAttachment(): add abilities are required.");if(!t||typeof t.addAttachment!="function")throw new B("invalid-layer","addAttachment(): A valid layer is required.");const n=t.addAttachment(r,e).then(a=>this._queryAttachment(a.objectId)),o=await n;return i.add(o),o}async deleteAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:r,abilities:s}=this;if(!e)throw new B("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!s.operations.delete)throw new B("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||typeof t.deleteAttachments!="function")throw new B("invalid-layer","deleteAttachment(): A valid layer is required.");const n=t.deleteAttachments(r,[e.id]).then(()=>e),o=await n;return i.remove(o),o}async updateAttachment(e,t=this.activeAttachmentInfo){const{_attachmentLayer:i,attachmentInfos:r,graphic:s,abilities:n}=this;if(!e)throw new B("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new B("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!n.operations.update)throw new B("invalid-abilities","updateAttachment(): Update abilities are required.");const o=r.findIndex(u=>u===t);if(!i||typeof i.updateAttachment!="function")throw new B("invalid-layer","updateAttachment(): A valid layer is required.");const a=i.updateAttachment(s,t.id,e).then(u=>this._queryAttachment(u.objectId)),l=await a;return r.splice(o,1,l),l}async _queryAttachment(e){if(!e)throw new B("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:t}=this,i=this._getFeatureId(),r=new gv({objectIds:[i],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return t.queryAttachments(r).then(s=>s[i][0])}_getFeatureId(){const{_attachmentLayer:e,graphic:t}=this;if(!e||!t)return null;const{objectIdField:i}=e,{attributes:r}=t;return r&&r[i]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,t=r9(e);this._attachmentLayer=t?t.type==="scene"&&N(t.associatedLayer)?t.associatedLayer:t:null}};c([d()],jo.prototype,"abilities",void 0),c([gt("abilities")],jo.prototype,"castAbilities",null),c([d()],jo.prototype,"activeAttachmentInfo",void 0),c([d({readOnly:!0,type:d9})],jo.prototype,"attachmentInfos",void 0),c([d({type:xr})],jo.prototype,"graphic",void 0),c([d()],jo.prototype,"mode",void 0),c([d({readOnly:!0})],jo.prototype,"state",null),c([d({readOnly:!0})],jo.prototype,"supportsResizeAttachments",null),jo=c([O("esri.widgets.Attachments.AttachmentsViewModel")],jo);const sP=jo;function pce(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function fce(e){const t=It("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.indexOf("image/")!==-1?`${t}image-32.svg`:e.indexOf("audio/")!==-1?`${t}sound-32.svg`:e.indexOf("video/")!==-1?`${t}video-32.svg`:e.indexOf("msexcel")!==-1||e.indexOf("ms-excel")!==-1||e.indexOf("spreadsheetml")!==-1?`${t}excel-32.svg`:e.indexOf("msword")!==-1||e.indexOf("ms-word")!==-1||e.indexOf("wordprocessingml")!==-1?`${t}word-32.svg`:e.indexOf("powerpoint")!==-1||e.indexOf("presentationml")!==-1?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}function Zt(e){return function(t,i){t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var mce=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},h9=function(e,t){for(var i=0,r=e.length;i<r;i++){var s=e[i];Array.isArray(s)?h9(s,t):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=mce(s)),t.push(s))}},yce=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var s=[];return h9(i,s),{vnodeSelector:e,properties:t||void 0,children:s,text:void 0,domNode:null}};function $(e,t,...i){return typeof e!="function"||eP(e)?yce(e,t,...i):e(t,...i)}const GF={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Me={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},XT=window.CSS;let Yr=class extends Yt{constructor(e,t){super(e,t),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new sP,this.visibleElements=k({},GF),this._supportsImageOrientation=XT&&XT.supports&&XT.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own(oa(this,"viewModel.attachmentInfos","change",()=>this.scheduleRender()),Pt(this,"viewModel.mode",()=>this._modeChanged()))}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}castVisibleElements(e){return k(k({},GF),e)}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new B("attachments:add-attachment",this.messages.addErrorMessage,i)),i})}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new B("attachments:delete-attachment",this.messages.deleteErrorMessage,i)),i})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then(i=>(this._set("submitting",!1),this._set("error",null),e.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new B("attachments:update-attachment",this.messages.updateErrorMessage,i)),i})}render(){const{submitting:e,viewModel:t}=this,{state:i}=t;return $("div",{class:this.classes(Me.base,Me.esriWidget)},e?this.renderProgressBar():null,i==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?$("div",{key:"error-message",class:Me.errorMessage},e.message):null}renderAttachments(){const{mode:e,activeAttachmentInfo:t}=this.viewModel;return e==="add"?this.renderAddForm():e==="edit"?this.renderDetailsForm(t):this.renderAttachmentContainer()}renderLoading(){return $("div",{class:Me.loaderContainer,key:"loader"},$("div",{class:Me.loader}))}renderProgressBar(){return this.visibleElements.progressBar?$("div",{class:Me.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,i=e||!t,r=this.visibleElements.cancelAddButton?$("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(Me.esriButton,Me.esriButtonTertiary,Me.esriButtonSmall,Me.esriButtonHalf,e&&Me.buttonDisabled)},this.messages.cancel):null,s=this.visibleElements.addSubmitButton?$("button",{type:"submit",disabled:i,class:this.classes(Me.esriButton,Me.esriButtonSecondary,Me.esriButtonSmall,Me.esriButtonHalf,{[Me.buttonDisabled]:i})},this.messages.add):null,n=t?$("span",{key:"file-name",class:Me.fileName},t.name):null,o=$("form",{bind:this,afterCreate:Mn,afterRemoved:vF,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},$("fieldset",{class:Me.fileFieldset},n,$("label",{class:this.classes(Me.fileLabel,Me.esriButton,Me.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,$("input",{class:Me.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),s,r);return $("div",{key:"add-form-container",class:Me.formNode},o)}renderDetailsForm(e){const{visibleElements:t,viewModel:i,selectedFile:r,submitting:s}=this,{contentType:n,size:o,url:a}=e,{abilities:l}=i,u=s||!r,h=l.editing&&l.operations.delete&&t.deleteButton?$("button",{key:"delete-button",type:"button",disabled:s,bind:this,onclick:M=>this._submitDeleteAttachment(M,e),class:this.classes(Me.esriButton,Me.esriButtonSmall,Me.esriButtonTertiary,Me.deleteButton,{[Me.buttonDisabled]:s})},this.messages.delete):null,f=l.editing&&l.operations.update&&t.updateButton?$("button",{disabled:u,key:"update-button",type:"submit",class:this.classes(Me.esriButton,Me.esriButtonSmall,Me.esriButtonThird,{[Me.buttonDisabled]:u})},this.messages.update):null,y=this.visibleElements.cancelUpdateButton?$("button",{disabled:s,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(Me.esriButton,Me.esriButtonSmall,Me.esriButtonTertiary,Me.esriButtonThird,{[Me.buttonDisabled]:s})},this.messages.cancel):null,g=r?$("span",{key:"file-name",class:Me.fileName},r.name):null,b=l.editing&&l.operations.update?$("fieldset",{key:"file",class:Me.fileFieldset},g,$("label",{class:this.classes(Me.fileLabel,Me.esriButton,Me.esriButtonSecondary)},this.messages.changeFile,$("input",{class:Me.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,w=$("fieldset",{key:"size",class:Me.metadataFieldset},$("label",null,Mle(this.messagesUnits,o))),x=$("fieldset",{key:"content-type",class:Me.metadataFieldset},$("label",null,n)),T=$("form",{bind:this,afterCreate:Mn,afterRemoved:vF,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},$("div",{class:Me.metadata},w,x),b,$("div",{class:Me.actions},h,y,f));return $("div",{key:"edit-form-container",class:Me.formNode},$("a",{class:Me.itemLink,href:a,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:e,size:400}),$("div",{class:Me.itemLinkOverlay},$("span",{class:Me.itemLinkOverlayIcon},$("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},$("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),$("path",{fill:"none",d:"M0 0h32v32H0z"}))))),T)}renderImageMask({attachmentInfo:e,size:t}){const{supportsResizeAttachments:i}=this.viewModel,{contentType:r,name:s,url:n}=e,o=i&&pce(r),a=this._getCSSTransform(e,o),l=a?{transform:a,"image-orientation":"none"}:{},u=n.indexOf("?")===-1?"?":"&",h=o?`${n}${u}w=${t}`:fce(r),f={[Me.itemMaskIcon]:!o},y={[Me.itemImageResizable]:i};return $("div",{class:this.classes(f,Me.itemMask)},$("img",{styles:l,alt:s,src:h,class:this.classes(y,Me.itemImage)}))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:i}=this,{abilities:r}=i,{name:s,url:n}=e,o=this.renderImageMask({attachmentInfo:e,size:t==="list"?48:400}),a=r.editing?$("span",{"aria-hidden":"true",class:this.classes(Me.itemChevronIcon,Is(this.container)?Me.iconLeft:Me.iconRight)}):null,l=[o,$("label",{class:Me.itemLabel},$("span",{class:Me.itemFilename},s||this.messages.noTitle),a)],u=r.editing?$("button",{key:"details-button",bind:this,class:Me.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},l):$("a",{key:"details-link",class:Me.itemButton,href:n,target:"_blank"},l);return $("li",{class:Me.item,key:e},u)}renderAttachmentContainer(){const{effectiveDisplayType:e,viewModel:t,visibleElements:i}=this,{attachmentInfos:r,abilities:s}=t,n=r&&r.length,o={[Me.containerList]:e!=="preview",[Me.containerPreview]:e==="preview"},a=s.editing&&s.operations.add&&i.addButton?$("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(Me.esriButton,Me.esriButtonTertiary,Me.addAttachmentButton),type:"button"},$("span",{"aria-hidden":"true",class:this.classes(Me.itemAddIcon,Me.iconPlus)}),this.messages.add):null,l=n?$("ul",{class:Me.items},r.toArray().map(u=>this.renderAttachmentInfo({attachmentInfo:u,displayType:e}))):$("div",{class:Me.empty},this.messages.noAttachments);return $("div",{key:"attachments-container",class:this.classes(Me.container,o)},l,a)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,i=t&&t.files&&t.files.item(0);this._set("selectedFile",i)}_submitDeleteAttachment(e,t){e.preventDefault(),this.deleteAttachment(t)}_submitAddAttachment(e){e.preventDefault(),this.addAttachment()}_submitUpdateAttachment(e){e.preventDefault(),this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeAttachmentInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e,t){const{orientationInfo:i}=e;return!this._supportsImageOrientation&&t&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};c([ne("viewModel.abilities")],Yr.prototype,"abilities",void 0),c([d()],Yr.prototype,"displayType",void 0),c([d({readOnly:!0})],Yr.prototype,"effectiveDisplayType",null),c([ne("viewModel.graphic")],Yr.prototype,"graphic",void 0),c([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Yr.prototype,"label",void 0),c([d(),Zt("esri/widgets/Attachments/t9n/Attachments")],Yr.prototype,"messages",void 0),c([d(),Zt("esri/core/t9n/Units")],Yr.prototype,"messagesUnits",void 0),c([d({readOnly:!0})],Yr.prototype,"selectedFile",void 0),c([d({readOnly:!0})],Yr.prototype,"submitting",void 0),c([d({readOnly:!0})],Yr.prototype,"error",void 0),c([d({type:sP})],Yr.prototype,"viewModel",void 0),c([d()],Yr.prototype,"visibleElements",void 0),c([gt("visibleElements")],Yr.prototype,"castVisibleElements",null),Yr=c([O("esri.widgets.Attachments")],Yr);const gce=Yr;let Bg=class extends sP{constructor(e){super(e),this.description=null,this.title=null}};c([d()],Bg.prototype,"description",void 0),c([d()],Bg.prototype,"title",void 0),Bg=c([O("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],Bg);const nP=Bg,vce={heading:"esri-widget__heading"};function Uh(e,t){const i=p9(e.level),r=`h${i}`;return delete e.level,$(r,be(k({},e),{class:Kf(vce.heading,e.class),role:"heading","aria-level":String(i)}),t)}function p9(e){return fo(Math.ceil(e),1,6)}function _ce(e,t=1){return p9(e+t)}const e$={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let pf=class extends Yt{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return $("div",{class:e$.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?$(Uh,{level:this.headingLevel,class:e$.title},e):null}renderDescription(){const{description:e}=this;return e?$("div",{key:"description",class:e$.description},e):null}};c([d()],pf.prototype,"description",void 0),c([d()],pf.prototype,"headingLevel",void 0),c([d()],pf.prototype,"title",void 0),pf=c([O("esri.widgets.Feature.support.FeatureElementInfo")],pf);const oP=pf,bce={base:"esri-feature-attachments"};let Pa=class extends Yt{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new gce,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new nP}initialize(){this._featureElementInfo=new oP,Pt(this,["viewModel.description","viewModel.title","headingLevel"],()=>this._setupFeatureElementInfo()),Pt(this,"viewModel.graphic",e=>this.attachmentsWidget.graphic=e)}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}render(){var e;const{attachmentsWidget:t}=this;return $("div",{class:bce.base},(e=this._featureElementInfo)==null?void 0:e.render(),t==null?void 0:t.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:i}=this;this._featureElementInfo.set({description:e,title:t,headingLevel:i})}};c([d({readOnly:!0})],Pa.prototype,"attachmentsWidget",void 0),c([ne("viewModel.description")],Pa.prototype,"description",void 0),c([ne("attachmentsWidget.displayType")],Pa.prototype,"displayType",void 0),c([ne("viewModel.graphic")],Pa.prototype,"graphic",void 0),c([d()],Pa.prototype,"headingLevel",void 0),c([ne("viewModel.title")],Pa.prototype,"title",void 0),c([d({type:nP})],Pa.prototype,"viewModel",void 0),Pa=c([O("esri.widgets.Feature.FeatureAttachments")],Pa);const wce=Pa;let eu=class extends Xs(Ee){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(Pt(this,"creator",t=>{this._destroyContent(),this._createContent(t)}))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:i}=this;e&&(ES(i,{graphic:t}).catch(()=>null),this._set("created",null))}async _createContent(e){const{graphic:t}=this,i=ES(e,{graphic:t}).catch(()=>null);this._loadingPromise=i,this.notifyChange("state");const r=await i;i===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",r))}};c([d({readOnly:!0})],eu.prototype,"created",void 0),c([d()],eu.prototype,"creator",void 0),c([d()],eu.prototype,"destroyer",void 0),c([d({type:xr})],eu.prototype,"graphic",void 0),c([d({readOnly:!0})],eu.prototype,"state",null),eu=c([O("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],eu);const MS=eu;function pr(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:xce(e[t])}}}function Sce(e){const{type:t}=e;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function xce(e){return function(t,...i){Sce(t)?Mh(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function Ice(e){return e.split(",").map(t=>t.trim())}function f9(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,r=Array.isArray(e)?e:Ice(e);i.push(...r)}}function vv(e){return e&&typeof e.render=="function"}function m9(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const t$={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let ff=class extends Yt{constructor(e,t){super(e,t),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=i=>{Array.from(i.querySelectorAll("a")).forEach(r=>{s9(r.href)&&!r.hasAttribute("target")&&r.setAttribute("target","_blank")})}}renderLoading(){return $("div",{class:t$.loaderContainer,key:"loader"},$("div",{class:t$.loader}))}renderCreated(){var e;const t=(e=this.viewModel)==null?void 0:e.created;return t?t instanceof HTMLElement?$("div",{key:t,bind:t,afterCreate:this._attachToNode}):vv(t)?$("div",{key:t},!t.destroyed&&t.render()):$("div",{key:t,innerHTML:t,afterCreate:this._addTargetToAnchors}):null}render(){var e;const t=(e=this.viewModel)==null?void 0:e.state;return $("div",{class:t$.base},t==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const t=this;e.appendChild(t)}};c([ne("viewModel.creator")],ff.prototype,"creator",void 0),c([ne("viewModel.graphic")],ff.prototype,"graphic",void 0),c([d({type:MS})],ff.prototype,"viewModel",void 0),ff=c([O("esri.widgets.Feature.FeatureContent")],ff);const Gw=ff;let kl=class extends Ee{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,i=[];return t==null||t.forEach(r=>{if(!(!r.hasOwnProperty("visible")||r.visible))return;const s=r.clone();s.label=o9(s,e),i.push(s)}),i}};c([d()],kl.prototype,"attributes",void 0),c([d({type:[H6]})],kl.prototype,"expressionInfos",void 0),c([d()],kl.prototype,"description",void 0),c([d({type:[t_]})],kl.prototype,"fieldInfos",void 0),c([d({readOnly:!0})],kl.prototype,"formattedFieldInfos",null),c([d()],kl.prototype,"title",void 0),kl=c([O("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],kl);const cI=kl,Tce=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function $ce(e){let t=null;return Tce.some(i=>(i.pattern.test(e)&&(t=i),!!t)),t}function Cce(e,t){if(typeof t!="string"||!t)return t;const i=$ce(t);if(!i)return t;const r=t.match(i.pattern),s=r&&r[2],n=Xa(Xa(i.label,{messages:e,hierPart:s}),{appName:i.appName}),o=i.target?` target="${i.target}"`:"",a=i.target==="_blank"?' rel="noreferrer"':"";return t.replace(i.pattern,`<a${o} href="$1"${a}>${n}</a>`)}const Hy={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let zo=class extends Yt{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new cI,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new oP,Pt(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo())}destroy(){this._featureElementInfo.destroy()}renderFieldInfo(e,t){const{attributes:i}=this.viewModel,r=e.fieldName,s=e.label||r,n=i?i[r]==null?"":i[r]:"",o=!(!e.format||!e.format.dateFormat),a=typeof n=="number"&&!o?this._forceLTR(n):Cce(this.messagesURIUtils,n),l={[Hy.fieldDataDate]:o};return $("tr",{key:`fields-element-info-row-${r}-${t}`},$("th",{key:`fields-element-info-row-header-${r}-${t}`,class:Hy.fieldHeader,innerHTML:s}),$("td",{key:`fields-element-info-row-data-${r}-${t}`,class:this.classes(Hy.fieldData,l),innerHTML:a}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?$("table",{class:Hy.esriTable,summary:this.messages.fieldsSummary},$("tbody",null,e.map((t,i)=>this.renderFieldInfo(t,i)))):null}render(){var e;return $("div",{class:Hy.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};c([ne("viewModel.attributes")],zo.prototype,"attributes",void 0),c([ne("viewModel.description")],zo.prototype,"description",void 0),c([ne("viewModel.expressionInfos")],zo.prototype,"expressionInfos",void 0),c([ne("viewModel.fieldInfos")],zo.prototype,"fieldInfos",void 0),c([ne("viewModel.title")],zo.prototype,"title",void 0),c([d({type:cI})],zo.prototype,"viewModel",void 0),c([d(),Zt("esri/widgets/Feature/t9n/Feature")],zo.prototype,"messages",void 0),c([d(),Zt("esri/widgets/support/t9n/uriUtils")],zo.prototype,"messagesURIUtils",void 0),zo=c([O("esri.widgets.Feature.FeatureFields")],zo);const y9=zo,HF={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},Ece={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function Ace(e,t){const i=new Date(e,t+1,1);return i.setDate(0),i.getDate()}function Bh(e,t,i){const r=new Date(e.getTime());if(t&&i){const s=Ece[i],{getter:n,setter:o,multiplier:a}=s;if(i==="months"){const l=Ace(r.getFullYear(),r.getMonth()+t);r.getDate()>l&&r.setDate(l)}r[o](r[n]()+t*a)}return r}function WF(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function Mce(e,t,i){return e===0?0:e*HF[t]/HF[i]}var Vo;let In=Vo=class extends ue{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return JF}static get empty(){return Oce}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(Vo.allTime)}get isEmpty(){return this.equals(Vo.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new Vo({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=N(this.start)?this.start.getTime():this.start,i=N(this.end)?this.end.getTime():this.end,r=N(e.start)?e.start.getTime():e.start,s=N(e.end)?e.end.getTime():e.end;return t===r&&i===s}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=ku(this.start,r=>WF(r,e)),i=ku(this.end,r=>Bh(WF(r,e),1,e));return new Vo({start:t,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Vo.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=yg(this.start,-1/0,a=>a.getTime()),i=yg(this.end,1/0,a=>a.getTime()),r=yg(e.start,-1/0,a=>a.getTime()),s=yg(e.end,1/0,a=>a.getTime());let n,o;if(r>=t&&r<=i?n=r:t>=r&&t<=s&&(n=t),i>=r&&i<=s?o=i:s>=t&&s<=i&&(o=s),!isNaN(n)&&!isNaN(o)){const a=new Vo;return a.start=n===-1/0?null:new Date(n),a.end=o===1/0?null:new Date(o),a}return Vo.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const i=new Vo,{start:r,end:s}=this;return N(r)&&(i.start=Bh(r,e,t)),N(s)&&(i.end=Bh(s,e,t)),i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return JF.clone();const t=N(this.start)&&N(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=N(this.end)&&N(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Vo({start:t,end:i})}};c([d({type:Date,json:{write:{allowNull:!0}}})],In.prototype,"end",void 0),c([xe("end")],In.prototype,"readEnd",null),c([$e("end")],In.prototype,"writeEnd",null),c([d({readOnly:!0,json:{read:!1}})],In.prototype,"isAllTime",null),c([d({readOnly:!0,json:{read:!1}})],In.prototype,"isEmpty",null),c([d({type:Date,json:{write:{allowNull:!0}}})],In.prototype,"start",void 0),c([xe("start")],In.prototype,"readStart",null),c([$e("start")],In.prototype,"writeStart",null),In=Vo=c([O("esri.TimeExtent")],In);const JF=new In,Oce=new In({start:void 0,end:void 0}),ul=In;var z2;let qg=z2=class extends ue{constructor(e){super(e),this.name=null,this.code=null}clone(){return new z2({name:this.name,code:this.code})}};c([d({type:String,json:{write:!0}})],qg.prototype,"name",void 0),c([d({type:[String,Number],json:{write:!0}})],qg.prototype,"code",void 0),qg=z2=c([O("esri.layers.support.CodedValue")],qg);const kce=qg,Pce=new rt({inherited:"inherited",codedValue:"coded-value",range:"range"});let Gg=class extends ue{constructor(e){super(e),this.name=null,this.type=null}};c([d({type:String,json:{write:!0}})],Gg.prototype,"name",void 0),c([Ue(Pce)],Gg.prototype,"type",void 0),Gg=c([O("esri.layers.support.Domain")],Gg);const uI=Gg;var V2;let Hg=V2=class extends uI{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(r=>(String(r.code)===i&&(t=r.name),!!t))}return t}clone(){return new V2({codedValues:K(this.codedValues),name:this.name})}};c([d({type:[kce],json:{write:!0}})],Hg.prototype,"codedValues",void 0),c([Ue({codedValue:"coded-value"})],Hg.prototype,"type",void 0),Hg=V2=c([O("esri.layers.support.CodedValueDomain")],Hg);const dI=Hg;var U2;let Hw=U2=class extends uI{constructor(e){super(e),this.type="inherited"}clone(){return new U2}};c([Ue({inherited:"inherited"})],Hw.prototype,"type",void 0),Hw=U2=c([O("esri.layers.support.InheritedDomain")],Hw);const g9=Hw;var B2;let mf=B2=class extends uI{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new B2({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};c([d({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],mf.prototype,"maxValue",void 0),c([d({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],mf.prototype,"minValue",void 0),c([Ue({range:"range"})],mf.prototype,"type",void 0),mf=B2=c([O("esri.layers.support.RangeDomain")],mf);const v9=mf,_9={key:"type",base:uI,typeMap:{range:v9,"coded-value":dI,inherited:g9}};function aP(e){if(!e||!e.type)return null;switch(e.type){case"range":return v9.fromJSON(e);case"codedValue":return dI.fromJSON(e);case"inherited":return g9.fromJSON(e)}return null}const Lce=new rt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var q2;const Rce=new rt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let fs=q2=class extends ue{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let i;try{i=JSON.parse(t)}catch{}return i?i.value:null}readValueType(e,{description:t}){let i;try{i=JSON.parse(t)}catch{}return i?Rce.fromJSON(i.fieldValueType):null}clone(){return new q2({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};c([d({type:String,json:{write:!0}})],fs.prototype,"alias",void 0),c([d({type:[String,Number],json:{write:{allowNull:!0}}})],fs.prototype,"defaultValue",void 0),c([d()],fs.prototype,"description",void 0),c([xe("description")],fs.prototype,"readDescription",null),c([d({types:_9,json:{read:{reader:aP},write:!0}})],fs.prototype,"domain",void 0),c([d({type:Boolean,json:{write:!0}})],fs.prototype,"editable",void 0),c([d({type:si,json:{write:!0}})],fs.prototype,"length",void 0),c([d({type:String,json:{write:!0}})],fs.prototype,"name",void 0),c([d({type:Boolean,json:{write:!0}})],fs.prototype,"nullable",void 0),c([Ue(Lce)],fs.prototype,"type",void 0),c([d()],fs.prototype,"valueType",void 0),c([xe("valueType",["description"])],fs.prototype,"readValueType",null),fs=q2=c([O("esri.layers.support.Field")],fs);const hI=fs;var G2;let yf=G2=class extends ue{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new G2({mapLayerId:e,gdbVersion:t})}};c([Ue({mapLayer:"map-layer"})],yf.prototype,"type",void 0),c([d({type:si,json:{write:!0}})],yf.prototype,"mapLayerId",void 0),c([d({type:String,json:{write:!0}})],yf.prototype,"gdbVersion",void 0),yf=G2=c([O("esri.layers.support.source.MapLayerSource")],yf);var H2;let Pl=H2=class extends ue{constructor(e){super(e),this.type="query-table"}clone(){var e;const{workspaceId:t,query:i,oidFields:r,spatialReference:s,geometryType:n}=this,o={workspaceId:t,query:i,oidFields:r,spatialReference:(e=s==null?void 0:s.clone())!=null?e:void 0,geometryType:n};return new H2(o)}};c([Ue({queryTable:"query-table"})],Pl.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Pl.prototype,"workspaceId",void 0),c([d({type:String,json:{write:!0}})],Pl.prototype,"query",void 0),c([d({type:String,json:{write:!0}})],Pl.prototype,"oidFields",void 0),c([d({type:Xe,json:{write:!0}})],Pl.prototype,"spatialReference",void 0),c([Ue(Pte)],Pl.prototype,"geometryType",void 0),Pl=H2=c([O("esri.layers.support.source.QueryTableDataSource")],Pl);var W2;let gf=W2=class extends ue{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new W2({workspaceId:e,dataSourceName:t})}};c([Ue({raster:"raster"})],gf.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],gf.prototype,"dataSourceName",void 0),c([d({type:String,json:{write:!0}})],gf.prototype,"workspaceId",void 0),gf=W2=c([O("esri.layers.support.source.RasterDataSource")],gf);var J2;let Gd=J2=class extends ue{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new J2({workspaceId:e,gdbVersion:t,dataSourceName:i})}};c([Ue({table:"table"})],Gd.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Gd.prototype,"workspaceId",void 0),c([d({type:String,json:{write:!0}})],Gd.prototype,"gdbVersion",void 0),c([d({type:String,json:{write:!0}})],Gd.prototype,"dataSourceName",void 0),Gd=J2=c([O("esri.layers.support.source.TableDataSource")],Gd);var Z2,Y2;const Fce=Br()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let fn=Z2=class extends ue{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return ZF()(e,t,i)}castLeftTableSource(e){return el(K2(),e)}readRightTableSource(e,t,i){return ZF()(e,t,i)}castRightTableSource(e){return el(K2(),e)}clone(){var e,t;const{leftTableKey:i,rightTableKey:r,leftTableSource:s,rightTableSource:n,joinType:o}=this,a={leftTableKey:i,rightTableKey:r,leftTableSource:(e=s==null?void 0:s.clone())!=null?e:void 0,rightTableSource:(t=n==null?void 0:n.clone())!=null?t:void 0,joinType:o};return new Z2(a)}};c([Ue({joinTable:"join-table"})],fn.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],fn.prototype,"leftTableKey",void 0),c([d({type:String,json:{write:!0}})],fn.prototype,"rightTableKey",void 0),c([d({json:{write:!0}})],fn.prototype,"leftTableSource",void 0),c([xe("leftTableSource")],fn.prototype,"readLeftTableSource",null),c([gt("leftTableSource")],fn.prototype,"castLeftTableSource",null),c([d({json:{write:!0}})],fn.prototype,"rightTableSource",void 0),c([xe("rightTableSource")],fn.prototype,"readRightTableSource",null),c([gt("rightTableSource")],fn.prototype,"castRightTableSource",null),c([Ue(Fce)],fn.prototype,"joinType",void 0),fn=Z2=c([O("esri.layers.support.source.JoinTableDataSource")],fn);let i$=null;function ZF(){return i$||(i$=ty({types:K2()})),i$}let r$=null;function K2(){return r$||(r$={key:"type",base:null,typeMap:{"data-layer":$n,"map-layer":yf}}),r$}const Nce={key:"type",base:null,typeMap:{"join-table":fn,"query-table":Pl,raster:gf,table:Gd}};let $n=Y2=class extends ue{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new Y2({fields:e,dataSource:t})}};c([Ue({dataLayer:"data-layer"})],$n.prototype,"type",void 0),c([d({type:[hI],json:{write:!0}})],$n.prototype,"fields",void 0),c([d({types:Nce,json:{write:!0}})],$n.prototype,"dataSource",void 0),$n=Y2=c([O("esri.layers.support.source.DataLayerSource")],$n),$n.from=jt($n);var Q2;const YF=new rt({upperLeft:"upper-left",lowerLeft:"lower-left"});let Hd=Q2=class extends ue{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new Q2(K({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};c([d({type:Et,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Hd.prototype,"extent",void 0),c([d({type:["view","edit"],json:{write:!0}})],Hd.prototype,"mode",void 0),c([d({type:String,json:{read:YF.read,write:YF.write}})],Hd.prototype,"originPosition",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Hd.prototype,"tolerance",void 0),Hd=Q2=c([O("esri.rest.support.QuantizationParameters")],Hd);const b9=Hd;var X2;const KF=new rt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Uo=X2=class extends ue{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=K(e))}clone(){return new X2({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:K(this.statisticParameters)})}};c([d({type:Number,json:{write:!0}})],Uo.prototype,"maxPointCount",void 0),c([d({type:Number,json:{write:!0}})],Uo.prototype,"maxRecordCount",void 0),c([d({type:Number,json:{write:!0}})],Uo.prototype,"maxVertexCount",void 0),c([d({type:String,json:{write:!0}})],Uo.prototype,"onStatisticField",void 0),c([d({type:String,json:{write:!0}})],Uo.prototype,"outStatisticFieldName",void 0),c([d({type:String,json:{read:{source:"statisticType",reader:KF.read},write:{target:"statisticType",writer:KF.write}}})],Uo.prototype,"statisticType",void 0),c([d({type:Object})],Uo.prototype,"statisticParameters",void 0),c([$e("statisticParameters")],Uo.prototype,"writeStatisticParameters",null),Uo=X2=c([O("esri.rest.support.StatisticDefinition")],Uo);const w9=Uo;var vm;const Dce=new rt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),jce=new rt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let qe=vm=class extends ue{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return DO(vm,e)}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const r in e){const s=e[r];Array.isArray(s)?i[r]=s.map(n=>n instanceof Date?n.getTime():n):s instanceof Date?i[r]=s.getTime():i[r]=s}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new vm(K({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:N(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};qe.MAX_MAX_RECORD_COUNT_FACTOR=5,c([d({json:{write:!0}})],qe.prototype,"aggregateIds",void 0),c([d({type:Boolean,json:{write:!0}})],qe.prototype,"cacheHint",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],qe.prototype,"compactGeometryEnabled",void 0),c([d({json:{write:!0}})],qe.prototype,"datumTransformation",void 0),c([gt("datumTransformation")],qe.prototype,"castDatumTransformation",null),c([d({type:Boolean,json:{default:!1,write:!0}})],qe.prototype,"defaultSpatialReferenceEnabled",void 0),c([d({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],qe.prototype,"distance",void 0),c([d({type:$n,json:{write:!0}})],qe.prototype,"dynamicDataSource",void 0),c([d({type:String,json:{write:!0}})],qe.prototype,"formatOf3DObjects",void 0),c([d({type:String,json:{write:!0}})],qe.prototype,"gdbVersion",void 0),c([d({types:mp,json:{read:As,write:!0}})],qe.prototype,"geometry",void 0),c([d({type:Number,json:{write:!0}})],qe.prototype,"geometryPrecision",void 0),c([d({type:[String],json:{write:!0}})],qe.prototype,"groupByFieldsForStatistics",void 0),c([d({type:String,json:{write:!0}})],qe.prototype,"having",void 0),c([d({type:Date})],qe.prototype,"historicMoment",void 0),c([$e("historicMoment")],qe.prototype,"writeHistoricMoment",null),c([d({type:Number,json:{write:!0}})],qe.prototype,"maxAllowableOffset",void 0),c([d({type:Number,cast:e=>e<1?1:e>vm.MAX_MAX_RECORD_COUNT_FACTOR?vm.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],qe.prototype,"maxRecordCountFactor",void 0),c([d({type:["xyFootprint"],json:{write:!0}})],qe.prototype,"multipatchOption",void 0),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],qe.prototype,"num",void 0),c([d({json:{write:!0}})],qe.prototype,"objectIds",void 0),c([d({type:[String],json:{write:!0}})],qe.prototype,"orderByFields",void 0),c([d({type:[String],json:{write:!0}})],qe.prototype,"outFields",void 0),c([d({type:Xe,json:{name:"outSR",write:!0}})],qe.prototype,"outSpatialReference",void 0),c([d({type:[w9],json:{write:{enabled:!0,overridePolicy(){return{enabled:N(this.outStatistics)&&this.outStatistics.length>0}}}}})],qe.prototype,"outStatistics",void 0),c([d({json:{write:!0}})],qe.prototype,"parameterValues",void 0),c([$e("parameterValues")],qe.prototype,"writeParameterValues",null),c([d({type:Le,json:{write:!0}})],qe.prototype,"pixelSize",void 0),c([d({type:b9,json:{write:!0}})],qe.prototype,"quantizationParameters",void 0),c([d({type:[Object],json:{write:!0}})],qe.prototype,"rangeValues",void 0),c([d({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],qe.prototype,"relationParameter",void 0),c([d({type:String,json:{write:!0}})],qe.prototype,"resultType",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],qe.prototype,"returnCentroid",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],qe.prototype,"returnDistinctValues",void 0),c([d({type:Boolean,json:{default:!0,write:!0}})],qe.prototype,"returnExceededLimitFeatures",void 0),c([d({type:Boolean,json:{write:!0}})],qe.prototype,"returnGeometry",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],qe.prototype,"returnQueryGeometry",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],qe.prototype,"returnM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],qe.prototype,"returnZ",void 0),c([d({type:Xe,json:{write:!0}})],qe.prototype,"sourceSpatialReference",void 0),c([Ue(Dce,{ignoreUnknown:!1,name:"spatialRel"})],qe.prototype,"spatialRelationship",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],qe.prototype,"start",void 0),c([$e("start"),$e("num")],qe.prototype,"writeStart",null),c([d({type:String,json:{write:!0}})],qe.prototype,"sqlFormat",void 0),c([d({type:String,json:{write:!0}})],qe.prototype,"text",void 0),c([d({type:ul,json:{write:!0}})],qe.prototype,"timeExtent",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],qe.prototype,"timeReferenceUnknownClient",void 0),c([Ue(jce,{ignoreUnknown:!1}),d({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],qe.prototype,"units",void 0),c([d({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start>0}}}}})],qe.prototype,"where",void 0),c([$e("where")],qe.prototype,"writeWhere",null),qe=vm=c([O("esri.rest.support.Query")],qe);const Ss=qe;var eA;let xi=eA=class extends ue{constructor(e){super(e),this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new eA(K({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};c([d({type:$n,json:{write:!0}})],xi.prototype,"dynamicDataSource",void 0),c([d({type:String,json:{write:!0}})],xi.prototype,"gdbVersion",void 0),c([d({type:Number,json:{write:!0}})],xi.prototype,"geometryPrecision",void 0),c([d({type:Date})],xi.prototype,"historicMoment",void 0),c([$e("historicMoment")],xi.prototype,"_writeHistoricMoment",null),c([d({type:Number,json:{write:!0}})],xi.prototype,"maxAllowableOffset",void 0),c([d({type:[Number],json:{write:!0}})],xi.prototype,"objectIds",void 0),c([d({type:[String],json:{write:!0}})],xi.prototype,"orderByFields",void 0),c([d({type:[String],json:{write:!0}})],xi.prototype,"outFields",void 0),c([d({type:Xe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],xi.prototype,"outSpatialReference",void 0),c([d({json:{write:!0}})],xi.prototype,"relationshipId",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],xi.prototype,"start",void 0),c([$e("start"),$e("num")],xi.prototype,"writeStart",null),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],xi.prototype,"num",void 0),c([d({json:{write:!0}})],xi.prototype,"returnGeometry",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],xi.prototype,"returnM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],xi.prototype,"returnZ",void 0),c([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],xi.prototype,"where",void 0),xi=eA=c([O("esri.rest.support.RelationshipQuery")],xi),xi.from=jt(xi);const cp=xi,S9=96;function lke(e,t){const i=t||e.extent,r=e.width,s=nd(i&&i.spatialReference);return i&&r?i.width/r*s*A8*S9:0}function zce(e,t){return e/(nd(t)*A8*S9)}function Vce(e,t){const i=e.extent,r=e.width,s=zce(t,i.spatialReference);return i.clone().expand(s*r/i.width)}function cke(e){var t;const i=e.layer;return"floorInfo"in i&&(t=i.floorInfo)!=null&&t.floorField&&"floors"in e.view?x9(e.view.floors,i.floorInfo.floorField):null}function QF(e,t){var i;return"floorInfo"in t&&(i=t.floorInfo)!=null&&i.floorField?x9(e,t.floorInfo.floorField):null}function Uce(e,t){const{definitionExpression:i}=t;return e?i?`(${i}) AND (${e})`:e:i}function x9(e,t){if(e==null||!e.length)return null;const i=e.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${t} IN (${i.join(",")}) OR ${t} IS NULL`}function h_(e,t){return t?be(k({},t),{query:k(k({},e),t.query)}):{query:e}}function qr(e){return typeof e=="string"?_i(e):e}function p_(e,t,i){const r={};for(const s in e){if(s==="declaredClass")continue;const n=e[s];if(n!=null&&typeof n!="function")if(Array.isArray(n)){r[s]=[];for(let o=0;o<n.length;o++)r[s][o]=p_(n[o])}else if(typeof n=="object")if(n.toJSON){const o=n.toJSON(i&&i[s]);r[s]=t?o:JSON.stringify(o)}else r[s]=t?n:JSON.stringify(n);else r[s]=n}return r}function f_(e){const t={};for(const i in e){if(i==="declaredClass")continue;const r=e[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){t[i]=[];for(let s=0;s<r.length;s++)t[i][s]=f_(r[s])}else typeof r=="object"?r.toJSON&&(t[i]=JSON.stringify(r)):t[i]=r}return t}function Bce(e){const t=e.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.keywords&&(t.keywords=t.keywords.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}function qce(e,t){const i={};for(const r of e){const{parentObjectId:s,parentGlobalId:n,attachmentInfos:o}=r;for(const a of o){const{id:l}=a,u=lQ(TV(`${t}/${s}/attachments/${l}`)),h=e9.fromJSON(a);h.set({url:u,parentObjectId:s,parentGlobalId:n}),i[s]?i[s].push(h):i[s]=[h]}}return i}function Gce(e,t,i){let r={query:f_(k(be(k({},e.query),{f:"json"}),Bce(t)))};return i&&(r=be(k(k({},i),r),{query:k(k({},i.query),r.query)})),ft(e.path+"/queryAttachments",r)}async function Hce(e,t,i){const r=qr(e);return Gce(r,gv.from(t),k({},i)).then(s=>qce(s.data.attachmentGroups,r.path))}const Xf={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new xs({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Xe.WebMercator}),minus180Line:new xs({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Xe.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new xs({paths:[[[180,-180],[180,180]]],spatialReference:Xe.WGS84}),minus180Line:new xs({paths:[[[-180,-180],[-180,180]]],spatialReference:Xe.WGS84})}};function kh(e,t){return Math.ceil((e-t)/(2*t))}function I9(e,t){const i=A0(e);for(const r of i)for(const s of r)s[0]+=t;return e}function A0(e){return Dh(e)?e.rings:e.paths}function uke(e){const t=e!=null&&e.isWebMercator?102100:4326;return[Xf[t].minX,Xf[t].maxX]}async function Wce(e,t,i,r){const s=typeof e=="string"?_i(e):e,n=t[0].spatialReference,o=be(k({},r),{query:be(k({},s.query),{f:"json",sr:JSON.stringify(n),target:JSON.stringify({geometryType:mo(t[0]),geometries:t}),cutter:JSON.stringify(i)})}),a=await ft(s.path+"/cut",o),{cutIndexes:l,geometries:u=[]}=a.data;return{cutIndexes:l,geometries:u.map(h=>{const f=As(h);return f.spatialReference=n,f})}}async function Jce(e,t,i){const r=typeof e=="string"?_i(e):e,s=t[0].spatialReference,n=mo(t[0]),o=be(k({},i),{query:be(k({},r.query),{f:"json",sr:s.wkid?s.wkid:JSON.stringify(s),geometries:JSON.stringify(Zce(t))})});return Yce((await ft(r.path+"/simplify",o)).data,n,s)}function Zce(e){return{geometryType:mo(e[0]),geometries:e.map(t=>t.toJSON())}}function Yce(e,t,i){const r=T6(t);return e.map(s=>{const n=r.fromJSON(s);return n.spatialReference=i,n})}const Kce=fe.getLogger("esri.geometry.support.normalizeUtils");function Qce(e){return e.type==="polygon"}function Xce(e){return e[0].type==="polygon"}function eue(e){return e[0].type==="polyline"}function tue(e,t){if(!(e instanceof xs||e instanceof Rn)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw Kce.error(s),new B(s)}const i=A0(e),r=[];for(const s of i){const n=[];r.push(n),n.push([s[0][0],s[0][1]]);for(let o=0;o<s.length-1;o++){const a=s[o][0],l=s[o][1],u=s[o+1][0],h=s[o+1][1],f=Math.sqrt((u-a)*(u-a)+(h-l)*(h-l)),y=(h-l)/f,g=(u-a)/f,b=f/t;if(b>1){for(let M=1;M<=b-1;M++){const F=M*t,D=g*F+a,R=y*F+l;n.push([D,R])}const w=(f+Math.floor(b-1)*t)/2,x=g*w+a,T=y*w+l;n.push([x,T])}n.push([u,h])}}return Qce(e)?new Rn({rings:r,spatialReference:e.spatialReference}):new xs({paths:r,spatialReference:e.spatialReference})}function XF(e,t,i){if(t){const r=tue(e,1e6);e=bg(r,!0)}return i&&(e=I9(e,i)),e}function eN(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const s=kh(r,t);e[0]=r+s*(-2*t)}else if(r<i){const s=kh(r,i);e[0]=r+s*(-2*i)}}else{const r=e.x;if(r>t){const s=kh(r,t);e=e.clone().offset(s*(-2*t),0)}else if(r<i){const s=kh(r,i);e=e.clone().offset(s*(-2*i),0)}}return e}function iue(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const s=t.cutIndexes[r],n=t.geometries[r],o=A0(n);for(let a=0;a<o.length;a++){const l=o[a];l.some(u=>{if(u[0]<180)return!0;{let h=0;for(let y=0;y<l.length;y++){const g=l[y][0];h=g>h?g:h}h=Number(h.toFixed(9));const f=-360*kh(h,180);for(let y=0;y<l.length;y++){const g=n.getPoint(a,y);n.setPoint(a,y,g.clone().offset(f,0))}return!0}})}if(s===i){if(Xce(e))for(const a of A0(n))e[s]=e[s].addRing(a);else if(eue(e))for(const a of A0(n))e[s]=e[s].addPath(a)}else i=s,e[s]=n}return e}async function lP(e,t,i){var r;if(!Array.isArray(e))return lP([e],t);const s=(r=t==null?void 0:t.url)!=null?r:Tt.geometryServiceUrl;let n,o,a,l,u,h,f,y,g=0;const b=[],w=[];for(const R of e)if(Q(R))w.push(R);else if(n||(n=R.spatialReference,o=na(n),a=n.isWebMercator,h=a?102100:4326,l=Xf[h].maxX,u=Xf[h].minX,f=Xf[h].plus180Line,y=Xf[h].minus180Line),o)if(R.type==="mesh")w.push(R);else if(R.type==="point")w.push(eN(R.clone(),l,u));else if(R.type==="multipoint"){const _=R.clone();_.points=_.points.map(q=>eN(q,l,u)),w.push(_)}else if(R.type==="extent"){const _=R.clone()._normalize(!1,!1,o);w.push(_.rings?new Rn(_):_)}else if(R.extent){const _=R.extent,q=kh(_.xmin,u)*(2*l);let W=q===0?R.clone():I9(R.clone(),q);_.offset(q,0),_.intersects(f)&&_.xmax!==l?(g=_.xmax>g?_.xmax:g,W=XF(W,a),b.push(W),w.push("cut")):_.intersects(y)&&_.xmin!==u?(g=_.xmax*(2*l)>g?_.xmax*(2*l):g,W=XF(W,a,360),b.push(W),w.push("cut")):w.push(W)}else w.push(R.clone());else w.push(R);let x=kh(g,l),T=-90;const M=x,F=new xs;for(;x>0;){const R=360*x-180;F.addPath([[R,T],[R,-1*T]]),T*=-1,x--}if(b.length>0&&M>0){const R=iue(b,await Wce(s,b,F,i)),_=[],q=[];for(let te=0;te<w.length;te++){const he=w[te];if(he!=="cut")q.push(he);else{const ge=R.shift(),Te=e[te];N(Te)&&Te.type==="polygon"&&Te.rings&&Te.rings.length>1&&ge.rings.length>=Te.rings.length?(_.push(ge),q.push("simplify")):q.push(a?nc(ge):ge)}}if(!_.length)return q;const W=await Jce(s,_,i),oe=[];for(let te=0;te<q.length;te++){const he=q[te];he!=="simplify"?oe.push(he):oe.push(a?nc(W.shift()):W.shift())}return oe}const D=[];for(let R=0;R<w.length;R++){const _=w[R];if(_!=="cut")D.push(_);else{const q=b.shift();D.push(a===!0?nc(q):q)}}return Promise.resolve(D)}function dke(e,t){const i=na(t);if(i){const[r,s]=i.valid,n=s-r;if(e<r)for(;e<r;)e+=n;if(e>s)for(;e>s;)e-=n}return e}var $u;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})($u||($u={}));const tN=4294967296,rue=new TextDecoder("utf-8"),sue=re("safari")||re("ios")?6:re("ff")?12:32;class qh{constructor(t,i,r=0,s=t?t.byteLength:0){this._tag=0,this._dataType=$u.unknown,this._init(t,i,r,s)}_init(t,i,r,s){this._data=t,this._dataView=i,this._pos=r,this._end=s}clone(){return new qh(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getUint32(i+4,!0)*tN;return this._skip(8),r}getSFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getInt32(i+4,!0)*tN;return this._skip(8),r}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+t);return this._skip(t),r}getBytes(){const t=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+t);return this._skip(t),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,i,r,s){const n=this.getMessage(),o=t(n,i,r,s);return n.release(),o}processMessage(t){const i=this.getMessage(),r=t(i);return i.release(),r}getMessage(){const t=this._getLength(),i=qh.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),i}release(){qh.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case $u.varint:this._decodeVarint();break;case $u.fixed64:this._skip(8);break;case $u.delimited:this._skip(this._getLength());break;case $u.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let i,r=this._pos,s=0;if(this._end-r>=10)do{if(i=t[r++],s|=127&i,(128&i)==0||(i=t[r++],s|=(127&i)<<7,(128&i)==0)||(i=t[r++],s|=(127&i)<<14,(128&i)==0)||(i=t[r++],s|=(127&i)<<21,(128&i)==0)||(i=t[r++],s+=268435456*(127&i),(128&i)==0)||(i=t[r++],s+=34359738368*(127&i),(128&i)==0)||(i=t[r++],s+=4398046511104*(127&i),(128&i)==0)||(i=t[r++],s+=562949953421312*(127&i),(128&i)==0)||(i=t[r++],s+=72057594037927940*(127&i),(128&i)==0)||(i=t[r++],s+=9223372036854776e3*(127&i),(128&i)==0))break;throw new Error("Varint too long!")}while(0);else{let n=1;for(;r!==this._end&&(i=t[r],(128&i)!=0);)++r,s+=(127&i)*n,n*=128;if(r===this._end)throw new Error("Varint overrun!");++r,s+=i*n}return this._pos=r,s}_decodeSVarint(){const t=this._decodeVarint();return t%2?-(t+1)/2:t/2}_getLength(){if(this._dataType!==$u.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,i,r){if((r=Math.min(this._end,r))-i>sue){const o=t.subarray(i,r);return rue.decode(o)}let s="",n="";for(let o=i;o<r;++o){const a=t[o];128&a?n+="%"+a.toString(16):(s+=decodeURIComponent(n)+String.fromCharCode(a),n="")}return n.length&&(s+=decodeURIComponent(n)),s}_toBytes(t,i,r){return r=Math.min(this._end,r),new Uint8Array(t.buffer,i,r-i)}}qh.pool=new ua(qh,null,e=>{e._data=null,e._dataView=null});class Ks{constructor(t=[],i=[],r=!1){this.lengths=t!=null?t:[],this.coords=i!=null?i:[],this.hasIndeterminateRingOrder=r}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,i)=>t+i)}forEachVertex(t){let i=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];for(let n=0;n<s;n++)t(this.coords[2*(n+i)],this.coords[2*(n+i)+1]);i+=s}}clone(t){return t?(t.set(this.coords),new Ks(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new Ks(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}class sl{constructor(t=null,i={},r,s){this.geometry=t,this.attributes=i,this.centroid=r,this.objectId=s,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new sl(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function nue(e){return!(Q(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}class hke extends sl{}class pI{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new pI;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}const T9=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class pke{constructor(t){this.options=t,this.geometryTypes=T9,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new pI}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this.options.sourceSpatialReference||!t.spatialReference||Qs(t.spatialReference,this.options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const i=Rm(this.options.sourceSpatialReference)/Rm(t.spatialReference);if(i!==1)for(const r of t.features){if(!nue(r))continue;const s=r.geometry.coords;for(let n=2;n<s.length;n+=3)s[n]*=i}}addFeature(t,i){t.features.push(i)}createFeature(){return new sl}createSpatialReference(){return{wkid:0}}createGeometry(){return new Ks}addField(t,i){t.fields.push(i)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,i){t.coords[this._coordinatePtr++]=i}addCoordinatePoint(t,i){t.coords.push(i)}addLength(t,i){t.lengths.push(i)}addQueryGeometry(t,i){t.queryGeometry=i.queryGeometry,t.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new Ks}}const iN=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],rN=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],sN=["upperLeft","lowerLeft"];function nN(e){return e>=iN.length?null:iN[e]}function oue(e){return e>=rN.length?null:rN[e]}function oN(e){return e>=sN.length?null:sN[e]}function aN(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function aue(e,t,i){const s=t.createPointGeometry(i);for(;e.next();)switch(e.tag()){case 3:{const n=e.getUInt32(),o=e.pos()+n;let a=0;for(;e.pos()<o;)t.addCoordinatePoint(s,e.getSInt64(),a++);break}default:e.skip()}return s}function lue(e,t,i){const n=t.createGeometry(i),o=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const a=e.getUInt32(),l=e.pos()+a;let u=0;for(;e.pos()<l;)t.addLength(n,e.getUInt32(),u++);break}case 3:{const a=e.getUInt32(),l=e.pos()+a;let u=0;for(t.allocateCoordinates(n);e.pos()<l;)t.addCoordinate(n,e.getSInt64(),u),u++,u===o&&(u=0);break}default:e.skip()}return n}function cue(e){const s=new Ks;let n="esriGeometryPoint";for(;e.next();)switch(e.tag()){case 2:{const o=e.getUInt32(),a=e.pos()+o;for(;e.pos()<a;)s.lengths.push(e.getUInt32());break}case 3:{const o=e.getUInt32(),a=e.pos()+o;for(;e.pos()<a;)s.coords.push(e.getSInt64());break}case 1:n=T9[e.getEnum()];break;default:e.skip()}return{queryGeometry:s,queryGeometryType:n}}function uue(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function due(e){const a={type:nN(0)};for(;e.next();)switch(e.tag()){case 1:a.name=e.getString();break;case 2:a.type=nN(e.getEnum());break;case 3:a.alias=e.getString();break;case 4:a.sqlType=oue(e.getEnum());break;case 5:e.skip();break;case 6:a.defaultValue=e.getString();break;default:e.skip()}return a}function hue(e){const r={};for(;e.next();)switch(e.tag()){case 1:r.name=e.getString();break;case 2:r.isSystemMaintained=e.getBool();break;default:e.skip()}return r}function pue(e,t,i,r){const a=t.createFeature(i);let l=0;for(;e.next();)switch(e.tag()){case 1:{const u=r[l++].name;a.attributes[u]=e.processMessage(uue);break}case 2:a.geometry=e.processMessageWithArgs(lue,t,i);break;case 4:a.centroid=e.processMessageWithArgs(aue,t,i);break;default:e.skip()}return a}function fue(e){const n=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:n[0]=e.getDouble();break;case 2:n[1]=e.getDouble();break;case 4:n[2]=e.getDouble();break;case 3:n[3]=e.getDouble();break;default:e.skip()}return n}function mue(e){const n=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:n[0]=e.getDouble();break;case 2:n[1]=e.getDouble();break;case 4:n[2]=e.getDouble();break;case 3:n[3]=e.getDouble();break;default:e.skip()}return n}function yue(e){const s={originPosition:oN(0)};for(;e.next();)switch(e.tag()){case 1:s.originPosition=oN(e.getEnum());break;case 2:s.scale=e.processMessage(fue);break;case 3:s.translate=e.processMessage(mue);break;default:e.skip()}return s}function gue(e){const s={};for(;e.next();)switch(e.tag()){case 1:s.shapeAreaFieldName=e.getString();break;case 2:s.shapeLengthFieldName=e.getString();break;case 3:s.units=e.getString();break;default:e.skip()}return s}function vue(e,t){const a=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:a.wkid=e.getUInt32();break;case 5:a.wkt=e.getString();break;case 2:a.latestWkid=e.getUInt32();break;case 3:a.vcsWkid=e.getUInt32();break;case 4:a.latestVcsWkid=e.getUInt32();break;default:e.skip()}return a}function _ue(e,t){const w=t.createFeatureResult();w.geometryType=aN(t,0);let x=!1;for(;e.next();)switch(e.tag()){case 1:w.objectIdFieldName=e.getString();break;case 3:w.globalIdFieldName=e.getString();break;case 4:w.geohashFieldName=e.getString();break;case 5:w.geometryProperties=e.processMessage(gue);break;case 7:w.geometryType=aN(t,e.getEnum());break;case 8:w.spatialReference=e.processMessageWithArgs(vue,t);break;case 10:w.hasZ=e.getBool();break;case 11:w.hasM=e.getBool();break;case 12:w.transform=e.processMessage(yue);break;case 9:{const T=e.getBool();w.exceededTransferLimit=T;break}case 13:t.addField(w,e.processMessage(due));break;case 15:x||(t.prepareFeatures(w),x=!0),t.addFeature(w,e.processMessageWithArgs(pue,t,w,w.fields));break;case 2:w.uniqueIdField=e.processMessage(hue);break;default:e.skip()}return t.finishFeatureResult(w),w}function bue(e,t){const s={};let n=null;for(;e.next();)switch(e.tag()){case 4:n=e.processMessageWithArgs(cue);break;case 1:s.featureResult=e.processMessageWithArgs(_ue,t);break;default:e.skip()}return N(n)&&s.featureResult&&t.addQueryGeometry(s,n),s}function wue(e,t){try{const r=new qh(new Uint8Array(e),new DataView(e)),s={};for(;r.next();)r.tag()===2?s.queryResult=r.processMessageWithArgs(bue,t):r.skip();return s}catch(i){throw new B("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function Sue(e,t){const i=wue(e,t),r=i.queryResult.featureResult,s=i.queryResult.queryGeometry,n=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const o=r.objectIdFieldName;for(const a of r.features)a.attributes&&(a.objectId=a.attributes[o])}return r&&(r.queryGeometry=s,r.queryGeometryType=n),r}function OS(e,t,i){if(!i||!i.features||!i.hasZ)return;const r=H8(i.geometryType,t,e.outSpatialReference);if(!Q(r))for(const s of i.features)r(s.geometry)}const lN="Layer does not support extent calculation.";function $9(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function C9(e,t){const i=e.geometry,r=e.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const s=r,n=e.outSpatialReference;let o,a;if(N(i)&&(o=i.spatialReference,a=i.spatialReference.wkid||JSON.stringify(i.spatialReference),s.geometryType=mo(i),s.geometry=$9(i,e.compactGeometryEnabled),s.inSR=a),r.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(s.objectIds=r.objectIds.join(",")),r.orderByFields&&(s.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&(t!=null&&t.returnCountOnly||t!=null&&t.returnExtentOnly||t!=null&&t.returnIdsOnly)?delete s.outFields:r.outFields.indexOf("*")!==-1?s.outFields="*":s.outFields=r.outFields.join(","),r.outSR?s.outSR=r.outSR.wkid||JSON.stringify(r.outSR):i&&(r.returnGeometry||r.returnCentroid)&&(s.outSR=s.inSR),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(s.outStatistics=JSON.stringify(r.outStatistics)),r.pixelSize&&(s.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&N(o)&&N(e.quantizationParameters)&&N(e.quantizationParameters.extent)&&o.equals(e.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,s.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(s.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(s.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(s.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const l=r.timeExtent,{start:u,end:h}=l;u==null&&h==null||(s.time=u===h?u:`${u==null?"null":u},${h==null?"null":h}`),delete r.timeExtent}return e.defaultSpatialReferenceEnabled&&N(o)&&N(n)&&o.equals(n)&&(s.defaultSR=s.inSR,delete s.inSR,delete s.outSR),s}async function E9(e,t,i,r){const s=N(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await fy(e,t,"json",r);return OS(t,i,s.data),s}async function A9(e,t,i,r){if(N(t.timeExtent)&&t.timeExtent.isEmpty)return Promise.resolve({data:i.createFeatureResult()});const s=await M9(e,t,r),n=s;return n.data=Sue(s.data,i),n}function M9(e,t,i){return fy(e,t,"pbf",i)}function O9(e,t,i){return N(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):fy(e,t,"json",i,{returnIdsOnly:!0})}function k9(e,t,i){return N(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):fy(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function P9(e,t,i){return N(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):fy(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(r=>{const s=r.data;if(s.hasOwnProperty("extent"))return r;if(s.features)throw new Error(lN);if(s.hasOwnProperty("count"))throw new Error(lN);return r})}function fy(e,t,i,r={},s={}){const n=typeof e=="string"?_i(e):e,o=t.geometry?[t.geometry]:[];return r.responseType=i==="pbf"?"array-buffer":"json",lP(o,null,r).then(a=>{const l=a&&a[0];N(l)&&((t=t.clone()).geometry=l);const u=f_(k(k(be(k({},n.query),{f:i}),s),C9(t,s)));return ft(Ku(n.path,"query"),be(k({},r),{query:k(k({},u),r.query)}))})}var fke=Object.freeze(Object.defineProperty({__proto__:null,encodeGeometry:$9,executeQuery:E9,executeQueryForCount:k9,executeQueryForExtent:P9,executeQueryForIds:O9,executeQueryPBF:A9,executeQueryPBFBuffer:M9,queryToQueryStringParameters:C9,runQuery:fy},Symbol.toStringTag,{value:"Module"}));async function xue(e,t,i){const r=qr(e);return k9(r,Ss.from(t),k({},i)).then(s=>s.data.count)}async function Iue(e,t,i){const r=qr(e);return P9(r,Ss.from(t),k({},i)).then(s=>({count:s.data.count,extent:Et.fromJSON(s.data.extent)}))}async function Tue(e,t,i){const r=qr(e);return O9(r,Ss.from(t),k({},i)).then(s=>s.data.objectIds)}var tA;const iA=new rt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let vr=tA=class extends ue{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const i=Xe.fromJSON(t.spatialReference),r=[];for(let s=0;s<e.length;s++){const n=e[s],o=xr.fromJSON(n),a=n.geometry&&n.geometry.spatialReference;N(o.geometry)&&!a&&(o.geometry.spatialReference=i);const l=n.aggregateGeometries,u=o.aggregateGeometries;if(l&&N(u))for(const h in u){const f=u[h],y=l[h],g=y==null?void 0:y.spatialReference;N(f)&&!g&&(f.spatialReference=i)}r.push(o)}return r}writeGeometryType(e,t,i,r){if(e)return void iA.write(e,t,i,r);const{features:s}=this;if(s){for(const n of s)if(n&&N(n.geometry))return void iA.write(n.geometry.type,t,i,r)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=As(e);return!i&&t.spatialReference&&(r.spatialReference=Xe.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&N(r.geometry)&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new tA(this.cloneProperties())}cloneProperties(){return K({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const s=e&&e[i];r.geometry=s&&s.toJSON()||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,s]}=e,n=u=>Math.round((u-r)/t),o=u=>Math.round((s-u)/i),a=this.features,l=this._getQuantizationFunction(this.geometryType,n,o);for(let u=0,h=a.length;u<h;u++)l(a[u].geometry)||(a.splice(u,1),u--,h--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,s],scale:[n,o]}=i,a=h=>h*n+r,l=h=>s-h*o,u=this._getHydrationFunction(e,a,l);for(const{geometry:h}of t)N(h)&&u(h);return this.transform=null,this}_quantizePoints(e,t,i){let r,s;const n=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];if(o>0){const u=t(l[0]),h=i(l[1]);u===r&&h===s||(n.push([u-r,h-s]),r=u,s=h)}else r=t(l[0]),s=i(l[1]),n.push([r,s])}return n.length>0?n:null}_getQuantizationFunction(e,t,i){return e==="point"?r=>(r.x=t(r.x),r.y=i(r.y),r):e==="polyline"||e==="polygon"?r=>{const s=Dh(r)?r.rings:r.paths,n=[];for(let o=0,a=s.length;o<a;o++){const l=s[o],u=this._quantizePoints(l,t,i);u&&n.push(u)}return n.length>0?(Dh(r)?r.rings=n:r.paths=n,r):null}:e==="multipoint"?r=>{const s=this._quantizePoints(r.points,t,i);return s.length>0?(r.points=s,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,i){return e==="point"?r=>{r.x=t(r.x),r.y=i(r.y)}:e==="polyline"||e==="polygon"?r=>{const s=Dh(r)?r.rings:r.paths;let n,o;for(let a=0,l=s.length;a<l;a++){const u=s[a];for(let h=0,f=u.length;h<f;h++){const y=u[h];h>0?(n+=y[0],o+=y[1]):(n=y[0],o=y[1]),y[0]=t(n),y[1]=i(o)}}}:e==="extent"?r=>{r.xmin=t(r.xmin),r.ymin=i(r.ymin),r.xmax=t(r.xmax),r.ymax=i(r.ymax)}:e==="multipoint"?r=>{const s=r.points;let n,o;for(let a=0,l=s.length;a<l;a++){const u=s[a];a>0?(n+=u[0],o+=u[1]):(n=u[0],o=u[1]),u[0]=t(n),u[1]=i(o)}}:void 0}};c([d({type:String,json:{write:!0}})],vr.prototype,"displayFieldName",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],vr.prototype,"exceededTransferLimit",void 0),c([d({type:[xr],json:{write:!0}})],vr.prototype,"features",void 0),c([xe("features")],vr.prototype,"readFeatures",null),c([d({type:[hI],json:{write:!0}})],vr.prototype,"fields",void 0),c([d({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:iA.read}}})],vr.prototype,"geometryType",void 0),c([$e("geometryType")],vr.prototype,"writeGeometryType",null),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],vr.prototype,"hasM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],vr.prototype,"hasZ",void 0),c([d({types:mp,json:{write:!0}})],vr.prototype,"queryGeometry",void 0),c([xe("queryGeometry")],vr.prototype,"readQueryGeometry",null),c([d({type:Xe,json:{write:!0}})],vr.prototype,"spatialReference",void 0),c([$e("spatialReference")],vr.prototype,"writeSpatialReference",null),c([d({json:{write:!0}})],vr.prototype,"transform",void 0),vr=tA=c([O("esri.rest.support.FeatureSet")],vr),vr.prototype.toJSON.isDefaultToJSON=!0;const bp=vr;var mke=Object.freeze(Object.defineProperty({__proto__:null,default:bp},Symbol.toStringTag,{value:"Module"}));async function yke(e,t,i){const r=await L9(e,t,i);return bp.fromJSON(r)}async function L9(e,t,i){const r=qr(e),s=k({},i),n=Ss.from(t),{data:o}=await E9(r,n,n.sourceSpatialReference,s);return o}function Ur(e,t){return e?t?4:3:t?3:2}const my=fe.getLogger("esri.layers.graphics.featureConversionUtils"),R9={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},F9=(e,t,i,r,s,n)=>{e[i]=s,e[i+1]=n},kS=(e,t,i,r,s,n)=>{e[i]=s,e[i+1]=n,e[i+2]=t[r+2]},$ue=(e,t,i,r,s,n)=>{e[i]=s,e[i+1]=n,e[i+2]=t[r+3]},N9=(e,t,i,r,s,n)=>{e[i]=s,e[i+1]=n,e[i+2]=t[r+2],e[i+3]=t[r+3]};function cP(e,t,i,r){if(e){if(i)return t&&r?N9:kS;if(t&&r)return $ue}else if(t&&r)return kS;return F9}function s$({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function n$({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function cN({scale:e,translate:t},i){return i*e[0]+t[0]}function uN({scale:e,translate:t},i){return t[1]-i*e[1]}function gke(e,t,i){return e?t?i?hP(e):uP(e):i?dP(e):fI(e):null}function fI(e){const t=e.coords;return{x:t[0],y:t[1]}}function D9(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function uP(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function Cue(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function dP(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function Eue(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function hP(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function Aue(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function Mue(e,t,i,r){let s=fI;i&&r?s=hP:i?s=uP:r&&(s=dP);for(const n of t){const{geometry:o,attributes:a}=n,l=N(o)?s(o):null;e.push({attributes:a,geometry:l})}return e}function j9(e,t){return e&&t?Aue:e?Cue:t?Eue:D9}function z9(e,t,i,r,s){const n=j9(i,r);for(const o of t){const{geometry:a,attributes:l}=o;let u;a&&(u=n(new Ks,a)),e.push(new sl(u,l,null,l[s]))}return e}function Oue(e,t,i,r){for(const s of t){const{geometry:n,attributes:o}=s;let a;n&&(a=V9(n,i,r)),e.push({attributes:o,geometry:a})}return e}function V9(e,t,i){if(Q(e))return null;const r=Ur(t,i),s=[];for(let n=0;n<e.coords.length;n+=r){const o=[];for(let a=0;a<r;a++)o.push(e.coords[n+a]);s.push(o)}return t?i?{points:s,hasZ:t,hasM:i}:{points:s,hasZ:t}:i?{points:s,hasM:i}:{points:s}}function U9(e,t,i,r,s){const n=Ur(i,r);for(const o of t){const a=o.geometry,l=o.attributes;let u;a&&(u=B9(new Ks,a,n)),e.push(new sl(u,l,null,l[s]))}return e}function B9(e,t,i=Ur(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const r=e.coords;let s=0;for(const n of t.points)for(let o=0;o<i;o++)r[s++]=n[o];return e}function kue(e,t,i,r){for(const s of t){const{geometry:n,attributes:o}=s;let a;N(n)&&(a=q9(n,i,r)),e.push({attributes:o,geometry:a})}return e}function q9(e,t,i){if(!e)return null;const r=Ur(t,i),{coords:s,lengths:n}=e,o=[];let a=0;for(const l of n){const u=[];for(let h=0;h<l;h++){const f=[];for(let y=0;y<r;y++)f.push(s[a++]);u.push(f)}o.push(u)}return t?i?{paths:o,hasZ:t,hasM:i}:{paths:o,hasZ:t}:i?{paths:o,hasM:i}:{paths:o}}function G9(e,t,i,r,s){const n=Ur(i,r);for(const o of t){const a=o.geometry,l=o.attributes;let u;a&&(u=H9(new Ks,a,n)),e.push(new sl(u,l,null,l[s]))}return e}function H9(e,t,i=Ur(t.hasZ,t.hasM)){const{lengths:r,coords:s}=e;let n=0;for(const o of t.paths){for(const a of o)for(let l=0;l<i;l++)s[n++]=a[l];r.push(o.length)}return e}function Pue(e,t,i,r){for(const s of t){const{geometry:n,attributes:o,centroid:a}=s;let l;if(N(n)&&(l=W9(n,i,r)),N(a)){const u=fI(a);e.push({attributes:o,centroid:u,geometry:l})}else e.push({attributes:o,geometry:l})}return e}function W9(e,t,i){if(!e)return null;const r=Ur(t,i),{coords:s,lengths:n}=e,o=[];let a=0;for(const l of n){const u=[];for(let h=0;h<l;h++){const f=[];for(let y=0;y<r;y++)f.push(s[a++]);u.push(f)}o.push(u)}return t?i?{rings:o,hasZ:t,hasM:i}:{rings:o,hasZ:t}:i?{rings:o,hasM:i}:{rings:o}}function J9(e,t,i,r,s){for(const n of t){const o=n.geometry,a=n.centroid,l=n.attributes;let u;o&&(u=Z9(new Ks,o,i,r)),N(a)?e.push(new sl(u,l,D9(new Ks,a),l[s])):e.push(new sl(u,l,null,l[s]))}return e}function Z9(e,t,i=t.hasZ,r=t.hasM){return Lue(e,t.rings,i,r),e}function Lue(e,t,i,r){const s=Ur(i,r),{lengths:n,coords:o}=e;let a=0;n.length=o.length=0;for(const l of t){for(const u of l)for(let h=0;h<s;h++)o[a++]=u[h];n.push(l.length)}return e}const _m=[],M0=[];function vke(e,t,i,r,s){_m[0]=e;const[n]=Y9(M0,_m,t,i,r,s);return _m.length=M0.length=0,n}function Y9(e,t,i,r,s,n){if(e.length=0,!i){for(const o of t){const a=o.attributes[n];e.push(new sl(null,o.attributes,null,a))}return e}switch(i){case"esriGeometryPoint":return z9(e,t,r,s,n);case"esriGeometryMultipoint":return U9(e,t,r,s,n);case"esriGeometryPolyline":return G9(e,t,r,s,n);case"esriGeometryPolygon":return J9(e,t,r,s,n);default:my.error("convertToFeatureSet:unknown-geometry",new B(`Unable to parse unknown geometry type '${i}'`)),e.length=0}return e}function _ke(e,t,i,r,s,n){const o=e.length;switch(i){case"esriGeometryPoint":z9(e,t,r,s,n);break;case"esriGeometryMultipoint":U9(e,t,r,s,n);break;case"esriGeometryPolyline":G9(e,t,r,s,n);break;case"esriGeometryPolygon":J9(e,t,r,s,n);break;default:my.error("convertToFeatureSet:unknown-geometry",new B(`Unable to parse unknown geometry type '${i}'`))}for(let a=0;a<t.length;a++)e[a+o].geometryType=i,e[a+o].insertAfter=t[a].insertAfter,e[a+o].groupId=t[a].groupId;return e}function bke(e,t,i,r){M0[0]=e,Q9(_m,M0,t,i,r);const s=_m[0];return _m.length=M0.length=0,s}function wke(e,t,i){if(Q(e))return null;const r=new Ks;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&i==null&&(i=e.hasM),fk(e)?j9(t!=null?t:e.z!=null,i!=null?i:e.m!=null)(r,e):Dh(e)?Z9(r,e,t,i):mk(e)?H9(r,e,Ur(t,i)):pk(e)?B9(r,e,Ur(t,i)):void my.error("convertFromGeometry:unknown-geometry",new B(`Unable to parse unknown geometry type '${e}'`))}function K9(e,t,i,r){const s=e&&("coords"in e?e:e.geometry);if(Q(s))return null;switch(t){case"esriGeometryPoint":{let n=fI;return i&&r?n=hP:i?n=uP:r&&(n=dP),n(s)}case"esriGeometryMultipoint":return V9(s,i,r);case"esriGeometryPolyline":return q9(s,i,r);case"esriGeometryPolygon":return W9(s,i,r);default:return void my.error("convertToGeometry:unknown-geometry",new B(`Unable to parse unknown geometry type '${t}'`))}}function Rue(e,t){for(const i of t)e.push({attributes:i.attributes});return e}function Q9(e,t,i,r,s){if(e.length=0,Q(i))return Rue(e,t);switch(i){case"esriGeometryPoint":return Mue(e,t,r,s);case"esriGeometryMultipoint":return Oue(e,t,r,s);case"esriGeometryPolyline":return kue(e,t,r,s);case"esriGeometryPolygon":return Pue(e,t,r,s);default:my.error("convertToFeatureSet:unknown-geometry",new B(`Unable to parse unknown geometry type '${i}'`))}return e}function Ske(e){const{objectIdFieldName:t,spatialReference:i,transform:r,fields:s,hasM:n,hasZ:o,features:a,geometryType:l,exceededTransferLimit:u,uniqueIdField:h,queryGeometry:f,queryGeometryType:y}=e,g={features:Q9([],a,l,o,n),fields:s,geometryType:l,objectIdFieldName:t,spatialReference:i,uniqueIdField:h,queryGeometry:K9(f,y,!1,!1)};return r&&(g.transform=r),u&&(g.exceededTransferLimit=u),n&&(g.hasM=n),o&&(g.hasZ=o),g}function xke(e,t){const i=new pI,{hasM:r,hasZ:s,features:n,objectIdFieldName:o,spatialReference:a,geometryType:l,exceededTransferLimit:u,transform:h,fields:f}=e;return f&&(i.fields=f),i.geometryType=l,i.objectIdFieldName=o||t,i.spatialReference=a,i.objectIdFieldName?(n&&Y9(i.features,n,l,s,r,i.objectIdFieldName),u&&(i.exceededTransferLimit=u),r&&(i.hasM=r),s&&(i.hasZ=s),h&&(i.transform=h),i):(my.error(new B("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function Ike(e){const{transform:t,features:i,hasM:r,hasZ:s}=e;if(!t)return e;for(const n of i)N(n.geometry)&&sA(n.geometry,n.geometry,r,s,t),N(n.centroid)&&sA(n.centroid,n.centroid,r,s,t);return e.transform=null,e}function Tke(e,t){const{geometryType:i,features:r,hasM:s,hasZ:n}=t;if(!e)return t;for(let o=0;o<r.length;o++){const a=r[o],l=a.weakClone();l.geometry=new Ks,dN(l.geometry,a.geometry,s,n,i,e),a.centroid&&(l.centroid=new Ks,dN(l.centroid,a.centroid,s,n,"esriGeometryPoint",e)),r[o]=l}return t.transform=e,t}function dN(e,t,i,r,s,n,o=i,a=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),Q(t)||!t.coords.length)return null;const l=R9[s],{coords:u,lengths:h}=t,f=Ur(i,r),y=Ur(i&&o,r&&a),g=cP(i,r,o,a);if(!h.length)return g(e.coords,u,0,0,s$(n,u[0]),n$(n,u[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=f,e;let b,w,x,T,M=0,F=0,D=F;for(const R of h){if(R<l)continue;let _=0;F=D,x=b=s$(n,u[M]),T=w=n$(n,u[M+1]),g(e.coords,u,F,M,x,T),_++,M+=f,F+=y;for(let q=1;q<R;q++,M+=f)x=s$(n,u[M]),T=n$(n,u[M+1]),x===b&&T===w||(g(e.coords,u,F,M,x-b,T-w),F+=y,_++,b=x,w=T);_>=l&&(e.lengths.push(_),D=F)}return e.coords.length=D,e.coords.length?e:null}function $ke(e,t,i,r,s,n,o=i,a=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const l=R9[s],{coords:u,lengths:h}=t,f=Ur(i,r),y=Ur(i&&o,r&&a),g=cP(i,r,o,a);if(!h.length)return g(e.coords,u,0,0,u[0],u[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=f,e;let b=0;const w=n*n;for(const x of h){if(x<l){b+=x*f;continue}const T=e.coords.length/y,M=b,F=b+(x-1)*f;g(e.coords,u,e.coords.length,M,u[M],u[M+1]),rA(e.coords,u,f,w,g,M,F),g(e.coords,u,e.coords.length,F,u[F],u[F+1]);const D=e.coords.length/y-T;D>=l?e.lengths.push(D):e.coords.length=T*y,b+=x*f}return e.coords.length?e:null}function Fue(e,t,i,r){const s=e[t],n=e[t+1],o=e[i],a=e[i+1],l=e[r],u=e[r+1];let h=o,f=a,y=l-h,g=u-f;if(y!==0||g!==0){const b=((s-h)*y+(n-f)*g)/(y*y+g*g);b>1?(h=l,f=u):b>0&&(h+=y*b,f+=g*b)}return y=s-h,g=n-f,y*y+g*g}function rA(e,t,i,r,s,n,o){let a,l=r,u=0;for(let h=n+i;h<o;h+=i)a=Fue(t,h,n,o),a>l&&(u=h,l=a);l>r&&(u-n>i&&rA(e,t,i,r,s,n,u),s(e,t,e.length,u,t[u],t[u+1]),o-u>i&&rA(e,t,i,r,s,u,o))}function Cke(e,t,i,r){if(Q(t)||!t.coords||!t.coords.length)return null;const s=Ur(i,r);let n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(t&&t.coords){const u=t.coords;for(let h=0;h<u.length;h+=s){const f=u[h],y=u[h+1];n=Math.min(n,f),a=Math.max(a,f),o=Math.min(o,y),l=Math.max(l,y)}}return e[0]=n,e[1]=o,e[2]=a,e[3]=l,e}function sA(e,t,i,r,s){const{coords:n,lengths:o}=t,a=i?r?N9:kS:r?kS:F9,l=Ur(i,r);if(!n.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!o.length)return a(e.coords,n,0,0,cN(s,n[0]),uN(s,n[1])),e!==t&&(e.lengths.length=0,e.coords.length=l),e;const[u,h]=s.scale;let f=0;for(let y=0;y<o.length;y++){const g=o[y];e.lengths[y]=g;let b=cN(s,n[f]),w=uN(s,n[f+1]);a(e.coords,n,f,f,b,w),f+=l;for(let x=1;x<g;x++,f+=l)b+=n[f]*u,w-=n[f+1]*h,a(e.coords,n,f,f,b,w)}return e!==t&&(e.lengths.length=o.length,e.coords.length=n.length),e}function Eke(e,t,i,r,s,n){const o=Ur(i,r),a=cP(i,r,s,n),l=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let u=0;u<l.length;u+=o)a(e.coords,l,e.coords.length,u,l[u],l[u+1]);return e}function Nue(e,t,i,r){let s=0,n=e[r*t],o=e[r*(t+1)];for(let a=1;a<i;a++){const l=n+e[r*(t+a)],u=o+e[r*(t+a)+1],h=(l-n)*(u+o);n=l,o=u,s+=h}return .5*s}function Ake(e,t){const{coords:i,lengths:r}=e;let s=0,n=0;for(let o=0;o<r.length;o++)n+=Nue(i,s,r[o],t),s+=o;return Math.abs(n)}function Mke(e,t){if(Q(e))return null;const i=e.clone(),r=e.coords,s=e.lengths;let n=0;for(let o=0;o<s.length;o++){const a=s[o];let l=r[t*n],u=r[t*n+1];for(let h=1;h<a;h++){const f=l+r[t*(n+h)],y=u+r[t*(n+h)+1];i.coords[t*(n+h)]=f,i.coords[t*(n+h)+1]=y,l=f,u=y}n+=a}return i}function Due(e,t){return t}function pP(e,t,i,r){switch(i){case 0:return _v(e,t+r,0);case 1:return e.originPosition==="lowerLeft"?_v(e,t+r,1):Vue(e,t+r,1)}}function X9(e,t,i,r){return i===2?_v(e,t,2):pP(e,t,i,r)}function jue(e,t,i,r){return i===2?_v(e,t,3):pP(e,t,i,r)}function zue(e,t,i,r){return i===3?_v(e,t,3):X9(e,t,i,r)}function _v({translate:e,scale:t},i,r){return e[r]+i*t[r]}function Vue({translate:e,scale:t},i,r){return e[r]-i*t[r]}class Uue{constructor(t){this.options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=Due,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this._attributesConstructor=function(){}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(t){if(this.options.applyTransform&&(t.transform=null),this._attributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,!t.hasZ)return;const i=H8(t.geometryType,this.options.sourceSpatialReference,t.spatialReference);if(!Q(i))for(const r of t.features)i(r.geometry)}createSpatialReference(){return{}}addField(t,i){t.fields.push(i);const r=t.fields.map(s=>s.name);this._attributesConstructor=function(){for(const s of r)this[s]=null}}addFeature(t,i){t.features.push(i)}prepareFeatures(t){switch(this.transform=t.transform,this.options.applyTransform&&t.transform&&(this.applyTransform=this._deriveApplyTransform(t)),this.vertexDimension=2,t.hasZ&&this.vertexDimension++,t.hasM&&this.vertexDimension++,t.geometryType){case"esriGeometryPoint":this.addCoordinate=(i,r,s)=>this.addCoordinatePoint(i,r,s),this.createGeometry=i=>this.createPointGeometry(i);break;case"esriGeometryPolygon":this.addCoordinate=(i,r,s)=>this._addCoordinatePolygon(i,r,s),this.createGeometry=i=>this._createPolygonGeometry(i);break;case"esriGeometryPolyline":this.addCoordinate=(i,r,s)=>this._addCoordinatePolyline(i,r,s),this.createGeometry=i=>this._createPolylineGeometry(i);break;case"esriGeometryMultipoint":this.addCoordinate=(i,r,s)=>this._addCoordinateMultipoint(i,r,s),this.createGeometry=i=>this._createMultipointGeometry(i);break;default:t.geometryType}}createFeature(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(t,i,r){this.lengths.length===0&&(this.toAddInCurrentPath=i),this.lengths.push(i)}addQueryGeometry(t,i){const{queryGeometry:r,queryGeometryType:s}=i,n=sA(r.clone(),r,!1,!1,this.transform),o=K9(n,s,!1,!1);t.queryGeometryType=s,t.queryGeometry=k({},o)}createPointGeometry(t){const i={x:0,y:0,spatialReference:t.spatialReference};return t.hasZ&&(i.z=0),t.hasM&&(i.m=0),i}addCoordinatePoint(t,i,r){switch(i=this.applyTransform(this.transform,i,r,0),r){case 0:t.x=i;break;case 1:t.y=i;break;case 2:"z"in t?t.z=i:t.m=i;break;case 3:t.m=i}}_transformPathLikeValue(t,i){let r=0;return i<=1&&(r=this.previousCoordinate[i],this.previousCoordinate[i]+=t),this.applyTransform(this.transform,t,i,r)}_addCoordinatePolyline(t,i,r){this._dehydratedAddPointsCoordinate(t.paths,i,r)}_addCoordinatePolygon(t,i,r){this._dehydratedAddPointsCoordinate(t.rings,i,r)}_addCoordinateMultipoint(t,i,r){r===0&&t.points.push([]);const s=this._transformPathLikeValue(i,r);t.points[t.points.length-1].push(s)}_createPolygonGeometry(t){return{rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createPolylineGeometry(t){return{paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createMultipointGeometry(t){return{points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_dehydratedAddPointsCoordinate(t,i,r){r===0&&this.toAddInCurrentPath--==0&&(t.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);const s=this._transformPathLikeValue(i,r),n=t[t.length-1];r===0&&(this.coordinateBufferPtr=0,this.coordinateBuffer=new Array(this.vertexDimension),n.push(this.coordinateBuffer)),this.coordinateBuffer[this.coordinateBufferPtr++]=s}_deriveApplyTransform(t){const{hasZ:i,hasM:r}=t;return i&&r?zue:i?X9:r?jue:pP}}async function Bue(e,t,i){const r=qr(e),s=k({},i),n=Ss.from(t),o=!n.quantizationParameters,{data:a}=await A9(r,n,new Uue({sourceSpatialReference:n.sourceSpatialReference,applyTransform:o}),s);return a}function que(e,t){const i=e.toJSON();return i.objectIds&&(i.objectIds=i.objectIds.join(",")),i.orderByFields&&(i.orderByFields=i.orderByFields.join(",")),!i.outFields||t!=null&&t.returnCountOnly?delete i.outFields:i.outFields.indexOf("*")!==-1?i.outFields="*":i.outFields=i.outFields.join(","),i.outSpatialReference&&(i.outSR=i.outSR.wkid||JSON.stringify(i.outSR.toJSON()),delete i.outSpatialReference),i.dynamicDataSource&&(i.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i}async function Gue(e,t,i){const r=await e7(e,t,i),s=r.data,n=s.geometryType,o=s.spatialReference,a={};for(const l of s.relatedRecordGroups){const u={fields:void 0,objectIdFieldName:void 0,geometryType:n,spatialReference:o,hasZ:!!s.hasZ,hasM:!!s.hasM,features:l.relatedRecords};if(l.objectId!=null)a[l.objectId]=u;else for(const h in l)l.hasOwnProperty(h)&&h!=="relatedRecords"&&(a[l[h]]=u)}return be(k({},r),{data:a})}async function Hue(e,t,i){const r=await e7(e,t,i,{returnCountOnly:!0}),s=r.data,n={};for(const o of s.relatedRecordGroups)o.objectId!=null&&(n[o.objectId]=o.count);return be(k({},r),{data:n})}async function e7(e,t,i={},r){const s=f_(k(k(be(k({},e.query),{f:"json"}),r),que(t,r)));return ft(e.path+"/queryRelatedRecords",be(k({},i),{query:k(k({},i.query),s)}))}async function Wue(e,t,i){t=cp.from(t);const r=qr(e);return Gue(r,t,i).then(s=>{const n=s.data,o={};return Object.keys(n).forEach(a=>o[a]=bp.fromJSON(n[a])),o})}async function Jue(e,t,i){t=cp.from(t);const r=qr(e);return Hue(r,t,k({},i)).then(s=>s.data)}const hN="Layer does not support extent calculation.";function Zue(e,t){var i,r;const s=e.geometry,n=e.toJSON(),o=n;if(N(s)&&(o.geometry=JSON.stringify(s),o.geometryType=mo(s),o.inSR=s.spatialReference.wkid||JSON.stringify(s.spatialReference)),(i=n.topFilter)!=null&&i.groupByFields&&(o.topFilter.groupByFields=n.topFilter.groupByFields.join(",")),(r=n.topFilter)!=null&&r.orderByFields&&(o.topFilter.orderByFields=n.topFilter.orderByFields.join(",")),n.topFilter&&(o.topFilter=JSON.stringify(o.topFilter)),n.objectIds&&(o.objectIds=n.objectIds.join(",")),n.orderByFields&&(o.orderByFields=n.orderByFields.join(",")),n.outFields&&!(t!=null&&t.returnCountOnly||t!=null&&t.returnExtentOnly||t!=null&&t.returnIdsOnly)?n.outFields.indexOf("*")!==-1?o.outFields="*":o.outFields=n.outFields.join(","):delete o.outFields,n.outSR?o.outSR=n.outSR.wkid||JSON.stringify(n.outSR):s&&n.returnGeometry&&(o.outSR=o.inSR),n.returnGeometry&&delete n.returnGeometry,n.timeExtent){const a=n.timeExtent,{start:l,end:u}=a;l==null&&u==null||(o.time=l===u?l:`${l==null?"null":l},${u==null?"null":u}`),delete n.timeExtent}return o}async function Yue(e,t,i,r){const s=await mI(e,t,"json",r);return OS(t,i,s.data),s}async function Kue(e,t,i){return N(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):mI(e,t,"json",i,{returnIdsOnly:!0})}async function Que(e,t,i){return N(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):mI(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(r=>{const s=r.data;if(s.hasOwnProperty("extent"))return r;if(s.features)throw new Error(hN);if(s.hasOwnProperty("count"))throw new Error(hN);return r})}function Xue(e,t,i){return N(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):mI(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function mI(e,t,i,r={},s={}){const n=typeof e=="string"?_i(e):e,o=t.geometry?[t.geometry]:[];return r.responseType=i==="pbf"?"array-buffer":"json",lP(o,null,r).then(a=>{const l=a&&a[0];N(l)&&((t=t.clone()).geometry=l);const u=f_(k(k(be(k({},n.query),{f:i}),s),Zue(t,s)));return ft(Ku(n.path,"queryTopFeatures"),be(k({},r),{query:k(k({},u),r.query)}))})}var nA;let vf=nA=class extends ue{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new nA({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};c([d({type:[String],json:{write:!0}})],vf.prototype,"groupByFields",void 0),c([d({type:Number,json:{write:!0}})],vf.prototype,"topCount",void 0),c([d({type:[String],json:{write:!0}})],vf.prototype,"orderByFields",void 0),vf=nA=c([O("esri.rest.support.TopFilter")],vf);const ede=vf;var oA;const pN=new rt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),fN=new rt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ai=oA=class extends ue{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new oA(K({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};c([d({type:Boolean,json:{write:!0}})],ai.prototype,"cacheHint",void 0),c([d({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],ai.prototype,"distance",void 0),c([d({types:mp,json:{read:As,write:!0}})],ai.prototype,"geometry",void 0),c([d({type:Number,json:{write:!0}})],ai.prototype,"geometryPrecision",void 0),c([d({type:Number,json:{write:!0}})],ai.prototype,"maxAllowableOffset",void 0),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],ai.prototype,"num",void 0),c([d({json:{write:!0}})],ai.prototype,"objectIds",void 0),c([d({type:[String],json:{write:!0}})],ai.prototype,"orderByFields",void 0),c([d({type:[String],json:{write:!0}})],ai.prototype,"outFields",void 0),c([d({type:Xe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ai.prototype,"outSpatialReference",void 0),c([d({type:String,json:{write:!0}})],ai.prototype,"resultType",void 0),c([d({json:{write:!0}})],ai.prototype,"returnGeometry",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ai.prototype,"returnM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ai.prototype,"returnZ",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],ai.prototype,"start",void 0),c([$e("start"),$e("num")],ai.prototype,"writeStart",null),c([d({type:String,json:{read:{source:"spatialRel",reader:pN.read},write:{target:"spatialRel",writer:pN.write}}})],ai.prototype,"spatialRelationship",void 0),c([d({type:ul,json:{write:!0}})],ai.prototype,"timeExtent",void 0),c([d({type:ede,json:{write:!0}})],ai.prototype,"topFilter",void 0),c([d({type:String,json:{read:fN.read,write:{writer:fN.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],ai.prototype,"units",void 0),c([d({type:String,json:{write:!0}})],ai.prototype,"where",void 0),ai=oA=c([O("esri.rest.support.TopFeaturesQuery")],ai),ai.from=jt(ai);const Uu=ai;async function tde(e,t,i,r){const s=qr(e),n=k({},r),{data:o}=await Yue(s,Uu.from(t),i,n);return bp.fromJSON(o)}async function ide(e,t,i){const r=qr(e);return(await Kue(r,Uu.from(t),k({},i))).data.objectIds}async function rde(e,t,i){const r=qr(e),s=await Que(r,Uu.from(t),k({},i));return{count:s.data.count,extent:Et.fromJSON(s.data.extent)}}async function sde(e,t,i){const r=qr(e);return(await Xue(r,Uu.from(t),k({},i))).data.count}let _f=class extends Ee{constructor(...e){super(...e),this.requestOptions=null,this.url=null}normalizeCtorArgs(e,t){return typeof e!="string"?e:k({url:e},t)}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(e){return e?_i(e):null}_encode(e,t,i){const r={};for(const s in e){if(s==="declaredClass")continue;const n=e[s];if(n!=null&&typeof n!="function")if(Array.isArray(n)){r[s]=[];for(let o=0;o<n.length;o++)r[s][o]=this._encode(n[o])}else if(typeof n=="object")if(n.toJSON){const o=n.toJSON(i&&i[s]);r[s]=t?o:JSON.stringify(o)}else r[s]=t?n:JSON.stringify(n);else r[s]=n}return r}};c([d({readOnly:!0})],_f.prototype,"parsedUrl",null),c([d()],_f.prototype,"requestOptions",void 0),c([d({type:String})],_f.prototype,"url",void 0),_f=c([O("esri.tasks.Task")],_f);const t7=_f;let Ll=class extends t7{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.format="json",this.gdbVersion=null,this.infoFor3D=null,this.sourceSpatialReference=null}execute(e,t){return this.executeJSON(e,t).then(i=>this.featureSetFromJSON(e,i,t))}async executeJSON(e,t){var i;const r=k(k({},this.requestOptions),t),s=this._normalizeQuery(e),n=((i=e.outStatistics)==null?void 0:i[0])!=null,o=re("featurelayer-pbf-statistics"),a=!n||o;let l;if(this.format==="pbf"&&a)try{l=await Bue(this.url,s,r)}catch(u){if(u.name!=="query:parsing-pbf")throw u;this.format="json"}return this.format!=="json"&&a||(l=await L9(this.url,s,r)),this._normalizeFields(l.fields),l}async featureSetFromJSON(e,t,i){if(!(this._queryIs3DObjectFormat(e)&&N(this.infoFor3D)&&t.features&&t.features.length))return bp.fromJSON(t);const{meshFeatureSetFromJSON:r}=await Mz(se(()=>import("./meshFeatureSet.ab96e605.js").then(function(s){return s.a}),["assets/meshFeatureSet.ab96e605.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/georeference.0bf97b52.js","assets/quat.65fc175c.js","assets/vec33.9f4eafd3.js","assets/BufferView.1e32fae3.js","assets/earcut.91e104de.js","assets/deduplicate.5321880a.js"]),i);return r(e,this.infoFor3D,t)}executeForCount(e,t){const i=k(k({},this.requestOptions),t),r=this._normalizeQuery(e);return xue(this.url,r,i)}executeForExtent(e,t){const i=k(k({},this.requestOptions),t),r=this._normalizeQuery(e);return Iue(this.url,r,i)}executeForIds(e,t){const i=k(k({},this.requestOptions),t),r=this._normalizeQuery(e);return Tue(this.url,r,i)}executeRelationshipQuery(e,t){e=cp.from(e);const i=k(k({},this.requestOptions),t);return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),Wue(this.url,e,i)}executeRelationshipQueryForCount(e,t){e=cp.from(e);const i=k(k({},this.requestOptions),t);return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),Jue(this.url,e,i)}executeAttachmentQuery(e,t){const i=k(k({},this.requestOptions),t);return Hce(this.url,e,i)}executeTopFeaturesQuery(e,t){const i=k(k({},this.requestOptions),t);return tde(this.parsedUrl,e,this.sourceSpatialReference,i)}executeForTopIds(e,t){const i=k(k({},this.requestOptions),t);return ide(this.parsedUrl,e,i)}executeForTopExtents(e,t){const i=k(k({},this.requestOptions),t);return rde(this.parsedUrl,e,i)}executeForTopCount(e,t){const i=k(k({},this.requestOptions),t);return sde(this.parsedUrl,e,i)}_normalizeQuery(e){let t=Ss.from(e);if(t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(t=t===e?t.clone():t,t.gdbVersion=e.gdbVersion||this.gdbVersion,t.dynamicDataSource=e.dynamicDataSource?$n.from(e.dynamicDataSource):this.dynamicDataSource),N(this.infoFor3D)&&this._queryIs3DObjectFormat(e)){t=t===e?t.clone():t,t.formatOf3DObjects=null;for(const i of this.infoFor3D.queryFormats){if(i.id==="3D_glb"){t.formatOf3DObjects=i.id;break}i.id!=="3D_gltf"||t.formatOf3DObjects||(t.formatOf3DObjects=i.id)}if(!t.formatOf3DObjects)throw new B("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(Q(t.outFields)||!t.outFields.includes("*")){t=t===e?t.clone():t,Q(t.outFields)&&(t.outFields=[]);const{originX:i,originY:r,originZ:s,translationX:n,translationY:o,translationZ:a,scaleX:l,scaleY:u,scaleZ:h,rotationX:f,rotationY:y,rotationZ:g,rotationDeg:b}=this.infoFor3D.transformFieldRoles;t.outFields.push(i,r,s,n,o,a,l,u,h,f,y,g,b)}}return t}_normalizeFields(e){if(N(this.fieldsIndex)&&N(e))for(const t of e){const i=this.fieldsIndex.get(t.name);i&&Object.assign(t,i.toJSON())}}_queryIs3DObjectFormat(e){return N(this.infoFor3D)&&e.returnGeometry&&e.multipatchOption!=="xyFootprint"&&!e.outStatistics}};c([d({type:$n})],Ll.prototype,"dynamicDataSource",void 0),c([d()],Ll.prototype,"fieldsIndex",void 0),c([d()],Ll.prototype,"format",void 0),c([d()],Ll.prototype,"gdbVersion",void 0),c([d()],Ll.prototype,"infoFor3D",void 0),c([d()],Ll.prototype,"sourceSpatialReference",void 0),Ll=c([O("esri.tasks.QueryTask")],Ll);const nde=Ll,ode="esri.widgets.Feature.support.relatedFeatureUtils",mN=fe.getLogger(ode),yN=new Map;function Wg(e){if(!ic(e))return null;const[t,i]=e.split("/").slice(1);return{layerId:t,fieldName:i}}function ade(e,t){if(!t.relationships)return null;let i=null;const{relationships:r}=t;return r.some(s=>s.id===parseInt(e,10)&&(i=s,!0)),i}function lde({originRelationship:e,relationships:t,layerId:i}){let r;return t&&t.some(s=>(`${s.relatedTableId}`===i&&s.id===e.id&&(r=s),!!r)),r}function cde(e,t){const i=t.toLowerCase();for(const r in e)if(r.toLowerCase()===i)return e[r];return null}function ude(e,t){const i=ade(e,t);if(!i)return;const r=`${t.url}/${i.relatedTableId}`;return{url:r,queryTask:new nde({url:r,sourceSpatialReference:t.spatialReference}),relation:i,relatedFields:[],outStatistics:[]}}function dde(e,t){if(!t||!e)return;const{features:i,statsFeatures:r}=e,s=i&&i.value;t.relatedFeatures=s?s.features:[];const n=r&&r.value;t.relatedStatsFeatures=n?n.features:[]}function hde(e,t,i,r){const s=new cp;return s.outFields=["*"],s.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),s.objectIds=[e.attributes[i.objectIdField]],i.queryRelatedFeatures(s,r)}function pde(e,t,i){let r=0;const s=[];for(;r<t.length;)s.push(`${e} IN (${t.slice(r,i+r)})`),r+=i;return s.join(" OR ")}async function fde(e,t,i,r){const s=i.layerId.toString(),{layerInfo:n,queryTask:o,relation:a,relatedFields:l,outStatistics:u}=t,h=lde({originRelationship:a,relationships:n.relationships,layerId:s});if(h.relationshipTableId&&h.keyFieldInRelationshipTable){const y=(await hde(e,h,i,r))[e.attributes[i.objectIdField]];if(!y)return null;const g=y.features.map(b=>b.attributes[n.objectIdField]);if((u==null?void 0:u.length)>0&&n.supportsStatistics){const b=new Ss;b.where=pde(n.objectIdField,g,1e3),b.outFields=l,b.outStatistics=u;const w={features:Promise.resolve(y),statsFeatures:o.execute(b)};return mi(w)}}const f=h==null?void 0:h.keyField;if(f){const y=ia(_de(n.fields,f)),g=cde(e.attributes,a.keyField),b=y?`${f}=${g}`:`${f}='${g}'`,w=o.execute(new Ss({where:b,outFields:t.relatedFields}),r),x=t.outStatistics&&t.outStatistics.length>0&&n.supportsStatistics?o.execute(new Ss({where:b,outFields:t.relatedFields,outStatistics:t.outStatistics}),r):null,T={features:w};return x&&(T.statsFeatures=x),mi(T)}return null}function mde(e,t){return ft(e,{query:{f:"json"},signal:t&&t.signal})}function yde({relatedInfos:e,layer:t},i){const r={};return e.forEach((s,n)=>{const{relation:o}=s;if(!o){const f=new B("relation-required","A relation is required on a layer to retrieve related records.");throw mN.error(f),f}const{relatedTableId:a}=o;if(typeof a!="number"){const f=new B("A related table ID is required on a layer to retrieve related records.");throw mN.error(f),f}const l=`${t.url}/${a}`,u=yN.get(l),h=u||mde(l,i);u||yN.set(l,h),r[n]=h}),mi(r)}function gde({graphic:e,relatedInfos:t,layer:i},r){const s={};return t.forEach((n,o)=>{n.layerInfo&&(s[o]=fde(e,n,i,r))}),mi(s)}function vde({relatedInfo:e,fieldName:t,fieldInfo:i}){if(e.relatedFields.push(t),i.statisticType){const r=new w9({statisticType:i.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(r)}}function _de(e,t){if(e!=null){t=t.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===t)return i}return null}const gN={chartAnimation:!0};let ur=class extends Ee{constructor(e){super(e),this.abilities=k({},gN),this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return k(k({},gN),e)}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,i=(e+t)%t;this.activeMediaInfoIndex=i}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,i=t+e;this._setContentElementMedia(i)}_formatMediaInfos(){const{attributes:e,mediaInfos:t,formattedAttributes:i,expressionAttributes:r,fieldInfoMap:s,layer:n}=this;return t==null?void 0:t.map(o=>{const a=o==null?void 0:o.clone();if(!a)return null;if(a.title=Oh({attributes:e,fieldInfoMap:s,globalAttributes:i,expressionAttributes:r,layer:n,text:a.title}),a.caption=Oh({attributes:e,fieldInfoMap:s,globalAttributes:i,expressionAttributes:r,layer:n,text:a.caption}),a.altText=Oh({attributes:e,fieldInfoMap:s,globalAttributes:i,expressionAttributes:r,layer:n,text:a.altText}),a.type==="image"){const{value:l}=a;return this._setImageValue({value:l,formattedAttributes:i,layer:n}),a.value.sourceURL?a:void 0}if(a.type==="pie-chart"||a.type==="line-chart"||a.type==="column-chart"||a.type==="bar-chart"){const{value:l}=a;return this._setChartValue({value:l,chartType:a.type,attributes:e,formattedAttributes:i,layer:n}),a}return null}).filter(Boolean)}_setImageValue(e){const{fieldInfoMap:t}=this,{value:i,formattedAttributes:r,layer:s}=e,{linkURL:n,sourceURL:o}=i;if(o){const a=j2(o,s);i.sourceURL=D2({formattedAttributes:r,template:a,fieldInfoMap:t})}if(n){const a=j2(n,s);i.linkURL=D2({formattedAttributes:r,template:a,fieldInfoMap:t})}}_setChartValue(e){const{value:t,attributes:i,formattedAttributes:r,chartType:s,layer:n}=e,{popupTemplate:o,relatedInfos:a}=this,{fields:l,normalizeField:u}=t;if(t.fields=Gle(l,n),u&&(t.normalizeField=AS(u,n)),!l.some(f=>!!(r[f]!=null||ic(f)&&a.size)))return;const h=o==null?void 0:o.fieldInfos;l.forEach(f=>{if(ic(f))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:h,fieldName:f,formattedAttributes:r,chartType:s,value:t})]);const y=this._getChartOption({value:t,attributes:i,chartType:s,formattedAttributes:r,fieldName:f,fieldInfos:h});t.series.push(y)})}_getRelatedChartInfos(e){var t;const{fieldInfos:i,fieldName:r,formattedAttributes:s,chartType:n,value:o}=e,a=[],l=Wg(r),{layerId:u,fieldName:h}=l,f=(t=this.relatedInfos)==null?void 0:t.get(u.toString());if(!f)return a;const{relatedFeatures:y,relation:g}=f;if(!g||!y)return a;const{cardinality:b}=g;return y.forEach(w=>{const{attributes:x}=w;x&&Object.keys(x).forEach(T=>{T===h&&a.push(this._getChartOption({value:o,attributes:x,formattedAttributes:s,fieldName:r,chartType:n,relatedFieldName:T,fieldInfos:i}))})}),b==="one-to-many"||b==="many-to-many"?a:[a[0]]}_getTooltip({label:e,value:t,chartType:i}){return i==="pie-chart"?e:`${e}: ${t}`}_getChartOption(e){var t;const{value:i,attributes:r,formattedAttributes:s,fieldName:n,relatedFieldName:o,fieldInfos:a,chartType:l}=e,{layer:u}=this,{normalizeField:h,tooltipField:f}=i,y=h?ic(h)?r[Wg(h).fieldName]:r[h]:null,g=o&&r[o]!==void 0?r[o]:r[n]!==void 0?r[n]:s[n],b=g===void 0?null:g&&y?g/y:g,w=new j6({value:b});if(ic(n)){const D=Wg(n),R=Wg(f),_=R?R.fieldName:null,q=l9(b,{fieldInfos:a,fieldName:o,layer:u,preventPlacesFormatting:!!y}),W=D?D.label||D.fieldName:o,oe=_&&r[_]!==void 0?r[_]:W;return w.tooltip=this._getTooltip({label:oe,value:q,chartType:l}),w}const x=c9(a,n),T=AS(n,u),M=f&&s[f]!==void 0?s[f]:o9(x||new t_({fieldName:T}),(t=this.popupTemplate)==null?void 0:t.expressionInfos),F=s[T];return w.tooltip=this._getTooltip({label:M,value:F,chartType:l}),w}};c([d()],ur.prototype,"abilities",void 0),c([gt("abilities")],ur.prototype,"castAbilities",null),c([d()],ur.prototype,"activeMediaInfoIndex",void 0),c([d({readOnly:!0})],ur.prototype,"activeMediaInfo",null),c([d()],ur.prototype,"attributes",void 0),c([d()],ur.prototype,"description",void 0),c([d()],ur.prototype,"fieldInfoMap",void 0),c([d()],ur.prototype,"formattedAttributes",void 0),c([d()],ur.prototype,"expressionAttributes",void 0),c([d({readOnly:!0})],ur.prototype,"formattedMediaInfos",null),c([d()],ur.prototype,"layer",void 0),c([d({readOnly:!0})],ur.prototype,"formattedMediaInfoCount",null),c([d()],ur.prototype,"mediaInfos",void 0),c([d()],ur.prototype,"popupTemplate",void 0),c([d()],ur.prototype,"relatedInfos",void 0),c([d()],ur.prototype,"title",void 0),ur=c([O("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],ur);const Ph=ur;var vN=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],bde=[].concat(vN.slice(30,39),vN.slice(28,30).reverse()),wde=[{name:"default",colors:bde},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const _N="en-us",fP=new Map([["ar",()=>se(()=>import("./ar.38e380ee.js"),["assets/ar.38e380ee.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.a)],["bg-bg",()=>se(()=>import("./bg_BG.fca66666.js"),["assets/bg_BG.fca66666.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.b)],["bs-ba",()=>se(()=>import("./bs_BA.caf3952d.js"),["assets/bs_BA.caf3952d.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.b)],["ca-es",()=>se(()=>import("./ca_ES.0c519c51.js"),["assets/ca_ES.0c519c51.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.c)],["cs-cz",()=>se(()=>import("./cs_CZ.00bd1a64.js"),["assets/cs_CZ.00bd1a64.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.c)],["da-dk",()=>se(()=>import("./da_DK.dc0199ff.js"),["assets/da_DK.dc0199ff.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.d)],["de-de",()=>se(()=>import("./de_DE.dc54f440.js"),["assets/de_DE.dc54f440.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.d)],["de-ch",()=>se(()=>import("./de_CH.a25a623b.js"),["assets/de_CH.a25a623b.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.d)],["el-gr",()=>se(()=>import("./el_GR.35e63930.js"),["assets/el_GR.35e63930.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.e)],["en-us",()=>se(()=>import("./en_US.b10260c1.js"),["assets/en_US.b10260c1.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.e)],["en-ca",()=>se(()=>import("./en_CA.da09073c.js"),["assets/en_CA.da09073c.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.e)],["es-es",()=>se(()=>import("./es_ES.b94ae131.js"),["assets/es_ES.b94ae131.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.e)],["et-ee",()=>se(()=>import("./et_EE.9a26a6ac.js"),["assets/et_EE.9a26a6ac.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.e)],["fi-fi",()=>se(()=>import("./fi_FI.2af7adda.js"),["assets/fi_FI.2af7adda.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.f)],["fr-fr",()=>se(()=>import("./fr_FR.48085237.js"),["assets/fr_FR.48085237.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.f)],["he-il",()=>se(()=>import("./he_IL.ce5a6a3e.js"),["assets/he_IL.ce5a6a3e.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.h)],["hr-hr",()=>se(()=>import("./hr_HR.cf2a7837.js"),["assets/hr_HR.cf2a7837.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.h)],["hu-hu",()=>se(()=>import("./hu_HU.bbb79808.js"),["assets/hu_HU.bbb79808.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.h)],["id-id",()=>se(()=>import("./id_ID.ff4a99da.js"),["assets/id_ID.ff4a99da.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.i)],["it-it",()=>se(()=>import("./it_IT.6824c9c8.js"),["assets/it_IT.6824c9c8.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.i)],["ja-jp",()=>se(()=>import("./ja_JP.39652ec4.js"),["assets/ja_JP.39652ec4.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.j)],["ko-kr",()=>se(()=>import("./ko_KR.563a0748.js"),["assets/ko_KR.563a0748.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.k)],["lt-lt",()=>se(()=>import("./lt_LT.9357f23e.js"),["assets/lt_LT.9357f23e.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.l)],["lv-lv",()=>se(()=>import("./lv_LV.a5d523da.js"),["assets/lv_LV.a5d523da.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.l)],["nb-no",()=>se(()=>import("./nb_NO.ebb2ac2a.js"),["assets/nb_NO.ebb2ac2a.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.n)],["nl-nl",()=>se(()=>import("./nl_NL.d1cc23ad.js"),["assets/nl_NL.d1cc23ad.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.n)],["pl-pl",()=>se(()=>import("./pl_PL.bb2e9960.js"),["assets/pl_PL.bb2e9960.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.p)],["pt-br",()=>se(()=>import("./pt_BR.74c5e8ca.js"),["assets/pt_BR.74c5e8ca.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.p)],["pt-pt",()=>se(()=>import("./pt_PT.bfab834c.js"),["assets/pt_PT.bfab834c.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.p)],["ro-ro",()=>se(()=>import("./ro_RO.42f83482.js"),["assets/ro_RO.42f83482.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.r)],["ru-ru",()=>se(()=>import("./ru_RU.abc0b5cc.js"),["assets/ru_RU.abc0b5cc.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.r)],["sk-sk",()=>se(()=>import("./sk_SK.e9d48714.js"),["assets/sk_SK.e9d48714.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.s)],["sl-sl",()=>se(()=>import("./sl_SL.4c1fa8ed.js"),["assets/sl_SL.4c1fa8ed.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.s)],["sr-rs",()=>se(()=>import("./sr_RS.d0337641.js"),["assets/sr_RS.d0337641.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.s)],["sv-se",()=>se(()=>import("./sv_SE.4d29b9ab.js"),["assets/sv_SE.4d29b9ab.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.s)],["th-th",()=>se(()=>import("./th_TH.98339202.js"),["assets/th_TH.98339202.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.t)],["tr-tr",()=>se(()=>import("./tr_TR.adda76a3.js"),["assets/tr_TR.adda76a3.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.t)],["uk-ua",()=>se(()=>import("./uk_UA.4942722a.js"),["assets/uk_UA.4942722a.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.u)],["vi-vn",()=>se(()=>import("./vi_VN.defda39a.js"),["assets/vi_VN.defda39a.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.v)],["zh-cn",()=>se(()=>import("./zh_Hans.87e0b7d8.js"),["assets/zh_Hans.87e0b7d8.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.z)],["zh-hk",()=>se(()=>import("./zh_Hant.d85df562.js"),["assets/zh_Hant.d85df562.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.z)],["zh-tw",()=>se(()=>import("./zh_Hant.d85df562.js"),["assets/zh_Hant.d85df562.js","assets/_commonjsHelpers.3de59df3.js"]).then(e=>e.z)]]);function Sde(e){const t=e.split("-")[0].toLowerCase();let i=null;for(const r of fP.keys())if(r.startsWith(t)){i=r;break}return i}function xde(e){return e?fP.has(e.toLowerCase())?e.toLowerCase():Sde(e)||_N:_N}let Fp,Wy;async function Ide(e=mr()){if(e=xde(e),Fp&&e===Wy)return Fp;Fp=se(()=>import("./index.1256ab99.js"),["assets/index.1256ab99.js","assets/_commonjsHelpers.3de59df3.js"]).then(t=>t.i),Wy=e;try{const[t,i]=await Promise.all([Fp,fP.get(Wy)()]);Wy===e&&(t.am4core.options.defaultLocale=i.default),t.am4core.options.suppressWarnings=!0,t.am4core.options.autoDispose=!0}catch{return Fp=null,Wy=null,null}return Fp}function Tde(e,t="default"){const i=wde.find(r=>r.name===t);return i?i.colors.map(r=>e.color(r)):null}const Si={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},o$=.05,a$=.95,l$=15;let Ns=class extends Yt{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new Ph,this.messages=null,this._getChartDependencies=async i=>{const r=await Ide(),{destroyed:s,viewModel:n}=this;if(s||!n||!i)return;const{activeMediaInfo:o}=n;this._renderChart({chartDiv:i,mediaInfo:o,chartsModule:r})}}initialize(){this._featureElementInfo=new oP,this.own(Pt(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],()=>this._setupMediaRefreshTimer()),Pt(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo()))}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}render(){var e;return $("div",{bind:this,class:Si.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?$("div",{key:"media-element-container",class:Si.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel,{value:s,refreshInterval:n,altText:o,title:a,type:l}=e,{sourceURL:u,linkURL:h}=s,f=s9(h)?"_blank":"_self",y=f==="_blank"?"noreferrer":"",g=n?t:null,b=g?g.timestamp:0,w=g?g.sourceURL:u,x=$("img",{alt:o||a,key:`media-${l}-${i}-${r}-${b}`,src:w});return(h?$("a",{title:a,href:h,rel:y,target:f},x):null)||x}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return $("div",{key:`media-${e.type}-${t}-${i}`,bind:this,class:Si.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.indexOf("chart")!==-1?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?$("div",{key:"media-title",class:Si.mediaItemTitle,innerHTML:e.title}):null,i=e.caption?$("div",{key:"media-caption",class:Si.mediaItemCaption,innerHTML:e.caption}):null;return $("div",{key:"media-container",class:Si.mediaItemContainer},$("div",{key:"media-item-container",class:Si.mediaItem},this.renderMediaInfoType()),t,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=e==="previous",i=t?this.messages.previous:this.messages.next,r=t?this.classes(Si.mediaButton,Si.mediaPrevious):this.classes(Si.mediaButton,Si.mediaNext),s=t?this.classes(Si.mediaIcon,Si.mediaPreviousIconLTR,Si.iconLeftTriangleArrow):this.classes(Si.mediaIcon,Si.mediaNextIconLTR,Si.iconRightTriangleArrow),n=t?this.classes(Si.mediaIcon,Si.mediaPreviousIconRTL,Si.iconRightTriangleArrow):this.classes(Si.mediaIcon,Si.mediaNextIconRTL,Si.iconLeftTriangleArrow),o=t?"media-previous":"media-next",a=t?this._previous:this._next;return $("button",{type:"button",key:o,title:i,"aria-label":i,tabIndex:0,class:r,bind:this,onclick:a},$("span",{"aria-hidden":"true",class:s}),$("span",{"aria-hidden":"true",class:n}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_handleMediaKeyup(e){const t=Us(e);t==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:i,chartDiv:r,mediaInfo:s}=e,{value:n,type:o}=s,{am4core:a}=i,l=Tde(a);function u(y){y instanceof a.ColorSet&&l&&(y.list=l)}tP()&&a.useTheme(i.am4themes_dark);const h=window.matchMedia("(prefers-reduced-motion: reduce)");t.chartAnimation&&!h.matches?a.useTheme(i.am4themes_animated):a.unuseTheme(i.am4themes_animated),a.useTheme(u);const f=o==="pie-chart"?this._createPieChart(e):this._createXYChart(e);r.setAttribute("aria-label",s.altText||s.title),f.data=n.series.map(y=>({tooltip:y.tooltip,value:y.value})).filter(y=>o!=="pie-chart"||y.value>0)}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:r,am4charts:s}=i,n=r.create(t,s.PieChart);n.rtl=Is(this.container);const o=n.series.push(new s.PieSeries);return o.labels.template.disabled=!0,o.ticks.template.disabled=!0,o.dataFields.value="value",o.dataFields.category="tooltip",this._customizeChartTooltip(o.tooltip,r),o.slices.template.tooltipText=n.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%",n}_getMinSeriesValue(e){let t=0;return e.forEach(i=>t=Math.min(i.value,t)),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:n,am4charts:o}=i,a=e.xAxes.push(new o.CategoryAxis);a.dataFields.category="tooltip",a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,n),a.tooltip.events.on("sizechanged",()=>{a.tooltip.dy=-a.tooltip.contentHeight});const l=e.yAxes.push(new o.ValueAxis),u=l.renderer.labels.template;l.renderer.minLabelPosition=o$,l.renderer.maxLabelPosition=a$,l.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(l.tooltip,n),u.wrap=!0;const h=e.series.push(new o.ColumnSeries);h.dataFields.valueY="value",h.dataFields.categoryX="tooltip",e.cursor=new o.XYCursor,s.series.length>l$&&(e.scrollbarX=new n.Scrollbar)}_createBarChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:n,am4charts:o}=i,a=e.yAxes.push(new o.CategoryAxis);a.dataFields.category="tooltip",a.renderer.inversed=!0,a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,n),a.tooltip.events.on("sizechanged",()=>{a.tooltip.dx=a.tooltip.contentWidth});const l=e.xAxes.push(new o.ValueAxis),u=l.renderer.labels.template;l.renderer.minLabelPosition=o$,l.renderer.maxLabelPosition=a$,l.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(l.tooltip,n),u.wrap=!0;const h=e.series.push(new o.ColumnSeries);h.dataFields.valueX="value",h.dataFields.categoryY="tooltip",e.cursor=new o.XYCursor,s.series.length>l$&&(e.scrollbarY=new n.Scrollbar)}_createLineChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:n,am4charts:o}=i,a=e.xAxes.push(new o.CategoryAxis);a.dataFields.category="tooltip",a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,n),a.tooltip.events.on("sizechanged",()=>{a.tooltip.dy=-a.tooltip.contentHeight});const l=e.yAxes.push(new o.ValueAxis),u=l.renderer.labels.template;l.renderer.minLabelPosition=o$,l.renderer.maxLabelPosition=a$,l.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(l.tooltip,n),u.wrap=!0;const h=e.series.push(new o.LineSeries);h.dataFields.categoryX="tooltip",h.dataFields.valueY="value",e.cursor=new o.XYCursor,s.series.length>l$&&(e.scrollbarX=new n.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:r}=e,{type:s}=r,{am4core:n,am4charts:o}=i,a=n.create(t,o.XYChart);return a.rtl=Is(this.container),s==="column-chart"&&this._createColumnChart(a,e),s==="bar-chart"&&this._createBarChart(a,e),s==="line-chart"&&this._createLineChart(a,e),a}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const r=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const s=setInterval(()=>{this._updateMediaInfoTimestamp(i.sourceURL)},r);this._refreshTimer=s}_getImageSource(e,t){const i=e.indexOf("?")!==-1?"&":"?",[r,s=""]=e.split("#");return`${r}${i}timestamp=${t}${s?"#":""}${s}`}};c([ne("viewModel.attributes")],Ns.prototype,"attributes",void 0),c([ne("viewModel.activeMediaInfoIndex")],Ns.prototype,"activeMediaInfoIndex",void 0),c([ne("viewModel.description")],Ns.prototype,"description",void 0),c([ne("viewModel.fieldInfoMap")],Ns.prototype,"fieldInfoMap",void 0),c([ne("viewModel.layer")],Ns.prototype,"layer",void 0),c([ne("viewModel.mediaInfos")],Ns.prototype,"mediaInfos",void 0),c([ne("viewModel.popupTemplate")],Ns.prototype,"popupTemplate",void 0),c([ne("viewModel.relatedInfos")],Ns.prototype,"relatedInfos",void 0),c([ne("viewModel.title")],Ns.prototype,"title",void 0),c([d({type:Ph})],Ns.prototype,"viewModel",void 0),c([d(),Zt("esri/widgets/Feature/t9n/Feature")],Ns.prototype,"messages",void 0),Ns=c([O("esri.widgets.Feature.FeatureMedia")],Ns);const i7=Ns;class $de{constructor(t,i){this.definition=null,this.context=null,this.definition=t,this.context=i}}class dl{constructor(t=[]){this._elements=t}length(){return this._elements.length}get(t){return this._elements[t]}toArray(){const t=[];for(let i=0;i<this.length();i++)t.push(this.get(i));return t}}class wp extends dl{constructor(t,i,r,s,n,o){super(t),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=i,this._hasZ=r,this._hasM=s,this._cacheId=n,this._partId=o}get(t){if(this._lazyPt[t]===void 0){const i=this._elements[t];if(i===void 0)return;const r=this._hasZ,s=this._hasM;let n=null;n=r&&!s?new Le(i[0],i[1],i[2],void 0,this._spRef):s&&!r?new Le(i[0],i[1],void 0,i[2],this._spRef):r&&s?new Le(i[0],i[1],i[2],i[3],this._spRef):new Le(i[0],i[1],this._spRef),n.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+t.toString(),this._lazyPt[t]=n}return this._lazyPt[t]}equalityTest(t){return t===this||t!==null&&t instanceof wp&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}class mP extends dl{constructor(t,i,r,s,n){super(t),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=r,this._hasM=s,this._spRef=i,this._cacheId=n}get(t){if(this._lazyPath[t]===void 0){const i=this._elements[t];if(i===void 0)return;this._lazyPath[t]=new wp(i,this._spRef,this._hasZ,this._hasM,this._cacheId,t)}return this._lazyPath[t]}equalityTest(t){return t===this||t!==null&&t instanceof mP&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}class Sp extends Error{}class Cde extends Sp{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Ede extends Sp{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class Ade extends Sp{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class Jg extends Sp{}class r7 extends Sp{constructor(t){super(`Invalid unit ${t}`)}}class ao extends Sp{}class Pc extends Sp{constructor(){super("Zone is an abstract class")}}const Ce="numeric",pa="short",Pn="long",aA={year:Ce,month:Ce,day:Ce},s7={year:Ce,month:pa,day:Ce},Mde={year:Ce,month:pa,day:Ce,weekday:pa},n7={year:Ce,month:Pn,day:Ce},o7={year:Ce,month:Pn,day:Ce,weekday:Pn},a7={hour:Ce,minute:Ce},l7={hour:Ce,minute:Ce,second:Ce},c7={hour:Ce,minute:Ce,second:Ce,timeZoneName:pa},u7={hour:Ce,minute:Ce,second:Ce,timeZoneName:Pn},d7={hour:Ce,minute:Ce,hourCycle:"h23"},h7={hour:Ce,minute:Ce,second:Ce,hourCycle:"h23"},p7={hour:Ce,minute:Ce,second:Ce,hourCycle:"h23",timeZoneName:pa},f7={hour:Ce,minute:Ce,second:Ce,hourCycle:"h23",timeZoneName:Pn},m7={year:Ce,month:Ce,day:Ce,hour:Ce,minute:Ce},y7={year:Ce,month:Ce,day:Ce,hour:Ce,minute:Ce,second:Ce},g7={year:Ce,month:pa,day:Ce,hour:Ce,minute:Ce},v7={year:Ce,month:pa,day:Ce,hour:Ce,minute:Ce,second:Ce},Ode={year:Ce,month:pa,day:Ce,weekday:pa,hour:Ce,minute:Ce},_7={year:Ce,month:Pn,day:Ce,hour:Ce,minute:Ce,timeZoneName:pa},b7={year:Ce,month:Pn,day:Ce,hour:Ce,minute:Ce,second:Ce,timeZoneName:pa},w7={year:Ce,month:Pn,day:Ce,weekday:Pn,hour:Ce,minute:Ce,timeZoneName:Pn},S7={year:Ce,month:Pn,day:Ce,weekday:Pn,hour:Ce,minute:Ce,second:Ce,timeZoneName:Pn};function At(e){return typeof e=="undefined"}function Gh(e){return typeof e=="number"}function yI(e){return typeof e=="number"&&e%1===0}function kde(e){return typeof e=="string"}function Pde(e){return Object.prototype.toString.call(e)==="[object Date]"}function x7(){try{return typeof Intl!="undefined"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Lde(e){return Array.isArray(e)?e:[e]}function bN(e,t,i){if(e.length!==0)return e.reduce((r,s)=>{const n=[t(s),s];return r&&i(r[0],n[0])===r[0]?r:n},null)[1]}function Rde(e,t){return t.reduce((i,r)=>(i[r]=e[r],i),{})}function zm(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function rc(e,t,i){return yI(e)&&e>=t&&e<=i}function Fde(e,t){return e-t*Math.floor(e/t)}function er(e,t=2){const i=e<0;let r;return i?r="-"+(""+-e).padStart(t,"0"):r=(""+e).padStart(t,"0"),r}function Cu(e){if(!(At(e)||e===null||e===""))return parseInt(e,10)}function bd(e){if(!(At(e)||e===null||e===""))return parseFloat(e)}function yP(e){if(!(At(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function gP(e,t,i=!1){const r=10**t;return(i?Math.trunc:Math.round)(e*r)/r}function m_(e){return e%4===0&&(e%100!==0||e%400===0)}function O0(e){return m_(e)?366:365}function PS(e,t){const i=Fde(t-1,12)+1,r=e+(t-i)/12;return i===2?m_(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function vP(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900)),+t}function LS(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,i=e-1,r=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return t===4||r===3?53:52}function lA(e){return e>99?e:e>60?1900+e:2e3+e}function I7(e,t,i,r=null){const s=new Date(e),n={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(n.timeZone=r);const o=k({timeZoneName:t},n),a=new Intl.DateTimeFormat(i,o).formatToParts(s).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function gI(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);const r=parseInt(t,10)||0,s=i<0||Object.is(i,-0)?-r:r;return i*60+s}function T7(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new ao(`Invalid unit value ${e}`);return t}function RS(e,t){const i={};for(const r in e)if(zm(e,r)){const s=e[r];if(s==null)continue;i[t(r)]=T7(s)}return i}function FS(e,t){const i=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${er(i,2)}:${er(r,2)}`;case"narrow":return`${s}${i}${r>0?`:${r}`:""}`;case"techie":return`${s}${er(i,2)}${er(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function vI(e){return Rde(e,["hour","minute","second","millisecond"])}const Nde=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/,Dde=["January","February","March","April","May","June","July","August","September","October","November","December"],$7=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],jde=["J","F","M","A","M","J","J","A","S","O","N","D"];function C7(e){switch(e){case"narrow":return[...jde];case"short":return[...$7];case"long":return[...Dde];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const E7=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],A7=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],zde=["M","T","W","T","F","S","S"];function M7(e){switch(e){case"narrow":return[...zde];case"short":return[...A7];case"long":return[...E7];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const O7=["AM","PM"],Vde=["Before Christ","Anno Domini"],Ude=["BC","AD"],Bde=["B","A"];function k7(e){switch(e){case"narrow":return[...Bde];case"short":return[...Ude];case"long":return[...Vde];default:return null}}function qde(e){return O7[e.hour<12?0:1]}function Gde(e,t){return M7(t)[e.weekday-1]}function Hde(e,t){return C7(t)[e.month-1]}function Wde(e,t){return k7(t)[e.year<0?0:1]}function Jde(e,t,i="always",r=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},n=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&n){const f=e==="days";switch(t){case 1:return f?"tomorrow":`next ${s[e][0]}`;case-1:return f?"yesterday":`last ${s[e][0]}`;case 0:return f?"today":`this ${s[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,u=s[e],h=r?l?u[1]:u[2]||u[1]:l?s[e][0]:e;return o?`${a} ${h} ago`:`in ${a} ${h}`}function wN(e,t){let i="";for(const r of e)r.literal?i+=r.val:i+=t(r.val);return i}const Zde={D:aA,DD:s7,DDD:n7,DDDD:o7,t:a7,tt:l7,ttt:c7,tttt:u7,T:d7,TT:h7,TTT:p7,TTTT:f7,f:m7,ff:g7,fff:_7,ffff:w7,F:y7,FF:v7,FFF:b7,FFFF:S7};class Gs{static create(t,i={}){return new Gs(t,i)}static parseFormat(t){let i=null,r="",s=!1;const n=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(r.length>0&&n.push({literal:s,val:r}),i=null,r="",s=!s):s||a===i?r+=a:(r.length>0&&n.push({literal:!1,val:r}),r=a,i=a)}return r.length>0&&n.push({literal:s,val:r}),n}static macroTokenToFormatOpts(t){return Zde[t]}constructor(t,i){this.opts=i,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,k(k({},this.opts),i)).format()}formatDateTime(t,i={}){return this.loc.dtFormatter(t,k(k({},this.opts),i)).format()}formatDateTimeParts(t,i={}){return this.loc.dtFormatter(t,k(k({},this.opts),i)).formatToParts()}resolvedOptions(t,i={}){return this.loc.dtFormatter(t,k(k({},this.opts),i)).resolvedOptions()}num(t,i=0){if(this.opts.forceSimple)return er(t,i);const r=k({},this.opts);return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(t)}formatDateTimeFromString(t,i){const r=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",n=(g,b)=>this.loc.extract(t,g,b),o=g=>t.isOffsetFixed&&t.offset===0&&g.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,g.format):"",a=()=>r?qde(t):n({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(g,b)=>r?Hde(t,g):n(b?{month:g}:{month:g,day:"numeric"},"month"),u=(g,b)=>r?Gde(t,g):n(b?{weekday:g}:{weekday:g,month:"long",day:"numeric"},"weekday"),h=g=>{const b=Gs.macroTokenToFormatOpts(g);return b?this.formatWithSystemDefault(t,b):g},f=g=>r?Wde(t,g):n({era:g},"era"),y=g=>{switch(g){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return s?n({day:"numeric"},"day"):this.num(t.day);case"dd":return s?n({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return s?n({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return s?n({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return s?n({month:"numeric"},"month"):this.num(t.month);case"MM":return s?n({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return s?n({year:"numeric"},"year"):this.num(t.year);case"yy":return s?n({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return s?n({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return s?n({year:"numeric"},"year"):this.num(t.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return h(g)}};return wN(Gs.parseFormat(i),y)}formatDurationFromString(t,i){const r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=l=>u=>{const h=r(u);return h?this.num(l.get(h),u.length):u},n=Gs.parseFormat(i),o=n.reduce((l,{literal:u,val:h})=>u?l:l.concat(h),[]),a=t.shiftTo(...o.map(r).filter(l=>l));return wN(n,s(a))}}class ra{constructor(t,i){this.reason=t,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class y_{get type(){throw new Pc}get name(){throw new Pc}get isUniversal(){throw new Pc}offsetName(t,i){throw new Pc}formatOffset(t,i){throw new Pc}offset(t){throw new Pc}equals(t){throw new Pc}get isValid(){throw new Pc}}let c$=null;class _P extends y_{static get instance(){return c$===null&&(c$=new _P),c$}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return I7(t,i,r)}formatOffset(t,i){return FS(this.offset(t),i)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let Ww={};function Yde(e){return Ww[e]||(Ww[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Ww[e]}const Kde={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Qde(e,t){const i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,s,n,o,a,l,u,h]=r;return[o,s,n,a,l,u,h]}function Xde(e,t){const i=e.formatToParts(t),r=[];for(let s=0;s<i.length;s++){const{type:n,value:o}=i[s],a=Kde[n];n==="era"?r[a]=o:At(a)||(r[a]=parseInt(o,10))}return r}let wb={};class fc extends y_{static create(t){return wb[t]||(wb[t]=new fc(t)),wb[t]}static resetCache(){wb={},Ww={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=fc.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return I7(t,i,r,this.name)}formatOffset(t,i){return FS(this.offset(t),i)}offset(t){const i=new Date(t);if(isNaN(i))return NaN;const r=Yde(this.name);let[s,n,o,a,l,u,h]=r.formatToParts?Xde(r,i):Qde(r,i);a==="BC"&&(s=-Math.abs(s)+1);const y=vP({year:s,month:n,day:o,hour:l===24?0:l,minute:u,second:h,millisecond:0});let g=+i;const b=g%1e3;return g-=b>=0?b:1e3+b,(y-g)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let u$=null;class Ts extends y_{static get utcInstance(){return u$===null&&(u$=new Ts(0)),u$}static instance(t){return t===0?Ts.utcInstance:new Ts(t)}static parseSpecifier(t){if(t){const i=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Ts(gI(i[1],i[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${FS(this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,i){return FS(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class ehe extends y_{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Lu(e,t){if(At(e)||e===null)return t;if(e instanceof y_)return e;if(kde(e)){const i=e.toLowerCase();return i==="local"||i==="system"?t:i==="utc"||i==="gmt"?Ts.utcInstance:Ts.parseSpecifier(i)||fc.create(e)}else return Gh(e)?Ts.instance(e):typeof e=="object"&&e.offset&&typeof e.offset=="number"?e:new ehe(e)}let SN=()=>Date.now(),xN="system",IN=null,TN=null,$N=null,CN;class hr{static get now(){return SN}static set now(t){SN=t}static set defaultZone(t){xN=t}static get defaultZone(){return Lu(xN,_P.instance)}static get defaultLocale(){return IN}static set defaultLocale(t){IN=t}static get defaultNumberingSystem(){return TN}static set defaultNumberingSystem(t){TN=t}static get defaultOutputCalendar(){return $N}static set defaultOutputCalendar(t){$N=t}static get throwOnInvalid(){return CN}static set throwOnInvalid(t){CN=t}static resetCaches(){Ci.resetCache(),fc.resetCache()}}let EN={};function the(e,t={}){const i=JSON.stringify([e,t]);let r=EN[i];return r||(r=new Intl.ListFormat(e,t),EN[i]=r),r}let cA={};function uA(e,t={}){const i=JSON.stringify([e,t]);let r=cA[i];return r||(r=new Intl.DateTimeFormat(e,t),cA[i]=r),r}let dA={};function ihe(e,t={}){const i=JSON.stringify([e,t]);let r=dA[i];return r||(r=new Intl.NumberFormat(e,t),dA[i]=r),r}let hA={};function rhe(e,t={}){const o=t,{base:i}=o,r=K_(o,["base"]),s=JSON.stringify([e,r]);let n=hA[s];return n||(n=new Intl.RelativeTimeFormat(e,t),hA[s]=n),n}let Zg=null;function she(){return Zg||(Zg=new Intl.DateTimeFormat().resolvedOptions().locale,Zg)}function nhe(e){const t=e.indexOf("-u-");if(t===-1)return[e];{let i;const r=e.substring(0,t);try{i=uA(e).resolvedOptions()}catch{i=uA(r).resolvedOptions()}const{numberingSystem:s,calendar:n}=i;return[r,s,n]}}function ohe(e,t,i){return(i||t)&&(e+="-u",i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`)),e}function ahe(e){const t=[];for(let i=1;i<=12;i++){const r=Ve.utc(2016,i,1);t.push(e(r))}return t}function lhe(e){const t=[];for(let i=1;i<=7;i++){const r=Ve.utc(2016,11,13+i);t.push(e(r))}return t}function Sb(e,t,i,r,s){const n=e.listingMode(i);return n==="error"?null:n==="en"?r(t):s(t)}function che(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class uhe{constructor(t,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const a=r,{padTo:s,floor:n}=a,o=K_(a,["padTo","floor"]);if(!i||Object.keys(o).length>0){const l=k({useGrouping:!1},r);r.padTo>0&&(l.minimumIntegerDigits=r.padTo),this.inf=ihe(t,l)}}format(t){if(this.inf){const i=this.floor?Math.floor(t):t;return this.inf.format(i)}else{const i=this.floor?Math.floor(t):gP(t,3);return er(i,this.padTo)}}}class dhe{constructor(t,i,r){this.opts=r;let s;if(t.zone.isUniversal){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&fc.create(a).valid?(s=a,this.dt=t):(s="UTC",r.timeZoneName?this.dt=t:this.dt=t.offset===0?t:Ve.fromMillis(t.ts+t.offset*60*1e3))}else t.zone.type==="system"?this.dt=t:(this.dt=t,s=t.zone.name);const n=k({},this.opts);s&&(n.timeZone=s),this.dtf=uA(i,n)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class hhe{constructor(t,i,r){this.opts=k({style:"long"},r),!i&&x7()&&(this.rtf=rhe(t,r))}format(t,i){return this.rtf?this.rtf.format(t,i):Jde(i,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,i){return this.rtf?this.rtf.formatToParts(t,i):[]}}class Ci{static fromOpts(t){return Ci.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,i,r,s=!1){const n=t||hr.defaultLocale,o=n||(s?"en-US":she()),a=i||hr.defaultNumberingSystem,l=r||hr.defaultOutputCalendar;return new Ci(o,a,l,n)}static resetCache(){Zg=null,cA={},dA={},hA={}}static fromObject({locale:t,numberingSystem:i,outputCalendar:r}={}){return Ci.create(t,i,r)}constructor(t,i,r,s){const[n,o,a]=nhe(t);this.locale=n,this.numberingSystem=i||o||null,this.outputCalendar=r||a||null,this.intl=ohe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=che(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&i?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Ci.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone(be(k({},t),{defaultToEN:!0}))}redefaultToSystem(t={}){return this.clone(be(k({},t),{defaultToEN:!1}))}months(t,i=!1,r=!0){return Sb(this,t,r,C7,()=>{const s=i?{month:t,day:"numeric"}:{month:t},n=i?"format":"standalone";return this.monthsCache[n][t]||(this.monthsCache[n][t]=ahe(o=>this.extract(o,s,"month"))),this.monthsCache[n][t]})}weekdays(t,i=!1,r=!0){return Sb(this,t,r,M7,()=>{const s=i?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},n=i?"format":"standalone";return this.weekdaysCache[n][t]||(this.weekdaysCache[n][t]=lhe(o=>this.extract(o,s,"weekday"))),this.weekdaysCache[n][t]})}meridiems(t=!0){return Sb(this,void 0,t,()=>O7,()=>{if(!this.meridiemCache){const i={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ve.utc(2016,11,13,9),Ve.utc(2016,11,13,19)].map(r=>this.extract(r,i,"dayperiod"))}return this.meridiemCache})}eras(t,i=!0){return Sb(this,t,i,k7,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[Ve.utc(-40,1,1),Ve.utc(2017,1,1)].map(s=>this.extract(s,r,"era"))),this.eraCache[t]})}extract(t,i,r){const s=this.dtFormatter(t,i),n=s.formatToParts(),o=n.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(t={}){return new uhe(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,i={}){return new dhe(t,this.intl,i)}relFormatter(t={}){return new hhe(this.intl,this.isEnglish(),t)}listFormatter(t={}){return the(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}function yy(...e){const t=e.reduce((i,r)=>i+r.source,"");return RegExp(`^${t}$`)}function xp(...e){return t=>e.reduce(([i,r,s],n)=>{const[o,a,l]=n(t,s);return[k(k({},i),o),r||a,l]},[{},null,1]).slice(0,2)}function gy(e,...t){if(e==null)return[null,null];for(const[i,r]of t){const s=i.exec(e);if(s)return r(s)}return[null,null]}function P7(...e){return(t,i)=>{const r={};let s;for(s=0;s<e.length;s++)r[e[s]]=Cu(t[i+s]);return[r,null,i+s]}}const L7=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,bP=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,R7=RegExp(`${bP.source}${L7.source}?`),wP=RegExp(`(?:T${R7.source})?`),phe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,fhe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,mhe=/(\d{4})-?(\d{3})/,yhe=P7("weekYear","weekNumber","weekDay"),ghe=P7("year","ordinal"),vhe=/(\d{4})-(\d\d)-(\d\d)/,F7=RegExp(`${bP.source} ?(?:${L7.source}|(${Nde.source}))?`),_he=RegExp(`(?: ${F7.source})?`);function bm(e,t,i){const r=e[t];return At(r)?i:Cu(r)}function N7(e,t){return[{year:bm(e,t),month:bm(e,t+1,1),day:bm(e,t+2,1)},null,t+3]}function Ip(e,t){return[{hours:bm(e,t,0),minutes:bm(e,t+1,0),seconds:bm(e,t+2,0),milliseconds:yP(e[t+3])},null,t+4]}function vy(e,t){const i=!e[t]&&!e[t+1],r=gI(e[t+1],e[t+2]),s=i?null:Ts.instance(r);return[{},s,t+3]}function D7(e,t){const i=e[t]?fc.create(e[t]):null;return[{},i,t+1]}const bhe=RegExp(`^T?${bP.source}$`),whe=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function She(e){const[t,i,r,s,n,o,a,l,u]=e,h=t[0]==="-",f=l&&l[0]==="-",y=(g,b=!1)=>g!==void 0&&(b||g&&h)?-g:g;return[{years:y(bd(i)),months:y(bd(r)),weeks:y(bd(s)),days:y(bd(n)),hours:y(bd(o)),minutes:y(bd(a)),seconds:y(bd(l),l==="-0"),milliseconds:y(yP(u),f)}]}const xhe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function SP(e,t,i,r,s,n,o){const a={year:t.length===2?lA(Cu(t)):Cu(t),month:$7.indexOf(i)+1,day:Cu(r),hour:Cu(s),minute:Cu(n)};return o&&(a.second=Cu(o)),e&&(a.weekday=e.length>3?E7.indexOf(e)+1:A7.indexOf(e)+1),a}const Ihe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function The(e){const[,t,i,r,s,n,o,a,l,u,h,f]=e,y=SP(t,s,r,i,n,o,a);let g;return l?g=xhe[l]:u?g=0:g=gI(h,f),[y,new Ts(g)]}function $he(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Che=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Ehe=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Ahe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function AN(e){const[,t,i,r,s,n,o,a]=e;return[SP(t,s,r,i,n,o,a),Ts.utcInstance]}function Mhe(e){const[,t,i,r,s,n,o,a]=e;return[SP(t,a,i,r,s,n,o),Ts.utcInstance]}const Ohe=yy(phe,wP),khe=yy(fhe,wP),Phe=yy(mhe,wP),Lhe=yy(R7),Rhe=xp(N7,Ip,vy),Fhe=xp(yhe,Ip,vy),Nhe=xp(ghe,Ip,vy),Dhe=xp(Ip,vy);function jhe(e){return gy(e,[Ohe,Rhe],[khe,Fhe],[Phe,Nhe],[Lhe,Dhe])}function zhe(e){return gy($he(e),[Ihe,The])}function Vhe(e){return gy(e,[Che,AN],[Ehe,AN],[Ahe,Mhe])}function Uhe(e){return gy(e,[whe,She])}const Bhe=xp(Ip);function qhe(e){return gy(e,[bhe,Bhe])}const Ghe=yy(vhe,_he),Hhe=yy(F7),Whe=xp(N7,Ip,vy,D7),Jhe=xp(Ip,vy,D7);function Zhe(e){return gy(e,[Ghe,Whe],[Hhe,Jhe])}const Yhe="Invalid Duration",j7={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Khe=k({years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3}},j7),qn=146097/400,Np=146097/4800,Qhe=k({years:{quarters:4,months:12,weeks:qn/7,days:qn,hours:qn*24,minutes:qn*24*60,seconds:qn*24*60*60,milliseconds:qn*24*60*60*1e3},quarters:{months:3,weeks:qn/28,days:qn/4,hours:qn*24/4,minutes:qn*24*60/4,seconds:qn*24*60*60/4,milliseconds:qn*24*60*60*1e3/4},months:{weeks:Np/7,days:Np,hours:Np*24,minutes:Np*24*60,seconds:Np*24*60*60,milliseconds:Np*24*60*60*1e3}},j7),Wd=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Xhe=Wd.slice(0).reverse();function wd(e,t,i=!1){const r={values:i?t.values:k(k({},e.values),t.values||{}),loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy};return new kt(r)}function epe(e){return e<0?Math.floor(e):Math.ceil(e)}function z7(e,t,i,r,s){const n=e[s][i],o=t[i]/n,a=Math.sign(o)===Math.sign(r[s]),l=!a&&r[s]!==0&&Math.abs(o)<=1?epe(o):Math.trunc(o);r[s]+=l,t[i]-=l*n}function tpe(e,t){Xhe.reduce((i,r)=>At(t[r])?i:(i&&z7(e,t,i,t,r),r),null)}class kt{constructor(t){const i=t.conversionAccuracy==="longterm"||!1;this.values=t.values,this.loc=t.loc||Ci.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i?Qhe:Khe,this.isLuxonDuration=!0}static fromMillis(t,i){return kt.fromObject({milliseconds:t},i)}static fromObject(t,i={}){if(t==null||typeof t!="object")throw new ao(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new kt({values:RS(t,kt.normalizeUnit),loc:Ci.fromObject(i),conversionAccuracy:i.conversionAccuracy})}static fromDurationLike(t){if(Gh(t))return kt.fromMillis(t);if(kt.isDuration(t))return t;if(typeof t=="object")return kt.fromObject(t);throw new ao(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,i){const[r]=Uhe(t);return r?kt.fromObject(r,i):kt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,i){const[r]=qhe(t);return r?kt.fromObject(r,i):kt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,i=null){if(!t)throw new ao("need to specify a reason the Duration is invalid");const r=t instanceof ra?t:new ra(t,i);if(hr.throwOnInvalid)throw new Ade(r);return new kt({invalid:r})}static normalizeUnit(t){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!i)throw new r7(t);return i}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,i={}){const r=be(k({},i),{floor:i.round!==!1&&i.floor!==!1});return this.isValid?Gs.create(this.loc,r).formatDurationFromString(this,t):Yhe}toHuman(t={}){const i=Wd.map(r=>{const s=this.values[r];return At(s)?null:this.loc.numberFormatter(be(k({style:"unit",unitDisplay:"long"},t),{unit:r.slice(0,-1)})).format(s)}).filter(r=>r);return this.loc.listFormatter(k({type:"conjunction",style:t.listStyle||"narrow"},t)).format(i)}toObject(){return this.isValid?k({},this.values):{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=gP(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const i=this.toMillis();if(i<0||i>=864e5)return null;t=k({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},t);const r=this.shiftTo("hours","minutes","seconds","milliseconds");let s=t.format==="basic"?"hhmm":"hh:mm";(!t.suppressSeconds||r.seconds!==0||r.milliseconds!==0)&&(s+=t.format==="basic"?"ss":":ss",(!t.suppressMilliseconds||r.milliseconds!==0)&&(s+=".SSS"));let n=r.toFormat(s);return t.includePrefix&&(n="T"+n),n}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const i=kt.fromDurationLike(t),r={};for(const s of Wd)(zm(i.values,s)||zm(this.values,s))&&(r[s]=i.get(s)+this.get(s));return wd(this,{values:r},!0)}minus(t){if(!this.isValid)return this;const i=kt.fromDurationLike(t);return this.plus(i.negate())}mapUnits(t){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=T7(t(this.values[r],r));return wd(this,{values:i},!0)}get(t){return this[kt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const i=k(k({},this.values),RS(t,kt.normalizeUnit));return wd(this,{values:i})}reconfigure({locale:t,numberingSystem:i,conversionAccuracy:r}={}){const s=this.loc.clone({locale:t,numberingSystem:i}),n={loc:s};return r&&(n.conversionAccuracy=r),wd(this,n)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return tpe(this.matrix,t),wd(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>kt.normalizeUnit(o));const i={},r={},s=this.toObject();let n;for(const o of Wd)if(t.indexOf(o)>=0){n=o;let a=0;for(const u in r)a+=this.matrix[u][o]*r[u],r[u]=0;Gh(s[o])&&(a+=s[o]);const l=Math.trunc(a);i[o]=l,r[o]=(a*1e3-l*1e3)/1e3;for(const u in s)Wd.indexOf(u)>Wd.indexOf(o)&&z7(this.matrix,s,u,i,o)}else Gh(s[o])&&(r[o]=s[o]);for(const o in r)r[o]!==0&&(i[n]+=o===n?r[o]:r[o]/this.matrix[n][o]);return wd(this,{values:i},!0).normalize()}negate(){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=this.values[i]===0?0:-this.values[i];return wd(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function i(r,s){return r===void 0||r===0?s===void 0||s===0:r===s}for(const r of Wd)if(!i(this.values[r],t.values[r]))return!1;return!0}}const Jy="Invalid Interval";function ipe(e,t){return!e||!e.isValid?$i.invalid("missing or invalid start"):!t||!t.isValid?$i.invalid("missing or invalid end"):t<e?$i.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class $i{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,i=null){if(!t)throw new ao("need to specify a reason the Interval is invalid");const r=t instanceof ra?t:new ra(t,i);if(hr.throwOnInvalid)throw new Ede(r);return new $i({invalid:r})}static fromDateTimes(t,i){const r=Ky(t),s=Ky(i),n=ipe(r,s);return n==null?new $i({start:r,end:s}):n}static after(t,i){const r=kt.fromDurationLike(i),s=Ky(t);return $i.fromDateTimes(s,s.plus(r))}static before(t,i){const r=kt.fromDurationLike(i),s=Ky(t);return $i.fromDateTimes(s.minus(r),s)}static fromISO(t,i){const[r,s]=(t||"").split("/",2);if(r&&s){let n,o;try{n=Ve.fromISO(r,i),o=n.isValid}catch{o=!1}let a,l;try{a=Ve.fromISO(s,i),l=a.isValid}catch{l=!1}if(o&&l)return $i.fromDateTimes(n,a);if(o){const u=kt.fromISO(s,i);if(u.isValid)return $i.after(n,u)}else if(l){const u=kt.fromISO(r,i);if(u.isValid)return $i.before(a,u)}}return $i.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const i=this.start.startOf(t),r=this.end.startOf(t);return Math.floor(r.diff(i,t).get(t))+1}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:i}={}){return this.isValid?$i.fromDateTimes(t||this.s,i||this.e):this}splitAt(...t){if(!this.isValid)return[];const i=t.map(Ky).filter(o=>this.contains(o)).sort(),r=[];let{s}=this,n=0;for(;s<this.e;){const o=i[n]||this.e,a=+o>+this.e?this.e:o;r.push($i.fromDateTimes(s,a)),s=a,n+=1}return r}splitBy(t){const i=kt.fromDurationLike(t);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,s=1,n;const o=[];for(;r<this.e;){const a=this.start.plus(i.mapUnits(l=>l*s));n=+a>+this.e?this.e:a,o.push($i.fromDateTimes(r,n)),r=n,s+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const i=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return i>=r?null:$i.fromDateTimes(i,r)}union(t){if(!this.isValid)return this;const i=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return $i.fromDateTimes(i,r)}static merge(t){const[i,r]=t.sort((s,n)=>s.s-n.s).reduce(([s,n],o)=>n?n.overlaps(o)||n.abutsStart(o)?[s,n.union(o)]:[s.concat([n]),o]:[s,o],[[],null]);return r&&i.push(r),i}static xor(t){let i=null,r=0;const s=[],n=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...n),a=o.sort((l,u)=>l.time-u.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?i=l.time:(i&&+i!=+l.time&&s.push($i.fromDateTimes(i,l.time)),i=null);return $i.merge(s)}difference(...t){return $i.xor([this].concat(t)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Jy}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Jy}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Jy}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Jy}toFormat(t,{separator:i=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(t)}${i}${this.e.toFormat(t)}`:Jy}toDuration(t,i){return this.isValid?this.e.diff(this.s,t,i):kt.invalid(this.invalidReason)}mapEndpoints(t){return $i.fromDateTimes(t(this.s),t(this.e))}}class Yg{static hasDST(t=hr.defaultZone){const i=Ve.now().setZone(t).set({month:12});return!t.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(t){return fc.isValidZone(t)}static normalizeZone(t){return Lu(t,hr.defaultZone)}static months(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||Ci.create(i,r,n)).months(t)}static monthsFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||Ci.create(i,r,n)).months(t,!0)}static weekdays(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||Ci.create(i,r,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||Ci.create(i,r,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Ci.create(t).meridiems()}static eras(t="short",{locale:i=null}={}){return Ci.create(i,null,"gregory").eras(t)}static features(){return{relative:x7()}}}function MN(e,t){const i=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(t)-i(e);return Math.floor(kt.fromMillis(r).as("days"))}function rpe(e,t,i){const r=[["years",(a,l)=>l.year-a.year],["quarters",(a,l)=>l.quarter-a.quarter],["months",(a,l)=>l.month-a.month+(l.year-a.year)*12],["weeks",(a,l)=>{const u=MN(a,l);return(u-u%7)/7}],["days",MN]],s={};let n,o;for(const[a,l]of r)if(i.indexOf(a)>=0){n=a;let u=l(e,t);o=e.plus({[a]:u}),o>t?(e=e.plus({[a]:u-1}),u-=1):e=o,s[a]=u}return[e,s,o,n]}function spe(e,t,i,r){let[s,n,o,a]=rpe(e,t,i);const l=t-s,u=i.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);u.length===0&&(o<t&&(o=s.plus({[a]:1})),o!==s&&(n[a]=(n[a]||0)+l/(o-s)));const h=kt.fromObject(n,r);return u.length>0?kt.fromMillis(l,r).shiftTo(...u).plus(h):h}const xP={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},ON={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},npe=xP.hanidec.replace(/[\[|\]]/g,"").split("");function ope(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);if(e[i].search(xP.hanidec)!==-1)t+=npe.indexOf(e[i]);else for(const s in ON){const[n,o]=ON[s];r>=n&&r<=o&&(t+=r-n)}}return parseInt(t,10)}else return t}function Mo({numberingSystem:e},t=""){return new RegExp(`${xP[e||"latn"]}${t}`)}const ape="missing Intl.DateTimeFormat.formatToParts support";function Dt(e,t=i=>i){return{regex:e,deser:([i])=>t(ope(i))}}const lpe=String.fromCharCode(160),V7=`( |${lpe})`,U7=new RegExp(V7,"g");function cpe(e){return e.replace(/\./g,"\\.?").replace(U7,V7)}function kN(e){return e.replace(/\./g,"").replace(U7," ").toLowerCase()}function Oo(e,t){return e===null?null:{regex:RegExp(e.map(cpe).join("|")),deser:([i])=>e.findIndex(r=>kN(i)===kN(r))+t}}function PN(e,t){return{regex:e,deser:([,i,r])=>gI(i,r),groups:t}}function d$(e){return{regex:e,deser:([t])=>t}}function upe(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function dpe(e,t){const i=Mo(t),r=Mo(t,"{2}"),s=Mo(t,"{3}"),n=Mo(t,"{4}"),o=Mo(t,"{6}"),a=Mo(t,"{1,2}"),l=Mo(t,"{1,3}"),u=Mo(t,"{1,6}"),h=Mo(t,"{1,9}"),f=Mo(t,"{2,4}"),y=Mo(t,"{4,6}"),g=x=>({regex:RegExp(upe(x.val)),deser:([T])=>T,literal:!0}),w=(x=>{if(e.literal)return g(x);switch(x.val){case"G":return Oo(t.eras("short",!1),0);case"GG":return Oo(t.eras("long",!1),0);case"y":return Dt(u);case"yy":return Dt(f,lA);case"yyyy":return Dt(n);case"yyyyy":return Dt(y);case"yyyyyy":return Dt(o);case"M":return Dt(a);case"MM":return Dt(r);case"MMM":return Oo(t.months("short",!0,!1),1);case"MMMM":return Oo(t.months("long",!0,!1),1);case"L":return Dt(a);case"LL":return Dt(r);case"LLL":return Oo(t.months("short",!1,!1),1);case"LLLL":return Oo(t.months("long",!1,!1),1);case"d":return Dt(a);case"dd":return Dt(r);case"o":return Dt(l);case"ooo":return Dt(s);case"HH":return Dt(r);case"H":return Dt(a);case"hh":return Dt(r);case"h":return Dt(a);case"mm":return Dt(r);case"m":return Dt(a);case"q":return Dt(a);case"qq":return Dt(r);case"s":return Dt(a);case"ss":return Dt(r);case"S":return Dt(l);case"SSS":return Dt(s);case"u":return d$(h);case"uu":return d$(a);case"uuu":return Dt(i);case"a":return Oo(t.meridiems(),0);case"kkkk":return Dt(n);case"kk":return Dt(f,lA);case"W":return Dt(a);case"WW":return Dt(r);case"E":case"c":return Dt(i);case"EEE":return Oo(t.weekdays("short",!1,!1),1);case"EEEE":return Oo(t.weekdays("long",!1,!1),1);case"ccc":return Oo(t.weekdays("short",!0,!1),1);case"cccc":return Oo(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return PN(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return PN(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return d$(/[a-z_+-/]{1,256}?/i);default:return g(x)}})(e)||{invalidReason:ape};return w.token=e,w}const hpe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};function ppe(e,t,i){const{type:r,value:s}=e;if(r==="literal")return{literal:!0,val:s};const n=i[r];let o=hpe[r];if(typeof o=="object"&&(o=o[n]),o)return{literal:!1,val:o}}function fpe(e){return[`^${e.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,e]}function mpe(e,t,i){const r=e.match(t);if(r){const s={};let n=1;for(const o in i)if(zm(i,o)){const a=i[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(s[a.token.val[0]]=a.deser(r.slice(n,n+l))),n+=l}return[r,s]}else return[r,{}]}function ype(e){const t=n=>{switch(n){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return At(e.z)||(i=fc.create(e.z)),At(e.Z)||(i||(i=new Ts(e.Z)),r=e.Z),At(e.q)||(e.M=(e.q-1)*3+1),At(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),At(e.u)||(e.S=yP(e.u)),[Object.keys(e).reduce((n,o)=>{const a=t(o);return a&&(n[a]=e[o]),n},{}),i,r]}let h$=null;function gpe(){return h$||(h$=Ve.fromMillis(1555555555555)),h$}function vpe(e,t){if(e.literal)return e;const i=Gs.macroTokenToFormatOpts(e.val);if(!i)return e;const n=Gs.create(t,i).formatDateTimeParts(gpe()).map(o=>ppe(o,t,i));return n.includes(void 0)?e:n}function _pe(e,t){return Array.prototype.concat(...e.map(i=>vpe(i,t)))}function B7(e,t,i){const r=_pe(Gs.parseFormat(i),e),s=r.map(o=>dpe(o,e)),n=s.find(o=>o.invalidReason);if(n)return{input:t,tokens:r,invalidReason:n.invalidReason};{const[o,a]=fpe(s),l=RegExp(o,"i"),[u,h]=mpe(t,l,a),[f,y,g]=h?ype(h):[null,null,void 0];if(zm(h,"a")&&zm(h,"H"))throw new Jg("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:r,regex:l,rawMatches:u,matches:h,result:f,zone:y,specificOffset:g}}}function bpe(e,t,i){const{result:r,zone:s,specificOffset:n,invalidReason:o}=B7(e,t,i);return[r,s,n,o]}const q7=[0,31,59,90,120,151,181,212,243,273,304,334],G7=[0,31,60,91,121,152,182,213,244,274,305,335];function lo(e,t){return new ra("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function H7(e,t,i){const r=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const s=r.getUTCDay();return s===0?7:s}function W7(e,t,i){return i+(m_(e)?G7:q7)[t-1]}function J7(e,t){const i=m_(e)?G7:q7,r=i.findIndex(n=>n<t),s=t-i[r];return{month:r+1,day:s}}function pA(e){const{year:t,month:i,day:r}=e,s=W7(t,i,r),n=H7(t,i,r);let o=Math.floor((s-n+10)/7),a;return o<1?(a=t-1,o=LS(a)):o>LS(t)?(a=t+1,o=1):a=t,k({weekYear:a,weekNumber:o,weekday:n},vI(e))}function LN(e){const{weekYear:t,weekNumber:i,weekday:r}=e,s=H7(t,1,4),n=O0(t);let o=i*7+r-s-3,a;o<1?(a=t-1,o+=O0(a)):o>n?(a=t+1,o-=O0(t)):a=t;const{month:l,day:u}=J7(a,o);return k({year:a,month:l,day:u},vI(e))}function p$(e){const{year:t,month:i,day:r}=e,s=W7(t,i,r);return k({year:t,ordinal:s},vI(e))}function RN(e){const{year:t,ordinal:i}=e,{month:r,day:s}=J7(t,i);return k({year:t,month:r,day:s},vI(e))}function wpe(e){const t=yI(e.weekYear),i=rc(e.weekNumber,1,LS(e.weekYear)),r=rc(e.weekday,1,7);return t?i?r?!1:lo("weekday",e.weekday):lo("week",e.week):lo("weekYear",e.weekYear)}function Spe(e){const t=yI(e.year),i=rc(e.ordinal,1,O0(e.year));return t?i?!1:lo("ordinal",e.ordinal):lo("year",e.year)}function Z7(e){const t=yI(e.year),i=rc(e.month,1,12),r=rc(e.day,1,PS(e.year,e.month));return t?i?r?!1:lo("day",e.day):lo("month",e.month):lo("year",e.year)}function Y7(e){const{hour:t,minute:i,second:r,millisecond:s}=e,n=rc(t,0,23)||t===24&&i===0&&r===0&&s===0,o=rc(i,0,59),a=rc(r,0,59),l=rc(s,0,999);return n?o?a?l?!1:lo("millisecond",s):lo("second",r):lo("minute",i):lo("hour",t)}const f$="Invalid DateTime",FN=864e13;function xb(e){return new ra("unsupported zone",`the zone "${e.name}" is not supported`)}function m$(e){return e.weekData===null&&(e.weekData=pA(e.c)),e.weekData}function Zy(e,t){const i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Ve(be(k(k({},i),t),{old:i}))}function K7(e,t,i){let r=e-t*60*1e3;const s=i.offset(r);if(t===s)return[r,t];r-=(s-t)*60*1e3;const n=i.offset(r);return s===n?[r,s]:[e-Math.min(s,n)*60*1e3,Math.max(s,n)]}function NN(e,t){e+=t*60*1e3;const i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function Jw(e,t,i){return K7(vP(e),t,i)}function DN(e,t){const i=e.o,r=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,n=be(k({},e.c),{year:r,month:s,day:Math.min(e.c.day,PS(r,s))+Math.trunc(t.days)+Math.trunc(t.weeks)*7}),o=kt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=vP(n);let[l,u]=K7(a,i,e.zone);return o!==0&&(l+=o,u=e.zone.offset(l)),{ts:l,o:u}}function Yy(e,t,i,r,s,n){const{setZone:o,zone:a}=i;if(e&&Object.keys(e).length!==0){const l=t||a,u=Ve.fromObject(e,be(k({},i),{zone:l,specificOffset:n}));return o?u:u.setZone(a)}else return Ve.invalid(new ra("unparsable",`the input "${s}" can't be parsed as ${r}`))}function Ib(e,t,i=!0){return e.isValid?Gs.create(Ci.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function y$(e,t){const i=e.c.year>9999||e.c.year<0;let r="";return i&&e.c.year>=0&&(r+="+"),r+=er(e.c.year,i?6:4),t?(r+="-",r+=er(e.c.month),r+="-",r+=er(e.c.day)):(r+=er(e.c.month),r+=er(e.c.day)),r}function jN(e,t,i,r,s){let n=er(e.c.hour);return t?(n+=":",n+=er(e.c.minute),(e.c.second!==0||!i)&&(n+=":")):n+=er(e.c.minute),(e.c.second!==0||!i)&&(n+=er(e.c.second),(e.c.millisecond!==0||!r)&&(n+=".",n+=er(e.c.millisecond,3))),s&&(e.isOffsetFixed&&e.offset===0?n+="Z":e.o<0?(n+="-",n+=er(Math.trunc(-e.o/60)),n+=":",n+=er(Math.trunc(-e.o%60))):(n+="+",n+=er(Math.trunc(e.o/60)),n+=":",n+=er(Math.trunc(e.o%60)))),n}const Q7={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},xpe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ipe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},X7=["year","month","day","hour","minute","second","millisecond"],Tpe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],$pe=["year","ordinal","hour","minute","second","millisecond"];function zN(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new r7(e);return t}function VN(e,t){const i=Lu(t.zone,hr.defaultZone),r=Ci.fromObject(t),s=hr.now();let n,o;if(At(e.year))n=s;else{for(const u of X7)At(e[u])&&(e[u]=Q7[u]);const a=Z7(e)||Y7(e);if(a)return Ve.invalid(a);const l=i.offset(s);[n,o]=Jw(e,l,i)}return new Ve({ts:n,zone:i,loc:r,o})}function UN(e,t,i){const r=At(i.round)?!0:i.round,s=(o,a)=>(o=gP(o,r||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(o,a)),n=o=>i.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(i.unit)return s(n(i.unit),i.unit);for(const o of i.units){const a=n(o);if(Math.abs(a)>=1)return s(a,o)}return s(e>t?-0:0,i.units[i.units.length-1])}function BN(e){let t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}class Ve{constructor(t){const i=t.zone||hr.defaultZone;let r=t.invalid||(Number.isNaN(t.ts)?new ra("invalid input"):null)||(i.isValid?null:xb(i));this.ts=At(t.ts)?hr.now():t.ts;let s=null,n=null;if(!r)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(i))[s,n]=[t.old.c,t.old.o];else{const a=i.offset(this.ts);s=NN(this.ts,a),r=Number.isNaN(s.year)?new ra("invalid input"):null,s=r?null:s,n=r?null:a}this._zone=i,this.loc=t.loc||Ci.create(),this.invalid=r,this.weekData=null,this.c=s,this.o=n,this.isLuxonDateTime=!0}static now(){return new Ve({})}static local(){const[t,i]=BN(arguments),[r,s,n,o,a,l,u]=i;return VN({year:r,month:s,day:n,hour:o,minute:a,second:l,millisecond:u},t)}static utc(){const[t,i]=BN(arguments),[r,s,n,o,a,l,u]=i;return t.zone=Ts.utcInstance,VN({year:r,month:s,day:n,hour:o,minute:a,second:l,millisecond:u},t)}static fromJSDate(t,i={}){const r=Pde(t)?t.valueOf():NaN;if(Number.isNaN(r))return Ve.invalid("invalid input");const s=Lu(i.zone,hr.defaultZone);return s.isValid?new Ve({ts:r,zone:s,loc:Ci.fromObject(i)}):Ve.invalid(xb(s))}static fromMillis(t,i={}){if(Gh(t))return t<-FN||t>FN?Ve.invalid("Timestamp out of range"):new Ve({ts:t,zone:Lu(i.zone,hr.defaultZone),loc:Ci.fromObject(i)});throw new ao(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,i={}){if(Gh(t))return new Ve({ts:t*1e3,zone:Lu(i.zone,hr.defaultZone),loc:Ci.fromObject(i)});throw new ao("fromSeconds requires a numerical input")}static fromObject(t,i={}){t=t||{};const r=Lu(i.zone,hr.defaultZone);if(!r.isValid)return Ve.invalid(xb(r));const s=hr.now(),n=At(i.specificOffset)?r.offset(s):i.specificOffset,o=RS(t,zN),a=!At(o.ordinal),l=!At(o.year),u=!At(o.month)||!At(o.day),h=l||u,f=o.weekYear||o.weekNumber,y=Ci.fromObject(i);if((h||a)&&f)throw new Jg("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&a)throw new Jg("Can't mix ordinal dates with month/day");const g=f||o.weekday&&!h;let b,w,x=NN(s,n);g?(b=Tpe,w=xpe,x=pA(x)):a?(b=$pe,w=Ipe,x=p$(x)):(b=X7,w=Q7);let T=!1;for(const W of b){const oe=o[W];At(oe)?T?o[W]=w[W]:o[W]=x[W]:T=!0}const M=g?wpe(o):a?Spe(o):Z7(o),F=M||Y7(o);if(F)return Ve.invalid(F);const D=g?LN(o):a?RN(o):o,[R,_]=Jw(D,n,r),q=new Ve({ts:R,zone:r,o:_,loc:y});return o.weekday&&h&&t.weekday!==q.weekday?Ve.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${q.toISO()}`):q}static fromISO(t,i={}){const[r,s]=jhe(t);return Yy(r,s,i,"ISO 8601",t)}static fromRFC2822(t,i={}){const[r,s]=zhe(t);return Yy(r,s,i,"RFC 2822",t)}static fromHTTP(t,i={}){const[r,s]=Vhe(t);return Yy(r,s,i,"HTTP",i)}static fromFormat(t,i,r={}){if(At(t)||At(i))throw new ao("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:n=null}=r,o=Ci.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0}),[a,l,u,h]=bpe(o,t,i);return h?Ve.invalid(h):Yy(a,l,r,`format ${i}`,t,u)}static fromString(t,i,r={}){return Ve.fromFormat(t,i,r)}static fromSQL(t,i={}){const[r,s]=Zhe(t);return Yy(r,s,i,"SQL",t)}static invalid(t,i=null){if(!t)throw new ao("need to specify a reason the DateTime is invalid");const r=t instanceof ra?t:new ra(t,i);if(hr.throwOnInvalid)throw new Cde(r);return new Ve({invalid:r})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?m$(this).weekYear:NaN}get weekNumber(){return this.isValid?m$(this).weekNumber:NaN}get weekday(){return this.isValid?m$(this).weekday:NaN}get ordinal(){return this.isValid?p$(this.c).ordinal:NaN}get monthShort(){return this.isValid?Yg.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Yg.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Yg.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Yg.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return m_(this.year)}get daysInMonth(){return PS(this.year,this.month)}get daysInYear(){return this.isValid?O0(this.year):NaN}get weeksInWeekYear(){return this.isValid?LS(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:i,numberingSystem:r,calendar:s}=Gs.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:s}}toUTC(t=0,i={}){return this.setZone(Ts.instance(t),i)}toLocal(){return this.setZone(hr.defaultZone)}setZone(t,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(t=Lu(t,hr.defaultZone),t.equals(this.zone))return this;if(t.isValid){let s=this.ts;if(i||r){const n=t.offset(this.ts),o=this.toObject();[s]=Jw(o,n,t)}return Zy(this,{ts:s,zone:t})}else return Ve.invalid(xb(t))}reconfigure({locale:t,numberingSystem:i,outputCalendar:r}={}){const s=this.loc.clone({locale:t,numberingSystem:i,outputCalendar:r});return Zy(this,{loc:s})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const i=RS(t,zN),r=!At(i.weekYear)||!At(i.weekNumber)||!At(i.weekday),s=!At(i.ordinal),n=!At(i.year),o=!At(i.month)||!At(i.day),a=n||o,l=i.weekYear||i.weekNumber;if((a||s)&&l)throw new Jg("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&s)throw new Jg("Can't mix ordinal dates with month/day");let u;r?u=LN(k(k({},pA(this.c)),i)):At(i.ordinal)?(u=k(k({},this.toObject()),i),At(i.day)&&(u.day=Math.min(PS(u.year,u.month),u.day))):u=RN(k(k({},p$(this.c)),i));const[h,f]=Jw(u,this.o,this.zone);return Zy(this,{ts:h,o:f})}plus(t){if(!this.isValid)return this;const i=kt.fromDurationLike(t);return Zy(this,DN(this,i))}minus(t){if(!this.isValid)return this;const i=kt.fromDurationLike(t).negate();return Zy(this,DN(this,i))}startOf(t){if(!this.isValid)return this;const i={},r=kt.normalizeUnit(t);switch(r){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(r==="weeks"&&(i.weekday=1),r==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,i={}){return this.isValid?Gs.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,t):f$}toLocaleString(t=aA,i={}){return this.isValid?Gs.create(this.loc.clone(i),t).formatDateTime(this):f$}toLocaleParts(t={}){return this.isValid?Gs.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:s=!0}={}){if(!this.isValid)return null;const n=t==="extended";let o=y$(this,n);return o+="T",o+=jN(this,n,i,r,s),o}toISODate({format:t="extended"}={}){return this.isValid?y$(this,t==="extended"):null}toISOWeekDate(){return Ib(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:s=!1,format:n="extended"}={}){return this.isValid?(s?"T":"")+jN(this,n==="extended",i,t,r):null}toRFC2822(){return Ib(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Ib(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?y$(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let s="HH:mm:ss.SSS";return(i||t)&&(r&&(s+=" "),i?s+="z":t&&(s+="ZZ")),Ib(this,s,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():f$}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const i=k({},this.c);return t.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,i="milliseconds",r={}){if(!this.isValid||!t.isValid)return kt.invalid("created by diffing an invalid DateTime");const s=k({locale:this.locale,numberingSystem:this.numberingSystem},r),n=Lde(i).map(kt.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,u=spe(a,l,n,s);return o?u.negate():u}diffNow(t="milliseconds",i={}){return this.diff(Ve.now(),t,i)}until(t){return this.isValid?$i.fromDateTimes(this,t):this}hasSame(t,i){if(!this.isValid)return!1;const r=t.valueOf(),s=this.setZone(t.zone,{keepLocalTime:!0});return s.startOf(i)<=r&&r<=s.endOf(i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const i=t.base||Ve.fromObject({},{zone:this.zone}),r=t.padding?this<i?-t.padding:t.padding:0;let s=["years","months","days","hours","minutes","seconds"],n=t.unit;return Array.isArray(t.unit)&&(s=t.unit,n=void 0),UN(i,this.plus(r),be(k({},t),{numeric:"always",units:s,unit:n}))}toRelativeCalendar(t={}){return this.isValid?UN(t.base||Ve.fromObject({},{zone:this.zone}),this,be(k({},t),{numeric:"auto",units:["years","months","days"],calendary:!0})):null}static min(...t){if(!t.every(Ve.isDateTime))throw new ao("min requires all arguments be DateTimes");return bN(t,i=>i.valueOf(),Math.min)}static max(...t){if(!t.every(Ve.isDateTime))throw new ao("max requires all arguments be DateTimes");return bN(t,i=>i.valueOf(),Math.max)}static fromFormatExplain(t,i,r={}){const{locale:s=null,numberingSystem:n=null}=r,o=Ci.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return B7(o,t,i)}static fromStringExplain(t,i,r={}){return Ve.fromFormatExplain(t,i,r)}static get DATE_SHORT(){return aA}static get DATE_MED(){return s7}static get DATE_MED_WITH_WEEKDAY(){return Mde}static get DATE_FULL(){return n7}static get DATE_HUGE(){return o7}static get TIME_SIMPLE(){return a7}static get TIME_WITH_SECONDS(){return l7}static get TIME_WITH_SHORT_OFFSET(){return c7}static get TIME_WITH_LONG_OFFSET(){return u7}static get TIME_24_SIMPLE(){return d7}static get TIME_24_WITH_SECONDS(){return h7}static get TIME_24_WITH_SHORT_OFFSET(){return p7}static get TIME_24_WITH_LONG_OFFSET(){return f7}static get DATETIME_SHORT(){return m7}static get DATETIME_SHORT_WITH_SECONDS(){return y7}static get DATETIME_MED(){return g7}static get DATETIME_MED_WITH_SECONDS(){return v7}static get DATETIME_MED_WITH_WEEKDAY(){return Ode}static get DATETIME_FULL(){return _7}static get DATETIME_FULL_WITH_SECONDS(){return b7}static get DATETIME_HUGE(){return w7}static get DATETIME_HUGE_WITH_SECONDS(){return S7}}function Ky(e){if(Ve.isDateTime(e))return e;if(e&&e.valueOf&&Gh(e.valueOf()))return Ve.fromJSDate(e);if(e&&typeof e=="object")return Ve.fromObject(e);throw new ao(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const g$={ar:[".",","],bg:[",","\xA0"],bs:[",","."],ca:[",","."],cs:[",","\xA0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xA0"],fi:[",","\xA0"],fr:[",","\u202F"],"fr-ch":[",","\u202F"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xA0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xA0"],lv:[",","\xA0"],mk:[",","."],nb:[",","\xA0"],nl:[",","."],pl:[",","\xA0"],pt:[",","."],"pt-pt":[",","\xA0"],ro:[",","."],ru:[",","\xA0"],sk:[",","\xA0"],sl:[",","."],sr:[",","."],sv:[",","\xA0"],th:[".",","],tr:[",","."],uk:[",","\xA0"],vi:[",","."],zh:[".",","]};function eB(e){e||(e=mr());let t=e in g$;if(!t){const n=e.split("-");n.length>1&&n[0]in g$&&(e=n[0],t=!0),t||(e="en")}const[i,r,s="#,##0.###"]=g$[e];return{decimal:i,group:r,pattern:s}}function Cpe(e,t){const i=eB((t=k({},t)).locale);t.customs=i;const r=t.pattern||i.pattern;return isNaN(e)||Math.abs(e)===1/0?null:Epe(e,r,t)}const tB=/[#0,]*[#0](?:\.0*#*)?/;function Epe(e,t,i){const r=(i=i||{}).customs.group,s=i.customs.decimal,n=t.split(";"),o=n[0];if((t=n[e<0?1:0]||"-"+o).indexOf("%")!==-1)e*=100;else if(t.indexOf("\u2030")!==-1)e*=1e3;else{if(t.indexOf("\xA4")!==-1)throw new Error("currency notation not supported");if(t.indexOf("E")!==-1)throw new Error("exponential notation not supported")}const a=tB,l=o.match(a);if(!l)throw new Error("unable to find a number expression in pattern: "+t);return i.fractional===!1&&(i.places=0),t.replace(a,Ape(e,l[0],{decimal:s,group:r,places:i.places,round:i.round}))}function Ape(e,t,i){(i=i||{}).places===!0&&(i.places=0),i.places===1/0&&(i.places=6);const r=t.split("."),s=typeof i.places=="string"&&i.places.indexOf(",");let n=i.places;s?n=i.places.substring(s+1):n>=0||(n=(r[1]||[]).length),i.round<0||(e=Number(e.toFixed(Number(n))));const o=String(Math.abs(e)).split("."),a=o[1]||"";if(r[1]||i.places){s&&(i.places=i.places.substring(0,s));const b=i.places!==void 0?i.places:r[1]&&r[1].lastIndexOf("0")+1;b>a.length&&(o[1]=a.padEnd(Number(b),"0")),n<a.length&&(o[1]=a.substr(0,Number(n)))}else o[1]&&o.pop();const l=r[0].replace(",","");let u=l.indexOf("0");u!==-1&&(u=l.length-u,u>o[0].length&&(o[0]=o[0].padStart(u,"0")),l.indexOf("#")===-1&&(o[0]=o[0].substr(o[0].length-u)));let h,f,y=r[0].lastIndexOf(",");if(y!==-1){h=r[0].length-y-1;const b=r[0].substr(0,y);y=b.lastIndexOf(","),y!==-1&&(f=b.length-y-1)}const g=[];for(let b=o[0];b;){const w=b.length-h;g.push(w>0?b.substr(w):b),b=w>0?b.slice(0,w):"",f&&(h=f,f=void 0)}return o[0]=g.reverse().join(i.group||","),o.join(i.decimal||".")}function Mpe(e){const t=eB((e=e||{}).locale),i=e.pattern||t.pattern,r=t.group,s=t.decimal;let n=1;if(i.indexOf("%")!==-1)n/=100;else if(i.indexOf("\u2030")!==-1)n/=1e3;else if(i.indexOf("\xA4")!==-1)throw new Error("currency notation not supported");const o=i.split(";");return o.length===1&&o.push("-"+o[0]),{regexp:bv(o,function(l){return(l="(?:"+kO(l,".")+")").replace(tB,function(u){const h={signed:!1,separator:e.strict?r:[r,""],fractional:e.fractional,decimal:s,exponent:!1},f=u.split(".");let y=e.places;f.length===1&&n!==1&&(f[1]="###"),f.length===1||y===0?h.fractional=!1:(y===void 0&&(y=e.pattern?f[1].lastIndexOf("0")+1:1/0),y&&e.fractional==null&&(h.fractional=!0),!e.places&&y<f[1].length&&(y+=","+f[1].length),h.places=y);const g=f[0].split(",");return g.length>1&&(h.groupSize=g.pop().length,g.length>1&&(h.groupSize2=g.pop().length)),"("+kpe(h)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:r,decimal:s,factor:n}}function Ope(e,t){const i=Mpe(t),r=new RegExp("^"+i.regexp+"$").exec(e);if(!r)return NaN;let s=r[1];if(!r[1]){if(!r[2])return NaN;s=r[2],i.factor*=-1}return s=s.replace(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),Number(s)*i.factor}function kpe(e){"places"in(e=e||{})||(e.places=1/0),typeof e.decimal!="string"&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=qN(e),i=bv(e.fractional,function(s){let n="";return s&&e.places!==0&&(n="\\"+e.decimal,e.places===1/0?n="(?:"+n+"\\d+)?":n+="\\d{"+e.places+"}"),n},!0);let r=t+i;return i&&(r="(?:(?:"+r+")|(?:"+i+"))"),r+bv(e.exponent,function(s){return s?"([eE]"+qN({signed:e.eSigned})+")":""})}function qN(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",bv(e.signed,function(t){return t?"[-+]":""},!0)+bv(e.separator,function(t){if(!t)return"(?:\\d+)";(t=kO(t))===" "?t="\\s":t==="\xA0"&&(t="\\s\\xa0");const i=e.groupSize,r=e.groupSize2;if(r){const s="(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*["+t+"]\\d{"+i+"})";return i-r>0?"(?:"+s+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":s}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*)"},!0)}const bv=function(e,t,i){if(!(e instanceof Array))return t(e);const r=[];for(let s=0;s<e.length;s++)r.push(t(e[s]));return Ppe(r.join("|"),i)},Ppe=function(e,t){return"("+(t?"?:":"")+e+")"};var GN,HN;function Oke(e){return hI.fromJSON(e.toJSON())}function Lpe(e){return e.toJSON?e.toJSON():e}function kke(e){return typeof e=="string"||e instanceof String}function Pke(e){return typeof e=="number"}function WN(e){return e instanceof Date}function Lke(e,t){return e===t||!(!WN(e)||!WN(t))&&e.getTime()===t.getTime()}function Rke(e){if(e===void 0)return null;if(typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109413;case"kilometers":case"kilometer":case"km":return 109414}return null}function Fke(e){if(e===null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new Et({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function Nke(e){if(e===void 0)return null;if(typeof e=="number"||typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9035;case"kilometers":case"kilometer":case"km":return 9036}return null}(function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"})(GN||(GN={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(HN||(HN={}));const Dke=1e3,jke={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},JN={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},zke={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function Vke(e,t){return FO((i,r)=>{const s=Gf(!0);e.reduce((n,o,a,l)=>n.then(u=>{try{return t(u,o,a,l)}catch(h){return BR(h)}},u=>BR(u)),s).then(i,r)})}function Uke(e){return e===void 0?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function Bke(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,r=t.cmp&&(s=t.cmp,function(o){return function(a,l){const u={key:a,value:o[a]},h={key:l,value:o[l]};return s(u,h)}});var s;const n=[];return function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a===void 0)return;if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);let l,u;if(Array.isArray(a)){for(u="[",l=0;l<a.length;l++)l&&(u+=","),u+=o(a[l])||"null";return u+"]"}if(a===null)return"null";if(n.indexOf(a)!==-1){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const h=n.push(a)-1,f=Object.keys(a).sort(r&&r(a));for(u="",l=0;l<f.length;l++){const y=f[l],g=o(a[y]);g&&(u&&(u+=","),u+=JSON.stringify(y)+":"+g)}return n.splice(h,1),"{"+u+"}"}(e)}class iB{constructor(t){this.value=t}}class rB{constructor(t){this.value=t}}class IP{constructor(t){this.fn=t}}class TP{constructor(t,i){this.paramCount=i,this.fn=t}}const Rpe=IP,Fpe=rB,Npe=iB,Dpe=TP,Cn={type:"VOID"},jpe={type:"BREAK"},zpe={type:"CONTINUE"};function wv(e,t,i){return t===""||t==null||t===i||t===i?e:e=e.split(t).join(i)}function $P(e){return e instanceof IP||e instanceof $de||e instanceof TP}function NS(e){return!!jr(e)||!!bs(e)||!!ts(e)||!!_s(e)||e===null||e===Cn||typeof e=="number"}function Vpe(e,t){return e===void 0?t:e}function jr(e){return typeof e=="string"||e instanceof String}function _s(e){return typeof e=="boolean"}function bs(e){return typeof e=="number"}function Upe(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function yo(e){return e instanceof Array}function Bpe(e){return(e==null?void 0:e.arcadeDeclaredClass)==="esri.arcade.Feature"}function qpe(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureset.support.FeatureSet")===!0}function Gpe(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureSetCollection")===!0}function up(e){return e instanceof dl}function ts(e){return e instanceof Date}function Hpe(e,t,i){if(e.length<t||e.length>i)throw new Error("Function called with wrong number of Parameters")}function Wpe(e){return e<0?-Math.round(-e):Math.round(e)}function Jpe(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(t==="x"?i:3&i|8).toString(16)})}function CP(e,t){return isNaN(e)===!1?t==null||t===""?e.toString():(t=wv(t,"\u2030",""),t=wv(t,"\xA4",""),Cpe(e,{pattern:t})):e.toString()}function _I(e,t){const i=Ve.fromJSDate(e);return t==null||t===""?i.toISO({suppressMilliseconds:!0}):i.toFormat(sB(t),{locale:mr(),numberingSystem:"latn"})}function sB(e){e=e.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let t="";const i=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of e.match(i))switch(r){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"Z":t+="ZZ";break;case"ZZ":t+="ZZZ";break;case"S":t+="'S'";break;case"SS":t+="'SS'";break;case"SSS":t+="u";break;case"A":case"a":t+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":t+=r;break;default:r.length>=2&&r.slice(0,1)==="["&&r.slice(-1)==="]"?t+=`'${r.slice(1,-1)}'`:t+=`'${r}'`}return t}function Vt(e,t,i){switch(i){case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}return!1}function Zpe(e,t,i){if(e===null){if(t===null||t===Cn)return Vt(null,null,i);if(bs(t))return Vt(0,t,i);if(jr(t)||_s(t))return Vt(0,Ti(t),i);if(ts(t))return Vt(0,t.getTime(),i)}if(e===Cn){if(t===null||t===Cn)return Vt(null,null,i);if(bs(t))return Vt(0,t,i);if(jr(t)||_s(t))return Vt(0,Ti(t),i);if(ts(t))return Vt(0,t.getTime(),i)}else if(bs(e)){if(bs(t))return Vt(e,t,i);if(_s(t))return Vt(e,Ti(t),i);if(t===null||t===Cn)return Vt(e,0,i);if(jr(t))return Vt(e,Ti(t),i);if(ts(t))return Vt(e,t.getTime(),i)}else if(jr(e)){if(jr(t))return Vt(Wu(e),Wu(t),i);if(ts(t))return Vt(Ti(e),t.getTime(),i);if(bs(t))return Vt(Ti(e),t,i);if(t===null||t===Cn)return Vt(Ti(e),0,i);if(_s(t))return Vt(Ti(e),Ti(t),i)}else if(ts(e)){if(ts(t))return Vt(e,t,i);if(t===null||t===Cn)return Vt(e.getTime(),0,i);if(bs(t))return Vt(e.getTime(),t,i);if(_s(t)||jr(t))return Vt(e.getTime(),Ti(t),i)}else if(_s(e)){if(_s(t))return Vt(e,t,i);if(bs(t))return Vt(Ti(e),Ti(t),i);if(ts(t))return Vt(Ti(e),t.getTime(),i);if(t===null||t===Cn)return Vt(Ti(e),0,i);if(jr(t))return Vt(Ti(e),Ti(t),i)}return!!nB(e,t)&&(i==="<="||i===">=")}function nB(e,t){if(e===t||e===null&&t===Cn||t===null&&e===Cn)return!0;if(ts(e)&&ts(t))return e.getTime()===t.getTime();if(e instanceof mP||e instanceof wp)return e.equalityTest(t);if(e instanceof Le&&t instanceof Le){const i=e.cache._arcadeCacheId,r=t.cache._arcadeCacheId;if(i!=null)return i===r}return e!==void 0&&t!==void 0&&e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"&&(e._arcadeCacheId===t._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===t._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null)}function Wu(e,t){if(jr(e))return e;if(e===null)return"";if(bs(e))return CP(e,t);if(_s(e))return e.toString();if(ts(e))return _I(e,t);if(e instanceof Ys)return JSON.stringify(e.toJSON());if(yo(e)){const i=[];for(let r=0;r<e.length;r++)i[r]=DS(e[r]);return"["+i.join(",")+"]"}if(e instanceof dl){const i=[];for(let r=0;r<e.length();r++)i[r]=DS(e.get(r));return"["+i.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():$P(e)?"object, Function":""}function Ype(e){const t=[];if(yo(e)===!1)return null;if(e instanceof dl){for(let i=0;i<e.length();i++)t[i]=Ti(e.get(i));return t}for(let i=0;i<e.length;i++)t[i]=Ti(e[i]);return t}function Zw(e,t){if(jr(e))return e;if(e===null)return"";if(bs(e))return CP(e,t);if(_s(e))return e.toString();if(ts(e))return _I(e,t);if(e instanceof Ys)return e instanceof Et?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+fA(e.spatialReference)+"}":fA(e.toJSON(),(i,r)=>i.key===r.key?0:i.key==="spatialReference"?1:r.key==="spatialReference"||i.key<r.key?-1:i.key>r.key?1:0);if(yo(e)){const i=[];for(let r=0;r<e.length;r++)i[r]=DS(e[r]);return"["+i.join(",")+"]"}if(e instanceof dl){const i=[];for(let r=0;r<e.length();r++)i[r]=DS(e.get(r));return"["+i.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():$P(e)?"object, Function":""}function DS(e){if(e===null)return"null";if(_s(e)||bs(e)||jr(e))return JSON.stringify(e);if(e instanceof Ys||e instanceof dl||e instanceof Array)return Zw(e);if(e instanceof Date)return JSON.stringify(_I(e,""));if(e!==null&&typeof e=="object"){if(e.castToText!==void 0)return e.castToText()}else if(e===Cn)return"null";return"null"}function Ti(e,t){return bs(e)?e:e===null||e===""?0:ts(e)?NaN:_s(e)?e?1:0:yo(e)||e===""||e===void 0?NaN:t!==void 0&&jr(e)?(t=wv(t,"\u2030",""),t=wv(t,"\xA4",""),Ope(e,{pattern:t})):e===Cn?0:Number(e)}function Kpe(e){if(ts(e))return e;if(jr(e)){const t=oB(e);if(t)return t.toJSDate()}return null}function Qpe(e){return ts(e)?Ve.fromJSDate(e):jr(e)?oB(e):null}function oB(e){const t=/ (\d\d)/;let i=Ve.fromISO(e);return i.isValid||t.test(e)&&(e=e.replace(t,"T$1"),i=Ve.fromISO(e),i.isValid)?i:null}function Xpe(e){return _s(e)?e:jr(e)?(e=e.toLowerCase())==="true":!!bs(e)&&e!==0&&!isNaN(e)}function efe(e,t){return Q(e)?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=t),e)}function tfe(e){if(e===null)return null;if(e instanceof Le)return e.x==="NaN"||e.x===null||isNaN(e.x)?null:e;if(e instanceof Rn){if(e.rings.length===0)return null;for(const t of e.rings)if(t.length>0)return e;return null}if(e instanceof xs){if(e.paths.length===0)return null;for(const t of e.paths)if(t.length>0)return e;return null}return e instanceof ny?e.points.length===0?null:e:e instanceof Et?e.xmin==="NaN"||e.xmin===null||isNaN(e.xmin)?null:e:null}function aB(e,t){if(!e||!e.domain)return t;let i=null;if(e.field.type==="string"||e.field.type==="esriFieldTypeString")t=Wu(t);else{if(t==null)return null;if(t==="")return t;t=Ti(t)}for(let r=0;r<e.domain.codedValues.length;r++){const s=e.domain.codedValues[r];s.code===t&&(i=s)}return i===null?t:i.name}function lB(e,t){if(!e||!e.domain)return t;let i=null;t=Wu(t);for(let r=0;r<e.domain.codedValues.length;r++){const s=e.domain.codedValues[r];s.name===t&&(i=s)}return i===null?t:i.code}function bI(e,t,i=null,r=null){if(!t||!t.fields)return null;let s,n,o=null;for(let a=0;a<t.fields.length;a++){const l=t.fields[a];l.name.toLowerCase()===e.toString().toLowerCase()&&(o=l)}if(o===null)throw new Error("Field not found");return r===null&&i&&t.typeIdField&&(r=i.hasField(t.typeIdField)?i.field(t.typeIdField):null),r!=null&&t.types.some(function(a){return a.id===r&&(s=a.domains&&a.domains[o.name],s&&s.type==="inherited"&&(s=ZN(o.name,t),n=!0),!0)}),n||s||(s=ZN(e,t)),{field:o,domain:s}}function ZN(e,t){let i;return t.fields.some(function(r){return r.name.toLowerCase()===e.toLowerCase()&&(i=r.domain),!!i}),i}function fA(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,r=t.cmp&&(s=t.cmp,function(o){return function(a,l){const u={key:a,value:o[a]},h={key:l,value:o[l]};return s(u,h)}});var s;const n=[];return function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a===void 0)return;if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);let l,u;if(Array.isArray(a)){for(u="[",l=0;l<a.length;l++)l&&(u+=","),u+=o(a[l])||"null";return u+"]"}if(a===null)return"null";if(n.indexOf(a)!==-1){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const h=n.push(a)-1,f=Object.keys(a).sort(r&&r(a));for(u="",l=0;l<f.length;l++){const y=f[l],g=o(a[y]);g&&(u&&(u+=","),u+=JSON.stringify(y)+":"+g)}return n.splice(h,1),"{"+u+"}"}(e)}function ife(e){if(e===null)return null;const t=[];for(const i of e)i&&i.arcadeDeclaredClass&&i.arcadeDeclaredClass==="esri.arcade.Feature"?t.push(i.geometry()):t.push(i);return t}function Vm(e,t){if(!(t instanceof Le))throw new Error("Invalid Argument");e.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}function rfe(e,t){if(yo(e)||up(e)){let i=!1,r=!1,s=[],n=t;if(yo(e)){for(const o of e)Vm(s,o);s.length>0&&(n=e[0].spatialReference,i=e[0].hasZ,r=e[0].hasM)}else if(e instanceof wp)s=e._elements,s.length>0&&(i=e._hasZ,r=e._hasM,n=e.get(0).spatialReference);else{if(!up(e))throw new Error("Invalid Argument");for(const o of e.toArray())Vm(s,o);s.length>0&&(n=e.get(0).spatialReference,i=e.get(0).hasZ===!0,r=e.get(0).hasM===!0)}return s.length===0?null:(ck(s,r,i)===!1&&(s=s.slice(0).reverse()),new Rn({rings:[s],spatialReference:n,hasZ:i,hasM:r}))}return e}function sfe(e,t){if(yo(e)||up(e)){let i=!1,r=!1,s=[],n=t;if(yo(e)){for(const o of e)Vm(s,o);s.length>0&&(n=e[0].spatialReference,i=e[0].hasZ===!0,r=e[0].hasM===!0)}else if(e instanceof wp)s=e._elements,s.length>0&&(i=e._hasZ,r=e._hasM,n=e.get(0).spatialReference);else if(up(e)){for(const o of e.toArray())Vm(s,o);s.length>0&&(n=e.get(0).spatialReference,i=e.get(0).hasZ===!0,r=e.get(0).hasM===!0)}return s.length===0?null:new xs({paths:[s],spatialReference:n,hasZ:i,hasM:r})}return e}function nfe(e,t){if(yo(e)||up(e)){let i=!1,r=!1,s=[],n=t;if(yo(e)){for(const o of e)Vm(s,o);s.length>0&&(n=e[0].spatialReference,i=e[0].hasZ===!0,r=e[0].hasM===!0)}else if(e instanceof wp)s=e._elements,s.length>0&&(i=e._hasZ,r=e._hasM,n=e.get(0).spatialReference);else if(up(e)){for(const o of e.toArray())Vm(s,o);s.length>0&&(n=e.get(0).spatialReference,i=e.get(0).hasZ===!0,r=e.get(0).hasM===!0)}return s.length===0?null:new ny({points:s,spatialReference:n,hasZ:i,hasM:r})}return e}function ofe(e,t=!1){const i=[];if(e===null)return i;if(yo(e)===!0){for(let r=0;r<e.length;r++){const s=Wu(e[r]);s===""&&t!==!0||i.push(s)}return i}if(e instanceof dl){for(let r=0;r<e.length();r++){const s=Wu(e.get(r));s===""&&t!==!0||i.push(s)}return i}if(NS(e)){const r=Wu(e);return r===""&&t!==!0||i.push(r),i}return[]}let v$=0;function afe(e){return v$++,v$%100==0?(v$=0,FO(t=>{setTimeout(()=>{t(e)},0)})):e}function lfe(e,t,i){switch(i){case"&":return e&t;case"|":return e|t;case"^":return e^t;case"<<":return e<<t;case">>":return e>>t;case">>>":return e>>>t}}function Sv(e,t=null){return e==null?null:_s(e)||bs(e)||jr(e)?e:e instanceof Ys?(t==null?void 0:t.keepGeometryType)===!0?e:e.toJSON():e instanceof dl?e.toArray().map(i=>Sv(i,t)):e instanceof Array?e.map(i=>Sv(i,t)):e instanceof Date?e:e!==null&&typeof e=="object"&&e.castAsJson!==void 0?e.castAsJson(t):null}function cfe(e,t,i,r,s){return EP(e,t,i).then(n=>{s[r]=n})}function EP(e,t=null,i=null){if(e instanceof dl&&(e=e.toArray()),e==null)return Gf(null);if(NS(e)||e instanceof Ys||e instanceof Date)return Gf(Sv(e,i));if(e instanceof Array){const r=[],s=[];for(const n of e)n===null||NS(n)||n instanceof Ys||n instanceof Date?s.push(Sv(n,i)):(s.push(null),r.push(cfe(n,t,i,s.length-1,s)));return r.length>0?Az(r).then(()=>s):Gf(s)}return e!==null&&typeof e=="object"&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(t,i):Gf(null)}function ufe(e,t,i){const r=e.fullSchema();return r===null||!r.fields?null:bI(t,r,e,i)}function dfe(e){const t=e.fullSchema();return t===null?null:t.fields&&t.typeIdField?{subtypeField:t.typeIdField,subtypes:t.types?t.types.map(i=>({name:i.name,code:i.id})):[]}:null}function hfe(e,t,i,r){const s=e.fullSchema();if(s===null||!s.fields)return null;const n=bI(t,s,e,r);if(i===void 0)try{i=e.field(t)}catch{return null}return aB(n,i)}function pfe(e,t,i,r){const s=e.fullSchema();if(s===null||!s.fields)return null;if(i===void 0){try{i=e.field(t)}catch{return null}return i}return lB(bI(t,s,e,r),i)}function ffe(e){const t=e.fullSchema();if(t===null||!t.fields)return null;const i=[];for(const r of t.fields)i.push(Lpe(r));return{objectIdField:t.objectIdField,globalIdField:t.globalIdField,geometryType:JN[t.geometryType]===void 0?"":JN[t.geometryType],fields:i}}const qke=Object.freeze({__proto__:null,ReturnResultE:iB,ImplicitResultE:rB,NativeFunctionE:IP,SizzleFunctionE:TP,NativeFunction:Rpe,ImplicitResult:Fpe,ReturnResult:Npe,SizzleFunction:Dpe,voidOperation:Cn,breakResult:jpe,continueResult:zpe,multiReplace:wv,isFunctionParameter:$P,isSimpleType:NS,defaultUndefined:Vpe,isString:jr,isBoolean:_s,isNumber:bs,isInteger:Upe,isArray:yo,isFeature:Bpe,isFeatureSet:qpe,isFeatureSetCollection:Gpe,isImmutableArray:up,isDate:ts,pcCheck:Hpe,absRound:Wpe,generateUUID:Jpe,formatNumber:CP,formatDate:_I,standardiseDateFormat:sB,greaterThanLessThan:Zpe,equalityTest:nB,toString:Wu,toNumberArray:Ype,toStringExplicit:Zw,toNumber:Ti,toDate:Kpe,toDateTime:Qpe,toBoolean:Xpe,fixSpatialReference:efe,fixNullGeometry:tfe,getDomainValue:aB,getDomainCode:lB,getDomain:bI,stableStringify:fA,autoCastFeatureToGeometry:ife,autoCastArrayOfPointsToPolygon:rfe,autoCastArrayOfPointsToPolyline:sfe,autoCastArrayOfPointsToMultiPoint:nfe,toStringArray:ofe,tick:afe,binaryOperator:lfe,castAsJson:Sv,castAsJsonAsync:EP,featureFullDomain:ufe,featureSubtypes:dfe,featureDomainValueLookup:hfe,featureDomainCodeLookup:pfe,featureSchema:ffe});var mA;let Kg=mA=class extends ue{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new mA({minValue:this.minValue,maxValue:this.maxValue})}};c([d({type:Number,json:{write:!0}})],Kg.prototype,"minValue",void 0),c([d({type:Number,json:{write:!0}})],Kg.prototype,"maxValue",void 0),Kg=mA=c([O("esri.renderer.support.AuthoringInfoClassBreakInfo")],Kg);const mfe=Kg;var yA;let Jd=yA=class extends ue{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new yA({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:K(this.classBreakInfos)})}};c([d({type:String,json:{write:!0}})],Jd.prototype,"field",void 0),c([d({type:String,json:{write:!0}})],Jd.prototype,"normalizationField",void 0),c([d({type:String,json:{write:!0}})],Jd.prototype,"label",void 0),c([d({type:[mfe],json:{write:!0}})],Jd.prototype,"classBreakInfos",void 0),Jd=yA=c([O("esri.renderers.support.AuthoringInfoFieldInfo")],Jd);const YN=Jd;var gA;const Tb=new rt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),$b=new rt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),KN={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},QN=["high-to-low","above-and-below","centered-on","extremes"],XN=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],eD=["seconds","minutes","hours","days","months","years"];let Ds=gA=class extends ue{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new gA({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};c([d({types:KN,json:{write:!0}})],Ds.prototype,"endTime",void 0),c([gt("endTime")],Ds.prototype,"castEndTime",null),c([d({type:String,json:{write:!0}})],Ds.prototype,"field",void 0),c([d({type:Number,json:{write:!0}})],Ds.prototype,"maxSliderValue",void 0),c([d({type:Number,json:{write:!0}})],Ds.prototype,"minSliderValue",void 0),c([d({types:KN,json:{write:!0}})],Ds.prototype,"startTime",void 0),c([gt("startTime")],Ds.prototype,"castStartTime",null),c([d({type:Tb.apiValues,value:null,json:{type:Tb.jsonValues,read:Tb.read,write:Tb.write}})],Ds.prototype,"style",null),c([d({type:XN,value:null,json:{type:XN,origins:{"web-scene":{type:QN,write:{writer:(e,t)=>{QN.indexOf(e)>-1&&(t.theme=e)}}}},write:!0}})],Ds.prototype,"theme",null),c([d({type:$b.apiValues,json:{type:$b.jsonValues,read:$b.read,write:$b.write}})],Ds.prototype,"type",void 0),c([d({type:eD,json:{type:eD,write:!0}})],Ds.prototype,"units",void 0),Ds=gA=c([O("esri.renderers.support.AuthoringInfoVisualVariable")],Ds);const yfe=Ds;let Yw=class extends ue{constructor(e){super(e),this.type=null}};c([d({readOnly:!0,json:{read:!1,write:!0}})],Yw.prototype,"type",void 0),Yw=c([O("esri.rest.support.ColorRamp")],Yw);const AP=Yw;var vA;let Zd=vA=class extends AP{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new vA({fromColor:K(this.fromColor),toColor:K(this.toColor),algorithm:this.algorithm})}};c([Ue({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Zd.prototype,"algorithm",void 0),c([d({type:Oe,json:{type:[si],write:!0}})],Zd.prototype,"fromColor",void 0),c([d({type:Oe,json:{type:[si],write:!0}})],Zd.prototype,"toColor",void 0),c([d({type:["algorithmic"]})],Zd.prototype,"type",void 0),Zd=vA=c([O("esri.rest.support.AlgorithmicColorRamp")],Zd);const MP=Zd;var _A;let Qg=_A=class extends AP{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new _A({colorRamps:K(this.colorRamps)})}};c([d({type:[MP],json:{write:!0}})],Qg.prototype,"colorRamps",void 0),c([d({type:["multipart"]})],Qg.prototype,"type",void 0),Qg=_A=c([O("esri.rest.support.MultipartColorRamp")],Qg);const cB=Qg,gfe={key:"type",base:AP,typeMap:{algorithmic:MP,multipart:cB}};function vfe(e){return e&&e.type?e.type==="algorithmic"?MP.fromJSON(e):e.type==="multipart"?cB.fromJSON(e):null:null}var bA;const Sd=new rt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),Cb=new rt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),tD=new rt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),iD=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],_fe=["high-to-low","above-and-below","above","below","90-10"],bfe=["flow-line","wave-front"],wfe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Vi=bA=class extends ue{constructor(e){super(e),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){if(e)return vfe(e)}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new bA({classificationMethod:this.classificationMethod,colorRamp:K(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:K(this.field1),field2:K(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};c([d({type:Sd.apiValues,value:null,json:{type:Sd.jsonValues,read:Sd.read,write:Sd.write,origins:{"web-document":{default:"manual",type:Sd.jsonValues,read:Sd.read,write:Sd.write}}}})],Vi.prototype,"classificationMethod",null),c([d({types:gfe,json:{write:!0}})],Vi.prototype,"colorRamp",void 0),c([xe("colorRamp")],Vi.prototype,"readColorRamp",null),c([d({type:[String],value:null,json:{write:!0}})],Vi.prototype,"fields",null),c([d({type:YN,value:null,json:{write:!0}})],Vi.prototype,"field1",null),c([d({type:YN,value:null,json:{write:!0}})],Vi.prototype,"field2",null),c([d({type:bfe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Vi.prototype,"flowTheme",null),c([d({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Vi.prototype,"focus",null),c([d({type:Number,value:null,json:{type:si,write:!0}})],Vi.prototype,"numClasses",null),c([d({type:iD,json:{type:iD,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Vi.prototype,"lengthUnit",void 0),c([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Vi.prototype,"maxSliderValue",void 0),c([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Vi.prototype,"minSliderValue",void 0),c([d({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Vi.prototype,"statistics",null),c([d({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Vi.prototype,"standardDeviationInterval",null),c([d({type:Cb.apiValues,value:null,json:{type:Cb.jsonValues,read:Cb.read,write:Cb.write,origins:{"web-scene":{type:tD.jsonValues,write:{writer:tD.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],Vi.prototype,"type",null),c([d({type:[yfe],json:{write:!0}})],Vi.prototype,"visualVariables",void 0),c([d({type:wfe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Vi.prototype,"univariateSymbolStyle",null),c([d({type:_fe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Vi.prototype,"univariateTheme",null),Vi=bA=c([O("esri.renderers.support.AuthoringInfo")],Vi);const Sfe=Vi,_$=new rt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0});let Xg=class extends ue{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};c([d({type:Sfe,json:{write:!0}})],Xg.prototype,"authoringInfo",void 0),c([d({type:_$.apiValues,readOnly:!0,json:{type:_$.jsonValues,read:!1,write:{writer:_$.write,ignoreOrigin:!0}}})],Xg.prototype,"type",void 0),Xg=c([O("esri.renderers.Renderer")],Xg);const ad=Xg;var wA;let Kw=wA=class extends ue{constructor(){super(...arguments),this.title=null}clone(){return new wA({title:this.title})}};c([d({type:String,json:{write:!0}})],Kw.prototype,"title",void 0),Kw=wA=c([O("esri.renderers.support.LegendOptions")],Kw);const OP=Kw;var SA;let Qw=SA=class extends OP{constructor(){super(...arguments),this.showLegend=null}clone(){return new SA({title:this.title,showLegend:this.showLegend})}};c([d({type:Boolean,json:{write:!0}})],Qw.prototype,"showLegend",void 0),Qw=SA=c([O("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],Qw);const uB=Qw,xfe=fe.getLogger("esri.renderers.visualVariables.VisualVariable"),b$=new rt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Bo=class extends ue{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(xfe.error(".field: field must be a string value"),null):Yv(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};c([d()],Bo.prototype,"index",void 0),c([d({type:b$.apiValues,readOnly:!0,json:{read:b$.read,write:b$.write}})],Bo.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Bo.prototype,"field",void 0),c([gt("field")],Bo.prototype,"castField",null),c([d({type:String,json:{write:!0}})],Bo.prototype,"valueExpression",void 0),c([d({type:String,json:{write:!0}})],Bo.prototype,"valueExpressionTitle",void 0),c([d({readOnly:!0})],Bo.prototype,"arcadeRequired",null),c([d({type:uB,json:{write:!0}})],Bo.prototype,"legendOptions",void 0),Bo=c([O("esri.renderers.visualVariables.VisualVariable")],Bo);const g_=Bo;var xA;let Yd=xA=class extends ue{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e==null?0:e}clone(){return new xA({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};c([d({type:Oe,json:{type:[si],write:!0}})],Yd.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],Yd.prototype,"label",void 0),c([d({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Yd.prototype,"value",void 0),c([$e("value")],Yd.prototype,"writeValue",null),Yd=xA=c([O("esri.renderers.visualVariables.support.ColorStop")],Yd);const Ife=Yd;var IA;let Kd=IA=class extends g_{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new IA({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};c([d({readOnly:!0})],Kd.prototype,"cache",null),c([d({type:["color"],json:{type:["colorInfo"]}})],Kd.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Kd.prototype,"normalizationField",void 0),c([d({type:[Ife],json:{write:!0}})],Kd.prototype,"stops",null),Kd=IA=c([O("esri.renderers.visualVariables.ColorVariable")],Kd);const dB=Kd;var TA;let tu=TA=class extends ue{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return tv(t.transparency)}writeOpacity(e,t,i){t[i]=ak(e)}clone(){return new TA({label:this.label,opacity:this.opacity,value:this.value})}};c([d({type:String,json:{write:!0}})],tu.prototype,"label",void 0),c([d({type:Number,json:{type:si,write:{target:"transparency"}}})],tu.prototype,"opacity",void 0),c([xe("opacity",["transparency"])],tu.prototype,"readOpacity",null),c([$e("opacity")],tu.prototype,"writeOpacity",null),c([d({type:Number,json:{write:!0}})],tu.prototype,"value",void 0),tu=TA=c([O("esri.renderers.visualVariables.support.OpacityStop")],tu);const Tfe=tu;var $A;let Qd=$A=class extends g_{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new $A({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};c([d({readOnly:!0})],Qd.prototype,"cache",null),c([d({type:["opacity"],json:{type:["transparencyInfo"]}})],Qd.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Qd.prototype,"normalizationField",void 0),c([d({type:[Tfe],json:{write:!0}})],Qd.prototype,"stops",null),Qd=$A=c([O("esri.renderers.visualVariables.OpacityVariable")],Qd);const hB=Qd;var CA;let Rl=CA=class extends g_{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,i,r){if(r&&r.messages){const s=`visualVariables[${this.index}]`;r.messages.push(new B("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpressionTitle",context:r}))}}clone(){return new CA({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};c([d({readOnly:!0})],Rl.prototype,"cache",null),c([d({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Rl.prototype,"axis",void 0),c([d({type:["rotation"],json:{type:["rotationInfo"]}})],Rl.prototype,"type",void 0),c([d({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Rl.prototype,"rotationType",void 0),c([d({type:String,json:{write:!0}})],Rl.prototype,"valueExpressionTitle",void 0),c([$e("web-scene","valueExpressionTitle")],Rl.prototype,"writeValueExpressionTitleWebScene",null),Rl=CA=c([O("esri.renderers.visualVariables.RotationVariable")],Rl);const pB=Rl;var EA;let bf=EA=class extends ue{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new EA({label:this.label,size:this.size,value:this.value})}};c([d({type:String,json:{write:!0}})],bf.prototype,"label",void 0),c([d({type:Number,cast:Nt,json:{write:!0}})],bf.prototype,"size",void 0),c([d({type:Number,json:{write:!0}})],bf.prototype,"value",void 0),bf=EA=c([O("esri.renderers.visualVariables.support.SizeStop")],bf);const $fe=bf;var AA;let Xw=AA=class extends uB{constructor(){super(...arguments),this.customValues=null}clone(){return new AA({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};c([d({type:[Number],json:{write:!0}})],Xw.prototype,"customValues",void 0),Xw=AA=c([O("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],Xw);const fB=Xw;var oc,fr;function em(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function xv(e){return e!=null&&!isNaN(e)&&isFinite(e)}function mB(e){return e.valueExpression?oc.Expression:e.field&&typeof e.field=="string"?oc.Field:oc.Unknown}function Cfe(e,t){const i=t||mB(e),r=e.valueUnit||"unknown";return i===oc.Unknown?fr.Constant:e.stops?fr.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?fr.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?fr.Proportional:fr.Additive:fr.Identity:fr.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(oc||(oc={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(fr||(fr={}));const yB={inches:Qn(1,"meters","inches"),feet:Qn(1,"meters","feet"),"us-feet":Qn(1,"meters","us-feet"),yards:Qn(1,"meters","yards"),miles:Qn(1,"meters","miles"),"nautical-miles":Qn(1,"meters","nautical-miles"),millimeters:Qn(1,"meters","millimeters"),centimeters:Qn(1,"meters","centimeters"),decimeters:Qn(1,"meters","decimeters"),meters:Qn(1,"meters","meters"),kilometers:Qn(1,"meters","kilometers"),"decimal-degrees":1/Sse(1,"meters",li.radius)},td=fe.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),rD=new xr,e1=Math.PI,gB=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function vB(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(b=>b.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void td.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const s=typeof t=="number",n=s?null:t,o=n&&n.attributes;let a=s?t:null;const l=r.field,{ipData:u,hasExpression:h}=r.cache;let f=r.cache.compiledFunc;if(!l&&!h){const b=r.stops;return b&&b[0]&&b[0].color}if(typeof a!="number")if(h){if(!N(i)||!N(i.arcade))return void td.error("Use of arcade expressions requires an arcade context");const b={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},w=i.arcade.arcadeUtils,x=w.getViewInfo(b),T=w.createExecContext(n,x);if(!f){const M=w.createSyntaxTree(r.valueExpression);f=w.createFunction(M),r.cache.compiledFunc=f}a=w.executeFunction(f,T)}else o&&(a=o[l]);const y=r.normalizationField,g=o?parseFloat(o[y]):void 0;if(a!=null&&(!y||s||!isNaN(g)&&g!==0)){isNaN(g)||s||(a/=g);const b=kP(a,u);if(b){const w=b[0],x=b[1],T=w===x?r.stops[w].color:Oe.blendColors(r.stops[w].color,r.stops[x].color,b[2],N(i)?i.color:void 0);return new Oe(T)}}}function _B(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(b=>b.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void td.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const s=typeof t=="number",n=s?null:t,o=n&&n.attributes;let a=s?t:null;const l=r.field,{ipData:u,hasExpression:h}=r.cache;let f=r.cache.compiledFunc;if(!l&&!h){const b=r.stops;return b&&b[0]&&b[0].opacity}if(typeof a!="number")if(h){if(Q(i)||Q(i.arcade))return void td.error("Use of arcade expressions requires an arcade context");const b={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},w=i.arcade.arcadeUtils,x=w.getViewInfo(b),T=w.createExecContext(n,x);if(!f){const M=w.createSyntaxTree(r.valueExpression);f=w.createFunction(M),r.cache.compiledFunc=f}a=w.executeFunction(f,T)}else o&&(a=o[l]);const y=r.normalizationField,g=o?parseFloat(o[y]):void 0;if(a!=null&&(!y||s||!isNaN(g)&&g!==0)){isNaN(g)||s||(a/=g);const b=kP(a,u);if(b){const w=b[0],x=b[1];if(w===x)return r.stops[w].opacity;{const T=r.stops[w].opacity;return T+(r.stops[x].opacity-T)*b[2]}}}}function bB(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void td.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const s=r.axis||"heading",n=s==="heading"&&r.rotationType==="arithmetic"?90:0,o=s==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,l=a&&a.attributes,u=r.field,{hasExpression:h}=r.cache;let f=r.cache.compiledFunc,y=0;if(!u&&!h)return y;if(h){if(Q(i)||Q(i.arcade))return void td.error("Use of arcade expressions requires an arcade context");const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},b=i.arcade.arcadeUtils,w=b.getViewInfo(g),x=b.createExecContext(a,w);if(!f){const T=b.createSyntaxTree(r.valueExpression);f=b.createFunction(T),r.cache.compiledFunc=f}y=b.executeFunction(f,x)}else l&&(y=l[u]||0);return y=typeof y!="number"||isNaN(y)?null:n+o*y,y}function Efe(e,t,i){const r=typeof t=="number",s=r?null:t,n=s&&s.attributes;let o=r?t:null;const{isScaleDriven:a}=e.cache;let l=e.cache.compiledFunc;if(a){const h=N(i)?i.scale:void 0,f=N(i)?i.view:void 0;o=h==null||f==="3d"?Afe(e):h}else if(!r)switch(e.inputValueType){case oc.Expression:{if(Q(i)||Q(i.arcade))return void td.error("Use of arcade expressions requires an arcade context");const h={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},f=i.arcade.arcadeUtils,y=f.getViewInfo(h),g=f.createExecContext(s,y);if(!l){const b=f.createSyntaxTree(e.valueExpression);l=f.createFunction(b),e.cache.compiledFunc=l}o=f.executeFunction(l,g);break}case oc.Field:n&&(o=n[e.field]);break;case oc.Unknown:o=null}if(!xv(o))return null;if(r||!e.normalizationField)return o;const u=n?parseFloat(n[e.normalizationField]):null;return xv(u)&&u!==0?o/u:null}function Afe(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function wI(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(n=>n.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void td.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const s=SB(Efe(r,t,i),r,t,i,r.cache.ipData);return s==null||isNaN(s)?0:s}function Hs(e,t,i){return e==null?null:em(e)?wI(e,t,i):xv(e)?e:null}function wB(e,t,i){return xv(i)&&e>i?i:xv(t)&&e<t?t:e}function Mfe(e,t,i,r){return e+(Hs(t.minSize,i,r)||t.minDataValue)}function Ofe(e,t,i){const r=e.stops;let s=r&&r.length&&r[0].size;return s==null&&(s=e.minSize),Hs(s,t,i)}function kfe(e,t,i,r){const s=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),n=Hs(t.minSize,i,r),o=Hs(t.maxSize,i,r),a=N(r)?r.shape:void 0;if(e<=t.minDataValue)return n;if(e>=t.maxDataValue)return o;if(t.scaleBy==="area"&&a){const l=a==="circle",u=l?e1*(n/2)**2:n*n,h=u+s*((l?e1*(o/2)**2:o*o)-u);return l?2*Math.sqrt(h/e1):Math.sqrt(h)}return n+s*(o-n)}function Pfe(e,t,i,r){const s=N(r)?r.shape:void 0,n=e/t.minDataValue,o=Hs(t.minSize,i,r),a=Hs(t.maxSize,i,r);let l=null;return l=s==="circle"?2*Math.sqrt(n*(o/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(n*o**2):n*o,wB(l,o,a)}function Lfe(e,t,i,r,s){const[n,o,a]=kP(e,s);if(n===o)return Hs(t.stops[n].size,i,r);{const l=Hs(t.stops[n].size,i,r);return l+(Hs(t.stops[o].size,i,r)-l)*a}}function Rfe(e,t,i,r){const s=(N(r)&&r.resolution?r.resolution:1)*yB[t.valueUnit],n=Hs(t.minSize,i,r),o=Hs(t.maxSize,i,r),{valueRepresentation:a}=t;let l=null;return l=a==="area"?2*Math.sqrt(e/e1)/s:a==="radius"||a==="distance"?2*e/s:e/s,wB(l,n,o)}function SB(e,t,i,r,s){switch(t.transformationType){case fr.Additive:return Mfe(e,t,i,r);case fr.Constant:return Ofe(t,i,r);case fr.ClampedLinear:return kfe(e,t,i,r);case fr.Proportional:return Pfe(e,t,i,r);case fr.Stops:return Lfe(e,t,i,r,s);case fr.RealWorldSize:return Rfe(e,t,i,r);case fr.Identity:return e;case fr.Unknown:return null}}function Ffe(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&i==="3d"||t))return null;const s={scale:t,view:i};let n=Hs(e.minSize,rD,s),o=Hs(e.maxSize,rD,s);if(n!=null||o!=null){if(n>o){const a=o;o=n,n=a}return{minSize:n,maxSize:o}}}function Nfe(e,t,i){if(!e.visualVariables)return;const r=[],s=[],n=[],o=[],a=[];for(const l of e.visualVariables)switch(l.type){case"color":s.push(l);break;case"opacity":n.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return s.forEach(l=>{const u=vB(l,t,i);r.push({variable:l,value:u})}),n.forEach(l=>{const u=_B(l,t,i);r.push({variable:l,value:u})}),a.forEach(l=>{const u=bB(l,t,i);r.push({variable:l,value:u})}),o.forEach(l=>{const u=wI(l,t,i);r.push({variable:l,value:u})}),r.filter(l=>l.value!=null)}function kP(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((s,n)=>e<s?(r=n,!0):(i=n,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function Dfe(e,t,i){const r=["proportional","proportional","proportional"];for(const s of e){const n=s.useSymbolValue?"symbol-value":wI(s,t,i);switch(s.axis){case"width":r[0]=n;break;case"depth":r[1]=n;break;case"height":r[2]=n;break;case"width-and-depth":r[0]=n,r[1]=n;break;case"all":case void 0:case null:r[0]=n,r[1]=n,r[2]=n;break;default:s.axis}}return r}var Tp=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:Dfe,getColor:vB,getOpacity:_B,getRotationAngle:bB,getSize:wI,getSizeForValue:SB,getSizeFromNumberOrVariable:Hs,getSizeRangeAtScale:Ffe,getVisualVariableValues:Nfe,viewScaleRE:gB},Symbol.toStringTag,{value:"Module"})),MA;const Dp=fe.getLogger("esri.renderers.visualVariables.SizeVariable"),Eb=new rt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),OA=new rt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function sD(e){if(e!=null)return typeof e=="string"||typeof e=="number"?Nt(e):e.type==="size"?em(e)?e:(delete(e=k({},e)).type,new Ot(e)):void 0}function nD(e,t,i){if(typeof e!="object")return e;const r=new Ot;return r.read(e,i),r}let Ot=MA=class extends g_{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:gB.test(this.valueExpression)}}set expression(e){Dp.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){em(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),em(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return mB(this)}set maxDataValue(e){e&&this.stops&&(Dp.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(Dp.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return sD(e)}readMaxSize(e,t,i){return nD(e,t,i)}set minDataValue(e){e&&this.stops&&(Dp.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(Dp.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return sD(e)}readMinSize(e,t,i){return nD(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(Dp.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return Cfe(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if(e==="$view.scale"){if(r&&r.messages){const s=this.index,n=typeof s=="string"?s:`visualVariables[${s}]`;r.messages.push(new B("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?OA.read(e):null}clone(){return new MA({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:em(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:em(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===fr.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===fr.Stops){const e=this.stops,t=e.map(r=>r.size).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};c([d({readOnly:!0})],Ot.prototype,"cache",null),c([d({type:Eb.apiValues,json:{type:Eb.jsonValues,origins:{"web-map":{read:!1}},read:Eb.read,write:Eb.write}})],Ot.prototype,"axis",void 0),c([d({type:String,value:null,json:{read:!1}})],Ot.prototype,"expression",null),c([d()],Ot.prototype,"index",null),c([d({type:String,readOnly:!0})],Ot.prototype,"inputValueType",null),c([d({type:fB,json:{write:!0}})],Ot.prototype,"legendOptions",void 0),c([d({type:Number,value:null,json:{write:!0}})],Ot.prototype,"maxDataValue",null),c([d({type:Number,value:null,json:{write:!0}})],Ot.prototype,"maxSize",null),c([gt("maxSize")],Ot.prototype,"castMaxSize",null),c([xe("maxSize")],Ot.prototype,"readMaxSize",null),c([d({type:Number,value:null,json:{write:!0}})],Ot.prototype,"minDataValue",null),c([d({type:Number,value:null,json:{write:!0}})],Ot.prototype,"minSize",null),c([gt("minSize")],Ot.prototype,"castMinSize",null),c([xe("minSize")],Ot.prototype,"readMinSize",null),c([d({type:String,json:{write:!0}})],Ot.prototype,"normalizationField",void 0),c([d({readOnly:!0})],Ot.prototype,"arcadeRequired",null),c([d({type:String})],Ot.prototype,"scaleBy",void 0),c([d({type:[$fe],value:null,json:{write:!0}})],Ot.prototype,"stops",null),c([d({type:["outline"],json:{write:!0}})],Ot.prototype,"target",void 0),c([d({type:String,readOnly:!0})],Ot.prototype,"transformationType",null),c([d({type:["size"],json:{type:["sizeInfo"]}})],Ot.prototype,"type",void 0),c([d({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Ot.prototype,"useSymbolValue",void 0),c([d({type:String,json:{write:!0}})],Ot.prototype,"valueExpression",void 0),c([xe("valueExpression",["valueExpression","expression"])],Ot.prototype,"readValueExpression",null),c([$e("web-scene","valueExpression")],Ot.prototype,"writeValueExpressionWebScene",null),c([d({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Ot.prototype,"valueRepresentation",void 0),c([d({type:OA.apiValues,json:{write:OA.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],Ot.prototype,"valueUnit",void 0),c([xe("valueUnit")],Ot.prototype,"readValueUnit",null),Ot=MA=c([O("esri.renderers.visualVariables.SizeVariable")],Ot);const PP=Ot,jfe=fe.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),zfe={color:dB,size:PP,opacity:hB,rotation:pB},Vfe=new rt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Ufe=/^\[([^\]]+)\]$/i;let t1=class extends Ee{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(t=>!!t))&&e.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(t=>!!t.target)&&e.sort((t,i)=>{let r=null;return r=t.target===i.target?0:t.target?1:-1,r});for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,i){const{rotationExpression:r,rotationType:s}=t,n=r&&r.match(Ufe),o=n&&n[1];if(o&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:o})),e)return e.map(a=>{const l=Vfe.read(a.type),u=zfe[l];u||(jfe.warn(`Unknown variable type: ${l}`),i&&i.messages&&i.messages.push(new Es("visual-variable:unsupported",`visualVariable of type '${l}' is not supported`,{definition:a,context:i})));const h=new u;return h.read(a,i),h})}writeVariables(e,t){const i=[];for(const r of e){const s=r.toJSON(t);s&&i.push(s)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};c([d()],t1.prototype,"visualVariables",null),t1=c([O("esri.renderers.visualVariables.VisualVariableFactory")],t1);const Bfe=t1,qfe={base:g_,key:"type",typeMap:{opacity:hB,color:dB,rotation:pB,size:PP}},v_=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new Bfe}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,s){return this._vvFactory.readVariables(i,r,s)}writeVisualVariables(i,r,s,n){r[s]=this._vvFactory.writeVariables(i,n)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const s=this.visualVariables;return s?s.filter(n=>n.type===i&&(typeof r=="string"?n.target===r:r!==!1||!n.target)):[]}async collectVVRequiredFields(i,r){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const n of s)n&&(n.field&&ho(i,r,n.field),n.normalizationField&&ho(i,r,n.normalizationField),n.valueExpression&&await Fn(i,r,n.valueExpression))}};return c([d({types:[qfe],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),c([xe("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),c([$e("visualVariables")],t.prototype,"writeVisualVariables",null),t=c([O("esri.renderers.mixins.VisualVariablesMixin")],t),t},Qy={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Gfe(e,t=Qy){if(!e)return{symbol:null};const{retainId:i=Qy.retainId,ignoreDrivers:r=Qy.ignoreDrivers,hasLabelingContext:s=Qy.hasLabelingContext,retainCIM:n=Qy.retainCIM}=t;let o;if(pc(e)||e instanceof vp)o=e.clone();else if(e.type==="cim"){var a,l;const u=(a=e.data)==null||(l=a.symbol)==null?void 0:l.type;if(u!=="CIMPointSymbol")return{error:new B("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${u||"unknown"}' is unsupported in 3D`,{symbol:e})};o=n?e.clone():Sh.fromCIMSymbol(e)}else if(e instanceof Nn)o=rI.fromSimpleLineSymbol(e);else if(e instanceof sd)o=Sh.fromSimpleMarkerSymbol(e);else if(e instanceof n_)o=Sh.fromPictureMarkerSymbol(e);else if(e instanceof cl)o=o_.fromSimpleFillSymbol(e);else{if(!(e instanceof gp))return{error:new B("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};o=s?iI.fromTextSymbol(e):Sh.fromTextSymbol(e)}if(i&&o.type!=="cim"&&(o.id=e.id),r&&pc(o))for(let u=0;u<o.symbolLayers.length;++u)o.symbolLayers.getItemAt(u)._ignoreDrivers=!0;return{symbol:o}}function jS(e,t,i,r){const s=xB(e,{},{context:r,isLabelSymbol:!1});N(s)&&(t[i]=s)}function oD(e,t,i,r){const s=xB(e,{},{context:r,isLabelSymbol:!0});N(s)&&(t[i]=s)}function xB(e,t,i){if(Q(e))return null;const{context:r,isLabelSymbol:s}=i;if(r&&r.origin==="web-scene"&&!(e instanceof dy)&&!(e instanceof vp)){const n=Gfe(e,{retainCIM:!0,hasLabelingContext:s});return N(n.symbol)?n.symbol.write(t,r):(r.messages&&r.messages.push(new B("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:n.error})),null)}return r&&r.origin==="web-map"&&e.type==="web-style"?(r.messages&&r.messages.push(new B("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:e,context:r})),null):e.write(t,r)}function IB(e,t){return Pre(e,null,t)}const __={types:S8,json:{write:{writer:jS},origins:{"web-scene":{types:z3,write:{writer:jS},read:{reader:ty({types:z3})}}}}},TB={types:{base:en,key:"type",typeMap:{"simple-fill":zh.typeMap["simple-fill"],"picture-fill":zh.typeMap["picture-fill"],"polygon-3d":zh.typeMap["polygon-3d"]}},json:{write:{writer:jS},origins:{"web-scene":{type:o_,write:{writer:jS}}}}};var kA;let iu=kA=class extends ue{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new kA({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};c([d({type:String,json:{write:!0}})],iu.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],iu.prototype,"label",void 0),c([d({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],iu.prototype,"minValue",void 0),c([d({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],iu.prototype,"maxValue",void 0),c([d(__)],iu.prototype,"symbol",void 0),iu=kA=c([O("esri.renderers.support.ClassBreakInfo")],iu);const zS=iu;var PA;const Ab=fe.getLogger("esri.renderers.ClassBreaksRenderer"),$B="log",i1="percent-of-total",r1="field",Mb=new rt({esriNormalizeByLog:$B,esriNormalizeByPercentOfTotal:i1,esriNormalizeByField:r1}),Hfe=jt(zS);let Ki=PA=class extends v_(ad){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map(s=>{const n=new zS;return n.read(s,i),n.minValue==null&&(n.minValue=r),n.maxValue==null&&(n.maxValue=n.minValue),r=n.maxValue,n})}writeClassBreakInfos(e,t,i,r){const s=e.map(n=>n.write({},r));this._areClassBreaksConsecutive()&&s.forEach(n=>delete n.classMinValue),t[i]=s}castField(e){return e==null?e:typeof e=="function"?(Ab.error(".field: field must be a string value"),null):Yv(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&r1||i&&i1||null,t&&i&&Ab.warn("warning: both normalizationField and normalizationTotal are set!")):e!==r1&&e!==i1||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r=typeof e=="number"?new zS({minValue:e,maxValue:t,symbol:x8(i)}):Hfe(K(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const s=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(s[0]===e&&s[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(Q(t)||Q(t.arcade))&&Ab.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(Q(t)||Q(t.arcade))&&(i=be(k({},i),{arcade:await hc()}));const r=this.getBreakIndex(e,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(Q(t)||Q(t.arcade)))return void Ab.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(Q(t)||Q(t.arcade))){const s=await hc(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),i=be(k({},i),{arcade:s})}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,s)=>r+s.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new PA({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:K(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:K(this.visualVariables),legendOptions:K(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),Fn(e,t,this.valueExpression)];ho(e,t,this.field),ho(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:n}=MO(t,{});let o=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const a=n.arcadeUtils;if(!o){const u=a.createSyntaxTree(this.valueExpression);o=a.createFunction(u),this._compiledValueExpression.compiledFunction=o}this._compiledValueExpression.valueExpression=this.valueExpression;const l=a.executeFunction(o,a.createExecContext(e,a.getViewInfo({viewingMode:i,scale:r,spatialReference:s})));return this._getBreakIndexfromInfos(l)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let s=parseFloat(i[t]);if(r){const n=this.normalizationTotal,o=parseFloat(i[this.normalizationField]);if(r===$B)s=Math.log(s)*Math.LOG10E;else if(r!==i1||isNaN(n)){if(r===r1&&!isNaN(o)){if(isNaN(s)||isNaN(o))return-1;s/=o}}else s=s/n*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};c([d(TB)],Ki.prototype,"backgroundFillSymbol",void 0),c([d({type:[zS]})],Ki.prototype,"classBreakInfos",void 0),c([xe("classBreakInfos")],Ki.prototype,"readClassBreakInfos",null),c([$e("classBreakInfos")],Ki.prototype,"writeClassBreakInfos",null),c([d({type:String,json:{write:!0}})],Ki.prototype,"defaultLabel",void 0),c([d(__)],Ki.prototype,"defaultSymbol",void 0),c([d({type:String,json:{write:!0}})],Ki.prototype,"field",void 0),c([gt("field")],Ki.prototype,"castField",null),c([d({type:Boolean})],Ki.prototype,"isMaxInclusive",void 0),c([d({type:OP,json:{write:!0}})],Ki.prototype,"legendOptions",void 0),c([d({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Ki.prototype,"minValue",null),c([d({type:String,json:{write:!0}})],Ki.prototype,"normalizationField",void 0),c([d({type:Number,cast:e=>oo(e),json:{write:!0}})],Ki.prototype,"normalizationTotal",void 0),c([d({type:Mb.apiValues,value:null,json:{type:Mb.jsonValues,read:Mb.read,write:Mb.write}})],Ki.prototype,"normalizationType",null),c([Ue({classBreaks:"class-breaks"})],Ki.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Ki.prototype,"valueExpression",void 0),c([d({type:String,json:{write:!0}})],Ki.prototype,"valueExpressionTitle",void 0),Ki=PA=c([O("esri.renderers.ClassBreaksRenderer")],Ki);const CB=Ki,w$=-3;var Eu;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(Eu||(Eu={}));class Gke{constructor(t,i,r){this._namespace=t,this._storage=i,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,i,r,s=0){this._storage.put(this._namespace+t,i,r,s)}get(t){const i=this._storage.get(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}pop(t){const i=this._storage.pop(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}updateSize(t,i,r){this._storage.updateSize(this._namespace+t,i,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class EB{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Nh,this._users=new Nh}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,i,r,s){const n=this._db.get(t);if(n&&(this._size-=n.size,this._db.delete(t),n.entry!==i&&this._notifyRemove(t,n.entry,Eu.ALL)),r>this._maxSize)return void this._notifyRemove(t,i,Eu.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const o=1+Math.max(s,w$)-w$;this._db.set(t,{entry:i,size:r,lifetime:o,lives:o}),this._size+=r,this._checkSizeLimit()}updateSize(t,i,r){const s=this._db.get(t);if(s&&s.entry===i){for(this._size-=s.size;r>this._maxSize;){const n=this._notifyRemove(t,i,Eu.SOME);if(!(N(n)&&n>0))return void this._db.delete(t);r=n}s.size=r,this._size+=r,this._checkSizeLimit()}}pop(t){const i=this._db.get(t);if(i)return this._size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(t){const i=this._db.get(t);if(i!==void 0)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;r[l]=(r[l]||0)+o.size,this._users.forAll(u=>{const h=u.namespace;if(a.startsWith(h)){const f=i[h]||0;i[h]=f+o.size}})});const s={};this._users.forAll(o=>{const a=o.namespace;if(!isNaN(o.hitRate)&&o.hitRate>0){const l=i[a]||0;i[a]=l,s[a]=Math.round(100*o.hitRate)+"%"}else s[a]="0%"});const n=Object.keys(i);n.sort((o,a)=>i[a]-i[o]),n.forEach(o=>t[o]=Math.round(i[o]/2**20)+"MB / "+s[o]);for(let o=r.length-1;o>=0;--o){const a=r[o];a&&(t["Priority "+(o+w$-1)]=Math.round(a/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((i,r)=>{r.startsWith(t)&&(this._size-=i.size,this._db.delete(r),this._notifyRemove(r,i.entry,Eu.ALL))})}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,Eu.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,r){let s;return this._removeFuncs.some(n=>{if(t.startsWith(n[0])){const o=n[1](i,r);return typeof o=="number"&&(s=o),!0}return!1}),s}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,i]of this._db){if(this._db.delete(t),i.lives<=1){this._size-=i.size;const r=this._notifyRemove(t,i.entry,Eu.SOME);N(r)&&r>0&&(this._size+=r,i.lives=i.lifetime,i.size=r,this._db.set(t,i))}else--i.lives,this._db.set(t,i);if(this._size<=.9*this.maxSize)return}}}class Wfe{constructor(t,i){this._storage=new EB,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i,r){this._storage.put(t,i,r,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}const aD=fe.getLogger("esri.renderers.support.DictionaryLoader"),Jfe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class LP{constructor(t,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new Wfe(100),this.url=t,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(g){if(_o(g))return this._dictionaryPromise=null,null}const s={};if(this.fieldMap)for(const g of this._symbolFields){const b=this.fieldMap[g];if(b&&t.attributes[b]!=null){const w=""+t.attributes[b];s[g]=w}else s[g]=""}const n=r(s,i);if(!n||typeof n!="string")return null;const o=PO(n).toString(),a=this._symbolCache.get(o);if(a)return a.catch(()=>{this._symbolCache.pop(o)}),a;const l=n.split(";"),u=[],h=[];for(const g of l)if(g)if(g.includes("po:")){const b=g.substr(3).split("|");if(b.length===3){const w=b[0],x=b[1];let T=b[2];if(x==="DashTemplate")T=T.split(" ").map(M=>Number(M));else if(x==="Color"){const M=new Oe(T).toRgba();T=[M[0],M[1],M[2],255*M[3]]}else T=Number(T);h.push({primitiveName:w,propertyName:x,value:T})}}else if(g.includes("|")){for(const b of g.split("|"))if(this._itemNames.has(b)){u.push(b);break}}else this._itemNames.has(g)&&u.push(g);const f=!N(t.geometry)||!t.geometry.hasZ&&t.geometry.type==="point",y=this._cimPartsToCIMSymbol(u,h,f,i);return this._symbolCache.put(o,y,1),y}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void aD.error("no valid URL!");const i=N(t)?t.abortOptions:null,r=ft(this.url+"/resources/styles/dictionary-info.json",k({responseType:"json",query:{f:"json"}},i)),[{data:s}]=await Promise.all([r,hc()]);if(!s)throw this._dictionaryPromise=null,new B("esri.renderers.DictionaryRenderer","Bad dictionary data!");const n=s.expression,o=s.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+s.cimRefTemplateUrl,this._itemNames=new Set(s.itemsNames),this._symbolFields=o.symbol;const a={};if(this.config){const u=this.config;for(const h in u)a[h]=u[h]}if(o.configuration)for(const u of o.configuration)a.hasOwnProperty(u.name)||(a[u.name]=u.value);const l=[];if(N(t)&&t.fields&&this.fieldMap)for(const u of this._symbolFields){const h=this.fieldMap[u],f=t.fields.filter(y=>y.name===h);f.length>0&&l.push(be(k({},f[0]),{name:u}))}return this._dictionaryPromise=Ute(n,N(t)?t.spatialReference:null,l,a).then(u=>{const h={scale:0};return(f,y)=>{const g=u.repurposeFeature({geometry:null,attributes:f});return h.scale=N(y)?y.scale:void 0,u.evaluate({$feature:g,$view:h})}}).catch(u=>(aD.error("Creating dictinoary expression failed:",u),null)),this._dictionaryPromise}async _cimPartsToCIMSymbol(t,i,r,s){const n=new Array(t.length);for(let l=0;l<t.length;l++)n[l]=this._getSymbolPart(t[l],s);const o=await Promise.all(n),a=this.fieldMap;for(const l of o)AB(l,a);return new i_({data:this._combineSymbolParts(o,i,r)})}async _getSymbolPart(t,i){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(n=>n.data);const r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),s=ft(r,k({responseType:"json",query:{f:"json"}},i));this._ongoingRequests.set(t,s);try{return(await s).data}catch(n){return this._ongoingRequests.delete(t),Promise.reject(n)}}_combineSymbolParts(t,i,r){if(!t||t.length===0)return null;const s=k({},t[0]);if(t.length>1){s.symbolLayers=[];for(const n of t){const o=n;s.symbolLayers.unshift(...o.symbolLayers)}}return r&&(s.callout=Jfe),{type:"CIMSymbolReference",symbol:s,primitiveOverrides:i}}}function AB(e,t){if(!e)return;const i=e.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const s=i[r];s&&s.enable!==!1&&s.type==="CIMVectorMarker"&&Zfe(s,t)}}function Zfe(e,t){const i=e.markerGraphics;if(i)for(const r of i){if(!r)continue;const s=r.symbol;if(s)switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":AB(s,t);break;case"CIMTextSymbol":s.fieldMap=t}}}var Hke=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:LP},Symbol.toStringTag,{value:"Module"})),LA;let qo=LA=class extends v_(ad){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new LP(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){r!=null&&r.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new LA({config:K(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:K(this.fieldMap),url:K(this.url),visualVariables:K(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await Fn(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};c([d({type:LP})],qo.prototype,"_loader",null),c([d({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],qo.prototype,"config",void 0),c([d({type:Object,json:{write:!0}})],qo.prototype,"fieldMap",void 0),c([d({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],qo.prototype,"scaleExpression",void 0),c([$e("scaleExpression")],qo.prototype,"writeData",null),c([d({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],qo.prototype,"scaleExpressionTitle",void 0),c([d({type:String,json:{write:!0}})],qo.prototype,"url",void 0),c([$e("visualVariables")],qo.prototype,"writeVisualVariables",null),qo=LA=c([O("esri.renderers.DictionaryRenderer")],qo);const Yfe=qo;var RA;const Kfe=fe.getLogger("esri.renderers.support.AttributeColorInfo");let Fl=RA=class extends ue{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(Kfe.error(".field: field must be a string value"),null):Yv(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new RA({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};c([d({type:Oe,json:{type:[Number],write:!0}})],Fl.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],Fl.prototype,"field",void 0),c([gt("field")],Fl.prototype,"castField",null),c([d({type:String,json:{write:!0}})],Fl.prototype,"label",void 0),c([d({type:String,json:{write:!0}})],Fl.prototype,"valueExpression",void 0),c([d({type:String,json:{write:!0}})],Fl.prototype,"valueExpressionTitle",void 0),Fl=RA=c([O("esri.renderers.support.AttributeColorInfo")],Fl);const Qfe=Fl;var FA;let s1=FA=class extends ue{constructor(){super(...arguments),this.unit=null}clone(){return new FA({unit:this.unit})}};c([d({type:String,json:{write:!0}})],s1.prototype,"unit",void 0),s1=FA=c([O("esri.renderers.support.DotDensityLegendOptions")],s1);const Xfe=s1;var NA;let Kr=NA=class extends v_(ad){constructor(e){super(e),this.attributes=null,this.backgroundColor=new Oe([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Nn,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new cl({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new NA({attributes:K(this.attributes),backgroundColor:K(this.backgroundColor),dotBlendingEnabled:K(this.dotBlendingEnabled),dotShape:K(this.dotShape),dotSize:K(this.dotSize),dotValue:K(this.dotValue),legendOptions:K(this.legendOptions),outline:K(this.outline),referenceScale:K(this.referenceScale),visualVariables:K(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await Fn(e,t,i.valueExpression),i.field&&e.add(i.field)}};c([d({type:[Qfe],json:{write:!0}})],Kr.prototype,"attributes",void 0),c([d({type:Oe,json:{write:!0}})],Kr.prototype,"backgroundColor",void 0),c([d({type:Boolean}),ne("dotBlendingEnabled")],Kr.prototype,"blendDots",void 0),c([d({type:Boolean,json:{write:!0}})],Kr.prototype,"dotBlendingEnabled",void 0),c([d({type:String,json:{write:!1}})],Kr.prototype,"dotShape",void 0),c([d({type:Number,json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1}}}})],Kr.prototype,"dotSize",void 0),c([d({type:Xfe,json:{write:!0}})],Kr.prototype,"legendOptions",void 0),c([d({type:Nn,json:{default:null,write:!0}})],Kr.prototype,"outline",void 0),c([d({type:Number,json:{write:!0}})],Kr.prototype,"dotValue",void 0),c([d({type:Number}),ne("dotValue")],Kr.prototype,"referenceDotValue",void 0),c([d({type:Number,json:{write:!0}})],Kr.prototype,"referenceScale",void 0),c([d({type:Number,json:{write:!0}})],Kr.prototype,"seed",void 0),c([Ue({dotDensity:"dot-density"})],Kr.prototype,"type",void 0),Kr=NA=c([O("esri.renderers.DotDensityRenderer")],Kr);const eme=Kr;var DA;let e0=DA=class extends ue{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new DA({color:this.color,ratio:this.ratio})}};c([d({type:Oe,json:{write:!0}})],e0.prototype,"color",void 0),c([d({type:Number,json:{write:!0}})],e0.prototype,"ratio",void 0),e0=DA=c([O("esri.renderers.support.HeatmapColorStop")],e0);const k0=e0;var jA;let Go=jA=class extends ad{constructor(e){super(e),this.blurRadius=10,this.referenceScale=0,this.colorStops=[new k0({ratio:0,color:new Oe("rgba(255, 140, 0, 0)")}),new k0({ratio:.75,color:new Oe("rgba(255, 140, 0, 1)")}),new k0({ratio:.9,color:new Oe("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.maxPixelIntensity=100,this.minPixelIntensity=0,this.type="heatmap"}async collectRequiredFields(e,t){const i=this.field;i&&typeof i=="string"&&ho(e,t,i)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new jA({blurRadius:this.blurRadius,referenceScale:this.referenceScale,colorStops:K(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}};c([d({type:Number,json:{write:!0}})],Go.prototype,"blurRadius",void 0),c([d({type:Number})],Go.prototype,"referenceScale",void 0),c([d({type:[k0],json:{write:!0}})],Go.prototype,"colorStops",void 0),c([d({type:String,json:{write:!0}})],Go.prototype,"field",void 0),c([d({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:i==null})}}})],Go.prototype,"fieldOffset",void 0),c([d({type:Number,json:{write:!0}})],Go.prototype,"maxPixelIntensity",void 0),c([d({type:Number,json:{write:!0}})],Go.prototype,"minPixelIntensity",void 0),c([Ue({heatmap:"heatmap"})],Go.prototype,"type",void 0),Go=jA=c([O("esri.renderers.HeatmapRenderer")],Go);const tme=Go;var zA;let Xd=zA=class extends v_(ad){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new zA({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:K(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};c([d({type:String,json:{write:!0}})],Xd.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],Xd.prototype,"label",void 0),c([d(__)],Xd.prototype,"symbol",void 0),c([Ue({simple:"simple"})],Xd.prototype,"type",void 0),Xd=zA=c([O("esri.renderers.SimpleRenderer")],Xd);const RP=Xd,ime=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function VA(e){return e instanceof Ee}function lD(e){return e instanceof ke?Object.keys(e.items):VA(e)?Cs(e).keys():e?Object.keys(e):[]}function Ob(e,t){return e instanceof ke?e.items[t]:e[t]}function rme(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function P0(e){return e?e.declaredClass:null}function MB(e,t){const i=e.diff;if(i&&typeof i=="function")return i(e,t);const r=lD(e),s=lD(t);if(r.length===0&&s.length===0)return;if(!r.length||!s.length||rme(e,t))return{type:"complete",oldValue:e,newValue:t};const n=s.filter(f=>r.indexOf(f)===-1),o=r.filter(f=>s.indexOf(f)===-1),a=r.filter(f=>s.indexOf(f)>-1&&Ob(e,f)!==Ob(t,f)).concat(n,o).sort(),l=P0(e);if(l&&ime.indexOf(l)>-1&&a.length)return{type:"complete",oldValue:e,newValue:t};let u;const h=VA(e)&&VA(t);for(const f of a){const y=Ob(e,f),g=Ob(t,f);let b;(h||typeof y!="function"&&typeof g!="function")&&y!==g&&(y==null&&g==null||(b=i&&i[f]&&typeof i[f]=="function"?i[f](y,g):typeof y=="object"&&typeof g=="object"&&P0(y)===P0(g)?MB(y,g):{type:"complete",oldValue:y,newValue:g},N(b)&&(N(u)?u.diff[f]=b:u={type:"partial",diff:{[f]:b}})))}return u}function sme(e,t){if(Q(e))return!1;const i=t.split(".");let r=e;for(const s of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const n=r.diff[s];if(!n)return!1;r=n}}return!0}function Wke(e,t){for(const i of t)if(sme(e,i))return!0;return!1}function nme(e,t){if(!(typeof e=="function"||typeof t=="function"||Q(e)&&Q(t)))return Q(e)||Q(t)||typeof e=="object"&&typeof t=="object"&&P0(e)!==P0(t)?{type:"complete",oldValue:e,newValue:t}:MB(e,t)}var UA;let ru=UA=class extends ue{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}castValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new UA({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};c([d({type:String,json:{write:!0}})],ru.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],ru.prototype,"label",void 0),c([d(__)],ru.prototype,"symbol",void 0),c([d({json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}})],ru.prototype,"value",void 0),c([gt("value")],ru.prototype,"castValue",null),ru=UA=c([O("esri.renderers.support.UniqueValueInfo")],ru);const VS=ru,ome=()=>!!re("enable-feature:force-wosr"),S$={};async function ame(e,t){try{return{data:(await FP(e,t)).data,baseUrl:YO(e),styleUrl:e}}catch(i){return Jv(i),null}}function lme(e,t,i){const r=t&&t.portal||zr.getDefault();let s;const n=`${r.url} - ${r.user&&r.user.username} - ${e}`;return S$[n]||(S$[n]=cme(e,r,i).then(o=>(s=o,o.fetchData())).then(o=>({data:o,baseUrl:s.itemUrl,styleName:e}))),S$[n]}function cme(e,t,i){return t.load(i).then(()=>{const r=new ec({disableExtraQuery:!0,query:`owner:${cD} AND type:${uD} AND typekeywords:"${e}"`});return t.queryItems(r,i)}).then(({results:r})=>{let s=null;const n=e.toLowerCase();if(r&&Array.isArray(r)){for(const o of r)if(o.typeKeywords.some(a=>a.toLowerCase()===n)&&o.type===uD&&o.owner===cD){s=o;break}}if(!s)throw new B("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(i)})}function OB(e,t,i){return e.styleUrl?ame(e.styleUrl,i):e.styleName?lme(e.styleName,t,i):Promise.reject(new B("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function kB(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function ume(e,t){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!ome()){for(const i of e.formatInfos)if(i.type==="gltf")return i.href}return e.webRef}function FP(e,t){const i=k({responseType:"json",query:{f:"json"}},t);return ft(uo(e),i)}const cD="esri_en",uD="Style",dme="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var t0;const xd=fe.getLogger("esri.renderers.UniqueValueRenderer"),hme=jt(VS);let Ii=t0=class extends v_(ad){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let r=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<i.length;n++){const o=t.find(a=>a.value===i[n].value);o?nme(o,i[n])?(s.changed.push({type:"complete",oldValue:o,newValue:i[n]}),r=!0):s.unchanged.push({oldValue:o,newValue:i[n]}):(s.added.push(i[n]),r=!0)}for(let n=0;n<t.length;n++)i.find(o=>o.value===t[n].value)||(s.removed.push(t[n]),r=!0);return r?s:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(e){return e==null||typeof e=="function"?e:Yv(e)}writeField(e,t,i,r){typeof e=="string"?t[i]=e:r&&r.messages?r.messages.push(new B("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):xd.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}readPortal(e,t,i){return i.portal||zr.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=ed(t.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=s_(e.styleUrl,r))}set uniqueValueInfos(e){this.styleOrigin?xd.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void xd.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?hme(e):new VS({value:e,symbol:x8(t)}),this.uniqueValueInfos.push(i),this._valueInfoMap[i.value]=i}removeUniqueValueInfo(e){if(this.styleOrigin)xd.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(Q(t)||Q(t.arcade))&&(i=be(k({},i),{arcade:await hc()})),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(Q(t)||Q(t.arcade)))return void xd.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(Q(i)||Q(i.arcade))){const s=await hc(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),i=be(k({},i),{arcade:s})}const r=this._getUniqueValueInfo(e,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos)t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce((e,t)=>e+t.getMeshHash(),"")}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new t0({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:K(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:K(this.visualVariables),legendOptions:K(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:K(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=K(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(K(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),Fn(e,t,this.valueExpression)];ho(e,t,this.field),ho(e,t,this.field2),ho(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return OB(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(i=>{const r=new vp({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const s=new VS({value:i.name,symbol:r});t.push(s),this._valueInfoMap[i.name]=s}),this._set("uniqueValueInfos",Object.freeze(t)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach(e=>this._valueInfoMap[e.value+""]=e)}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:n}=MO(t,{});let o=this._cache.compiledFunc;const a=n.arcadeUtils;if(!o){const u=a.createSyntaxTree(this.valueExpression);o=a.createFunction(u),this._cache.compiledFunc=o}const l=a.executeFunction(o,a.createExecContext(e,a.getViewInfo({viewingMode:i,scale:r,spatialReference:s})));return this._valueInfoMap[l+""]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if(typeof t!="function"&&this.field2){const s=this.field2,n=this.field3,o=[];t&&o.push(i[t]),s&&o.push(i[s]),n&&o.push(i[n]),r=o.join(this.fieldDelimiter||"")}else typeof t=="function"?r=t(e):t&&(r=i[t]);return this._valueInfoMap[r+""]}static fromPortalStyle(e,t){const i=new t0(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||zr.getDefault());const r=i.populateFromStyle();return r.catch(s=>{xd.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",s)}),r}static fromStyleUrl(e,t){const i=new t0(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch(s=>{xd.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),r}};c([d({readOnly:!0})],Ii.prototype,"_cache",null),c([Ue({uniqueValue:"unique-value"})],Ii.prototype,"type",void 0),c([d(TB)],Ii.prototype,"backgroundFillSymbol",void 0),c([d({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Ii.prototype,"field",void 0),c([gt("field")],Ii.prototype,"castField",null),c([$e("field")],Ii.prototype,"writeField",null),c([d({type:String,json:{write:!0}})],Ii.prototype,"field2",void 0),c([d({type:String,json:{write:!0}})],Ii.prototype,"field3",void 0),c([d({type:String,json:{write:!0}})],Ii.prototype,"valueExpression",void 0),c([d({type:String,json:{write:!0}})],Ii.prototype,"valueExpressionTitle",void 0),c([d({type:OP,json:{write:!0}})],Ii.prototype,"legendOptions",void 0),c([d({type:String,json:{write:!0}})],Ii.prototype,"defaultLabel",void 0),c([d(mz(k({},__),{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Ii.prototype,"defaultSymbol",null),c([d({type:String,json:{write:!0}})],Ii.prototype,"fieldDelimiter",void 0),c([d({type:zr,readOnly:!0})],Ii.prototype,"portal",void 0),c([xe("portal",["styleName"])],Ii.prototype,"readPortal",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Ii.prototype,"styleOrigin",void 0),c([xe("styleOrigin",["styleName","styleUrl"])],Ii.prototype,"readStyleOrigin",null),c([$e("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Ii.prototype,"writeStyleOrigin",null),c([d({type:[VS],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Ii.prototype,"uniqueValueInfos",null),Ii=t0=c([O("esri.renderers.UniqueValueRenderer")],Ii);const NP=Ii,PB={key:"type",base:ad,typeMap:{heatmap:tme,simple:RP,"unique-value":NP,"class-breaks":CB,"dot-density":eme,dictionary:Yfe},errorContext:"renderer"},pme={key:"type",base:ad,typeMap:{simple:RP,"unique-value":NP,"class-breaks":CB},errorContext:"renderer"};function fme(e,t){return LB(e,null,t)}const mme=ty({types:PB});function LB(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new Es("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):mme(e,t,i):null}class DP{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(AC),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new DP,r=this._originStores[it.DEFAULTS];r&&r.forEach((s,n)=>{i.set(n,K(s),it.DEFAULTS)});for(let s=it.SERVICE;s<AC;s++){const n=this._originStores[s];n&&n.forEach((o,a)=>{t&&t.has(a)||i.set(a,K(o),s)})}return i}get(t,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,r=it.USER){let s=this._originStores[r];if(s||(s=new Map,this._originStores[r]=s),s.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const n=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),n!==i}return!1}delete(t,i=it.USER){const r=this._originStores[i];if(!r)return;const s=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let n=i-1;n>=0;n--){const o=this._originStores[n];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,n);break}}}return s}has(t,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const r=this._originStores[i],s=r&&r.get(t),n=this._values.get(t);return this._values.set(t,s),this._propertyOriginMap.set(t,i),n!==s}originOf(t){return this._propertyOriginMap.get(t)||it.DEFAULTS}forEach(t){this._values.forEach(t)}}const RB=e=>{let t=class extends e{constructor(...i){super(...i);const r=Cs(this),s=r.store,n=new DP;r.store=n,iV(r,s,n)}read(i,r){sV(this,i,r)}getAtOrigin(i,r){const s=x$(this),n=Ru(r);if(typeof i=="string")return s.get(i,n);const o={};return i.forEach(a=>{o[a]=s.get(a,n)}),o}originOf(i){return j1(this.originIdOf(i))}originIdOf(i){return x$(this).originOf(i)}revert(i,r){const s=x$(this),n=Ru(r),o=Cs(this);let a;a=typeof i=="string"?i==="*"?s.keys(n):[i]:i,a.forEach(l=>{o.invalidate(l),s.revert(l,n),o.commit(l)})}};return t=c([O("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function x$(e){return Cs(e).store}let dD=class extends RB(Ee){};dD=c([O("esri.core.ReadOnlyMultiOriginJSONSupport")],dD);const yme=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,r="user"){return I$(this).delete(i,Ru(r))}write(i={},r){return oV(this,i=i||{},r),i}setAtOrigin(i,r,s){Cs(this).setAtOrigin(i,r,Ru(s))}removeOrigin(i){const r=I$(this),s=Ru(i),n=r.keys(s);for(const o of n)r.originOf(o)===s&&r.set(o,r.get(o,s),it.USER)}updateOrigin(i,r){const s=I$(this),n=Ru(r),o=this.get(i);for(let a=n+1;a<AC;++a)s.delete(i,a);s.set(i,o,n)}toJSON(i){return this.write({},i)}};return t=c([O("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function I$(e){return Cs(e).store}const FB=e=>{let t=class extends yme(RB(e)){constructor(...i){super(...i)}};return t=c([O("esri.core.MultiOriginJSONSupport")],t),t};let hD=class extends FB(Ee){};hD=c([O("esri.core.MultiOriginJSONSupport")],hD);async function gme(e,t){const{WhereClause:i}=await se(()=>import("./WhereClause.2f3ccd67.js"),["assets/WhereClause.2f3ccd67.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]);return i.create(e,t)}var BA;let eh=BA=class extends ue{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new BA({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};c([d({type:String,json:{write:!0}})],eh.prototype,"expression",void 0),c([d({type:String,json:{write:!0}})],eh.prototype,"name",void 0),c([d({type:["boolean","date","number","string"],json:{write:!0}})],eh.prototype,"returnType",void 0),c([d({type:String,json:{write:!0}})],eh.prototype,"title",void 0),eh=BA=c([O("esri.form.ExpressionInfo")],eh);const vme=eh;let th=class extends ue{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};c([d({type:String,json:{write:!0}})],th.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],th.prototype,"label",void 0),c([d()],th.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],th.prototype,"visibilityExpression",void 0),th=c([O("esri.form.elements.Element")],th);const Um=th;var qA;let n1=qA=class extends ue{constructor(e){super(e),this.type=null}clone(){return new qA({type:this.type})}};c([d({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],n1.prototype,"type",void 0),n1=qA=c([O("esri.form.elements.inputs.AttachmentInput")],n1);const _me=n1;var GA;let ih=GA=class extends Um{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new GA({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};c([d({type:String,json:{write:!0}})],ih.prototype,"attachmentKeyword",void 0),c([d({type:Boolean,json:{write:!0}})],ih.prototype,"editable",void 0),c([d({type:_me,json:{read:{source:"inputType"},write:{target:"inputType"}}})],ih.prototype,"input",void 0),c([d({type:["attachment"],json:{read:!1,write:!0}})],ih.prototype,"type",void 0),ih=GA=c([O("esri.form.elements.AttachmentElement")],ih);const pD=ih;let o1=class extends ue{constructor(e){super(e),this.type=null}};c([d()],o1.prototype,"type",void 0),o1=c([O("esri.form.elements.inputs.Input")],o1);const _y=o1;let i0=class extends _y{constructor(e){super(e),this.maxLength=null,this.minLength=0}};c([d({type:Number,json:{write:!0}})],i0.prototype,"maxLength",void 0),c([d({type:Number,json:{write:!0}})],i0.prototype,"minLength",void 0),i0=c([O("esri.form.elements.inputs.TextInput")],i0);const jP=i0;var HA;let a1=HA=class extends jP{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new HA({maxLength:this.maxLength,minLength:this.minLength})}};c([d({type:["barcode-scanner"],json:{read:!1,write:!0}})],a1.prototype,"type",void 0),a1=HA=c([O("esri.form.elements.inputs.BarcodeScannerInput")],a1);const bme=a1;var WA;let wf=WA=class extends _y{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new WA({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};c([d({type:String,json:{write:!0}})],wf.prototype,"noValueOptionLabel",void 0),c([d({type:Boolean,json:{write:!0}})],wf.prototype,"showNoValueOption",void 0),c([d({type:["combo-box"],json:{read:!1,write:!0}})],wf.prototype,"type",void 0),wf=WA=c([O("esri.form.elements.inputs.ComboBoxInput")],wf);const wme=wf;var JA;function fD(e){return e!=null?new Date(e):null}function mD(e){return e?e.getTime():null}let Ho=JA=class extends _y{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return fD(t.max)}writeMax(e,t){t.max=mD(e)}readMin(e,t){return fD(t.min)}writeMin(e,t){t.min=mD(e)}clone(){return new JA({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};c([d({type:Boolean,json:{write:!0}})],Ho.prototype,"includeTime",void 0),c([d({type:Date,json:{type:Number,write:!0}})],Ho.prototype,"max",void 0),c([xe("max")],Ho.prototype,"readMax",null),c([$e("max")],Ho.prototype,"writeMax",null),c([d({type:Date,json:{type:Number,write:!0}})],Ho.prototype,"min",void 0),c([xe("min")],Ho.prototype,"readMin",null),c([$e("min")],Ho.prototype,"writeMin",null),c([d({type:["datetime-picker"],json:{read:!1,write:!0}})],Ho.prototype,"type",void 0),Ho=JA=c([O("esri.form.elements.inputs.DateTimePickerInput")],Ho);const Sme=Ho;var ZA;let Sf=ZA=class extends _y{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new ZA({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};c([d({type:String,json:{write:!0}})],Sf.prototype,"noValueOptionLabel",void 0),c([d({type:Boolean,json:{write:!0}})],Sf.prototype,"showNoValueOption",void 0),c([d({type:["radio-buttons"],json:{read:!1,write:!0}})],Sf.prototype,"type",void 0),Sf=ZA=c([O("esri.form.elements.inputs.RadioButtonsInput")],Sf);const xme=Sf;var YA;let xf=YA=class extends _y{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new YA({offValue:this.offValue,onValue:this.onValue})}};c([d({type:[String,Number],json:{write:!0}})],xf.prototype,"offValue",void 0),c([d({type:[String,Number],json:{write:!0}})],xf.prototype,"onValue",void 0),c([d({type:["switch"],json:{read:!1,write:!0}})],xf.prototype,"type",void 0),xf=YA=c([O("esri.form.elements.inputs.SwitchInput")],xf);const Ime=xf;var KA;let l1=KA=class extends jP{constructor(e){super(e),this.type="text-area"}clone(){return new KA({maxLength:this.maxLength,minLength:this.minLength})}};c([d({type:["text-area"],json:{read:!1,write:!0}})],l1.prototype,"type",void 0),l1=KA=c([O("esri.form.elements.inputs.TextAreaInput")],l1);const Tme=l1;var QA;let c1=QA=class extends jP{constructor(e){super(e),this.type="text-box"}clone(){return new QA({maxLength:this.maxLength,minLength:this.minLength})}};c([d({type:["text-box"],json:{read:!1,write:!0}})],c1.prototype,"type",void 0),c1=QA=c([O("esri.form.elements.inputs.TextBoxInput")],c1);const $me=c1,Cme={base:_y,key:"type",typeMap:{"barcode-scanner":bme,"combo-box":wme,"datetime-picker":Sme,"radio-buttons":xme,switch:Ime,"text-area":Tme,"text-box":$me}};var XA;let Xn=XA=class extends Um{constructor(e){super(e),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new XA({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};c([d({types:_9,json:{read:{reader:aP},write:!0}})],Xn.prototype,"domain",void 0),c([d({type:Boolean,json:{write:!0}})],Xn.prototype,"editable",void 0),c([d({type:String,json:{write:!0}})],Xn.prototype,"editableExpression",void 0),c([d({type:String,json:{write:!0}})],Xn.prototype,"fieldName",void 0),c([d({type:String,json:{write:!0}})],Xn.prototype,"hint",void 0),c([d({types:Cme,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Xn.prototype,"input",void 0),c([d({type:String,json:{write:!0}})],Xn.prototype,"requiredExpression",void 0),c([d({type:String,json:{read:!1,write:!0}})],Xn.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Xn.prototype,"valueExpression",void 0),Xn=XA=c([O("esri.form.elements.FieldElement")],Xn);const yD=Xn;var eM;let Nl=eM=class extends Um{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new eM({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:K(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};c([d({type:Number,json:{write:!0}})],Nl.prototype,"displayCount",void 0),c([d({type:["list"],json:{write:!0}})],Nl.prototype,"displayType",void 0),c([d({type:Boolean,json:{write:!0}})],Nl.prototype,"editable",void 0),c([d({type:[W6],json:{write:!0}})],Nl.prototype,"orderByFields",void 0),c([d({type:Number,json:{write:!0}})],Nl.prototype,"relationshipId",void 0),c([d({type:["relationship"],json:{read:!1,write:!0}})],Nl.prototype,"type",void 0),Nl=eM=c([O("esri.form.elements.RelationshipElement")],Nl);const gD=Nl;function NB(e){return{typesWithGroup:{base:Um,key:"type",typeMap:{attachment:pD,field:yD,group:e,relationship:gD}},typesWithoutGroup:{base:Um,key:"type",typeMap:{attachment:pD,field:yD,relationship:gD}}}}function DB(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function jB(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>s.toJSON())}function zB(e,t,i=!0){return e?e.map(r=>el(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var tM;let Ba=tM=class extends Um{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return zB(e,T$,!1)}readElements(e,t){return DB(t.formElements,T$,!1)}writeElements(e,t){t.formElements=jB(e,T$,!1)}clone(){return new tM({description:this.description,elements:K(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};c([d({json:{write:!0}})],Ba.prototype,"elements",void 0),c([gt("elements")],Ba.prototype,"castElements",null),c([xe("elements",["formElements"])],Ba.prototype,"readElements",null),c([$e("elements")],Ba.prototype,"writeElements",null),c([d({type:["collapsed","expanded"],json:{write:!0}})],Ba.prototype,"initialState",void 0),c([d({type:String,json:{read:!1,write:!0}})],Ba.prototype,"type",void 0),Ba=tM=c([O("esri.form.elements.GroupElement")],Ba);const T$=NB(Ba),Eme=Ba;var iM;const $$=NB(Eme);let La=iM=class extends ue{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(e){return zB(e,$$)}readElements(e,t){return DB(t.formElements,$$)}writeElements(e,t){t.formElements=jB(e,$$)}clone(){return new iM({description:this.description,expressionInfos:K(this.expressionInfos),elements:K(this.elements),title:this.title})}};c([d({type:String,json:{write:!0}})],La.prototype,"description",void 0),c([d({json:{write:!0}})],La.prototype,"elements",void 0),c([gt("elements")],La.prototype,"castElements",null),c([xe("elements",["formElements"])],La.prototype,"readElements",null),c([$e("elements")],La.prototype,"writeElements",null),c([d({type:[vme],json:{write:!0}})],La.prototype,"expressionInfos",void 0),c([d({type:String,json:{write:!0}})],La.prototype,"title",void 0),La=iM=c([O("esri.form.FormTemplate")],La);const Ame=La;var r0;const US=Br()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),VB=US.jsonValues.slice();uz(VB,"orthometric");const L0=Br()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Wo=r0=class extends ue{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return US.write(e,t,i)}readHeightModel(e,t,i){return US.read(e)||(i&&i.messages&&i.messages.push(Mme(e,{context:i})),null)}readHeightUnit(e,t,i){return L0.read(e)||(i&&i.messages&&i.messages.push(vD(e,{context:i})),null)}readHeightUnitService(e,t,i){return k8(e)||L0.read(e)||(i&&i.messages&&i.messages.push(vD(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new r0({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=xse(t);return new r0({heightModel:e.heightModel,heightUnit:i,vertCRS:e.vertCRS})}write(e,t){return t=k({origin:"web-scene"},t),super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new r0;return t.read(e,{origin:"web-scene"}),t}};function vD(e,t){return new Es("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function Mme(e,t){return new Es("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}c([d({type:US.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:VB,default:"ellipsoidal"}}}})],Wo.prototype,"heightModel",void 0),c([$e("web-scene","heightModel")],Wo.prototype,"writeHeightModel",null),c([xe(["web-scene","service"],"heightModel")],Wo.prototype,"readHeightModel",null),c([d({type:L0.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:L0.jsonValues,write:L0.write}}}})],Wo.prototype,"heightUnit",void 0),c([xe("web-scene","heightUnit")],Wo.prototype,"readHeightUnit",null),c([xe("service","heightUnit")],Wo.prototype,"readHeightUnitService",null),c([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Wo.prototype,"vertCRS",void 0),c([xe("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Wo.prototype,"readVertCRS",null),Wo=r0=c([O("esri.geometry.HeightModelInfo")],Wo);const SI=Wo;function _D(e,t,i){if(e.hasM==null||e.hasZ)for(const r of t)for(const s of r)s.length>2&&(s[2]*=i)}function Ome(e,t,i){if(!e&&!t||!i)return;const r=Rm(i);bD(e,i,r),bD(t,i,r)}function bD(e,t,i){if(e)for(const r of e)kme(r.geometry,t,i)}function kme(e,t,i){if(Q(e)||!e.spatialReference||Qs(e.spatialReference,t))return;const r=Rm(e.spatialReference)/i;if(r!==1){if("x"in e)e.z!=null&&(e.z*=r);else if("rings"in e)_D(e,e.rings,r);else if("paths"in e)_D(e,e.paths,r);else if("points"in e&&(e.hasM==null||e.hasZ))for(const s of e.points)s.length>2&&(s[2]*=r)}}let Pme=0;const C$=fe.getLogger("esri.layers.graphics.sources.MemorySource");let su=class extends dc.LoadableMixin(Vx(Xs(ke))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=N(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get workerGeometryType(){var e;const t=(e=this.layer)==null?void 0:e.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);OS(e,this.layer.spatialReference,i);const r=bp.fromJSON(i);if(!this._requiresClientGraphicMapping())return r;const s=this.layer.objectIdField;for(const n of r.features){const o=n.attributes[s],a=this._idToClientGraphic.get(o);a&&(n.geometry=a.geometry)}return r.geometryType=this.layer.geometryType,r}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new B("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return OS(e,this.layer.spatialReference,i),i}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(i=>({count:i.count,extent:Et.fromJSON(i.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}async _applyEdits(e){if(!this._connection)throw new B("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let i=null;const r=[],s=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const n=u=>"objectId"in u&&u.objectId!=null?u.objectId:"attributes"in u&&u.attributes[t]!=null?u.attributes[t]:null;if(e.addFeatures&&(i=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const u of e.deleteFeatures){const h=n(u);h!=null&&r.push(h)}const o=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const u of e.updateFeatures)if(s.push(this._serializeFeature(u)),o){const h=n(u);h!=null&&o.set(h,u)}}Ome(i?i.features:null,s,this.layer.spatialReference);const{fullExtent:a,featureEditResults:l}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:s,deletes:r});return this.fullExtent=a,i&&i.finish(l.uidToObjectId),this._updateClientGraphicIds(o,l),this._createEditsResult(l)}async _prepareClientMapping(e,t){if(this.layerOrSourceGeometryType!=="mesh"||Q(e))return;const i=[];for(const{geometry:r}of e)!N(r)||r.type!=="mesh"||r.hasExtent||r.loaded||i.push(r.load({signal:t}));i.length&&await Promise.all(i)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const i of t.updateResults){if(!i.success)continue;const r=e.get(i.objectId);r!=null&&this._addIdToClientGraphic(r)}for(const i of t.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new B("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,i=new Array(e.length);let r=null;for(let n=0;n<e.length;n++){const o=e[n],a=this._serializeFeature(o);!r&&N(o.geometry)&&(r=o.geometry.type),i[n]=a,t.set(`${a.uid}`,o)}const s=this;return{features:i,inferredGeometryType:r,finish(n){const o=s.sourceJSON.objectIdField;for(const a in n){const l=n[a],u=t.get(a);u&&(u.attributes||(u.attributes={}),l===-1?delete u.attributes[o]:u.attributes[o]=l,s._addIdToClientGraphic(u))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,i=e.attributes&&e.attributes[t];i!=null&&this._idToClientGraphic.set(i,e)}get layerOrSourceGeometryType(){var e,t,i;return(e=(t=this.layer)==null?void 0:t.geometryType)!=null?e:(i=this.sourceJSON)==null?void 0:i.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:t}=e,i=this._geometryForSerialization(e),r=(Pme++).toString();return i?{uid:r,geometry:i.toJSON(),attributes:t}:{uid:r,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return Q(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?Rn.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await pse("MemorySourceWorker",{strategy:re("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:i,objectIdField:r,hasM:s,hasZ:n,timeInfo:o}=this.layer,a=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const l=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",y=>{C$.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),y.preventDefault()}));const u={features:l.features,fields:t&&t.map(y=>y.toJSON()),geometryType:E3.toJSON(this.workerGeometryType),hasM:this.layerOrSourceGeometryType!=="mesh"&&s,hasZ:this.layerOrSourceGeometryType==="mesh"||n,objectIdField:r,spatialReference:a?null:i&&i.toJSON(),timeInfo:o?o.toJSON():null},h=await this._connection.invoke("load",u,{signal:e});for(const y of h.warnings)C$.warn(y.message,{layer:this.layer,warning:y});h.featureErrors.length&&C$.warn(`Encountered ${h.featureErrors.length} validation errors while loading features`,h.featureErrors);const f=h.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(l.inferredGeometryType)&&(f.geometryType=E3.toJSON(l.inferredGeometryType)),this.sourceJSON=f,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),l.finish(h.assignedObjectIds)}};c([UO({Type:xr,ensureType:jt(xr)})],su.prototype,"itemType",void 0),c([d()],su.prototype,"type",void 0),c([d({constructOnly:!0})],su.prototype,"layer",void 0),c([d({readOnly:!0})],su.prototype,"workerGeometryType",null),c([d()],su.prototype,"sourceJSON",void 0),su=c([O("esri.layers.graphics.sources.MemorySource")],su);const wD=su;function Lme(e){return"portalItem"in e}const Rme=e=>{let t=class extends e{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):Lme(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return c([d({type:String})],t.prototype,"apiKey",null),t=c([O("esri.layers.mixins.APIKeyMixin")],t),t},UB={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},BB=Object.values(UB),qB=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${BB.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Fme=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${BB.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Nme=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function Jke(e){return!!qB.test(e)}function b_(e){const t=_i(e),i=t.path.match(qB)||t.path.match(Fme);if(!i)return null;const[,r,s,n,o]=i,a=s.indexOf("/");return{title:zP(a!==-1?s.slice(a+1):s),serverType:UB[n.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function Dme(e){const t=_i(e).path.match(Nme);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function zP(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function jme(e,t){const i=[];if(e){const r=b_(e);N(r)&&r.title&&i.push(r.title)}if(t){const r=zP(t);i.push(r)}if(i.length===2){if(i[0].toLowerCase().indexOf(i[1].toLowerCase())!==-1)return i[0];if(i[1].toLowerCase().indexOf(i[0].toLowerCase())!==-1)return i[1]}return i.join(" - ")}function GB(e){if(!e)return!1;const t=".arcgis.com/",i="//services",r="//tiles",s="//features",n=(e=e.toLowerCase()).indexOf(t)!==-1,o=e.indexOf(i)!==-1||e.indexOf(r)!==-1||e.indexOf(s)!==-1;return n&&o}function zme(e,t){return e&&gV(vV(e,t))}function Vme(e){let{url:t}=e;if(!t)return{url:t};t=vV(t,e.logger);const i=_i(t),r=b_(i.path);let s;if(N(r))r.sublayer!=null&&e.layer.layerId==null&&(s=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const n=Dme(i.path);N(n)&&(t=n.serviceUrl,s=n.sublayerId)}return{url:gV(t),layerId:s}}function Ume(e,t,i,r,s){sp(t,r,"url",s),r.url&&e.layerId!=null&&(r.url=Ku(r.url,i,e.layerId.toString()))}function Zke(e){if(!e)return!1;const t=e.toLowerCase(),i=t.indexOf("/services/")!==-1,r=t.indexOf("/mapserver/wmsserver")!==-1,s=t.indexOf("/imageserver/wmsserver")!==-1,n=t.indexOf("/wmsserver")!==-1;return i&&(r||s||n)}const Bme=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=b_(this.url);if(N(i)&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",zme(i,fe.getLogger(this.declaredClass)))}};return c([d()],t.prototype,"title",null),c([d({type:String})],t.prototype,"url",null),t=c([O("esri.layers.mixins.ArcGISService")],t),t};function xI(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function qme(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Gme(e,t,i,r,s,n,o,a,l,u,h,f,y,g,b,w){const x=new Float32Array(16);return x[0]=e,x[1]=t,x[2]=i,x[3]=r,x[4]=s,x[5]=n,x[6]=o,x[7]=a,x[8]=l,x[9]=u,x[10]=h,x[11]=f,x[12]=y,x[13]=g,x[14]=b,x[15]=w,x}function Hme(e,t){return new Float32Array(e,t,16)}const Wme=xI();Object.freeze({__proto__:null,create:xI,clone:qme,fromValues:Gme,createView:Hme,IDENTITY:Wme});const Jme=(e,t)=>{const i=od(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return gc(i,i)},Zme=(e,t)=>{const i=od(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return gc(i,i)},Yme=(e,t)=>{const i=1-t,r=od(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return gc(r,r)},Kme=(e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),s=od(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return gc(s,s)},Qme=(e,t)=>{const i=1-2*t,r=od(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return gc(r,r)},Xme=(e,t)=>{const i=od(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return gc(i,i)},eye=(e,t)=>{const i=1-t,r=od(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return gc(r,r)};class II{constructor(t,i,r){this.strength=t,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(t,i,r){this.strength=zs(t.strength,i.strength,r),this.radius=zs(t.radius,i.radius,r),this.threshold=zs(t.threshold,i.threshold,r)}clone(){return new II(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:R0(this.radius),strength:this.strength,threshold:this.threshold}}}class TI{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,r){this.radius=Math.round(zs(t.radius,i.radius,r))}clone(){return new TI(this.radius)}toJSON(){return{type:"blur",radius:R0(this.radius)}}}class Iv{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.amount=zs(t.amount,i.amount,r),this._updateMatrix()}clone(){return new Iv(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||xI();switch(this.type){case"brightness":this._colorMatrix=Jme(t,this.amount);break;case"contrast":this._colorMatrix=Zme(t,this.amount);break;case"grayscale":this._colorMatrix=Yme(t,this.amount);break;case"invert":this._colorMatrix=Qme(t,this.amount);break;case"saturate":this._colorMatrix=Xme(t,this.amount);break;case"sepia":this._colorMatrix=eye(t,this.amount)}}}class $I{constructor(t,i,r,s){this.offsetX=t,this.offsetY=i,this.blurRadius=r,this.color=s,this.type="drop-shadow"}interpolate(t,i,r){this.offsetX=zs(t.offsetX,i.offsetX,r),this.offsetY=zs(t.offsetY,i.offsetY,r),this.blurRadius=zs(t.blurRadius,i.blurRadius,r),this.color[0]=Math.round(zs(t.color[0],i.color[0],r)),this.color[1]=Math.round(zs(t.color[1],i.color[1],r)),this.color[2]=Math.round(zs(t.color[2],i.color[2],r)),this.color[3]=zs(t.color[3],i.color[3],r)}clone(){return new $I(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:R0(this.offsetX),yoffset:R0(this.offsetY),blurRadius:R0(this.blurRadius),color:t}}}class CI{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.angle=zs(t.angle,i.angle,r),this._updateMatrix()}clone(){return new CI(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||xI();this._colorMatrix=Kme(t,this.angle)}}class EI{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,r){this.amount=zs(t.amount,i.amount,r)}clone(){return new EI(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function zs(e,t,i){return e+(t-e)*i}function R0(e){return Math.round(1e3*il(e))/1e3}function tye(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new Iv(e.type,0);case"saturate":case"brightness":case"contrast":return new Iv(e.type,1);case"opacity":return new EI(1);case"hue-rotate":return new CI(0);case"blur":return new TI(0);case"drop-shadow":return new $I(0,0,0,[...sk("transparent")]);case"bloom":return new II(0,0,1)}}function HB(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,s)=>r.type===i[s].type)}function WB(e,t){const i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let s=r.length;s<i.length;s++)r.push(tye(i[s]))}function iye(e){const t=e[0];return!!t&&"type"in t}var SD,xD,JB={exports:{}};function VP(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=ID(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new B("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:ID(i.value)}});t.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!HB(t[i].effects,t[i+1].effects))throw new B("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});WB(t[i].effects,t[i+1].effects)}return t.sort((i,r)=>r.scale-i.scale),t}function ID(e){let t;if(!e)return[];try{t=JB.exports.parse(e)}catch(i){throw new B("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>rye(i))}function rye(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return sye(e);case"opacity":return nye(e);case"hue-rotate":return oye(e);case"blur":return aye(e);case"drop-shadow":return lye(e);case"bloom":return cye(e)}}catch(t){throw t.details.filter=e,t}throw new B("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function sye(e){let t=1;return by(e.parameters,1),e.parameters.length===1&&(t=Qo(e.parameters[0])),new Iv(e.name,t)}function nye(e){let t=1;return by(e.parameters,1),e.parameters.length===1&&(t=Qo(e.parameters[0])),new EI(t)}function oye(e){let t=0;return by(e.parameters,1),e.parameters.length===1&&(t=mye(e.parameters[0])),new CI(t)}function aye(e){let t=0;return by(e.parameters,1),e.parameters.length===1&&(t=qP(e.parameters[0]),w_(t,e.parameters[0])),new TI(t)}function lye(e){const t=[];let i=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),i)throw new B("effect:type-error","Accepts only one color",{});i=yye(r)}else{const s=qP(r);if(Object.isFrozen(t))throw new B("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(s),t.length===3&&w_(s,r)}if(t.length<2||t.length>3)throw new B("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new $I(t[0],t[1],t[2]||0,i||ZB("black"))}function cye(e){let t=1,i=0,r=0;return by(e.parameters,3),e.parameters[0]&&(t=Qo(e.parameters[0])),e.parameters[1]&&(i=qP(e.parameters[1]),w_(i,e.parameters[1])),e.parameters[2]&&(r=Qo(e.parameters[2])),new II(t,i,r)}function by(e,t){if(e.length>t)throw new B("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function AI(e){if(e.type==="color")return"<color>";if(e.unit){if(BP[e.unit])return"<length>";if(UP[e.unit])return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function w_(e,t){if(e<0)throw new B("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function uye(e){if(e.type!=="quantity"||e.unit!==null)throw new B("effect:type-error",`Expected <double>, Actual: ${AI(e)}`,{term:e})}function dye(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new B("effect:type-error",`Expected <double> or <percentage>, Actual: ${AI(e)}`,{term:e})}xD=function(){function e(s,n){function o(){this.constructor=s}o.prototype=n.prototype,s.prototype=new o}function t(s,n,o,a){var l=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(l,t.prototype),l.expected=n,l.found=o,l.location=a,l.name="SyntaxError",l}function i(s,n,o){return o=o||" ",s.length>n?s:(n-=s.length,s+(o+=o.repeat(n)).slice(0,n))}function r(s,n){var o,a={},l=(n=n!==void 0?n:{}).grammarSource,u={start:Mp},h=Mp,f="none",y=")",g=",",b="(",w="%",x="px",T="cm",M="mm",F="in",D="pt",R="pc",_="deg",q="rad",W="grad",oe="turn",te="#",he=".",ge="e",Te=/^[ \t\n\r]/,Se=/^[a-z\-]/,vt=/^[0-9a-fA-F]/,$t=/^[+\-]/,st=/^[0-9]/,Kt=zn("none"),yi=zi("none",!1),wo=zi(")",!1),ni=zi(",",!1),Tr=zn("whitespace"),yr=hd([" ","	",`
`,"\r"],!1,!1),ns=zn("function"),Hi=zi("(",!1),So=zn("identifier"),tn=hd([["a","z"],"-"],!1,!1),ot=zn("percentage"),$r=zi("%",!1),$p=zn("length"),xo=zi("px",!1),ya=zi("cm",!1),os=zi("mm",!1),hl=zi("in",!1),pl=zi("pt",!1),Be=zi("pc",!1),rr=zn("angle"),Sy=zi("deg",!1),xy=zi("rad",!1),Io=zi("grad",!1),fl=zi("turn",!1),ud=zn("number"),ga=zn("color"),as=zi("#",!1),rn=hd([["0","9"],["a","f"],["A","F"]],!1,!1),jn=hd(["+","-"],!1,!1),sn=hd([["0","9"]],!1,!1),ml=zi(".",!1),k_=zi("e",!1),P_=function(){return[]},ZI=function(j,ae){return{type:"function",name:j,parameters:ae||[]}},_c=function(j,ae){return ae.length>0?U_(j,ae,3):[j]},dd=function(j){return{type:"quantity",value:j.value,unit:j.unit}},L_=function(j){return{type:"color",colorType:j.type,value:j.value}},R_=function(j){return j},Ms=function(){return yl()},Gr=function(j){return{value:j,unit:"%"}},Iy=function(j){return{value:j,unit:"px"}},YI=function(j){return{value:j,unit:"cm"}},F_=function(j){return{value:j,unit:"mm"}},N_=function(j){return{value:j,unit:"in"}},bc=function(j){return{value:j,unit:"pt"}},wc=function(j){return{value:j,unit:"pc"}},KI=function(j){return{value:j,unit:"deg"}},QI=function(j){return{value:j,unit:"rad"}},Ty=function(j){return{value:j,unit:"grad"}},Cp=function(j){return{value:j,unit:"turn"}},XI=function(j){return{value:j,unit:null}},eT=function(){return{type:"hex",value:yl()}},tT=function(j){return{type:"function",value:j}},D_=function(){return{type:"named",value:yl()}},iT=function(){return parseFloat(yl())},X=0,ei=0,Ep=[{line:1,column:1}],Cr=0,Ap=[],Pe=0;if("startRule"in n){if(!(n.startRule in u))throw new Error(`Can't start parsing from rule "`+n.startRule+'".');h=u[n.startRule]}function yl(){return s.substring(ei,X)}function zi(j,ae){return{type:"literal",text:j,ignoreCase:ae}}function hd(j,ae,pe){return{type:"class",parts:j,inverted:ae,ignoreCase:pe}}function pd(){return{type:"end"}}function zn(j){return{type:"other",description:j}}function $y(j){var ae,pe=Ep[j];if(pe)return pe;for(ae=j-1;!Ep[ae];)ae--;for(pe={line:(pe=Ep[ae]).line,column:pe.column};ae<j;)s.charCodeAt(ae)===10?(pe.line++,pe.column=1):pe.column++,ae++;return Ep[j]=pe,pe}function Cy(j,ae){var pe=$y(j),lt=$y(ae);return{source:l,start:{offset:j,line:pe.line,column:pe.column},end:{offset:ae,line:lt.line,column:lt.column}}}function et(j){X<Cr||(X>Cr&&(Cr=X,Ap=[]),Ap.push(j))}function rT(j,ae,pe){return new t(t.buildMessage(j,ae),j,ae,pe)}function Mp(){var j;return(j=sT())===a&&(j=j_()),j}function sT(){var j,ae;return Pe++,j=X,Oi(),s.substr(X,4)===f?(ae=f,X+=4):(ae=a,Pe===0&&et(yi)),ae!==a?(Oi(),ei=j,j=P_()):(X=j,j=a),Pe--,j===a&&Pe===0&&et(Kt),j}function j_(){var j,ae;if(j=[],(ae=Ey())!==a)for(;ae!==a;)j.push(ae),ae=Ey();else j=a;return j}function Ey(){var j,ae,pe,lt;return j=X,Oi(),(ae=V_())!==a?(Oi(),(pe=z_())===a&&(pe=null),Oi(),s.charCodeAt(X)===41?(lt=y,X++):(lt=a,Pe===0&&et(wo)),lt!==a?(Oi(),ei=j,j=ZI(ae,pe)):(X=j,j=a)):(X=j,j=a),j}function z_(){var j,ae,pe,lt,bi,ci,Os,Vn;if(j=X,(ae=Op())!==a){for(pe=[],lt=X,bi=Oi(),s.charCodeAt(X)===44?(ci=g,X++):(ci=a,Pe===0&&et(ni)),ci===a&&(ci=null),Os=Oi(),(Vn=Op())!==a?lt=bi=[bi,ci,Os,Vn]:(X=lt,lt=a);lt!==a;)pe.push(lt),lt=X,bi=Oi(),s.charCodeAt(X)===44?(ci=g,X++):(ci=a,Pe===0&&et(ni)),ci===a&&(ci=null),Os=Oi(),(Vn=Op())!==a?lt=bi=[bi,ci,Os,Vn]:(X=lt,lt=a);ei=j,j=_c(ae,pe)}else X=j,j=a;return j}function Op(){var j,ae;return j=X,(ae=Sc())===a&&(ae=kp())===a&&(ae=nT())===a&&(ae=oT()),ae!==a&&(ei=j,ae=dd(ae)),(j=ae)===a&&(j=X,(ae=Ay())!==a&&(ei=j,ae=L_(ae)),j=ae),j}function Oi(){var j,ae;for(Pe++,j=[],Te.test(s.charAt(X))?(ae=s.charAt(X),X++):(ae=a,Pe===0&&et(yr));ae!==a;)j.push(ae),Te.test(s.charAt(X))?(ae=s.charAt(X),X++):(ae=a,Pe===0&&et(yr));return Pe--,ae=a,Pe===0&&et(Tr),j}function V_(){var j,ae,pe;return Pe++,j=X,(ae=Er())!==a?(s.charCodeAt(X)===40?(pe=b,X++):(pe=a,Pe===0&&et(Hi)),pe!==a?(ei=j,j=R_(ae)):(X=j,j=a)):(X=j,j=a),Pe--,j===a&&(ae=a,Pe===0&&et(ns)),j}function Er(){var j,ae,pe;if(Pe++,j=X,ae=[],Se.test(s.charAt(X))?(pe=s.charAt(X),X++):(pe=a,Pe===0&&et(tn)),pe!==a)for(;pe!==a;)ae.push(pe),Se.test(s.charAt(X))?(pe=s.charAt(X),X++):(pe=a,Pe===0&&et(tn));else ae=a;return ae!==a&&(ei=j,ae=Ms()),Pe--,(j=ae)===a&&(ae=a,Pe===0&&et(So)),j}function Sc(){var j,ae,pe;return Pe++,j=X,Oi(),(ae=ls())!==a?(s.charCodeAt(X)===37?(pe=w,X++):(pe=a,Pe===0&&et($r)),pe!==a?(ei=j,j=Gr(ae)):(X=j,j=a)):(X=j,j=a),Pe--,j===a&&Pe===0&&et(ot),j}function kp(){var j,ae,pe;return Pe++,j=X,Oi(),(ae=ls())!==a?(s.substr(X,2)===x?(pe=x,X+=2):(pe=a,Pe===0&&et(xo)),pe!==a?(ei=j,j=Iy(ae)):(X=j,j=a)):(X=j,j=a),j===a&&(j=X,Oi(),(ae=ls())!==a?(s.substr(X,2)===T?(pe=T,X+=2):(pe=a,Pe===0&&et(ya)),pe!==a?(ei=j,j=YI(ae)):(X=j,j=a)):(X=j,j=a),j===a&&(j=X,Oi(),(ae=ls())!==a?(s.substr(X,2)===M?(pe=M,X+=2):(pe=a,Pe===0&&et(os)),pe!==a?(ei=j,j=F_(ae)):(X=j,j=a)):(X=j,j=a),j===a&&(j=X,Oi(),(ae=ls())!==a?(s.substr(X,2)===F?(pe=F,X+=2):(pe=a,Pe===0&&et(hl)),pe!==a?(ei=j,j=N_(ae)):(X=j,j=a)):(X=j,j=a),j===a&&(j=X,Oi(),(ae=ls())!==a?(s.substr(X,2)===D?(pe=D,X+=2):(pe=a,Pe===0&&et(pl)),pe!==a?(ei=j,j=bc(ae)):(X=j,j=a)):(X=j,j=a),j===a&&(j=X,Oi(),(ae=ls())!==a?(s.substr(X,2)===R?(pe=R,X+=2):(pe=a,Pe===0&&et(Be)),pe!==a?(ei=j,j=wc(ae)):(X=j,j=a)):(X=j,j=a)))))),Pe--,j===a&&Pe===0&&et($p),j}function nT(){var j,ae,pe;return Pe++,j=X,(ae=ls())!==a?(s.substr(X,3)===_?(pe=_,X+=3):(pe=a,Pe===0&&et(Sy)),pe!==a?(ei=j,j=KI(ae)):(X=j,j=a)):(X=j,j=a),j===a&&(j=X,(ae=ls())!==a?(s.substr(X,3)===q?(pe=q,X+=3):(pe=a,Pe===0&&et(xy)),pe!==a?(ei=j,j=QI(ae)):(X=j,j=a)):(X=j,j=a),j===a&&(j=X,(ae=ls())!==a?(s.substr(X,4)===W?(pe=W,X+=4):(pe=a,Pe===0&&et(Io)),pe!==a?(ei=j,j=Ty(ae)):(X=j,j=a)):(X=j,j=a),j===a&&(j=X,(ae=ls())!==a?(s.substr(X,4)===oe?(pe=oe,X+=4):(pe=a,Pe===0&&et(fl)),pe!==a?(ei=j,j=Cp(ae)):(X=j,j=a)):(X=j,j=a)))),Pe--,j===a&&(ae=a,Pe===0&&et(rr)),j}function oT(){var j,ae;return Pe++,j=X,Oi(),(ae=ls())!==a?(ei=j,j=XI(ae)):(X=j,j=a),Pe--,j===a&&Pe===0&&et(ud),j}function Ay(){var j,ae,pe,lt;if(Pe++,j=X,s.charCodeAt(X)===35?(ae=te,X++):(ae=a,Pe===0&&et(as)),ae!==a){if(pe=[],vt.test(s.charAt(X))?(lt=s.charAt(X),X++):(lt=a,Pe===0&&et(rn)),lt!==a)for(;lt!==a;)pe.push(lt),vt.test(s.charAt(X))?(lt=s.charAt(X),X++):(lt=a,Pe===0&&et(rn));else pe=a;pe!==a?(ei=j,j=eT()):(X=j,j=a)}else X=j,j=a;return j===a&&(j=X,(ae=Ey())!==a&&(ei=j,ae=tT(ae)),(j=ae)===a&&(j=X,(ae=Er())!==a&&(ei=j,ae=D_()),j=ae)),Pe--,j===a&&(ae=a,Pe===0&&et(ga)),j}function ls(){var j,ae,pe,lt,bi,ci,Os;for(j=X,$t.test(s.charAt(X))?(s.charAt(X),X++):Pe===0&&et(jn),ae=X,pe=[],st.test(s.charAt(X))?(lt=s.charAt(X),X++):(lt=a,Pe===0&&et(sn));lt!==a;)pe.push(lt),st.test(s.charAt(X))?(lt=s.charAt(X),X++):(lt=a,Pe===0&&et(sn));if(s.charCodeAt(X)===46?(lt=he,X++):(lt=a,Pe===0&&et(ml)),lt!==a){if(bi=[],st.test(s.charAt(X))?(ci=s.charAt(X),X++):(ci=a,Pe===0&&et(sn)),ci!==a)for(;ci!==a;)bi.push(ci),st.test(s.charAt(X))?(ci=s.charAt(X),X++):(ci=a,Pe===0&&et(sn));else bi=a;bi!==a?ae=pe=[pe,lt,bi]:(X=ae,ae=a)}else X=ae,ae=a;if(ae===a)if(ae=[],st.test(s.charAt(X))?(pe=s.charAt(X),X++):(pe=a,Pe===0&&et(sn)),pe!==a)for(;pe!==a;)ae.push(pe),st.test(s.charAt(X))?(pe=s.charAt(X),X++):(pe=a,Pe===0&&et(sn));else ae=a;if(ae!==a){if(pe=X,s.charCodeAt(X)===101?(lt=ge,X++):(lt=a,Pe===0&&et(k_)),lt!==a){if($t.test(s.charAt(X))?(bi=s.charAt(X),X++):(bi=a,Pe===0&&et(jn)),bi===a&&(bi=null),ci=[],st.test(s.charAt(X))?(Os=s.charAt(X),X++):(Os=a,Pe===0&&et(sn)),Os!==a)for(;Os!==a;)ci.push(Os),st.test(s.charAt(X))?(Os=s.charAt(X),X++):(Os=a,Pe===0&&et(sn));else ci=a;ci!==a?pe=lt=[lt,bi,ci]:(X=pe,pe=a)}else X=pe,pe=a;pe===a&&(pe=null),ei=j,j=iT()}else X=j,j=a;return j}function Pp(j,ae){return j.map(function(pe){return pe[ae]})}function U_(j,ae,pe){return[j].concat(Pp(ae,pe))}if((o=h())!==a&&X===s.length)return o;throw o!==a&&X<s.length&&et(pd()),rT(Ap,Cr<s.length?s.charAt(Cr):null,Cr<s.length?Cy(Cr,Cr+1):Cy(Cr,Cr))}return e(t,Error),t.prototype.format=function(s){var n="Error: "+this.message;if(this.location){var o,a=null;for(o=0;o<s.length;o++)if(s[o].source===this.location.source){a=s[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,u=this.location.source+":"+l.line+":"+l.column;if(a){var h=this.location.end,f=i("",l.line.toString().length),y=a[l.line-1],g=l.line===h.line?h.column:y.length+1;n+=`
 --> `+u+`
`+f+` |
`+l.line+" | "+y+`
`+f+" | "+i("",l.column-1)+i("",g-l.column,"^")}else n+=`
 at `+u}return n},t.buildMessage=function(s,n){var o={literal:function(g){return'"'+l(g.text)+'"'},class:function(g){var b=g.parts.map(function(w){return Array.isArray(w)?u(w[0])+"-"+u(w[1]):u(w)});return"["+(g.inverted?"^":"")+b+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(g){return g.description}};function a(g){return g.charCodeAt(0).toString(16).toUpperCase()}function l(g){return g.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+a(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(b){return"\\x"+a(b)})}function u(g){return g.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+a(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(b){return"\\x"+a(b)})}function h(g){return o[g.type](g)}function f(g){var b,w,x=g.map(h);if(x.sort(),x.length>0){for(b=1,w=1;b<x.length;b++)x[b-1]!==x[b]&&(x[w]=x[b],w++);x.length=w}switch(x.length){case 1:return x[0];case 2:return x[0]+" or "+x[1];default:return x.slice(0,-1).join(", ")+", or "+x[x.length-1]}}function y(g){return g?'"'+l(g)+'"':"end of input"}return"Expected "+f(s)+" but "+y(n)+" found."},{SyntaxError:t,parse:r}},(SD=JB).exports&&(SD.exports=xD());const UP={deg:1,grad:.9,rad:180/Math.PI,turn:360};function hye(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&UP[e.unit]!=null))throw new B("effect:type-error",`Expected <angle>, Actual: ${AI(e)}`,{term:e})}const BP={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function pye(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&BP[e.unit]!=null))throw new B("effect:type-error",`Expected <length>, Actual: ${AI(e)}`,{term:e})}function Qo(e){dye(e);const t=e.value;return w_(t,e),e.unit==="%"?.01*t:t}function fye(e){return uye(e),w_(e.value,e),e.value}function mye(e){return hye(e),e.value*UP[e.unit]||0}function qP(e){return pye(e),e.value*BP[e.unit]||0}function yye(e){switch(e.colorType){case"hex":return UX(e.value);case"named":return ZB(e.value);case"function":return _ye(e.value)}}function ZB(e){if(!FV(e))throw new B("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return VX(e)}const gye=/^rgba?/i,vye=/^hsla?/i;function _ye(e){if(by(e.parameters,4),gye.test(e.name))return[Qo(e.parameters[0]),Qo(e.parameters[1]),Qo(e.parameters[2]),e.parameters[3]?Qo(e.parameters[3]):1];if(vye.test(e.name))return NV(fye(e.parameters[0]),Qo(e.parameters[1]),Qo(e.parameters[2]),e.parameters[3]?Qo(e.parameters[3]):1);throw new B("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function rM(e,t,i){try{return wye(e)}catch(s){var r;i==null||(r=i.messages)==null||r.push(s)}return null}function sM(e,t,i,r){try{const s=bye(e);Ln(i,s,t)}catch(s){r.messages&&r.messages.push(s)}}function bye(e){const t=VP(e);return t?iye(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:r})=>({scale:i,value:r.map(s=>s.toJSON())})):null}function wye(e){if(!e||e.length===0)return null;if(Sye(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:BS(i.value)});return t}return BS(e)}function Sye(e){const t=e[0];return!!t&&"scale"in t}function BS(e){if(!e||!e.length)return"";const t=[];for(const i of e){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[bl(i,"amount")];break;case"blur":r=[bl(i,"radius","pt")];break;case"hue-rotate":r=[bl(i,"angle","deg")];break;case"drop-shadow":r=[bl(i,"xoffset","pt"),bl(i,"yoffset","pt"),bl(i,"blurRadius","pt"),xye(i,"color")];break;case"bloom":r=[bl(i,"strength"),bl(i,"radius","pt"),bl(i,"threshold")]}const s=`${i.type}(${r.filter(Boolean).join(" ")})`;VP(s),t.push(s)}return t.join(" ")}function bl(e,t,i){if(e[t]==null)throw new B("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function xye(e,t){if(e[t]==null)throw new B("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const Iye=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return c([d({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),c([d({json:{read:!1,write:!1,origins:{"web-map":{read:{reader:rM},write:{allowNull:!0,writer:sM}}}}})],t.prototype,"effect",void 0),t=c([O("esri.layers.mixins.BlendLayer")],t),t},Tye=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return c([d({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=c([O("esri.layers.mixins.CustomParametersMixin")],t),t};var nM;const E$=new rt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),A$=new rt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ra=nM=class extends ue{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:s,objectIds:n,units:o,distance:a}=this;return new Ss(k({geometry:K(i),objectIds:K(n),spatialRelationship:r,timeExtent:K(s),where:t,units:o,distance:a},e))}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:s,units:n,distance:o}=this;return new nM({geometry:K(t),objectIds:K(s),spatialRelationship:i,timeExtent:K(r),where:e,units:n,distance:o})}};c([d({type:String,json:{write:!0}})],Ra.prototype,"where",void 0),c([d({types:mp,json:{write:!0}})],Ra.prototype,"geometry",void 0),c([d({type:E$.apiValues,json:{name:"spatialRel",read:{reader:E$.read},write:{allowNull:!1,writer:E$.write,overridePolicy(){return{enabled:N(this.geometry)}}}}})],Ra.prototype,"spatialRelationship",void 0),c([d({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Ra.prototype,"distance",void 0),c([d({type:[Number],json:{write:!0}})],Ra.prototype,"objectIds",void 0),c([d({type:A$.apiValues,json:{read:A$.read,write:{writer:A$.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Ra.prototype,"units",void 0),c([d({type:ul,json:{write:!0}})],Ra.prototype,"timeExtent",void 0),Ra=nM=c([O("esri.layers.support.FeatureFilter")],Ra);const $ye=Ra;var oM;let rh=oM=class extends ue{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){const i=super.write(e,t);if(t!=null&&t.origin){if(i.filter){const n=Object.keys(i.filter);var r;if(n.length>1||n[0]!=="where")return(r=t.messages)==null||r.push(new B("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}var s;if("showExcludedLabels"in i)return(s=t.messages)==null||s.push(new B("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new oM({filter:N(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};c([d({type:$ye,json:{write:{allowNull:!0,writer(e,t,i,r){const s=e==null?void 0:e.write({},r);s&&Object.keys(s).length!==0?Ln(i,s,t):Ln(i,null,t)}}}})],rh.prototype,"filter",void 0),c([d({json:{write:!0,origins:{"web-map":{read:{reader:rM},write:{writer:sM,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}}}}})],rh.prototype,"includedEffect",void 0),c([d({json:{write:!0,origins:{"web-map":{read:{reader:rM},write:{writer:sM,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}}}}})],rh.prototype,"excludedEffect",void 0),c([d({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":{name:"showExcludedLabels",default:!0}}}})],rh.prototype,"excludedLabelsVisible",void 0),rh=oM=c([O("esri.layers.support.FeatureEffect")],rh);const Cye=rh,Eye=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return c([d({type:Cye,json:{origins:{"web-map":{write:{allowNull:!0}}}}})],t.prototype,"featureEffect",void 0),t=c([O("esri.layers.mixins.FeatureEffectLayer")],t),t},Aye={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};function Mye(e){if(!e)return e;const{start:t,end:i}=e;return new ul({start:N(t)?Bh(t,-t.getTimezoneOffset(),"minutes"):t,end:N(i)?Bh(i,-i.getTimezoneOffset(),"minutes"):i})}function Oye(e){if(!e)return e;const{start:t,end:i}=e;return new ul({start:N(t)?Bh(t,t.getTimezoneOffset(),"minutes"):t,end:N(i)?Bh(i,i.getTimezoneOffset(),"minutes"):i})}var aM;let s0=aM=class extends ue{async collectRequiredFields(e,t){return Fn(e,t,this.expression)}clone(){return new aM({expression:this.expression,title:this.title})}};c([d({type:String,json:{write:!0}})],s0.prototype,"expression",void 0),c([d({type:String,json:{write:!0}})],s0.prototype,"title",void 0),s0=aM=c([O("esri.layers.support.FeatureExpressionInfo")],s0);const TD=s0;function kye(){const e=Object.keys(yB);return e.sort(),e}const Pye=kye();var lM;const kb=Br()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),$D=new rt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Dl=lM=class extends ue{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return e!=null?e:t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):N(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new lM({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};c([d({type:TD,json:{write:!0}})],Dl.prototype,"featureExpressionInfo",void 0),c([xe("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Dl.prototype,"readFeatureExpressionInfo",null),c([$e("featureExpressionInfo",{featureExpressionInfo:{type:TD},"featureExpression.value":{type:[0]}})],Dl.prototype,"writeFeatureExpressionInfo",null),c([d({type:kb.apiValues,nonNullable:!0,json:{type:kb.jsonValues,read:kb.read,write:{writer:kb.write,isRequired:!0}}})],Dl.prototype,"mode",null),c([d({type:Number,json:{write:!0}})],Dl.prototype,"offset",void 0),c([d({type:Pye,json:{type:String,read:$D.read,write:$D.write}})],Dl.prototype,"unit",null),Dl=lM=c([O("esri.layers.support.ElevationInfo")],Dl);const Lye=Dl,Rye={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},YB={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},KB={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},Fye={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:sp}}},Nye={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},Dye={value:null,type:Lye,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function Yke(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const u1={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},jye=be(k({},u1),{json:be(k({},u1.json),{origins:{"web-document":be(k({},u1.json.origins["web-document"]),{write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}})},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?tv(t.layerDefinition.drawingInfo.transparency):void 0:tv(t.drawingInfo.transparency)}})}),zye={type:ul,readOnly:!0,get(){var e,t;if((e=this.layer)==null||!e.timeInfo)return null;const{datesInUnknownTimezone:i,timeOffset:r,useViewTime:s}=this.layer,n=(t=this.view)==null?void 0:t.timeExtent;let o=this.layer.timeExtent;i&&(o=Oye(o));let a=s?n&&o?n.intersection(o):n||o:o;if(!a||a.isEmpty||a.isAllTime)return a;r&&(a=a.offset(-r.value,r.unit)),i&&(a=Mye(a));const l=this._get("timeExtent");return a.equals(l)?l:a}},Kke={type:Et,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=Et.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=Xe.fromJSON(t.spatialReference)),i}}}},read:!1}},Vye={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},Uye={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},Bye={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},qye=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(i,r,s,n){(n&&n.layerContainerType==="ground"||i&&VK(this,s,{},n))&&(r[s]=i)}writeOperationalLayerType(i,r,s,n){!i||n&&n.layerContainerType==="tables"||(r.layerType=i)}writeTitle(i,r){r.title=i||"Layer"}read(i,r){r&&(r.layer=this),NK(this,i,s=>super.read(i,s),r)}write(i,r){if(r!=null&&r.origin){const l=`${r.origin}/${r.layerContainerType||"operational-layers"}`,u=Aye[l];let h=u&&u[this.operationalLayerType];var s;if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&l==="web-scene/operational-layers"&&(h=!1),!h)return(s=r.messages)==null||s.push(new B("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${l}'`,{layer:this})),null}const n=super.write(i,be(k({},r),{layer:this})),o=!!r&&!!r.messages&&!!r.messages.filter(l=>l instanceof B&&l.name==="web-document-write:property-required").length;var a;return Bx(n==null?void 0:n.url)?(r==null||(a=r.messages)==null||a.push(new B("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&o?null:n}beforeSave(){}};return c([d({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),c([d({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],t.prototype,"listMode",void 0),c([$e("listMode")],t.prototype,"writeListMode",null),c([d({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),c([$e("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),c([d(u1)],t.prototype,"opacity",void 0),c([d({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),c([$e("title")],t.prototype,"writeTitle",null),c([d({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=c([O("esri.layers.mixins.OperationalLayer")],t),t};var cM;const M$=new rt({asc:"ascending",desc:"descending"});let If=cM=class extends ue{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new cM({field:this.field,valueExpression:this.valueExpression,order:this.order})}};c([d({type:String,json:{write:!0}})],If.prototype,"field",void 0),c([d({type:String,json:{write:!0}})],If.prototype,"valueExpression",void 0),c([d({type:M$.apiValues,json:{read:M$.read,write:M$.write}})],If.prototype,"order",void 0),If=cM=c([O("esri.layers.support.OrderByInfo")],If);const QB=If;function Gye(e,t,i){if(!e)return null;const r=e.find(n=>!!n.field);if(!r)return null;const s=new QB;return s.read(r,i),[s]}function Hye(e,t,i,r){const s=e.find(n=>!!n.field);s&&Ln(i,[s.toJSON()],t)}const Wye=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return c([d({type:[QB],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:Gye},write:{target:"layerDefinition.orderBy",writer:Hye}}})],t.prototype,"orderBy",void 0),t=c([O("esri.layers.mixins.OrderedLayer")],t),t},Jye=fe.getLogger("esri.layers.mixins.PortalLayer"),Zye=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var i;(i=this.portalItem)==null||i.destroy(),this.portalItem=null}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,s){if(r.itemId)return new sS({id:r.itemId,portal:s&&s.portal})}writePortalItem(i,r){i&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem&&this.portalItem.id)try{const s=await se(()=>import("./layersLoader.fec01d11.js").then(function(n){return n.l}),["assets/layersLoader.fec01d11.js","assets/lazyLayerLoader.33db2725.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/jsonContext.afa43f42.js"]);return Gi(r),await s.load({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData},r)}catch(s){throw _o(s)||Jye.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(Jv(r),!0)))}async _fetchUserHasEditingPrivileges(i){const r=this.url?ht==null?void 0:ht.findCredential(this.url):null;if(!r)return!0;const s=Pb.credential===r?Pb.user:await this._fetchEditingUser(i);return Pb.credential=r,Pb.user=s,Q(s)||s.privileges==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var r,s;const n=(r=this.portalItem)==null||(s=r.portal)==null?void 0:s.user;if(n)return n;const o=ht.findServerInfo(this.url);if(o==null||!o.owningSystemUrl)return null;const a=`${o.owningSystemUrl}/sharing/rest`,l=zr.getDefault();if(l&&l.loaded&&uo(l.restUrl)===uo(a))return l.user;const u=`${a}/community/self`,h=N(i)?i.signal:null,f=await Ux(ft(u,{authMode:"no-prompt",query:{f:"json"},signal:h}));return f.ok?ik.fromJSON(f.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const s=r&&r.portal,n=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||zr.getDefault());return s&&n&&!pV(n.restUrl,s.restUrl)?(r.messages&&r.messages.push(new B("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,be(k({},r),{layer:this}))}};return c([d({type:sS})],t.prototype,"portalItem",null),c([xe("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),c([$e("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),c([d({clonable:!1})],t.prototype,"resourceReferences",void 0),c([d({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=c([O("esri.layers.mixins.PortalLayer")],t),t},Pb={credential:null,user:null},Tv=new ke,F0=new WeakMap;function Yye(e){XB(e)&&Tv.push(e)}function Kye(e){XB(e)&&Tv.includes(e)&&Tv.remove(e)}function XB(e){return e&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function eq(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:eq(t,e%t):0}let O$=0,Lb=0;function Qye(){const e=Date.now();for(const i of Tv)if(i.refreshInterval){var t;e-((t=F0.get(i))!=null?t:0)+5>=6e4*i.refreshInterval&&(F0.set(i,e),i.refresh(e))}}Nz(()=>{const e=Date.now();let t=0;for(const i of Tv)t=eq(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?F0.get(i)||F0.set(i,e):F0.delete(i);if(t!==Lb){if(Lb=t,clearInterval(O$),Lb===0)return void(O$=0);O$=setInterval(Qye,Lb)}});const Xye=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=Nx(()=>this.hasDataChanged()),this.when().then(()=>{Yye(this)},()=>{})}destroy(){Kye(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){B1(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{fe.getLogger(this.declaredClass).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}};return c([d({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),c([d({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),c([d()],t.prototype,"refreshParameters",null),t=c([O("esri.layers.mixins.RefreshableLayer")],t),t},ege=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&tge(i,r.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===i.minScale&&s.maxScale===i.maxScale?s:i}};return c([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),c([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),c([d({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=c([O("esri.layers.mixins.ScaleRangeLayer")],t),t};function tge(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const Lh=Br()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var uM;let n0=uM=class extends ue{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return Mce(this.value,this.unit,"milliseconds")}clone(){return new uM({value:this.value,unit:this.unit})}};c([d({type:Number,json:{write:!0},nonNullable:!0})],n0.prototype,"value",void 0),c([d({type:Lh.apiValues,json:{type:Lh.jsonValues,read:Lh.read,write:Lh.write},nonNullable:!0})],n0.prototype,"unit",void 0),n0=uM=c([O("esri.TimeInterval")],n0);const $v=n0;var dM;let Tf=dM=class extends ue{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return t.respectsDaylightSaving!==void 0?t.respectsDaylightSaving:t.respectDaylightSaving!==void 0&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new dM({respectsDaylightSaving:e,timezone:t})}};c([d({type:Boolean,json:{write:!0}})],Tf.prototype,"respectsDaylightSaving",void 0),c([xe("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],Tf.prototype,"readRespectsDaylightSaving",null),c([d({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],Tf.prototype,"timezone",void 0),Tf=dM=c([O("esri.layers.support.TimeReference")],Tf);const ige=Tf;var hM;let Qr=hM=class extends ue{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||t.timeExtent.length!==2)return null;const i=new Date(t.timeExtent[0]),r=new Date(t.timeExtent[1]);return new ul({start:i,end:r})}writeFullTimeExtent(e,t){e&&N(e.start)&&N(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new $v({value:t.timeInterval,unit:Lh.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new $v({value:t.defaultTimeInterval,unit:Lh.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const i=e.toJSON();t.timeInterval=i.value,t.timeIntervalUnits=i.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:i,interval:r,startField:s,timeReference:n,fullTimeExtent:o,trackIdField:a,useTime:l}=this;return new hM({cumulative:e,endField:t,hasLiveData:i,interval:r,startField:s,timeReference:K(n),fullTimeExtent:K(o),trackIdField:a,useTime:l})}};c([d({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],Qr.prototype,"cumulative",void 0),c([d({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],Qr.prototype,"endField",void 0),c([d({type:ul,json:{write:{enabled:!0,allowNull:!0}}})],Qr.prototype,"fullTimeExtent",void 0),c([xe("fullTimeExtent",["timeExtent"])],Qr.prototype,"readFullTimeExtent",null),c([$e("fullTimeExtent")],Qr.prototype,"writeFullTimeExtent",null),c([d({type:Boolean,json:{write:!0}})],Qr.prototype,"hasLiveData",void 0),c([d({type:$v,json:{write:{enabled:!0,allowNull:!0}}})],Qr.prototype,"interval",void 0),c([xe("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Qr.prototype,"readInterval",null),c([$e("interval")],Qr.prototype,"writeInterval",null),c([d({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],Qr.prototype,"startField",void 0),c([d({type:ige,json:{write:{enabled:!0,allowNull:!0}}})],Qr.prototype,"timeReference",void 0),c([d({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Qr.prototype,"trackIdField",void 0),c([d({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],Qr.prototype,"useTime",void 0),Qr=hM=c([O("esri.layers.support.TimeInfo")],Qr);const tq=Qr,rge=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const s=r.timeInfo.exportOptions;if(!s)return null;const n=s.timeOffset,o=Lh.fromJSON(s.timeOffsetUnits);return n&&o?new $v({value:n,unit:o}):null}set timeInfo(i){M6(i,this.fieldsIndex),this._set("timeInfo",i)}};return c([d({type:ul,json:{write:!1}})],t.prototype,"timeExtent",void 0),c([d({type:$v})],t.prototype,"timeOffset",void 0),c([xe("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),c([d({value:null,type:tq,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),c([d({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=c([O("esri.layers.mixins.TemporalLayer")],t),t};var pM;let Yl=pM=class extends ue{constructor(e){super(e)}clone(){const{name:e,fields:t,isAscending:i,isUnique:r,description:s}=this;return new pM({name:e,fields:t,isAscending:i,isUnique:r,description:s})}};c([d({constructOnly:!0})],Yl.prototype,"name",void 0),c([d({constructOnly:!0})],Yl.prototype,"fields",void 0),c([d({constructOnly:!0})],Yl.prototype,"isAscending",void 0),c([d({constructOnly:!0})],Yl.prototype,"isUnique",void 0),c([d({constructOnly:!0})],Yl.prototype,"description",void 0),Yl=pM=c([O("esri.layers.support.FeatureIndex")],Yl);let d1=class extends ue{constructor(){super(...arguments),this.type=null}};c([d({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],d1.prototype,"type",void 0),d1=c([O("esri.layers.support.FeatureReduction")],d1);const h1=d1;var fM;let $f=fM=class extends ue{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new fM({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};c([d({type:String,json:{write:!0}})],$f.prototype,"statisticType",void 0),c([d({type:String,json:{write:!0}})],$f.prototype,"onStatisticField",void 0),c([d({type:String,json:{write:!0}})],$f.prototype,"onStatisticValueExpression",void 0),$f=fM=c([O("esri.layers.support.OutStatistic")],$f);const sge=$f;var mM;let o0=mM=class extends ue{constructor(){super(...arguments),this.name=null}clone(){return new mM({name:this.name,outStatistic:this.outStatistic.clone()})}};c([d({type:String,json:{write:!0}})],o0.prototype,"name",void 0),c([d({type:sge,json:{write:!0}})],o0.prototype,"outStatistic",void 0),o0=mM=c([O("esri.layers.support.AggregateField")],o0);const nge=o0,GP="__begin__",HP="__end__",oge=new RegExp(GP,"ig"),age=new RegExp(HP,"ig"),CD=new RegExp("^"+GP,"i"),ED=new RegExp(HP+"$","i"),qS='"',lge=qS+" + ",cge=" + "+qS;function uge(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function dge(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function WP(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=uge(e.labelExpression),t.type="conventional"),t}function hge(e){const t=WP(e);if(!t)return null;switch(t.type){case"conventional":return yM(t.expression);case"arcade":return t.expression}return null}function pge(e){const t=WP(e);if(!t)return null;switch(t.type){case"conventional":return mge(t.expression);case"arcade":return iq(t.expression)}return null}function yM(e){let t;return e?(t=Xa(e,i=>GP+'$feature["'+i+'"]'+HP),t=CD.test(t)?t.replace(CD,""):qS+t,t=ED.test(t)?t.replace(ED,""):t+qS,t=t.replace(oge,lge).replace(age,cge)):t='""',t}const fge=/^\s*\{([^}]+)\}\s*$/i;function mge(e){const t=e.match(fge);return t&&t[1].trim()||null}const yge=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,gge=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,vge=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function iq(e){if(!e)return null;let t=yge.exec(e)||gge.exec(e);return t?t[1]||t[3]:(t=vge.exec(e),t?t[2]:null)}var gM;let nu=gM=class extends ue{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?yM(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=yM(this.value)),e!=null&&(t[i]=e)}clone(){return new gM({expression:this.expression,title:this.title,value:this.value})}};c([d({type:String,json:{write:{writerEnsuresNonNull:!0}}})],nu.prototype,"expression",void 0),c([xe("expression",["expression","value"])],nu.prototype,"readExpression",null),c([$e("expression")],nu.prototype,"writeExpression",null),c([d({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],nu.prototype,"title",void 0),c([d({json:{read:!1,write:!1}})],nu.prototype,"value",void 0),nu=gM=c([O("esri.layers.support.LabelExpressionInfo")],nu);const rq=nu,sq=[252,146,31,255],_ge={type:"esriSMS",style:"esriSMSCircle",size:6,color:sq,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},bge={type:"esriSLS",style:"esriSLSSolid",width:.75,color:sq},wge={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},Sge={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},xge={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Ige={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Tge={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};sd.fromJSON(_ge);Nn.fromJSON(bge);cl.fromJSON(wge);const $ge=gp.fromJSON(Sge),Qke=sd.fromJSON(xge),Xke=Nn.fromJSON(Ige),ePe=cl.fromJSON(Tge);var vM;const Rb=new rt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function nq(e){return!e||e.origin!=="service"&&!oq(e.layer)}function oq(e){return(e==null?void 0:e.type)==="map-image"}function aq(e){var t,i;return!!oq(e)&&!((t=e.capabilities)==null||(i=t.exportMap)==null||!i.supportsArcadeExpressionForLabeling)}function Cge(e){return nq(e)||aq(e.layer)}let Pi=vM=class extends ue{constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=$ge,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const i=function(r,s,n){switch(s){case"=":return r==n;case"<>":return r!=n;case">":return r>n;case">=":return r>=n;case"<":return r<n;case"<=":return r<=n}return!1};try{if(e==null)return!0;const r=e.split(" ");if(r.length===3)return i(t[r[0]],r[1],r[2]);if(r.length===7){const s=i(t[r[0]],r[1],r[2]),n=r[3],o=i(t[r[4]],r[5],r[6]);switch(n){case"AND":return s&&o;case"OR":return s||o}}return!1}catch{console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=dge(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=iq(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(e==null&&this.labelExpression!=null&&nq(r))e=new rq({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(r);s.expression&&(t[i]=s)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return WP(this)}getLabelExpressionArcade(){return hge(this)}getLabelExpressionSingleField(){return pge(this)}hash(){return JSON.stringify(this)}clone(){return new vM({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:K(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:K(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};c([d({type:String,json:{write:!0}})],Pi.prototype,"name",void 0),c([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Pi.prototype,"allowOverrun",void 0),c([d({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],Pi.prototype,"deconflictionStrategy",void 0),c([d({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&aq(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Pi.prototype,"labelExpression",void 0),c([xe("labelExpression")],Pi.prototype,"readLabelExpression",null),c([$e("labelExpression")],Pi.prototype,"writeLabelExpression",null),c([d({type:rq,json:{write:{overridePolicy:(e,t,i)=>Cge(i)?{allowNull:!0}:{enabled:!1}}}})],Pi.prototype,"labelExpressionInfo",void 0),c([$e("labelExpressionInfo")],Pi.prototype,"writeLabelExpressionInfo",null),c([d({type:Rb.apiValues,json:{type:Rb.jsonValues,read:Rb.read,write:Rb.write}})],Pi.prototype,"labelPlacement",void 0),c([d({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Pi.prototype,"labelPosition",void 0),c([d({type:Number})],Pi.prototype,"maxScale",void 0),c([$e("maxScale")],Pi.prototype,"writeMaxScale",null),c([d({type:Number})],Pi.prototype,"minScale",void 0),c([$e("minScale")],Pi.prototype,"writeMinScale",null),c([d({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],Pi.prototype,"repeatLabel",void 0),c([d({type:Number,cast:Nt,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Pi.prototype,"repeatLabelDistance",void 0),c([d({types:Lre,json:{origins:{"web-scene":{types:Rre,write:oD,default:null}},write:oD,default:null}})],Pi.prototype,"symbol",void 0),c([d({type:Boolean,json:{write:!0}})],Pi.prototype,"useCodedValues",void 0),c([d({type:String,json:{write:!0}})],Pi.prototype,"where",void 0),Pi=vM=c([O("esri.layers.support.LabelClass")],Pi);const JP=Pi;var _M;let mn=_M=class extends ue{constructor(e){super(e),this.type="cluster",this.clusterRadius=Nt("80px"),this.clusterMinSize=Nt("12px"),this.clusterMaxSize=Nt("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new _M({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:K(this.labelingInfo),labelsVisible:this.labelsVisible,fields:K(this.fields),popupEnabled:this.popupEnabled,popupTemplate:K(this.popupTemplate)})}};c([d({type:["cluster"],readOnly:!0,json:{write:!0}})],mn.prototype,"type",void 0),c([d({type:Number,cast:e=>e==="auto"?e:Nt(e),json:{write:!0}})],mn.prototype,"clusterRadius",void 0),c([d({type:Number,cast:Nt,json:{write:!0}})],mn.prototype,"clusterMinSize",void 0),c([d({type:Number,cast:Nt,json:{write:!0}})],mn.prototype,"clusterMaxSize",void 0),c([d(YB)],mn.prototype,"popupEnabled",void 0),c([d({type:ly,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],mn.prototype,"popupTemplate",void 0),c([d({types:kre})],mn.prototype,"symbol",void 0),c([d({type:[JP],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],mn.prototype,"labelingInfo",void 0),c([d(KB)],mn.prototype,"labelsVisible",void 0),c([d({type:[nge],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],mn.prototype,"fields",void 0),mn=_M=c([O("esri.layers.support.FeatureReductionCluster")],mn);const AD=mn;var bM;let p1=bM=class extends h1{constructor(e){super(e),this.type="selection"}clone(){return new bM}};c([d({type:["selection"]})],p1.prototype,"type",void 0),p1=bM=c([O("esri.layers.support.FeatureReductionSelection")],p1);const MD=p1,Ege={types:{key:"type",base:h1,typeMap:{selection:MD,cluster:AD}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:{key:"type",base:h1,typeMap:{selection:AD}}},"web-scene":{types:{key:"type",base:h1,typeMap:{selection:MD}}}}}},OD=new rt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let ou=class extends ll(ue){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};c([d({json:{write:!0}})],ou.prototype,"name",void 0),c([d({json:{write:!0}})],ou.prototype,"description",void 0),c([d({json:{read:OD.read,write:OD.write}})],ou.prototype,"drawingTool",void 0),c([d({json:{write:!0}})],ou.prototype,"prototype",void 0),c([d({json:{write:!0}})],ou.prototype,"thumbnail",void 0),ou=c([O("esri.layers.support.FeatureTemplate")],ou);const ZP=ou;let jl=class extends ll(ue){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const i of Object.keys(e))t[i]=aP(e[i]);return t}writeDomains(e,t){const i={};for(const s of Object.keys(e)){var r;e[s]&&(i[s]=(r=e[s])==null?void 0:r.toJSON())}t.domains=i}};c([d({json:{write:!0}})],jl.prototype,"id",void 0),c([d({json:{write:!0}})],jl.prototype,"name",void 0),c([d({json:{write:!0}})],jl.prototype,"domains",void 0),c([xe("domains")],jl.prototype,"readDomains",null),c([$e("domains")],jl.prototype,"writeDomains",null),c([d({type:[ZP],json:{write:!0}})],jl.prototype,"templates",void 0),jl=c([O("esri.layers.support.FeatureType")],jl);const lq=jl;function Age(e){return e.type==="date"||e.type==="esriFieldTypeDate"}function kD(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function PD(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}class Mge{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;const i=[];for(const r of t){const s=r&&r.name;if(s){const n=LD(s);this._fieldsMap.set(s,r),this._fieldsMap.set(n,r),i.push(n),Age(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):ia(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),kD(r)||PD(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)kD(t)||PD(t)||t.nullable||Qte(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){return t!=null?this._fieldsMap.get(t)||this._fieldsMap.get(LD(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const i=this.get(t);if(i)return i.name}}function LD(e){return e.toLowerCase().trim()}const Oge=fe.getLogger("esri.layers.support.fieldProperties");function kge(){return{fields:{type:[hI],value:null},fieldsIndex:{readOnly:!0,get(){return new Mge(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex.has(t)||Oge.error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return gk(this.fieldsIndex,e)}}}}let Cf=class extends ll(ue){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};c([d({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Cf.prototype,"shapeAreaField",void 0),c([d({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Cf.prototype,"shapeLengthField",void 0),c([d({type:String,json:{read:e=>Ese.read(e)||Ase.read(e)}})],Cf.prototype,"units",void 0),Cf=c([O("esri.layers.support.GeometryFieldsInfo")],Cf);const Pge=Cf,Lge=/\[([^\[\]]+)\]/gi;function RD(e,t,i){return e?e.map(r=>{const s=new JP;if(s.read(r,i),s.labelExpression){const n=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;s.labelExpression=s.labelExpression.replace(Lge,(o,a)=>`[${Rge(a,n)}]`)}return s}):null}function Rge(e,t){if(!t)return e;const i=e.toLowerCase();for(let r=0;r<t.length;r++){const s=t[r].name;if(s.toLowerCase()===i)return s}return e}var wM;let Ef=wM=class extends ue{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new ke}clone(){return new wM({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};c([d({type:String,json:{write:!0}})],Ef.prototype,"floorField",void 0),c([d({json:{read:!1,write:!1}})],Ef.prototype,"viewAllMode",void 0),c([d({json:{read:!1,write:!1}})],Ef.prototype,"viewAllLevelIds",void 0),Ef=wM=c([O("esri.layers.support.LayerFloorInfo")],Ef);const Fge=Ef,FD=new rt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),ND=new rt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let eo=class extends ll(ue){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};c([d({json:{read:FD.read,write:FD.write}})],eo.prototype,"cardinality",void 0),c([d({json:{read:!0,write:!0}})],eo.prototype,"composite",void 0),c([d({json:{read:!0,write:!0}})],eo.prototype,"id",void 0),c([d({json:{read:!0,write:!0}})],eo.prototype,"keyField",void 0),c([d({json:{read:!0,write:!0}})],eo.prototype,"keyFieldInRelationshipTable",void 0),c([d({json:{read:!0,write:!0}})],eo.prototype,"name",void 0),c([d({json:{read:!0,write:!0}})],eo.prototype,"relatedTableId",void 0),c([d({json:{read:!0,write:!0}})],eo.prototype,"relationshipTableId",void 0),c([d({json:{read:ND.read,write:ND.write}})],eo.prototype,"role",void 0),eo=c([O("esri.layers.support.Relationship")],eo);const Nge=eo,Jo=[];function Dge(e,t){if(GB(e.url))return!0;const{wkid:i}=t;for(const r of Jo){if(e.version>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}Jo.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102960;t++)e.add(t);return e}]),Jo.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),Jo.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),Jo.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),Jo.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);for(let t=103696;t<=103698;t++)e.add(t);return e}]),Jo.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),Jo.push([10.61,()=>new Set([102497])]),Jo.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),Jo.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),Jo.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);async function jge(e,t,i){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const s=await Ux(r.populateFromStyle());if(Gi(i),s.ok===!1){const n=s.error;t&&t.messages&&t.messages.push(new Es("renderer:style-reference",`Failed to create unique value renderer from style reference: ${n.message}`,{error:n,context:t})),e.clear("renderer",t.origin)}}}const zge=["oid","global-id"],Vge=["oid","global-id","guid"];function Uge({displayField:e,editFieldsInfo:t,fields:i,objectIdField:r,title:s},n){if(!i)return null;const o=Jge({editFieldsInfo:t,fields:i,objectIdField:r},n);if(!o.length)return null;const a=Kge({titleBase:s,fields:i,displayField:e}),l=Yge();return new ly({title:a,content:l,fieldInfos:o})}const Bge=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],qge=(e,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:r})=>r?r.has(e.name):!cq(e.name,t)&&(!i||e.name!==i)&&!(zge.indexOf(e.type)>-1)&&!Bge.some(s=>s.test(e.name));function Gge(e,t){const i=e;return t&&(e=e.filter(r=>t.indexOf(r.type)===-1)),e===i&&(e=e.slice()),e.sort(Hge),e}function Hge(e,t){return e.type==="oid"?-1:t.type==="oid"?1:DD(e)?-1:DD(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function cq(e,t){if(!e||!t)return!1;const{creationDateField:i,creatorField:r,editDateField:s,editorField:n}=t;return[i&&i.toLowerCase(),r&&r.toLowerCase(),s&&s.toLowerCase(),n&&n.toLowerCase()].indexOf(e.toLowerCase())!==-1}function Wge(e,t){return e.editable&&Vge.indexOf(e.type)===-1&&!cq(e.name,t)}function Jge({editFieldsInfo:e,fields:t,objectIdField:i},r){return Gge(t,(r==null?void 0:r.ignoreFieldTypes)||Qge).map(s=>new t_({fieldName:s.name,isEditable:Wge(s,e),label:s.alias,format:Zge(s),visible:qge(s,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:r==null?void 0:r.visibleFieldNames})}))}function Zge(e){switch(e.type){case"small-integer":case"integer":case"single":return new I0({digitSeparator:!0,places:0});case"double":return new I0({digitSeparator:!0,places:2});case"date":return new I0({dateFormat:"long-month-day-year"});default:return null}}function Yge(){return[new Pm,new nv]}function Kge(e){const t=Gte(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i}function DD(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"||void 0}const Qge=["geometry","blob","raster","guid","xml"],k$=new rt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Xge={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},ki="FeatureLayer",jD=fe.getLogger("esri.layers.FeatureLayer");function zD(e){return e&&e instanceof ke}function nt(e,t,i){return!!(e&&e.hasOwnProperty(t)?e[t]:i)}function Fb(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}function e0e(e){var t;const i=e==null||(t=e.supportedSpatialAggregationStatistics)==null?void 0:t.map(r=>r.toLowerCase());return{envelope:!(i==null||!i.includes("envelopeaggregate")),centroid:!(i==null||!i.includes("centroidaggregate")),convexHull:!(i==null||!i.includes("convexhullaggregate"))}}const P$=kge();function L$(e,t,i){const r=!(i==null||!i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let _e=class extends Eye(Iye(Wye(rge(ege(Xye(Bme(qye(Zye(FB(Tye(Rme(ll(yk))))))))))))){constructor(...e){super(...e),this._handles=new Ai,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=Xe.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(ke.ofType(Yl)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=Ha(this._handles)}normalizeCtorArgs(e,t){return typeof e=="string"?k({url:e},t):e}load(e){const t=N(e)?e.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(t).then(r=>this._initLayerProperties(r)));const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(Jv).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const r=await this._fetchFirstLayerId(t);r!=null&&(this.layerId=r)}if(!this.url&&!this._hasMemorySource())throw new B("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this._initLayerProperties(await this.createGraphicsSource(t))}).then(()=>this.finishLoadEditablePortalLayer(e));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){e!=null?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,r){this._writeEditingEnabled(e,t,!0,r)}readEditingInfo(e,t){const{editingInfo:i}=t;return i?{lastEditDate:i.lastEditDate!=null?new Date(i.lastEditDate):null}:null}readIsTable(e,t){return(t=t&&t.layerDefinition||t).type==="Table"||!t.geometryType}writeIsTable(e,t,i,r){r!=null&&r.writeLayerSchema&&Ln(i,e?"Table":"Feature Layer",t)}readMinScale(e,t){return t.effectiveMinScale||e||0}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeOID")return i.name}}get parsedUrl(){const e=this.url?_i(this.url):null;return e!=null&&(this.dynamicDataSource!=null?e.path=Ku(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Ku(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){k3(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){const r=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(r){const s=LB(r,t,i)||void 0;return s||jD.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),s}if(t.defaultSymbol)return t.types&&t.types.length?new NP({defaultSymbol:R$(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(s=>({id:s.id,symbol:R$(s.symbol,s,i)}))}):new RP({symbol:R$(t.defaultSymbol,t,i)})}set source(e){const t=this._get("source");t!==e&&(zD(t)&&this._resetMemorySource(t),zD(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof ke?new wD({layer:this,items:e}):e:null}readSource(e,t){const i=bp.fromJSON(t.featureSet);return new wD({layer:this,items:i&&i.features||[]})}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readTemplates(e,t){const i=t.editFieldsInfo,r=i&&i.creatorField,s=i&&i.editorField;return e=e&&e.map(n=>ZP.fromJSON(n)),this._fixTemplates(e,r),this._fixTemplates(e,s),e}readTitle(e,t){const i=t.layerDefinition&&t.layerDefinition.name||t.name,r=t.title||t.layerDefinition&&t.layerDefinition.title;if(i){const s=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?jme(this.url,i):i;let n=i;if(!n&&this.url){const o=b_(this.url);N(o)&&(n=o.title)}return n?(this.sublayerTitleMode==="item-title-and-service-name"&&s&&s!==n&&(n=s+" - "+n),zP(n)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(s=>s.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,r=i&&i.creatorField,s=i&&i.editorField;return e&&e.map(n=>(n=lq.fromJSON(n),this._fixTemplates(n.templates,r),this._fixTemplates(n.templates,s),n))}set url(e){const t=Vme({layer:this,url:e,nonStandardUrlAllowed:!0,logger:jD});this._set("url",t.url),t.layerId!=null&&this._set("layerId",t.layerId)}writeUrl(e,t,i,r){Ume(this,e,null,t,r)}readVersion(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}readVisible(e,t){return t.layerDefinition&&t.layerDefinition.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}addAttachment(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("addAttachment"in this.source))throw new B(ki,"Layer source does not support addAttachment capability");return this.source.addAttachment(e,t)})}updateAttachment(e,t,i){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("updateAttachment"in this.source))throw new B(ki,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(e,t,i)})}async applyEdits(e,t){const i=await se(()=>import("./editingSupport.4e4b7f15.js"),["assets/editingSupport.4e4b7f15.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]);return await this.load(),i.applyEdits(this,this.source,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return Uge(this,e)}async createGraphicsSource(e){if(this._hasMemorySource())return this.source.load({signal:e});const{default:t}=await Mz(se(()=>import("./FeatureLayerSource.3eabe6b2.js"),["assets/FeatureLayerSource.3eabe6b2.js","assets/clientSideDefaults.9630694d.js","assets/QueryEngineCapabilities.650d7541.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=new Ss,t=this.get("capabilities.data"),i=this.get("capabilities.query");e.dynamicDataSource=this.dynamicDataSource,e.historicMoment=this.historicMoment,e.gdbVersion=this.gdbVersion,e.returnGeometry=!0,i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference),t&&(t.supportsZ&&this.returnZ!=null&&(e.returnZ=this.returnZ),t.supportsM&&this.returnM!=null&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:r,timeExtent:s}=this;return e.timeExtent=r!=null&&s!=null?s.offset(-r.value,r.unit):s||null,e.multipatchOption=this.geometryType==="multipatch"?"xyFootprint":null,e}deleteAttachments(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("deleteAttachments"in this.source))throw new B(ki,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(e,t)})}fetchRecomputedExtents(e){return this.load({signal:e==null?void 0:e.signal}).then(()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(e);throw new B(ki,"Layer source does not support fetchUpdates capability")})}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const r=e.attributes?e.attributes[t]:void 0;if(r==null)return null;let s=null;return i.some(n=>{const{id:o}=n;return o!=null&&(o.toString()===r.toString()&&(s=n),!!s)}),s}getFieldDomain(e,t){const i=t&&t.feature,r=this.getFeatureType(i);if(r){const s=r.domains&&r.domains[e];if(s&&s.type!=="inherited")return s}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}queryAttachments(e,t){return e=gv.from(e),this.load().then(()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new B(ki,"this layer doesn't support attachments");const{attachmentTypes:i,objectIds:r,globalIds:s,num:n,size:o,start:a,where:l}=e;if(!this.get("capabilities.operations.supportsQueryAttachments")){const u=r&&r.length>1,h=i&&i.length,f=s&&s.length,y=o&&o.length;if(u||h||f||y||n||a||l)throw new B(ki,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(r&&r.length||l))throw new B(ki,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in this.source))throw new B(ki,"Layer source does not support queryAttachments capability",e);return this.source.queryAttachments(e)})}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(Ss.from(e)||this.createQuery(),t)).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i})}queryObjectIds(e,t){return this.load().then(()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(Ss.from(e)||this.createQuery(),t);throw new B(ki,"Layer source does not support queryObjectIds capability")})}queryFeatureCount(e,t){return this.load().then(()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(Ss.from(e)||this.createQuery(),t);throw new B(ki,"Layer source does not support queryFeatureCount capability")})}queryExtent(e,t){return this.load().then(()=>{if(this.source.queryExtent)return this.source.queryExtent(Ss.from(e)||this.createQuery(),t);throw new B(ki,"Layer source does not support queryExtent capability")})}queryRelatedFeatures(e,t){return this.load().then(()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(cp.from(e),t);throw new B(ki,"Layer source does not support queryRelatedFeatures capability")})}queryRelatedFeaturesCount(e,t){return this.load().then(()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(cp.from(e),t);throw new B(ki,"Layer source does not support queryRelatedFeaturesCount capability")})}queryTopFeatures(e,t){return this.load().then(()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(Uu.from(e),t).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i});throw new B(ki,"Layer source does not support queryTopFeatures capability")})}queryTopObjectIds(e,t){return this.load().then(()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(Uu.from(e),t);throw new B(ki,"Layer source does not support queryTopObjectIds capability")})}queryTopFeaturesExtent(e,t){return this.load().then(()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(Uu.from(e),t);throw new B(ki,"Layer source does not support queryTopExtents capability")})}queryTopFeatureCount(e,t){return this.load().then(()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(Uu.from(e),t);throw new B(ki,"Layer source does not support queryFeatureCount capability")})}read(e,t){const i=e.featureCollection;if(i){const r=i.layers;r&&r.length===1&&(super.read(r[0],t),i.showLegend!=null&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(e,t){var i,r;const s=(t=be(k({},t),{writeLayerSchema:(i=(r=t)==null?void 0:r.writeLayerSchema)!=null?i:this._hasMemorySource()})).origin,n=t.layerContainerType,o=t.messages;if(this.isTable){if(s==="web-scene"||s==="web-map"&&n!=="tables")return o&&o.push(new B("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Table source cannot be written to web scenes and web maps`,{layer:this})),null;if(this._hasMemorySource())return o&&o.push(new B("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using an in-memory Table source cannot be written to web scenes and web maps`,{layer:this})),null}else if(this.loaded&&s==="web-map"&&n==="tables")return o&&o.push(new B("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a non-table source cannot be written to tables in web maps`,{layer:this})),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new B(ki,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source.type==="memory"||Dge(this,e))}_readEditingEnabled(e,t,i){var r;let s=(r=e.layerDefinition)==null?void 0:r.capabilities;return s?this._hasEditingCapability(s):(s=e.capabilities,t&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&s?this._hasEditingCapability(s):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,i,r){if(!e){var s,n;const o=(s=this.capabilities)!=null&&(n=s.operations)!=null&&n.supportsSync?"Query,Sync":"Query";Ln("layerDefinition.capabilities",o,t),!i||r!=null&&r.writeLayerSchema||(t.capabilities=o)}}_checkAttachmentSupport(e){const{attributes:t}=e,{objectIdField:i}=this;return this.get("capabilities.data.supportsAttachment")?e?t?t[i]?void 0:Promise.reject(new B(ki,`feature is missing the identifying attribute ${i}`)):Promise.reject(new B(ki,"'attributes' are required on a feature to query attachments")):Promise.reject(new B(ki,"A feature is required to add/delete/update attachments")):Promise.reject(new B(ki,"this layer doesn't support attachments"))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return ft(this.url,{query:be(k({f:"json"},this.customParameters),{token:this.apiKey}),responseType:"json",signal:e}).then(t=>{const i=t.data;if(i)return Array.isArray(i.layers)&&i.layers.length>0?i.layers[0].id:Array.isArray(i.tables)&&i.tables.length>0?i.tables[0].id:void 0})}async _initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),k3(this.renderer,this.fieldsIndex),M6(this.timeInfo,this.fieldsIndex),jge(this,{origin:"service"})}async hasDataChanged(){var e;if((e=this.source)!=null&&e.refresh)try{var t;const{dataChanged:i,updates:r}=await((t=this.source)==null?void 0:t.refresh());if(N(r)&&(this.sourceJSON=k(k({},this.sourceJSON),r),this.read(r,{origin:"service",url:this.parsedUrl})),i)return!0}catch{}if(this.definitionExpression)try{return(await gme(this.definitionExpression,this.fieldsIndex)).hasDateFunctions}catch{}return!1}_verifyFields(){const e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||this.fields&&this.fields.some(function(t){return t.type==="geometry"})||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(i=>{const r=i.prototype&&i.prototype.attributes;r&&t&&delete r[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new B("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new B("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAttachmentCapabilities(e){const t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach(i=>{const r=Xge[i.name];r&&(t[r]=!!i.isEnabled)}),t}_readDataCapabilities(e){return{isVersioned:nt(e,"isDataVersioned",!1),supportsAttachment:nt(e,"hasAttachments",!1),supportsM:nt(e,"hasM",!1),supportsZ:nt(e,"hasZ",!1)}}_readMetadataCapabilities(e){return{supportsAdvancedFieldProperties:nt(e,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(e,t){const i=e?e.toLowerCase().split(",").map(l=>l.trim()):[],r=i.includes("editing")&&!t.datesInUnknownTimezone;let s=r&&i.includes("create"),n=r&&i.includes("delete"),o=r&&i.includes("update");const a=i.includes("changetracking");return r&&!(s||n||o)&&(s=n=o=!0),{supportsCalculate:nt(t,"supportsCalculate",!1),supportsTruncate:nt(t,"supportsTruncate",!1),supportsValidateSql:nt(t,"supportsValidateSql",!1),supportsAdd:s,supportsDelete:n,supportsEditing:r,supportsChangeTracking:a,supportsQuery:i.includes("query"),supportsQueryAttachments:nt(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:nt(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:o,supportsExceedsLimitStatistics:nt(t,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(e){var t;const i=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,s=e.archivingInfo,n=(t=this.url)==null?void 0:t.includes("MapServer"),o=!re("mapserver-pbf-enabled")&&n&&this.version<10.81,a=GB(this.url),l=(e.supportedQueryFormats||"").split(",").reduce((u,h)=>{const f=h.toLowerCase().trim();return f&&u.add(f),u},new Set);return{supportsStatistics:nt(i,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:nt(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:nt(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:e0e(i),supportsCentroid:nt(i,"supportsReturningGeometryCentroid",!1),supportsDistance:nt(i,"supportsQueryWithDistance",!1),supportsDistinct:nt(i,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:nt(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:nt(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:nt(i,"supportsHavingClause",!1),supportsOrderBy:nt(i,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:nt(i,"supportsPagination",!1),supportsQuantization:nt(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:nt(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:nt(e,"supportsReturningQueryGeometry",!1),supportsResultType:nt(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:nt(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:nt(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:nt(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:nt(i,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:nt(r,"allowOthersToQuery",!0),supportsHistoricMoment:nt(s,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!o&&l.has("pbf"),supportsDisjointSpatialRelationship:nt(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:nt(i,"supportsQueryWithCacheHint",!1),supportsDefaultSpatialReference:nt(i,"supportsDefaultSR",!1),supportsCompactGeometry:a,maxRecordCountFactor:Fb(e,"maxRecordCountFactor",void 0),maxRecordCount:Fb(e,"maxRecordCount",void 0),standardMaxRecordCount:Fb(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:Fb(e,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(e){const t=e.advancedQueryCapabilities,i=nt(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:nt(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i}}_readEditingCapabilities(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:nt(e,"allowGeometryUpdates",!0),supportsGlobalId:nt(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:nt(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:nt(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:nt(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:nt(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:nt(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:nt(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:nt(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:nt(t,"allowOthersToUpdate",!0)}}};c([d({readOnly:!0,json:{read:!1}})],_e.prototype,"capabilities",void 0),c([xe("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],_e.prototype,"readCapabilities",null),c([d({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],_e.prototype,"charts",void 0),c([d({readOnly:!0})],_e.prototype,"createQueryVersion",null),c([d({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],_e.prototype,"copyright",void 0),c([d({type:Boolean})],_e.prototype,"datesInUnknownTimezone",void 0),c([d({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],_e.prototype,"displayField",void 0),c([d({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],_e.prototype,"definitionExpression",void 0),c([d({types:zh,readOnly:!0})],_e.prototype,"defaultSymbol",void 0),c([d({type:$n})],_e.prototype,"dynamicDataSource",void 0),c([d({readOnly:!0})],_e.prototype,"editFieldsInfo",void 0),c([d({type:Boolean})],_e.prototype,"editingEnabled",null),c([xe(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],_e.prototype,"readEditingEnabled",null),c([xe("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],_e.prototype,"readEditingEnabledFromWebMap",null),c([$e(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],_e.prototype,"writeEditingEnabled",null),c([$e("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],_e.prototype,"writeEditingEnabledToWebMap",null),c([d({readOnly:!0})],_e.prototype,"editingInfo",void 0),c([xe("editingInfo")],_e.prototype,"readEditingInfo",null),c([d(Dye)],_e.prototype,"elevationInfo",void 0),c([d(Ege)],_e.prototype,"featureReduction",void 0),c([d(be(k({},P$.fields),{json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:L$}}}}}))],_e.prototype,"fields",void 0),c([d(P$.fieldsIndex)],_e.prototype,"fieldsIndex",void 0),c([d({type:Fge,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],_e.prototype,"floorInfo",void 0),c([d({type:Ame,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],_e.prototype,"formTemplate",void 0),c([d({type:Et,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],_e.prototype,"fullExtent",void 0),c([d()],_e.prototype,"gdbVersion",void 0),c([d({readOnly:!0,type:Pge,json:{read:{source:"geometryProperties"}}})],_e.prototype,"geometryFieldsInfo",void 0),c([d({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:k$.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:L$,writer(e,t,i){const r=e?k$.toJSON(e):null;r&&Ln(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:k$.read}}})],_e.prototype,"geometryType",void 0),c([d({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],_e.prototype,"hasM",void 0),c([d({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],_e.prototype,"hasZ",void 0),c([d({readOnly:!0,type:SI})],_e.prototype,"heightModelInfo",void 0),c([d({type:Date})],_e.prototype,"historicMoment",void 0),c([d(Vye)],_e.prototype,"id",void 0),c([d({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],_e.prototype,"infoFor3D",void 0),c([d({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],_e.prototype,"isTable",void 0),c([xe("service","isTable",["type","geometryType"]),xe("isTable",["layerDefinition.type","layerDefinition.geometryType"])],_e.prototype,"readIsTable",null),c([$e("web-map","isTable")],_e.prototype,"writeIsTable",null),c([d(KB)],_e.prototype,"labelsVisible",void 0),c([d({type:[JP],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:RD},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:RD},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],_e.prototype,"labelingInfo",void 0),c([d(jye)],_e.prototype,"opacity",void 0),c([d({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],_e.prototype,"layerId",void 0),c([d(Nye)],_e.prototype,"legendEnabled",void 0),c([d({type:["show","hide"]})],_e.prototype,"listMode",void 0),c([d(Uye)],_e.prototype,"minScale",void 0),c([xe("service","minScale",["minScale","effectiveMinScale"])],_e.prototype,"readMinScale",null),c([d(Bye)],_e.prototype,"maxScale",void 0),c([xe("service","maxScale",["maxScale","effectiveMaxScale"])],_e.prototype,"readMaxScale",null),c([d({type:String})],_e.prototype,"globalIdField",void 0),c([xe("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),xe("service","globalIdField",["globalIdField","fields"])],_e.prototype,"readGlobalIdFieldFromService",null),c([d({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:L$}}}}})],_e.prototype,"objectIdField",void 0),c([xe("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),xe("service","objectIdField",["objectIdField","fields"])],_e.prototype,"readObjectIdFieldFromService",null),c([d({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],_e.prototype,"operationalLayerType",void 0),c([d(P$.outFields)],_e.prototype,"outFields",void 0),c([d({readOnly:!0})],_e.prototype,"parsedUrl",null),c([d({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],_e.prototype,"path",void 0),c([d(YB)],_e.prototype,"popupEnabled",void 0),c([d({type:ly,json:{name:"popupInfo",write:!0}})],_e.prototype,"popupTemplate",void 0),c([d({readOnly:!0})],_e.prototype,"defaultPopupTemplate",null),c([d({type:[Nge],readOnly:!0})],_e.prototype,"relationships",void 0),c([d({types:PB,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:pme,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],_e.prototype,"renderer",null),c([xe("service","renderer",["drawingInfo.renderer","defaultSymbol"]),xe("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],_e.prototype,"readRenderer",null),c([d()],_e.prototype,"sourceJSON",void 0),c([d({type:Boolean})],_e.prototype,"returnM",void 0),c([d({type:Boolean})],_e.prototype,"returnZ",void 0),c([d(Rye)],_e.prototype,"screenSizePerspectiveEnabled",void 0),c([d({clonable:!1})],_e.prototype,"source",null),c([gt("source")],_e.prototype,"castSource",null),c([xe("portal-item","source",["featureSet"]),xe("web-map","source",["featureSet"])],_e.prototype,"readSource",null),c([d({readOnly:!0})],_e.prototype,"serviceDefinitionExpression",void 0),c([xe("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],_e.prototype,"readServiceDefinitionExpression",null),c([d({type:Xe,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],_e.prototype,"spatialReference",void 0),c([d({type:Number})],_e.prototype,"subtypeCode",void 0),c([d({type:[ZP]})],_e.prototype,"templates",void 0),c([xe("templates",["editFieldsInfo","creatorField","editorField","templates"])],_e.prototype,"readTemplates",null),c([d({type:tq})],_e.prototype,"timeInfo",void 0),c([d()],_e.prototype,"title",void 0),c([xe("service","title",["name"]),xe("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],_e.prototype,"readTitle",null),c([xe("web-map","title",["layerDefinition.name","title"])],_e.prototype,"readTitleFromWebMap",null),c([d({type:String})],_e.prototype,"sublayerTitleMode",void 0),c([d({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],_e.prototype,"trackIdField",void 0),c([d({json:{read:!1}})],_e.prototype,"type",void 0),c([d({type:String})],_e.prototype,"typeIdField",void 0),c([xe("service","typeIdField"),xe("typeIdField",["layerDefinition.typeIdField"])],_e.prototype,"readTypeIdField",null),c([d({type:[lq]})],_e.prototype,"types",void 0),c([xe("service","types",["types"]),xe("types",["layerDefinition.types"])],_e.prototype,"readTypes",null),c([d({readOnly:!0,json:{write:!1}})],_e.prototype,"serverGens",void 0),c([d({type:ke.ofType(Yl),readOnly:!0})],_e.prototype,"indexes",void 0),c([d(Fye)],_e.prototype,"url",null),c([$e("url")],_e.prototype,"writeUrl",null),c([d({readOnly:!0})],_e.prototype,"userIsAdmin",void 0),c([d({json:{origins:{service:{read:!0}},read:!1}})],_e.prototype,"version",void 0),c([xe("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],_e.prototype,"readVersion",null),c([d({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],_e.prototype,"visible",void 0),c([xe("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],_e.prototype,"readVisible",null),_e=c([O("esri.layers.FeatureLayer")],_e);const R$=ty({types:S8}),Fr=_e;var tPe=Object.freeze(Object.defineProperty({__proto__:null,default:Fr},Symbol.toStringTag,{value:"Module"}));const t0e=["$datastore","$map","$layer","$aggregatedfeatures"],i0e="esri.widgets.Feature.support.arcadeFeatureUtils",r0e=fe.getLogger(i0e);function s0e(e){return typeof e=="string"?d_(rP(e)):Array.isArray(e)?n0e(e):(e==null?void 0:e.declaredClass)==="esri.arcade.Dictionary"?o0e(e):e}function n0e(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?d_(rP(t)):t}</li>`).join("")}</ul>`}function o0e(e){return`<table class="esri-widget__table">${e.keys().map(t=>{const i=e.field(t);return`<tr><th>${t}</th><td>${typeof i=="string"?d_(rP(i)):i}</td></tr>`}).join("")}</table>`}function a0e({aggregatedFeatures:e,arcadeUtils:t,featureSetVars:i,context:r,viewInfo:s,map:n,graphic:o,interceptor:a}){i.forEach(l=>{const u=l.toLowerCase(),h={map:n,spatialReference:s.sr,interceptor:a};if(u==="$map"&&(r.vars[u]=t.convertMapToFeatureSetCollection(h)),u==="$layer"&&(r.vars[u]=t.convertFeatureLayerToFeatureSet({layer:o.sourceLayer,spatialReference:s.sr,interceptor:a})),u==="$datastore"&&(r.vars[u]=t.convertServiceUrlToWorkspace({url:o.sourceLayer.url,spatialReference:s.sr,interceptor:a})),u==="$aggregatedfeatures"){const f=o.layer,{fields:y,objectIdField:g,geometryType:b,spatialReference:w,displayField:x}=f,T=new Fr(be(k({fields:y,objectIdField:g,geometryType:b,spatialReference:w,displayField:x},f.type==="feature"?{templates:f.templates,typeIdField:f.typeIdField,types:f.types}:null),{source:e}));r.vars[u]=t.convertFeatureLayerToFeatureSet({layer:T,spatialReference:s.sr,interceptor:a})}})}function uq(){return se(()=>import("./arcadeUtils.5397352e.js").then(function(e){return e.q}),["assets/arcadeUtils.5397352e.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css"])}async function l0e({graphic:e,view:t}){const{isAggregate:i,layer:r}=e;if(!i||!r||(t==null?void 0:t.type)!=="2d")return[];const s=await t.whenLayerView(r);if(!s.createQuery||!s.queryFeatures)return[];const n=s.createQuery();n.aggregateIds=[e.getObjectId()];const{features:o}=await s.queryFeatures(n);return o}async function dq({expressionInfo:e,arcadeUtils:t,interceptor:i,spatialReference:r,map:s,graphic:n,view:o}){if(!e||!e.expression)return null;const a=t.createSyntaxTree(e.expression),l=t0e.filter(g=>t.hasVariable(a,g)),[u]=await Az([l0e({graphic:n,view:o}),t.loadScriptDependencies(a,!0,l)]),h=t.getViewInfo({spatialReference:r}),f=t.createExecContext(n,h);f.interceptor=i,f.useAsync=!0,a0e({aggregatedFeatures:u,arcadeUtils:t,featureSetVars:l,context:f,viewInfo:h,map:s,graphic:n,interceptor:i});const y=t.createFunction(a,f);return t.executeAsyncFunction(y,f).catch(g=>r0e.error("arcade-execution-error",{error:g,graphic:n,expressionInfo:e}))}async function c0e({expressionInfos:e,spatialReference:t,graphic:i,interceptor:r,map:s,view:n}){if(!e||!e.length)return{};const o=await uq(),a={};for(const h of e)a[`expression/${h.name}`]=dq({expressionInfo:h,arcadeUtils:o,interceptor:r,spatialReference:t,map:s,graphic:i,view:n});const l=await mi(a),u={};for(const h in l)u[h]=s0e(l[h].value);return u}const u0e=1;let yn=class extends Xs(Ee){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{var t,i;const r=(t=this.contentElement)==null?void 0:t.type;(i=this.contentElementViewModel)==null||i.destroy();const s=r==="fields"?new cI:r==="media"?new Ph:r==="text"?new MS:null;this._set("contentElementViewModel",s)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=Jk(this._compile,u0e,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:i,interceptor:r,spatialReference:s,map:n,view:o,_abortController:a}=this;if(!(t&&i&&s&&n))return void this._set("contentElement",null);const l=await uq();if(a!==this._abortController)return;const u=await dq({arcadeUtils:l,expressionInfo:t,graphic:i,interceptor:r,map:n,spatialReference:s,view:o});if(!u||u.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const h=await EP(u,a.signal),f=h==null?void 0:h.type,y=f==="media"?lv.fromJSON(h):f==="text"?Lm.fromJSON(h):f==="fields"?Pm.fromJSON(h):null;this._set("contentElement",y)},this.handles.add([Pt(this,["expressionInfo","graphic","map","spatialReference","view"],this._compileThrottled),Pt(this,"contentElement",this._createVM)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:i}=this;return e?"loading":t||i?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}};c([d()],yn.prototype,"_abortController",void 0),c([d({type:R6})],yn.prototype,"expressionInfo",void 0),c([d({type:xr})],yn.prototype,"graphic",void 0),c([d({readOnly:!0})],yn.prototype,"contentElement",void 0),c([d({readOnly:!0})],yn.prototype,"contentElementViewModel",void 0),c([d()],yn.prototype,"interceptor",void 0),c([d()],yn.prototype,"spatialReference",null),c([d({readOnly:!0})],yn.prototype,"state",null),c([d()],yn.prototype,"map",null),c([d()],yn.prototype,"view",void 0),yn=c([O("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],yn);const YP=yn,Nb={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let f1=class extends Yt{constructor(e,t){super(e,t),this.viewModel=new YP}initialize(){Pt(this,"viewModel.contentElementViewModel",()=>this._setupExpressionWidget())}destroy(){this._destroyContentWidget()}renderLoading(){return $("div",{key:"loading-container",class:Nb.loadingSpinnerContainer},$("span",{class:this.classes(Nb.iconLoading,Nb.spinner)}))}render(){var e;const{state:t}=this.viewModel;return $("div",{class:Nb.base},t==="loading"?this.renderLoading():t==="disabled"?null:(e=this._contentWidget)==null?void 0:e.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,i=t==null?void 0:t.type;this._destroyContentWidget();const r=e?i==="fields"?new y9({viewModel:e}):i==="media"?new i7({viewModel:e}):i==="text"?new Gw({viewModel:e}):null:null;this._contentWidget=r,this.scheduleRender()}};c([d({type:YP})],f1.prototype,"viewModel",void 0),f1=c([O("esri.widgets.Feature.FeatureExpression")],f1);const d0e=f1;class h0e{constructor(t,i){this.preLayerQueryCallback=t,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}}var m1;const p0e=1,VD="content-view-models",hq="esri.widgets.FeatureViewModel",f0e=fe.getLogger(hq),UD={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let vi=m1=class extends Ee{constructor(e){super(e),this._handles=new Ai,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=Jk(this._graphicChanged,p0e,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities=k({},UD),this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:i}=this;return t.type==="attachments"&&i.attachmentsContent||t.type==="custom"&&i.customContent||t.type==="fields"&&i.fieldsContent||t.type==="media"&&i.mediaContent||t.type==="text"&&i.textContent||t.type==="expression"&&i.expressionContent},this._handles.add(Pt(this,["graphic","_effectivePopupTemplate","abilities"],()=>this.graphicChangedThrottled()))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return N(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return rce(VF(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return r9(this.graphic)}castAbilities(e){return k(k({},UD),e)}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null)}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get map(){return this.get("view.map")||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(e,t){const i=this.contentViewModels[e];i instanceof Ph&&i.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof Ph&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof Ph&&t.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(i){_o(i)||(this._error=i,f0e.error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,i)=>this._compileContentElement(t,i)):typeof e=="string"?this._compileText(new Lm({text:e}),0).text:e}_destroyContentViewModels(){var e;(e=this._handles)==null||e.remove(VD),this.contentViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("contentViewModels",[])}_setExpressionContentVM(e,t){const{formattedAttributes:i}=this,{contentElement:r,contentElementViewModel:s}=e,n=r==null?void 0:r.type;s&&n&&(n==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),s.set(this._createFieldsVMParams(r,t))),n==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),s.set(this._createMediaVMParams(r,t))),n==="text"&&s.set(this._createTextVMParams(r)))}_compileExpression(e,t){const{expressionInfo:i}=e,{graphic:r,map:s,spatialReference:n,view:o}=this,a=new YP({expressionInfo:i,graphic:r,interceptor:m1.interceptor,map:s,spatialReference:n,view:o});return this.contentViewModels[t]=a,this._handles.add(Pt(a,"contentElementViewModel",()=>this._setExpressionContentVM(a,t)),VD),e}_compileAttachments(e,t){const{graphic:i}=this,{description:r,title:s}=e;return this.contentViewModels[t]=new nP(k({graphic:i},this._compileTitleAndDesc({title:s,description:r}))),e}_compileCustom(e,t){const{graphic:i}=this,{creator:r,destroyer:s}=e;return this.contentViewModels[t]=new MS({graphic:i,creator:r,destroyer:s}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:s,formattedAttributes:n,_expressionAttributes:o}=this,{attributes:a}=s,l=n.global;return{title:Oh({attributes:a,fieldInfoMap:i,globalAttributes:l,expressionAttributes:o,layer:r,text:e}),description:Oh({attributes:a,fieldInfoMap:i,globalAttributes:l,expressionAttributes:o,layer:r,text:t})}}_createFieldsVMParams(e,t){const{_effectivePopupTemplate:i,formattedAttributes:r}=this,s=k(k({},r.global),r.content[t]),n=(e==null?void 0:e.fieldInfos)||(i==null?void 0:i.fieldInfos),o=n==null?void 0:n.filter(({fieldName:h})=>n9(h)||ic(h)||s.hasOwnProperty(h)),a=i==null?void 0:i.expressionInfos,{description:l,title:u}=e;return k({attributes:s,expressionInfos:a,fieldInfos:o},this._compileTitleAndDesc({title:u,description:l}))}_compileFields(e,t){const i=e.clone(),r=new cI(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=r,i.fieldInfos=r.formattedFieldInfos.slice(0),i}_createMediaVMParams(e,t){const{abilities:i,graphic:r,_fieldInfoMap:s,formattedAttributes:n,_effectivePopupTemplate:o,relatedInfos:a,_sourceLayer:l,_expressionAttributes:u}=this,{attributes:h}=r,{description:f,mediaInfos:y,title:g}=e;return k({abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:h,layer:l,fieldInfoMap:s,formattedAttributes:k(k({},n.global),n.content[t]),expressionAttributes:u,mediaInfos:y,popupTemplate:o,relatedInfos:a},this._compileTitleAndDesc({title:g,description:f}))}_compileMedia(e,t){const i=e.clone(),r=new Ph(this._createMediaVMParams(e,t));return i.mediaInfos=r.formattedMediaInfos.slice(0),this.contentViewModels[t]=r,i}_createTextVMParams(e){const{graphic:t,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:s}=this;if(e&&e.text){const{attributes:n}=t,o=this.formattedAttributes.global;e.text=Oh({attributes:n,fieldInfoMap:i,globalAttributes:o,expressionAttributes:s,layer:r,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const i=e.clone();return this.contentViewModels[t]=new MS(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:i}=this;if(!e)return;const{lastEditInfoEnabled:r}=e,s=t==null?void 0:t.editFieldsInfo;return r&&s?ice(s,i.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:i,graphic:r,_expressionAttributes:s}=this,{attributes:n}=r,o=this.formattedAttributes.global;return Oh({attributes:n,fieldInfoMap:t,globalAttributes:o,expressionAttributes:s,layer:i,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.title;return ES(i,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.content;return ES(i,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:i,graphic:r,_effectivePopupTemplate:s,spatialReference:n,map:o,view:a}=this,{content:{value:l},title:{value:u}}=await mi({content:this._getContent(),title:this._getTitle()});if(t!==this._featureAbortController||!r)return;await ace({graphic:r,popupTemplate:s,layer:i,spatialReference:n},e);const{expressionAttributes:{value:h}}=await mi({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:c0e({expressionInfos:s==null?void 0:s.expressionInfos,spatialReference:n,graphic:r,map:o,interceptor:m1.interceptor,view:a})});t===this._featureAbortController&&r&&(this._expressionAttributes=h,this._graphicExpressionAttributes=k(k({},r.attributes),h),this._set("formattedAttributes",this._createFormattedAttributes(l)),this._set("title",this._compileTitle(u)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(l)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:s,relatedInfos:n,_sourceLayer:o,_fieldInfoMap:a,_graphicExpressionAttributes:l}=this;i.content[t]=QT({fieldInfos:r==null?void 0:r.fieldInfos,graphic:s,attributes:k(k({},l),e.attributes),layer:o,fieldInfoMap:a,relatedInfos:n})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){if(e.fieldInfos){const{graphic:r,relatedInfos:s,_sourceLayer:n,_fieldInfoMap:o,_graphicExpressionAttributes:a}=this;i.content[t]=QT({fieldInfos:e.fieldInfos,graphic:r,attributes:k(k({},a),e.attributes),layer:n,fieldInfoMap:o,relatedInfos:s})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:i,relatedInfos:r,_sourceLayer:s,_fieldInfoMap:n,_graphicExpressionAttributes:o}=this,a=t==null?void 0:t.fieldInfos,l={global:QT({fieldInfos:a,graphic:i,attributes:o,layer:s,fieldInfoMap:n,relatedInfos:r}),content:[]};return Array.isArray(e)&&e.forEach((u,h)=>{u.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:u,contentElementIndex:h,formattedAttributes:l}),u.type==="media"&&this._createMediaFormattedAttributes({contentElement:u,contentElementIndex:h,formattedAttributes:l})}),l}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(t,VF(i),e)}async _queryRelatedInfos(e,t,i){const{relatedInfos:r,_sourceLayer:s}=this;r.clear();const n=N(s.associatedLayer)?await s.associatedLayer.load(i):s;if(!n)return;const o=t.filter(u=>u&&ic(u.fieldName));if(!o||!o.length)return;t.forEach(u=>this._configureRelatedInfo(u,n));const a=await yde({relatedInfos:r,layer:n},i);Object.keys(a).forEach(u=>{var h;const f=r.get(u.toString()),y=(h=a[u])==null?void 0:h.value;f&&y&&(f.layerInfo=y.data)});const l=await gde({graphic:e,relatedInfos:r,layer:n},i);Object.keys(l).forEach(u=>{var h;dde((h=l[u])==null?void 0:h.value,r.get(u.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:i}=this,r=Wg(e.fieldName);if(!r)return;const{layerId:s,fieldName:n}=r;if(!s)return;const o=i.get(s.toString())||ude(s,t);o&&(vde({relatedInfo:o,fieldName:n,fieldInfo:e}),this.relatedInfos.set(s,o))}};vi.interceptor=new h0e(uce,dce),c([d()],vi.prototype,"_error",void 0),c([d()],vi.prototype,"_featureAbortController",void 0),c([d({readOnly:!0})],vi.prototype,"_effectivePopupTemplate",null),c([d({readOnly:!0})],vi.prototype,"_fieldInfoMap",null),c([d({readOnly:!0})],vi.prototype,"_sourceLayer",null),c([d()],vi.prototype,"abilities",void 0),c([gt("abilities")],vi.prototype,"castAbilities",null),c([d({readOnly:!0})],vi.prototype,"content",void 0),c([d({readOnly:!0})],vi.prototype,"contentViewModels",void 0),c([d({type:Boolean})],vi.prototype,"defaultPopupTemplateEnabled",void 0),c([d({readOnly:!0})],vi.prototype,"state",null),c([d({readOnly:!0})],vi.prototype,"formattedAttributes",void 0),c([d({type:xr,value:null})],vi.prototype,"graphic",null),c([d({readOnly:!0})],vi.prototype,"lastEditInfo",void 0),c([d({readOnly:!0})],vi.prototype,"relatedInfos",void 0),c([d()],vi.prototype,"spatialReference",null),c([d({readOnly:!0})],vi.prototype,"title",void 0),c([d()],vi.prototype,"map",null),c([d({readOnly:!0})],vi.prototype,"waitingForContent",null),c([d()],vi.prototype,"view",void 0),vi=m1=c([O(hq)],vi);const KP=vi,pq=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=i=>vv(i)&&!i.destroyed?$("div",{key:i},i.render()):i instanceof HTMLElement?$("div",{key:i,bind:i,afterCreate:this._attachToNode}):m9(i)?$("div",{key:i,bind:i.domNode,afterCreate:this._attachToNode}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return t=c([O("esri.widgets.Feature.ContentMixin")],t),t},Ar={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},BD={title:!0,content:!0,lastEditedInfo:!0};let Or=class extends pq(Yt){constructor(e,t){super(e,t),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements=k({},BD),this.map=null,this.view=null,this.viewModel=new KP}initialize(){this.own(Pt(this,"viewModel.contentViewModels",()=>this._setupContentWidgets()))}loadDependencies(){return se(()=>import("./calcite-notice.a9f87826.js"),["assets/calcite-notice.a9f87826.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])}destroy(){this._destroyContentWidgets()}castVisibleElements(e){return k(k({},BD),e)}render(){const{state:e}=this.viewModel,t=$("div",{class:Ar.container,key:"container"},this.renderTitle(),e==="error"?this.renderError():e==="loading"?this.renderLoading():this.renderContentContainer());return $("div",{class:this.classes(Ar.base,Ar.esriWidget)},t)}setActiveMedia(e,t){this.viewModel.setActiveMedia(e,t)}nextMedia(e){this.viewModel.nextMedia(e)}previousMedia(e){this.viewModel.previousMedia(e)}renderError(){const{messagesCommon:e,messages:t,visibleElements:i}=this;return $("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},i.title?$("div",{key:"error-title",slot:"title"},e.errorMessage):null,$("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return $("div",{key:"loading-container",class:Ar.loadingSpinnerContainer},$("span",{class:this.classes(Ar.iconLoading,Ar.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?$("div",{class:Ar.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?$(Uh,{level:this.headingLevel,class:Ar.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?$("div",{key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if(typeof e=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:$("div",{key:`${t}-content`},i.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!i.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);case"expression":return this.renderExpression(t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:i,attachmentInfos:r}=t.viewModel;return i==="loading"||r.length>0?$("div",{key:this._buildKey("attachments-element",e),class:this.classes(Ar.contentElement)},t.render()):null}renderExpression(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:$("div",{key:this._buildKey("expression-element",e),class:Ar.contentElement},t.render())}renderCustom(e,t){const{creator:i}=e,r=this._contentWidgets[t];return!r||r.destroyed?null:i?$("div",{key:this._buildKey("custom-element",t),class:Ar.contentElement},r.render()):null}renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:$("div",{key:this._buildKey("fields-element",e),class:Ar.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:$("div",{key:this._buildKey("media-element",e),class:Ar.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:i}=this.viewModel;if(!i||!e.lastEditedInfo)return null;const{date:r,user:s}=i,n=i.type==="edit"?s?t.lastEditedByUser:t.lastEdited:s?t.lastCreatedByUser:t.lastCreated,o=wr(n,{date:r,user:s});return $("div",{key:"edit-info-element",class:this.classes(Ar.lastEditedInfo,Ar.contentElement)},o)}renderText(e,t){const i=e.text,r=this._contentWidgets[t];return!r||r.destroyed?null:i?$("div",{key:this._buildKey("text-element",t),class:this.classes(Ar.contentElement,Ar.text)},r.render()):null}_buildKey(e,...t){return`${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(e=>this._destroyContentWidget(e)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,i=this.get("viewModel.content"),{contentViewModels:r}=this.viewModel;if(Array.isArray(i))i.forEach((s,n)=>{s.type==="attachments"&&(this._contentWidgets[n]=new wce({displayType:s.displayType,headingLevel:t.title?e+1:e,viewModel:r[n]})),s.type==="fields"&&(this._contentWidgets[n]=new y9({viewModel:r[n]})),s.type==="media"&&(this._contentWidgets[n]=new i7({viewModel:r[n]})),s.type==="text"&&(this._contentWidgets[n]=new Gw({viewModel:r[n]})),s.type==="custom"&&(this._contentWidgets[n]=new Gw({viewModel:r[n]})),s.type==="expression"&&(this._contentWidgets[n]=new d0e({viewModel:r[n]}))},this);else{const s=r[0];s&&!s.destroyed&&(this._contentWidgets[0]=new Gw({viewModel:s}))}this.scheduleRender()}};c([ne("viewModel.graphic")],Or.prototype,"graphic",void 0),c([ne("viewModel.defaultPopupTemplateEnabled")],Or.prototype,"defaultPopupTemplateEnabled",void 0),c([d()],Or.prototype,"headingLevel",void 0),c([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Or.prototype,"label",void 0),c([d(),Zt("esri/widgets/Feature/t9n/Feature")],Or.prototype,"messages",void 0),c([d(),Zt("esri/t9n/common")],Or.prototype,"messagesCommon",void 0),c([d(),Zt("esri/widgets/support/t9n/uriUtils")],Or.prototype,"messagesURIUtils",void 0),c([ne("viewModel.spatialReference")],Or.prototype,"spatialReference",void 0),c([ne("viewModel.title")],Or.prototype,"title",void 0),c([d()],Or.prototype,"visibleElements",void 0),c([gt("visibleElements")],Or.prototype,"castVisibleElements",null),c([ne("viewModel.map")],Or.prototype,"map",void 0),c([ne("viewModel.view")],Or.prototype,"view",void 0),c([d({type:KP})],Or.prototype,"viewModel",void 0),Or=c([O("esri.widgets.Feature")],Or);const m0e=Or;let sh=class extends bo.EventedAccessor{constructor(e){super(e),this._anchorHandles=new Ai,this.location=null,this.screenLocation=null,this.screenLocationEnabled=!1,this.view=null,this._anchorHandles.add([Qe(this,["screenLocationEnabled","location","view.size","view.stationary"],()=>this._updateScreenPointAndHandle()),Qe(this,["view","view.ready"],()=>this._wireUpView())])}destroy(){this.view=null,this._anchorHandles&&this._anchorHandles.destroy(),this._anchorHandles=null,this._viewpointHandle=null}_wireUpView(){const e="view";if(this._anchorHandles.remove(e),this._viewpointHandle=null,!this.get("view.ready"))return;this._setScreenLocation();const{view:t}=this,i=t.type==="3d"?"camera":"viewpoint",r=$U(t,i,()=>this._viewpointChange());this._anchorHandles.add(r,e),this._viewpointHandle=r,this._toggleWatchingViewpoint()}_viewpointChange(){this._setScreenLocation(),this.emit("view-change")}_updateScreenPointAndHandle(){this._setScreenLocation(),this._toggleWatchingViewpoint()}_toggleWatchingViewpoint(){const{_viewpointHandle:e,location:t,screenLocationEnabled:i}=this;!e||(t&&i?e.resume():e.pause())}_setScreenLocation(){const{location:e,view:t,screenLocationEnabled:i}=this,r=this.get("view.ready"),s=i&&r&&N(e)?t.toScreen(e):null;this._set("screenLocation",s)}};c([d()],sh.prototype,"location",void 0),c([d({readOnly:!0})],sh.prototype,"screenLocation",void 0),c([d()],sh.prototype,"screenLocationEnabled",void 0),c([d()],sh.prototype,"view",void 0),sh=c([O("esri.widgets.support.AnchorElementViewModel")],sh);const fq=sh,y0e="esri.widgets.CompassViewModel";let y1=class extends fq{constructor(e){super(e),this.visible=!1}};c([d()],y1.prototype,"visible",void 0),y1=c([O(y0e)],y1);const mq=y1,F$={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let nh=class extends Yt{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new mq,this.visible=!1}initialize(){this.own([Qe(this,"visible",e=>this._visibleChange(e))])}destroy(){this._animationPromise=null}show(e){const{location:t,promise:i}=e;t&&(this.viewModel.location=t),this.visible=!0;const r=()=>this.hide();i&&i.catch(()=>{}).then(r)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,i=!!t,r=e&&i,s=!e&&i,n={[F$.spinnerStart]:r,[F$.spinnerFinish]:s},o=this._getPositionStyles();return $("div",{class:this.classes(F$.base,n),styles:o})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=Fx(this._animationDelay);this._animationPromise=t,t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(!t||Q(e))return{};const{padding:i}=t;return{left:e.x-i.left+"px",top:e.y-i.top+"px"}}};c([ne("viewModel.location")],nh.prototype,"location",void 0),c([ne("viewModel.view")],nh.prototype,"view",void 0),c([d({type:mq})],nh.prototype,"viewModel",void 0),c([ne("viewModel.visible")],nh.prototype,"visible",void 0),nh=c([O("esri.widgets.Spinner")],nh);const g0e=nh;var ir;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(ir||(ir={}));const SM={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function v0e(e,t,i){const r=ir.size;let s=r,n=r;e<1?s*=.75:e>1&&(n*=1.25);const o=0,a=0;let l=r,u=r;return t&&i&&(s=n=l=u=0),[{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[i?l:.875*l,o]},{command:"L",values:[i?s-.5*l:a,n-.5*u]},{command:"L",values:[s-.5*l,n-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[l,t?o:.125*u]},{command:"L",values:[s-.5*l,t?n-.5*u:u]},{command:"L",values:[s-.5*l,n-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s-.5*l,n-.5*u]},{command:"L",values:[i?s-.5*l:a,n-.5*u]},{command:"L",values:[i?s-.5*l:a,t?n-.5*u:u]},{command:"L",values:[s-.5*l,t?n-.5*u:u]},{command:"Z",values:[]}]}]}function _0e(e){const t=ir.size,i=.5*e,r=0,s=0;return[{type:"path",path:[{command:"M",values:[s,.7*t*.5]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+i]},{command:"L",values:[s,.7*t+i-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+i]},{command:"L",values:[t,i]},{command:"L",values:[t,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,r]},{command:"L",values:[t,r]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[s,.7*t*.5]},{command:"Z",values:[]}]}]}function b0e(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function w0e(e,t){let i=t?ir.tallSymbolWidth:e;const r=e,s=t?4:6;i<=ir.size?i-=.5*s:i-=s;const n=0,o=0,a=t?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,n]},{command:"L",values:[i,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[o,.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[.5*i,r]},{command:"L",values:[o,r-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,a]},{command:"L",values:[.5*i,r]},{command:"L",values:[i,r-.5*a]},{command:"L",values:[i,.5*a]},{command:"Z",values:[]}]}]}function S0e(e,t){let i=t?ir.tallSymbolWidth:e;const r=e,s=t?4:6;i<=ir.size?i-=.5*s:i-=s;const n=.5*i,o=.15*i,a=0,l=r-o;return[{type:"ellipse",cx:.5*i,cy:l,rx:n,ry:o},{type:"path",path:[{command:"M",values:[a,o]},{command:"L",values:[a,l]},{command:"L",values:[i,l]},{command:"L",values:[i,o]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:o,rx:n,ry:o}]}function x0e(e,t){let i=t?ir.tallSymbolWidth:e;const r=e,s=t?4:6;i<=ir.size?i-=.5*s:i-=s;const n=.15*i,o=r-n;return[{type:"ellipse",cx:.5*i,cy:o,rx:.5*i,ry:n},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,o]},{command:"L",values:[0,o]},{command:"Z",values:[]}]}]}function I0e(e){let t=e;const i=e,r=6;t<ir.size?t-=.5*r:t-=r;const s=.15*t,n=0;return[{type:"path",path:[{command:"M",values:[0,n]},{command:"L",values:[t,n]},{command:"L",values:[.5*t,i-s]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:n,rx:.5*t,ry:s}]}function T0e(e){let t=e;const i=e,r=4;t<ir.size?t-=.5*r:t-=r;const s=0,n=0,o=t,a=i,l=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*o,s]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,s]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[n,.5*a-l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[.45*o,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,i]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]}]}function $0e(e){const t=e,i=2;let r=e;r<ir.size?r-=.5*i:r-=i;const s=0,n=0;return[{type:"path",path:[{command:"M",values:[.45*t,s]},{command:"L",values:[t,r]},{command:"L",values:[.45*t,.6*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,s]},{command:"L",values:[.45*t,.6*r]},{command:"L",values:[n,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n,r]},{command:"L",values:[.45*t,.6*r]},{command:"L",values:[t,r]},{command:"Z",values:[]}]}]}function Ju(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function iPe(e,t){if("type"in e&&(e.type==="linear"||e.type==="pattern"))return e;const i=new Oe(e);return new Oe([Ju(i.r,t),Ju(i.g,t),Ju(i.b,t),i.a])}class C0e{constructor(t,i){this._storage=new EB,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i){this._storage.put(t,i,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}function E0e(e){return typeof e=="function"}function rPe(e,t,i,r){return E0e(e)?e(t,i,r):e}function sPe(e){return[e.r,e.g,e.b,e.a]}function nPe(e,t,i){const r=` /-,
`,s=l=>{let u=l.length;for(;u--;)if(r.indexOf(l.charAt(u))===-1)return!1;return!0},n=[];let o=0,a=-1;do if(a=t.indexOf("[",o),a>=o){if(a>o){const l=t.substr(o,a-o);n.push([l,null,s(l)])}if(o=a+1,a=t.indexOf("]",o),a>=o){if(a>o){const l=e[t.substr(o,a-o)];l&&n.push([null,l,!1])}o=a+1}}while(a!==-1);if(o<t.length-1){const l=t.substr(o);n.push([l,null,s(l)])}return l=>{let u="",h=null;for(const f of n){const[y,g,b]=f;if(y)b?h=y:(h&&(u+=h,h=null),u+=y);else{const w=l.attributes[g];w&&(h&&(u+=h,h=null),u+=w)}}return A0e(u,i)}}function A0e(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function oPe(e,t,i,r,s,n,o=!0){const a=t/s,l=i/n,u=Math.ceil(a/2),h=Math.ceil(l/2);for(let f=0;f<n;f++)for(let y=0;y<s;y++){const g=4*(y+(o?n-f-1:f)*s);let b=0,w=0,x=0,T=0,M=0,F=0,D=0;const R=(f+.5)*l;for(let _=Math.floor(f*l);_<(f+1)*l;_++){const q=Math.abs(R-(_+.5))/h,W=(y+.5)*a,oe=q*q;for(let te=Math.floor(y*a);te<(y+1)*a;te++){let he=Math.abs(W-(te+.5))/u;const ge=Math.sqrt(oe+he*he);ge>=-1&&ge<=1&&(b=2*ge*ge*ge-3*ge*ge+1,b>0&&(he=4*(te+_*t),D+=b*e[he+3],x+=b,e[he+3]<255&&(b=b*e[he+3]/250),T+=b*e[he],M+=b*e[he+1],F+=b*e[he+2],w+=b))}}r[g]=T/w,r[g+1]=M/w,r[g+2]=F/w,r[g+3]=D/x}}function M0e(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function MI(e){var t;return(t=e.data)==null?void 0:t.symbol}function GS(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function HS(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function yq(e){return e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill"}function WS(e){return e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices"}const aPe=e=>isNaN(e)||!e?0:e,lPe=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":return!0}return!1};function cPe(){return se(()=>import("./geometryEngineJSON.1eda2436.js"),["assets/geometryEngineJSON.1eda2436.js","assets/geometryEngineBase.40db0853.js","assets/geometryEngineJSON.1865e318.js","assets/json.da51edc4.js"])}function O0e(e){const t=MI(e);if(t.type==="CIMTextSymbol")return t.height;let i=0;if(t.symbolLayers)for(const r of t.symbolLayers)GS(r)&&r.size>i?i=r.size:HS(r)&&r.width>i?i=r.width:yq(r);return i}function uPe(e,t,i){const r=MI(e),s=O0e(e);if(s===0)return void k0e(r,t);QP(r,t/s,!1,i)}function k0e(e,t){if(e.type!=="CIMTextSymbol"){if(e.symbolLayers)for(const i of e.symbolLayers)switch(i.type){case"CIMPictureMarker":case"CIMVectorMarker":i.size=t;break;case"CIMPictureStroke":case"CIMSolidStroke":i.width=t}}else e.height=t}function QP(e,t,i,r){if(e.type!=="CIMTextSymbol"){if(i&&e.effects)for(const s of e.effects)R0e(s,t);if(e.symbolLayers)for(const s of e.symbolLayers)switch(s.type){case"CIMPictureMarker":case"CIMVectorMarker":P0e(s,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":r!=null&&r.preserveOutlineWidth||!s.width||(s.width*=t);break;case"CIMPictureFill":s.height&&(s.height*=t),s.offsetX&&(s.offsetX*=t),s.offsetY&&(s.offsetY*=t);break;case"CIMHatchFill":QP(s.lineSymbol,t,!0,be(k({},r),{preserveOutlineWidth:!1})),s.offsetX&&(s.offsetX*=t),s.offsetY&&(s.offsetY*=t),s.separation&&(s.separation*=t)}}else e.height*=t}function P0e(e,t,i){if(e.markerPlacement&&L0e(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&e.anchorPointUnits==="Absolute"&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size*=t,e.type==="CIMVectorMarker"&&e.markerGraphics)for(const r of e.markerGraphics)e.scaleSymbolsProportionally||QP(r.symbol,t,!0,i)}function L0e(e,t){switch(WS(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const i=e.placementTemplate.map(r=>r*t);e.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const i=e.placementTemplate.map(r=>r*t);e.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function R0e(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const i=e.dashTemplate.map(r=>r*t);e.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function F0e(e){const t=[];return xM(MI(e),t),t.length?new Oe(M0e(t[0])):null}function xM(e,t){let i;i=e.type==="CIMTextSymbol"?e.symbol:e;const r=e.type==="CIMPolygonSymbol";if(i.symbolLayers){for(const s of i.symbolLayers)if(!(s.colorLocked||r&&(HS(s)||GS(s)&&s.markerPlacement&&WS(s.markerPlacement))))switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor&&qD(t,s.tintColor);break;case"CIMVectorMarker":s.markerGraphics.forEach(n=>{xM(n.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":qD(t,s.color);break;case"CIMHatchFill":xM(s.lineSymbol,t)}}}function qD(e,t){for(const i of e)if(i.join(".")===t.join("."))return;e.push(t)}function gq(e,t,i){t instanceof Oe||(t=new Oe(t));const r=MI(e);r&&IM(r,t,i)}function IM(e,t,i){let r;r=e.type==="CIMTextSymbol"?e.symbol:e;const s=r.type==="CIMPolygonSymbol";if(r.symbolLayers)for(const n of r.symbolLayers){if(n.colorLocked)continue;if(s){if(i){const{layersToColor:a}=i;if((HS(n)||GS(n)&&n.markerPlacement&&WS(n.markerPlacement))&&a==="fill"||yq(n)&&a==="outline")continue}else if(HS(n)||GS(n)&&n.markerPlacement&&WS(n.markerPlacement))continue}const o=t.toArray();switch(n.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":n.tintColor=o;break;case"CIMVectorMarker":n.markerGraphics.forEach(a=>{IM(a.symbol,t,i)});break;case"CIMSolidStroke":case"CIMSolidFill":n.color=o;break;case"CIMHatchFill":IM(n.lineSymbol,t,i)}}}const vq="picture-fill",_q="simple-fill",N0e="simple-line",bq="simple-marker",D0e="text",j0e="cim",N$=new C0e(1e3);function z0e(e){const t=e.style;let i=null;if(e)switch(e.type){case bq:t!=="cross"&&t!=="x"&&(i=e.color);break;case _q:t==="solid"?i=e.color:t!=="none"&&(i={type:"pattern",x:0,y:0,src:It(`esri/symbols/patterns/${t}.png`),width:5,height:5});break;case vq:i={type:"pattern",src:e.url,width:Ei(e.width)*e.xscale,height:Ei(e.height)*e.yscale,x:Ei(e.xoffset),y:Ei(e.yoffset)};break;case D0e:i=e.color;break;case j0e:i=F0e(e)}return i}function V0e(e,t){const i=e+"-"+t;return N$.get(i)!==void 0?Promise.resolve(N$.get(i)):ft(e,{responseType:"image"}).then(r=>{const s=r.data,n=s.naturalWidth,o=s.naturalHeight,a=document.createElement("canvas");a.width=n,a.height=o;const l=a.getContext("2d");l.fillStyle=t,l.fillRect(0,0,n,o),l.globalCompositeOperation="destination-in",l.drawImage(s,0,0);const u=a.toDataURL();return N$.put(i,u),u})}function JS(e){if(!e)return null;let t;switch(e.type){case _q:case vq:case bq:t=JS(e.outline);break;case N0e:{const i=Ei(e.width);e.style!=="none"&&i!==0&&(t={color:e.color,style:XP(e.style),width:i,cap:e.cap,join:e.join==="miter"?Ei(e.miterLimit):e.join});break}default:t=null}return t}const XP=function(){const e={};return function(t){if(e[t])return e[t];const i=t.replace(/-/g,"");return e[t]=i,i}}(),U0e=new Oe([128,128,128]),GD=/\/resource\/(.*?)\.svg$/,B0e=new Oe("white");function q0e(e){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const i=e.symbolLayers.getItemAt(t-1);return"outline"in i?Cx(i,"outline","size"):void 0}function G0e(e){if(!e)return 0;if(pc(e)){const i=q0e(e);return N(i)?i:0}const t=JS(e);return t&&il(t.width)||0}function OI(e){if(Q(e)||!("symbolLayers"in e)||Q(e.symbolLayers))return!1;switch(e.type){case"point-3d":return e.symbolLayers.some(t=>t.type==="object");case"line-3d":return e.symbolLayers.some(t=>t.type==="path");case"polygon-3d":return e.symbolLayers.some(t=>t.type==="object"||t.type==="extrude");default:return!1}}function H0e(e,t){const i=t.resource.href;return!re("esri-canvas-svg-support")&&e.styleOrigin&&GD.test(i)?i.replace(GD,"/resource/png/$1.png"):i}function ZS(e,t){if(t==null)return e;const i=e.toRgba();return i[3]=i[3]*t,new Oe(i)}function W0e(e,t,i){const r=e.symbolLayers;if(!r)return;const s=n=>{const o=N(n)?n:null;return ZS(t=t||o||i!=null&&B0e,i)};r.forEach(n=>{if(n.type!=="object"||n.resource.href==null||t)if(n.type==="water")n.color=s(n.color);else{const o=N(n.material)?n.material.color:null,a=s(o);Q(n.material)?n.material=new kn({color:a}):n.material.color=a,i!=null&&"outline"in n&&N(n.outline)&&N(n.outline.color)&&(n.outline.color=ZS(n.outline.color,i))}})}function J0e(e,t,i){(t=t||e.color)&&(e.color=ZS(t,i)),i!=null&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=ZS(e.outline.color,i))}function D$(e,t,i){e&&(t||i!=null)&&(t&&(t=new Oe(t)),pc(e)?W0e(e,t,i):Lk(e)&&J0e(e,t,i))}async function Z0e(e,t){const i=e.symbolLayers;i&&await WK(i,async r=>Y0e(r,t))}async function Y0e(e,t){switch(e.type){case"extrude":Q0e(e,t);break;case"icon":case"line":case"text":K0e(e,t);break;case"path":eve(e,t);break;case"object":await X0e(e,t)}}function K0e(e,t){const i=wq(t);N(i)&&(e.size=i)}function wq(e){for(const t of e)if(typeof t=="number")return t;return null}function Q0e(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function X0e(e,t){const{resourceSize:i,symbolSize:r}=await tve(e),s=Sq(t,i,r);e.width=N0(t[0],r[0],i[0],s),e.depth=N0(t[1],r[1],i[1],s),e.height=N0(t[2],r[2],i[2],s)}function eve(e,t){const i=Sq(t,BV,[e.width,void 0,e.height]);e.width=N0(t[0],e.width,1,i),e.height=N0(t[2],e.height,1,i)}function Sq(e,t,i){for(let r=0;r<3;r++){const s=e[r];switch(s){case"symbol-value":return i[r]!=null?i[r]/t[r]:1;case"proportional":break;default:if(s&&t[r])return s/t[r]}}return 1}async function tve(e){const t=await se(()=>import("./symbolLayerUtils.dfd79b39.js"),["assets/symbolLayerUtils.dfd79b39.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]),i=await t.computeObjectLayerResourceSize(e,10),{width:r,height:s,depth:n}=e,o=[r,n,s];let a=1;for(let l=0;l<3;l++)if(o[l]!=null){a=o[l]/i[l];break}for(let l=0;l<3;l++)o[l]==null&&(o[l]=i[l]*a);return{resourceSize:i,symbolSize:o}}function N0(e,t,i,r){switch(e){case"proportional":return i*r;case"symbol-value":return t!=null?t:i;default:return e}}function ive(e,t){const i=wq(t);if(!Q(i))switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const r=e.width/e.height;r>1?(e.width=i,e.height=i*r):(e.width=i*r,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}async function rve(e,t){if(e&&t)return pc(e)?Z0e(e,t):void(Lk(e)&&ive(e,t))}function sve(e,t,i){if(e&&t!=null)if(pc(e)){const r=e.symbolLayers;r&&r.forEach(s=>{if(s&&s.type==="object")switch(i){case"tilt":s.tilt=t;break;case"roll":s.roll=t;break;default:s.heading=t}})}else Lk(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle=t))}function Cv(e){if(!e)return null;const t=e.effects.filter(i=>i.type!=="bloom").map(i=>i.toJSON());return BS(t)}let jp=null;function HD(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function nve(e,t,i){const{backgroundColor:r,outline:s,dotSize:n}=e,o=i&&i.swatchSize||ir.size,a=.8,l=Math.round(o*o/n**2*a),u=window.devicePixelRatio,h=document.createElement("canvas"),f=o*u;h.width=f,h.height=f,h.style.width=h.width/u+"px",h.style.height=h.height/u+"px";const y=h.getContext("2d");if(r&&(y.fillStyle=r.toCss(!0),y.fillRect(0,0,f,f),y.fill()),y.fillStyle=t.toCss(!0),jp&&jp.length/2===l)for(let b=0;b<2*l;b+=2){const w=jp[b],x=jp[b+1];y.fillRect(w,x,n*u,n*u),y.fill()}else{jp=[];for(let b=0;b<2*l;b+=2){const w=HD(0,f),x=HD(0,f);jp.push(w,x),y.fillRect(w,x,n*u,n*u),y.fill()}}s&&(s.color&&(y.strokeStyle=s.color.toCss(!0)),y.lineWidth=s.width,y.strokeRect(0,0,f,f));const g=new Image(o,o);return g.src=h.toDataURL(),g}function oh(e,t={}){const s=t.align==="horizontal",n=s?75:24,o=s?24:75,{width:a=n,height:l=o,gradient:u=!0}=t,h=window.devicePixelRatio,f=a*h,y=l*h,g=document.createElement("canvas");g.width=f,g.height=y,g.style.width=`${a}px`,g.style.height=`${l}px`;const b=g.getContext("2d"),w=s?f:0,x=s?0:y;if(u){const M=b.createLinearGradient(0,0,w,x),F=e.length,D=F===1?0:1/(F-1);e.forEach((R,_)=>M.addColorStop(_*D,R.toString())),b.fillStyle=M,b.fillRect(0,0,f,y)}else{const M=s?f/e.length:f,F=s?y:y/e.length;let D=0,R=0;for(const _ of e)b.fillStyle=_.toString(),b.fillRect(D,R,M,F),D=s?D+M:0,R=s?0:R+F}const T=document.createElement("div");return T.style.width=`${a}px`,T.style.height=`${l}px`,ove(T,t==null?void 0:t.effectList),T.appendChild(g),T}function ove(e,t){if(!t)return;e.style.filter=Cv(t);const i=t.effects;if(i){for(const r of i)if((r==null?void 0:r.type)==="drop-shadow"){r.offsetX<0?e.style.marginLeft=`${Math.abs(r.offsetX)}px`:e.style.marginRight=`${r.offsetX}px`;break}}}async function xq(e,t){switch(e.type){case"web-style":{const{previewWebStyleSymbol:i}=await se(()=>import("./previewWebStyleSymbol.4997518d.js"),["assets/previewWebStyleSymbol.4997518d.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]);return i(e,xq,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await se(()=>Promise.resolve().then(function(){return DIe}),void 0);return i(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await se(()=>import("./previewSymbol2D.845c6968.js"),["assets/previewSymbol2D.845c6968.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]);return i(e,t)}case"cim":{const{previewCIMSymbol:i}=await se(()=>import("./previewCIMSymbol.bb3e7223.js"),["assets/previewCIMSymbol.bb3e7223.js","assets/cimAnalyzer.74547477.js","assets/CIMSymbolHelper.1040926f.js","assets/BidiEngine.b9926823.js","assets/enums.84480fc7.js","assets/alignmentUtils.03ee467b.js","assets/number.dc47462b.js","assets/GeometryUtils.e53da643.js","assets/quantizationUtils.48cd94ed.js","assets/Rasterizer.8006df47.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]);return i(e,t)}default:return}}function Iq(e){return e&&"opacity"in e?e.opacity*Iq(e.parent):1}async function ave(e,t){var i,r;if(!e)return;const s=e.sourceLayer,n=(i=N(t)&&(r=t.useSourceLayer)!=null&&r?s:e.layer)!=null?i:s,o=Iq(n);if(N(e.symbol)&&(!N(t)||t.ignoreGraphicSymbol!==!0)){const M=e.symbol.type==="web-style"?await e.symbol.fetchSymbol(N(t)?t.abortOptions:null):e.symbol.clone();return D$(M,null,o),M}const a=N(t)&&t.renderer||n&&"renderer"in n&&n.renderer;let l=a&&"getSymbolAsync"in a?await a.getSymbolAsync(e,t):null;if(!l)return;if(l=l.type==="web-style"?await l.fetchSymbol(N(t)?t.abortOptions:null):l.clone(),!("visualVariables"in a)||!a.visualVariables||!a.visualVariables.length)return D$(l,null,o),l;if("arcadeRequiredForVisualVariables"in a&&a.arcadeRequiredForVisualVariables&&(Q(t)||Q(t.arcade))){const M=k({},t);M.arcade=await hc(),t=M}const u=await se(()=>Promise.resolve().then(function(){return Tp}),void 0),h=[],f=[],y=[],g=[];for(const M of a.visualVariables)switch(M.type){case"color":h.push(M);break;case"opacity":f.push(M);break;case"rotation":g.push(M);break;case"size":M.target||y.push(M)}const b=!!h.length&&h[h.length-1],w=b?u.getColor(b,e,t):null,x=!!f.length&&f[f.length-1];let T=x?u.getOpacity(x,e,t):null;if(o!=null&&(T=T!=null?T*o:o),D$(l,w,T),y.length){const M=u.getAllSizes(y,e,t);await rve(l,M)}for(const M of g)sve(l,u.getRotationAngle(M,e,t),M.axis);return l}class TM{constructor(t=i=>i.values().next().value){this._peeker=t,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let t;for(t of this._items);return t}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t)}contains(t){return this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),t}remove(t){this._items.delete(t)}filter(t){return this._items.forEach(i=>{t(i)||this._items.delete(i)}),this}}const lve=re("mac")?"Meta":"Ctrl",kI={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)kI[e]=String.fromCharCode(e);for(let e=1;e<25;e++)kI[111+e]=`F${e}`;for(let e=65;e<91;e++)kI[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function cve(e){if(e.key!==void 0)return Us(e);const t=kI[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function uve(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}class dve{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}}const WD=fe.getLogger("esri.views.input.InputHandler");class Ir{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?WD.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,r){let s;typeof i=="function"?(r=i,s=[]):s=i||[];const n=typeof t=="string"?new dve(t,s):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const f=this._incoming[h.match.eventType];if(f){const y=f.indexOf(h);f.splice(y,1),o(),this._manager&&this._manager.updateDependencies()}},l=new hve(n,r,{onPause:a,onRemove:a,onResume:h=>{const f=this._incoming[h.match.eventType];f&&f.indexOf(h)===-1&&(f.push(h),o(),this._manager&&this._manager.updateDependencies())}});let u=this._incoming[n.eventType];return u||(u=[],this._incoming[n.eventType]=u),u.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(t){if(this._outgoing[t])throw Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new pve(t,{onEmit:(r,s,n,o)=>{this._manager.emit(r.eventType,s,n,o)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){this._manager.setPointerCapture(t,!0)}stopCapturingPointer(t){this._manager.setPointerCapture(t,!1)}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):WD.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){const i=this._incoming[t.type];if(i){for(const r of i)if(r.match.matches(t)&&(r.callback(t),t.shouldStopPropagation()))break}}}class hve{constructor(t,i,r){this.match=t,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class pve{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,r){this._removed||this._handler.onEmit(this,t,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}}class fve extends Ir{constructor(t){super(!0),this._onChange=t,this._value="mouse",this.registerIncoming("pointer-down",i=>{const r=i.data.native.pointerType==="touch";this._setValue(r?"touch":"mouse")}),this._moveHandler=this.registerIncoming("pointer-move",i=>{const r=i.data.native.pointerType==="touch";this._setValue(r?"touch":"mouse")}),this._moveHandler.pause()}_setValue(t){t!==this._value&&(t==="touch"?this._moveHandler.resume():this._moveHandler.pause(),this._value=t,this._onChange(t))}}const j$=fe.getLogger("esri.views.input.InputManager");let ah=class extends Ee{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=lve,this.latestPointerType="mouse",this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource=null,this._currentPropagation=null}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}installHandlers(e,t,i=Zu.INTERNAL){if(this._nameToGroup[e])return void j$.error("There is already an InputHandler group registered under the name `"+e+"`");if(t.length===0)return void j$.error("Can't register a group of zero handlers");const r={name:e,handlers:t.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=r;for(let s=r.handlers.length-1;s>=0;s--){const n=r.handlers[s];this._handlers.push(n),n.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(o,a,l,u,h)=>{this._emitInputEvent(n.priorityIndex+1,o,a,l,h,u)},setPointerCapture:(o,a)=>{this._setPointerCapture(r,n,o,a)},setEventCallback:o=>{n.eventCallback=o},setUninstallCallback:o=>{n.uninstallCallback=o},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(i=>{i.removed=!0,i.uninstallCallback()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):j$.error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const r=this._handlers[i];r.priorityIndex=i,this._handlersPriority.push(r)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const r=this._handlersPriority[i];r.priorityIndex=i;let s=r.handler.hasSideEffects;if(!s){for(const n of r.handler.outgoingEventTypes)if(e.has(n)){s=!0;break}}if(s)for(const n of r.handler.incomingEventMatches){e.add(n.eventType);for(const o of n.keyModifiers)uve(o)||t.add(o)}r.active=s}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointerType(e){this._set("latestPointerType",e)}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const s=t;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,t);const i=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,r=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,i,r)}_updateKeyModifiers(e,t){if(!t)return;let i=!1;const r=()=>{if(!i){const o=new Set;this._activeKeyModifiers.forEach(a=>{o.add(a)}),this._activeKeyModifiers=o,i=!0}},s=(o,a)=>{a&&!this._activeKeyModifiers.has(o)?(r(),this._activeKeyModifiers.add(o)):!a&&this._activeKeyModifiers.has(o)&&(r(),this._activeKeyModifiers.delete(o))};if(e==="key-down"||e==="key-up"){const o=t.key;this._keyModifiers.has(o)&&s(o,e==="key-down")}const n=t.native;s("Alt",!(!n||!n.altKey)),s("Ctrl",!(!n||!n.ctrlKey)),s("Shift",!(!n||!n.shiftKey)),s("Meta",!(!n||!n.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerTypeHandler=new fve(e=>this._setLatestPointerType(e)),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Zu.INTERNAL),this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler],Zu.INTERNAL)}_setPointerCapture(e,t,i,r){const s=e.name+"-"+t.priorityIndex,n=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,n),r?(n.add(s),n.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):n.has(s)&&(n.delete(s),n.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,i,r){this._emitInputEvent(0,e,t,i,r)}_emitInputEvent(e,t,i,r,s,n){const o=r!==void 0?r:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),a=s!==void 0&&s,l={event:new mve(t,i,o,n||this._activeKeyModifiers,a),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(l):this._doNewPropagation(l)}_doNewPropagation(e){this._currentPropagation={events:new TM,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){const e=this._currentPropagation;if(e){for(;this._currentPropagation.events.length>0;){const{event:t,priorityIndex:i}=this._currentPropagation.events.pop(),r=t.data&&t.data.eventId;if(!(r!=null&&this._stoppedPropagationEventIds.has(r)))for(e.currentHandler=this._handlersPriority[i];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback(t),t.shouldStopPropagation()){r!=null&&this._stoppedPropagationEventIds.add(r);break}if(t.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const t=new TM;for(t.push(e);this._currentPropagation.events.length;)t.push(this._currentPropagation.events.pop());this._currentPropagation.events=t,this._currentPropagation.currentHandler=null}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const r of t.handler.incomingEventMatches){if(i.eventType!==r.eventType)continue;const s=i.keyModifiers.filter(n=>r.keyModifiers.indexOf(n)!==-1);if(s.length===i.keyModifiers.length!=(s.length===r.keyModifiers.length))return i.keyModifiers.length>r.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const i of e){let r=0;for(;r<t.length&&this._compareHandlerPriority(i,t[r])>=0;)r++;t.splice(r,0,i)}return t}get debug(){const e=t=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=i};return{injectEvent:(t,i)=>{e(()=>{this._onEventReceived(t,i)})},disablePointerCapture:e}}};c([d({readOnly:!0})],ah.prototype,"hasPendingInputs",null),c([d()],ah.prototype,"eventSource",void 0),c([d()],ah.prototype,"recognizers",void 0),c([d({readOnly:!0})],ah.prototype,"latestPointerType",void 0),ah=c([O("esri.views.input.InputManager")],ah);class mve{constructor(t,i,r,s,n){this.type=t,this.data=i,this.timestamp=r,this.modifiers=s,this.cancelable=n,this._propagationState=Au.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Au.STOPPED}shouldStopPropagation(){return(this._propagationState&Au.STOPPED)!=0}async(t){this._propagationState|=Au.PAUSED;const i=(r,s)=>{this._propagationState&=~Au.PAUSED;const n=this._resumeCallback;if(this._resumeCallback=null,n&&n(),s)throw r;return r};return(typeof t=="function"?t():t).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(t){return!!(this._propagationState&Au.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}}var Au;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(Au||(Au={}));const Zu={DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};function eL(e){return e&&typeof e.highlight=="function"}const PI={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},Rh=new ay({id:"zoom-to-feature",title:"{messages.zoom}",className:PI.iconZoom}),JD=new ay({id:"remove-selected-feature",title:"{messages.remove}",className:PI.iconTrash}),tm=new ay({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:PI.iconZoom}),im=new ay({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:PI.iconBrowseClusteredFeatures}),yve="esri.widgets.Popup.PopupViewModel",id=fe.getLogger(yve),gve=function(e){const{event:t,view:i}=e,{action:r}=t,s=i&&i.popup;if(!r)return Promise.reject(new B("trigger-action:missing-arguments","Event has no action"));if(!s)return Promise.reject(new B("trigger-action:missing-arguments","view.popup is missing"));const{disabled:n,id:o}=r;if(!o)return Promise.reject(new B("trigger-action:invalid-action","action.id is missing"));if(n)return Promise.reject(new B("trigger-action:invalid-action","Action is disabled"));if(o===Rh.id)return _ve(s.viewModel).catch(OC);if(o===tm.id)return bve(s.viewModel);if(o===im.id)return s.featureMenuOpen=!s.featureMenuOpen,s.viewModel.browseClusterEnabled=!s.viewModel.browseClusterEnabled,Promise.resolve();if(s.viewModel.browseClusterEnabled=!1,o===JD.id){s.close();const{selectedFeature:a}=s;if(!a)return Promise.reject(new B(`trigger-action:${JD.id}`,"selectedFeature is required",{selectedFeature:a}));const{sourceLayer:l}=a;return l?l.remove(a):i.graphics.remove(a),Promise.resolve()}return Promise.resolve()};function Tq(e){const{selectedFeature:t,location:i,view:r}=e;return r?r.type==="3d"?t||i:e.get("selectedFeature.geometry")||i:null}function vve(e,t){if((t==null?void 0:t.type)!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const i=t.getViewForGraphic(e);if(i&&"whenGraphicBounds"in i){let r=!1;return i.whenGraphicBounds(e,{useViewElevation:!0}).then(s=>{r=!s||!s.boundingBox||s.boundingBox[0]===s.boundingBox[3]&&s.boundingBox[1]===s.boundingBox[4]&&s.boundingBox[2]===s.boundingBox[5]}).catch(()=>{const s=new B("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:e});id.error(s)}),r}return!0}async function _ve(e){const{location:t,selectedFeature:i,view:r,zoomFactor:s}=e,n=Tq(e);if(!n){const u=new B("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:n,view:r});return id.error(u),Promise.reject(u)}const o=r.scale/s,a=e.get("selectedFeature.geometry")||t,l=a&&a.type==="point"&&vve(i,r);Rh.active=!0,Rh.disabled=!0;try{await e.view.goTo({target:n,scale:l?o:void 0})}finally{Rh.active=!1,Rh.disabled=!1,e.zoomToLocation=null,l&&(e.location=a)}}async function bve(e){const{selectedFeature:t,view:i}=e;if((i==null?void 0:i.type)!=="2d"){const a=new B("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw id.error(a),a}if(!t.isAggregate){const a=new B("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw id.error(a),a}const r=t.sourceLayer,s=await i.whenLayerView(r),n=s.createQuery();n.aggregateIds=[t.getObjectId()],tm.active=!0,tm.disabled=!0;const{extent:o}=await s.queryExtent(n);await i.goTo({target:o}),tm.active=!1,tm.disabled=!1}async function wve(e){const{selectedFeature:t,view:i}=e;if((i==null?void 0:i.type)!=="2d"){const a=new B("displayClusterExtent:invalid-view","View must be 2d MapView.",{view:i});throw id.error(a),a}if(!t.isAggregate){const a=new B("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw id.error(a),a}const r=t.sourceLayer,s=await i.whenLayerView(r),n=s.createQuery();n.aggregateIds=[t.getObjectId()];const{extent:o}=await s.queryExtent(n);e.selectedClusterBoundaryFeature.geometry=o,i.graphics.add(e.selectedClusterBoundaryFeature)}async function Sve(e){const{selectedFeature:t,view:i}=e;if((i==null?void 0:i.type)!=="2d"){const a=new B("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:i});throw id.error(a),a}if(!t.isAggregate){const a=new B("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw id.error(a),a}const r=t.sourceLayer,s=await i.whenLayerView(r),n=s.createQuery();n.aggregateIds=[t.getObjectId()],im.active=!0,im.disabled=!0;const{features:o}=await s.queryFeatures(n);im.active=!1,im.disabled=!1,i.popup.open({features:[t].concat(o),featureMenuOpen:!0})}function xve(e){var t;(t=e.selectedFeature)!=null&&t.isAggregate&&(e.features=e.features.filter(i=>i.isAggregate))}const tL=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return c([d()],t.prototype,"goToOverride",void 0),c([d()],t.prototype,"view",void 0),t=c([O("esri.widgets.support.GoTo")],t),t},D0=ke.ofType({key:"type",defaultKeyValue:"button",base:Xx,typeMap:{button:ay,toggle:J6}}),Ive=()=>[Rh.clone()],Tve=()=>[tm.clone(),im.clone()],$q="esri.widgets.Popup.PopupViewModel",ZD=fe.getLogger($q);let bt=class extends tL(fq){constructor(e){super(e),this._handles=new Ai,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new D0,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new xr({symbol:new cl({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}initialize(){this._handles.add([Pt(this,["autoOpenEnabled","view"],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),Qe(this,["highlightEnabled","selectedFeature","visible","view"],()=>this._highlightFeature()),Qe(this,"view.animation.state",e=>this._animationStateChange(e)),Qe(this,"location",e=>this._locationChange(e)),Qe(this,"selectedFeature",e=>this._selectedFeatureChange(e)),Qe(this,["selectedFeatureIndex","featureCount","featuresPerPage"],()=>this._selectedFeatureIndexChange()),Qe(this,["featurePage","selectedFeatureIndex","featureCount","featuresPerPage, featureViewModels"],()=>this._setGraphicOnFeatureViewModels()),Qe(this,"featureViewModels",()=>this._featureViewModelsChange()),this.on("trigger-action",e=>gve({event:e,view:this.view})),k2(this,"waitingForResult",()=>this._waitingForResultChange(),!0),Qe(this,["features","view","view.map","view.spatialReference"],()=>this._updateFeatureVMs()),Qe(this,["view.scale"],this._viewScaleChange),k2(this,"visible",()=>this.browseClusterEnabled=!1),Qe(this,"browseClusterEnabled",e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new D0;e.removeAll();const{actions:t,defaultActions:i,defaultPopupTemplateEnabled:r,includeDefaultActions:s,selectedFeature:n}=this,o=s?i.concat(t):t,a=n&&(typeof n.getEffectivePopupTemplate=="function"&&n.getEffectivePopupTemplate(r)||n.popupTemplate),l=a&&a.actions,u=a&&a.overwriteActions?l:l?l.concat(o):o;return u&&u.filter(Boolean).forEach(h=>e.add(h)),e}get defaultActions(){var e;const t=this._get("defaultActions")||new D0;return t.removeAll(),t.addMany((e=this.selectedFeature)!=null&&e.isAggregate?Tve():Ive()),t}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:i,promiseCount:r,selectedFeatureIndex:s}=this,n=r&&t.length;n&&i&&s===-1?this.selectedFeatureIndex=0:n&&s!==-1||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){const t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=nc(e)),this._set("location",e)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(!!this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(t=>{this._pendingPromises.add(t);const i=s=>{this._pendingPromises.has(t)&&this._updateFeatures(s),this._updatePendingPromises(t)},r=()=>this._updatePendingPromises(t);t.then(i,r)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=Tq(this);if(!t){const i=new B("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e});return ZD.error(i),Promise.reject(i)}return this.callGoTo({target:{target:t,scale:e.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null})}fetchFeatures(e,t){const{view:i}=this;if(!i||!e){const r=new B("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:i});return ZD.error(r),Promise.reject(r)}return i.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t=be(k({updateLocationEnabled:!1,promises:[],fetchFeatures:!1},e),{visible:!0}),{fetchFeatures:i}=t;delete t.fetchFeatures,i&&this._setFetchFeaturesPromises(t.location);const r=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const s of r)delete t[s];this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){xve(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){await wve(this),await Sve(this)}_animationStateChange(e){this.zoomToLocation||(Rh.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var e;const t=(e=this.view)==null?void 0:e.graphics;t&&(t.remove(this.selectedClusterBoundaryFeature),t.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){var e;if((e=this.selectedFeature)!=null&&e.isAggregate)return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.browseClusterEnabled=!1,this.features=[this.selectedFeature])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:i}=this;i&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:i,featuresPerPage:r,featureViewModels:s}=this;if(i===null)return;const n=((i-1)*r+t)%t,o=n+r;s.slice(n,o).forEach((a,l)=>{a&&!a.graphic&&(a.graphic=e[n+l])})}async _selectedFeatureChange(e){if(!e)return;const{location:t,updateLocationEnabled:i,view:r}=this;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(r.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),e.isAggregate?void 0:(e.symbol=await ave(e),this._selectedClusterFeature=e,void r.graphics.add(this._selectedClusterFeature));!i&&t||!e.geometry?i&&!e.geometry&&this.centerAtLocation().then(()=>{this.location=r.center.clone()}):this.location=this._getPointFromGeometry(e.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(t=>{const{clientOnlyGraphics:i,promisesPerLayerView:r}=t,s=Promise.resolve(i),n=r.map(o=>o.promise);this.promises=[s,...n]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:i}=this;if(e!=null&&e.isAggregate||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const r=i.slice(0),s=[];t.forEach((n,o)=>{if(!n)return;let a=null;if(r.some((h,f)=>(h&&h.graphic===n&&(a=h,r.splice(f,1)),!!a)),a)s[o]=a;else{var l,u;const h=new KP({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(l=this.view)==null?void 0:l.spatialReference,graphic:n===e?n:null,map:(u=this.view)==null?void 0:u.map,view:this.view});s[o]=h}}),r.forEach(n=>n&&!n.destroyed&&n.destroy()),this._set("featureViewModels",s)}_getScreenPoint(e){const{view:t}=this;return t&&e&&typeof t.toScreen=="function"?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:i}=this;if(t.remove(e),i&&this.view){const r=this.view.on("click",s=>{s.pointerType==="mouse"&&s.button!==0||this._fetchFeaturesAndOpen(s)},Zu.WIDGET);t.add(r,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const i=new AbortController,{signal:r}=i;this._fetchFeaturesController=i,this.notifyChange("waitingForResult");const s=this.fetchFeatures(e,{signal:r,event:t});return s.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),s}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:i}=e,{view:r}=this;this._fetchFeaturesWithController(t,e).then(s=>{const{clientOnlyGraphics:n,promisesPerLayerView:o,location:a}=s,l=[Promise.resolve(n),...o.map(u=>u.promise)];return r.popup.open({location:a||i,promises:l}),s})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(e){return Q(e)?null:e.type==="point"?e:e.type==="extent"?e.center:e.type==="polygon"?e.centroid:e.type==="multipoint"||e.type==="polyline"?e.extent.center:null}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}async _highlightFeature(){const e="highlight";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:i,view:r,visible:s}=this;if(!(t&&r&&i&&s))return;let{layer:n,sourceLayer:o}=t;if((o==null?void 0:o.type)!=="map-notes"&&(o==null?void 0:o.type)!=="subtype-group"||(n=o),!(n&&n instanceof yk))return;const a=this._getLayerView(r,n);this._highlightPromise=a;const l=await a;if(!(l&&eL(l)&&this._highlightPromise===a&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const u=n.type==="imagery"?void 0:"objectIdField"in n&&n.objectIdField,h=t.attributes,f=h&&u&&h[u],y=l.highlight(f||t);this._handles.add(y,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const i=e.filter(r=>t.indexOf(r)===-1);this.features=t.concat(i)}};c([d()],bt.prototype,"featurePage",void 0),c([d()],bt.prototype,"isLoadingFeature",null),c([d({type:D0})],bt.prototype,"actions",void 0),c([d({readOnly:!0})],bt.prototype,"active",null),c([d({readOnly:!0})],bt.prototype,"allActions",null),c([d({type:Boolean})],bt.prototype,"defaultPopupTemplateEnabled",void 0),c([d()],bt.prototype,"autoCloseEnabled",void 0),c([d()],bt.prototype,"autoOpenEnabled",void 0),c([d()],bt.prototype,"browseClusterEnabled",void 0),c([d()],bt.prototype,"content",void 0),c([d({type:D0,readOnly:!0})],bt.prototype,"defaultActions",null),c([d({readOnly:!0})],bt.prototype,"featureCount",null),c([d()],bt.prototype,"features",null),c([d()],bt.prototype,"featuresPerPage",void 0),c([d()],bt.prototype,"featureViewModelAbilities",void 0),c([d({readOnly:!0})],bt.prototype,"featureViewModels",void 0),c([d()],bt.prototype,"highlightEnabled",void 0),c([d()],bt.prototype,"includeDefaultActions",void 0),c([d({type:Le})],bt.prototype,"location",null),c([d({readOnly:!0})],bt.prototype,"pendingPromisesCount",null),c([d({readOnly:!0})],bt.prototype,"selectedClusterBoundaryFeature",void 0),c([d({readOnly:!0})],bt.prototype,"waitingForResult",null),c([d({readOnly:!0})],bt.prototype,"promiseCount",null),c([d()],bt.prototype,"promises",null),c([d({value:null,readOnly:!0})],bt.prototype,"selectedFeature",null),c([d({value:-1})],bt.prototype,"selectedFeatureIndex",null),c([d({readOnly:!0})],bt.prototype,"selectedFeatureViewModel",null),c([d({readOnly:!0})],bt.prototype,"state",null),c([d()],bt.prototype,"title",void 0),c([d()],bt.prototype,"updateLocationEnabled",void 0),c([d()],bt.prototype,"view",void 0),c([d()],bt.prototype,"visible",void 0),c([d()],bt.prototype,"zoomFactor",void 0),c([d()],bt.prototype,"zoomToLocation",void 0),c([d()],bt.prototype,"centerAtLocation",null),bt=c([O($q)],bt);const Cq=bt,YD="selected-index",$ve=0,KD="popup-spinner",ve={iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button"},QD={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},XD="esri-popup";function wl(e,t){return t===void 0?`${XD}__${e}`:`${XD}__${e}-${t}`}const Eq="esri.widgets.Popup",e5=fe.getLogger(Eq),t5={closeButton:!0,featureNavigation:!0};let Ne=class extends pq(Yt){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new Ai,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([i])=>{i!=null&&i.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=Jk(()=>this._displaySpinner(),$ve),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.headingLevel=2,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new Cq,this.visible=null,this.visibleElements=k({},t5),this._addSelectedFeatureIndexHandle(),this.own([Qe(this,"viewModel.screenLocation",()=>this._positionContainer()),Qe(this,["viewModel.active","dockEnabled"],()=>this._toggleScreenLocationEnabled()),Qe(this,"viewModel.screenLocation",(i,r)=>{!!i!=!!r&&this.reposition()}),Qe(this,["viewModel.view.padding","viewModel.view.size","viewModel.active","viewModel.location","alignment"],()=>this.reposition()),Qe(this,"spinnerEnabled",i=>this._spinnerEnabledChange(i)),Qe(this,"viewModel.view.size",(i,r)=>this._updateDockEnabledForViewSize(i,r)),Qe(this,"viewModel.view",(i,r)=>this._viewChange(i,r)),Qe(this,"viewModel.view.ready",(i,r)=>this._viewReadyChange(i,r)),Qe(this,["viewModel.waitingForResult","viewModel.location"],()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),Qe(this,["selectedFeatureWidget.viewModel.title","selectedFeatureWidget.viewModel.state"],()=>this._setTitleFromFeatureWidget()),Qe(this,["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.state"],()=>this._setContentFromFeatureWidget()),k2(this,"collapsed",()=>{var i,r;((i=this.viewModel)==null||(r=i.view)==null?void 0:r.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),oa(this,"viewModel.allActions","change",()=>this._watchActions()),Pt(this,"viewModel.allActions",()=>this._watchActions()),Qe(this,"viewModel.featureViewModels",()=>this._featureMenuViewportScrollTop())])}destroy(){var e,t;this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){var e,t,i,r,s,n,o;return!!(this.selectedFeatureWidget?((e=this.selectedFeatureWidget)==null||(t=e.viewModel)==null?void 0:t.waitingForContent)||((i=this.selectedFeatureWidget)==null||(r=i.viewModel)==null?void 0:r.state)==="error"||((s=this.selectedFeatureWidget)==null||(n=s.viewModel)==null?void 0:n.content):(o=this.viewModel)==null?void 0:o.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||QD}set dockOptions(e){const t=k({},QD),i=this.get("viewModel.view.breakpoints"),r={};i&&(r.width=i.xsmall,r.height=i.xsmall);const s=k(k({},t),e),n=k(k({},t.breakpoint),r),{breakpoint:o}=s;o===!0?s.breakpoint=n:typeof o=="object"&&(s.breakpoint=k(k({},n),o)),this._set("dockOptions",s),this._setCurrentDockPosition(),this.reposition()}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:i}=this,{selectedFeatureViewModel:r}=this.viewModel,s=be(k({},t),{title:!1});return r?(e?(e.viewModel=r,e.visibleElements=s):this._feature=new m0e({headingLevel:i+1,viewModel:r,visibleElements:s}),this._feature):null}castVisibleElements(e){return k(k({},t5),e)}blur(){const{active:e}=this.viewModel;e||e5.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||e5.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var t,i;this._handles.remove(YD);const r=!!e&&!!e.featureMenuOpen,s=!!e&&!!e.actionsMenuOpen,n={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:s,featureMenuOpen:r};((t=this.viewModel)==null||(i=t.view)==null?void 0:i.widthBreakpoint)==="xsmall"&&(n.collapsed=!0),this.set(n),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){this.viewModel.triggerAction(e)}render(){var e,t,i,r;const{actionsMenuOpen:s,dockEnabled:n,featureMenuVisible:o,dividedActions:a,currentAlignment:l,currentDockPosition:u}=this,{active:h}=this.viewModel,{menuActions:f}=a,y=h&&f.length>1&&s,g=h&&n,b=h&&!n,w=(e=this.selectedFeature)==null||(t=e.layer)==null?void 0:t.title,x=(i=this.selectedFeature)==null||(r=i.layer)==null?void 0:r.id,T={[ve.alignTopCenter]:l==="top-center",[ve.alignBottomCenter]:l==="bottom-center",[ve.alignTopLeft]:l==="top-left",[ve.alignBottomLeft]:l==="bottom-left",[ve.alignTopRight]:l==="top-right",[ve.alignBottomRight]:l==="bottom-right",[ve.isDocked]:g,[ve.shadow]:b,[ve.isDockedTopLeft]:u==="top-left",[ve.isDockedTopCenter]:u==="top-center",[ve.isDockedTopRight]:u==="top-right",[ve.isDockedBottomLeft]:u==="bottom-left",[ve.isDockedBottomCenter]:u==="bottom-center",[ve.isDockedBottomRight]:u==="bottom-right",[ve.isFeatureMenuOpen]:o,[ve.isActionsMenuOpen]:y};return $("div",{class:this.classes(ve.base,T),role:"presentation","data-layer-title":w,"data-layer-id":x,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},h?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return $("span",{"aria-hidden":"true",class:this.classes(ve.icon,ve.iconLoading,ve.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?$("div",{key:wl("loading-container"),role:"presentation",class:ve.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=Is(this.container),t={[ve.iconRightTriangleArrow]:e,[ve.paginationPreviousIconRTL]:e,[ve.iconLeftTriangleArrow]:!e,[ve.paginationPreviousIconLTR]:!e};return $("span",{"aria-hidden":"true",class:this.classes(ve.icon,t)})}renderPreviousButton(){const{messages:e}=this;return $("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(ve.button,ve.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=Is(this.container),t={[ve.iconLeftTriangleArrow]:e,[ve.paginationNextIconRTL]:e,[ve.iconRightTriangleArrow]:!e,[ve.paginationNextIconLTR]:!e};return $("span",{"aria-hidden":"true",class:this.classes(ve.icon,t)})}renderNextButton(){const{messages:e}=this;return $("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(ve.button,ve.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:i}=this,{featureCount:r,selectedFeatureIndex:s}=this.viewModel;return $("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(ve.button,ve.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":i.menu,title:i.menu},this._getPageText(r,s))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),i={[ve.iconUndock]:e,[ve.iconDock]:!e,[ve.iconDockToRight]:!e&&(t==="top-right"||t==="bottom-right"),[ve.iconDockToLeft]:!e&&(t==="top-left"||t==="bottom-left"),[ve.iconDockToTop]:!e&&t==="top-center",[ve.iconDockToBottom]:!e&&t==="bottom-center"};return $("span",{"aria-hidden":"true",class:this.classes(i,ve.icon)})}renderDockButton(){var e,t,i;const{dockEnabled:r,messages:s}=this,n=(e=this.viewModel)==null||(t=e.view)==null?void 0:t.widthBreakpoint,o=r?s.undock:s.dock;return n!=="xsmall"&&(i=this.dockOptions)!=null&&i.buttonEnabled?$("div",{role:"button","aria-label":o,title:o,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(ve.button,ve.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:i,contentCollapsed:r,messagesCommon:s}=this,n={[ve.headerContainerButton]:i},o=$(Uh,{level:this.headingLevel,class:ve.headerTitle,innerHTML:e}),a=i?$("button",{key:`${e}--collapsible`,id:t,title:r?s.expand:s.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(ve.headerContainer,n),"aria-expanded":r?"false":"true",onclick:this._toggleCollapsed,type:"button"},o):$("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(ve.headerContainer,n)},o);return e?a:null}renderCloseIcon(){return $("span",{"aria-hidden":"true",class:this.classes(ve.icon,ve.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?$("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:ve.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return $("header",{class:ve.header},this.renderTitle(),$("div",{class:ve.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:i}=this,{content:r}=this.viewModel;return t&&!i?$("article",{key:r,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:ve.content},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r,messagesCommon:s}=this,n=i?s.close:s.open,{menuActions:o}=r;return o.length?$("div",{key:wl("actions-menu-button"),class:this.classes(ve.button,ve.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":i?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":n,title:n},$("span",{"aria-hidden":"true",class:ve.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r}=this,{menuActions:s}=r;return s.length&&i?$("ul",{id:e,role:"menu","aria-labelledby":t,key:wl("actions"),class:ve.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},s.toArray().map(n=>this.renderAction({action:n,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return!!e.length&&e.toArray().map(t=>this.renderAction({action:t,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,i=!!e.length,r=!!t.length;return i||r?$("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":r.toString(),class:ve.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?$("section",{key:wl("navigation"),class:this.classes(ve.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:i,menuActions:r}=t,s=!!i.length,n=!!r.length,o={[ve.footerHasPagination]:e,[ve.footerHasActions]:s,[ve.footerHasActionsMenu]:n};return e||s?$("div",{key:wl("feature-buttons"),class:this.classes(ve.footer,o)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:i}=this.viewModel,r=wr(e.selectedFeatures,{total:t.length});return $("section",{key:wl("menu"),class:ve.featureMenu},$("strong",{class:ve.featureMenuHeader},r),$("nav",{bind:this,class:ve.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:Mn},this.renderFeatureMenu(),$("div",{class:ve.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?$("div",{class:ve.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:$("div",{key:wl("pointer"),class:ve.pointer,role:"presentation"},$("div",{class:this.classes(ve.pointerDirection,ve.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:i,titleId:r,contentId:s,collapsible:n,hasContent:o,contentCollapsed:a,visibleElements:l}=this,{title:u}=this.viewModel,h=t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right",f=t==="top-left"||t==="top-center"||t==="top-right"||i==="bottom-left"||i==="bottom-center"||i==="bottom-right",y={[ve.shadow]:e,[ve.isCollapsible]:n,[ve.isCollapsed]:a};return $("div",{class:this.classes(ve.main,ve.widget,y),tabIndex:l.closeButton?null:-1,role:"dialog","aria-labelledby":u?r:"","aria-describedby":o&&!a?s:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},h?this.renderFooter():null,h?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),f?this.renderFooter():null,f?this.renderFeatureMenuContainer():null)}renderContent(){var e;const t=(e=this.viewModel)==null?void 0:e.content;return t?typeof t=="string"?$("div",{key:t,innerHTML:t}):this.renderNodeContent(t):null}renderActionText(e){return $("span",{key:"text",class:ve.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),i=this._getActionImage(e),r={[ve.iconLoading]:e.active,[ve.rotating]:e.active,[ve.icon]:!!t,[ve.actionImage]:!e.active&&!!i};return t&&(r[t]=!e.active),$("span",{key:"icon","aria-hidden":"true",class:this.classes(ve.icon,r),styles:this._getIconStyles(i)})}renderAction(e){const{action:t,type:i}=e,r=this._getActionTitle(t),s={[ve.action]:t.type!=="toggle",[ve.actionToggle]:t.type==="toggle",[ve.actionToggleOn]:t.type==="toggle"&&t.value,[ve.buttonDisabled]:t.disabled},n=[this.renderActionIcon(t),this.renderActionText(r)],o=i==="menu-item"?$("li",{key:t.uid,role:"menuitem",tabIndex:0,title:r,"aria-label":r,class:this.classes(ve.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},n):$("div",{key:t.uid,role:"button",tabIndex:0,title:r,"aria-label":r,class:this.classes(ve.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},n);return t.visible?o:null}renderFeatureMenuItem(e,t){const{messages:i,messagesCommon:r}=this,{selectedFeatureIndex:s,selectedFeatureViewModel:n}=this.viewModel,o=e===n,a={[ve.featureMenuSelected]:o},l=o?$("span",{key:wl(`feature-menu-selected-feature-${s}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:ve.iconCheckMark}):null,u=$("span",{innerHTML:e.title||r.untitled});return $("li",{role:"menuitem",tabIndex:-1,key:wl(`feature-menu-feature-${s}`),class:this.classes(a,ve.featureMenuItem),bind:this,"data-feature-index":t,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},$("span",{class:ve.featureMenuTitle},u,l))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?$("ol",{class:ve.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter(i=>!!i.graphic).map((i,r)=>this.renderFeatureMenuItem(i,r))):null}_getActionTitle(e){const{messages:t,selectedFeature:i,messagesCommon:r}=this,{id:s}=e,n=i==null?void 0:i.attributes,o=s==="zoom-to-feature"?wr(e.title,{messages:t}):s==="remove-selected-feature"?wr(e.title,{messages:r}):s==="zoom-to-clustered-features"||s==="browse-clustered-features"?wr(e.title,{messages:t}):e.title;return o&&n?wr(o,n):o}_getActionClass(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{className:r,image:s}=e,n=s||r?r:ve.iconDefaultAction;return n&&i?wr(n,i):n}_getActionImage(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{image:r}=e;return r&&i?wr(r,i):r}_createFeatureUpdatedAnimation(){return sae("enter",ve.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if(typeof e!="number")return null;const i=Math.round(e);return Math.max(t?i-1:i,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(i=>{this._handles.add(Qe(i,["uid","active","className","disabled","id","title","image","visible"],()=>this.scheduleRender()),t)})}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter(n=>n.visible),i=this._getInlineActionCount(),r=i===null,s=i===0;return{inlineActions:r?t.slice(0):s?new ke:t.slice(0,i),menuActions:r?new ke:s?t.slice(0):t.slice(i)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:e,messagesCommon:t}=this;var i,r;e&&(this.viewModel.title=((i=e.viewModel)==null?void 0:i.state)==="error"?t.errorMessage:((r=e.viewModel)==null?void 0:r.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){Us(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){Us(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_handleFeatureMenuItemKeyup(e){const t=Us(e),{_featureMenuNode:i}=this,r=e.currentTarget["data-feature-index"];if(!i)return;const s=i.querySelectorAll("li"),n=s.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),s[s.length-1].focus()):(e.stopPropagation(),s[0].focus()):(e.stopPropagation(),s[(r+1+n)%n].focus()):(e.stopPropagation(),s[(r-1+n)%n].focus())}_handleActionMenuItemKeyup(e){const t=Us(e),{_actionsMenuNode:i}=this,r=e.currentTarget.dataset.actionUid,{menuActions:s}=this.dividedActions,n=s.findIndex(l=>l.uid===r);if(!i)return;const o=i.querySelectorAll("li"),a=o.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),o[o.length-1].focus()):(e.stopPropagation(),o[0].focus()):(e.stopPropagation(),o[(n+1+a)%a].focus()):(e.stopPropagation(),o[(n-1+a)%a].focus())}_handleMainKeyup(e){const t=Us(e);t==="ArrowLeft"&&(e.stopPropagation(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:i}=this.viewModel;i?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e.shouldFocus&&(await iv(()=>{var t;return((t=this.viewModel)==null?void 0:t.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=Qe(this,"viewModel.selectedFeatureIndex",(t,i)=>this._selectedFeatureIndexUpdated(t,i));this._handles.add(e,YD)}_selectedFeatureIndexUpdated(e,t){const{featureCount:i}=this;i&&e!==t&&e!==-1&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:i,screenLocation:r,side:s,view:n}=e;if(isNaN(i)||isNaN(t)||!n||!r)return!1;const o=n.padding;return s==="right"&&r.x+i/2>n.width-o.right||s==="left"&&r.x-i/2<o.left||s==="top"&&r.y-t<o.top||s==="bottom"&&r.y+t>n.height-o.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:i,_mainContainerNode:r,viewModel:s}=this,{screenLocation:n,view:o}=s;if(Q(n)||!o||!i)return"top-center";if(!this._isScreenLocationWithinView(n,o))return this._get("currentAlignment")||"top-center";function a(F){return parseInt(F.replace(/[^-\d\.]/g,""),10)}const l=r?window.getComputedStyle(r,null):null,u=l?a(l.getPropertyValue("max-height")):0,h=l?a(l.getPropertyValue("height")):0,{height:f,width:y}=i.getBoundingClientRect(),g=y+t,b=Math.max(f,u,h)+t,w=this._isOutsideView({popupHeight:b,popupWidth:g,screenLocation:n,side:"right",view:o}),x=this._isOutsideView({popupHeight:b,popupWidth:g,screenLocation:n,side:"left",view:o}),T=this._isOutsideView({popupHeight:b,popupWidth:g,screenLocation:n,side:"top",view:o}),M=this._isOutsideView({popupHeight:b,popupWidth:g,screenLocation:n,side:"bottom",view:o});return x?T?"bottom-right":"top-right":w?T?"bottom-left":"top-left":T?M?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return Is(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var t;if(e!=="auto")return e;const i=(t=this.viewModel)==null?void 0:t.view,r=Is(this.container)?"top-left":"top-right";if(!i)return r;const s=i.padding||{left:0,right:0,top:0,bottom:0},n=i.width-s.left-s.right,{breakpoints:o}=i;return o&&n<=o.xsmall?"bottom-center":r}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:t}=this.viewModel,{width:i}=e.getBoundingClientRect(),r=this._calculatePositionStyle(t,i);r&&(e.style.top=r.top,e.style.left=r.left,e.style.bottom=r.bottom,e.style.right=r.right)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:i}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+i:e}_calculateAlignmentPosition(e,t,i,r){const{currentAlignment:s,_pointerOffsetInPx:n}=this,o=r/2,a=i.height-t,l=i.width-e,{padding:u}=this.view;return s==="bottom-center"?{top:t+n-u.top,left:e-o-u.left}:s==="top-left"?{bottom:a+n-u.bottom,right:l+n-u.right}:s==="bottom-left"?{top:t+n-u.top,right:l+n-u.right}:s==="top-right"?{bottom:a+n-u.bottom,left:e+n-u.left}:s==="bottom-right"?{top:t+n-u.top,left:e+n-u.left}:s==="top-center"?{bottom:a+n-u.bottom,left:e-o-u.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:i,view:r}=this;if(!r)return;if(i)return{left:"",top:"",right:"",bottom:""};if(Q(e)||!t)return;const s=this._calculateFullWidth(t),n=this._calculateAlignmentPosition(e.x,e.y,r,s);return n?{top:n.top!==void 0?`${n.top}px`:"auto",left:n.left!==void 0?`${n.left}px`:"auto",bottom:n.bottom!==void 0?`${n.bottom}px`:"auto",right:n.right!==void 0?`${n.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const i=this.get("viewModel.view");this._wireUpView(i)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,i){const[r,s]=e,[n,o]=t,{width:a,height:l}=i;return r<=a&&n>a||r>a&&n<=a||s<=l&&o>l||s>l&&o<=l}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},r=i.left+i.right,s=i.top+i.bottom,n=[],o=[];n[0]=e[0]-r,n[1]=e[1]-s,o[0]=t[0]-r,o[1]=t[1]-s;const{dockOptions:a}=this,l=a.breakpoint;this._dockingThresholdCrossed(n,o,l)&&this._setDockEnabledForViewSize(a),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const i=t.active&&!e;t.screenLocationEnabled=i}_shouldDockAtCurrentViewSize(e){var t,i;const r=e.breakpoint,s=(t=this.viewModel)==null||(i=t.view)==null?void 0:i.ui;if(!s)return!1;const{width:n,height:o}=s;if(isNaN(n)||isNaN(o))return!1;const a=r.hasOwnProperty("width")&&n<=r.width,l=r.hasOwnProperty("height")&&o<=r.height;return a||l}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?wr(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,KD),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new g0e({view:e}),e.ui.add(this._spinner,{key:KD,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:i}=this.viewModel,r=i.findIndex(n=>n.uid===t),s=i.getItemAt(r);s&&s.type==="toggle"&&(s.value=!s.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(r)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};c([d({readOnly:!0})],Ne.prototype,"actionsMenuId",null),c([d({readOnly:!0})],Ne.prototype,"actionsMenuButtonId",null),c([d({readOnly:!0})],Ne.prototype,"featureMenuId",null),c([d({readOnly:!0})],Ne.prototype,"titleId",null),c([d({readOnly:!0})],Ne.prototype,"contentId",null),c([d({readOnly:!0})],Ne.prototype,"hasContent",null),c([d({readOnly:!0})],Ne.prototype,"featureNavigationVisible",null),c([d({readOnly:!0})],Ne.prototype,"collapsible",null),c([d({readOnly:!0})],Ne.prototype,"featureMenuVisible",null),c([d({readOnly:!0})],Ne.prototype,"contentCollapsed",null),c([d({readOnly:!0})],Ne.prototype,"dividedActions",null),c([ne("viewModel.actions")],Ne.prototype,"actions",void 0),c([d()],Ne.prototype,"actionsMenuOpen",null),c([d()],Ne.prototype,"alignment",void 0),c([ne("viewModel.autoCloseEnabled")],Ne.prototype,"autoCloseEnabled",void 0),c([ne("viewModel.autoOpenEnabled")],Ne.prototype,"autoOpenEnabled",void 0),c([ne("viewModel.defaultPopupTemplateEnabled")],Ne.prototype,"defaultPopupTemplateEnabled",void 0),c([ne("viewModel.content")],Ne.prototype,"content",void 0),c([d()],Ne.prototype,"collapsed",void 0),c([d()],Ne.prototype,"collapseEnabled",void 0),c([d({readOnly:!0})],Ne.prototype,"currentAlignment",null),c([d({readOnly:!0})],Ne.prototype,"currentDockPosition",null),c([d()],Ne.prototype,"dockOptions",null),c([d()],Ne.prototype,"dockEnabled",void 0),c([ne("viewModel.featureCount")],Ne.prototype,"featureCount",void 0),c([d()],Ne.prototype,"featureMenuOpen",void 0),c([ne("viewModel.features")],Ne.prototype,"features",void 0),c([ne("viewModel.goToOverride")],Ne.prototype,"goToOverride",void 0),c([d()],Ne.prototype,"headingLevel",void 0),c([ne("viewModel.highlightEnabled")],Ne.prototype,"highlightEnabled",void 0),c([ne("viewModel.location")],Ne.prototype,"location",void 0),c([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ne.prototype,"label",void 0),c([d()],Ne.prototype,"maxInlineActions",void 0),c([d(),Zt("esri/widgets/Popup/t9n/Popup")],Ne.prototype,"messages",void 0),c([d(),Zt("esri/t9n/common")],Ne.prototype,"messagesCommon",void 0),c([ne("viewModel.promises")],Ne.prototype,"promises",void 0),c([ne("viewModel.selectedFeature")],Ne.prototype,"selectedFeature",void 0),c([ne("viewModel.selectedFeatureIndex")],Ne.prototype,"selectedFeatureIndex",void 0),c([d({readOnly:!0})],Ne.prototype,"selectedFeatureWidget",null),c([d()],Ne.prototype,"spinnerEnabled",void 0),c([ne("viewModel.title")],Ne.prototype,"title",void 0),c([ne("viewModel.updateLocationEnabled")],Ne.prototype,"updateLocationEnabled",void 0),c([ne("viewModel.view")],Ne.prototype,"view",void 0),c([d({type:Cq}),f9(["triggerAction","trigger-action"])],Ne.prototype,"viewModel",void 0),c([ne("viewModel.visible")],Ne.prototype,"visible",void 0),c([d()],Ne.prototype,"visibleElements",void 0),c([gt("visibleElements")],Ne.prototype,"castVisibleElements",null),c([pr()],Ne.prototype,"_close",null),c([pr()],Ne.prototype,"_toggleDockEnabled",null),c([pr()],Ne.prototype,"_toggleFeatureMenu",null),c([pr()],Ne.prototype,"_toggleActionsMenu",null),c([pr()],Ne.prototype,"_triggerAction",null),c([pr()],Ne.prototype,"_selectFeature",null),c([pr()],Ne.prototype,"_next",null),c([pr()],Ne.prototype,"_previous",null),Ne=c([O(Eq)],Ne);const i5=Ne,z$=[0,0];function Cve(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return z$[0]=i.left+t.pageXOffset,z$[1]=i.top+t.pageYOffset,z$}function r5(e){e&&(X8(e),e.parentNode&&e.parentNode.removeChild(e))}function Eve(e){const t=document.createElement("div");return e.appendChild(t),t}const Xy=16,Db=750,Ave=512,Mve=2,Ove=e=>{let t=class extends e{constructor(...i){super(...i),this._freqInfo={freq:Xy,time:Db},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([this.watch("cursor",r=>{const s=this.surface;s&&s.setAttribute("data-cursor",r)}),this.watch("interacting",r=>{const s=this.surface;s&&s.setAttribute("data-interacting",r.toString())})])}initialize(){this.handles.add(this.watch("ui",(i,r)=>this._handleUIChange(i,r))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}set container(i){const r=this._get("container");if(r===i)return;const s="dom-size";if(this.handles.remove(s),this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),r5(this.root),this._set("root",null),pF(this.userContent,r),r5(this.userContent),this._set("userContent",null)),i){i.classList.add("esri-view");const n=document.createElement("div");n.className="esri-view-user-storage",pF(i,n),i.appendChild(n),this._set("userContent",n);const o=document.createElement("div");o.className="esri-view-root",i.insertBefore(o,i.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new xF;o.appendChild(l.surface),this._set("overlay",l),l.watch("needsRender",u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=$m({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)}),this.forceDOMReadyCycle(),this.handles.add(St(()=>this.size,u=>{const[h,f]=u,y="esri-view-surface--inset-outline";h>=document.body.clientWidth||f>=document.body.clientHeight?a.classList.add(y):a.classList.remove(y)},Ya),s),this._set("container",i),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get popup(){return this._get("popup")||new i5({view:this})}set popup(i){const r=this._get("popup");r&&r!==i&&r.destroy(),this._set("popup",i)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(i,r,s){const n=this.position;return i-=n[0],r-=n[1],s?(s[0]=i,s[1]=r):s=[i,r],s}containerToPage(i,r,s){const n=this.position;return i+=n[0],r+=n[1],s?(s[0]=i,s[1]=r):s=[i,r],s}_handleUIChange(i,r){r&&(this.handles.remove("ui"),r.destroy()),i&&this._wireUI(i),this._set("ui",i)}_wireUI(i){this.handles.remove("ui"),i&&(i.view=this,this.handles.add([St(()=>this.root,r=>{i.container=r?Eve(r):null},Ya),St(()=>this.popup,(r,s)=>{const n="popup",o="manual";s&&i.remove(s,n),r&&(r.view=i.view,i.add(r,{key:n,position:o}))},Ya)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=Xy,i.time=Db,this.handles.add([(()=>{const r=()=>{i.freq=Xy,i.time=Db};return window.addEventListener("resize",r),{remove(){window.removeEventListener("resize",r)}}})(),$m({prepare:r=>{const s=this._measure(),n=this._freqInfo;if(n.time+=r.deltaTime,s&&(n.freq=Xy,this._get("resizing")||this._set("resizing",!0)),n.time<n.freq)return;n.time=0;const o=this._position();n.freq=o||s?Xy:Math.min(Db,n.freq*Mve),!s&&n.freq>=Ave&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,s=i?i.clientHeight:0;if(r===0||s===0)return this.suspended||this._set("suspended",!0),!1;const n=this.width,o=this.height;return r===n&&s===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:n,oldHeight:o,width:r,height:s}),!0)}_position(){const i=this.container,r=this.position,s=Cve(i);return(!r||s[0]!==r[0]||s[1]!==r[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return c([d({value:null,cast:i=>sI(i)})],t.prototype,"container",null),c([d({readOnly:!0})],t.prototype,"focused",null),c([d({readOnly:!0})],t.prototype,"height",void 0),c([d({type:i5})],t.prototype,"popup",null),c([d({type:xF})],t.prototype,"overlay",void 0),c([d({readOnly:!0})],t.prototype,"position",void 0),c([d({readOnly:!0})],t.prototype,"resizing",void 0),c([d({readOnly:!0})],t.prototype,"root",void 0),c([d({value:null,readOnly:!0})],t.prototype,"size",null),c([d({readOnly:!0})],t.prototype,"surface",void 0),c([d({readOnly:!0})],t.prototype,"suspended",void 0),c([d()],t.prototype,"ui",void 0),c([d({readOnly:!0})],t.prototype,"userContent",void 0),c([d({readOnly:!0})],t.prototype,"width",void 0),c([d()],t.prototype,"widthBreakpoint",void 0),t=c([O("esri.views.DOMContainer")],t),t},kve=e=>{let t=class extends e{async fetchPopupFeatures(i,r){await this.when();const{location:s,queryArea:n,layerViewsAndGraphics:o,clientOnlyGraphics:a}=await this._prepareFetchPopupFeatures(i,r),l=Promise.resolve(a),u=this._queryLayerPopupFeatures(n,o,r),h=u.map(f=>f.promise);return{location:s,clientOnlyGraphics:a,allGraphicsPromise:AY([l,...h]).then(f=>Array.from(new Set(f.flat()))),promisesPerLayerView:u}}_queryLayerPopupFeatures(i,r,s){return r.map(({layerView:n,graphics:o})=>{const a={clientGraphics:o,event:N(s)?s.event:null,signal:N(s)?s.signal:null,defaultPopupTemplateEnabled:!!N(s)&&!!s.defaultPopupTemplateEnabled},l=n.fetchPopupFeatures(i,a);return{layerView:n,promise:l}})}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(N(r)&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,r){const{clientGraphics:s,queryArea:n,location:o}=await this._popupHitTestGraphics(i,r),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:l,clientOnlyGraphics:u}=this._graphicsPerFetchPopupLayerView(s,a);return{clientOnlyGraphics:u,layerViewsAndGraphics:l,queryArea:n,location:o}}async _popupHitTestGraphics(i,r){const{results:s,mapPoint:n}=await this.popupHitTest(i),o=s.filter(l=>this._isValidPopupGraphic(l.graphic,r)),a=o.length?o[0].mapPoint:null;return{clientGraphics:o.map(l=>l.graphic),queryArea:n,location:n||a}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&i.push(r)}),N(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return N(i)&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,r){const s=[],n=new Map,o=r.map(a=>{const l=[];return"layer"in a?n.set(a.layer,l):n.set(a.graphics,l),{layerView:a,graphics:l}});for(const a of i){const l=n.get(a.layer)||n.get(a.sourceLayer)||null;l?l.push(a):s.push(a)}return{layerViewsAndGraphics:o,clientOnlyGraphics:s}}};return t=c([O("esri.views.PopupView")],t),t};fe.getLogger("esri.core.support.OwningCollection");let j0=class extends Xs(ke){constructor(e){super(e),this.handles.add([this.on("before-add",t=>{Q(t.item)&&t.preventDefault()}),this.on("after-add",t=>this._own(t.item)),this.on("after-remove",t=>this._release(t.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(ke.ofType(this.itemType.Type))(e):new ke(e)}};function s5(e,t){return{type:e,cast:tV,set(i){const r=Zh(i,this._get(t),e);r.owner=this,this._set(t,r)}}}c([d()],j0.prototype,"owner",null),j0=c([O("esri.core.support.OwningCollection")],j0);const Pve=fe.getLogger("esri.support.AnalysesCollection");let YS=class extends j0{constructor(e){super(e),this.handles.add(this.on("before-add",t=>{Q(t.item)||t.item.parent===this.owner&&(Pve.warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};YS=c([O("esri.support.AnalysesCollection")],YS);let z0=class extends j0{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};c([UO({Type:xr,ensureType:jt(xr)})],z0.prototype,"itemType",void 0),z0=c([O("esri.support.GraphicsCollection")],z0);let au=class extends Ee{constructor(e){super(e),this.view=null,this.baseLayerViews=new ke,this.referenceLayerViews=new ke,this._loadingHandle=Pt(this,"view.map.basemap",t=>{t&&t.load().catch(()=>{})})}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var e,t;if(this.view&&this.view.suspended)return!1;const i=(e=this.view)==null||(t=e.map)==null?void 0:t.basemap;return!!i&&!!i.loaded&&(this.baseLayerViews.some(r=>r.updating)||this.referenceLayerViews.some(r=>r.updating))}};c([d({constructOnly:!0})],au.prototype,"view",void 0),c([d({readOnly:!0})],au.prototype,"baseLayerViews",void 0),c([d({readOnly:!0})],au.prototype,"referenceLayerViews",void 0),c([d({readOnly:!0})],au.prototype,"suspended",null),c([d({type:Boolean,readOnly:!0})],au.prototype,"updating",null),au=c([O("esri.views.BasemapView")],au);const Lve=fe.getLogger("esri.views.LayerViewManager");class Rve{constructor(t,i,r){this.layer=t,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=uc(),this._started=!1,this.done=!1,rs(this._controller.signal,()=>{const s=new B("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(s)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:t}=this;if(!t)return;const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:i,layerView:t}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:r}=this;this._map=r.map;try{var s,n;let o,a;if(await i.load({signal:t}),"prefetchResources"in i&&await i.prefetchResources({signal:t}),i.createLayerView)o=await i.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new B("layer:view-not-supported","No layerview implementation was found");const u=await this.layerViewImporter.importLayerView(i);Gi(t),o="default"in u?new u.default({layer:i,view:r}):new u({layer:i,view:r})}const l=()=>{a=hp(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=rs(t,l),Gi(t);try{await o.when()}catch(u){throw l(),u}if(!(!((s=this._map)==null||(n=s.allLayers)==null)&&n.includes(i)))return l(),void this._deferred.reject(new B("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=o,i.emit("layerview-create",{view:r,layerView:o}),r.emit("layerview-create",{layer:i,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){i.emit("layerview-create-error",{view:r,error:o}),r.emit("layerview-create-error",{layer:i,error:o}),this.done=!0,this._deferred.reject(new B("layerview:create-error","layerview creation failed",{layer:i,error:o}))}}}let to=class extends Am{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new pm,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var t;const i=(t=this.view.map)==null?void 0:t.allLayers;if(i)for(const r of i)this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>(Q(this._workPromise)&&(this._workPromise=uc()),this.handles.remove("reschedule"),this.handles.add(Zv(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var t,i,r;const s=this.view.map;if(this._map!==s&&(this.clear(),this._map=s),Q(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const n=new fm({getCollections:()=>this._rootCollectionNames.map(l=>this.get(l)),getChildrenFunction:l=>l&&"layers"in l?l.layers:null});if(!n)return this._workPromise.resolve(),void(this._workPromise=null);for(const l of n)this._createLayerView(l);this._refreshCollections();for(const[l,u]of this._layerLayerViewInfoMap)n.includes(l)||(this._layerLayerViewInfoMap.delete(u.layer),u.destroy());const o=n.filter(l=>l.type==="group").map(l=>l.layers),a=[s==null||(t=s.ground)==null?void 0:t.layers,s==null||(i=s.basemap)==null?void 0:i.baseLayers,s==null||(r=s.basemap)==null?void 0:r.referenceLayers,s==null?void 0:s.layers,...o].filter(l=>!!l);this.handles.add(a.map(l=>this._watchUpdatingTracking.addOnCollectionChange(()=>l,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.handles.add([Hu(()=>{var e,t;return(e=this.view)==null||(t=e.map)==null?void 0:t.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),St(()=>{const e=this.view,t=e==null?void 0:e.map;return[t==null?void 0:t.basemap,t==null?void 0:t.ground,t==null?void 0:t.layers,e==null?void 0:e.ready]},()=>this._reschedule(),Od)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return N(this._workPromise)||this._watchUpdatingTracking.updating||jx(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e))throw new B("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,i){if(!e||!t)return void(t&&t.removeAll());let r=0;for(const s of e){const n=this._layerLayerViewInfoMap.get(s);if(!n||!n.layerView)continue;const o=n.layerView;o.layer=s,o.parent=i,t.getItemAt(r)!==o&&t.splice(r,0,o),s.layers&&this._populateLayerViewsOwners(s.layers,o.layerViews,o),r+=1}r<t.length&&t.splice(r,t.length)}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new Rve(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),i=>{var r,s;i&&(_o(i)||i.name==="cancelled:layerview-create")||Lve.error(`Failed to create layerview for layer title:'${(r=e.title)!=null?r:"no title"}', id:'${(s=e.id)!=null?s:"no id"}' of type '${e.type}'.`,{layer:e,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};c([d()],to.prototype,"_workPromise",void 0),c([d({readOnly:!0})],to.prototype,"_watchUpdatingTracking",void 0),c([d({readOnly:!0})],to.prototype,"_layersToLayerViews",null),c([d({readOnly:!0})],to.prototype,"_rootCollectionNames",null),c([d()],to.prototype,"layerViewImporter",void 0),c([d()],to.prototype,"supportsGround",void 0),c([d({readOnly:!0})],to.prototype,"updating",null),c([d({readOnly:!0})],to.prototype,"updatingRemaining",null),c([d({constructOnly:!0})],to.prototype,"view",void 0),to=c([O("esri.views.LayerViewManager")],to);const Fve=to;let gn=class extends Ee{constructor(e){super(e),this.factor=1.5,this.offset=qs(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};c([d({type:Number})],gn.prototype,"factor",void 0),c([d({nonNullable:!0})],gn.prototype,"offset",void 0),c([d()],gn.prototype,"position",void 0),c([d({type:Number,range:{min:0}})],gn.prototype,"size",void 0),c([d()],gn.prototype,"maskUrl",void 0),c([d()],gn.prototype,"maskEnabled",void 0),c([d()],gn.prototype,"overlayUrl",void 0),c([d()],gn.prototype,"overlayEnabled",void 0),c([d({readOnly:!0})],gn.prototype,"version",null),c([d({type:Boolean})],gn.prototype,"visible",void 0),gn=c([O("esri.views.Magnifier")],gn);const Aq=gn;let g1=class extends Ee{constructor(){super(...arguments),this._tasks=new Array,this.running=!1}get length(){return this._tasks.length}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,i){return this.running=!0,new Promise((r,s)=>this._tasks.push(new n5(r,s,e,t,i)))}unshift(e,t,i){return this.running=!0,new Promise((r,s)=>this._tasks.unshift(new n5(r,s,e,t,i)))}_process(e){if(this._tasks.length===0)return!1;const t=this._tasks.shift();try{const i=da(t.signal);if(i&&!t.abortCallback)t.reject(qi());else{const r=i?t.abortCallback(qi()):t.callback(e);yc(r)?r.then(t.resolve,t.reject):t.resolve(r)}}catch(i){t.reject(i)}return this.running=this._tasks.length>0,!0}cancelAll(){const e=qi();for(const t of this._tasks)if(t.abortCallback){const i=t.abortCallback(e);t.resolve(i)}else t.reject(e);this._tasks.length=0,this.running=!1}};c([d()],g1.prototype,"running",void 0),g1=c([O("esri.layers.support.PromiseQueue")],g1);class n5{constructor(t,i,r,s,n){this.resolve=t,this.reject=i,this.callback=r,this.signal=s,this.abortCallback=n}}let a0=class extends Ee{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};c([d()],a0.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),c([d()],a0.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),a0=c([O("esri.views.support.DebugFlags")],a0);const Nve=new a0,Dve=fe.getLogger("esri.views.support.Scheduler");var wt;(function(e){e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="cloud generator",e[e.TEST_PRIO=1]="TEST_PRIO"})(wt||(wt={}));const qa=0,o5=new Map([[wt.RESOURCE_CONTROLLER,qa],[wt.SLIDE,qa],[wt.STREAM_DATA_LOADER,qa],[wt.ELEVATION_QUERY,qa],[wt.TERRAIN_SURFACE,1],[wt.SURFACE_GEOMETRY_UPDATES,1],[wt.GRAPHICS_CORE,2],[wt.I3S_CONTROLLER,2],[wt.POINT_CLOUD_LAYER,2],[wt.FEATURE_TILE_FETCHER,2],[wt.OVERLAY,4],[wt.STAGE,4],[wt.GRAPHICS_DECONFLICTOR,4],[wt.FILTER_VISIBILITY,4],[wt.SCALE_VISIBILITY,4],[wt.FRUSTUM_VISIBILITY,4],[wt.POINT_OF_INTEREST_FREQUENT,6],[wt.POINT_OF_INTEREST_INFREQUENT,30],[wt.LABELER,8],[wt.FEATURE_QUERY_ENGINE,8],[wt.FEATURE_TILE_TREE,16],[wt.FEATURE_TILE_TREE_ACTIVE,qa],[wt.ELEVATION_ALIGNMENT,12],[wt.TEXT_TEXTURE_ATLAS,12],[wt.CLOUDS_GENERATOR,12],[wt.TEXTURE_UNLOAD,12],[wt.LINE_OF_SIGHT_TOOL,16],[wt.LINE_OF_SIGHT_TOOL_INTERACTIVE,qa],[wt.SNAPPING,qa],[wt.SHADOW_ACCUMULATOR,30]]);function a5(e){return o5.has(e)?o5.get(e):typeof e=="number"?e:1}var xn;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(xn||(xn={}));const l5=6.5,c5=1,jve=30,u5=1e3/30,d5=100,h5=.9;var $M,Id;(function(e){let t=class extends Ee{constructor(s){super(s),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new _0("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=null,this._state=xn.INTERACTING,this._tasks=new Nh,this._runQueue=new Nh,this._load=0,this._idleStateCallbacks=new Nh,this._idleUpdatesStartFired=!1,this._maxReschedule=jb,this._forceTask=!1,this._debug=!1,this._debugHandle=St(()=>Nve.SCHEDULER_LOG_SLOW_TASKS,a=>this._debug=a,Ya),this._budget=new r(s.nowFunc);for(const a of Object.keys(wt))this.performanceInfo.tasks.set(wt[a],new _0(wt[a]));let n;const o=this;this._test={get state(){return MO(n,o._state)},set state(a){n=a},FRAME_SAFETY_BUDGET:l5,INTERACTING_BUDGET:u5,IDLE_BUDGET:d5,get budget(){return o._budget.budget},usedBudget:0,setBudget:a=>o._budget=a,updateTask:a=>this._updateTask(a),getState:a=>this._getState(a),getRuntime:a=>this._getRuntime(a),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(s=>s.remove()),this._tasks.clear(),hp(this._debugHandle),this._microTaskQueued=!1,this.updating=!1}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=jb,this._schedule(),this.frame()))}))}registerTask(s,n){const o=a5(s),a=new i(this,s,n,o);return this._tasks.push(a),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new _0(s)),a}registerIdleStateCallbacks(s,n){const o={idleBegin:s,idleEnd:n};this._idleStateCallbacks.push(o),this.state===xn.IDLE&&this._idleUpdatesStartFired&&o.idleBegin();const a=this;return{remove:()=>this._removeIdleStateCallbacks(o),set idleBegin(l){a._idleUpdatesStartFired&&(o.idleEnd(),a._state===xn.IDLE&&l()),o.idleBegin=l},set idleEnd(l){o.idleEnd=l}}}get now(){return this.nowFunc()}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==xn.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(n=>n.idleEnd())))}get state(){return Q(this._test.state)?this._state:this._test.state}updateBudget(s){this._test.usedBudget=0;let n=l5,o=s.frameDuration,a=c5;switch(this.state){case xn.IDLE:n=0,o=Math.max(d5,s.frameDuration),a=jve;break;case xn.INTERACTING:o=Math.max(u5,s.frameDuration);case xn.ANIMATING:}return o=o-s.elapsedFrameTime-n,this.state!==xn.IDLE&&o<c5&&!this._forceTask?(this._forceTask=!0,!1):(o=Math.max(o,a),this._budget.reset(o,this.state),this._maxReschedule=jb,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case xn.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(s=>s.idleBegin())),this._runIdle();break;case xn.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s)}_updateTask(s){this._tasks.forAll(n=>{n.name===s&&n.setPriority(s)})}_getState(s){if(this._runQueue.some(o=>o.name===s))return Id.SCHEDULED;let n=Id.IDLE;return this._tasks.forAll(o=>{o.name===s&&o.needsUpdate&&(o.schedulePriority<=1?n=Id.READY:n!==Id.READY&&(n=Id.WAITING))}),n}_getRuntime(s){let n=0;return this._tasks.forAll(o=>{o.name===s&&(n+=o.runtime)}),n}_resetRuntimes(){this._tasks.forAll(s=>s.runtime=0)}_getRunning(){const s=new Map;if(this._tasks.forAll(o=>{o.needsUpdate&&s.set(o.name,(s.get(o.name)||0)+1)}),s.size===0)return null;let n="";return s.forEach((o,a)=>{n+=o>1?` ${o}x ${a}`:` ${a}`}),n}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce((n,o)=>o.needsUpdate?++n:n,0);this._load=this._load*h5+s*(1-h5)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1)),this._tasks.forAll(s=>{s.basePriority===qa&&s.needsUpdate&&!this._runQueue.some(n=>n===s)&&this._runQueue.unshift(s)});this._runQueue.length===0;){let s=!1,n=0;if(this._tasks.forAll(o=>{o.needsUpdate&&o.schedulePriority!==0&&o.basePriority!==qa&&(s=!0,n=Math.max(n,o.basePriority),o.schedulePriority===1?(o.schedulePriority=0,this._runQueue.push(o)):--o.schedulePriority)}),!s)return this.updating=!1,!1;this._maxReschedule===jb&&(this._maxReschedule=n),--this._maxReschedule}return this.updating=!0,!0}_run(){const s=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const n=this._budget.now(),o=this._runQueue.pop();this._budget.resetProgress();try{o.task.runTask(this._budget)}catch(l){Dve.error(`Exception in task "${o.name}"`,l)}o.schedulePriority=o.basePriority;const a=this._budget.now()-n;if(o.runtime+=a,this._frameTaskTimes.set(o.priority,this._frameTaskTimes.get(o.priority)+a),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",o.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this.updating=this._tasks.some(l=>l.needsUpdate),void this._recordFrameTaskTimes(this._budget.now()-s)}while(this._schedule());this.updating=this._tasks.some(n=>n.needsUpdate),this._recordFrameTaskTimes(this._budget.now()-s)}_startFrameTaskTimes(){for(const s of Object.keys(wt))this._frameTaskTimes.set(wt[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach((n,o)=>this.performanceInfo.tasks.get(o).record(n)),this.performanceInfo.total.record(s)}get test(){return this._test}};c([d()],t.prototype,"updating",void 0),c([d()],t.prototype,"nowFunc",void 0),t=c([O("esri.views.support.Scheduler")],t),e.Scheduler=t;let i=class extends Ee{constructor(s,n,o,a){super({}),this._scheduler=s,this.name=n,this._basePriority=a,this.runtime=0,this._queue=new g1,this._handles=new Ai,this.schedulePriority=this._basePriority,this.task=N(o)?o:this._queue,this._handles.add(Jx(()=>this.task.running,()=>s.activate()))}get updating(){return this._queue.running}normalizeCtorArgs(){return{}}remove(){this.processQueue(Mq),this._scheduler.removeTask(this),this.schedule=CM.schedule,this.reschedule=CM.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){this.name=s;const n=a5(s);this._basePriority!==qa&&this.schedulePriority===0||(this.schedulePriority=n),this._basePriority=n}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,n,o){return this._queue.push(s,n,o)}reschedule(s,n,o){return this._queue.unshift(s,n,o)}processQueue(s){this._queue.runTask(s)}};c([d({constructOnly:!0})],i.prototype,"task",void 0),c([d({readOnly:!0})],i.prototype,"updating",null),i=c([O("esri.views.support.SchedulerTask")],i);class r{constructor(n){this.now=n,this._begin=0,this._budget=0,this._state=xn.IDLE,this._didWork=!1,this._enabled=!0}run(n){return!this.done&&(n()===!0&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(n){this._enabled=n}reset(n,o){this._begin=this.now(),this._budget=n,this._state=o,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}get elapsed(){return this.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}e.Budget=r})($M||($M={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(Id||(Id={}));const Mq=(()=>{const e=new $M.Budget(()=>performance.now());return e.enabled=!1,e})();class zve{remove(){}processQueue(){}schedule(t,i,r){try{if(da(i)){const s=qi();return r?Promise.resolve(r(s)):Promise.reject(s)}return kC(t(Mq))}catch(s){return Promise.reject(s)}}reschedule(t,i,r){return this.schedule(t,i,r)}}const CM=new zve,jb=Number.MAX_SAFE_INTEGER;let l0=class extends Ee{constructor(e,t){var i;super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i=t==null?void 0:t.registerTask(wt.TEXTURE_UNLOAD))!=null?i:CM}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,i){const r=this.makeUid(e);let s=this._textureRequests.get(r);return s||(s={referenceCount:0,texture:t(),textureAsync:null,abortController:null,onRemove:i},this._stage&&(this._stage.add(s.texture),this._stage.loadImmediate(s.texture)),this._textureRequests.set(r,s)),s.referenceCount++,{uid:r,texture:s.texture,release:()=>this._release(r)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){var t;e.onRemove&&e.onRemove(),e.texture?(t=this._stage)==null||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return N(t)?`${e}.${t}px`:e}};c([d()],l0.prototype,"_frameTask",void 0),c([d()],l0.prototype,"updating",null),l0=c([O("esri.views.3d.support.TextureCollection")],l0);var p5;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(p5||(p5={}));const Oq=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],kq={};function Pq(e){return!!kq[e]}function Vve(e){for(const t of e)if(!Pq(t))return!1;return!0}Oq.forEach(e=>{kq[e]=!0});class Uve{constructor(t){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this.handlers.forEach(({handler:i,priority:r},s)=>this.inputManager.installHandlers(s,[i],r))}disconnect(){this.inputManager&&this.handlers.forEach((t,i)=>this.inputManager.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(t,i,r,s){const n=Array.isArray(t)?t:t.split(",");if(!Vve(n))return n.some(Pq)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof r=="function"?o=r:s=r,s=s!=null?s:Zu.DEFAULT;const l=this._createUniqueGroupName(),u=new Bve(this.view,n,a,o);this.handlers.set(l,{handler:u,priority:s});for(const h of n){const f=this.handlerCounts.get(h)||0;this.handlerCounts.set(h,f+1)}return this.inputManager&&this.inputManager.installHandlers(l,[u],s),{remove:()=>this._removeHandler(l,n)}}hasHandler(t){return!!this.handlerCounts.get(t)}_removeHandler(t,i){if(this.handlers.has(t)){this.handlers.delete(t);for(const r of i){const s=this.handlerCounts.get(r);s===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):s===1?this.handlerCounts.delete(r):this.handlerCounts.set(r,s-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class Bve extends Ir{constructor(t,i,r,s){super(!0),this.view=t;for(const n of i)switch(n){case"click":this.registerIncoming("click",r,o=>s(this._wrapClick(o)));break;case"double-click":this.registerIncoming("double-click",r,o=>s(this._wrapDoubleClick(o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>s(this._wrapImmediateClick(o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>s(this._wrapImmediateDoubleClick(o)));break;case"hold":this.registerIncoming("hold",r,o=>s(this._wrapHold(o)));break;case"drag":this.registerIncoming("drag",r,o=>{const a=this._wrapDrag(o);a&&s(a)});break;case"key-down":this.registerIncoming("key-down",r,o=>s(this._wrapKeyDown(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>s(this._wrapKeyUp(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>s(this._wrapPointer(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>s(this._wrapPointer(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>s(this._wrapPointer(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>s(this._wrapPointerDrag(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>s(this._wrapMouseWheel(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>s(this._wrapPointer(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>s(this._wrapPointer(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{s(this._wrapGamepad(o))});break;case"focus":this.registerIncoming("focus",r,o=>{s(this._wrapFocus(o))});break;case"blur":this.registerIncoming("blur",r,o=>{s(this._wrapBlur(o))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,{cancelable:u,timestamp:h}=t;return{type:"click",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:h,screenPoint:qs(n,o),mapPoint:this._getMapPoint(n,o),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,{cancelable:u,timestamp:h}=t;return{type:"double-click",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:h,mapPoint:this._getMapPoint(n,o),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,u=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-click",pointerId:u,pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:f,mapPoint:this._getMapPoint(n,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,u=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-double-click",pointerId:u,pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:f,mapPoint:this._getMapPoint(n,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a}=t.data,{cancelable:l,timestamp:u}=t;return{type:"hold",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:u,mapPoint:this._getMapPoint(n,o),cancelable:l,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,i){return this.view.toMap(qs(t,i),{exclude:[]})}_wrapDrag(t){const i=t.data,{x:r,y:s}=i.center,{action:n,pointerType:o,button:a}=i;if(n==="start"&&(this.latestDragStart=i),!this.latestDragStart)return;const l=i.pointer.native,u=i.buttons,{cancelable:h,timestamp:f}=t,y={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return n==="end"&&(this.latestDragStart=void 0),{type:"drag",action:n,x:r,y:s,origin:y,pointerType:o,button:a,buttons:u,radius:i.radius,angle:o6(i.angle),native:l,timestamp:f,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:g=>t.async(g),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){const{key:i,repeat:r,native:s}=t.data,{cancelable:n,timestamp:o}=t;return{type:"key-down",key:i,repeat:r,native:s,timestamp:o,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:a=>t.async(a),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:i,native:r}=t.data,{cancelable:s,timestamp:n}=t;return{type:"key-up",key:i,native:r,timestamp:n,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:o=>t.async(o),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,i){const{x:r,y:s,button:n,buttons:o,native:a,eventId:l}=t.data,u=a.pointerId,h=a.pointerType,{cancelable:f,timestamp:y}=t;return{type:i,x:r,y:s,pointerId:u,pointerType:h,button:n,buttons:o,native:a,timestamp:y,eventId:l,cancelable:f,stopPropagation:()=>t.stopPropagation(),async:g=>t.async(g),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:i,y:r,buttons:s,native:n,eventId:o}=t.data.currentEvent,{button:a}=t.data.startEvent,l=t.data.startEvent.native.pointerId,u=t.data.startEvent.native.pointerType,h=t.data.action,f={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:y,timestamp:g}=t;return{type:"pointer-drag",x:i,y:r,pointerId:l,pointerType:u,button:a,buttons:s,action:h,origin:f,native:n,timestamp:g,eventId:o,cancelable:y,stopPropagation:()=>t.stopPropagation(),async:b=>t.async(b),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:i,data:r,timestamp:s}=t,{x:n,y:o,deltaY:a,native:l}=r;return{type:"mouse-wheel",x:n,y:o,deltaY:a,native:l,timestamp:s,cancelable:i,stopPropagation:()=>t.stopPropagation(),async:u=>t.async(u),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:i,state:r,device:s}=t.data,{cancelable:n,timestamp:o}=t,{buttons:a,axes:l}=r;return{type:"gamepad",device:s,timestamp:o,action:i,buttons:a,axes:l,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:u=>t.async(u),preventDefault:()=>t.preventDefault()}}}var Ev,f5,m5;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(Ev||(Ev={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(f5||(f5={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(m5||(m5={}));const qve=fe.getLogger("esri.views.interactive.interactiveToolUtils");function Gve(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return qve.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault()}),e.on("after-remove",t=>{const i=t.item;i.visible=!1,i.active&&(i.view.activeTool=null),i.destroy()})]}function KS(e){return e.visible&&e.getEditableFlag(Ev.USER)&&e.getEditableFlag(Ev.MANAGER)}function Fa(e){return qs(e.x,e.y)}function Lq(e,t){const i=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect();return qs(t.clientX-i.left,t.clientY-i.top)}function y5(e,t){return t instanceof Event?Lq(e,t):Fa(t)}function g5(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class Hve{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(t,i){const r=()=>t.stopPropagation();switch(t.type){case"pointer-move":v5(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!_5(t))break;const s=Fa(t),n=this._intersect(s,t.pointerType,i.forEachTool);if(Q(n))break;const o=this._findToolAndManipulatorByKey(n,i.forEachTool,zb),a=ku(o,u=>u.manipulator),l=ku(o,u=>u.tool);!(N(a)&&N(l)&&a.interactive)||a.grabbable&&a.grabbableForEvent(t)||!a.grabbing||a.dragging||this._ungrabManipulatorBeforeDragging(a,l,t),N(a)&&a.interactive&&a.grabbable&&a.grabbableForEvent(t)&&!a.grabbing&&(this._grabbedManipulators.set(t.pointerId,{key:n,start:s,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&i.activeTool!==n.tool&&(this._currentlyActiveTool=i.activeTool,this._revertToActiveTool=!0,i.setActiveTool(n.tool)),a.grabbing=!0,a.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:s}),r());break}case"pointer-up":this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!_5(t))break;const s=this._grabbedManipulators.get(t.pointerId),n=this._draggedManipulators.get(t.pointerId),o=ku(s||n,({key:h})=>h),a=this._findManipulatorByKey(o,i.forEachTool);if(Q(a))break;const l=Fa(t);l.x=fo(l.x,0,i.view.width),l.y=fo(l.y,0,i.view.height);const u=(s||n).start;switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(a.dragging=!0,n?a.events.emit("drag",{action:"update",start:u,screenPoint:l}):a.events.emit("drag",{action:"start",start:u,screenPoint:l,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{key:o,start:u}));break;case"end":a.dragging=!1,n&&a.events.emit("drag",{action:"end",start:u,screenPoint:l}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}r();break}case"immediate-click":{const s=Fa(t),n=this._intersect(s,t.pointerType,i.forEachTool),o=this._findToolAndManipulatorByKey(n,i.forEachTool,zb);if(Wve(t)||i.forEachTool(h=>{if((!N(o)||o.tool!==h||h.automaticManipulatorSelection)&&h.manipulators){let f=!1;h.manipulators.forEach(({manipulator:y})=>{y.selected&&(y.selected=!1,f=!0)}),f&&h.manipulatorSelectionChanged&&h.manipulatorSelectionChanged()}}),Q(o))break;const{manipulator:a,tool:l}=o;if(!a.interactive)break;a.selectable&&l.automaticManipulatorSelection&&(a.selected=!a.selected,l.manipulatorSelectionChanged&&l.manipulatorSelectionChanged());const u=t.native.shiftKey;a.events.emit("immediate-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:u,stopPropagation:r});break}case"click":{const s=Fa(t),n=this._intersect(s,t.pointerType,i.forEachTool),o=this._findManipulatorByKey(n,i.forEachTool);if(Q(o)||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a}),r();break}case"double-click":{const s=Fa(t),n=this._intersect(s,t.pointerType,i.forEachTool),o=this._findManipulatorByKey(n,i.forEachTool);if(Q(o)||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r});break}case"immediate-double-click":{const s=Fa(t),n=this._intersect(s,t.pointerType,i.forEachTool),o=this._findManipulatorByKey(n,i.forEachTool);if(Q(o)||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r});break}}this._updateCursor(i.forEachTool)}_ungrabManipulatorBeforeDragging(t,i,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:Fa(r)}),this._grabbedManipulators.forEach(({key:s},n)=>{s.tool===i&&i.manipulators.findById(s.manipulatorId)===t&&this._grabbedManipulators.delete(n)})}_handlePointerEnd(t,i){const r=ku(this._grabbedManipulators.get(t.pointerId),({key:n})=>n),s=this._findManipulatorByKey(r,i.forEachTool);N(s)&&!s.dragging&&(this._grabbedManipulators.size===1&&this._draggedManipulators.size===0&&this._revertToActiveTool&&(i.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),s.grabbing&&(s.grabbing=!1,s.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Fa(t)})),this._grabbedManipulators.delete(t.pointerId))}_cursorFromMap(t,i){let r=null;return jx(t,({key:s})=>{const n=this._findManipulatorByKey(s,i);return!!(N(n)&&n.interactive&&"cursor"in n&&n.cursor)&&(r=n.cursor,!0)}),r}_updateCursor(t){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators,t)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators,t)||"pointer":this._cursor=null}clearPointers(t,i,r=!0,s){const n=o=>o.tool===t&&(Q(s)||o.manipulatorId===s);this._grabbedManipulators.forEach(({key:o,pointerType:a},l)=>{if(n(o)){this._grabbedManipulators.delete(l);const u=this._findManipulatorByKey(o,i);N(u)&&(u.grabbing=!1,u.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:a}))}}),this._draggedManipulators.forEach(({key:o},a)=>{if(n(o)){this._draggedManipulators.delete(a);const l=this._findManipulatorByKey(o,i);N(l)&&(l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}}),r&&this._hoveredManipulators.forEach(({key:o},a)=>{if(n(o)){this._hoveredManipulators.delete(a);const l=this._findManipulatorByKey(o,i);N(l)&&(l.hovering=!1)}}),this._updateCursor(i)}_intersect(t,i,r){let s=null;return r(n=>{if(n.manipulators==null||!KS(n))return!1;const o=n.manipulators.intersect(t,i);return!Q(o)&&(s={manipulatorId:o.id,tool:n},!0)}),s}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(qs(i.x,i.y),r,i.pointerType,t)})}handleHoverEvent(t,i){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!v5(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Fa(t),t.pointerId,t.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(t,i,r,s){const n=this._intersect(t,r,s);let o=this._findManipulatorByKey(n,s);const a=ku(this._hoveredManipulators.get(i),({key:u})=>u),l=this._findManipulatorByKey(a,s);N(o)&&!o.interactive&&(o=null),l!==o&&(N(l)&&(l.hovering=!1),N(o)?(o.hovering=!0,this._hoveredManipulators.set(i,{key:n})):this._hoveredManipulators.delete(i),this._updateCursor(s))}_findManipulatorByKey(t,i){return this._findToolAndManipulatorByKey(t,i,zb)?zb.manipulator:null}_findToolAndManipulatorByKey(t,i,r){return Q(t)?null:(r.tool=null,r.manipulator=null,i(s=>{if(s!==t.tool||s.manipulators==null||!KS(s))return!1;const n=s.manipulators.findById(t.manipulatorId);return!!N(n)&&(r.manipulator=n,r.tool=s,!0)}),r.manipulator?r:null)}}function v5(e){return e==="mouse"}function _5(e){return e.pointerType!=="mouse"||e.button===0}function Wve(e){return!!e.native.shiftKey}const zb={manipulator:null,tool:null},b5=fe.getLogger("esri.views.ToolViewManager"),w5="attached",V$="tools";let zl=class extends Am{constructor(e){super(e),this._manipulatorState=new Hve,this.tools=new ke,this.cursor=null,this._forEachTool=t=>{for(const i of this.tools.items)if(t(i))return}}initialize(){this.handles.add([this.view.on(Oq,e=>{this._handleInputEvent(e)},Zu.TOOL),...Gve(this.tools),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._forEachTool)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}set activeTool(e){if(N(e)&&!this.view.ready)return void b5.error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return void(N(e)&&b5.warn("Tool is already active - ignoring activation request."));const t=this.activeTool;this._set("activeTool",e),N(t)&&t.deactivate(),N(e)&&e.activate(),this._removeIncompleteTools(e);const i=Q(this.activeTool);for(const r of this.tools){r.setEditableFlag(Ev.MANAGER,i||r===this.activeTool);const s=KS(r);!i&&s||this._manipulatorState.clearPointers(r,this._forEachTool,!s)}this._updateCursor()}get updating(){var e,t;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||(e=(t=this.textures)==null?void 0:t.updating)!=null&&e}attach(){this.view.type==="3d"?(this._set("textures",new l0(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([this.view.state.watch("camera",()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}),this.view.elevationProvider.on("elevation-change",e=>{this._forEachManipulator(t=>{t.onElevationChange!=null&&t.onElevationChange(e)})}),pp(()=>this._set("textures",Ha(this.textures)))],w5)):this.handles.add(this.view.watch("extent",()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}))}detach(){N(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(w5)}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:i})=>e(i,t))})}_handleInputEvent(e){let t=!1;const i=be(k({},e),{stopPropagation:()=>{t=!0,e.stopPropagation()}});N(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(r=>{!t&&r.visible&&r.handleInputEvent(i)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:r=>{this.activeTool=r},view:this.view}),!t&&N(this.activeTool)&&this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(V$),this._forEachTool(e=>{if(e instanceof Ee){const t=Qe(e,["cursor","visible","editable"],()=>{KS(e)||this._manipulatorState.clearPointers(e,this._forEachTool),this._updateCursor()});this.handles.add(t,V$)}e.manipulators&&this.handles.add(e.manipulators.on("change",t=>{t.removed.forEach(({id:i})=>{this._manipulatorState.clearPointers(e,this._forEachTool,!0,i)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}),V$)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateCursor(){let e=this._manipulatorState.cursor;this._forEachTool(t=>!(!N(t.cursor)||!t.visible)&&(e=t.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(t=>(Q(e)||t!==e)&&!t.created).forEach(t=>{this.tools.remove(t)})}};c([d({constructOnly:!0,nonNullable:!0})],zl.prototype,"view",void 0),c([d({readOnly:!0,nonNullable:!0})],zl.prototype,"textures",void 0),c([d({value:null})],zl.prototype,"activeTool",null),c([d({readOnly:!0,type:ke})],zl.prototype,"tools",void 0),c([d({readOnly:!0})],zl.prototype,"cursor",void 0),c([d({readOnly:!0})],zl.prototype,"updating",null),zl=c([O("esri.views.ToolViewManager")],zl);const Jve=zl;let Af=class extends Ee{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":Zve.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return Yve[this.deviceType]}};c([d({nonNullable:!0,readOnly:!0})],Af.prototype,"nativeIndex",void 0),c([d({type:String,readOnly:!0})],Af.prototype,"deviceType",null),c([d({type:Number,readOnly:!0})],Af.prototype,"axisThreshold",null),Af=c([O("esri.views.input.gamepad.GamepadInputDevice")],Af);const Zve=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),Yve={standard:.15,spacemouse:.025,unknown:0},iL=Af;let c0=class extends Ee{constructor(...e){super(...e),this.devices=new ke,this.enabledFocusMode="document"}};c([d({type:ke.ofType(iL),readOnly:!0})],c0.prototype,"devices",void 0),c([d({type:["document","view","none"]})],c0.prototype,"enabledFocusMode",void 0),c0=c([O("esri.views.input.gamepad.GamepadSettings")],c0);const Kve=c0;let v1=class extends Ee{constructor(){super(...arguments),this.gamepad=new Kve}};c([d({readOnly:!0})],v1.prototype,"gamepad",void 0),v1=c([O("esri.views.input.Input")],v1);const Qve=v1;let lu=class extends Ee{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};c([d({type:Boolean,nonNullable:!0})],lu.prototype,"enabled",void 0),c([d({type:iL})],lu.prototype,"device",void 0),c([d({type:["pan","zoom"],nonNullable:!0})],lu.prototype,"mode",void 0),c([d({type:["forward-down","forward-up"],nonNullable:!0})],lu.prototype,"tiltDirection",void 0),c([d({type:Number,nonNullable:!0})],lu.prototype,"velocityFactor",void 0),lu=c([O("esri.views.navigation.gamepad.GamepadSettings")],lu);const Rq=lu;let lh=class extends Ee{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new Rq,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};c([d({type:Boolean})],lh.prototype,"browserTouchPanEnabled",void 0),c([d({type:Rq,nonNullable:!0})],lh.prototype,"gamepad",void 0),c([d({type:Boolean})],lh.prototype,"momentumEnabled",void 0),c([d({type:Boolean})],lh.prototype,"mouseWheelZoomEnabled",void 0),lh=c([O("esri.views.navigation.Navigation")],lh);const Fq=lh;var S5;function Xve(e){const t=e.url&&b_(e.url);return!((e.spatialReference&&e.spatialReference.vcsWkid)==null&&N(t)&&t.serverType==="ImageServer")&&Nq(e)&&e.heightModelInfo?e.heightModelInfo:e_e(e)?SI.deriveUnitFromSR(i_e,e.spatialReference):null}function Nq(e){return"heightModelInfo"in e}function Dq(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return!0;default:return!1}}function e_e(e){return Dq(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):jq(e)}function t_e(e){return e.layers!=null||jq(e)||Dq(e)||Nq(e)}function jq(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"analysis":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(S5||(S5={}));const i_e=new SI({heightModel:"gravity-related-height"});var Av;function x5(e){return e===Av.Global?"global":"local"}(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(Av||(Av={}));let EM,U$=null;async function r_e(e){U$||(U$=se(()=>import("./geometryServiceUtils.c7ae33aa.js"),["assets/geometryServiceUtils.c7ae33aa.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]).then(t=>EM=t)),await U$,Gi(e)}async function zq(e,t,i,r){if(!e)return null;const s=e.spatialReference;return Fm()||op(s,t)?a_(e,t):EM?EM.projectGeometry(e,t,i,r):(await Promise.race([r_e(r),Nm(r)]),zq(e,t,i,r))}const Vq=fe.getLogger("esri.views.support.DefaultsFromMap");Vq.level="info";let Bt=class extends Ee{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.logDebugInformation=!1,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._debug("Aborting project extent task"),this._projectExtentTask.task=CC(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return N(this.userSpatialReference)?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return Q(this.userSpatialReference)||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var e,t,i,r;const s=(e=this.map)==null?void 0:e.call(this),n=[];return N(this.priorityCollection)&&n.push(this.priorityCollection),n.push({parent:s==null?void 0:s.basemap,layers:s==null||(t=s.basemap)==null?void 0:t.baseLayers},{layers:s==null?void 0:s.layers},{parent:s==null?void 0:s.ground,layers:s==null||(i=s.ground)==null?void 0:i.layers},{parent:s==null?void 0:s.basemap,layers:s==null||(r=s.basemap)==null?void 0:r.referenceLayers}),n}get _allLayers(){var e,t;const i=this._collectLayers(this.mapCollections);return this._debug("Collected",(e=(t=i.layers)==null?void 0:t.length)!=null?e:0,"layers, updating",i.updating),i}get _spatialReferenceTask(){var e,t;if(this.suspended)return(t=this._get("_spatialReferenceTask"))!=null?t:{updating:!1};const{layers:i,updating:r}=this._allLayers,s={candidates:null};for(const o of i)if(this._processSpatialReferenceCandidates(o,s),s.candidates&&s.candidates.length===1)break;if(((e=s.candidates)==null?void 0:e.length)!==1&&r)return{updating:!0};const n=this._pickSpatialReferenceCandidate(s.candidates);return this._debug("Finished spatial reference",N(n)?`${n.spatialReference.wkid}:${N(n.viewingMode)?x5(n.viewingMode):"global/local"}`:"none available"),{spatialReference:N(n)?n.spatialReference:null,viewingMode:N(n)?n.viewingMode:null,updating:!1}}get _tileInfoTask(){var e,t,i,r,s,n,o,a;if(!this.required.tileInfo)return(a=this._get("_tileInfoTask"))!=null?a:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:l,updating:u}=this._collectLayers([{parent:(e=this.map)==null||(t=e.call(this))==null?void 0:t.basemap,layers:(i=this.map)==null||(r=i.call(this))==null||(s=r.basemap)==null?void 0:s.baseLayers},{layers:(n=this.map)==null||(o=n.call(this))==null?void 0:o.layers}]);if(l&&l.length>0&&"tileInfo"in l[0]){const h=l[0].tileInfo;return{tileInfo:h&&h.spatialReference.equals(this.spatialReference)?h:null,updating:!1}}return{updating:u}}get _heightModelInfoTask(){var e,t;if(!this.required.heightModelInfo||this.suspended&&(e=this._get("_heightModelInfoTask"))!=null&&e.heightModelInfo)return(t=this._get("_heightModelInfoTask"))!=null?t:{updating:!1};const{layers:i,updating:r}=this._allLayers;for(const l of i){var s,n;if(this._debug("Considering",(s=(n=l.title)!=null?n:l.id)!=null?s:l.declaredClass,"for height model info"),t_e(l)){const u=Xve(l);var o,a;if(u)return this._debug("Derived height model info",u),{heightModelInfo:u,vcsWkid:(o=l.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(a=l.spatialReference)==null?void 0:a.latestVcsWkid,updating:!1}}this._debug("Layer does not support height models")}return this._debug("No height model info found,","updating",r),{updating:r}}get _extentCandidatesTask(){var e;if(this.suspended||!this.required.extent)return(e=this._get("_extentCandidatesTask"))!=null?e:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=this._allLayers,i=t.updating,r=[];for(const n of t.layers){var s;const o="fullExtents"in n&&n.fullExtents||(N(n.fullExtent)?[n.fullExtent]:[]),a=this.requiresExtentInSpatialReference?null:o[0],l=(s=o.find(u=>u.spatialReference.equals(this.spatialReference)))!=null?s:a;if(l)return{candidates:[{extent:l,layer:n}],updating:!1};if(this._getSupportedSpatialReferences(n).length>0)for(const u of o)r.push({extent:u,layer:n})}return{candidates:r,updating:i}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(Q(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),r=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&r.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:N(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(N(this._projectExtentTask.task)&&(this._debug("Aborting project extent task"),this._projectExtentTask.task=CC(this._projectExtentTask.task)),this._debug("Starting project extent task for",i.extent),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:r.clone(),task:Oz(async s=>{try{const n=await zq(i.extent,r,i.layer.portalItem,s);this._debug("Project extent task finished",n),this._projectExtentTask=be(k({},this._projectExtentTask),{task:null,output:n})}catch{if(da(s))return;this._projectExtentTask=be(k({},this._projectExtentTask),{task:null})}})},{updating:!0})}_processSpatialReferenceCandidates(e,t){var i;const r=this._getSupportedSpatialReferences(e);if(r.length!==0)if(this._debug("Spatial reference candidates from",(i=e.title)!=null?i:e.id,":",r.map(s=>`${s.spatialReference.wkid}:${N(s.viewingMode)?x5(s.viewingMode):"global/local"}`).join(", ")),t.candidates){const s=[],n=(o,a)=>Q(o.viewingMode)?a.viewingMode:(Q(a.viewingMode)||o.viewingMode===a.viewingMode)&&o.viewingMode;for(const o of t.candidates)for(const a of r){if(!o.spatialReference.equals(a.spatialReference))continue;const l=n(o,a);if(l!==!1){s.push({spatialReference:o.spatialReference,viewingMode:l});break}}s.length>0&&(t.candidates=s)}else t.candidates=r}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return!e||e.length<1?N(t)?{spatialReference:t,viewingMode:null}:null:(N(t)&&e.length>1&&e.some(({spatialReference:i})=>i.equals(t))&&(e=e.filter(({spatialReference:i})=>i.equals(t))),e.length>1&&e.some(({viewingMode:i})=>i!==Av.Local)&&(e=e.filter(({viewingMode:i})=>i!==Av.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const i=[];for(const r of t){const s=this.getSpatialReferenceSupport({spatialReference:r,layer:e});if(N(s)){const n=N(s.constraints)?s.constraints:[{spatialReference:r}];for(const{spatialReference:o,viewingMode:a}of n)(!this.requiresExtentInSpatialReference||Q(this.userSpatialReference)||o.equals(this.userSpatialReference))&&i.push({spatialReference:o,viewingMode:a})}}return i}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:i})=>t.equals(i.spatialReference))||e[0]}_collectLayers(e){var t;if(this._loadMaybe((t=this.map)==null?void 0:t.call(this))!=="loaded")return{layers:[],updating:!0};const i={layers:[],preloading:-1,updating:!1};for(const r of e)if(this._collectCollection(r,i),i.preloading===this.sourcePreloadCount)break;return{layers:i.layers,updating:i.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const s of e.layers){switch(this._loadMaybe(s)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":var i,r;t.updating||(this._debug("Considering layer",(i=(r=s.title)!=null?r:s.id)!=null?i:s.declaredClass),t.layers.push(s)),"layers"in s&&this._collectCollection({layers:s.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e?e.loadStatus==="not-loaded"?(this._debug("Triggering load",(t=(i=e.title)!=null?i:e.id)!=null?t:e.declaredClass),e.load(),"loading"):e.loadStatus:"loaded";var t,i}_debug(...e){this.logDebugInformation&&Vq.info(...e)}};c([d()],Bt.prototype,"required",void 0),c([d({constructOnly:!0})],Bt.prototype,"map",void 0),c([d({constructOnly:!0})],Bt.prototype,"getSpatialReferenceSupport",void 0),c([d()],Bt.prototype,"defaultSpatialReference",void 0),c([d()],Bt.prototype,"userSpatialReference",void 0),c([d()],Bt.prototype,"sourcePreloadCount",void 0),c([d()],Bt.prototype,"priorityCollection",void 0),c([d()],Bt.prototype,"logDebugInformation",void 0),c([d()],Bt.prototype,"requiresExtentInSpatialReference",void 0),c([d()],Bt.prototype,"suspended",void 0),c([d({readOnly:!0})],Bt.prototype,"ready",null),c([d({readOnly:!0})],Bt.prototype,"heightModelInfoReady",null),c([d({readOnly:!0})],Bt.prototype,"spatialReference",null),c([d({readOnly:!0})],Bt.prototype,"extent",null),c([d({readOnly:!0})],Bt.prototype,"heightModelInfo",null),c([d({readOnly:!0})],Bt.prototype,"vcsWkid",null),c([d({readOnly:!0})],Bt.prototype,"latestVcsWkid",null),c([d({readOnly:!0})],Bt.prototype,"viewingMode",null),c([d({readOnly:!0})],Bt.prototype,"tileInfo",null),c([d({readOnly:!0})],Bt.prototype,"mapCollections",null),c([d({readOnly:!0})],Bt.prototype,"_allLayers",null),c([d({readOnly:!0})],Bt.prototype,"_spatialReferenceTask",null),c([d({readOnly:!0})],Bt.prototype,"_tileInfoTask",null),c([d({readOnly:!0})],Bt.prototype,"_heightModelInfoTask",null),c([d({readOnly:!0})],Bt.prototype,"_extentCandidatesTask",null),c([d()],Bt.prototype,"_extentTask",null),c([d()],Bt.prototype,"_projectExtentTask",void 0),Bt=c([O("esri.views.support.DefaultsFromMap")],Bt);const s_e=Bt;var _1;const Vb=fe.getLogger("esri.views.View");let He=_1=class extends Xs(bo.EventedMixin(Vx(Ee))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new fm({getCollections:()=>{var t,i,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:t=>t.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.fatalError=null,this.extent=null,this.graphics=new z0,this.analyses=new YS,this.navigating=!1,this.typeSpecificPreconditionsReady=!0,this.layerViews=new ke,this.magnifier=new Aq,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new Qve,this.navigation=new Fq,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Uve(this),this.persistableViewModels=new ke,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(this.watch("preconditionsReady",t=>{var i,r;t?(this._currentSpatialReference=this.spatialReference,_1.views.add(this)):(this._currentSpatialReference=null,_1.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?((i=this.layerViewManager)==null||i.clear(),(r=this.toolViewManager)==null||r.detach(),N(this.analysisViewManager)&&this.analysisViewManager.detach(),this._teardown()):t&&!this.ready&&(N(this.analysisViewManager)&&this.analysisViewManager.attach(),this._startup(),this.toolViewManager.attach())},!0))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,iv(()=>this.ready)))),this.basemapView=new au({view:this}),this.layerViewManager=new Fve({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Jve({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([St(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required=be(k({},this.defaultsFromMap.required),{extent:e}),{sync:!0,initial:!0}),St(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),St(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([St(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var i;const r=((i=this.map)==null?void 0:i.allLayers.length)>0;if(t&&!this.spatialReference&&r){if(N(e))return;const s=pp(()=>e=CC(e));e=Oz(async n=>{try{await Fx(this.spatialReferenceWarningDelay,null,n)}catch{return}finally{e=null}Vb.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(s,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Ha(this.graphics),this.analyses=Ha(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.toolViewManager=Ha(this.toolViewManager),this.layerViewManager=Ha(this.layerViewManager),this.basemapView=Ha(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,e==null||e.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Vb.error("#toMap()","Not implemented on this instance of View"),null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new s_e(k({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e)},this._defaultsFromMapSettings))}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||dc.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!(this._currentSpatialReference||(e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}set map(e){var t;e!==this._get("map")&&((t=e)!=null&&t.destroyed&&(Vb.warn("#map","The provided map is already destroyed",{map:e}),e=null),dc.isLoadable(e)&&e.load().catch(()=>{}),this.initialized&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){var e,t;let i=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return i&&(e=this.defaultsFromMap)!=null&&(t=e.required)!=null&&t.heightModelInfo&&(i=i.clone(),i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),i}set spatialReference(e){const t=!Qs(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return N(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e,t,i;return(e=(t=this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)!=null?t:(i=this.defaultsFromMap)==null?void 0:i.heightModelInfo)!=null?e:null}importLayerView(e){throw new B("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{}}_validateSpatialReference(e){return N(this.getSpatialReferenceSupport({spatialReference:e}))}when(e,t){return this.isResolved()&&!this.ready&&Vb.warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(Jx(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};He.views=new ke,c([d()],He.prototype,"_userSpatialReference",void 0),c([ne("toolViewManager.activeTool")],He.prototype,"activeTool",void 0),c([d({readOnly:!0})],He.prototype,"allLayerViews",void 0),c([d()],He.prototype,"groundView",void 0),c([d()],He.prototype,"animation",void 0),c([d()],He.prototype,"basemapView",void 0),c([d({readOnly:!0})],He.prototype,"_defaultsFromMapSettings",null),c([d()],He.prototype,"defaultsFromMap",null),c([d()],He.prototype,"fatalError",void 0),c([d({type:Et})],He.prototype,"extent",void 0),c([d(s5(z0,"graphics"))],He.prototype,"graphics",void 0),c([d(s5(YS,"analyses"))],He.prototype,"analyses",void 0),c([d({readOnly:!0,type:SI})],He.prototype,"heightModelInfo",null),c([d({readOnly:!0})],He.prototype,"interacting",null),c([d({readOnly:!0})],He.prototype,"navigating",void 0),c([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],He.prototype,"preconditionsReady",null),c([d({readOnly:!0})],He.prototype,"typeSpecificPreconditionsReady",void 0),c([d({type:ke,readOnly:!0})],He.prototype,"layerViews",void 0),c([d({type:Aq})],He.prototype,"magnifier",void 0),c([d({value:null,type:C6})],He.prototype,"map",null),c([d()],He.prototype,"padding",void 0),c([d({readOnly:!0})],He.prototype,"ready",void 0),c([d({type:Xe})],He.prototype,"spatialReference",null),c([d()],He.prototype,"spatialReferenceWarningDelay",void 0),c([d()],He.prototype,"stationary",null),c([d({readOnly:!0})],He.prototype,"supportsGround",void 0),c([d({type:ul})],He.prototype,"timeExtent",void 0),c([ne("toolViewManager.tools")],He.prototype,"tools",void 0),c([d()],He.prototype,"toolViewManager",void 0),c([d({readOnly:!0})],He.prototype,"type",void 0),c([d({type:Number})],He.prototype,"scale",void 0),c([d({readOnly:!0})],He.prototype,"updating",void 0),c([d({readOnly:!0})],He.prototype,"initialExtentRequired",void 0),c([d({readOnly:!0})],He.prototype,"initialExtent",null),c([d()],He.prototype,"cursor",null),c([d({readOnly:!0})],He.prototype,"input",void 0),c([d({type:Fq,nonNullable:!0})],He.prototype,"navigation",void 0),c([d()],He.prototype,"layerViewManager",void 0),c([d()],He.prototype,"analysisViewManager",void 0),c([d()],He.prototype,"width",void 0),c([d()],He.prototype,"height",void 0),c([d({readOnly:!0})],He.prototype,"resizing",void 0),c([d({value:null,readOnly:!0})],He.prototype,"size",null),c([d({readOnly:!0})],He.prototype,"suspended",void 0),c([d({readOnly:!0})],He.prototype,"viewEvents",void 0),c([d({readOnly:!0})],He.prototype,"persistableViewModels",void 0),c([d()],He.prototype,"_isValid",void 0),c([d()],He.prototype,"_readyCycleForced",void 0),c([d()],He.prototype,"_currentSpatialReference",void 0),He=_1=c([O("esri.views.View")],He);const n_e=He;let cu=class extends X1{constructor(e){super(e),this.state="running",this.target=null}initialize(){this.addResolvingPromise(new Promise((e,t)=>this._dfd={resolve:e,reject:t}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._dfd.reject(new B("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._dfd.resolve())}update(e,t){t||(t=yc(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};c([d({readOnly:!0})],cu.prototype,"done",null),c([d({readOnly:!0,type:String})],cu.prototype,"state",void 0),c([d()],cu.prototype,"target",void 0),cu=c([O("esri.views.ViewAnimation")],cu),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(cu||(cu={}));const AM=cu;function vh(e,t,i,r){const s=3*e,n=3*(i-e)-s,o=1-s-n,a=3*t,l=3*(r-t)-a,u=1-a-l;function h(b){return((o*b+n)*b+s)*b}function f(b){return((u*b+l)*b+a)*b}function y(b){return(3*o*b+2*n)*b+s}function g(b,w){let x,T,M,F,D,R;for(M=b,R=0;R<8;R++){if(F=h(M)-b,Math.abs(F)<w)return M;if(D=y(M),Math.abs(D)<1e-6)break;M-=F/D}if(x=0,T=1,M=b,M<x)return x;if(M>T)return T;for(;x<T;){if(F=h(M),Math.abs(F-b)<w)return M;b>F?x=M:T=M,M=.5*(T-x)+x}return M}return function(b,w=1e-6){return f(g(b,w))}}const o_e=/^cubic-bezier\((.*)\)/,no={};function a_e(e){let t=no[e]||null;if(!t){const i=o_e.exec(e);if(i){const r=i[1].split(",").map(s=>parseFloat(s.trim()));r.length!==4||r.some(s=>isNaN(s))||(t=vh.apply(vh,r))}}return t}no.ease=vh(.25,.1,.25,1),no.linear=vh(0,0,1,1),no.easeIn=no["ease-in"]=vh(.42,0,1,1),no.easeOut=no["ease-out"]=vh(0,0,.58,1),no.easeInOut=no["ease-in-out"]=vh(.42,0,.58,1);function l_e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function LI(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function c_e(e,t,i,r,s,n,o){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=n,e[5]=o,e}function rL(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5];let l=i*n-r*s;return l?(l=1/l,e[0]=n*l,e[1]=-r*l,e[2]=-s*l,e[3]=i*l,e[4]=(s*a-n*o)*l,e[5]=(r*o-i*a)*l,e):null}function u_e(e){return e[0]*e[3]-e[1]*e[2]}function _h(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=i[0],h=i[1],f=i[2],y=i[3],g=i[4],b=i[5];return e[0]=r*u+n*h,e[1]=s*u+o*h,e[2]=r*f+n*y,e[3]=s*f+o*y,e[4]=r*g+n*b+a,e[5]=s*g+o*b+l,e}function S_(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=Math.sin(i),h=Math.cos(i);return e[0]=r*h+n*u,e[1]=s*h+o*u,e[2]=r*-u+n*h,e[3]=s*-u+o*h,e[4]=a,e[5]=l,e}function RI(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=i[0],h=i[1];return e[0]=r*u,e[1]=s*u,e[2]=n*h,e[3]=o*h,e[4]=a,e[5]=l,e}function Bm(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=i[0],h=i[1];return e[0]=r,e[1]=s,e[2]=n,e[3]=o,e[4]=r*u+n*h+a,e[5]=s*u+o*h+l,e}function Uq(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function Bq(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function sL(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function d_e(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function h_e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function p_e(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function qq(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function f_e(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function m_e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e}function y_e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function g_e(e,t){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=t[0],u=t[1],h=t[2],f=t[3],y=t[4],g=t[5];return Math.abs(i-l)<=Ke*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-u)<=Ke*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(s-h)<=Ke*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(n-f)<=Ke*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(o-y)<=Ke*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(a-g)<=Ke*Math.max(1,Math.abs(a),Math.abs(g))}const v_e=_h,__e=qq;Object.freeze({__proto__:null,copy:l_e,identity:LI,set:c_e,invert:rL,determinant:u_e,multiply:_h,rotate:S_,scale:RI,translate:Bm,fromRotation:Uq,fromScaling:Bq,fromTranslation:sL,str:d_e,frob:h_e,add:p_e,subtract:qq,multiplyScalar:f_e,multiplyScalarAndAdd:m_e,exactEquals:y_e,equals:g_e,mul:v_e,sub:__e});function Yu(){return[1,0,0,1,0,0]}function b_e(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function w_e(e,t,i,r,s,n){return[e,t,i,r,s,n]}function S_e(e,t){return new Float64Array(e,t,6)}Object.freeze({__proto__:null,create:Yu,clone:b_e,fromValues:w_e,createView:S_e});function Mv(e,t){return e[0]=t[0],e[1]=t[1],e}function br(e,t,i){return e[0]=t,e[1]=i,e}function Gq(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function Ov(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function Hq(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function Wq(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function x_e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function I_e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function T_e(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function $_e(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function C_e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function x_(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function E_e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function I_(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function QS(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function XS(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function Jq(e){const t=e[0],i=e[1];return t*t+i*i}function Zq(e,t){return e[0]=-t[0],e[1]=-t[1],e}function A_e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function MM(e,t){const i=t[0],r=t[1];let s=i*i+r*r;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e}function Yq(e,t){return e[0]*t[0]+e[1]*t[1]}function Kq(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function M_e(e,t,i,r){const s=t[0],n=t[1];return e[0]=s+r*(i[0]-s),e[1]=n+r*(i[1]-n),e}function O_e(e,t){t=t||1;const i=2*Fu()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function k_e(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[2]*s,e[1]=i[1]*r+i[3]*s,e}function Ga(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[2]*s+i[4],e[1]=i[1]*r+i[3]*s+i[5],e}function P_e(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[3]*s+i[6],e[1]=i[1]*r+i[4]*s+i[7],e}function L_e(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[4]*s+i[12],e[1]=i[1]*r+i[5]*s+i[13],e}function R_e(e,t,i,r){const s=t[0]-i[0],n=t[1]-i[1],o=Math.sin(r),a=Math.cos(r);return e[0]=s*a-n*o+i[0],e[1]=s*o+n*a+i[1],e}function F_e(e,t){const i=e[0],r=e[1],s=t[0],n=t[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let a=s*s+n*n;a>0&&(a=1/Math.sqrt(a));const l=(i*s+r*n)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function N_e(e){return"vec2("+e[0]+", "+e[1]+")"}function D_e(e,t){return e[0]===t[0]&&e[1]===t[1]}function j_e(e,t){const i=e[0],r=e[1],s=t[0],n=t[1];return Math.abs(i-s)<=Ke*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-n)<=Ke*Math.max(1,Math.abs(r),Math.abs(n))}function z_e(e,t,i,r,s){let n=t[0]-i[0],o=t[1]-i[1];const a=(r[0]*n+r[1]*o)*(s-1);return n=r[0]*a,o=r[1]*a,e[0]=t[0]+n,e[1]=t[1]+o,e}const V_e=XS,nL=Ov,U_e=Hq,B_e=Wq,q_e=I_,G_e=QS,H_e=Jq;Object.freeze({__proto__:null,copy:Mv,set:br,add:Gq,subtract:Ov,multiply:Hq,divide:Wq,ceil:x_e,floor:I_e,min:T_e,max:$_e,round:C_e,scale:x_,scaleAndAdd:E_e,distance:I_,squaredDistance:QS,length:XS,squaredLength:Jq,negate:Zq,inverse:A_e,normalize:MM,dot:Yq,cross:Kq,lerp:M_e,random:O_e,transformMat2:k_e,transformMat2d:Ga,transformMat3:P_e,transformMat4:L_e,rotate:R_e,angle:F_e,str:N_e,exactEquals:D_e,equals:j_e,projectAndScale:z_e,len:V_e,sub:nL,mul:U_e,div:B_e,dist:q_e,sqrDist:G_e,sqrLen:H_e});function ji(){return[0,0]}function W_e(e){return[e[0],e[1]]}function T_(e,t){return[e,t]}function J_e(e){const t=ji(),i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function Z_e(e,t){return new Float64Array(e,t,2)}function Qq(){return ji()}function Xq(){return T_(1,1)}function eG(){return T_(1,0)}function tG(){return T_(0,1)}const Y_e=Qq(),K_e=Xq(),Q_e=eG(),X_e=tG();Object.freeze({__proto__:null,create:ji,clone:W_e,fromValues:T_,fromArray:J_e,createView:Z_e,zeros:Qq,ones:Xq,unitX:eG,unitY:tG,ZEROS:Y_e,ONES:K_e,UNIT_X:Q_e,UNIT_Y:X_e});const iG=96,rG=39.37,ebe=180/Math.PI;function sG(e){return e.wkid?e:e.spatialReference||Xe.WGS84}function oL(e,t){return t.type?br(e,t.x,t.y):Mv(e,t)}function nG(e){return nd(e)}function V0(e,t){return Math.max(e.width/t[0],e.height/t[1])*cbe(e.spatialReference)}async function u0(e,t,i,r){let s,n;if(!e||Array.isArray(e)&&!e.length)return null;if(ke.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const a=e.every(h=>"attributes"in h),l=e.some(h=>!h.geometry);let u=e;if(a&&l&&t&&t.allLayerViews){const h=new Map;for(const b of e){const w=b.layer,x=h.get(w)||[],T=b.attributes[w.objectIdField];T!=null&&x.push(T),h.set(w,x)}const f=[];h.forEach((b,w)=>{const x=t.allLayerViews.find(T=>T.layer.id===w.id);if("queryFeatures"in x){const T=w.createQuery();T.objectIds=b,T.returnGeometry=!0,f.push(x.queryFeatures(T))}});const y=await Promise.all(f),g=[];for(const b of y)if(b&&b.features&&b.features.length)for(const w of b.features)N(w.geometry)&&g.push(w.geometry);u=g}for(const h of u)r=await u0(h,t,i,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")s=new Le(e);else if(e instanceof Ys)s=e;else if("geometry"in e){if(e.geometry)s=e.geometry;else if(e.layer){const a=e.layer,l=t.allLayerViews.find(u=>u.layer.id===a.id);if("queryFeatures"in l){const u=a.createQuery();u.objectIds=[e.attributes[a.objectIdField]],u.returnGeometry=!0;const h=await l.queryFeatures(u);s=Cx(h,"features",0,"geometry")}}}if(Q(s)||(n=s.type==="point"?new Et({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference}):s.extent,!n))return null;Fm()||op(n.spatialReference,i)||await Nm();const o=a_(n,i);return o?r=r?r.union(o):o:null}function tbe(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,i=0;for(const r of e){const s=r.layer;s&&s.minScale&&s.maxScale&&(t=s.minScale<t?s.minScale:t,i=s.maxScale>i?s.maxScale:i)}return t&&i?{min:t,max:i}:null}}}function B$(e,t){return Qs(sG(e),t)?e:a_(e,t)}async function ibe(e,t){if(!e||!t)return new Ka({targetGeometry:new Le,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:s,viewpoint:n,size:o}=t,a=[s?o[0]-s.left-s.right:o[0],s?o[1]-s.top-s.bottom:o[1]];let l=null;e instanceof Ka?l=e:e.viewpoint?l=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(l=e.target);let u=null;l&&l.targetGeometry?u=l.targetGeometry:e instanceof Et?u=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(u=await u0(e.center,t,i)||await u0(e.extent,t,i)||await u0(e.target,t,i)||await u0(e,t,i)),!u&&n&&n.targetGeometry?u=n.targetGeometry:!u&&t.extent&&(u=t.extent),i||(i=sG(t.spatialReference||t.extent||u)),Fm()||Qs(u.spatialReference,i)||op(u,i)||await Nm();const h=B$(u.center?u.center:u,i);let f=null;if(l&&N(l.targetGeometry)&&l.targetGeometry.type==="point")f=l.scale;else if("scale"in e&&e.scale)f=e.scale;else if("zoom"in e&&e.zoom!==-1&&r&&r.effectiveLODs)f=r.zoomToScale(e.zoom);else if(Array.isArray(u)||u.type==="point"||u.type==="extent"&&u.width===0&&u.height===0){const w=B$(t.extent,i);f=N(w)?V0(w,a):t.extent?V0(t.extent,a):n.scale}else f=V0(B$(u.extent,i),a);const y=tbe(e);y&&(y.min&&y.min>f?f=y.min:y.max&&y.max<f&&(f=y.max));let g=0;l?g=l.rotation:e.hasOwnProperty("rotation")?g=e.rotation:n&&(g=n.rotation);let b=new Ka({targetGeometry:h,scale:f,rotation:g});return r&&(b=r.fit(b),r.constrainByGeometry(b),r.rotationEnabled||(b.rotation=g)),b}function fa(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function rbe(e,t,i){return i?br(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):x_(e,t,.5)}const sbe=function(){const e=ji();return function(t,i,r){const s=i.targetGeometry;oL(e,s);const n=.5*wy(i);return t.xmin=e[0]-n*r[0],t.ymin=e[1]-n*r[1],t.xmax=e[0]+n*r[0],t.ymax=e[1]+n*r[1],t.spatialReference=s.spatialReference,t}}();function nbe(e,t,i,r,s){return OM(e,t,i.center),e.scale=V0(i,r),s&&s.constraints&&s.constraints.constrain(e),e}function obe(e,t,i,r){return cL(e,t,i,r),rL(e,e)}const oG=function(){const e=ji();return function(t,i,r){return nL(t,ube(t,i),rbe(e,i,r))}}(),abe=function(){const e=Yu(),t=ji();return function(i,r,s,n){const o=wy(r),a=aL(r);return br(t,o,o),Bq(e,t),S_(e,e,a),Bm(e,e,oG(t,s,n)),Bm(e,e,[0,n.top-n.bottom]),br(i,e[4],e[5])}}();function wy(e){return e.scale*lbe(e.targetGeometry)}function lbe(e){return N(e)&&Zs(e.spatialReference)?1/(nG(e.spatialReference)*rG*iG):1}function aL(e){return nk(e.rotation)||0}function cbe(e){return Zs(e)?nG(e)*rG*iG:1}function ube(e,t){return x_(e,t,.5)}const lL=function(){const e=ji(),t=ji(),i=ji();return function(r,s,n,o,a,l){return Zq(e,s),x_(t,n,.5*l),br(i,1/o*l,-1/o*l),sL(r,t),a&&S_(r,r,a),RI(r,r,i),Bm(r,r,e),r}}(),cL=function(){const e=ji();return function(t,i,r,s){const n=wy(i),o=aL(i);return oL(e,i.targetGeometry),lL(t,e,r,n,o,s)}}(),dbe=function(){const e=ji();return function(t,i,r,s){const n=wy(i);return oL(e,i.targetGeometry),lL(t,e,r,n,0,s)}}();function hbe(e){if(e.isWrappable){const t=na(e);return t.valid[1]-t.valid[0]}return 0}function pbe(e,t){return Math.round(hbe(e)/t)}const fbe=function(){const e=ji(),t=ji(),i=[0,0,0];return function(r,s,n){Ov(e,r,s),MM(e,e),Ov(t,r,n),MM(t,t),Kq(i,e,t);let o=Math.acos(Yq(e,t)/(XS(e)*XS(t)))*ebe;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),mbe=function(){const e=ji();return function(t,i,r,s){const n=t.targetGeometry;return fa(t,i),abe(e,i,r,s),n.x+=e[0],n.y+=e[1],t}}(),OM=function(e,t,i){fa(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},ybe=function(){const e=ji();return function(t,i,r,s,n){n||(n="center"),nL(e,r,s),x_(e,e,.5);const o=e[0],a=e[1];switch(n){case"center":br(e,0,0);break;case"left":br(e,-o,0);break;case"top":br(e,0,a);break;case"right":br(e,o,0);break;case"bottom":br(e,0,-a);break;case"top-left":br(e,-o,a);break;case"bottom-left":br(e,-o,-a);break;case"top-right":br(e,o,a);break;case"bottom-right":br(e,o,-a)}return FI(t,i,e),t}}();function dPe(e,t,i){return fa(e,t),e.rotation+=i,e}function gbe(e,t,i){return fa(e,t),e.rotation=i,e}const vbe=function(){const e=ji();return function(t,i,r,s,n){return fa(t,i),isNaN(r)||r===0||(lG(e,s,i,n),t.scale=i.scale*r,cG(e,e,t,n),FI(t,t,br(e,e[0]-s[0],s[1]-e[1]))),t}}();function I5(e,t,i){return fa(e,t),e.scale=i,e}const aG=function(){const e=ji();return function(t,i,r,s,n,o){return fa(t,i),isNaN(r)||r===0||(lG(e,n,i,o),t.scale=i.scale*r,t.rotation+=s,cG(e,e,t,o),FI(t,t,br(e,e[0]-n[0],n[1]-e[1]))),t}}(),hPe=function(){const e=ji(),t=ji();return function(i,r,s,n,o,a,l){return oG(t,a,l),Gq(e,o,t),n?aG(i,r,s,n,e,a):vbe(i,r,s,e,a)}}(),lG=function(){const e=Yu();return function(t,i,r,s){return Ga(t,i,obe(e,r,s,1))}}(),cG=function(){const e=Yu();return function(t,i,r,s){return Ga(t,i,cL(e,r,s,1))}}(),FI=function(){const e=ji(),t=Yu();return function(i,r,s){fa(i,r);const n=wy(r),o=i.targetGeometry;return Uq(t,aL(r)),RI(t,t,T_(n,n)),Ga(e,s,t),o.x+=e[0],o.y+=e[1],i}}();class _be{constructor(t,i,r,s){const n=t.targetGeometry,o=i.targetGeometry;s?typeof s=="string"&&(s=a_e(s)||no.ease):s=no.ease,this.easing=s,this.duration=r,this.sCenterX=n.x,this.sCenterY=n.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,i){const r=this.easing(i);let s,n,o,a;i>=1?(s=this.tCenterX,n=this.tCenterY,o=this.tRotation,a=this.tScale):(s=this.sCenterX+r*this.dCenterX,n=this.sCenterY+r*this.dCenterY,o=this.sRotation+r*this.dRotation,a=this.sScale+r*this.dScale),t.targetGeometry.x=s,t.targetGeometry.y=n,t.scale=a,t.rotation=o}}let Vl=class extends Ee{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=no.ease,this.view=null,this.viewpoint=null,this.viewpoint=new Ka({targetGeometry:new Le,scale:0,rotation:0}),this._updateTask=$m({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,i){this.stop();const r=this.viewpoint;fa(r,t),this.transition=new _be(this.viewpoint,e.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const s=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const i=new AM({target:e.clone()}),r=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==AM.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const i=(performance.now()-this._startTime)/this.transition.duration,r=i>=1;this.transition.applyRatio(this.viewpoint,i),r&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};c([d()],Vl.prototype,"animation",void 0),c([d()],Vl.prototype,"duration",void 0),c([d()],Vl.prototype,"transition",void 0),c([d()],Vl.prototype,"easing",void 0),c([d()],Vl.prototype,"view",void 0),c([d()],Vl.prototype,"viewpoint",void 0),Vl=c([O("esri.views.2d.AnimationManager")],Vl);const bbe=Vl;class wbe{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:i,graphicsView:r,labelManager:s,layerViews:n,state:{id:o}}=this.view;i.baseLayerViews.forEach(this._updateLayerView,this),n.forEach(this._updateLayerView,this),i.referenceLayerViews.forEach(this._updateLayerView,this),N(s)&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),N(r)&&(r.lastUpdateId!==o&&(r.viewChange(),r.lastUpdateId=o),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){this._frameTaskHandle||(this.stationary=this.view.stationary,this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions},this._stationaryHandle=this.view.watch("stationary",t=>{this.stationary=t,this.requestFrame()}),this._frameTaskHandle=$m(this),this.requestUpdate())}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){const i=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),r!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews.forEach(this._updateLayerView,this)}}function dr(){return Promise.all([se(()=>import("./webglDeps.1f5647d4.js"),["assets/webglDeps.1f5647d4.js","assets/VertexArrayObject.4ccd043a.js","assets/Texture.df7d53ef.js","assets/enums.457e23f9.js","assets/ProgramTemplate.85782ebc.js","assets/programUtils.d4a989ec.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]),se(()=>import("./mapViewDeps.6fe0e70a.js"),["assets/mapViewDeps.6fe0e70a.js","assets/CIMSymbolHelper.1040926f.js","assets/BidiEngine.b9926823.js","assets/enums.84480fc7.js","assets/alignmentUtils.03ee467b.js","assets/number.dc47462b.js","assets/GeometryUtils.e53da643.js","assets/Container.e5cc492f.js","assets/Utils.e0214b13.js","assets/enums.457e23f9.js","assets/Texture.df7d53ef.js","assets/VertexElementDescriptor.0406f2d4.js","assets/WGLContainer.ad96b13e.js","assets/pixelUtils.9fff4c99.js","assets/VertexArrayObject.4ccd043a.js","assets/ProgramTemplate.85782ebc.js","assets/StyleDefinition.809d5a5e.js","assets/config.bd364997.js","assets/GeometryUtils.5ea26345.js","assets/MaterialKey.9859c524.js","assets/earcut.91e104de.js","assets/enums.1ba846bb.js","assets/programUtils.d4a989ec.js","assets/Rasterizer.8006df47.js","assets/cimAnalyzer.74547477.js","assets/quantizationUtils.48cd94ed.js","assets/Matcher.4b2c4793.js","assets/visualVariablesUtils.65d2f75d.js","assets/visualVariablesUtils.54823ca9.js","assets/tileUtils.fab497ef.js","assets/TileClipper.2c69e8d5.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/Geometry.e891c191.js","assets/ExpandedCIM.d4661ffb.js","assets/CircularArray.e6c8d66c.js","assets/requestImageUtils.3147d41d.js","assets/ComputedAttributeStorage.2a68a55c.js","assets/projectionSupport.66acda0b.js","assets/json.da51edc4.js","assets/BaseGraphicContainer.438c4e75.js","assets/FeatureContainer.2f011771.js","assets/TileContainer.9dcdd226.js","assets/schemaUtils.d3838579.js","assets/createSymbolSchema.4fe41dfb.js","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/MD5.67d7a872.js","assets/util.837deeb3.js","assets/vec3f32.8179e08f.js","assets/GraphicContainer.21c2e17d.js"])])}const eg=()=>dr().then(()=>se(()=>import("./TileLayerView2D.ca9e66c1.js"),["assets/TileLayerView2D.ca9e66c1.js","assets/imageUtils.1957c459.js","assets/BitmapTileContainer.13635666.js","assets/Bitmap.2f3b8999.js","assets/Container.e5cc492f.js","assets/enums.457e23f9.js","assets/Texture.df7d53ef.js","assets/TileContainer.9dcdd226.js","assets/Utils.e0214b13.js","assets/enums.84480fc7.js","assets/number.dc47462b.js","assets/VertexElementDescriptor.0406f2d4.js","assets/WGLContainer.ad96b13e.js","assets/pixelUtils.9fff4c99.js","assets/VertexArrayObject.4ccd043a.js","assets/ProgramTemplate.85782ebc.js","assets/StyleDefinition.809d5a5e.js","assets/config.bd364997.js","assets/GeometryUtils.5ea26345.js","assets/MaterialKey.9859c524.js","assets/alignmentUtils.03ee467b.js","assets/earcut.91e104de.js","assets/LayerView.95538f08.js","assets/RefreshableLayerView.8dc1308b.js","assets/drapedUtils.82886101.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])),Ub=()=>dr().then(()=>se(()=>import("./FeatureLayerView2D.b01fc1d0.js"),["assets/FeatureLayerView2D.b01fc1d0.js","assets/enums.84480fc7.js","assets/LayerView.95538f08.js","assets/Container.e5cc492f.js","assets/schemaUtils.d3838579.js","assets/Utils.e0214b13.js","assets/number.dc47462b.js","assets/enums.457e23f9.js","assets/Texture.df7d53ef.js","assets/VertexElementDescriptor.0406f2d4.js","assets/visualVariablesUtils.54823ca9.js","assets/createSymbolSchema.4fe41dfb.js","assets/MaterialKey.9859c524.js","assets/alignmentUtils.03ee467b.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/CIMSymbolHelper.1040926f.js","assets/BidiEngine.b9926823.js","assets/GeometryUtils.e53da643.js","assets/cimAnalyzer.74547477.js","assets/quantizationUtils.48cd94ed.js","assets/ExpandedCIM.d4661ffb.js","assets/MD5.67d7a872.js","assets/util.837deeb3.js","assets/popupUtils.9bc51a64.js","assets/RefreshableLayerView.8dc1308b.js"])),T5={"base-dynamic":()=>dr().then(()=>se(()=>import("./BaseDynamicLayerView2D.8e73d5d9.js"),["assets/BaseDynamicLayerView2D.8e73d5d9.js","assets/BitmapContainer.45b58859.js","assets/WGLContainer.ad96b13e.js","assets/enums.457e23f9.js","assets/pixelUtils.9fff4c99.js","assets/Container.e5cc492f.js","assets/VertexArrayObject.4ccd043a.js","assets/Texture.df7d53ef.js","assets/VertexElementDescriptor.0406f2d4.js","assets/enums.84480fc7.js","assets/Utils.e0214b13.js","assets/number.dc47462b.js","assets/ProgramTemplate.85782ebc.js","assets/StyleDefinition.809d5a5e.js","assets/config.bd364997.js","assets/GeometryUtils.5ea26345.js","assets/MaterialKey.9859c524.js","assets/alignmentUtils.03ee467b.js","assets/earcut.91e104de.js","assets/LayerView.95538f08.js","assets/ExportStrategy.898cd4f1.js","assets/Bitmap.2f3b8999.js","assets/RefreshableLayerView.8dc1308b.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])),"base-tile":eg,"bing-maps":eg,csv:Ub,"geo-rss":()=>dr().then(()=>se(()=>import("./GeoRSSLayerView2D.2f56f352.js"),["assets/GeoRSSLayerView2D.2f56f352.js","assets/LayerView.95538f08.js","assets/Container.e5cc492f.js","assets/GraphicContainer.21c2e17d.js","assets/Utils.e0214b13.js","assets/enums.84480fc7.js","assets/number.dc47462b.js","assets/enums.457e23f9.js","assets/Texture.df7d53ef.js","assets/VertexElementDescriptor.0406f2d4.js","assets/BaseGraphicContainer.438c4e75.js","assets/CIMSymbolHelper.1040926f.js","assets/BidiEngine.b9926823.js","assets/alignmentUtils.03ee467b.js","assets/GeometryUtils.e53da643.js","assets/projectionSupport.66acda0b.js","assets/json.da51edc4.js","assets/VertexArrayObject.4ccd043a.js","assets/FeatureContainer.2f011771.js","assets/TileContainer.9dcdd226.js","assets/WGLContainer.ad96b13e.js","assets/pixelUtils.9fff4c99.js","assets/ProgramTemplate.85782ebc.js","assets/StyleDefinition.809d5a5e.js","assets/config.bd364997.js","assets/GeometryUtils.5ea26345.js","assets/MaterialKey.9859c524.js","assets/earcut.91e104de.js","assets/visualVariablesUtils.65d2f75d.js","assets/visualVariablesUtils.54823ca9.js","assets/Matcher.4b2c4793.js","assets/tileUtils.fab497ef.js","assets/TileClipper.2c69e8d5.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/Geometry.e891c191.js","assets/cimAnalyzer.74547477.js","assets/quantizationUtils.48cd94ed.js","assets/ExpandedCIM.d4661ffb.js","assets/schemaUtils.d3838579.js","assets/createSymbolSchema.4fe41dfb.js","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/MD5.67d7a872.js","assets/util.837deeb3.js","assets/ComputedAttributeStorage.2a68a55c.js","assets/vec3f32.8179e08f.js"])),feature:Ub,geojson:Ub,graphics:()=>dr().then(()=>se(()=>import("./GraphicsLayerView2D.eb192162.js"),["assets/GraphicsLayerView2D.eb192162.js","assets/LayerView.95538f08.js","assets/Container.e5cc492f.js","assets/GraphicContainer.21c2e17d.js","assets/Utils.e0214b13.js","assets/enums.84480fc7.js","assets/number.dc47462b.js","assets/enums.457e23f9.js","assets/Texture.df7d53ef.js","assets/VertexElementDescriptor.0406f2d4.js","assets/BaseGraphicContainer.438c4e75.js","assets/CIMSymbolHelper.1040926f.js","assets/BidiEngine.b9926823.js","assets/alignmentUtils.03ee467b.js","assets/GeometryUtils.e53da643.js","assets/projectionSupport.66acda0b.js","assets/json.da51edc4.js","assets/VertexArrayObject.4ccd043a.js","assets/FeatureContainer.2f011771.js","assets/TileContainer.9dcdd226.js","assets/WGLContainer.ad96b13e.js","assets/pixelUtils.9fff4c99.js","assets/ProgramTemplate.85782ebc.js","assets/StyleDefinition.809d5a5e.js","assets/config.bd364997.js","assets/GeometryUtils.5ea26345.js","assets/MaterialKey.9859c524.js","assets/earcut.91e104de.js","assets/visualVariablesUtils.65d2f75d.js","assets/visualVariablesUtils.54823ca9.js","assets/Matcher.4b2c4793.js","assets/tileUtils.fab497ef.js","assets/TileClipper.2c69e8d5.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/Geometry.e891c191.js","assets/cimAnalyzer.74547477.js","assets/quantizationUtils.48cd94ed.js","assets/ExpandedCIM.d4661ffb.js","assets/schemaUtils.d3838579.js","assets/createSymbolSchema.4fe41dfb.js","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/MD5.67d7a872.js","assets/util.837deeb3.js","assets/ComputedAttributeStorage.2a68a55c.js","assets/vec3f32.8179e08f.js"])),group:()=>dr().then(()=>se(()=>import("./GroupLayerView2D.16dbec19.js"),["assets/GroupLayerView2D.16dbec19.js","assets/WGLContainer.ad96b13e.js","assets/enums.457e23f9.js","assets/pixelUtils.9fff4c99.js","assets/Container.e5cc492f.js","assets/VertexArrayObject.4ccd043a.js","assets/Texture.df7d53ef.js","assets/VertexElementDescriptor.0406f2d4.js","assets/enums.84480fc7.js","assets/Utils.e0214b13.js","assets/number.dc47462b.js","assets/ProgramTemplate.85782ebc.js","assets/StyleDefinition.809d5a5e.js","assets/config.bd364997.js","assets/GeometryUtils.5ea26345.js","assets/MaterialKey.9859c524.js","assets/alignmentUtils.03ee467b.js","assets/earcut.91e104de.js","assets/LayerView.95538f08.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])),imagery:()=>dr().then(()=>se(()=>import("./ImageryLayerView2D.3b0576a3.js"),["assets/ImageryLayerView2D.3b0576a3.js","assets/RasterVFDisplayObject.7b02c742.js","assets/dataUtils.bafd031e.js","assets/pixelUtils.9fff4c99.js","assets/WGLContainer.ad96b13e.js","assets/enums.457e23f9.js","assets/Container.e5cc492f.js","assets/VertexArrayObject.4ccd043a.js","assets/Texture.df7d53ef.js","assets/VertexElementDescriptor.0406f2d4.js","assets/enums.84480fc7.js","assets/Utils.e0214b13.js","assets/number.dc47462b.js","assets/ProgramTemplate.85782ebc.js","assets/StyleDefinition.809d5a5e.js","assets/config.bd364997.js","assets/GeometryUtils.5ea26345.js","assets/MaterialKey.9859c524.js","assets/alignmentUtils.03ee467b.js","assets/earcut.91e104de.js","assets/LayerView.95538f08.js","assets/BaseGraphicContainer.438c4e75.js","assets/CIMSymbolHelper.1040926f.js","assets/BidiEngine.b9926823.js","assets/GeometryUtils.e53da643.js","assets/projectionSupport.66acda0b.js","assets/json.da51edc4.js","assets/FeatureContainer.2f011771.js","assets/TileContainer.9dcdd226.js","assets/visualVariablesUtils.65d2f75d.js","assets/visualVariablesUtils.54823ca9.js","assets/Matcher.4b2c4793.js","assets/tileUtils.fab497ef.js","assets/TileClipper.2c69e8d5.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/Geometry.e891c191.js","assets/cimAnalyzer.74547477.js","assets/quantizationUtils.48cd94ed.js","assets/ExpandedCIM.d4661ffb.js","assets/schemaUtils.d3838579.js","assets/createSymbolSchema.4fe41dfb.js","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/MD5.67d7a872.js","assets/util.837deeb3.js","assets/ComputedAttributeStorage.2a68a55c.js","assets/vec3f32.8179e08f.js","assets/HighlightGraphicContainer.446e0e3a.js","assets/BitmapContainer.45b58859.js","assets/Bitmap.2f3b8999.js","assets/ExportStrategy.898cd4f1.js","assets/rasterProjectionHelper.2cc83b03.js","assets/popupUtils.9bc51a64.js","assets/RefreshableLayerView.8dc1308b.js"])),"imagery-tile":()=>dr().then(()=>se(()=>import("./ImageryTileLayerView2D.a7f48ef9.js"),["assets/ImageryTileLayerView2D.a7f48ef9.js","assets/RasterVFDisplayObject.7b02c742.js","assets/dataUtils.bafd031e.js","assets/pixelUtils.9fff4c99.js","assets/WGLContainer.ad96b13e.js","assets/enums.457e23f9.js","assets/Container.e5cc492f.js","assets/VertexArrayObject.4ccd043a.js","assets/Texture.df7d53ef.js","assets/VertexElementDescriptor.0406f2d4.js","assets/enums.84480fc7.js","assets/Utils.e0214b13.js","assets/number.dc47462b.js","assets/ProgramTemplate.85782ebc.js","assets/StyleDefinition.809d5a5e.js","assets/config.bd364997.js","assets/GeometryUtils.5ea26345.js","assets/MaterialKey.9859c524.js","assets/alignmentUtils.03ee467b.js","assets/earcut.91e104de.js","assets/LayerView.95538f08.js","assets/TileContainer.9dcdd226.js","assets/RawBlockCache.a023ad15.js","assets/rasterProjectionHelper.2cc83b03.js","assets/util.837deeb3.js","assets/popupUtils.9bc51a64.js","assets/RefreshableLayerView.8dc1308b.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])),kml:()=>dr().then(()=>se(()=>import("./KMLLayerView2D.cf1b668f.js"),["assets/KMLLayerView2D.cf1b668f.js","assets/kmlUtils.3f41ebcd.js","assets/Bitmap.2f3b8999.js","assets/Container.e5cc492f.js","assets/enums.457e23f9.js","assets/Texture.df7d53ef.js","assets/BitmapContainer.45b58859.js","assets/WGLContainer.ad96b13e.js","assets/pixelUtils.9fff4c99.js","assets/VertexArrayObject.4ccd043a.js","assets/VertexElementDescriptor.0406f2d4.js","assets/enums.84480fc7.js","assets/Utils.e0214b13.js","assets/number.dc47462b.js","assets/ProgramTemplate.85782ebc.js","assets/StyleDefinition.809d5a5e.js","assets/config.bd364997.js","assets/GeometryUtils.5ea26345.js","assets/MaterialKey.9859c524.js","assets/alignmentUtils.03ee467b.js","assets/earcut.91e104de.js","assets/LayerView.95538f08.js","assets/GraphicContainer.21c2e17d.js","assets/BaseGraphicContainer.438c4e75.js","assets/CIMSymbolHelper.1040926f.js","assets/BidiEngine.b9926823.js","assets/GeometryUtils.e53da643.js","assets/projectionSupport.66acda0b.js","assets/json.da51edc4.js","assets/FeatureContainer.2f011771.js","assets/TileContainer.9dcdd226.js","assets/visualVariablesUtils.65d2f75d.js","assets/visualVariablesUtils.54823ca9.js","assets/Matcher.4b2c4793.js","assets/tileUtils.fab497ef.js","assets/TileClipper.2c69e8d5.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/Geometry.e891c191.js","assets/cimAnalyzer.74547477.js","assets/quantizationUtils.48cd94ed.js","assets/ExpandedCIM.d4661ffb.js","assets/schemaUtils.d3838579.js","assets/createSymbolSchema.4fe41dfb.js","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/MD5.67d7a872.js","assets/util.837deeb3.js","assets/ComputedAttributeStorage.2a68a55c.js","assets/vec3f32.8179e08f.js"])),"map-image":()=>dr().then(()=>se(()=>import("./MapImageLayerView2D.6b191b5c.js"),["assets/MapImageLayerView2D.6b191b5c.js","assets/BitmapContainer.45b58859.js","assets/WGLContainer.ad96b13e.js","assets/enums.457e23f9.js","assets/pixelUtils.9fff4c99.js","assets/Container.e5cc492f.js","assets/VertexArrayObject.4ccd043a.js","assets/Texture.df7d53ef.js","assets/VertexElementDescriptor.0406f2d4.js","assets/enums.84480fc7.js","assets/Utils.e0214b13.js","assets/number.dc47462b.js","assets/ProgramTemplate.85782ebc.js","assets/StyleDefinition.809d5a5e.js","assets/config.bd364997.js","assets/GeometryUtils.5ea26345.js","assets/MaterialKey.9859c524.js","assets/alignmentUtils.03ee467b.js","assets/earcut.91e104de.js","assets/LayerView.95538f08.js","assets/BaseGraphicContainer.438c4e75.js","assets/CIMSymbolHelper.1040926f.js","assets/BidiEngine.b9926823.js","assets/GeometryUtils.e53da643.js","assets/projectionSupport.66acda0b.js","assets/json.da51edc4.js","assets/FeatureContainer.2f011771.js","assets/TileContainer.9dcdd226.js","assets/visualVariablesUtils.65d2f75d.js","assets/visualVariablesUtils.54823ca9.js","assets/Matcher.4b2c4793.js","assets/tileUtils.fab497ef.js","assets/TileClipper.2c69e8d5.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/Geometry.e891c191.js","assets/cimAnalyzer.74547477.js","assets/quantizationUtils.48cd94ed.js","assets/ExpandedCIM.d4661ffb.js","assets/schemaUtils.d3838579.js","assets/createSymbolSchema.4fe41dfb.js","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/MD5.67d7a872.js","assets/util.837deeb3.js","assets/ComputedAttributeStorage.2a68a55c.js","assets/vec3f32.8179e08f.js","assets/HighlightGraphicContainer.446e0e3a.js","assets/ExportStrategy.898cd4f1.js","assets/Bitmap.2f3b8999.js","assets/drapedUtils.82886101.js","assets/popupUtils.9bc51a64.js","assets/RefreshableLayerView.8dc1308b.js"])),"map-notes":()=>dr().then(()=>se(()=>import("./MapNotesLayerView2D.f8b4e15d.js"),["assets/MapNotesLayerView2D.f8b4e15d.js","assets/LayerView.95538f08.js","assets/Container.e5cc492f.js","assets/GraphicContainer.21c2e17d.js","assets/Utils.e0214b13.js","assets/enums.84480fc7.js","assets/number.dc47462b.js","assets/enums.457e23f9.js","assets/Texture.df7d53ef.js","assets/VertexElementDescriptor.0406f2d4.js","assets/BaseGraphicContainer.438c4e75.js","assets/CIMSymbolHelper.1040926f.js","assets/BidiEngine.b9926823.js","assets/alignmentUtils.03ee467b.js","assets/GeometryUtils.e53da643.js","assets/projectionSupport.66acda0b.js","assets/json.da51edc4.js","assets/VertexArrayObject.4ccd043a.js","assets/FeatureContainer.2f011771.js","assets/TileContainer.9dcdd226.js","assets/WGLContainer.ad96b13e.js","assets/pixelUtils.9fff4c99.js","assets/ProgramTemplate.85782ebc.js","assets/StyleDefinition.809d5a5e.js","assets/config.bd364997.js","assets/GeometryUtils.5ea26345.js","assets/MaterialKey.9859c524.js","assets/earcut.91e104de.js","assets/visualVariablesUtils.65d2f75d.js","assets/visualVariablesUtils.54823ca9.js","assets/Matcher.4b2c4793.js","assets/tileUtils.fab497ef.js","assets/TileClipper.2c69e8d5.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/Geometry.e891c191.js","assets/cimAnalyzer.74547477.js","assets/quantizationUtils.48cd94ed.js","assets/ExpandedCIM.d4661ffb.js","assets/schemaUtils.d3838579.js","assets/createSymbolSchema.4fe41dfb.js","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/MD5.67d7a872.js","assets/util.837deeb3.js","assets/ComputedAttributeStorage.2a68a55c.js","assets/vec3f32.8179e08f.js"])),"ogc-feature":()=>dr().then(()=>se(()=>import("./OGCFeatureLayerView2D.fbed9eb1.js"),["assets/OGCFeatureLayerView2D.fbed9eb1.js","assets/FeatureLayerView2D.b01fc1d0.js","assets/enums.84480fc7.js","assets/LayerView.95538f08.js","assets/Container.e5cc492f.js","assets/schemaUtils.d3838579.js","assets/Utils.e0214b13.js","assets/number.dc47462b.js","assets/enums.457e23f9.js","assets/Texture.df7d53ef.js","assets/VertexElementDescriptor.0406f2d4.js","assets/visualVariablesUtils.54823ca9.js","assets/createSymbolSchema.4fe41dfb.js","assets/MaterialKey.9859c524.js","assets/alignmentUtils.03ee467b.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/CIMSymbolHelper.1040926f.js","assets/BidiEngine.b9926823.js","assets/GeometryUtils.e53da643.js","assets/cimAnalyzer.74547477.js","assets/quantizationUtils.48cd94ed.js","assets/ExpandedCIM.d4661ffb.js","assets/MD5.67d7a872.js","assets/util.837deeb3.js","assets/popupUtils.9bc51a64.js","assets/RefreshableLayerView.8dc1308b.js"])),"open-street-map":eg,route:()=>dr().then(()=>se(()=>import("./RouteLayerView2D.edc5cf70.js"),["assets/RouteLayerView2D.edc5cf70.js","assets/LayerView.95538f08.js","assets/Container.e5cc492f.js","assets/GraphicContainer.21c2e17d.js","assets/Utils.e0214b13.js","assets/enums.84480fc7.js","assets/number.dc47462b.js","assets/enums.457e23f9.js","assets/Texture.df7d53ef.js","assets/VertexElementDescriptor.0406f2d4.js","assets/BaseGraphicContainer.438c4e75.js","assets/CIMSymbolHelper.1040926f.js","assets/BidiEngine.b9926823.js","assets/alignmentUtils.03ee467b.js","assets/GeometryUtils.e53da643.js","assets/projectionSupport.66acda0b.js","assets/json.da51edc4.js","assets/VertexArrayObject.4ccd043a.js","assets/FeatureContainer.2f011771.js","assets/TileContainer.9dcdd226.js","assets/WGLContainer.ad96b13e.js","assets/pixelUtils.9fff4c99.js","assets/ProgramTemplate.85782ebc.js","assets/StyleDefinition.809d5a5e.js","assets/config.bd364997.js","assets/GeometryUtils.5ea26345.js","assets/MaterialKey.9859c524.js","assets/earcut.91e104de.js","assets/visualVariablesUtils.65d2f75d.js","assets/visualVariablesUtils.54823ca9.js","assets/Matcher.4b2c4793.js","assets/tileUtils.fab497ef.js","assets/TileClipper.2c69e8d5.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/Geometry.e891c191.js","assets/cimAnalyzer.74547477.js","assets/quantizationUtils.48cd94ed.js","assets/ExpandedCIM.d4661ffb.js","assets/schemaUtils.d3838579.js","assets/createSymbolSchema.4fe41dfb.js","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/MD5.67d7a872.js","assets/util.837deeb3.js","assets/ComputedAttributeStorage.2a68a55c.js","assets/vec3f32.8179e08f.js"])),stream:()=>dr().then(()=>se(()=>import("./StreamLayerView2D.cbf33591.js"),["assets/StreamLayerView2D.cbf33591.js","assets/FeatureLayerView2D.b01fc1d0.js","assets/enums.84480fc7.js","assets/LayerView.95538f08.js","assets/Container.e5cc492f.js","assets/schemaUtils.d3838579.js","assets/Utils.e0214b13.js","assets/number.dc47462b.js","assets/enums.457e23f9.js","assets/Texture.df7d53ef.js","assets/VertexElementDescriptor.0406f2d4.js","assets/visualVariablesUtils.54823ca9.js","assets/createSymbolSchema.4fe41dfb.js","assets/MaterialKey.9859c524.js","assets/alignmentUtils.03ee467b.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/CIMSymbolHelper.1040926f.js","assets/BidiEngine.b9926823.js","assets/GeometryUtils.e53da643.js","assets/cimAnalyzer.74547477.js","assets/quantizationUtils.48cd94ed.js","assets/ExpandedCIM.d4661ffb.js","assets/MD5.67d7a872.js","assets/util.837deeb3.js","assets/popupUtils.9bc51a64.js","assets/RefreshableLayerView.8dc1308b.js"])),"subtype-group":()=>dr().then(()=>se(()=>import("./SubtypeGroupLayerView2D.4e35b259.js"),["assets/SubtypeGroupLayerView2D.4e35b259.js","assets/FeatureLayerView2D.b01fc1d0.js","assets/enums.84480fc7.js","assets/LayerView.95538f08.js","assets/Container.e5cc492f.js","assets/schemaUtils.d3838579.js","assets/Utils.e0214b13.js","assets/number.dc47462b.js","assets/enums.457e23f9.js","assets/Texture.df7d53ef.js","assets/VertexElementDescriptor.0406f2d4.js","assets/visualVariablesUtils.54823ca9.js","assets/createSymbolSchema.4fe41dfb.js","assets/MaterialKey.9859c524.js","assets/alignmentUtils.03ee467b.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/CIMSymbolHelper.1040926f.js","assets/BidiEngine.b9926823.js","assets/GeometryUtils.e53da643.js","assets/cimAnalyzer.74547477.js","assets/quantizationUtils.48cd94ed.js","assets/ExpandedCIM.d4661ffb.js","assets/MD5.67d7a872.js","assets/util.837deeb3.js","assets/popupUtils.9bc51a64.js","assets/RefreshableLayerView.8dc1308b.js"])),tile:eg,"vector-tile":()=>dr().then(()=>se(()=>import("./VectorTileLayerView2D.8e545ad3.js"),["assets/VectorTileLayerView2D.8e545ad3.js","assets/enums.1ba846bb.js","assets/BidiEngine.b9926823.js","assets/enums.457e23f9.js","assets/Texture.df7d53ef.js","assets/CIMSymbolHelper.1040926f.js","assets/enums.84480fc7.js","assets/alignmentUtils.03ee467b.js","assets/number.dc47462b.js","assets/GeometryUtils.e53da643.js","assets/VertexArrayObject.4ccd043a.js","assets/config.bd364997.js","assets/TileContainer.9dcdd226.js","assets/Container.e5cc492f.js","assets/Utils.e0214b13.js","assets/VertexElementDescriptor.0406f2d4.js","assets/WGLContainer.ad96b13e.js","assets/pixelUtils.9fff4c99.js","assets/ProgramTemplate.85782ebc.js","assets/StyleDefinition.809d5a5e.js","assets/GeometryUtils.5ea26345.js","assets/MaterialKey.9859c524.js","assets/earcut.91e104de.js","assets/StyleRepository.1c171c74.js","assets/Geometry.e891c191.js","assets/LayerView.95538f08.js","assets/Bitmap.2f3b8999.js","assets/BitmapContainer.45b58859.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])),wcs:()=>dr().then(()=>se(()=>import("./ImageryTileLayerView2D.a7f48ef9.js"),["assets/ImageryTileLayerView2D.a7f48ef9.js","assets/RasterVFDisplayObject.7b02c742.js","assets/dataUtils.bafd031e.js","assets/pixelUtils.9fff4c99.js","assets/WGLContainer.ad96b13e.js","assets/enums.457e23f9.js","assets/Container.e5cc492f.js","assets/VertexArrayObject.4ccd043a.js","assets/Texture.df7d53ef.js","assets/VertexElementDescriptor.0406f2d4.js","assets/enums.84480fc7.js","assets/Utils.e0214b13.js","assets/number.dc47462b.js","assets/ProgramTemplate.85782ebc.js","assets/StyleDefinition.809d5a5e.js","assets/config.bd364997.js","assets/GeometryUtils.5ea26345.js","assets/MaterialKey.9859c524.js","assets/alignmentUtils.03ee467b.js","assets/earcut.91e104de.js","assets/LayerView.95538f08.js","assets/TileContainer.9dcdd226.js","assets/RawBlockCache.a023ad15.js","assets/rasterProjectionHelper.2cc83b03.js","assets/util.837deeb3.js","assets/popupUtils.9bc51a64.js","assets/RefreshableLayerView.8dc1308b.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])),"web-tile":eg,wfs:Ub,wms:()=>dr().then(()=>se(()=>import("./WMSLayerView2D.acc98ff6.js"),["assets/WMSLayerView2D.acc98ff6.js","assets/BitmapContainer.45b58859.js","assets/WGLContainer.ad96b13e.js","assets/enums.457e23f9.js","assets/pixelUtils.9fff4c99.js","assets/Container.e5cc492f.js","assets/VertexArrayObject.4ccd043a.js","assets/Texture.df7d53ef.js","assets/VertexElementDescriptor.0406f2d4.js","assets/enums.84480fc7.js","assets/Utils.e0214b13.js","assets/number.dc47462b.js","assets/ProgramTemplate.85782ebc.js","assets/StyleDefinition.809d5a5e.js","assets/config.bd364997.js","assets/GeometryUtils.5ea26345.js","assets/MaterialKey.9859c524.js","assets/alignmentUtils.03ee467b.js","assets/earcut.91e104de.js","assets/LayerView.95538f08.js","assets/ExportStrategy.898cd4f1.js","assets/Bitmap.2f3b8999.js","assets/RefreshableLayerView.8dc1308b.js","assets/ExportWMSImageParameters.5dc69354.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])),wmts:()=>dr().then(()=>se(()=>import("./WMTSLayerView2D.8ffa786e.js"),["assets/WMTSLayerView2D.8ffa786e.js","assets/imageUtils.1957c459.js","assets/BitmapTileContainer.13635666.js","assets/Bitmap.2f3b8999.js","assets/Container.e5cc492f.js","assets/enums.457e23f9.js","assets/Texture.df7d53ef.js","assets/TileContainer.9dcdd226.js","assets/Utils.e0214b13.js","assets/enums.84480fc7.js","assets/number.dc47462b.js","assets/VertexElementDescriptor.0406f2d4.js","assets/WGLContainer.ad96b13e.js","assets/pixelUtils.9fff4c99.js","assets/VertexArrayObject.4ccd043a.js","assets/ProgramTemplate.85782ebc.js","assets/StyleDefinition.809d5a5e.js","assets/config.bd364997.js","assets/GeometryUtils.5ea26345.js","assets/MaterialKey.9859c524.js","assets/alignmentUtils.03ee467b.js","assets/earcut.91e104de.js","assets/LayerView.95538f08.js","assets/RefreshableLayerView.8dc1308b.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"])),analysis:null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function Sbe(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new B(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const $5={hasLayerViewModule:e=>N(T5[e.type]),importLayerView:e=>{const t=T5[e.type];if(!N(t))throw Sbe(e);return t(e)}};function xbe(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let s=Number.POSITIVE_INFINITY,n=0,o=0;const a=[0,0],l=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const u of l)for(let h=0;h<u.length-1;h++){_te(a,r,u,h);const f=I_(r,a);f<s&&(s=f,n=a[0],o=a[1])}return{coordinate:new Le({x:n,y:o,spatialReference:i}),distance:s}}var kM;const Ibe=fe.getLogger("esri.views.MapView");let bh=kM=class extends Ee{constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(Q(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return a_(this.geometry,this.spatialReference)}catch(e){return Ibe.error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(Q(this.normalizedGeometry))return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?Wx(this.normalizedGeometry,i):AV(this.normalizedGeometry,i))return e;const{coordinate:r}=xbe(this.normalizedGeometry,i);return r&&(e.targetGeometry=r),e}clone(){var e,t;return new kM({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};c([d({constructOnly:!0})],bh.prototype,"geometry",void 0),c([d({readOnly:!0})],bh.prototype,"normalizedGeometry",null),c([d({constructOnly:!0})],bh.prototype,"spatialReference",void 0),bh=kM=c([O("esri.views.2d.constraints.GeometryConstraint")],bh);var PM;let d0=PM=class extends Ee{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new PM({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};c([d()],d0.prototype,"enabled",void 0),c([d()],d0.prototype,"rotationEnabled",void 0),d0=PM=c([O("esri.views.2d.constraints.RotationConstraint")],d0);const uG=d0;var LM;let js=LM=class extends Ee{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:s,maxZoom:n}=this,o=-1,a=-1,l=!1,u=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!t||!t.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map(h=>h.clone()),t.sort((h,f)=>f.scale-h.scale),t.forEach((h,f)=>h.level=f);for(const h of t)!l&&i>0&&i>=h.scale&&(o=h.level,l=!0),!u&&r>0&&r>=h.scale&&(a=e?e.level:-1,u=!0),e=h;s===-1&&(s=i===0?0:o),n===-1&&(n=r===0?t.length-1:a),s=Math.max(s,0),s=Math.min(s,t.length-1),n=Math.max(n,0),n=Math.min(n,t.length-1),s>n&&([s,n]=[n,s]),i=t[s].scale,r=t[n].scale,t.splice(0,s),t.splice(n-s+1,t.length),t.forEach((h,f)=>{this._lodByScale[h.scale]=h,this._scales[f]=h.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,s=e.targetGeometry,n=t&&t.targetGeometry,o=r!==0&&e.scale<r,a=i!==0&&e.scale>i;if(o||a){const l=a?i:r;if(n){const u=(l-t.scale)/(e.scale-t.scale);s.x=n.x+(s.x-n.x)*u,s.y=n.y+(s.y-n.y)*u}e.scale=l}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let s=0;s<t.length-1;s++){if(i=t[s],r=t[s+1],r===e)return s+this.effectiveMinZoom+1;if(i>e&&r<e)return s+this.effectiveMinZoom+1-(e-r)/(i-r)}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new LM({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};c([d({readOnly:!0})],js.prototype,"effectiveLODs",void 0),c([d({readOnly:!0})],js.prototype,"effectiveMinZoom",void 0),c([d({readOnly:!0})],js.prototype,"effectiveMaxZoom",void 0),c([d({readOnly:!0})],js.prototype,"effectiveMinScale",void 0),c([d({readOnly:!0})],js.prototype,"effectiveMaxScale",void 0),c([d()],js.prototype,"lods",void 0),c([d()],js.prototype,"minZoom",void 0),c([d()],js.prototype,"maxZoom",void 0),c([d()],js.prototype,"minScale",void 0),c([d()],js.prototype,"maxScale",void 0),c([d()],js.prototype,"snapToZoom",void 0),js=LM=c([O("esri.views.2d.constraints.ZoomConstraint")],js);const dG=js,Tbe={base:null,key:"type",typeMap:{extent:Et,polygon:Rn}};let Li=class extends Ee{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null),this._set("_geometry",null)}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e;return this.commitProperty("_zoom"),this.commitProperty("_rotation"),this.commitProperty("_geometry"),((e=this._get("version"))!=null?e:0)+1}get _defaultLODs(){var e,t,i;const r=(e=this.view)==null||(t=e.defaultsFromMap)==null?void 0:t.tileInfo,s=(i=this.view)==null?void 0:i.spatialReference;return r&&s&&r.spatialReference.equals(s)?r.lods:null}get _geometry(){var e;return new bh({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new uG({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,i=this.minZoom,r=this.maxZoom,s=this.minScale,n=this.maxScale,o=this.snapToZoom;return e&&e.lods===t&&e.minZoom===i&&e.maxZoom===r&&e.minScale===s&&e.maxScale===n&&e.snapToZoom===o?e:new dG({lods:t,minZoom:i,maxZoom:r,minScale:s,maxScale:n,snapToZoom:o})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};c([d({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],Li.prototype,"effectiveLODs",void 0),c([d({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],Li.prototype,"effectiveMinScale",void 0),c([d({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],Li.prototype,"effectiveMaxScale",void 0),c([d({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],Li.prototype,"effectiveMinZoom",void 0),c([d({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],Li.prototype,"effectiveMaxZoom",void 0),c([d({types:Tbe,value:null})],Li.prototype,"geometry",null),c([d({type:[qk]})],Li.prototype,"lods",void 0),c([d()],Li.prototype,"minScale",void 0),c([d()],Li.prototype,"maxScale",void 0),c([d()],Li.prototype,"minZoom",void 0),c([d()],Li.prototype,"maxZoom",void 0),c([d()],Li.prototype,"rotationEnabled",void 0),c([d()],Li.prototype,"snapToZoom",void 0),c([d()],Li.prototype,"view",void 0),c([d({readOnly:!0})],Li.prototype,"version",null),c([d()],Li.prototype,"_defaultLODs",null),c([d({type:bh})],Li.prototype,"_geometry",null),c([d({type:uG})],Li.prototype,"_rotation",null),c([d({readOnly:!0,type:dG})],Li.prototype,"_zoom",null),Li=c([O("esri.views.2d.MapViewConstraints")],Li);const hG=Li;function ex(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function $be(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Cbe(e,t,i,r,s,n){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=i,o[3]=r,o[4]=s,o[5]=n,o}function Ebe(e,t){return new Float32Array(e,t,6)}function pG(e,t,i,r){const s=t[r],n=t[r+1];e[r]=i[0]*s+i[2]*n+i[4],e[r+1]=i[1]*s+i[3]*n+i[5]}function Abe(e,t,i,r=0,s=0,n=2){const o=s||t.length/n;for(let a=r;a<o;a++)pG(e,t,i,a*n)}Object.freeze({__proto__:null,create:ex,clone:$be,fromValues:Cbe,createView:Ebe,transform:pG,transformMany:Abe});function Mbe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Obe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function fG(e,t,i,r,s,n,o,a,l,u){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=n,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e}function mG(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function kbe(e,t){if(e===t){const i=t[1],r=t[2],s=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=s}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Pbe(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],f=h*o-a*u,y=-h*n+a*l,g=u*n-o*l;let b=i*f+r*y+s*g;return b?(b=1/b,e[0]=f*b,e[1]=(-h*r+s*u)*b,e[2]=(a*r-s*o)*b,e[3]=y*b,e[4]=(h*i-s*l)*b,e[5]=(-a*i+s*n)*b,e[6]=g*b,e[7]=(-u*i+r*l)*b,e[8]=(o*i-r*n)*b,e):null}function Lbe(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8];return e[0]=o*h-a*u,e[1]=s*u-r*h,e[2]=r*a-s*o,e[3]=a*l-n*h,e[4]=i*h-s*l,e[5]=s*n-i*a,e[6]=n*u-o*l,e[7]=r*l-i*u,e[8]=i*o-r*n,e}function Rbe(e){const t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],o=e[5],a=e[6],l=e[7],u=e[8];return t*(u*n-o*l)+i*(-u*s+o*a)+r*(l*s-n*a)}function uL(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],f=t[8],y=i[0],g=i[1],b=i[2],w=i[3],x=i[4],T=i[5],M=i[6],F=i[7],D=i[8];return e[0]=y*r+g*o+b*u,e[1]=y*s+g*a+b*h,e[2]=y*n+g*l+b*f,e[3]=w*r+x*o+T*u,e[4]=w*s+x*a+T*h,e[5]=w*n+x*l+T*f,e[6]=M*r+F*o+D*u,e[7]=M*s+F*a+D*h,e[8]=M*n+F*l+D*f,e}function RM(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],f=t[8],y=i[0],g=i[1];return e[0]=r,e[1]=s,e[2]=n,e[3]=o,e[4]=a,e[5]=l,e[6]=y*r+g*o+u,e[7]=y*s+g*a+h,e[8]=y*n+g*l+f,e}function yG(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],f=t[8],y=Math.sin(i),g=Math.cos(i);return e[0]=g*r+y*o,e[1]=g*s+y*a,e[2]=g*n+y*l,e[3]=g*o-y*r,e[4]=g*a-y*s,e[5]=g*l-y*n,e[6]=u,e[7]=h,e[8]=f,e}function Fbe(e,t,i){const r=i[0],s=i[1],n=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=n*t[6],e[7]=n*t[7],e[8]=n*t[8],e}function Nbe(e,t,i){const r=i[0],s=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e}function Dbe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function jbe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function zbe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Vbe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Ube(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=i+i,a=r+r,l=s+s,u=i*o,h=r*o,f=r*a,y=s*o,g=s*a,b=s*l,w=n*o,x=n*a,T=n*l;return e[0]=1-f-b,e[3]=h-T,e[6]=y+x,e[1]=h+T,e[4]=1-u-b,e[7]=g-w,e[2]=y-x,e[5]=g+w,e[8]=1-u-f,e}function Bbe(e,t){const i=t[0],r=t[1],s=t[2],n=t[4],o=t[5],a=t[6],l=t[8],u=t[9],h=t[10],f=h*o-a*u,y=-h*n+a*l,g=u*n-o*l,b=i*f+r*y+s*g;if(!b)return null;const w=1/b;return e[0]=f*w,e[1]=(-h*r+s*u)*w,e[2]=(a*r-s*o)*w,e[3]=y*w,e[4]=(h*i-s*l)*w,e[5]=(-a*i+s*n)*w,e[6]=g*w,e[7]=(-u*i+r*l)*w,e[8]=(o*i-r*n)*w,e}function qbe(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],f=t[9],y=t[10],g=t[11],b=t[12],w=t[13],x=t[14],T=t[15],M=i*a-r*o,F=i*l-s*o,D=i*u-n*o,R=r*l-s*a,_=r*u-n*a,q=s*u-n*l,W=h*w-f*b,oe=h*x-y*b,te=h*T-g*b,he=f*x-y*w,ge=f*T-g*w,Te=y*T-g*x;let Se=M*Te-F*ge+D*he+R*te-_*oe+q*W;return Se?(Se=1/Se,e[0]=(a*Te-l*ge+u*he)*Se,e[1]=(l*te-o*Te-u*oe)*Se,e[2]=(o*ge-a*te+u*W)*Se,e[3]=(s*ge-r*Te-n*he)*Se,e[4]=(i*Te-s*te+n*oe)*Se,e[5]=(r*te-i*ge-n*W)*Se,e[6]=(w*q-x*_+T*R)*Se,e[7]=(x*D-b*q-T*F)*Se,e[8]=(b*_-w*D+T*M)*Se,e):null}function Gbe(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Hbe(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Wbe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function Jbe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function gG(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function Zbe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function Ybe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e}function Kbe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Qbe(e,t){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],f=t[0],y=t[1],g=t[2],b=t[3],w=t[4],x=t[5],T=t[6],M=t[7],F=t[8];return Math.abs(i-f)<=Ke*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(r-y)<=Ke*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(s-g)<=Ke*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(n-b)<=Ke*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(o-w)<=Ke*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-x)<=Ke*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-T)<=Ke*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-M)<=Ke*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(h-F)<=Ke*Math.max(1,Math.abs(h),Math.abs(F))}function Xbe(e){const t=Ke,i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return Math.abs(1-(i*i+n*n+l*l))<=t&&Math.abs(1-(r*r+o*o+u*u))<=t&&Math.abs(1-(s*s+a*a+h*h))<=t}const ewe=uL,twe=gG;Object.freeze({__proto__:null,fromMat4:Mbe,copy:Obe,set:fG,identity:mG,transpose:kbe,invert:Pbe,adjoint:Lbe,determinant:Rbe,multiply:uL,translate:RM,rotate:yG,scale:Fbe,scaleByVec2:Nbe,fromTranslation:Dbe,fromRotation:jbe,fromScaling:zbe,fromMat2d:Vbe,fromQuat:Ube,normalFromMat4Legacy:Bbe,normalFromMat4:qbe,projection:Gbe,str:Hbe,frob:Wbe,add:Jbe,subtract:gG,multiplyScalar:Zbe,multiplyScalarAndAdd:Ybe,exactEquals:Kbe,equals:Qbe,isOrthoNormal:Xbe,mul:ewe,sub:twe});function b1(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function iwe(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function rwe(e,t,i,r,s,n,o,a,l){const u=new Float32Array(9);return u[0]=e,u[1]=t,u[2]=i,u[3]=r,u[4]=s,u[5]=n,u[6]=o,u[7]=a,u[8]=l,u}function swe(e,t){return new Float32Array(e,t,9)}Object.freeze({__proto__:null,create:b1,clone:iwe,fromValues:rwe,createView:swe});function vG(){return new Float32Array(2)}function nwe(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function qm(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function owe(e,t){return new Float32Array(e,t,2)}function _G(){return vG()}function bG(){return qm(1,1)}function wG(){return qm(1,0)}function SG(){return qm(0,1)}const awe=_G(),lwe=bG(),cwe=wG(),uwe=SG();Object.freeze({__proto__:null,create:vG,clone:nwe,fromValues:qm,createView:owe,zeros:_G,ones:bG,unitX:wG,unitY:SG,ZEROS:awe,ONES:lwe,UNIT_X:cwe,UNIT_Y:uwe});function dwe(e){return e instanceof Float32Array&&e.length>=2}function hwe(e){return Array.isArray(e)&&e.length>=2}function q$(e){return dwe(e)||hwe(e)}var FM;const Sl=[0,0];let uu=FM=class extends ue{constructor(e){super(e),this._viewpoint2D={center:ji(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new Et,this.id=0,this.inverseTransform=Yu(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Yu(),this.transformNoRotation=Yu(),this.displayMat3=b1(),this.displayViewMat3=b1(),this.viewMat3=b1(),this.viewMat2d=ex(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=fa(i,e.viewpoint),this._set("size",Mv(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new FM({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return q$(t)?Ga(e,t,this.inverseTransform):(Sl[0]=t,Sl[1]=i,Ga(e,Sl,this.inverseTransform))}toScreen(e,t,i){return q$(t)?Ga(e,t,this.transform):(Sl[0]=t,Sl[1]=i,Ga(e,Sl,this.transform))}toScreenNoRotation(e,t,i){return q$(t)?Ga(e,t,this.transformNoRotation):(Sl[0]=t,Sl[1]=i,Ga(e,Sl,this.transformNoRotation))}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size");return lL(e,i,s,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size"),o=new Ka({targetGeometry:new Le(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",o),!n||!t||!i)return;this.resolution=wy(o),this.rotation=r,this.scale=i,this.spatialReference=t,Mv(this.center,e);const a=n[0]!==0?2/n[0]:0,l=n[1]!==0?-2/n[1]:0;fG(this.displayMat3,a,0,0,0,l,0,-1,1,1);const u=mG(this.viewMat3),h=qm(n[0]/2,n[1]/2),f=qm(-n[0]/2,-n[1]/2),y=nk(r);RM(u,u,h),yG(u,u,y),RM(u,u,f),uL(this.displayViewMat3,this.displayMat3,u);const g=sL(this.viewMat2d,h);return S_(g,g,y),Bm(g,g,f),sbe(this.extent,o,n),cL(this.transform,o,n,s),rL(this.inverseTransform,this.transform),dbe(this.transformNoRotation,o,n,s),this.worldScreenWidth=pbe(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};c([d({readOnly:!0})],uu.prototype,"id",void 0),c([d({value:1,json:{write:!0}})],uu.prototype,"pixelRatio",null),c([d({json:{write:!0}})],uu.prototype,"size",null),c([d()],uu.prototype,"spatialReference",void 0),c([d({type:Ka,json:{write:!0}})],uu.prototype,"viewpoint",null),uu=FM=c([O("esri.views.2d.ViewState")],uu);const C5=uu;var NM,DM;let Xl=NM=class extends Ee{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new NM({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};c([d()],Xl.prototype,"left",void 0),c([d()],Xl.prototype,"top",void 0),c([d()],Xl.prototype,"right",void 0),c([d()],Xl.prototype,"bottom",void 0),Xl=NM=c([O("esri.views.2d.PaddedViewState.Padding")],Xl);let Mf=DM=class extends C5{constructor(...e){super(...e),this.paddedViewState=new C5,this._updateContent=(()=>{const t=ji();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const s=this.paddedViewState;br(t,r.left+r.right,r.top+r.bottom),Ov(t,i,t),Mv(s.size,t);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.watch(["size","padding"],this._updateContent,!0),this.padding=new Xl,this.size=[0,0]}set padding(e){this._set("padding",e||new Xl)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,mbe(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=t.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new DM({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};c([d()],Mf.prototype,"paddedViewState",void 0),c([d({type:Xl})],Mf.prototype,"padding",null),c([d()],Mf.prototype,"viewpoint",null),Mf=DM=c([O("esri.views.2d.PaddedViewState")],Mf);const pwe=Mf;class fwe{constructor(t,i){this.item=t,this.controller=i,this.promise=null}}class xG{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new TM(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&N(i)&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,r)=>t(r))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,i){const r=this.get(t);if(r)return r;const s=new AbortController;let n=null;i&&(n=rs(i,()=>s.abort()));const o=()=>{const h=this._processingItems.get(t);h&&h.controller.abort(),a(),u.reject(qi())},a=()=>{l.remove(),N(n)&&n.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},l=Rx(s.signal,o),u=uc();return this._deferreds.set(t,u),this._controllers.set(t,s),u.promise.then(a,a),this._queue.push(t),this._scheduleNext(),u.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const t=[];this._processingItems.forEach(i=>t.push(i)),this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=Zv(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(Q(t))return;let i;const r=new AbortController,s=new fwe(t,r);this._processingItems.set(t,s);try{i=this.process(t,r.signal)}catch(n){this._processError(s,n)}yc(i)?(s.promise=i,i.then(n=>this._processResult(s,n),n=>this._processError(s,n))):this._processResult(s,i)}get test(){return{update:t=>this.runTask(t)}}}function mwe(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const G$=new Set,Bb=[],zp=new Map,E5=[0,0];let Lc=class extends Ee{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new xG({concurrency:e,process:(i,r)=>{const s=this._keyToItem.get(i);return t(s,{signal:r})},peeker:i=>i.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const i=e.key.id+"-"+t;if(this.has(i))return this.get(i);const r=this._queue.push(i),s=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),r.then(s,s),this.notifyChange("updating"),r}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(u=>{const h=this._keyToItem.get(u),f=this.tileInfoView.getTileScale(h.key);zp.has(f)||(zp.set(f,[]),i=Math.max(f,i),r=Math.min(f,r)),zp.get(f).push(h.key),G$.add(f)});let s=this.state.scale;zp.has(s)||(mwe(Bb,G$),Bb.sort((u,h)=>u-h),s=Bb.reduce((u,h)=>Math.abs(h-s)<Math.abs(u-s)?h:u,Bb[0])),s=Math.min(s,i),s=Math.max(s,r);const n=zp.get(s),o=t.getClosestInfoForScale(s),a=o.getColumnForX(this.state.center[0]),l=o.getRowForY(this.state.center[1]);return n.sort((u,h)=>{const f=o.denormalizeCol(u.col,u.world),y=o.denormalizeCol(h.col,h.world);return Math.sqrt((a-f)*(a-f)+(l-u.row)*(l-u.row))-Math.sqrt((a-y)*(a-y)+(l-h.row)*(l-h.row))}),G$.clear(),zp.clear(),n[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r=Number.POSITIVE_INFINITY,s=null;return e.forEach(n=>{const o=this._keyToItem.get(n);t.getTileCoords(E5,o.key);const a=I_(E5,i);a<r&&(r=a,s=o.key)}),s.id}};c([d({constructOnly:!0})],Lc.prototype,"concurrency",void 0),c([d({constructOnly:!0})],Lc.prototype,"process",void 0),c([d()],Lc.prototype,"state",void 0),c([d({constructOnly:!0})],Lc.prototype,"strategy",void 0),c([d({constructOnly:!0})],Lc.prototype,"tileInfoView",void 0),c([d({readOnly:!0})],Lc.prototype,"updating",null),Lc=c([O("esri.views.2d.tiling.PagedTileQueue")],Lc);class Vs{constructor(t,i,r,s){this.set(t,i,r,s)}static getId(t,i,r,s){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${r}/${s}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|t<<8|r}acquire(t,i,r,s){this.set(t,i,r,s)}contains(t){const i=t.level-this.level;return this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new Vs(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,r,s){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[n,o,a,l]=t.split("/");this.level=parseFloat(n),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+t,this.row=+i,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Vs(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,i=this.row<<1,r=this.col<<1,s=this.world;return[new Vs(t,i,r,s),new Vs(t,i,r+1,s),new Vs(t,i+1,r,s),new Vs(t,i+1,r+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}Vs.pool=new ua(Vs,null,null,25,50);function Rc(e,t){return[e,t]}function Td(e,t,i){return e[0]=t,e[1]=i,e}function ywe(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}const ko=new Vs("0/0/0/0");class dL{constructor(t,i,r,s,n,o,a,l,u,h,f,y){this.level=t,this.resolution=i,this.scale=r,this.origin=s,this.first=n,this.last=o,this.size=a,this.norm=l,this.worldStart=u,this.worldEnd=h,this.worldSize=f,this.wrap=y}static create(t,i,r=null){const s=na(t.spatialReference),n=i.origin||Rc(t.origin.x,t.origin.y),o=Rc(t.size[0]*i.resolution,t.size[1]*i.resolution),a=Rc(-1/0,-1/0),l=Rc(1/0,1/0),u=Rc(1/0,1/0);N(r)&&(Td(a,Math.max(0,Math.floor((r.xmin-n[0])/o[0])),Math.max(0,Math.floor((n[1]-r.ymax)/o[1]))),Td(l,Math.max(0,Math.floor((r.xmax-n[0])/o[0])),Math.max(0,Math.floor((n[1]-r.ymin)/o[1]))),Td(u,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:h,rows:f}=i;let y,g,b,w;return!r&&h&&f&&(Td(a,h[0],f[0]),Td(l,h[1],f[1]),Td(u,h[1]-h[0]+1,f[1]-f[0]+1)),t.isWrappable?(y=Rc(Math.ceil(Math.round((s.valid[1]-s.valid[0])/i.resolution)/t.size[0]),u[1]),g=Rc(Math.floor((s.origin[0]-n[0])/o[0]),a[1]),b=Rc(y[0]+g[0]-1,l[1]),w=!0):(g=a,b=l,y=u,w=!1),new dL(i.level,i.resolution,i.scale,n,a,l,u,o,g,b,y,w)}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,r=!1){ko.set(i);const s=r?ko.col:this.denormalizeCol(ko.col,ko.world),n=ko.row;return ywe(t,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),t}getTileCoords(t,i,r=!1){ko.set(i);const s=r?ko.col:this.denormalizeCol(ko.col,ko.world);return Array.isArray(t)?Td(t,this.getXForColumn(s),this.getYForRow(ko.row)):(t.x=this.getXForColumn(s),t.y=this.getYForRow(ko.row)),t}}class Gm{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,i){const{spans:r,lodInfo:s}=this,{level:n}=s;if(r.length!==0)for(const{row:o,colFrom:a,colTo:l}of r)for(let u=a;u<=l;u++)t.call(i,n,o,s.normalizeCol(u),s.getWorldForColumn(u))}}Gm.pool=new ua(Gm);class H${constructor(t,i,r){this.row=t,this.colFrom=i,this.colTo=r}}const ui=new Vs("0/0/0/0");class hL{constructor(t,i,r,s,n,o,a,l){this.x=t,this.ymin=i,this.ymax=r,this.invM=s,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[r,s]=t,[n,o]=i,a=n-r,l=o-s,u=l!==0?a/l:0,h=(Math.ceil(s)-s)*u,f=(Math.floor(s)-s)*u;return new hL(r,Math.floor(s),Math.ceil(o),u,a<0?h:f,a<0?f:h,a<0?n:r,a<0?r:n)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const cn=[[0,0],[0,0],[0,0],[0,0]],gwe=1e-6;class vwe{constructor(t,i=null){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const r=t.lods.slice();r.sort(function(n,o){return o.scale-n.scale});const s=this._lodInfos=r.map(n=>dL.create(t,n,i));r.forEach((n,o)=>{this._infoByLevel[n.level]=s[o],this._infoByScale[n.scale]=s[o],this.scales[o]=n.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,r=!1){ui.set(i);const s=this._infoByLevel[ui.level];return s?s.getTileBounds(t,ui,r):t}getTileCoords(t,i,r=!1){ui.set(i);const s=this._infoByLevel[ui.level];return s?s.getTileCoords(t,ui,r):t}getTileCoverage(t,i=192,r="closest"){const s=r==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),n=Gm.pool.acquire(s),o=this._wrap;let a,l,u,h=1/0,f=-1/0;const y=n.spans;cn[0][0]=cn[0][1]=cn[1][1]=cn[3][0]=-i,cn[1][0]=cn[2][0]=t.size[0]+i,cn[2][1]=cn[3][1]=t.size[1]+i;for(const x of cn)t.toMap(x,x),x[0]=s.getColumnForX(x[0]),x[1]=s.getRowForY(x[1]);const g=[];let b=3;for(let x=0;x<4;x++){if(cn[x][1]===cn[b][1]){b=x;continue}const T=hL.create(cn[x],cn[b]);h=Math.min(T.ymin,h),f=Math.max(T.ymax,f),g[T.ymin]===void 0&&(g[T.ymin]=[]),g[T.ymin].push(T),b=x}if(h==null||f==null||f-h>100)return null;let w=[];for(a=h;a<f;){g[a]!=null&&(w=w.concat(g[a])),l=1/0,u=-1/0;for(let x=w.length-1;x>=0;x--){const T=w[x];l=Math.min(l,T.getLeftCol()),u=Math.max(u,T.getRightCol())}if(l=Math.floor(l),u=Math.floor(u),a>=s.first[1]&&a<=s.last[1])if(o)if(s.size[0]<s.worldSize[0]){const x=Math.floor(u/s.worldSize[0]);for(let T=Math.floor(l/s.worldSize[0]);T<=x;T++)y.push(new H$(a,Math.max(s.getFirstColumnForWorld(T),l),Math.min(s.getLastColumnForWorld(T),u)))}else y.push(new H$(a,l,u));else l>s.last[0]||u<s.first[0]||(l=Math.max(l,s.first[0]),u=Math.min(u,s.last[0]),y.push(new H$(a,l,u)));a+=1;for(let x=w.length-1;x>=0;x--){const T=w[x];T.ymax>=a?T.incrRow():w.splice(x,1)}}return n}getTileParentId(t){ui.set(t);const i=this._infoByLevel[ui.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(ui,this._lodInfos[r],ui),ui.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){ui.set(i);const r=this._infoByLevel[ui.level],s=t.lodInfo;if(s.resolution>r.resolution){this._getTileIdAtLOD(ui,s,ui);const o=s.denormalizeCol(ui.col,ui.world);for(const a of t.spans)if(a.row===ui.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(s.resolution<r.resolution){const[o,a,l,u]=t.spans.reduce((w,x)=>(w[0]=Math.min(w[0],x.row),w[1]=Math.max(w[1],x.row),w[2]=Math.min(w[2],x.colFrom),w[3]=Math.max(w[3],x.colTo),w),[1/0,-1/0,1/0,-1/0]),h=r.denormalizeCol(ui.col,ui.world),f=s.getColumnForX(r.getXForColumn(h)),y=s.getRowForY(r.getYForRow(ui.row)),g=s.getColumnForX(r.getXForColumn(h+1))-1,b=s.getRowForY(r.getYForRow(ui.row+1))-1;return!(f>u||g<l||y>a||b<o)}const n=s.denormalizeCol(ui.col,ui.world);return t.spans.some(o=>o.row===ui.row&&o.colFrom<=n&&o.colTo>=n)}normalizeBounds(t,i,r){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const s=na(this.tileInfo.spatialReference),n=-r*(s.valid[1]-s.valid[0]);t[0]+=n,t[2]+=n}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(t>i[r]+gwe)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((r,s)=>Math.abs(s-t)<Math.abs(r-t)?s:r,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let r=i.length-1;r>=0;r--)if(t<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-t)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,i,r){const s=this._infoByLevel[r.level];return t.set(r),i.resolution<s.resolution?null:(i.resolution===s.resolution||(t.level=i.level,t.col=Math.floor(r.col*s.resolution/i.resolution+.01),t.row=Math.floor(r.row*s.resolution/i.resolution+.01)),t)}}function _we(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const W$=new Set,qb=[],Vp=new Map,A5=[0,0];let Ul=class extends Ee{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:i}=this;this._queue=new xG({concurrency:e,process:(r,s)=>{const n=this._keyToItem.get(r);return t(n,{signal:s})},peeker:i==="scale-first"?r=>this._peekByScaleFirst(r):r=>this._peekByCenterFirst(r)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const i=this._queue.push(t),r=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),i.then(r,r),this.notifyChange("updating"),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(u=>{const h=this._keyToItem.get(u),f=this.tileInfoView.getTileScale(h.key);Vp.has(f)||(Vp.set(f,[]),i=Math.max(f,i),r=Math.min(f,r)),Vp.get(f).push(h.key),W$.add(f)});let s=this.state.scale;Vp.has(s)||(_we(qb,W$),qb.sort((u,h)=>u-h),s=qb.reduce((u,h)=>Math.abs(h-s)<Math.abs(u-s)?h:u,qb[0])),s=Math.min(s,i),s=Math.max(s,r);const n=Vp.get(s),o=t.getClosestInfoForScale(s),a=o.getColumnForX(this.state.center[0]),l=o.getRowForY(this.state.center[1]);return n.sort((u,h)=>{const f=o.denormalizeCol(u.col,u.world),y=o.denormalizeCol(h.col,h.world);return Math.sqrt((a-f)*(a-f)+(l-u.row)*(l-u.row))-Math.sqrt((a-y)*(a-y)+(l-h.row)*(l-h.row))}),W$.clear(),Vp.clear(),n[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r=Number.POSITIVE_INFINITY,s=null;return e.forEach(n=>{const o=this._keyToItem.get(n);t.getTileCoords(A5,o.key);const a=I_(A5,i);a<r&&(r=a,s=o.key)}),s.id}};c([d({constructOnly:!0})],Ul.prototype,"concurrency",void 0),c([d({constructOnly:!0})],Ul.prototype,"process",void 0),c([d()],Ul.prototype,"state",void 0),c([d({constructOnly:!0})],Ul.prototype,"strategy",void 0),c([d({constructOnly:!0})],Ul.prototype,"tileInfoView",void 0),c([d({readOnly:!0})],Ul.prototype,"updating",null),Ul=c([O("esri.views.2d.tiling.TileQueue")],Ul);const pPe=Ul;class bwe{constructor(t,i,r){this.maxSize=t,this.tileInfoView=i,this.removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return null;const r=i.key.level,s=this._tileKeysPerLevel[r];M5(this._tilePerId,t);for(let n=0;n<s.length;n++)if(s[n].id===t){s.splice(n,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,t);const s=i.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(i)}prune(t,i,r){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==t&&(s=this._pruneAroundCenterTile(s,i,r,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,i,r,t))}_pruneAroundCenterTile(t,i,r,s){const n=this._tileKeysPerLevel[s];if(!n||n.length===0)return t;const{size:o,origin:a}=this.tileInfoView.tileInfo,l=r*o[0],u=r*o[1],h=[0,0],f=[0,0];for(n.sort((y,g)=>(h[0]=a.x+l*(y.col+.5),h[1]=a.y-u*(y.row+.5),f[0]=a.x+l*(g.col+.5),f[1]=a.y-u*(g.row+.5),QS(h,i)-QS(f,i)));n.length>0;){const y=n.pop();if(this._removeTile(y.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this.removedFunc&&this.removedFunc(i),M5(this._tilePerId,t)}}function M5(e,t){e.delete(t)}const $d=new Vs(0,0,0,0),Gn=new Map,Up=[],Gb=[];class fPe{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=t.resampling==null||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new bwe(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){const{resampling:i,tileIndex:r}=this,s=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.coveragePolicy);if(Gb.length=0,Up.length=0,Gn.clear(),!s)return;const{minScale:n,maxScale:o}=this.tileInfoView.tileInfo,{spans:a,lodInfo:l}=s,{level:u}=l,{scale:h,center:f,resolution:y}=t.state,g=!t.stationary&&h>this._previousScale;if(this._previousScale=h,this.tiles.length=0,!i&&(h>n||h<o))return this.tiles.length=0,Gn.clear(),r.forEach(T=>{this.releaseTile(T)}),r.clear(),Gb.length=0,Up.length=0,Gn.clear(),Gm.pool.release(s),!0;r.forEach(T=>T.visible=!0);let b=0,w=0;if(a.length>0)for(const{row:T,colFrom:M,colTo:F}of a)for(let D=M;D<=F;D++){b++;const R=$d.set(u,T,l.normalizeCol(D),l.getWorldForColumn(D)).id;if(r.has(R)){const _=r.get(R);_.isReady?(Gn.set(R,_),w++):g||this._addParentTile(R,Gn)}else{let _;if(this._tileCache&&this._tileCache.has(R)){if(_=this._tileCache.pop(R),this.tileIndex.set(R,_),_.isReady){Gn.set(R,_),w++;continue}}else _=this.acquireTile($d),this.tileIndex.set(R,_);g||this._addParentTile(R,Gn)}}const x=w===b;r.forEach((T,M)=>{if($d.set(M),Gn.has(M))return;const F=this.tileInfoView.intersects(s,$d),D=this.cachePolicy==="purge"?$d.level!==u:$d.level>u;!F||!g&&x?!D&&F||Up.push(M):T.isReady?D&&this.cachePolicy==="purge"&&this._hasReadyAncestor($d,u)?Up.push(M):Gb.push(M):D&&Up.push(M)});for(const T of Gb){const M=r.get(T);M&&M.isReady&&Gn.set(T,M)}for(const T of Up){const M=r.get(T);this._tileCache?this._tileCache.add(M):this.releaseTile(M),r.delete(T)}return Gn.forEach(T=>this.tiles.push(T)),r.forEach(T=>{Gn.has(T.key.id)||(T.visible=!1)}),this._tileCache&&this._tileCache.prune(u,f,y),Gm.pool.release(s),Gn.clear(),x}clear(t=!0){const{tileIndex:i}=this;t&&i.forEach(r=>{this.releaseTile(r)}),i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){let r=t,s=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(s=this.tileIndex.get(r),s&&s.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if(this._tileCache&&this._tileCache.has(r)&&(s=this._tileCache.pop(r),this.tileIndex.set(r,s),s&&s.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(t,i){const r=rp();this.tileInfoView.getTileBounds(r,t,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=i&&s.key.level<t.level){const n=rp();if(this.tileInfoView.getTileBounds(n,s.key,!0),Gie(n,r))return!0}return!1}}function pL(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}class O5 extends Ir{constructor(t,i){super(!0),this.view=t,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(t,i){pL(t.data,"primary")&&(t.stopPropagation(),i?this.view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this.view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class wwe extends Ir{constructor(t,i,r){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",r,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:r}=i;if(r!==this.pointerType)return;t.stopPropagation();const{action:s,delta:n}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(s){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=n,a.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const l=1.015**n.y,u=this._startScale*l,h=u/this._currentScale;a.setViewpointImmediate(h),this._currentScale=u;break}case"end":{const{constraints:l}=o,{effectiveLODs:u,snapToZoom:h}=l;if(!h||!u)return void a.end();const f=l.snapScale(this._currentScale),y=(n.y>0?Math.max(f,l.snapToPreviousScale(this._startScale)):Math.min(f,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(y);break}}}}class NI{constructor(t){this.callbacks=t,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(t){const i=t.data,r=i.pointers.size;switch(i.action){case"start":this.currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this.previousEvent),this.currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this.startEvent&&this._emitEnd(this.previousEvent),this.currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this.currentCount=0}this.previousEvent=t}_emitStart(t){this.startEvent=t,this.callbacks.condition(this.currentCount,t)&&this.callbacks.start(this.currentCount,t,this.startEvent)}_emitUpdate(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.update(this.currentCount,t,this.startEvent)}_emitEnd(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.end(this.currentCount,t,this.startEvent),this.startEvent=null}}class Swe extends Ir{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",r,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this.dragEventSeparator=new NI({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&pL(r.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class xwe extends Ir{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i;const s=this.view.mapViewNavigation;this.dragEventSeparator=new NI({start:(n,o)=>{s.rotate.begin(this.view,o.data),o.stopPropagation()},update:(n,o)=>{s.rotate.update(this.view,o.data),o.stopPropagation()},end:(n,o)=>{s.rotate.end(),o.stopPropagation()},condition:(n,o)=>n===1&&pL(o.data,this.pointerAction)}),this.registerIncoming("drag",r,n=>this.dragEventSeparator.handle(n))}}function Po(e){let t=e*e;return e<0&&(t*=-1),t}function Iwe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function Twe(e,t,i){const r=i,s=e.state,n=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return n.deviceType==="standard"?(r.translation[0]=Po(s.axes[0]),r.translation[1]=Po(s.axes[1]),r.translation[2]=Po(s.buttons[7])-Po(s.buttons[6]),r.heading=Po(s.axes[2]),r.tilt=Po(s.axes[3])):n.deviceType==="spacemouse"&&(r.translation[0]=1.2*Po(s.axes[0]),r.translation[1]=1.2*Po(s.axes[1]),r.translation[2]=2*-Po(s.axes[2]),r.heading=1.2*Po(s.axes[5]),r.tilt=1.2*Po(s.axes[3])),r.tilt*=o,JV(r.translation,r.translation,a),r}function $we(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}class Cwe extends Ir{constructor(t){super(!0),this.view=t,this.frameTask=null,this.watchHandles=new Ai,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this.handle.pause()}onInstall(t){super.onInstall(t),this.watchHandles.add([Pt(this.view.navigation.gamepad,"enabled",i=>{i?(this.handle.resume(),this.frameTask||(this.frameTask=$m({update:r=>this._frameUpdate(r.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))})])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this.view.navigation.gamepad.device;i&&t.data.device!==i||this.currentDevice&&this.currentDevice!==t.data.device||(t.data.action==="end"?(this.currentDevice=null,Iwe(this.transformation)):(this.currentDevice=t.data.device,Twe(t.data,this.view.navigation.gamepad,this.transformation)))}_frameUpdate(t){const i=this.transformation;if($we(i))return;const r=this.view.viewpoint.clone(),s=this.view.navigation.gamepad.velocityFactor,n=Awe*s*t;FI(r,r,[i.translation[0]*n,-i.translation[1]*n]);const o=1+i.translation[2]*Mwe*t,a=this.view.constraints.rotationEnabled?-i.heading*Ewe*t:0,l=this.view.size,u=[l[0]/2,l[1]];aG(r,r,o,a,u,l);const h=this.view.constraints.constrain(r,this.view.viewpoint);this.view.viewpoint=h}}const Ewe=.06,Awe=.7,Mwe=6e-4;class Owe extends Ir{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=this._keyMap[t.data.key];if(this._pressed=r!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),r){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class kwe extends Ir{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[t.data.key];if(this._pressed=s!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}var rm;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(rm||(rm={}));class Pwe extends Ir{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),i.zoomIn.forEach(s=>this._keysToZoomAction[s]=rm.IN),i.zoomOut.forEach(s=>this._keysToZoomAction[s]=rm.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=t.data;if(!(r in this._keysToZoomAction))return;const s=this._keysToZoomAction[r],{mapViewNavigation:n}=this.view;let o=null;switch(s){case rm.IN:o=n.zoomIn();break;case rm.OUT:o=n.zoomOut();break;default:return}n.begin(),o.then(()=>n.end()),t.stopPropagation()}}const Lwe=.6;class Rwe extends Ir{constructor(t,i){super(!0),this.view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(!this.view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this.view.mapViewNavigation,{x:r,y:s,deltaY:n}=t.data,o=1/Lwe**(1/60*n),a=i.zoom(o,[r,s]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}}class Fwe extends Ir{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this.dragEventSeparator=new NI({start:(r,s)=>{i.pinch.begin(this.view,s.data),s.stopPropagation()},update:(r,s)=>{i.pinch.update(this.view,s.data),s.stopPropagation()},end:(r,s)=>{i.pinch.end(this.view),s.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this.dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function k5(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value?i.value:1:0),axes:t.axes.map(i=>jwe(i,e.axisThreshold))}:{buttons:[],axes:[]}}function Nwe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function Dwe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function jwe(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}class zwe{constructor(t,i){this.element=t,this.input=i,this._hasEventListeners=!1,this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)},this._onDisconnectGamepad=n=>{const o=n.gamepad,a=o.index,l=this.inputDevices[a];l&&(this._emitGamepadEvent(o,k5(l),!1),this.inputDevices.splice(a,1),this.latestUpdate.splice(a,1),this.input.gamepad.devices.remove(l),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const r="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=r&&s,this.supported&&(this._forEachGamepad(n=>this._connectGamepad(n)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this.callback=t}_connectGamepad(t){const i=new iL(t);i.deviceType!=="unknown"&&(this.inputDevices[t.index]=i,this.input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this.frameTask==null&&(this.frameTask=$m({update:()=>this._readGamepadState()}))}_stopPolling(){this.frameTask!=null&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this.element.contains(document.activeElement),r=this.input.gamepad.enabledFocusMode==="document"&&!t||this.input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(s=>{const n=this.inputDevices[s.index];if(!n)return;const o=this.latestUpdate[s.index],a=k5(n),l=r||Dwe(a);o&&(o.timestamp===s.timestamp||!o.active&&l||Nwe(o.state,a))||this._emitGamepadEvent(s,a,!l)})}_forEachGamepad(t){const i=window.navigator.getGamepads();for(let r=0;r<i.length;r++){const s=i[r];this._validate(s)&&t(s)}}_emitGamepadEvent(t,i,r){const s=this.latestUpdate[t.index],n=s&&s.active;if(!n&&!r)return;const o=!n&&r?"start":n&&r?"update":"end";this.latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:r},this.callback&&this.callback({device:this.inputDevices[t.index],state:i,action:o})}_validate(t){if(!t||!t.connected)return!1;for(let i=0;i<t.axes.length;i++)if(isNaN(t.axes[i]))return!1;return!0}}const P5=re("trident"),L5=re("edge"),Vwe=re("chrome"),Uwe=re("ff"),Bwe=re("safari"),Bp={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};class DI{constructor(t,i){this.input=i,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new zwe(t,this.input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const r=this._active[i];this._element.removeEventListener(J$[i],r),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&J$[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(J$[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=t&&t.has("gamepad")}setPointerCapture(t,i){i?(this._element.setPointerCapture(t.pointerId),this._activePointerCaptures.add(t.pointerId)):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Bp.touchNone:Bp.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Bp.touchPan:Bp.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Bp.touchNone),this._element.classList.remove(Bp.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const r=Lq(this._element,t);return DI.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(t,i){const r=cve(i);r&&t==="key-up"&&this._keyDownState.delete(r);const s={native:i,key:r,repeat:r&&this._keyDownState.has(r)};r&&t==="key-down"&&this._keyDownState.add(s.key),this._callback(t,s)}_handlePointer(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,r)}_handlePointerPreventDefault(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,r)}_handleMouseWheel(t,i){let r=i.deltaY;switch(i.deltaMode){case 0:(P5||L5)&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}P5||L5?r*=.7:Vwe||Bwe?r*=.6:Uwe&&(r*=1.375);const s=100,n=Math.abs(r);n>s&&(r=r/n*200/(1+Math.exp(-.02*(n-s))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(t,o)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const r={native:i};i.preventDefault(),this._callback(t,r)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}}DI.test={disableSubpixelCoordinates:!1};const J$={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class qwe extends Ir{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}}function fL(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function Gwe(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}function Hwe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:qs()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[F,D]=e,[R,_]=[D.x-F.x,D.y-F.y];return t.radius=Math.sqrt(R*R+_*_)/2,t.center.x=(F.x+D.x)/2,t.center.y=(F.y+D.y)/2,t}let i=0,r=0;for(let F=0;F<e.length;F++)i+=e[F].x,r+=e[F].y;i/=e.length,r/=e.length;const s=e.map(F=>F.x-i),n=e.map(F=>F.y-r);let o=0,a=0,l=0,u=0,h=0,f=0,y=0;for(let F=0;F<s.length;F++){const D=s[F],R=n[F],_=D*D,q=R*R;o+=_,a+=q,l+=D*R,u+=_*D,h+=q*R,f+=D*q,y+=R*_}const g=.5*(u+f),b=.5*(h+y),w=o*a-l*l,x=(g*a-b*l)/w,T=(o*b-l*g)/w,M=qs(x+i,T+r);return{radius:Math.sqrt(x*x+T*T+(o+a)/e.length),center:M}}const co={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class Wwe extends Ir{constructor(t=co.maximumDoubleClickDelay,i=co.maximumDoubleClickDistance,r=co.maximumDoubleTouchDelay,s=co.maximumDoubleTouchDistance,n=Wv){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimeout=hp(t.doubleClickTimeout))}get hasPendingInputs(){return jx(this._pointerState,t=>t.doubleClickTimeout!=null)}_pointerId(t){const i=t.native;return i.pointerType==="mouse"?`${i.pointerId}:${i.button}`:`${i.pointerType}`}_handleImmediateClick(t){const i=t.data,r=this._pointerId(i),s=this._pointerState.get(r);if(s){const n=i.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;fL(s.event.data,i)>n?(this._clearDoubleClickTimeout(r,!0),this._startClick(t)):(this._clearDoubleClickTimeout(r,!1),this._doubleClick.emit(s.event.data,void 0,s.event.modifiers))}else this._startClick(t)}_startClick(t){const i=this._pointerId(t.data),r=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(i,{event:t,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(i),r)}),this.refreshHasPendingInputs()}_handlePointerDrag(t){const i=this._pointerId(t.data.currentEvent);this._clearDoubleClickTimeout(i,!0)}_handleDrag(t){const i=this._pointerId(t.data.pointer);this._clearDoubleClickTimeout(i,!0)}_clearDoubleClickTimeout(t,i){const r=this._pointerState.get(t);r&&(r.doubleClickTimeout.remove(),r.doubleClickTimeout=null,i&&this._doubleClickTimeoutExceeded(t),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}}class Jwe extends Ir{constructor(t=co.maximumDoubleClickDelay,i=co.maximumDoubleClickDistance,r=co.maximumDoubleTouchDelay,s=co.maximumDoubleTouchDistance,n=Wv){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=s,this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=qs(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new NI({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout!=null&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null)})}get hasPendingInputs(){return jx(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout.remove(),i.doubleTapTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,i,r){const{button:s,buttons:n,pointer:o,pointers:a,pointerType:l,timestamp:u}=r;return{action:t,delta:i,button:s,buttons:n,pointer:o,pointers:a,pointerType:l,timestamp:u}}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:s}=i,{center:n}=r;this._dragStartCenter=n;const o=this._createDoubleTapDragData("begin",qs(0,0),r);this._doubleTapDrag.emit(o,void 0,s),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:s}=i,n=qs(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",n,i);this._doubleTapDrag.emit(o,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:s}=i,n=qs(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",n,i);this._doubleTapDrag.emit(o,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,r=this._pointerId(i),s=this._pointerState.get(r),{pointerType:n}=i.native;if(s){const o=n==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(r),fL(s.event.data,i)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(t){const{native:i}=t,{pointerId:r,button:s,pointerType:n}=i;return n==="mouse"?`${r}:${s}`:`${n}`}_storePointerDown(t){const{data:i}=t,{pointerType:r}=i.native,s=this._pointerId(i),n=r==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(s),n);this._pointerState.set(s,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}}class Zwe extends Ir{constructor(t){super(!1),this.navigationTouch=t,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,r,s){return{action:t,pointerType:this.pointerType,button:this.mouseButton,buttons:i.buttons,timestamp:s,pointers:Ywe(this.activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){const i=t.native.pointerId,r=Hb(this.activePointerMap).angle,s={event:t,initialAngle:0,lastAngle:0};this.activePointerMap.set(i,s);const n=w1(s,IG(this.activePointerMap));s.initialAngle=n,s.lastAngle=n,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,r=this.activePointerMap.get(i);r?r.event=t:this._addPointer(t)}_removePointer(t){const i=Hb(this.activePointerMap).angle;this.activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=Hb(this.activePointerMap);this.activePointerMap.forEach(r=>{r.initialAngle=w1(r,i)-t,r.lastAngle=w1(r,i)-t})}_emitEvent(t,i,r){const s=Hb(this.activePointerMap);this.drag.emit(this._createPayload(t,i,s,r),void 0,this.startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,r=t.timestamp;this.activePointerMap.get(i)&&(this.activePointerMap.size===1?(this._updatePointer(t.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,r=i.currentEvent,s=t.timestamp;switch(i.action){case"start":case"update":this.isDragging?this.activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this.isCurrentDragSuppressed&&this._emitEvent("update",r,s)):(this._addPointer(r),this._emitEvent("added",r,s),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(r),this.pointerType=t.data.startEvent.pointerType,this.mouseButton=t.data.startEvent.button,this.startStateModifiers=t.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",r,s))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&this.pointerType==="touch"&&this.activePointerMap.size===1}}function IG(e){const t=[];return e.forEach(i=>{t.push(qs(i.event.x,i.event.y))}),Hwe(t)}function Hb(e){const t=IG(e);let i=0;return e.forEach(r=>{let s=w1(r,t),n=s-r.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=r.lastAngle+n,r.lastAngle=s,i+=s-r.initialAngle}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function Ywe(e){const t=new Map;return e.forEach((i,r)=>t.set(r,i.event)),t}function w1(e,t){const i=e.event,r=i.x-t.center.x,s=i.y-t.center.y;return Math.atan2(s,r)}var R5;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(R5||(R5={}));class Kwe extends Ir{constructor(t=co.maximumDoubleClickDelay,i=co.maximumDoubleClickDistance,r=co.maximumDoubleTouchDelay,s=co.maximumDoubleTouchDistance,n=Wv){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",o=>{this._handlePointerLoss(o,"pointer-up")}),this.registerIncoming("pointer-capture-lost",o=>{this._handlePointerLoss(o,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",o=>{this._handlePointerLoss(o,"pointer-cancel")})}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=this._pointerId(i);if(!this._pointerState.has(r)){const s={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(r,s),this.startCapturingPointer(i.native)}}_handlePointerLoss(t,i){const r=t.data,s=this._pointerId(r),n=this._pointerState.get(s);if(n&&i==="pointer-up"&&n.downButton===r.native.button){const o=n.immediateDoubleClick;if(o){o.timeoutHandle.remove();const a=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;fL(o,t.data)>a?this._startImmediateDoubleClick(t,n):(this._immediateDoubleClick.emit(t.data,void 0,o.modifiers),this._removeState(r))}else this._startImmediateDoubleClick(t,n)}}_startImmediateDoubleClick(t,i){const r=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_pointerId(t){const i=t.native;return i.pointerType==="mouse"?`${i.pointerId}:${i.button}`:`${i.pointerType}`}_removeState(t){const i=this._pointerId(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}const tg={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class Qwe extends Ir{constructor(t=tg.maximumClickDelay,i=tg.movementUntilMouseDrag,r=tg.movementUntilPenDrag,s=tg.movementUntilTouchDrag,n=tg.holdDelay,o=Wv){super(!1),this.maximumClickDelay=t,this.movementUntilMouseDrag=i,this.movementUntilPenDrag=r,this.movementUntilTouchDrag=s,this.holdDelay=n,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout!=null&&(t.holdTimeout.remove(),t.holdTimeout=null)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=i.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this.holdDelay));const n={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(r,n),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,i,r){return{action:t,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:r}}_handlePointerMove(t){const i=t.data,r=i.native.pointerId,s=this._pointerState.get(r);s&&(s.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",s,i),void 0,s.modifiers):Gwe(i,s.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),s.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}_startDragging(t){const i=t.data,r=i.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=t.modifiers,s.isDragging=!0,r===s.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",s,i)):this._pointerDrag.emit(this._createPointerDragData("start",s,s.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const r=t.data,s=r.native.pointerId,n=this._pointerState.get(s);n&&(n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",n,i==="pointer-up"?r:n.previousEvent),void 0,n.modifiers):i==="pointer-up"&&n.downButton===r.native.button&&t.timestamp-n.startTimestamp<=this.maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(s),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}}const Wb={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let S1=class extends Ee{constructor(){super(...arguments),this._handles=new Ai}initialize(){this._handles.add([bae(this.view,"ready",()=>this._disconnect()),IU(this.view,"ready",()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const e=this.view.surface,t=new DI(e,this.view.input),i=[new Kwe,new Qwe,new Wwe,new Zwe(this.view.navigation),new Jwe],r=new ah({eventSource:t,recognizers:i});r.installHandlers("prevent-context-menu",[new qwe],Zu.INTERNAL),r.installHandlers("navigation",[new Fwe(this.view),new Cwe(this.view),new Rwe(this.view),new O5(this.view),new O5(this.view,[Wb.counter]),new Swe(this.view,"primary"),new Owe(this.view,Wb.pan),new Pwe(this.view,Wb.zoom),new kwe(this.view,Wb.rotate),new xwe(this.view,"secondary"),new wwe(this.view,"touch")],Zu.INTERNAL),this.view.viewEvents.connect(r),this._source=t,this._inputManager=r,Pt(this.view.navigation,"browserTouchPanEnabled",s=>{this._source.browserTouchPanningEnabled=!s})}get test(){return{inputManager:this._inputManager}}};c([d()],S1.prototype,"view",void 0),S1=c([O("esri.views.2d.input.MapViewInputManager")],S1);const Xwe=S1;var F5,N5,D5,TG={exports:{}};F5=TG,N5=function(){function e(s,n,o,a,l){t(s,n,o||0,a||s.length-1,l||r)}function t(s,n,o,a,l){for(;a>o;){if(a-o>600){var u=a-o+1,h=n-o+1,f=Math.log(u),y=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*y*(u-y)/u)*(h-u/2<0?-1:1);t(s,n,Math.max(o,Math.floor(n-h*y/u+g)),Math.min(a,Math.floor(n+(u-h)*y/u+g)),l)}var b=s[n],w=o,x=a;for(i(s,o,n),l(s[a],b)>0&&i(s,o,a);w<x;){for(i(s,w,x),w++,x--;l(s[w],b)<0;)w++;for(;l(s[x],b)>0;)x--}l(s[o],b)===0?i(s,o,x):i(s,++x,a),x<=n&&(o=x+1),n<=x&&(a=x-1)}}function i(s,n,o){var a=s[n];s[n]=s[o],s[o]=a}function r(s,n){return s<n?-1:s>n?1:0}return e},(D5=N5())!==void 0&&(F5.exports=D5);const e1e=TG.exports;function tx(e,t){if(!(this instanceof tx))return new tx(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function t1e(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function qp(e,t){h0(e,0,e.children.length,t,e)}function h0(e,t,i,r,s){s||(s=Of(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n,o=t;o<i;o++)n=e.children[o],p0(s,e.leaf?r(n):n);return s}function p0(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function j5(e,t){return e.minX-t.minX}function z5(e,t){return e.minY-t.minY}function Z$(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Jb(e){return e.maxX-e.minX+(e.maxY-e.minY)}function i1e(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function r1e(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),n=Math.min(e.maxY,t.maxY);return Math.max(0,s-i)*Math.max(0,n-r)}function Y$(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Zb(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Of(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function V5(e,t,i,r,s){for(var n,o=[t,i];o.length;)(i=o.pop())-(t=o.pop())<=r||(n=t+Math.ceil((i-t)/r/2)*r,e1e(e,n,t,i,s),o.push(t,n,n,i))}tx.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!Zb(e,t))return i;for(var s,n,o,a,l=[];t;){for(s=0,n=t.children.length;s<n;s++)o=t.children[s],Zb(e,a=t.leaf?r(o):o)&&(t.leaf?i.push(o):Y$(e,a)?this._all(o,i):l.push(o));t=l.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!Zb(e,t))return!1;for(var r,s,n,o,a=[];t;){for(r=0,s=t.children.length;r<s;r++)if(n=t.children[r],Zb(e,o=t.leaf?i(n):n)){if(t.leaf||Y$(e,o))return!0;a.push(n)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var s=this.data;this.data=r,r=s}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Of([]),this},remove:function(e,t){if(!e)return this;for(var i,r,s,n,o=this.data,a=this.toBBox(e),l=[],u=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],i=u.pop(),n=!0),o.leaf&&(s=t1e(e,o.children,t))!==-1)return o.children.splice(s,1),l.push(o),this._condense(l),this;n||o.leaf||!Y$(o,a)?r?(i++,o=r.children[i],n=!1):o=null:(l.push(o),u.push(i),i=0,r=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:j5,compareMinY:z5,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var s,n=i-t+1,o=this._maxEntries;if(n<=o)return qp(s=Of(e.slice(t,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,r-1))),(s=Of([])).leaf=!1,s.height=r;var a,l,u,h,f=Math.ceil(n/o),y=f*Math.ceil(Math.sqrt(o));for(V5(e,t,i,y,this.compareMinX),a=t;a<=i;a+=y)for(V5(e,a,u=Math.min(a+y-1,i),f,this.compareMinY),l=a;l<=u;l+=f)h=Math.min(l+f-1,u),s.children.push(this._build(e,l,h,r-1));return qp(s,this.toBBox),s},_chooseSubtree:function(e,t,i,r){for(var s,n,o,a,l,u,h,f;r.push(t),!t.leaf&&r.length-1!==i;){for(h=f=1/0,s=0,n=t.children.length;s<n;s++)l=Z$(o=t.children[s]),(u=i1e(e,o)-l)<f?(f=u,h=l<h?l:h,a=o):u===f&&l<h&&(h=l,a=o);t=a||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,s=i?e:r(e),n=[],o=this._chooseSubtree(s,this.data,t,n);for(o.children.push(e),p0(o,s);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(s,n,t)},_split:function(e,t){var i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var n=this._chooseSplitIndex(i,s,r),o=Of(i.children.splice(n,i.children.length-n));o.height=i.height,o.leaf=i.leaf,qp(i,this.toBBox),qp(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(e,t){this.data=Of([e,t]),this.data.height=e.height+1,this.data.leaf=!1,qp(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,s,n,o,a,l,u,h;for(l=u=1/0,r=t;r<=i-t;r++)o=r1e(s=h0(e,0,r,this.toBBox),n=h0(e,r,i,this.toBBox)),a=Z$(s)+Z$(n),o<l?(l=o,h=r,u=a<u?a:u):o===l&&a<u&&(u=a,h=r);return h},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:j5,s=e.leaf?this.compareMinY:z5;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,s)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var s,n,o=this.toBBox,a=h0(e,0,t,o),l=h0(e,i-t,i,o),u=Jb(a)+Jb(l);for(s=t;s<i-t;s++)n=e.children[s],p0(a,e.leaf?o(n):n),u+=Jb(a);for(s=i-t-1;s>=t;s--)n=e.children[s],p0(l,e.leaf?o(n):n),u+=Jb(l);return u},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)p0(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():qp(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};class ix{constructor(t,i){this.key=new Vs(0,0,0,0),this.bounds=rp(),this.objectIds=new Set,this.key.set(i);const r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level}get id(){return this.key.id}get extent(){return Et.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const t=this.key.getChildKeys(),i=ws.acquire();for(let r=0;r<t.length;r++)i[r]=new ix(this.tileInfoView,t[r]);return i}getQuantizationParameters(){return b9.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}const Cd={added:[],removed:[]},K$=new Set,s1e=new Vs(0,0,0,0);class n1e extends bo{constructor(t){super(),this._tiles=new Map,this._index=tx(9,re("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const s=new ix(this.tileScheme,r);this._tiles.set(r,s),this._index.insert(s),i.added.push(s)}for(const r of t.removed)if(this.has(r)){const s=this.get(r);this._tiles.delete(r),this._index.remove(s),i.removed.push(s)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:r,lodInfo:s}=i,{level:n}=s;if(r.length>0)for(const{row:o,colFrom:a,colTo:l}of r)for(let u=a;u<=l;u++){const h=s1e.set(n,o,s.normalizeCol(u),s.getWorldForColumn(u)).id;if(K$.add(h),!this.has(h)){const f=new ix(this.tileScheme,h);this._tiles.set(h,f),this._index.insert(f),this.tiles.push(f),Cd.added.push(f)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];K$.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Cd.removed.push(a))}(Cd.added.length||Cd.removed.length)&&this.emit("update",Cd),Gm.pool.release(i),K$.clear(),Cd.added.length=0,Cd.removed.length=0}}let o1e=0,du=class extends Ee{constructor(){super(...arguments),this.color=new Oe([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return o1e++}};c([d({readOnly:!0})],du.prototype,"version",null),c([d({type:Oe})],du.prototype,"color",void 0),c([d({type:Oe})],du.prototype,"haloColor",void 0),c([d()],du.prototype,"haloOpacity",void 0),c([d()],du.prototype,"fillOpacity",void 0),du=c([O("esri.views.2d.support.HighlightOptions")],du);const $G=du,a1e=e=>e.indexOf("Brush")!==-1;class CG{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),a1e(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}}function l1e(e,t,i,r,s,n,o,a){let l;e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0}),e.width!=null&&e.height!=null?l=[e.width,e.height]:e.width==null&&e.height!=null?l=[e.height,e.height]:e.width!=null&&e.height==null?l=[e.width,e.width]:e.width==null&&e.height==null&&(l=null);const u=i[0]-(r.left+r.right),h=i[1]-(r.top+r.bottom);let f,y,g=e.area||{x:0,y:0,width:u,height:h};if(l){const b=u/h,w=l[0]/l[1];if(w>b){const x=g.width/w;g={x:g.x,y:Math.round(g.y+(g.height-x)/2),width:g.width,height:Math.round(x)}}else{const x=g.height*w;g={x:Math.round(g.x+(g.width-x)/2),y:g.y,width:Math.round(x),height:g.height}}}else l=[g.width,g.height];return l[0]>g.width?(f=Math.min(l[0]/g.width,t),y=l[0]/g.width/f):(f=1,y=l[0]/g.width),{resolutionScale:f,cropArea:{x:Math.round((g.x+r.left)*f),y:Math.round((g.y+r.top)*f),width:Math.round(g.width*f),height:Math.round(g.height*f)},outputScale:y,format:s,quality:n,children:o,rotation:a}}function mPe(e,t,i,r){r.premultipliedAlpha&&m1e(e),i.width=e.width,i.height=e.height;const s=i.getContext("2d");s.putImageData(e,0,0),r.flipY&&f1e(s);const n=s.getImageData(0,0,e.width,e.height),o=c1e(i,t);return i.width=0,i.height=0,{dataUrl:o,data:n}}function c1e(e,t){const i=y1e[t.format],r=t.quality/100;return e.toDataURL(i,r)}function u1e(e,t){const i=p1e(e),r=v1e[i];return{format:i,quality:fo(t!=null?t:r,0,100)}}function d1e(e,t){return t/Math.max(e[0],e[1])}function yPe(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(rx)try{return new ImageData(e,t)}catch{rx=!1}return EG(e,t,i)}function gPe(e,t,i,r){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(rx)try{return new ImageData(e,t,i)}catch{rx=!1}const s=EG(t,i,r);return s.data.set(e,0),s}function vPe(e,t,i,r=0,s=0,n=e.width-r,o=e.height-s,a=!1){const{data:l}=e,{width:u,height:h,data:f}=t,y=n/u,g=o/h,b=Math.ceil(y/2),w=Math.ceil(g/2),x=e.width;for(let T=0;T<h;T++)for(let M=0;M<u;M++){const F=4*(M+(a?h-T-1:T)*u);let D=0,R=0,_=0,q=0,W=0,oe=0;const te=(T+.5)*g;for(let he=Math.floor(T*g);he<(T+1)*g;he++){const ge=Math.abs(te-(he+.5))/w,Te=(M+.5)*y,Se=ge*ge;for(let vt=Math.floor(M*y);vt<(M+1)*y;vt++){const $t=Math.abs(Te-(vt+.5))/b,st=Math.sqrt(Se+$t*$t);if(st>=1)continue;let Kt=2*st*st*st-3*st*st+1;const yi=4*(r+vt+(s+he)*x);oe+=Kt*l[yi+3],R+=Kt,!i&&l[yi+3]<255&&(Kt=Kt*l[yi+3]/255),_+=Kt*l[yi],q+=Kt*l[yi+1],W+=Kt*l[yi+2],D+=Kt}}f[F]=_/D,f[F+1]=q/D,f[F+2]=W/D,f[F+3]=oe/R}return t}function EG(e,t,i){return i||(i=h1e()),i.getContext("2d").createImageData(e,t)}let ig=null,rx=!0;function h1e(){return ig||(ig=document.createElement("canvas"),ig.width=1,ig.height=1),ig}function p1e(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return g1e}}function f1e(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function m1e(e){const t=e.data,i=t.length;for(let r=0;r<i;r+=4){const s=t[r+3];if(s>0){const n=s/255;t[r+0]=t[r+0]/n,t[r+1]=t[r+1]/n,t[r+2]=t[r+2]/n}}}const y1e={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},U5=98,g1e="png",v1e={png:100,jpg:U5,jpeg:U5};var Sr;function _Pe(e,t,i={}){const r=AG(e);for(;r.length>1;){const s=sx(t,r.shift(),i);if(N(s))return s}return _1e(t,r.shift(),i)}function AG(e){const t=re("esri-force-webgl");if(t===Sr.WEBGL1||t===Sr.WEBGL2)return[t];switch(e){case"2d":return[Sr.WEBGL1];case"3d":return[Sr.WEBGL2,Sr.WEBGL1]}}function _1e(e,t,i={}){if(!window.WebGLRenderingContext)return B5(e,b1e),null;const r=sx(e,t,i);return Q(r)&&B5(e,w1e),r}function sx(e,t,i={}){const r=t===Sr.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let s=null;for(const n of r){try{s=e.getContext(n,i)}catch{}if(s)break}return s}function B5(e,t){const i=e.parentNode;i&&(i.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}(function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"})(Sr||(Sr={}));const b1e='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',w1e=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let Q$,X$;function q5(e){switch(e){case Sr.WEBGL1:return S1e();case Sr.WEBGL2:return x1e()}}function S1e(){return Q$||(Q$=$1e()),Q$}function x1e(){return X$||(X$=C1e()),X$}class MG{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1}}class I1e extends MG{constructor(){super(...arguments),this.type=Sr.WEBGL1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1}}class T1e extends MG{constructor(){super(...arguments),this.type=Sr.WEBGL2}}function OG(e,t){if(e===Sr.WEBGL1&&typeof WebGLRenderingContext===void 0||e===Sr.WEBGL2&&typeof WebGL2RenderingContext===void 0)return null;const i=document.createElement("canvas");if(!i)return null;let r=sx(i,e,{failIfMajorPerformanceCaveat:!0});if(Q(r)&&(r=sx(i,e),N(r)&&(t.majorPerformanceCaveat=!0)),Q(r))return r;if(e===Sr.WEBGL1){const n=r.getParameter(r.VERSION),o=n==null?void 0:n.match(/^WebGL\s+([\d.]*)/);if(o){const a=parseFloat(o[1]);t.available=a>=.94}}else t.available=!0;t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const s=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return s&&(t.supportsHighPrecisionFragment=s.precision>0),r}function $1e(){const e=new I1e,t=OG(Sr.WEBGL1,e);return Q(t)||(e.supportsElementIndexUint=t.getExtension("OES_element_index_uint")!==null,e.supportsStandardDerivatives=t.getExtension("OES_standard_derivatives")!==null,e.supportsInstancedArrays=t.getExtension("ANGLE_instanced_arrays")!==null,e.supportsTextureFloat=t.getExtension("OES_texture_float")!==null),e}function C1e(){const e=new T1e,t=OG(Sr.WEBGL2,e);return Q(t),e}function E1e(e){const t=A1e(e);if(!t.available)return new B("webgl:required","WebGL is required but not supported.");if(e==="3d"&&t.majorPerformanceCaveat)return new B("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new B("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new B("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===Sr.WEBGL1){if(!t.supportsElementIndexUint)return new B("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new B("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new B("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function A1e(e){const t=AG(e);for(;t.length>1;){const i=q5(t.shift());if(i.available)return i}return q5(t.shift())}function M1e(e){return e&&"nodeType"in e}function O1e(e){return e&&typeof e.render=="function"}const G5={component:"esri-component"};let ch=class extends Ee{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(G5.component),t&&t.classList.remove(G5.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||M1e(e)?(this._set("widget",null),sI(e)):(O1e(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};c([d({dependsOn:[]})],ch.prototype,"id",null),c([d()],ch.prototype,"node",null),c([gt("node")],ch.prototype,"castNode",null),c([d({readOnly:!0})],ch.prototype,"widget",void 0),ch=c([O("esri.views.ui.Component")],ch);const x1=ch,k1e={left:0,top:0,bottom:0,right:0},kG={bottom:30,top:15,right:15,left:15},eC="manual",cs={ui:"esri-ui",corner:"esri-ui-corner",innerContainer:"esri-ui-inner-container",manualContainer:"esri-ui-manual-container",cornerContainer:"esri-ui-corner-container",topLeft:"esri-ui-top-left",topRight:"esri-ui-top-right",bottomLeft:"esri-ui-bottom-left",bottomRight:"esri-ui-bottom-right"};function P1e(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function tC(e){const t=e,i=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(i===null||i===Object.prototype)&&("component"in t||"index"in t||"position"in t)?e:null}function iC(e,{top:t,bottom:i,left:r,right:s}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=s}let Bl=class extends bo.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new Ai,this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&iC(t,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&iC(t,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([St(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,Ya),St(()=>this.padding,this._applyUIPadding,Ya)])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(cs.ui),e.classList.add(Ile()),this._attachContainers(e)),t&&(t.classList.remove(cs.ui),iC(t,{top:"",bottom:"",left:"",right:""}),X8(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.top+t.bottom;return Math.max(e-i,0)}get padding(){return this._get("padding")}set padding(e){e?this._override("padding",e):this._clearOverride("padding")}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:k(k({},kG),e)}get width(){const e=this.get("view.width")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.left+t.right;return Math.max(e-i,0)}add(e,t){let i,r;if(Array.isArray(e))return void e.forEach(n=>this.add(n,t));const s=tC(e);s&&({index:i,position:t,component:e,key:r}=s),t&&typeof t=="object"&&({index:i,key:r,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,r)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(r=>this.remove(r,t));const i=this._find(e);if(i){const r=this._componentToKey;if(r.has(e)&&r.get(e)!==t)return;const s=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(e),this._components.splice(s,1)[0]}}empty(e){return Array.isArray(e)?e.map(t=>this.empty(t)).reduce((t,i)=>t.concat(i)):(e=e||eC)===eC?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(cs.corner)).map(t=>this.remove(t)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach(n=>this.move(n,t)),!e)return;let i;const r=tC(e)||tC(t);if(r&&(i=r.index,t=r.position,e=r.component||e),t&&!this._isValidPosition(t))return;const s=this.remove(e);s&&this.add(s,{position:t,index:i})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,i,r){e instanceof x1||(e=new x1({node:e})),this._place({component:e,position:t,index:i}),this._components.push(e),r&&this._componentToKey.set(e,r)}_find(e){return e?e instanceof x1?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||k1e}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(cs.innerContainer),e.classList.add(cs.cornerContainer);const t=document.createElement("div");t.classList.add(cs.innerContainer),t.classList.add(cs.manualContainer);const i=document.createElement("div");i.classList.add(cs.topLeft),i.classList.add(cs.corner),e.appendChild(i);const r=document.createElement("div");r.classList.add(cs.topRight),r.classList.add(cs.corner),e.appendChild(r);const s=document.createElement("div");s.classList.add(cs.bottomLeft),s.classList.add(cs.corner),e.appendChild(s);const n=document.createElement("div");n.classList.add(cs.bottomRight),n.classList.add(cs.corner),e.appendChild(n),this._innerContainer=e,this._manualContainer=t;const o=Is();this._cornerNameToContainerLookup={"top-left":i,"top-right":r,"bottom-left":s,"bottom-right":n,"top-leading":o?r:i,"top-trailing":o?i:r,"bottom-leading":o?n:s,"bottom-trailing":o?s:n},this._positionNameToContainerLookup=k({manual:t},this._cornerNameToContainerLookup)}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,i=e.position||eC,r=e.index,s=this._positionNameToContainerLookup[i],n=r>-1;if(P1e(t.widget)&&t.widget.startup(),!n)return void s.appendChild(t.node);const o=Array.prototype.slice.call(s.children);if(r===0)return void(s.firstChild?hF(t.node,s.firstChild):s.appendChild(t.node));r>=o.length?s.appendChild(t.node):hF(t.node,o[r])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let t,i=null;return this._components.some(r=>(t=r===e,t&&(i=r),t)),i}_findById(e){let t,i=null;return this._components.some(r=>(t=r.id===e,t&&(i=r),t)),i}_findByNode(e){let t,i=null;return this._components.some(r=>(t=r.node===e,t&&(i=r),t)),i}};c([d()],Bl.prototype,"container",null),c([d()],Bl.prototype,"height",null),c([d({value:kG})],Bl.prototype,"padding",null),c([gt("padding")],Bl.prototype,"castPadding",null),c([d()],Bl.prototype,"view",void 0),c([d()],Bl.prototype,"width",null),Bl=c([O("esri.views.ui.UI")],Bl);const L1e=Bl;function H5(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function R1e(e,t){return e.length!==t.length||e.some((i,r)=>i.text!==t[r].text)}function Yb(e,t,i){!i||!t||e.find(r=>r.layerView===t&&r.text===i)||e.push({text:i,layerView:t})}function F1e(e){return e.type==="bing-maps"}const Fc=[];let kf=class extends Am{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new ke,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const i=this.get("view.allLayerViews");i&&this.handles.add(i.map(r=>r.watch(["suspended","attributionVisible"],this._updateAttributionItems)),"suspension"),t&&t.removed&&t.removed.forEach(r=>{this._pendingAttributions.delete(r),this._fetchedAttributionData.delete(r)}),this._updateAttributionItems()},this._updateAttributionItems=()=>{const t=this.get("view.allLayerViews");Fc.length=0,t?(t.forEach(i=>{if(i.suspended||!i.get("layer.attributionVisible"))return;const r=i.layer;if(H5(r,"user"))return void Yb(Fc,i,r.copyright);if(r.hasAttributionData){if(this._fetchedAttributionData.has(i)){const n=this._fetchedAttributionData.get(i);return void(n?Yb(Fc,i,this._getDynamicAttribution(n,this.view,r)):H5(r)&&Yb(Fc,i,r.copyright))}return void this._fetchAttributionData(i)}const s=r.get("portalItem.accessInformation");Yb(Fc,i,s||r.copyright)}),R1e(this.items,Fc)&&(this.items.removeAll(),this.items.addMany(Fc)),Fc.length=0,this.notifyChange("state")):this._clear()},this.handles.add([oa(this,"view.allLayerViews","change",this._allLayerViewsChange,this._allLayerViewsChange,this._clear),TU(this,"view.stationary",()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await Ux(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=t.ok?this._createContributionIndex(t.value,F1e(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,t){const i=e.contributors,r={};if(!i)return r;for(let s=0;s<i.length;s++){const n=i[s],o=n.coverageAreas;if(!o)return;for(const a of o){const l=a.bbox,u=a.zoomMin-(t&&a.zoomMin?1:0),h=a.zoomMax-(t&&a.zoomMax?1:0),f={xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:Xe.WGS84},y={extent:nc(f),attribution:n.attribution||"",score:a.score!=null?a.score:100,id:s};for(let g=u;g<=h;g++)r[g]=r[g]||[],r[g].push(y)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(e,t,i){const{extent:r,scale:s}=t;let n=i.tileInfo.scaleToZoom(s);if(n=Math.min(e.maxKey,Math.round(n)),!r||n==null||n<=-1)return"";const o=e[n],a=Hx(r.center.clone().normalize(),t.spatialReference),l={};return o?o.filter(u=>{const h=!l[u.id]&&a&&Wx(u.extent,a);return h&&(l[u.id]=!0),h}).sort((u,h)=>h.score-u.score||u.objectId-h.objectId).map(u=>u.attribution).join(", "):""}};c([d({readOnly:!0,type:ke})],kf.prototype,"items",void 0),c([d({readOnly:!0})],kf.prototype,"state",null),c([d()],kf.prototype,"view",void 0),kf=c([O("esri.widgets.Attribution.AttributionViewModel")],kf);const PG=kf,Nc={base:"esri-attribution esri-widget",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let ms=class extends Yt{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this.iconClass=Nc.widgetIcon,this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new PG}initialize(){this.own(oa(this,"viewModel.items","change",()=>this.scheduleRender()))}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.indexOf(t.text)===-1&&e.push(t.text),e),[]).join(this.itemDelimiter)}render(){const e={[Nc.open]:this._isOpen};return $("div",{bind:this,class:this.classes(Nc.base,e),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return $("div",{class:Nc.poweredBy},"Powered by"," ",$("a",{class:Nc.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,i=t?0:-1,{attributionText:r}=this,s=t?"button":void 0,n={[Nc.sourcesOpen]:e,[Nc.interactive]:t};return $("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes(Nc.sources,n),innerHTML:r,role:s,tabIndex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth}_afterSourcesNodeUpdate(e){let t=!1;const{clientHeight:i,clientWidth:r,scrollWidth:s}=e,n=s>=r,o=this._attributionTextOverflowed!==n;if(this._attributionTextOverflowed=n,o&&(t=!0),this._isOpen){const a=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,a&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};c([d()],ms.prototype,"_isOpen",void 0),c([d()],ms.prototype,"_isInteractive",null),c([d()],ms.prototype,"_attributionTextOverflowed",void 0),c([d()],ms.prototype,"_prevSourceNodeHeight",void 0),c([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],ms.prototype,"attributionText",null),c([d()],ms.prototype,"iconClass",void 0),c([d()],ms.prototype,"itemDelimiter",void 0),c([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ms.prototype,"label",void 0),c([d(),Zt("esri/widgets/Attribution/t9n/Attribution")],ms.prototype,"messages",void 0),c([ne("viewModel.view")],ms.prototype,"view",void 0),c([d({type:PG})],ms.prototype,"viewModel",void 0),c([pr()],ms.prototype,"_toggleState",null),ms=c([O("esri.widgets.Attribution")],ms);const N1e=ms,D1e="esri.widgets.CompassViewModel";let uh=class extends tL(Ee){constructor(e){super(e),this._handles=new Ai,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(Pt(this,"view",this._updateRotationWatcher))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};this.view.type==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&(e.type==="2d"?this._handles.add(Pt(this,"view.rotation",this._updateForRotation)):this._handles.add(Pt(this,"view.camera",this._updateForCamera)))}};c([d({readOnly:!0})],uh.prototype,"canShowNorth",null),c([d()],uh.prototype,"orientation",void 0),c([d({readOnly:!0})],uh.prototype,"state",null),c([d()],uh.prototype,"view",void 0),uh=c([O(D1e)],uh);const LG=uh,Dc={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let Na=class extends Yt{constructor(e,t){super(e,t),this.goToOverride=null,this.iconClass=Dc.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new LG}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,i=t==="disabled",r=(t==="rotation"?"rotation":"compass")=="compass",s=i?-1:0,n={[Dc.disabled]:i,[Dc.interactive]:!i},o={[Dc.northIcon]:r,[Dc.rotationIcon]:!r},{messages:a}=this;return $("div",{bind:this,class:this.classes(Dc.base,n),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:s,"aria-label":a.reset,title:a.reset},$("span",{"aria-hidden":"true",class:this.classes(Dc.icon,o),styles:this._toRotationTransform(e)}),$("span",{class:Dc.text},a.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};c([ne("viewModel.goToOverride")],Na.prototype,"goToOverride",void 0),c([d()],Na.prototype,"iconClass",void 0),c([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Na.prototype,"label",void 0),c([d(),Zt("esri/widgets/Compass/t9n/Compass")],Na.prototype,"messages",void 0),c([ne("viewModel.view")],Na.prototype,"view",void 0),c([d({type:LG})],Na.prototype,"viewModel",void 0),c([pr()],Na.prototype,"_reset",null),Na=c([O("esri.widgets.Compass")],Na);const j1e=Na;let Pf=class extends Ee{constructor(e){super(e),this._handles=new Ai,this.navigationMode="pan",this.view=null}initialize(){this._handles.add(IU(this,"view.inputManager",this._setNavigationMode.bind(this)))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&this.view.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};c([d({readOnly:!0})],Pf.prototype,"state",null),c([d()],Pf.prototype,"navigationMode",void 0),c([d()],Pf.prototype,"view",void 0),Pf=c([O("esri.widgets.NavigationToggleViewModel")],Pf);const RG=Pf,Hn={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Da=class extends Yt{constructor(e,t){super(e,t),this.iconClass=Hn.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new RG}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",t=this.get("viewModel.navigationMode")==="pan",i={[Hn.disabled]:e,[Hn.isLayoutHorizontal]:this.layout==="horizontal"},r={[Hn.activeButton]:t},s={[Hn.activeButton]:!t},n=e?-1:0,o=this.messages.toggle;return $("div",{bind:this,class:this.classes(Hn.base,i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:n,"aria-label":o,title:o},$("div",{class:this.classes(Hn.button,Hn.panButton,r)},$("span",{class:Hn.panIcon})),$("div",{class:this.classes(Hn.button,Hn.rotateButton,s)},$("span",{class:Hn.rotationIcon})))}_toggle(){this.toggle()}};c([d()],Da.prototype,"iconClass",void 0),c([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Da.prototype,"label",void 0),c([d({value:"vertical"})],Da.prototype,"layout",null),c([d(),Zt("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Da.prototype,"messages",void 0),c([ne("viewModel.view")],Da.prototype,"view",void 0),c([d({type:RG})],Da.prototype,"viewModel",void 0),c([pr()],Da.prototype,"_toggle",null),Da=c([O("esri.widgets.NavigationToggle")],Da);const z1e=Da,rg={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let hu=class extends Yt{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={[rg.disabled]:!this.enabled,[rg.interactive]:this.enabled},i={[this.iconClass]:!!this.iconClass};return $("div",{bind:this,class:this.classes(rg.button,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},$("span",{"aria-hidden":"true",role:"presentation",class:this.classes(rg.icon,i)}),$("span",{class:rg.iconText},this.title))}_triggerAction(){this.action.call(this)}};c([d()],hu.prototype,"action",void 0),c([d()],hu.prototype,"enabled",void 0),c([d()],hu.prototype,"iconClass",void 0),c([d()],hu.prototype,"title",void 0),c([pr()],hu.prototype,"_triggerAction",null),hu=c([O("esri.widgets.IconButton")],hu);const W5=hu;let Lf=class extends Ee{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return t===0||e>t}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return t===0||e<t}};c([d({readOnly:!0})],Lf.prototype,"canZoomIn",null),c([d({readOnly:!0})],Lf.prototype,"canZoomOut",null),c([d()],Lf.prototype,"view",void 0),Lf=c([O("esri.widgets.Zoom.ZoomConditions2D")],Lf);const V1e=Lf;let Rf=class extends Ee{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};c([d({readOnly:!0})],Rf.prototype,"canZoomIn",null),c([d({readOnly:!0})],Rf.prototype,"canZoomOut",null),c([d()],Rf.prototype,"view",void 0),Rf=c([O("esri.widgets.Zoom.ZoomConditions3D")],Rf);const U1e=Rf;let pu=class extends Ee{constructor(e){super(e),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new V1e({view:e}):e.type==="3d"&&(this._zoomConditions=new U1e({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():B1(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():B1(e.goTo({zoomFactor:.5}))}};c([d()],pu.prototype,"_zoomConditions",void 0),c([d({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],pu.prototype,"canZoomIn",void 0),c([d({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],pu.prototype,"canZoomOut",void 0),c([d({readOnly:!0})],pu.prototype,"state",null),c([d()],pu.prototype,"view",null),pu=c([O("esri.widgets.Zoom.ZoomViewModel")],pu);const FG=pu,sg={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let ql=class extends Yt{constructor(e,t){super(e,t),this.iconClass=sg.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new FG}initialize(){this._zoomInButton=new W5({action:this.zoomIn.bind(this),iconClass:sg.zoomInIcon}),this._zoomOutButton=new W5({action:this.zoomOut.bind(this),iconClass:sg.zoomOutIcon})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}render(){const e=this.viewModel,t={[sg.horizontalLayout]:this.layout==="horizontal"};return this._zoomInButton.enabled=e.state==="ready"&&e.canZoomIn,this._zoomOutButton.enabled=e.state==="ready"&&e.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,$("div",{class:this.classes(sg.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};c([d()],ql.prototype,"iconClass",void 0),c([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ql.prototype,"label",void 0),c([d({value:"vertical"})],ql.prototype,"layout",null),c([d(),Zt("esri/widgets/Zoom/t9n/Zoom")],ql.prototype,"messages",void 0),c([ne("viewModel.view")],ql.prototype,"view",void 0),c([d({type:FG})],ql.prototype,"viewModel",void 0),ql=c([O("esri.widgets.Zoom")],ql);const B1e=ql,NG="esri.views.ui.DefaultUI";function q1e(e){return e&&e.view!==void 0}fe.getLogger(NG);let I1=class extends L1e{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"},this.components=[]}initialize(){this._handles.add([St(()=>this.components,this._componentsWatcher.bind(this),Ya),St(()=>this.view,this._updateViewAwareWidgets.bind(this),Ya)])}_add(e,t,i,r){if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}super._add(e,t,i,r)}_removeComponents(e){e.forEach(t=>{const i=this._find(t);i&&(this.remove(i),i.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(t=>{const i=this._find(t),r=i&&i.widget;q1e(r)&&(r.view=e)})}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(e.indexOf("attribution")===-1&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.initialized&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);if(t)return new x1({id:e,node:t})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new N1e({view:this.view})}_createCompass(){return new j1e({view:this.view})}_createNavigationToggle(){return new z1e({view:this.view})}_createZoom(){return new B1e({view:this.view})}};c([d()],I1.prototype,"components",void 0),I1=c([O(NG)],I1);const G1e=I1;let T1=class extends G1e{constructor(e){super(e),this.components=["attribution","zoom"]}};c([d()],T1.prototype,"components",void 0),T1=c([O("esri.views.ui.2d.DefaultUI2D")],T1);const DG=T1;var jM;let $1=jM=class extends ue{constructor(e){super(e),this.color=new Oe([0,0,0,1])}clone(){return new jM(K({color:this.color}))}};c([d({type:Oe,json:{write:!0}})],$1.prototype,"color",void 0),$1=jM=c([O("esri.webmap.background.ColorBackground")],$1);const H1e=$1,xl=fe.getLogger("esri.views.MapView");let jG,zG,VG,UG,BG,qG;async function W1e(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,Stage:n}]=await Promise.all([se(()=>import("./webglDeps.1f5647d4.js"),["assets/webglDeps.1f5647d4.js","assets/VertexArrayObject.4ccd043a.js","assets/Texture.df7d53ef.js","assets/enums.457e23f9.js","assets/ProgramTemplate.85782ebc.js","assets/programUtils.d4a989ec.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js"]),se(()=>import("./mapViewDeps.6fe0e70a.js"),["assets/mapViewDeps.6fe0e70a.js","assets/CIMSymbolHelper.1040926f.js","assets/BidiEngine.b9926823.js","assets/enums.84480fc7.js","assets/alignmentUtils.03ee467b.js","assets/number.dc47462b.js","assets/GeometryUtils.e53da643.js","assets/Container.e5cc492f.js","assets/Utils.e0214b13.js","assets/enums.457e23f9.js","assets/Texture.df7d53ef.js","assets/VertexElementDescriptor.0406f2d4.js","assets/WGLContainer.ad96b13e.js","assets/pixelUtils.9fff4c99.js","assets/VertexArrayObject.4ccd043a.js","assets/ProgramTemplate.85782ebc.js","assets/StyleDefinition.809d5a5e.js","assets/config.bd364997.js","assets/GeometryUtils.5ea26345.js","assets/MaterialKey.9859c524.js","assets/earcut.91e104de.js","assets/enums.1ba846bb.js","assets/programUtils.d4a989ec.js","assets/Rasterizer.8006df47.js","assets/cimAnalyzer.74547477.js","assets/quantizationUtils.48cd94ed.js","assets/Matcher.4b2c4793.js","assets/visualVariablesUtils.65d2f75d.js","assets/visualVariablesUtils.54823ca9.js","assets/tileUtils.fab497ef.js","assets/TileClipper.2c69e8d5.js","assets/index.8ac88fb7.js","assets/index.140a46ab.css","assets/Geometry.e891c191.js","assets/ExpandedCIM.d4661ffb.js","assets/CircularArray.e6c8d66c.js","assets/requestImageUtils.3147d41d.js","assets/ComputedAttributeStorage.2a68a55c.js","assets/projectionSupport.66acda0b.js","assets/json.da51edc4.js","assets/BaseGraphicContainer.438c4e75.js","assets/FeatureContainer.2f011771.js","assets/TileContainer.9dcdd226.js","assets/schemaUtils.d3838579.js","assets/createSymbolSchema.4fe41dfb.js","assets/ProjectWeberRenew.dc78a7b0.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/MD5.67d7a872.js","assets/util.837deeb3.js","assets/vec3f32.8179e08f.js","assets/GraphicContainer.21c2e17d.js"])]);zG=e,VG=t,UG=i,BG=r,qG=s,jG=n}const J5=160;function J1e(e){return e&&e.declaredClass==="esri.Viewpoint"}let tt=class extends Zne(Ove(kve(n_e))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new fm({getCollections:()=>{var t,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new wbe(this),this._pePromise=null,this.floors=new ke,this.highlightOptions=new $G,this.inputManager=new Xwe({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new CG,this.type="2d",this.ui=new DG,this.constraints=new hG,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([St(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(J5)},lS),this.on("resize",t=>this._resizeHandler(t)),St(()=>{var t;return(t=this.animationManager)==null?void 0:t.animation},t=>{this.animation=t})]),hse()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new n1e(this.featuresTilingScheme)}get initialExtentRequired(){var e;const{scale:t,constraints:i,center:r,viewpoint:s,extent:n}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&(e=this.map.initialViewProperties)!=null&&e.viewpoint)&&!n&&(i!=null&&i.effectiveLODs||(o=-1),(!r||t===0&&o===-1)&&(!s||!N(s.targetGeometry)||s.targetGeometry.type!=="extent"&&!s.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!Fm()||(this._pePromise||(this._pePromise=Nm().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,i=e.targetGeometry;return!!op(i.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{e===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};e.when(i,i)}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){e===void 0?this._clearOverride("background"):this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new Le({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void xl.error(new B("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:r}))}const i=this.viewpoint;OM(i,i,t),this.viewpoint=i}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(St(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},lS),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void xl.error(new B("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void xl.error(new B("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:r}))}const i=this.viewpoint;nbe(i,i,t,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;gbe(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;I5(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){return!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(e=>!e.destroyed&&!("layerViews"in e)&&e.updating===!0))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let t,i;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?i=new B("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):Q(e.targetGeometry)&&(i=new B("mapview:invalid-viewpoint","geometry not defined"))}catch(s){i=new B("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:s})}if(i)return void xl.error(i);this._scaleBeforeChangingSpatialReference=null;const r=new Ka({targetGeometry:new Le,scale:0,rotation:0});fa(r,t),this.constraints.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this.frameTask.requestFrame(),this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const t=this.viewpoint;I5(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),iv(()=>this.ready,t).then(()=>{const i=k({animate:!0},t),r=ibe(e,this);return this.animation.update(r),this._gotoTask={},i.animate?this._gotoAnimated(r,i):this._gotoImmediate(r,i)});xl.error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const i=g5(e)?y5(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let r=new Set,s=!1,n=null,o=null;t!=null&&t.include?Y5(t.include,Z5(this,h=>r.add(h),h=>{n||(n=new Set),n.add(h)},h=>r.add(h),()=>s=!0)):(s=!0,r=new Set(this.allLayerViews)),t!=null&&t.exclude&&Y5(t.exclude,Z5(this,h=>r.delete(h),h=>{o||(o=new Set),o.add(h)}));const a=this.allLayerViews.filter(h=>!h.suspended&&r.has(h)).reverse(),l=this.toMap(i);let u=(await Promise.all([s?this.graphicsView.hitTest(l):null,...a.map(h=>h.hitTest(l,i))])).filter(N).flat();return n&&(u=u.filter(h=>n.has(zM(h)))),o&&(u=u.filter(h=>!o.has(zM(h)))),{screenPoint:i,results:u.map(h=>({mapPoint:l,graphic:h}))}}takeScreenshot(e){e=e||{};const t=this.supersampleScreenshotsEnabled?Math.min(4,d1e(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach(o=>{const a=this.allLayerViews.find(l=>l.layer.id===o.id);a&&"container"in a&&a.container&&i.push(a.container)})):i=this._stage.children;const{format:r,quality:s}=u1e(e.format,e.quality),n=l1e(e,t,this.size,this.padding,r,s,i,e.rotation);return this._stage.takeScreenshot(n)}toMap(e){if(!this.ready)return null;const t=g5(e)?y5(this,e):e,i=[0,0],[r,s]=this.state.toMap(i,[t.x,t.y]),n=this.spatialReference;return new Le({x:r,y:s,spatialReference:n})}toScreen(e){if(!this.ready)return null;const t=this._project(e,this.spatialReference),i=[t.x,t.y];return this.state.toScreen(i,i),qs(i[0],i[1])}on(e,t,i,r){return this.inputManager&&this.viewEvents.on(e,t,i,r)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,t,i;return this.map&&"initialViewProperties"in this.map&&((e=this.map)==null||(t=e.initialViewProperties)==null?void 0:t.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(e){return $5.hasLayerViewModule(e)}importLayerView(e){return $5.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(xl.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>be(k({},t),{mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=E1e(this.type);return re("safari")&&re("safari")<9&&(e=new B("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:re("safari")})),N(e)?(xl.warn("#validate()",e.message),Promise.reject(e)):W1e()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new AM),this.animation}_cancellableGoTo(e,t,i){const r=()=>e===this._gotoTask,s=i.then(()=>{r()&&(this.animation=null)}).catch(o=>{throw r()&&(this.animation=null,t.done||(t.stop(),this.frameTask.animationInProgress=!1)),o}),n=new Promise(o=>o(s));return t.when().catch(()=>{r()&&n.cancel&&n.cancel()}),n}_gotoImmediate(e,t){const i=this._gotoTask,r=this.animation,s=e.then(n=>{if(Gi(t),i!==this._gotoTask)throw new B("view:goto-interrupted","Goto was interrupted");this.viewpoint=r.target=n,r.finish()});return this._cancellableGoTo(i,r,s)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<J5&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_getDefaultViewpoint(){var e,t,i,r;const{constraints:s,initialExtent:n,map:o}=this;if(!s)return null;const a=o&&"initialViewProperties"in o&&o.initialViewProperties,l={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};s.effectiveLODs?l.zoom!==-1&&(l.scale=s.zoomToScale(l.zoom)):l.zoom=-1;let u=null,h=null,f=0;const y=l.viewpoint&&l.viewpoint.rotation,g=l.viewpoint&&l.viewpoint.targetGeometry;N(g)&&(g.type==="extent"?u=g:g.type==="point"&&(h=g,f=l.viewpoint.scale));const b=l.extent||u||((e=a==null||(t=a.viewpoint)==null?void 0:t.targetGeometry)==null?void 0:e.extent)||n,w=l.center||h||(b==null?void 0:b.center),x=l.scale||f||(a==null||(i=a.viewpoint)==null?void 0:i.scale)||b&&V0(b,this.size),T=l.rotation||y||(a==null||(r=a.viewpoint)==null?void 0:r.rotation)||0;return w&&x?new Ka({targetGeometry:w,scale:x,rotation:T}):null}_gotoAnimated(e,t){const i=this._gotoTask,r=this.animation,s=e.then(n=>{if(Gi(t),i!==this._gotoTask)throw new B("view:goto-interrupted","Goto was interrupted");return r.update(n),this.animationManager.animate(r,this.viewpoint,t),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,r,s)}_project(e,t){var i;const r=e&&e.targetGeometry||e;if(!t)return e;if(!r)return null;if(t.imageCoordinateSystem||(i=r.spatialReference)!=null&&i.imageCoordinateSystem||Qs(t,r.spatialReference))return e;const s=a_(r,t);if(!s)throw new B("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:t});return J1e(e)?(e.targetGeometry=s,e):s}_resizeHandler(e){if(!this.ready)return;const t=this.state;let i=this.state.paddedViewState.viewpoint;const r=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],ybe(i,i,r,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i}_startup(){var e;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint(),i=t.targetGeometry;try{this._project(t,this.spatialReference)}catch(u){var r;xl.warn(new Es("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:i.toJSON(),spatialReference:this.spatialReference,error:u})),t.targetGeometry=((r=this.defaultsFromMap.extent)==null?void 0:r.center)||new Le({x:0,y:0,spatialReference:this.spatialReference})}(e=this.constraints)==null||e.fit(t),this._set("state",new pwe({padding:this._get("padding"),size:this.size,viewpoint:t})),this.graphics.owner=this;const s=new jG(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=s,this._magnifierView=new qG,this._magnifierView.magnifier=this.magnifier;const n=new UG({view:this});this._set("labelManager",n);const o=new bbe({view:this});this._set("animationManager",o);const a=new BG({view:this,animationManager:o});this._set("mapViewNavigation",a),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),s.on("post-render",()=>this._set("rendering",s.renderRequested)),s.on("will-render",()=>this._set("rendering",s.renderRequested)),s.on("webgl-error",u=>this.fatalError=u.error),St(()=>this.stationary,u=>s.stationary=u,Od),St(()=>this.background,u=>{s.background=u,this._magnifierView.background=u},Od),St(()=>this.magnifier,u=>this._magnifierView.magnifier=u,Od),St(()=>this.renderingOptions,u=>s.renderingOptions=u,Od),St(()=>this.highlightOptions,u=>s.highlightOptions=u,Od),St(()=>this.state.id,()=>s.state=this.state,Od)],"map-view"),this._updateStageChildren();const l=this._resolveWhenReady;this._resolveWhenReady=[],l.forEach(u=>u(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,t],spatialReference:i,rotation:r,scale:s}=this.state.paddedViewState,n=new Le({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",n),this._set("zoom",-1),this._set("rotation",r),this._set("scale",s),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new vwe(Wne.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new zG({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new VG(e)});this.frameTask.graphicsView=t,this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const a of this.allLayerViews)a.processDetach();this._destroySpatialReferenceDependentProperties();const t=this.state.paddedViewState.clone();if(Q(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=t.scale;else{const a=t.viewpoint.clone();a.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=a}const i=t.clone(),[r,s]=t.center;let n=null;try{n=this._project(new Le({x:r,y:s,spatialReference:t.spatialReference}),e)}catch(a){Fm()||xl.warn(new Es("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:n.toJSON(),spatialReference:e,error:a}))}n||(n=new Le({x:0,y:0,spatialReference:e}));const o=OM(new Ka({targetGeometry:new Le,scale:0,rotation:0}),t.viewpoint,n);i.viewpoint=o;try{const l=[t.size[0]/2,t.size[1]/2],u=[l[0]+20,l[1]],h=t.toMap([0,0],u),{x:f,y}=this._project(new Le({x:h[0],y:h[1],spatialReference:t.spatialReference}),e);h[0]=f,h[1]=y,i.toScreen(h,h);const g=fbe(l,h,u),b=Math.hypot(h[0]-l[0],h[1]-l[1])/20;!Number.isFinite(b)||Math.abs(b)>4?(o.rotation=0,o.targetGeometry=new Le({x:0,y:0,spatialReference:e})):(o.scale*=b,o.scale>re("mapview-srswitch-adjust-rotation-scale-threshold")?o.rotation=0:o.rotation+=Number.isFinite(g)?g:0)}catch{}this._get("constraints").constrain(o,null),this._get("state").viewpoint=o,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const a of this.allLayerViews)a.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};c([d({readOnly:!0})],tt.prototype,"animationManager",void 0),c([d({constructOnly:!0})],tt.prototype,"deactivatedWebGLExtensions",void 0),c([d({constructOnly:!0})],tt.prototype,"debugWebGLExtensions",void 0),c([d({readOnly:!0})],tt.prototype,"featuresTilingScheme",void 0),c([d({readOnly:!0})],tt.prototype,"fullOpacity",void 0),c([d({readOnly:!0})],tt.prototype,"graphicsTileStore",null),c([d()],tt.prototype,"graphicsView",void 0),c([d({readOnly:!0})],tt.prototype,"state",void 0),c([d()],tt.prototype,"initialExtentRequired",null),c([d()],tt.prototype,"labelManager",void 0),c([d({readOnly:!0})],tt.prototype,"resourceManager",null),c([d({readOnly:!0})],tt.prototype,"textureManager",null),c([d({readOnly:!0})],tt.prototype,"mapViewNavigation",void 0),c([d({constructOnly:!0})],tt.prototype,"renderCanvas",void 0),c([d()],tt.prototype,"renderingOptions",void 0),c([d({readOnly:!0})],tt.prototype,"rendering",void 0),c([d({constructOnly:!0})],tt.prototype,"supersampleScreenshotsEnabled",void 0),c([d({readOnly:!0})],tt.prototype,"supportsGround",void 0),c([d()],tt.prototype,"_stationaryTimer",void 0),c([d()],tt.prototype,"_defaultsFromMapSettings",null),c([d()],tt.prototype,"_pePromise",void 0),c([d({readOnly:!0})],tt.prototype,"typeSpecificPreconditionsReady",null),c([d()],tt.prototype,"animation",null),c([d({type:H1e})],tt.prototype,"background",null),c([d({value:null,type:Le,dependsOn:["state.id","ready"]})],tt.prototype,"center",null),c([d({type:hG})],tt.prototype,"constraints",null),c([d({value:null,type:Et,dependsOn:["state.id","ready"]})],tt.prototype,"extent",null),c([d()],tt.prototype,"floors",void 0),c([d({type:$G})],tt.prototype,"highlightOptions",void 0),c([d({readOnly:!0})],tt.prototype,"inputManager",void 0),c([d()],tt.prototype,"map",void 0),c([d({value:{top:0,right:0,bottom:0,left:0},cast:e=>k({top:0,right:0,bottom:0,left:0},e)})],tt.prototype,"padding",null),c([d()],tt.prototype,"resizeAlign",void 0),c([d({readOnly:!0,dependsOn:["state.id"]})],tt.prototype,"resolution",null),c([d({value:0,type:Number,dependsOn:["state.id","ready"]})],tt.prototype,"rotation",null),c([d({value:0,type:Number,dependsOn:["state.id","ready"]})],tt.prototype,"scale",null),c([d({constructOnly:!0})],tt.prototype,"spatialReferenceLocked",void 0),c([d()],tt.prototype,"stationary",null),c([d({type:CG,readOnly:!0})],tt.prototype,"timeline",void 0),c([d({readOnly:!0})],tt.prototype,"type",void 0),c([d({readOnly:!0})],tt.prototype,"updating",null),c([d({value:null,type:Ka,dependsOn:["state.id","ready"]})],tt.prototype,"viewpoint",null),c([d({value:-1,dependsOn:["state.id"]})],tt.prototype,"zoom",null),c([d({type:Boolean})],tt.prototype,"navigating",null),c([d({type:DG})],tt.prototype,"ui",void 0),tt=c([O("esri.views.MapView")],tt);const Z1e=tt;function zM(e){const t=e.getObjectId();var i,r,s,n;return t?`${(i=(r=(s=e.layer)==null?void 0:s.uid)!=null?r:(n=e.sourceLayer)==null?void 0:n.uid)!=null?i:"MapView"}/${t}`:`"MapView/${e.uid}`}function Z5(e,t,i,r,s){return n=>{if(n instanceof xr){if(n.layer===e)s==null||s();else{const o=e.allLayerViews.find(a=>a.layer===n.layer);o&&(r==null||r(o))}i(zM(n))}else{const o=e.allLayerViews.find(a=>a.layer===n);o&&t(o)}}}function Y5(e,t){if(e)if(V3(e))for(const i of e)if(V3(i))for(const r of i)t(r);else t(i);else t(e)}let Ui=class extends Zx(ue){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};c([d()],Ui.prototype,"autoNavigate",void 0),c([d()],Ui.prototype,"filter",void 0),c([d()],Ui.prototype,"getResults",void 0),c([d()],Ui.prototype,"getSuggestions",void 0),c([d()],Ui.prototype,"maxResults",void 0),c([d()],Ui.prototype,"maxSuggestions",void 0),c([d()],Ui.prototype,"minSuggestCharacters",void 0),c([d()],Ui.prototype,"outFields",void 0),c([d()],Ui.prototype,"placeholder",void 0),c([d()],Ui.prototype,"popupEnabled",void 0),c([d()],Ui.prototype,"popupTemplate",void 0),c([d()],Ui.prototype,"prefix",void 0),c([d()],Ui.prototype,"resultGraphicEnabled",void 0),c([d()],Ui.prototype,"resultSymbol",void 0),c([d()],Ui.prototype,"suggestionsEnabled",void 0),c([d()],Ui.prototype,"suffix",void 0),c([d()],Ui.prototype,"withinViewEnabled",void 0),c([d()],Ui.prototype,"zoomScale",void 0),Ui=c([O("esri.widgets.Search.SearchSource")],Ui);const mL=Ui,K5=fe.getLogger("esri.widgets.Search.support.geometryUtils");function Y1e(e,t){var i,r;if(!t)return K5.error("missing-parameter: view is missing."),Promise.reject(new B("searchgeometryutils:missing-parameter","view is missing."));if(!e)return K5.error("missing-parameter: point is missing."),Promise.reject(new B("searchgeometryutils:missing-parameter","point is missing."));if(e.hasZ||t.type==="2d")return Promise.resolve(e);const s=t==null||(i=t.map)==null?void 0:i.ground;return s&&s.layers.length?s.queryElevation(e,{cache:(r=t.basemapTerrain)==null?void 0:r.elevationQueryCache}).then(n=>n.geometry):Promise.resolve(e)}function Q5(e){if(Q(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":return e.getPoint(0);case"polyline":return e.getPoint(0,0)}return null}function yL(e,t,i){return Q(e)?null:e.type==="extent"?e:e.type==="multipoint"||e.type==="polygon"||e.type==="polyline"?e.extent:e.type==="point"?GG(e,t,i):void 0}function VM(e,t,i){return Q(e)||Q(t)?null:GG(e.center,t,i)}function GG(e,t,i){const r=e.hasZ?e.z:void 0;return t&&t.map?(i?Vce(t,i):t.extent).clone().centerAt(e).set({zmax:r,zmin:r}):new Et({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:r,zmax:r})}const K1e=/https?:\/\/services.*\.arcgis\.com/i,Q1e=/(?:\{([^}]+)\})/g,wm=fe.getLogger("esri.widgets.Search.support.layerSearchUtils");function X1e(e,t){const{exactMatch:i=!1,location:r,maxResults:s,spatialReference:n,source:o,sourceIndex:a,suggestResult:l,view:u}=e,{layer:h,filter:f,zoomScale:y}=o,g=u&&u.scale,b=HG(o,u),w=t&&t.signal;return JG(h).then(()=>{const x=h.popupTemplate;return x?x.getRequiredFields(h.fieldsIndex):null}).then(x=>{var T,M,F;const{objectIdField:D,returnZ:R}=h,_=YG(o);if(!gL(h,_))throw wm.error("invalid-field: displayField is invalid."),new B("getResults():invalid-field","displayField is invalid.");const q=x&&x.length?x:[_],W=o.outFields||q,oe=WG(W);if(W.indexOf(D)!==-1||oe||W.push(D),(T=h.floorInfo)!=null&&T.floorField&&W.push(h.floorInfo.floorField),!(oe||nx(h,W)))throw wm.error("invalid-field: outField is invalid."),new B("getResults():invalid-field","outField is invalid.");const te=h.createQuery(),{orderByFields:he}=o;if(he&&(te.orderByFields=he),n){te.outSpatialReference=n;const Se=1/nd(n);Se&&(te.maxAllowableOffset=Se)}const ge=h.geometryType==="mesh"||h.geometryType==="multipatch",Te=((M=h.capabilities)==null||(F=M.data)==null?void 0:F.supportsZ)&&!ge;if(te.returnZ=Te&&R!==!1,te.returnGeometry=!0,te.multipatchOption=ge?"xyFootprint":null,W&&(te.outFields=W),r)te.geometry=r;else if(l.key)te.objectIds=[l.key];else{const Se=o.searchFields||[_];if(!nx(h,Se))throw wm.error("invalid-field: search field is invalid."),new B("getResults():invalid-field","search field is invalid.");if(ZG(h)&&(te.num=s),b&&(te.geometry=b),!l.text.trim())return[];const{prefix:vt="",suffix:$t=""}=o,st=QG({searchTerm:KG(`${vt}${l.text}${$t}`),layer:h,searchFields:Se,filter:f,exactMatch:i,type:"search"});if(!st)return[];te.where=st}return h.queryFeatures(te,{signal:w}).then(Se=>dSe(Se,u,o,a,_,g,y))})}function eSe(e,t){const{source:i,spatialReference:r,view:s,suggestTerm:n,maxSuggestions:o,sourceIndex:a,exactMatch:l}=e,{layer:u,filter:h}=i,f=t&&t.signal,y=HG(i,s);return JG(u).then(()=>{if(!ZG(u))return[];const g=YG(i),b=i.searchFields||[g],w=[];i.suggestionTemplate?i.suggestionTemplate.replace(Q1e,(oe,te)=>(w.push(te),oe)):w.push(g);const x=WG(w);w.indexOf(u.objectIdField)!==-1||x||w.push(u.objectIdField);const T=gL(u,g),M=x||nx(u,w),F=nx(u,b);if(!T)throw wm.error("invalid-field: displayField is invalid."),new B("getSuggestions():invalid-field","displayField is invalid.");if(!M)throw wm.error("invalid-field: outField is invalid."),new B("getSuggestions():invalid-field","outField is invalid.");if(!F)throw wm.error("invalid-field: search field is invalid."),new B("getSuggestions():invalid-field","search field is invalid.");const D=u.createQuery(),{orderByFields:R}=i;if(R&&(D.orderByFields=R),D.outSpatialReference=r,D.returnGeometry=!1,D.num=o,D.outFields=w,y&&(D.geometry=y),!n.trim())return[];const{prefix:_="",suffix:q=""}=i,W=QG({searchTerm:KG(`${_}${n}${q}`),layer:u,searchFields:b,filter:h,exactMatch:l,type:"suggest"});return W?(D.where=W,u.queryFeatures(D,{signal:f}).then(oe=>cSe(oe,i,a,g))):[]})}function HG(e,t){const{filter:i,withinViewEnabled:r}=e,s=t&&t.extent;return i&&i.geometry||(r&&s?s:void 0)}function WG(e){return e&&e.indexOf("*")!==-1}async function JG(e){e&&await e.load()}function ZG(e){var t,i,r;return(t=e==null||(i=e.capabilities)==null||(r=i.query)==null?void 0:r.supportsPagination)!=null&&t}function tSe(e){var t,i,r,s;return(t=e==null||(i=e.fieldsIndex)==null||(r=i.fields)==null||(s=r.find(n=>n.type==="string"))==null?void 0:s.name)!=null?t:""}function YG(e){return e.displayField||e.layer.displayField||tSe(e.layer)}function nx(e,t){return!(!e||!t)&&t.every(i=>gL(e,i))}function gL(e,t){return!!e.getField(t)}function iSe(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}function rSe(e,t,i){let r=null;const{codedValues:s}=e;return s&&s.some(n=>{const o=n.name,a=i?o:o.toLowerCase();return(i?t:t.toLowerCase())===a&&(r=n.code.toString(),!0)}),r}function KG(e){return e.replace(/\'/g,"''")}function Kb(e,t){const i=t&&t.where;return i?`(${e}) AND (${i})`:e}function sSe({currentTerm:e,field:t,filter:i,exactMatch:r,url:s,type:n}){const o=t.type,a=t.name;if(o==="string"||o==="date"||o==="global-id"){const l=K1e.test(s),u=l&&iSe(e)?"N":"";if(r&&n==="search")return Kb(`${a} = ${u}'${e}'`,i);const h=l?a:`UPPER(${a})`,f=l?e:e.toUpperCase();return Kb(`${h} LIKE ${u}${r?`'${f}%'`:`'%${f}%'`}`,i)}if(o==="oid"||o==="small-integer"||o==="integer"||o==="single"||o==="double"){const l=Number(e);return isNaN(l)?null:Kb(`${a} = ${l}`,i)}return Kb(`${a} = ${e}`,i)}function nSe(e,t){return e?` OR (${t})`:`(${t})`}function QG({searchTerm:e,layer:t,searchFields:i,filter:r,exactMatch:s,type:n}){const{definitionExpression:o,url:a}=t;let l="";return e&&i&&i.forEach(u=>{const h=t.getField(u),f=typeof t.getFieldDomain=="function"&&t.getFieldDomain(u),y=(f&&f.type==="coded-value"?rSe(f,e,s):null)||e||null;if(y!==null){const g=sSe({currentTerm:y,field:h,filter:r,exactMatch:s,url:a,type:n});g&&(l+=nSe(l,g))}}),o?`(${o}) AND (${l})`:l}function oSe(e,t){let i=null;const{codedValues:r}=e;return r&&r.length&&r.some(s=>s.code===t&&(i=s.name,!0)),i}function aSe(e,t){return e[Object.keys(e).find(i=>i.toLowerCase()===t.toLowerCase())]}function XG(e,t,i){const r=e.sourceLayer,{attributes:s}=e,n=typeof r.getFieldDomain=="function"&&r.getFieldDomain(i);if(t)return wr(t,s);if(i&&s){const o=r.getField(i),a=aSe(s,i);return a==null?"":n&&n.type==="coded-value"?oSe(n,a):(o==null?void 0:o.type)==="date"?fi(new Date(a)):typeof a=="number"?a.toString():typeof a!="string"?"":a.trim()}return""}function lSe(e,t,i,r){const s=e.sourceLayer,{attributes:n}=e,{objectIdField:o}=s,a=n[o];return{text:XG(e,t.suggestionTemplate,r),key:a,sourceIndex:i}}function cSe(e,t,i,r){return e.features.map(s=>lSe(s,t,i,r))}function uSe(e,t,i,r,s,n,o){const a=e.clone(),l=e.sourceLayer,u=l&&l.objectIdField,h=u&&e.attributes[u],f=XG(e,i.searchTemplate,s),y=yL(a.geometry,t,n),g=typeof o=="number"?VM(K(y),t,o):y,b=e.clone();return N(g)&&(b.geometry=Rn.fromExtent(g)),{extent:g,target:b,feature:a,key:h,name:f,sourceIndex:r}}function dSe(e,t,i,r,s,n,o){return e.features.map(a=>uSe(a,t,i,r,s,n,o))}var UM;let Zo=UM=class extends mL{constructor(e){super(e),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(t,i)=>X1e(k({source:this},t),i),this.getSuggestions=(t,i)=>eSe(k({source:this},t),i)}set layer(e){this._set("layer",e),e&&e.load().catch(()=>{})}get name(){return this._getLayerTitle()||""}set name(e){e!==void 0?this._override("name",e):this._clearOverride("name")}clone(){return new UM({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?K(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?K(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var e,t;return(e=(t=this.layer.fieldsIndex.fields.find(i=>i.type==="string"))==null?void 0:t.name)!=null?e:""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;return e.loaded?`: ${(t||[this._getDisplayField()]).map(i=>{const r=e.getField(i);return r&&r.alias||i}).join(", ")}`:""}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?`${t}${this._getSearchFieldsString()}`:void 0}};c([d({json:{read:{source:"field.name"},write:{target:"field.name"}}})],Zo.prototype,"displayField",void 0),c([d({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],Zo.prototype,"exactMatch",void 0),c([d({value:null})],Zo.prototype,"layer",null),c([d()],Zo.prototype,"name",null),c([d({type:[String],json:{write:!0}})],Zo.prototype,"orderByFields",void 0),c([d()],Zo.prototype,"searchFields",void 0),c([d()],Zo.prototype,"searchTemplate",void 0),c([d()],Zo.prototype,"suggestionTemplate",void 0),Zo=UM=c([O("esri.widgets.Search.LayerSearchSource")],Zo);const Ff=Zo;function hSe(e){return e&&typeof e.x=="number"&&typeof e.y=="number"}function pSe(e){return e&&typeof e.xmin=="number"&&typeof e.ymin=="number"&&typeof e.xmax=="number"&&typeof e.ymax=="number"}let fu=class extends ue{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};c([d({type:String,json:{write:!0}})],fu.prototype,"address",void 0),c([d({type:Object,json:{write:!0}})],fu.prototype,"attributes",void 0),c([d({type:Et,json:{write:!0}})],fu.prototype,"extent",void 0),c([d({type:Le,json:{write:!0}})],fu.prototype,"location",void 0),c([d({type:Number,json:{write:!0}})],fu.prototype,"score",void 0),fu=c([O("esri.rest.support.AddressCandidate")],fu);const vL=fu,_L={type:String,json:{read:{source:"token"},write:{target:"token"}}};let kr=class extends ue{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};c([d({type:Object,json:{write:!0}})],kr.prototype,"address",void 0),c([d(_L)],kr.prototype,"apiKey",void 0),c([d({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],kr.prototype,"categories",void 0),c([d({type:String,json:{write:!0}})],kr.prototype,"countryCode",void 0),c([d({type:Boolean,json:{write:!0}})],kr.prototype,"forStorage",void 0),c([d({type:Le,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],kr.prototype,"location",void 0),c([d({type:String,json:{write:!0}})],kr.prototype,"locationType",void 0),c([d({type:String,json:{write:!0}})],kr.prototype,"magicKey",void 0),c([d({type:Number,json:{write:!0}})],kr.prototype,"maxLocations",void 0),c([d({type:[String],json:{write:{writer:(e,t)=>{t.outFields=e?e.join(","):null}}}})],kr.prototype,"outFields",void 0),c([d({type:Xe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],kr.prototype,"outSpatialReference",void 0),c([d({type:Et,json:{write:{writer:(e,t)=>{const i=e?e.shiftCentralMeridian():null;t.searchExtent=i}}}})],kr.prototype,"searchExtent",void 0),kr=c([O("esri.rest.support.AddressToLocationsParameters")],kr),kr.from=jt(kr);const eH=kr;async function tH(e,t,i){t=eH.from(t);const r=qr(e),h=t.toJSON(),{address:s}=h,n=K_(h,["address"]),o=be(k(k({},s),n),{f:"json"}),a=p_(k(k({},r.query),o)),l=h_(a,i),u=`${r.path}/findAddressCandidates`;return ft(u,l).then(fSe)}function fSe({data:e}){if(!e)return[];const{candidates:t,spatialReference:i}=e;return t?t.map(r=>{if(!r)return;const{extent:s,location:n}=r,o=!s||pSe(s);return hSe(n)&&o?(s&&(s.spatialReference=i),n.spatialReference=i,vL.fromJSON(r)):void 0}):[]}let ja=class extends ue{constructor(e){super(e),this.addresses=null,this.categories=null,this.countryCode=null,this.locationType=null,this.outSpatialReference=null}};c([d({type:[Object],json:{read:{reader:e=>e&&e.records?e.records.map(t=>t.attributes):null},write:{writer:(e,t)=>{const i=[];Array.isArray(e)&&e.forEach(r=>{i.push({attributes:r})}),t.addresses={records:i}}}}})],ja.prototype,"addresses",void 0),c([d({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],ja.prototype,"categories",void 0),c([d({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],ja.prototype,"countryCode",void 0),c([d({type:String,json:{write:!0}})],ja.prototype,"locationType",void 0),c([d({type:Xe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ja.prototype,"outSpatialReference",void 0),ja=c([O("esri.rest.support.AddressesToLocationsParameters")],ja),ja.from=jt(ja);const mSe=ja;async function ySe(e,t,i){t=mSe.from(t);const r=qr(e),s=be(k({},t.toJSON()),{f:"json"}),n=p_(k(k({},r.query),s)),o=h_(n,i),a=`${r.path}/geocodeAddresses`;return ft(a,o).then(gSe)}function gSe(e){const{data:t}=e;if(!t)return[];const{locations:i,spatialReference:r}=t;return i?i.map(s=>{const{location:n}=s;return n&&(n.spatialReference=r),vL.fromJSON(s)}):[]}let Gl=class extends ue{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};c([d(_L)],Gl.prototype,"apiKey",void 0),c([d({type:Le,json:{write:{writer:(e,t)=>{const i=e?e.clone().normalize():null,r=i!==void 0;t.location=r?i:null}}}})],Gl.prototype,"location",void 0),c([d({type:String,json:{write:!0}})],Gl.prototype,"locationType",void 0),c([d({type:Xe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Gl.prototype,"outSpatialReference",void 0),Gl=c([O("esri.rest.support.LocationToAddressParameters")],Gl),Gl.from=jt(Gl);const iH=Gl;async function rH(e,t,i){t=iH.from(t);const r=qr(e),s=be(k({},t.toJSON()),{f:"json"}),n=p_(k(k({},r.query),s)),o=h_(n,i),a=`${r.path}/reverseGeocode`;return ft(a,o).then(vSe)}function vSe({data:e}){if(!e)return;const{address:t,location:i}=e,r=t&&t.Match_addr||"";return vL.fromJSON({address:r,attributes:t||{},location:i,score:100})}let Nf=class extends ue{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};c([d({type:Boolean,json:{write:!0}})],Nf.prototype,"isCollection",void 0),c([d({type:String,json:{write:!0}})],Nf.prototype,"magicKey",void 0),c([d({type:String,json:{write:!0}})],Nf.prototype,"text",void 0),Nf=c([O("esri.rest.support.SuggestionCandidate")],Nf);const _Se=Nf;let vn=class extends ue{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};c([d(_L)],vn.prototype,"apiKey",void 0),c([d({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],vn.prototype,"categories",void 0),c([d({type:String,json:{write:!0}})],vn.prototype,"countryCode",void 0),c([d({type:Le,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],vn.prototype,"location",void 0),c([d({type:Number,json:{write:!0}})],vn.prototype,"maxSuggestions",void 0),c([d({type:Xe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],vn.prototype,"outSpatialReference",void 0),c([d({type:Et,json:{write:{writer:(e,t)=>{const i=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(i)}}}})],vn.prototype,"searchExtent",void 0),c([d({type:String,json:{write:!0}})],vn.prototype,"text",void 0),vn=c([O("esri.rest.support.SuggestLocationsParameters")],vn),vn.from=jt(vn);const sH=vn;async function nH(e,t,i){const r=qr(e),s=be(k({},(t=sH.from(t)).toJSON()),{f:"json"}),n=p_(k(k({},r.query),s)),o=h_(n,i),a=`${r.path}/suggest`;return ft(a,o).then(bSe)}function bSe(e){const{data:t}=e;if(!t)return[];const{suggestions:i}=t;return i?i.map(r=>new _Se(r)):[]}let f0=class extends t7{constructor(e){super(e),this.outSpatialReference=null,this.url=null}addressToLocations(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);const i=k(k({},this.requestOptions),t);return tH(this.url,e,i)}suggestLocations(e,t){const i=k(k({},this.requestOptions),t);return nH(this.url,e,i)}addressesToLocations(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);const i=k(k({},this.requestOptions),t);return ySe(this.url,e,i)}locationToAddress(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);const i=k(k({},this.requestOptions),t);return rH(this.url,e,i)}};c([d({type:Xe})],f0.prototype,"outSpatialReference",void 0),c([d()],f0.prototype,"url",void 0),f0=c([O("esri.tasks.Locator")],f0);const wSe=f0,SSe="Single Line Input",xSe=3e5;function ISe(e,t){return e.location?ASe(e,t):MSe(e,t)}function oH(e,t){if(t.localSearchDisabled)return null;const i=e==null?void 0:e.scale;return typeof i=="number"&&i<=xSe?e.get("extent.center"):null}function TSe(e,t){const{source:i,spatialReference:r,view:s,suggestTerm:n,maxSuggestions:o,sourceIndex:a}=e,l=new sH,{apiKey:u,url:h}=i,f=aH(i,s),y=t&&t.signal;if(!h)return Promise.resolve(null);u&&(l.apiKey=u),i.categories&&(l.categories=i.categories),r&&(l.outSpatialReference=r);const g=oH(s,i);if(g&&(l.location=g),!n.trim())return Promise.resolve(null);const{prefix:b="",suffix:w=""}=i,x=`${b}${n}${w}`;return l.text=x,f&&(l.searchExtent=f),l.maxSuggestions=o,i.countryCode&&(l.countryCode=i.countryCode),nH(h,l,{signal:y}).then(T=>kSe(T,a))}function $Se(e){return!!e&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}function CSe(e){return!!e&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(e)}function X5(e){return!!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}const ESe="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";function ASe(e,t){const{source:i,spatialReference:r,location:s,sourceIndex:n,view:o}=e,{apiKey:a,url:l,zoomScale:u,defaultZoomScale:h}=i,f=o&&o.scale,y=t&&t.signal,g=new iH;return g.location=s,a&&(g.apiKey=a),r&&(g.outSpatialReference=r),rH(l,g,{signal:y}).then(b=>lH([b],{sourceIndex:n,scale:f,view:o,zoomScale:u,defaultZoomScale:h})).catch(()=>[])}function aH(e,t){const{filter:i,withinViewEnabled:r}=e,s=t&&t.scale,n=t&&t.extent,o=i&&i.geometry;return yL(o,t,s)||(r&&n?n:void 0)}function MSe(e,t){const{source:i,suggestResult:r,spatialReference:s,view:n,maxResults:o,sourceIndex:a}=e,l=i&&i.zoomScale,u=i&&i.defaultZoomScale;if(!r.text.trim())return Promise.resolve(null);const h=!r.key&&i.prefix?i.prefix:"",f=!r.key&&i.suffix?i.suffix:"",y=`${h}${r.text}${f}`,g=new eH,{apiKey:b,url:w}=i,x=n&&n.scale,T=aH(i,n),M=t&&t.signal;if(b&&(g.apiKey=b),!w)return Promise.resolve(null);i.categories&&(g.categories=i.categories),i.locationType&&(g.locationType=i.locationType),s&&(g.outSpatialReference=s);const F=oH(n,i);F&&(g.location=F),g.maxLocations=o,T&&(g.searchExtent=T),i.countryCode&&(g.countryCode=i.countryCode);const{key:D}=r,R=`${D}`;return D&&(g.magicKey=R),g.address={},g.address[i.singleLineFieldName||SSe]=y,i.outFields&&(g.outFields=i.outFields),tH(w,g,{signal:M}).then(_=>lH(_,{key:R,scale:x,sourceIndex:a,view:n,zoomScale:l,defaultZoomScale:u}))}function OSe(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}function kSe(e,t){return e.map(i=>OSe(i,t))}function PSe(e,t){const{key:i,scale:r,sourceIndex:s,view:n,zoomScale:o,defaultZoomScale:a}=t,{attributes:l,extent:u,location:h,address:f}=e,y=new xr({geometry:h,attributes:l}),g=u||h,b=yL(g,n,r),w=typeof o=="number"?VM(b,n,o):typeof a=="number"&&g.type==="point"?VM(b,n,a):b,x=h?`${h.x},${h.y}`:"",T=f||x,M=y.clone();return N(w)&&(M.geometry=Rn.fromExtent(w)),{extent:w,feature:y,target:M,key:i,name:T,sourceIndex:s}}function lH(e,t){return e.filter(Boolean).map(i=>PSe(i,t))}var BM;const cH="esri.widgets.Search.LocatorSearchSource",e4=fe.getLogger(cH);let Pr=BM=class extends mL{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(t,i)=>ISe(k({source:this},t),i),this.getSuggestions=(t,i)=>TSe(k({source:this},t),i)}set locator(e){Y0(e4,"locator",{replacement:"url",version:"4.22"}),this._set("url",e.url),this._set("locator",e)}get locator(){return Y0(e4,"locator",{replacement:"url",version:"4.22"}),this._get("locator")}clone(){return new BM({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?K(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?K(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};c([d()],Pr.prototype,"apiKey",void 0),c([d()],Pr.prototype,"categories",void 0),c([d()],Pr.prototype,"countryCode",void 0),c([d({json:{write:!0}})],Pr.prototype,"defaultZoomScale",void 0),c([d()],Pr.prototype,"localSearchDisabled",void 0),c([d({type:wSe,json:{read:!1,write:!1}})],Pr.prototype,"locator",null),c([d()],Pr.prototype,"locationType",void 0),c([d({json:{write:!0}})],Pr.prototype,"name",void 0),c([d({json:{write:!0}})],Pr.prototype,"placeholder",void 0),c([d()],Pr.prototype,"searchTemplate",void 0),c([d({json:{write:!0}})],Pr.prototype,"singleLineFieldName",void 0),c([d({json:{read:{source:"suggest"},write:{target:"suggest"}}})],Pr.prototype,"suggestionsEnabled",void 0),c([d({json:{write:!0}})],Pr.prototype,"url",void 0),c([d({json:{write:!0}})],Pr.prototype,"zoomScale",void 0),Pr=BM=c([O(cH)],Pr);const uH=Pr,bPe=new rt({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),LSe=new rt({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});function wPe(e){const{geometries:t,deviationUnit:i,maxDeviation:r}=e.toJSON(),s={maxDeviation:r};return t&&t.length&&(s.geometries=JSON.stringify({geometryType:mo(t[0]),geometries:t}),s.sr=JSON.stringify(t[0].spatialReference)),LSe.write(i,s,"deviationUnit"),s}let mu=class extends ue{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};c([d({type:String,json:{write:!0}})],mu.prototype,"deviationUnit",void 0),c([d({json:{read:{reader:e=>e?e.map(t=>As(t)):null},write:{writer:(e,t)=>{t.geometries=e.map(i=>i.toJSON())}}}})],mu.prototype,"geometries",void 0),c([d({type:Number,json:{write:!0}})],mu.prototype,"maxDeviation",void 0),mu=c([O("esri.rest.support.GeneralizeParameters")],mu),mu.from=jt(mu);const SPe=mu,RSe=new rt({preserveShape:"preserve-shape"});function xPe(e){const{polylines:t,lengthUnit:i,geodesic:r,calculationType:s}=e.toJSON(),n={};n.polylines=JSON.stringify(t);const o=e.polylines[0].spatialReference;return n.sr=o.wkid?o.wkid:JSON.stringify(o.toJSON()),i&&(n.lengthUnit=i),r&&(n.geodesic=r),s&&(n.calculationType=RSe.toJSON(s)),n}let Hl=class extends ue{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};c([d({type:String,json:{write:!0}})],Hl.prototype,"calculationType",void 0),c([d({type:Boolean,json:{write:!0}})],Hl.prototype,"geodesic",void 0),c([d({json:{write:!0}})],Hl.prototype,"lengthUnit",void 0),c([d({type:[xs],json:{read:{reader:e=>e?e.map(t=>As(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(i=>i.toJSON())}}}})],Hl.prototype,"polylines",void 0),Hl=c([O("esri.rest.support.LengthsParameters")],Hl),Hl.from=jt(Hl);const IPe=Hl,FSe=new rt({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),NSe=new rt({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});function TPe(e){const{geometries:t,bevelRatio:i,offsetDistance:r,offsetHow:s,offsetUnit:n}=e.toJSON(),o={bevelRatio:i,offsetDistance:r};return t&&t.length&&(o.geometries=JSON.stringify({geometryType:mo(t[0]),geometries:t}),o.sr=JSON.stringify(t[0].spatialReference)),s&&(o.offsetHow=FSe.toJSON(s)),n&&(o.offsetUnit=NSe.toJSON(n)),o}let za=class extends ue{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};c([d({type:Number,json:{write:!0}})],za.prototype,"bevelRatio",void 0),c([d({json:{read:{reader:e=>e?e.map(t=>As(t)):null},write:{writer:(e,t)=>{t.geometries=e.map(i=>i.toJSON())}}}})],za.prototype,"geometries",void 0),c([d({type:Number,json:{write:!0}})],za.prototype,"offsetDistance",void 0),c([d({type:String,json:{write:!0}})],za.prototype,"offsetHow",void 0),c([d({type:String,json:{write:!0}})],za.prototype,"offsetUnit",void 0),za=c([O("esri.rest.support.OffsetParameters")],za),za.from=jt(za);const $Pe=za;function CPe(e){return{geometryType:mo(e[0]),geometries:e.map(t=>t.toJSON())}}function DSe(e,t,i){const r=T6(t);return e.map(s=>{const n=r.fromJSON(s);return n.spatialReference=i,n})}let dh=class extends ue{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(function(r){return r.toJSON()}),t=this.geometries[0],i={};return i.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),i.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),i.geometries=JSON.stringify({geometryType:mo(t),geometries:e}),this.transformation&&(i.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(i.transformForward=this.transformForward),i}};c([d()],dh.prototype,"geometries",void 0),c([d({json:{read:{source:"outSR"}}})],dh.prototype,"outSpatialReference",void 0),c([d()],dh.prototype,"transformation",void 0),c([d()],dh.prototype,"transformForward",void 0),dh=c([O("esri.rest.support.ProjectParameters")],dh);const dH=dh,jSe=jt(dH);async function zSe(e,t,i){t=jSe(t);const r=qr(e),s=k(be(k({},r.query),{f:"json"}),t.toJSON()),n=t.outSpatialReference,o=mo(t.geometries[0]),a=h_(s,i);return ft(r.path+"/project",a).then(({data:{geometries:l}})=>DSe(l,o,n))}const VSe=new rt({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});function EPe(e){const{geometries1:t,geometries2:i,relation:r,relationParameter:s}=e.toJSON(),n={};if(t&&t.length){n.geometries1=JSON.stringify({geometryType:mo(t[0]),geometries:t});const o=t[0].spatialReference;n.sr=o.wkid?o.wkid:JSON.stringify(o)}return i&&i.length>0&&(n.geometries2=JSON.stringify({geometryType:mo(i[0]),geometries:i})),r&&(n.relation=VSe.toJSON(r)),s&&(n.relationParam=s),n}let Wl=class extends ue{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};c([d({json:{read:{reader:e=>e?e.map(t=>As(t)):null},write:{writer:(e,t)=>{t.geometries1=e.map(i=>i.toJSON())}}}})],Wl.prototype,"geometries1",void 0),c([d({json:{read:{reader:e=>e?e.map(t=>As(t)):null},write:{writer:(e,t)=>{t.geometries2=e.map(i=>i.toJSON())}}}})],Wl.prototype,"geometries2",void 0),c([d({type:String,json:{write:!0}})],Wl.prototype,"relation",void 0),c([d({type:String,json:{write:!0}})],Wl.prototype,"relationParameter",void 0),Wl=c([O("esri.rest.support.RelationParameters")],Wl),Wl.from=jt(Wl);const APe=Wl,USe=new rt({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});function MPe(e){const{extendHow:t,polylines:i,trimExtendTo:r}=e.toJSON(),s={};return s.extendHow=USe.toJSON(t),i&&i.length&&(s.polylines=JSON.stringify(i),s.sr=JSON.stringify(i[0].spatialReference)),r&&(s.trimExtendTo=JSON.stringify(r)),s}let yu=class extends ue{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};c([d({type:String,json:{write:!0}})],yu.prototype,"extendHow",void 0),c([d({type:[xs],json:{read:{reader:e=>e?e.map(t=>As(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(i=>i.toJSON())}}}})],yu.prototype,"polylines",void 0),c([d({json:{read:{reader:e=>e?As(e):null},write:{writer:(e,t)=>{t.trimExtendTo=e.toJSON()}}}})],yu.prototype,"trimExtendTo",void 0),yu=c([O("esri.rest.support.TrimExtendParameters")],yu),yu.from=jt(yu);const OPe=yu,hH=fe.getLogger("esri.widgets.support.geolocationUtils"),BSe={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function qSe(){const e=re("esri-geolocation");return e||hH.warn("geolocation-unsupported","Geolocation unsupported."),e}function GSe(){const e=window.isSecureContext;return e||hH.warn("insecure-context","Geolocation requires a secure origin."),e}function t4(){return qSe()&&GSe()}function HSe(e){return e||(e=BSe),new Promise((i,r)=>{setTimeout(()=>r(new B("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(i,r,e)})}function WSe(e,t){const{position:i,view:r}=e;return YSe(ZSe(JSe(i)),r,t)}function JSe(e){const t=e&&e.coords||{},i={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e&&{coords:i,timestamp:e.timestamp}}function ZSe(e){const t=e&&e.coords;return t?new Le({longitude:t.longitude,latitude:t.latitude,z:t.altitude||null,spatialReference:{wkid:4326}}):null}function YSe(e,t,i){if(!t)return Promise.resolve(e);const r=t.spatialReference;return r.isWGS84?Promise.resolve(e):r.isWebMercator?Promise.resolve(nc(e)):KSe(i).then(s=>{if(!s)throw new B("geometry-service:missing-url","Geometry service URL is missing");const n=new dH({geometries:[e],outSpatialReference:r});return zSe(s,n,i).then(o=>o[0])})}function KSe(e){if(Tt.geometryServiceUrl)return Promise.resolve(Tt.geometryServiceUrl);const t=zr.getDefault();return t.load(e).catch(()=>{}).then(()=>t.get("helperServices.geometry.url"))}function Wr(e,t){return e.hasOwnProperty(t)&&e[t]!=null&&e[t]!==""}const QSe=()=>Em("esri/widgets/Search/t9n/Search"),pH="esri.widgets.Search.SearchViewModel",Lo=fe.getLogger(pH),i4="highlight",C1=ke.ofType({key:e=>e.layer?"layer":"locator",base:mL,typeMap:{layer:Ff,locator:uH}}),r4=Xe.WGS84,XSe="esri/images/search/search-symbol-32.svg",exe="esri/images/search/search-symbol-32.png",txe=/<(?:.|\s)*?>/g,Df=-1;let ut=class extends tL(bo.EventedMixin(Ee)){constructor(e){super(e),this._handles=new Ai,this._gotoController=null,this._searching=null,this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new C1,this.defaultSymbols={point:new n_({url:It(re("trident")?exe:XSe),size:24,width:24,height:24}),polyline:new Nn({color:[130,130,130,1],width:2}),polygon:new cl({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=zr.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new C1,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const t=await QSe();this.messages=t,this.defaultPopupTemplate=new ly({title:t.searchResult,content:"{Match_addr}"})};e(),this._handles.add([Pt(this,["includeDefaultSources","view","portal"],()=>this._update()),Xv(e)])}destroy(){this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}get activeSource(){return this.allSources.getItemAt(this.activeSourceIndex)||null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:Df}set activeSourceIndex(e){e!==void 0?this._override("activeSourceIndex",e):this._clearOverride("activeSourceIndex")}get allPlaceholder(){var e;return(e=this.messages)==null?void 0:e.allPlaceholder}set allPlaceholder(e){e?this._override("allPlaceholder",e):this._clearOverride("allPlaceholder")}get allSources(){const{sources:e,defaultSources:t,includeDefaultSources:i}=this,r=typeof i=="function"?i.call(null,{sources:e,defaultSources:t}):i?t.concat(e):e,s=this._get("allSources")||new C1;return s.removeAll(),s.addMany(r.filter(Boolean)),s}get defaultSymbol(){return Y0(Lo,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._get("defaultSymbol")}set defaultSymbol(e){Y0(Lo,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._set("defaultSymbol",e)}get locationEnabled(){return this._get("locationEnabled")||t4()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const t=t4();if(e&&!t){const i=new B("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Lo.error(i)}this._override("locationEnabled",e&&t)}get placeholder(){const{allSources:e,activeSourceIndex:t,allPlaceholder:i}=this;if(t===Df)return i;const r=e.getItemAt(t);return r?r.placeholder:""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}search(e,t){this.emit("search-start"),this.clearGraphics();const i=this._createSuggestionForSearch(e),r=this.when().then(()=>this._getResultsFromSources(i,t).then(s=>{var n;if((n=t==null?void 0:t.signal)!=null&&n.aborted)return null;const o={activeSourceIndex:this.activeSourceIndex,searchTerm:i.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(o,s,i);const a=this._getFirstResult(o.results),l=(i.location&&a?a.name:i.text).replace(txe,"");return this._set("searchTerm",l),(i.key&&typeof i.sourceIndex=="number"||i.location)&&this._set("selectedSuggestion",i),this._set("results",o.results),this._set("resultCount",o.results.reduce((u,h)=>u+h.results.length,0)),this.emit("search-complete",o),this._selectFirstResult(a).then(()=>o)})).then(s=>(this._clearSearching(),s),s=>{throw this._clearSearching(),s});return this._searching=r,r}searchNearby(e){if(!this.locationEnabled){const i=new B("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return Lo.error(i),Promise.reject(i)}const t=HSe().then(i=>WSe({position:i,view:this.view},e)).then(i=>this.search(i,e));return this._searching=t,t.catch(()=>{}).then(()=>this._clearSearching()),t}select(e){if(this.clearGraphics(),!e){const T=new B("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});return Lo.error(T),Promise.reject(T)}const{view:t}=this,i=Wr(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),r=this.allSources.getItemAt(i);if(!r){const T=new B("select:missing-source","Cannot select without a source.",{source:r});return Lo.error(T),Promise.reject(T)}const s=r instanceof Ff?this._getLayerSourcePopupTemplate(r):r.popupTemplate,n=r.resultSymbol||this._getDefaultSymbol(e),o=Wr(r,"resultGraphicEnabled")?r.resultGraphicEnabled:this.resultGraphicEnabled,a=Wr(r,"autoNavigate")?r.autoNavigate:this.autoNavigate,l=Wr(r,"popupEnabled")?r.popupEnabled:this.popupEnabled,u=l?s||this.popupTemplate||this.defaultPopupTemplate:null,{feature:h}=e;if(!h){const T=new B("select:missing-feature","Cannot select without a feature.",{feature:h});return Lo.error(T),Promise.reject(T)}const{attributes:f,geometry:y,layer:g,sourceLayer:b}=h,w=Q5(y),x={layerViewQuery:this._getLayerView(h),elevationQuery:t&&N(w)?Y1e(w,t).catch(()=>w):Promise.resolve(w)};return mi(x).then(T=>{const M=T.layerViewQuery.value,F=T.elevationQuery.value;n instanceof gp&&(n.text=e.name);const D=t&&a?e.target||e.extent:null;return(N(D)?this._goToSearchResult(D):Promise.resolve()).then(()=>{var R;const _=M?h:new xr({geometry:y,symbol:n,attributes:f,layer:g,sourceLayer:b,popupTemplate:u}),q=l&&((R=this.view)==null?void 0:R.popup),W=q&&_.getEffectivePopupTemplate(q.defaultPopupTemplateEnabled);return W&&t.popup.open({features:[_],location:F}),M&&eL(M)&&!W&&this._highlightFeature({graphic:_,layerView:M}),!M&&o&&t&&t.graphics.push(_),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",_),this.emit("select-result",{result:e,source:r,sourceIndex:i}),e})})}suggest(e,t,i){const r=e||this.searchTerm;return this.emit("suggest-start",{searchTerm:r}),this._suggestTimer(t,i).then(()=>this._suggestImmediate(r,i).then(s=>(this._set("suggestions",s.results),this._set("suggestionCount",s.results.reduce((n,o)=>n+o.results.length,0)),this.emit("suggest-complete",s),s)))}async when(){await iv(()=>!this.updating)}async _update(){const{portal:e,view:t}=this;if(this.includeDefaultSources){const i=this._updatingPromise=mi([e==null?void 0:e.load(),t==null?void 0:t.when()]);if(this.destroyed||(await i,i!==this._updatingPromise))return}await iv(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var e,t;const i=(e=this.portal)==null||(t=e.helperServices)==null?void 0:t.geocode;return i?i.map(r=>{if(r.placefinding===!1)return;const s=Tt.apiKey&&X5(r.url)?{url:ESe}:null,n=uH.fromJSON(k(k({},r),s)),o=n.url;if(X5(o)||CSe(o)||$Se(o)){const a=n.outFields||["Addr_type","Match_addr","StAddr","City"],l=n.placeholder||this.messages.placeholder,u=typeof n.defaultZoomScale=="number"?n.defaultZoomScale:2500;n.set({singleLineFieldName:"SingleLine",outFields:a,placeholder:l,defaultZoomScale:u})}return n.singleLineFieldName?n:void 0}).filter(Boolean):[]}_getLayerSources(e,t){var i;const r=(i=this.view)==null?void 0:i.map;return e.map(s=>{const n=r.findLayerById(s.id);if(!n)return;const o=this._getLayerJSON(s),a=Ff.fromJSON(o);return a.placeholder=t,this._getLayer(n,o).then(l=>{a.layer=l}),a}).filter(Boolean).toArray()}_getTableSources(e,t){var i;const r=(i=this.view)==null?void 0:i.map;return e.map(s=>{const n=r.findTableById(s.id);if(!n)return;const o=this._getLayerJSON(s),a=Ff.fromJSON(o);return a.placeholder=t,this._getLayer(n,o).then(l=>{a.layer=l}),a}).filter(Boolean).toArray()}_convertApplicationProperties(){var e,t,i;const r=(e=this.view)==null?void 0:e.map,s=r==null||(t=r.applicationProperties)==null||(i=t.viewing)==null?void 0:i.search;if(!s)return[];const{enabled:n,hintText:o,layers:a,tables:l}=s;return n?[...this._getLayerSources(a,o),...this._getTableSources(l,o)]:[]}_getSubLayer(e,t){return e.load().then(()=>{if(!e.allSublayers)return Promise.reject();const i=e.allSublayers.find(r=>r.id===t.subLayer);return i?i.createFeatureLayer():Promise.reject()})}async _getBuildingSubLayer(e,t){await e.load();const i=e.allSublayers.find(r=>r.id===t.subLayer);return(i==null?void 0:i.type)!=="building-component"?Promise.reject():(await i.load(),i.associatedLayer==null?Promise.reject():(await i.associatedLayer.load(),i))}_getLayer(e,t){return e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature"?Promise.resolve(e):e.type==="map-image"?this._getSubLayer(e,t).catch(()=>{const i=new B("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return Lo.error(i),null}):e.type==="building-scene"?this._getBuildingSubLayer(e,t):Promise.resolve(null)}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:t}=this;e.removeAll(),t&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var e;const t=(e=this.view)==null?void 0:e.popup,{resultGraphic:i}=this;if(!t||!i)return;const{selectedFeature:r}=t;r&&r===i&&t.close()}_suggestTimer(e,t){const i=e!=null?e:this.suggestionDelay;return Fx(i,null,t&&t.signal)}_createLocationForSearch(e){return e instanceof xr?Q5(e.geometry):e instanceof Le?e:Array.isArray(e)&&e.length===2?new Le({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&Wr(e,"key")&&Wr(e,"text")&&Wr(e,"sourceIndex"))return e;const t=this._createLocationForSearch(e),i=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:r,selectedResult:s}=this,n=!e&&r&&s,o=n&&r.key===s.key&&r.sourceIndex===s.sourceIndex,a=n&&r.location;return o||a?r:{location:t,text:t?"":i,sourceIndex:null,key:null}}_getFirstResult(e){let t=null;return e&&e.some(i=>{const{results:r}=i,s=r[0],n=!!s;return n&&(t=s),n}),t}_selectFirstResult(e){return this.autoSelect&&e?this.select(e):Promise.resolve(null)}_suggestImmediate(e,t){return this.when().then(()=>this._getSuggestionsFromSources(e,t)).then(i=>{var r;if((r=t==null?void 0:t.signal)!=null&&r.aborted)return null;const s={activeSourceIndex:this.activeSourceIndex,searchTerm:e,numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(s,i),s})}_formatSourceResponse(e,t,i){const r=t&&t.value||[],s=t&&t.error,n=this.allSources.getItemAt(i);if(s){const o={sourceIndex:i,source:n,error:s};e.errors.push(o),Lo.error(s),e.numErrors++}else{const o={sourceIndex:i,source:n,results:r};e.results.push(o),e.numResults+=r.length}}_formatResponse(e,t,i){if(t)if(e.activeSourceIndex===Df){const r=i&&Wr(i,"sourceIndex")&&i.sourceIndex!==-1?i.sourceIndex:void 0;t.forEach((s,n)=>{const o=r!==void 0?r:n;this._formatSourceResponse(e,s,o)})}else this._formatSourceResponse(e,t[0],e.activeSourceIndex)}_getResultsFromSources(e,t){const{allSources:i}=this,r=!e.location&&Wr(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,s=[];if(!i.length){const n=new B("search:no-sources-defined","At least one source is required.",{allSources:i});return Lo.error(n),Promise.reject(n)}return r===Df?i.forEach((n,o)=>{s.push(this._getResultsFromSource(e,o,t))}):s.push(this._getResultsFromSource(e,r,t)),mi(s)}_getSuggestionsFromSources(e,t){const{allSources:i,activeSourceIndex:r}=this,s=[];if(!i.length){const n=new B("suggest:no-sources-defined","At least one source is required.",{allSources:i});return Lo.error(n),Promise.reject(n)}return r===Df?i.forEach((n,o)=>{s.push(this._getSuggestionsFromSource(e,o,t))}):s.push(this._getSuggestionsFromSource(e,r,t)),mi(s)}_getResultsFromSource(e,t,i){var r;const s=this.allSources.getItemAt(t),{location:n=null}=e,o=((r=this.view)==null?void 0:r.spatialReference)||r4,a=Wr(s,"maxResults")?s.maxResults:this.maxResults,l=!!(s instanceof Ff&&Wr(s,"exactMatch"))&&s.exactMatch,{view:u}=this;return s.getResults({view:u,sourceIndex:t,location:n,suggestResult:e,spatialReference:o,exactMatch:l,maxResults:a},i)}_getSuggestionsFromSource(e,t,i){const r=this.allSources.getItemAt(t),s=Wr(r,"suggestionsEnabled")?r.suggestionsEnabled:this.suggestionsEnabled,n=e.length,o=Wr(r,"minSuggestCharacters")?r.minSuggestCharacters:this.minSuggestCharacters;if(s&&e.trim()&&n>=o){var a;const l=((a=this.view)==null?void 0:a.spatialReference)||r4,u=Wr(r,"maxSuggestions")?r.maxSuggestions:this.maxSuggestions,{view:h}=this,f=!!(r instanceof Ff&&Wr(r,"exactMatch"))&&r.exactMatch;return r.getSuggestions({view:h,sourceIndex:t,suggestTerm:e,spatialReference:l,maxSuggestions:u,exactMatch:f},i)}return Promise.resolve(null)}_getLayerSourcePopupTemplate(e){const{layer:t}=e;if(t)return Wr(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}_getSourceIndexOfResult(e){const t=this.results;let i=null;return t.some(r=>r.results.some(s=>s===e&&(i=r.sourceIndex,!0))),i}async _goToSearchResult(e){const t=!!e;this._abortGoTo();const i=new AbortController;this._gotoController=i;const r={target:{target:e},options:{animate:t,signal:i.signal}};await this.callGoTo(r),this._gotoController=null}_getDefaultSymbol(e){var t;const{defaultSymbols:i}=this,r=(t=e.feature)==null?void 0:t.geometry;if(!N(r))return null;const s=this._get("defaultSymbol");if(s&&(r.type==="point"||r.type==="multipoint"))return s;switch(r.type){case"point":case"multipoint":return i.point;case"polyline":return i.polyline;case"extent":case"polygon":return i.polygon;default:return null}}_removeHighlight(){this._handles.remove(i4)}async _getLayerView(e){const{view:t}=this;if(!e||!t||e.layer.type==="building-component"||e.layer.type==="subtype-sublayer")return Promise.resolve(null);const{layer:i}=e;return await t.when(),t.whenLayerView(i)}_highlightFeature(e){const{graphic:t,layerView:i}=e,{attributes:r,layer:s}=t,{objectIdField:n}=s,o=r&&r[n],a=i.highlight(o||t);this._handles.add(a,i4)}_setResultFloor(e){var t,i,r;const{view:s}=this,n=(t=e.feature)==null?void 0:t.attributes,o=(i=e.feature)==null?void 0:i.sourceLayer;if(o&&"floorInfo"in o&&o!=null&&(r=o.floorInfo)!=null&&r.floorField&&n){const a=n[o.floorInfo.floorField];s.emit("select-result-floor",a)}}};ut.ALL_INDEX=Df,c([d()],ut.prototype,"_searching",void 0),c([d()],ut.prototype,"_updatingPromise",void 0),c([d({readOnly:!0,value:null})],ut.prototype,"activeSource",null),c([d()],ut.prototype,"activeSourceIndex",null),c([d()],ut.prototype,"allPlaceholder",null),c([d({readOnly:!0})],ut.prototype,"allSources",null),c([d()],ut.prototype,"autoNavigate",void 0),c([d()],ut.prototype,"autoSelect",void 0),c([d()],ut.prototype,"defaultPopupTemplate",void 0),c([d({readOnly:!0})],ut.prototype,"defaultSources",void 0),c([d()],ut.prototype,"defaultSymbol",null),c([d()],ut.prototype,"defaultSymbols",void 0),c([d()],ut.prototype,"includeDefaultSources",void 0),c([d()],ut.prototype,"locationEnabled",null),c([d()],ut.prototype,"maxInputLength",void 0),c([d()],ut.prototype,"maxResults",void 0),c([d()],ut.prototype,"maxSuggestions",void 0),c([d()],ut.prototype,"messages",void 0),c([d()],ut.prototype,"minSuggestCharacters",void 0),c([d({readOnly:!0})],ut.prototype,"placeholder",null),c([d()],ut.prototype,"popupEnabled",void 0),c([d({type:ly})],ut.prototype,"popupTemplate",void 0),c([d({type:zr})],ut.prototype,"portal",void 0),c([d()],ut.prototype,"resultCount",void 0),c([d()],ut.prototype,"resultGraphicEnabled",void 0),c([d({readOnly:!0})],ut.prototype,"resultGraphic",void 0),c([d({readOnly:!0})],ut.prototype,"results",void 0),c([d({readOnly:!0})],ut.prototype,"selectedSuggestion",void 0),c([d()],ut.prototype,"searchAllEnabled",void 0),c([d({readOnly:!0})],ut.prototype,"selectedResult",void 0),c([d()],ut.prototype,"searchTerm",null),c([d({type:C1})],ut.prototype,"sources",void 0),c([d({readOnly:!0})],ut.prototype,"state",null),c([d()],ut.prototype,"suggestionDelay",void 0),c([d()],ut.prototype,"suggestionCount",void 0),c([d({readOnly:!0})],ut.prototype,"suggestions",void 0),c([d()],ut.prototype,"suggestionsEnabled",void 0),c([d({readOnly:!0})],ut.prototype,"updating",null),c([d()],ut.prototype,"view",void 0),c([d()],ut.prototype,"clear",null),ut=c([O(pH)],ut);const sm=ut,Il={base:"esri-search-result-renderer esri-widget",anchor:"esri-widget__anchor",showMoreResults:"esri-search-result-renderer__more-results--show-more-results",moreResults:"esri-search-result-renderer__more-results",moreResultsList:"esri-search-result-renderer__more-results-list",moreResultsHeader:"esri-search-result-renderer__more-results-header",moreResultsItem:"esri-search-result-renderer__more-results-item",moreResultsListHeader:"esri-search-result-renderer__more-results-list-header"};let gu=class extends Yt{constructor(e,t){super(e,t),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}render(){const e={[Il.showMoreResults]:this.showMoreResultsOpen};return $("div",{class:Il.base},$("div",{key:"esri-search-renderer__container",class:this.classes(Il.moreResults,e)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return $("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var e;const t=(e=this.viewModel)==null?void 0:e.selectedResult,i=t&&t.name||"";return $("div",{key:"esri-search-renderer__result-name",class:Il.moreResultsItem},i)}renderMoreResultsLists(){var e;const t=(e=this.viewModel)==null?void 0:e.results,{resultCount:i}=this.viewModel;if(i<2)return null;const r=t.map(s=>this.renderMoreResultsList(s));return $("div",{key:"esri-search-renderer__more-results-container",class:Il.moreResultsList},r)}renderMoreResultsButton(){const{messages:e}=this,{resultCount:t}=this.viewModel;return t<2?null:$("div",{key:"esri-search-renderer__more-results-button",class:Il.moreResultsItem},$("a",{class:Il.anchor,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults))}renderMoreResultsHeader(e,t){return $("div",{key:`esri-search-result-renderer__header-${t}`,class:Il.moreResultsListHeader},e)}renderMoreResultsList(e){var t,i;const{results:r}=e,s=r.length,n=!!s,o=(t=this.viewModel)==null?void 0:t.selectedResult,a=s===1&&r[0]===o,l=this._getSourceName(e.source,e.sourceIndex),u=((i=this.viewModel)==null?void 0:i.results.length)>1&&!a?this.renderMoreResultsHeader(l,e.sourceIndex):null,h=n&&r.map((y,g)=>this.renderMoreResultsListItem(y,g)),f=n&&!a?$("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},h):null;return n?$("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},u,f):null}renderMoreResultsListItem(e,t){return e!==this.get("viewModel.selectedResult")?$("li",{key:`esri-search-result-renderer__list-item-${t}`},$("a",{class:Il.anchor,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}_showMoreResultsClick(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const t=this.get("viewModel.view.popup");t&&t.reposition()}_selectResultClick(e){e.preventDefault();const t=e.currentTarget["data-result"];this.viewModel&&this.viewModel.select(t)}_getSourceName(e,t){return t===sm.ALL_INDEX?this.messages.all:e.name}};c([d(),Zt("esri/widgets/Search/t9n/Search")],gu.prototype,"messages",void 0),c([d()],gu.prototype,"showMoreResultsOpen",void 0),c([d()],gu.prototype,"viewModel",void 0),c([pr()],gu.prototype,"_showMoreResultsClick",null),c([pr()],gu.prototype,"_selectResultClick",null),gu=c([O("esri.widgets.Search.SearchResultRenderer")],gu);const ixe=gu,Fe={base:"esri-search esri-widget",loader:"esri-widget__loader",loaderText:"esri-widget__loader-text",loaderAnimation:"esri-widget__loader-animation",esriInput:"esri-input",hasMultipleSources:"esri-search--multiple-sources",isLoading:"esri-search--loading",isSearching:"esri-search--searching",showSuggestions:"esri-search--show-suggestions",showSources:"esri-search--sources",showWarning:"esri-search--warning",container:"esri-search__container",input:"esri-search__input",inputContainer:"esri-search__input-container",form:"esri-search__form",submitButton:"esri-search__submit-button",sourcesButton:"esri-search__sources-button",clearButton:"esri-search__clear-button",sourceName:"esri-search__source-name",suggestionsMenu:"esri-search__suggestions-menu",suggestionList:"esri-search__suggestions-list",suggestionListCurrentLocation:"esri-search__suggestions-list--current-location",sourcesMenu:"esri-search__sources-menu",source:"esri-search__source",warningMenu:"esri-search__warning-menu",warningMenuBody:"esri-search__warning-body",warningMenuHeader:"esri-search__warning-header",warningMenuText:"esri-search__warning-text",noValueText:"esri-search__no-value-text",esriWidgetDisabled:"esri-widget--disabled",button:"esri-widget--button",fallbackText:"esri-icon-font-fallback-text",header:"esri-widget__heading",locate:"esri-icon-locate-circled",menu:"esri-menu",menuList:"esri-menu__list",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuHeader:"esri-menu__header",loadingIcon:"esri-icon-loading-indicator esri-rotating",searchIcon:"esri-icon-search",dropdownIcon:"esri-icon-down-arrow esri-search__sources-button--down",dropupIcon:"esri-icon-up-arrow esri-search__sources-button--up",clearIcon:"esri-icon-close",noticeIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-search",disabled:"esri-disabled"},rxe=/<[a-z/][\s\S]*>/i;let pt=class extends Yt{constructor(e,t){super(e,t),this._activeMenuItemIndex=-1,this._handles=new Ai,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new ixe,this._locateFailed=null,this._container=null,this.activeMenu="none",this.activeSource=null,this.activeSourceIndex=null,this.allPlaceholder=null,this.allSources=null,this.autoNavigate=null,this.autoSelect=null,this.defaultSources=null,this.disabled=!1,this.goToOverride=null,this.iconClass=Fe.widgetIcon,this.includeDefaultSources=null,this.label=void 0,this.locationEnabled=null,this.maxResults=null,this.maxSuggestions=null,this.messages=null,this.messagesCommon=null,this.minSuggestCharacters=null,this.popupEnabled=null,this.popupTemplate=null,this.portal=null,this.resultGraphic=null,this.resultGraphicEnabled=null,this.results=null,this.searchAllEnabled=null,this.searchTerm=null,this.selectedResult=null,this.sources=null,this.suggestions=null,this.suggestionsEnabled=null,this.view=null,this.viewModel=new sm,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=i=>{var r;const s=i.relatedTarget;s&&(r=this._container)!=null&&r.contains(s)||this._clearActiveMenu()},this.own(Qe(this,"searchTerm",i=>{(i&&this.activeMenu==="warning"||!i&&!this.get("viewModel.selectedSuggestion.location"))&&this._clearActiveMenu()}),oa(this,"viewModel.allSources","change",()=>this._watchSourceChanges()),Pt(this,"activeMenu",()=>this._resetActiveMenuItemIndex()),Pt(this,"viewModel.defaultPopupTemplate",i=>{i&&(i.content=this._renderSearchResultsContent.bind(this))}))}destroy(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}clear(){}focus(){var e;(e=this._inputNode)==null||e.focus(),this.emit("search-focus")}blur(){var e;(e=this._inputNode)==null||e.blur(),this.emit("search-blur")}search(e){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const t=new AbortController,{signal:i}=t;return this._searchController=t,this.viewModel.search(e,{signal:i}).catch(r=>{if(this._searchController===t)return this._clearActiveMenu(),this._searchController=null,r}).then(r=>{if(this._searchController===t)return this.activeMenu=r.numResults?"none":"warning",this._searchController=null,r})}suggest(e){this._cancelSuggest();const t=new AbortController,{signal:i}=t;return this._suggestController=t,this.viewModel.suggest(e,null,{signal:i}).then(r=>{if(this._suggestController===t)return this._suggestController=null,r.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),r}).catch(()=>{if(this._suggestController===t)return this._suggestController=null,null})}render(){const{state:e}=this.viewModel,t={[Fe.disabled]:e==="disabled",[Fe.esriWidgetDisabled]:this.disabled};return $("div",{class:this.classes(Fe.base,t)},e==="loading"?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:e}=this;return $("button",{"aria-label":e.searchButtonTitle,bind:this,class:this.classes(Fe.submitButton,Fe.button),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle,type:"button"},$("span",{"aria-hidden":"true",class:Fe.searchIcon}))}renderWarningMenu(){return $("div",{key:"esri-search__error-menu",class:this.classes(Fe.menu,Fe.warningMenu)},$("div",{class:Fe.warningMenuBody},this.renderWarning()))}renderSourceMenuButton(){const{messages:e,activeMenu:t,sourceMenuId:i,sourceMenuButtonId:r}=this,{activeSourceIndex:s,allSources:n}=this.viewModel;return n.length>1?$("button",{id:r,key:"esri-search__source-menu-button",bind:this,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":(t==="source").toString(),"aria-controls":i,class:this.classes(Fe.sourcesButton,Fe.button),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:Mn,"data-node-ref":"_sourceMenuButtonNode",type:"button"},$("span",{"aria-hidden":"true",class:Fe.dropdownIcon}),$("span",{"aria-hidden":"true",class:Fe.dropupIcon}),$("span",{class:Fe.sourceName},this._getSourceName(s))):null}renderSourcesList(){const{allSources:e,searchAllEnabled:t}=this.viewModel,{_activeMenuItemIndex:i,activeMenu:r,sourceMenuId:s,sourceMenuButtonId:n}=this,o=r==="source"&&i>-1?this._buildId("source-item",i):null;return e.length>1?$("ul",{"aria-activedescendant":o,"aria-labelledby":n,id:s,role:"menu",bind:this,afterCreate:Mn,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:Fe.menuList,tabIndex:-1},t?this.renderSource(sm.ALL_INDEX):null,e.map((a,l)=>this.renderSource(l)).toArray()):null}renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?$("div",{key:"esri-search__source-menu",class:this.classes(Fe.menu,Fe.sourcesMenu)},this.renderSourcesList()):null}renderLoader(){const{messages:e,messagesCommon:t}=this;return $("div",{class:Fe.loader,key:"base-loader"},$("span",{"aria-hidden":"true",class:Fe.loaderAnimation}),$("span",{class:Fe.fallbackText},e.searchButtonTitle),$("span",{class:Fe.loaderText},t.loading))}renderContainer(){const{allSources:e,state:t}=this.viewModel,{activeMenu:i}=this,r={[Fe.hasMultipleSources]:e.length>1,[Fe.isLoading]:t==="loading",[Fe.isSearching]:t==="searching",[Fe.showWarning]:i==="warning",[Fe.showSources]:i==="source",[Fe.showSuggestions]:i==="suggestion"};return $("div",{tabIndex:-1,afterCreate:s=>{this._container=s,s.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:s=>{s.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(r,Fe.container),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?$("button",{bind:this,class:this.classes(Fe.clearButton,Fe.button),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},$("span",{"aria-hidden":"true",class:Fe.clearIcon})):null}renderLocationGroup(){const{messages:e,locationEnabled:t,displayedSearchTerm:i}=this,r=t&&!i,s=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return r?$("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(Fe.menuList,Fe.suggestionList,Fe.suggestionListCurrentLocation)},$("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),role:"option",class:this.classes(Fe.menuItem,s?Fe.menuItemFocus:null)},$("span",{"aria-hidden":"true",class:Fe.locate})," ",e.useCurrentLocation)):null}renderInput(){const{activeMenu:e,locationEnabled:t,displayedSearchTerm:i,messages:r,suggestionsMenuId:s,inputId:n,_activeMenuItemIndex:o}=this,{maxInputLength:a,placeholder:l,searchTerm:u,suggestionCount:h}=this.viewModel,f=!(!(t&&!i)&&!h),y=e==="suggestion"&&o>-1?this._buildId("suggestion-item",o):null;return $("input",{"aria-activedescendant":y,"aria-autocomplete":"list","aria-expanded":(f&&e==="suggestion").toString(),"aria-controls":f?s:null,"aria-haspopup":"listbox","aria-label":r.searchButtonTitle,bind:this,placeholder:l,maxlength:a,autocomplete:"off",type:"text",class:this.classes(Fe.esriInput,Fe.input),value:u,id:n,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:Mn,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:u?"":l})}renderForm(){return $("form",{key:"esri-search__form",bind:this,class:Fe.form,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(e){const{sourceIndex:t}=e,i=e.results.length,r=e.results;return i?$("ul",{role:"group",key:`esri-search__suggestion-list-${t}`,class:this.classes(Fe.menuList,Fe.suggestionList)},r.map(s=>this.renderSuggestion(s,this._menuItemCount++))):null}renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map(t=>[this.renderSuggestionHeader(t),this.renderSuggestList(t)]):null}renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:t,suggestionsMenuId:i,inputId:r}=this,{suggestionCount:s}=this.viewModel,n=t&&!e||s;return this._menuItemCount=0,n?$("div",{id:i,key:"esri-search__suggestions-menu",class:this.classes(Fe.menu,Fe.suggestionsMenu),role:"listbox","aria-labelledby":r,bind:this,afterCreate:Mn,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return $("div",{key:"esri-search__input-container",class:Fe.inputContainer},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(e){const{allSources:t,activeSourceIndex:i}=this.viewModel,{sourceIndex:r}=e,s=e.results.length,n=t.length>1&&i===sm.ALL_INDEX;return s&&n?$("div",{key:`esri-search__suggestion-header-${r}`,class:Fe.menuHeader},this._getSourceName(r)):null}renderSuggestion(e,t){const{_activeMenuItemIndex:i,messages:r}=this,{searchTerm:s}=this.viewModel;if(s){const{text:n}=e,o=n||r.untitledResult,a=rxe.test(o),l=[];if(a)l.push($("div",{innerHTML:o}));else{const h=this._splitResult(o,s),f=s.toLowerCase();h.forEach((y,g)=>{y&&y.length&&(y.toLowerCase()===f?l.push($("strong",{key:g},y)):l.push(y))})}const u=this.activeMenu==="suggestion"&&i===t;return $("li",{bind:this,id:this._buildId("suggestion-item",t),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===t).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${t}`,"data-suggestion":e,role:"option",class:this.classes(Fe.menuItem,u?Fe.menuItemFocus:null)},l)}}renderSource(e){const{activeSourceIndex:t,searchAllEnabled:i}=this.viewModel,r={[Fe.menuItemActive]:e===t,[Fe.menuItemFocus]:this.activeMenu==="source"&&e===(i?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},s=i?e+1:e;return $("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",s),"aria-checked":(e===t).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes(Fe.source,Fe.menuItem,r)},this._getSourceName(e))}renderNoResultsWarning(e){const{messages:t}=this,i=e?wr(t.noResultsFoundForValue,{value:`"${e}"`}):t.noResultsFound;return $("div",{key:"esri-search__no_results"},$("div",{class:Fe.warningMenuHeader},t.noResults),$("div",{class:Fe.warningMenuText},i))}renderEmptySearchWarning(){const{messages:e}=this;return $("div",{key:"esri-search__empty-search"},$("span",{"aria-hidden":"true",class:Fe.noticeIcon}),$("span",{class:Fe.noValueText},e.emptyValue))}renderLocateWarning(){const{messages:e}=this;return $("div",{key:"esri-search__locate-error"},$("span",{"aria-hidden":"true",class:Fe.noticeIcon}),$("span",{class:Fe.noValueText},e.locateError))}renderWarning(){var e;const{displayedSearchTerm:t,_locateFailed:i}=this,{viewModel:r}=this;return i?this.renderLocateWarning():(e=r.selectedSuggestion)!=null&&e.location||t?this.renderNoResultsWarning(t):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,t){return`${this.id}-${e}${t===void 0?"":`-${t}`}`}_watchSourceChanges(){const{_handles:e,viewModel:{allSources:t}}=this,i="sources";e.remove(i),t.forEach(r=>e.add(Qe(r,"name",()=>this.scheduleRender()),i))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){const e=this.activeMenu==="source";var t;this.activeMenu=e?"none":"source",this.renderNow(),this.activeMenu==="source"&&((t=this._sourceListNode)==null||t.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const t=e.currentTarget["data-suggestion"];t&&(this._focus(),this.search(t))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:t}=e;this._searchController=e,this.viewModel.searchNearby({signal:t}).then(i=>{this.activeMenu=i.numResults?"none":"warning"}).catch(()=>{this._locateFailed=!0,this.activeMenu="warning"}).then(()=>{this._searchController=null})}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){var t;if(!e)return;const i=e["data-source-index"];this.viewModel.activeSourceIndex=i,this._clearActiveMenu(),(t=this._sourceMenuButtonNode)==null||t.focus()}_cancelSuggest(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)}_cancelSearch(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1}_handleInputKeyup(e){var t;const i=Us(e);if(e.ctrlKey||e.metaKey||i==="Copy"||i==="ArrowLeft"||i==="ArrowRight"||i==="Shift")return;if(i==="Tab"||i==="Escape"||e.shiftKey&&i==="Tab")return this._cancelSuggest(),void(i==="Escape"&&this._clearActiveMenu());const r=i==="Home"||i==="End"||i==="ArrowUp"||i==="ArrowDown";if(i==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const s=(t=this._suggestionListNode)==null?void 0:t.getElementsByTagName("li");if(s!=null&&s.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),r)return e.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(i,s,this._suggestionListNode);const n=s[this._activeMenuItemIndex];if(i==="Enter"&&n){const o=n["data-suggestion"];return void(o?(this._focus(),this.search(o)):n["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(e,t,i){const r=this._activeMenuItemIndex;e==="Home"&&(this._activeMenuItemIndex=0),e==="End"&&(this._activeMenuItemIndex=t.length-1),e==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?t.length-1:this._activeMenuItemIndex-1),e==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===t.length-1?0:this._activeMenuItemIndex+1),r!==this._activeMenuItemIndex&&lae(t[this._activeMenuItemIndex],i)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(e){const t=e.target;this.viewModel.searchTerm!==t.value&&(this.viewModel.searchTerm=t.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){const t=Us(e);if(Mh(t)){e.preventDefault();const i=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(i)}else t!=="ArrowUp"&&t!=="ArrowDown"&&t!=="End"&&t!=="Home"||e.preventDefault()}_handleSourceMenuKeyup(e){var t;const i=Us(e),r=i==="ArrowUp"||i==="ArrowDown"||i==="End"||i==="Home";var s;if(r&&e.preventDefault(),i==="Escape")return this._clearActiveMenu(),void((s=this._sourceMenuButtonNode)==null||s.focus());const n=(t=this._sourceListNode)==null?void 0:t.getElementsByTagName("li");return n&&n.length!==0&&r?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(i,n,this._sourceListNode.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(e){const{messages:t}=this,i=this.viewModel,{allSources:r}=i,s=r.getItemAt(e);return e===sm.ALL_INDEX?t.all:s&&s.name||t.untitledSource}_splitResult(e,t){const i=kO(t);return e.replace(new RegExp(`(^|)(${i})(|$)`,"ig"),"$1|$2|$3").split("|")}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};c([d()],pt.prototype,"_activeMenuItemIndex",void 0),c([d()],pt.prototype,"displayedSearchTerm",null),c([d({readOnly:!0})],pt.prototype,"inputId",null),c([d({readOnly:!0})],pt.prototype,"suggestionsMenuId",null),c([d({readOnly:!0})],pt.prototype,"sourceMenuId",null),c([d({readOnly:!0})],pt.prototype,"sourceMenuButtonId",null),c([d()],pt.prototype,"activeMenu",void 0),c([ne("viewModel.activeSource")],pt.prototype,"activeSource",void 0),c([ne("viewModel.activeSourceIndex")],pt.prototype,"activeSourceIndex",void 0),c([ne("viewModel.allPlaceholder")],pt.prototype,"allPlaceholder",void 0),c([ne("viewModel.allSources")],pt.prototype,"allSources",void 0),c([ne("viewModel.autoNavigate")],pt.prototype,"autoNavigate",void 0),c([ne("viewModel.autoSelect")],pt.prototype,"autoSelect",void 0),c([ne("viewModel.defaultSources")],pt.prototype,"defaultSources",void 0),c([d()],pt.prototype,"disabled",void 0),c([ne("viewModel.goToOverride")],pt.prototype,"goToOverride",void 0),c([d()],pt.prototype,"iconClass",void 0),c([ne("viewModel.includeDefaultSources")],pt.prototype,"includeDefaultSources",void 0),c([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],pt.prototype,"label",void 0),c([ne("viewModel.locationEnabled")],pt.prototype,"locationEnabled",void 0),c([ne("viewModel.maxResults")],pt.prototype,"maxResults",void 0),c([ne("viewModel.maxSuggestions")],pt.prototype,"maxSuggestions",void 0),c([d(),Zt("esri/widgets/Search/t9n/Search")],pt.prototype,"messages",void 0),c([d(),Zt("esri/t9n/common")],pt.prototype,"messagesCommon",void 0),c([ne("viewModel.minSuggestCharacters")],pt.prototype,"minSuggestCharacters",void 0),c([ne("viewModel.popupEnabled")],pt.prototype,"popupEnabled",void 0),c([ne("viewModel.popupTemplate")],pt.prototype,"popupTemplate",void 0),c([ne("viewModel.portal")],pt.prototype,"portal",void 0),c([ne("viewModel.resultGraphic")],pt.prototype,"resultGraphic",void 0),c([ne("viewModel.resultGraphicEnabled")],pt.prototype,"resultGraphicEnabled",void 0),c([ne("viewModel.results")],pt.prototype,"results",void 0),c([ne("viewModel.searchAllEnabled")],pt.prototype,"searchAllEnabled",void 0),c([ne("viewModel.searchTerm")],pt.prototype,"searchTerm",void 0),c([ne("viewModel.selectedResult")],pt.prototype,"selectedResult",void 0),c([ne("viewModel.sources")],pt.prototype,"sources",void 0),c([ne("viewModel.suggestions")],pt.prototype,"suggestions",void 0),c([ne("viewModel.suggestionsEnabled")],pt.prototype,"suggestionsEnabled",void 0),c([ne("viewModel.view")],pt.prototype,"view",void 0),c([f9(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),d({type:sm})],pt.prototype,"viewModel",void 0),c([ne("viewModel.clear")],pt.prototype,"clear",null),pt=c([O("esri.widgets.Search")],pt);const sxe=pt,un={base:"esri-identity-form",group:"esri-identity-form__group",label:"esri-identity-form__label",footer:"esri-identity-form__footer",esriInput:"esri-input",esriButton:"esri-button",esriButtonSecondary:"esri-button--secondary"},nxe="ArcGIS Online";let Jl=class extends Yt{constructor(e,t){super(e,t),this._usernameInputNode=null,this._passwordInputNode=null,this.messages=null,this.signingIn=!1,this.server=null,this.resource=null,this.error=null,this.oAuthPrompt=!1}render(){const{error:e,server:t,resource:i,signingIn:r,oAuthPrompt:s,messages:n}=this,o=$("div",{class:un.group},wr(s?n.oAuthInfo:n.info,{server:/\.arcgis\.com/i.test(t)?nxe:t,resource:`(${i||n.lblItem})`})),a=s?null:$("div",{class:un.group,key:"username"},$("label",{class:un.label},n.lblUser,$("input",{value:"",required:!0,autocomplete:"off",spellcheck:!1,type:"text",bind:this,afterCreate:Mn,"data-node-ref":"_usernameInputNode",class:un.esriInput}))),l=s?null:$("div",{class:un.group,key:"password"},$("label",{class:un.label},n.lblPwd,$("input",{value:"",required:!0,type:"password",bind:this,afterCreate:Mn,"data-node-ref":"_passwordInputNode",class:un.esriInput}))),u=$("div",{class:this.classes(un.group,un.footer)},$("input",{type:"submit",disabled:!!r,value:r?n.lblSigning:n.lblOk,class:un.esriButton}),$("input",{type:"button",value:n.lblCancel,bind:this,onclick:this._cancel,class:this.classes(un.esriButton,un.esriButtonSecondary)})),h=e?$("div",null,e.details&&e.details.httpStatus?n.invalidUser:n.noAuthService):null;return $("form",{class:un.base,bind:this,onsubmit:this._submit},o,h,a,l,u)}_cancel(){this._set("signingIn",!1),this._usernameInputNode&&(this._usernameInputNode.value=""),this._passwordInputNode&&(this._passwordInputNode.value=""),this.emit("cancel")}_submit(e){e.preventDefault(),this._set("signingIn",!0);const t=this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value};this.emit("submit",t)}};c([d(),Zt("esri/identity/t9n/identity")],Jl.prototype,"messages",void 0),c([d()],Jl.prototype,"signingIn",void 0),c([d()],Jl.prototype,"server",void 0),c([d()],Jl.prototype,"resource",void 0),c([d()],Jl.prototype,"error",void 0),c([d()],Jl.prototype,"oAuthPrompt",void 0),Jl=c([O("esri.identity.IdentityForm")],Jl);const oxe=Jl;/*!
* tabbable 5.3.2
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var fH=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],ox=fH.join(","),mH=typeof Element=="undefined",dp=mH?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,qM=!mH&&Element.prototype.getRootNode?function(e){return e.getRootNode()}:function(e){return e.ownerDocument},yH=function(t,i,r){var s=Array.prototype.slice.apply(t.querySelectorAll(ox));return i&&dp.call(t,ox)&&s.unshift(t),s=s.filter(r),s},gH=function e(t,i,r){for(var s=[],n=Array.from(t);n.length;){var o=n.shift();if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,u=e(l,!0,r);r.flatten?s.push.apply(s,u):s.push({scope:o,candidates:u})}else{var h=dp.call(o,ox);h&&r.filter(o)&&(i||!t.includes(o))&&s.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o);if(f){var y=e(f===!0?o.children:f.children,!0,r);r.flatten?s.push.apply(s,y):s.push({scope:o,candidates:y})}else n.unshift.apply(n,o.children)}}return s},vH=function(t,i){return t.tabIndex<0&&(i||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||t.isContentEditable)&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},axe=function(t,i){return t.tabIndex===i.tabIndex?t.documentOrder-i.documentOrder:t.tabIndex-i.tabIndex},_H=function(t){return t.tagName==="INPUT"},lxe=function(t){return _H(t)&&t.type==="hidden"},cxe=function(t){var i=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return i},uxe=function(t,i){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===i)return t[r]},dxe=function(t){if(!t.name)return!0;var i=t.form||qM(t),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window!="undefined"&&typeof window.CSS!="undefined"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(t.name));else try{s=r(t.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var n=uxe(s,t.form);return!n||n===t},hxe=function(t){return _H(t)&&t.type==="radio"},pxe=function(t){return hxe(t)&&!dxe(t)},s4=function(t){var i=t.getBoundingClientRect(),r=i.width,s=i.height;return r===0&&s===0},fxe=function(t,i){var r=i.displayCheck,s=i.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var n=dp.call(t,"details>summary:first-of-type"),o=n?t.parentElement:t;if(dp.call(o,"details:not([open]) *"))return!0;var a=qM(t).host,l=(a==null?void 0:a.ownerDocument.contains(a))||t.ownerDocument.contains(t);if(!r||r==="full"){if(typeof s=="function"){for(var u=t;t;){var h=t.parentElement,f=qM(t);if(h&&!h.shadowRoot&&s(h)===!0)return s4(t);t.assignedSlot?t=t.assignedSlot:!h&&f!==t.ownerDocument?t=f.host:t=h}t=u}if(l)return!t.getClientRects().length}else if(r==="non-zero-area")return s4(t);return!1},mxe=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var i=t.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var s=i.children.item(r);if(s.tagName==="LEGEND")return dp.call(i,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}i=i.parentElement}return!1},ax=function(t,i){return!(i.disabled||lxe(i)||fxe(i,t)||cxe(i)||mxe(i))},GM=function(t,i){return!(pxe(i)||vH(i)<0||!ax(t,i))},yxe=function e(t){var i=[],r=[];return t.forEach(function(s,n){var o=!!s.scope,a=o?s.scope:s,l=vH(a,o),u=o?e(s.candidates):a;l===0?o?i.push.apply(i,u):i.push(a):r.push({documentOrder:n,tabIndex:l,item:s,isScope:o,content:u})}),r.sort(axe).reduce(function(s,n){return n.isScope?s.push.apply(s,n.content):s.push(n.content),s},[]).concat(i)},gxe=function(t,i){i=i||{};var r;return i.getShadowRoot?r=gH([t],i.includeContainer,{filter:GM.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot}):r=yH(t,i.includeContainer,GM.bind(null,i)),yxe(r)},vxe=function(t,i){i=i||{};var r;return i.getShadowRoot?r=gH([t],i.includeContainer,{filter:ax.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=yH(t,i.includeContainer,ax.bind(null,i)),r},Qb=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return dp.call(t,ox)===!1?!1:GM(i,t)},_xe=fH.concat("iframe").join(","),rC=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return dp.call(t,_xe)===!1?!1:ax(i,t)};/*!
* focus-trap 6.7.3
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function n4(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,r)}return i}function bxe(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?n4(Object(i),!0).forEach(function(r){wxe(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n4(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function wxe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o4=function(){var e=[];return{activateTrap:function(i){if(e.length>0){var r=e[e.length-1];r!==i&&r.pause()}var s=e.indexOf(i);s===-1||e.splice(s,1),e.push(i)},deactivateTrap:function(i){var r=e.indexOf(i);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}}}(),Sxe=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},xxe=function(t){return t.key==="Escape"||t.key==="Esc"||t.keyCode===27},Ixe=function(t){return t.key==="Tab"||t.keyCode===9},a4=function(t){return setTimeout(t,0)},sC=function(t,i){var r=-1;return t.every(function(s,n){return i(s)?(r=n,!1):!0}),r},ng=function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return typeof t=="function"?t.apply(void 0,r):t},Xb=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},Txe=function(t,i){var r=(i==null?void 0:i.document)||document,s=bxe({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},i),n={containers:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},o,a=function(_,q,W){return _&&_[q]!==void 0?_[q]:s[W||q]},l=function(_){return!!(_&&n.containers.some(function(q){return q.contains(_)}))},u=function(_){var q=s[_];if(typeof q=="function"){for(var W=arguments.length,oe=new Array(W>1?W-1:0),te=1;te<W;te++)oe[te-1]=arguments[te];q=q.apply(void 0,oe)}if(!q){if(q===void 0||q===!1)return q;throw new Error("`".concat(_,"` was specified but was not a node, or did not return a node"))}var he=q;if(typeof q=="string"&&(he=r.querySelector(q),!he))throw new Error("`".concat(_,"` as selector refers to no known node"));return he},h=function(){var _=u("initialFocus");if(_===!1)return!1;if(_===void 0)if(l(r.activeElement))_=r.activeElement;else{var q=n.tabbableGroups[0],W=q&&q.firstTabbableNode;_=W||u("fallbackFocus")}if(!_)throw new Error("Your focus-trap needs to have at least one focusable element");return _},f=function(){if(n.tabbableGroups=n.containers.map(function(_){var q=gxe(_),W=vxe(_);if(q.length>0)return{container:_,firstTabbableNode:q[0],lastTabbableNode:q[q.length-1],nextTabbableNode:function(te){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ge=W.findIndex(function(Te){return Te===te});return he?W.slice(ge+1).find(function(Te){return Qb(Te)}):W.slice(0,ge).reverse().find(function(Te){return Qb(Te)})}}}).filter(function(_){return!!_}),n.tabbableGroups.length<=0&&!u("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},y=function R(_){if(_!==!1&&_!==r.activeElement){if(!_||!_.focus){R(h());return}_.focus({preventScroll:!!s.preventScroll}),n.mostRecentlyFocusedNode=_,Sxe(_)&&_.select()}},g=function(_){var q=u("setReturnFocus",_);return q||(q===!1?!1:_)},b=function(_){var q=Xb(_);if(!l(q)){if(ng(s.clickOutsideDeactivates,_)){o.deactivate({returnFocus:s.returnFocusOnDeactivate&&!rC(q)});return}ng(s.allowOutsideClick,_)||_.preventDefault()}},w=function(_){var q=Xb(_),W=l(q);W||q instanceof Document?W&&(n.mostRecentlyFocusedNode=q):(_.stopImmediatePropagation(),y(n.mostRecentlyFocusedNode||h()))},x=function(_){var q=Xb(_);f();var W=null;if(n.tabbableGroups.length>0){var oe=sC(n.tabbableGroups,function(st){var Kt=st.container;return Kt.contains(q)}),te=oe>=0?n.tabbableGroups[oe]:void 0;if(oe<0)_.shiftKey?W=n.tabbableGroups[n.tabbableGroups.length-1].lastTabbableNode:W=n.tabbableGroups[0].firstTabbableNode;else if(_.shiftKey){var he=sC(n.tabbableGroups,function(st){var Kt=st.firstTabbableNode;return q===Kt});if(he<0&&(te.container===q||rC(q)&&!Qb(q)&&!te.nextTabbableNode(q,!1))&&(he=oe),he>=0){var ge=he===0?n.tabbableGroups.length-1:he-1,Te=n.tabbableGroups[ge];W=Te.lastTabbableNode}}else{var Se=sC(n.tabbableGroups,function(st){var Kt=st.lastTabbableNode;return q===Kt});if(Se<0&&(te.container===q||rC(q)&&!Qb(q)&&!te.nextTabbableNode(q))&&(Se=oe),Se>=0){var vt=Se===n.tabbableGroups.length-1?0:Se+1,$t=n.tabbableGroups[vt];W=$t.firstTabbableNode}}}else W=u("fallbackFocus");W&&(_.preventDefault(),y(W))},T=function(_){if(xxe(_)&&ng(s.escapeDeactivates,_)!==!1){_.preventDefault(),o.deactivate();return}if(Ixe(_)){x(_);return}},M=function(_){if(!ng(s.clickOutsideDeactivates,_)){var q=Xb(_);l(q)||ng(s.allowOutsideClick,_)||(_.preventDefault(),_.stopImmediatePropagation())}},F=function(){if(!!n.active)return o4.activateTrap(o),n.delayInitialFocusTimer=s.delayInitialFocus?a4(function(){y(h())}):y(h()),r.addEventListener("focusin",w,!0),r.addEventListener("mousedown",b,{capture:!0,passive:!1}),r.addEventListener("touchstart",b,{capture:!0,passive:!1}),r.addEventListener("click",M,{capture:!0,passive:!1}),r.addEventListener("keydown",T,{capture:!0,passive:!1}),o},D=function(){if(!!n.active)return r.removeEventListener("focusin",w,!0),r.removeEventListener("mousedown",b,!0),r.removeEventListener("touchstart",b,!0),r.removeEventListener("click",M,!0),r.removeEventListener("keydown",T,!0),o};return o={activate:function(_){if(n.active)return this;var q=a(_,"onActivate"),W=a(_,"onPostActivate"),oe=a(_,"checkCanFocusTrap");oe||f(),n.active=!0,n.paused=!1,n.nodeFocusedBeforeActivation=r.activeElement,q&&q();var te=function(){oe&&f(),F(),W&&W()};return oe?(oe(n.containers.concat()).then(te,te),this):(te(),this)},deactivate:function(_){if(!n.active)return this;clearTimeout(n.delayInitialFocusTimer),n.delayInitialFocusTimer=void 0,D(),n.active=!1,n.paused=!1,o4.deactivateTrap(o);var q=a(_,"onDeactivate"),W=a(_,"onPostDeactivate"),oe=a(_,"checkCanReturnFocus");q&&q();var te=a(_,"returnFocus","returnFocusOnDeactivate"),he=function(){a4(function(){te&&y(g(n.nodeFocusedBeforeActivation)),W&&W()})};return te&&oe?(oe(g(n.nodeFocusedBeforeActivation)).then(he,he),this):(he(),this)},pause:function(){return n.paused||!n.active?this:(n.paused=!0,D(),this)},unpause:function(){return!n.paused||!n.active?this:(n.paused=!1,f(),F(),this)},updateContainerElements:function(_){var q=[].concat(_).filter(Boolean);return n.containers=q.map(function(W){return typeof W=="string"?r.querySelector(W):W}),n.active&&f(),this}},o.updateContainerElements(t),o};const ba={base:"esri-identity-modal",open:"esri-identity-modal--open",closed:"esri-identity-modal--closed",title:"esri-identity-modal__title",dialog:"esri-identity-modal__dialog",content:"esri-identity-modal__content",closeButton:"esri-identity-modal__close-button",iconClose:"esri-icon-close"};let vu=class extends Yt{constructor(e,t){super(e,t),this.container=document.createElement("div"),this.content=null,this.open=!1,this._close=()=>{this.open=!1},document.body.appendChild(this.container),this.own(this.watch("open",()=>this._toggleFocusTrap()))}destroy(){this._destroyFocusTrap()}render(){const e=this.id,{open:t,content:i,title:r,messages:s}=this,n=t&&!!i,o={[ba.open]:n,[ba.closed]:!n},a=$("button",{class:ba.closeButton,"aria-label":s.close,title:s.close,bind:this,onclick:this._close},$("span",{"aria-hidden":"true",class:ba.iconClose})),l=`${e}_title`,u=`${e}_content`,h=r?$("h1",{id:l,class:ba.title},r):null,f=n?$("div",{bind:this,class:ba.dialog,role:"dialog","aria-labelledby":l,"aria-describedby":u,afterCreate:this._createFocusTrap},a,h,this._renderContent(u)):null;return $("div",{tabIndex:-1,class:this.classes(ba.base,o)},f)}_destroyFocusTrap(){var e;(e=this._focusTrap)==null||e.deactivate({onDeactivate:null}),this._focusTrap=null}_toggleFocusTrap(){const{_focusTrap:e,open:t}=this;e&&(t?e.activate():e.deactivate())}_createFocusTrap(e){this._destroyFocusTrap();const t=requestAnimationFrame(()=>{this._focusTrap=Txe(e,{initialFocus:"input",onDeactivate:this._close}),this._toggleFocusTrap()});this.own(pp(()=>cancelAnimationFrame(t)))}_renderContent(e){const t=this.content;return typeof t=="string"?$("div",{class:ba.content,id:e,innerHTML:t}):vv(t)?$("div",{class:ba.content,id:e},t.render()):t instanceof HTMLElement?$("div",{class:ba.content,id:e,bind:t,afterCreate:this._attachToNode}):null}_attachToNode(e){const t=this;e.appendChild(t)}};c([d({readOnly:!0})],vu.prototype,"container",void 0),c([d()],vu.prototype,"content",void 0),c([d()],vu.prototype,"open",void 0),c([d(),Zt("esri/t9n/common")],vu.prototype,"messages",void 0),c([d({aliasOf:"messages.auth.signIn"})],vu.prototype,"title",void 0),vu=c([O("esri.identity.IdentityModal")],vu);const l4=vu,nC="esriJSAPIOAuth";class HM{constructor(t,i){this.oAuthInfo=null,this.storage=null,this.appId=null,this.codeVerifier=null,this.expires=null,this.refreshToken=null,this.ssl=null,this.stateUID=null,this.token=null,this.userId=null,this.oAuthInfo=t,this.storage=i,this._init()}isValid(){let t=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token))if(this.expires==null&&this.refreshToken)t=!0;else{const i=Date.now();this.expires>i&&(this.expires-i)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(t=!0)}return t}save(){if(!this.storage)return!1;const t=this._load(),i=this.oAuthInfo;if(i&&i.authNamespace&&i.portalUrl){let r=t[i.authNamespace];r||(r=t[i.authNamespace]={}),this.appId||(this.appId=i.appId),r[i.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem(nC,JSON.stringify(t))}catch(s){return console.warn(s),!1}return!0}return!1}destroy(){const t=this._load(),i=this.oAuthInfo;if(i&&i.appId&&i.portalUrl&&(this.expires==null||this.expires>Date.now())&&(this.refreshToken||this.token)){const r=i.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",s=new FormData;if(s.append("f","json"),s.append("auth_token",this.refreshToken||this.token),s.append("client_id",i.appId),s.append("token_type_hint",this.refreshToken?"refresh_token":"access_token"),typeof navigator.sendBeacon=="function")navigator.sendBeacon(r,s);else{const n=new XMLHttpRequest;n.open("POST",r),n.send(s)}}if(i&&i.authNamespace&&i.portalUrl&&this.storage){const r=t[i.authNamespace];if(r){delete r[i.portalUrl];try{this.storage.setItem(nC,JSON.stringify(t))}catch(s){console.log(s)}}}i&&(i._oAuthCred=null,this.oAuthInfo=null)}_init(){const t=this._load(),i=this.oAuthInfo;if(i&&i.authNamespace&&i.portalUrl){let r=t[i.authNamespace];r&&(r=r[i.portalUrl],r&&(this.appId=r.appId,this.codeVerifier=r.codeVerifier,this.expires=r.expires,this.refreshToken=r.refreshToken,this.ssl=r.ssl,this.stateUID=r.stateUID,this.token=r.token,this.userId=r.userId))}}_load(){let t={};if(this.storage){const i=this.storage.getItem(nC);if(i)try{t=JSON.parse(i)}catch(r){console.warn(r)}}return t}}HM.prototype.declaredClass="esri.identity.OAuthCredential";var WM;let Lr=WM=class extends ue{constructor(e){super(e),this._oAuthCred=null,this.appId=null,this.authNamespace="/",this.expiration=20160,this.flowType="auto",this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl="oauth-callback.html",this.popupWindowFeatures="height=490,width=800,resizable,scrollbars,status",this.portalUrl="https://www.arcgis.com",this.preserveUrlHash=!1,this.userId=null}clone(){return WM.fromJSON(this.toJSON())}};c([d({json:{write:!0}})],Lr.prototype,"appId",void 0),c([d({json:{write:!0}})],Lr.prototype,"authNamespace",void 0),c([d({json:{write:!0}})],Lr.prototype,"expiration",void 0),c([d({json:{write:!0}})],Lr.prototype,"flowType",void 0),c([d({json:{write:!0}})],Lr.prototype,"forceLogin",void 0),c([d({json:{write:!0}})],Lr.prototype,"forceUserId",void 0),c([d({json:{write:!0}})],Lr.prototype,"locale",void 0),c([d({json:{write:!0}})],Lr.prototype,"minTimeUntilExpiration",void 0),c([d({json:{write:!0}})],Lr.prototype,"popup",void 0),c([d({json:{write:!0}})],Lr.prototype,"popupCallbackUrl",void 0),c([d({json:{write:!0}})],Lr.prototype,"popupWindowFeatures",void 0),c([d({json:{write:!0}})],Lr.prototype,"portalUrl",void 0),c([d({json:{write:!0}})],Lr.prototype,"preserveUrlHash",void 0),c([d({json:{write:!0}})],Lr.prototype,"userId",void 0),Lr=WM=c([O("esri.identity.OAuthInfo")],Lr);const c4=Lr;let _n=class extends ue{constructor(e){super(e),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};c([d({json:{write:!0}})],_n.prototype,"adminTokenServiceUrl",void 0),c([d({json:{write:!0}})],_n.prototype,"currentVersion",void 0),c([d({json:{write:!0}})],_n.prototype,"hasPortal",void 0),c([d({json:{write:!0}})],_n.prototype,"hasServer",void 0),c([d({json:{write:!0}})],_n.prototype,"owningSystemUrl",void 0),c([d({json:{write:!0}})],_n.prototype,"owningTenant",void 0),c([d({json:{write:!0}})],_n.prototype,"server",void 0),c([d({json:{write:!0}})],_n.prototype,"shortLivedTokenValidity",void 0),c([d({json:{write:!0}})],_n.prototype,"tokenServiceUrl",void 0),c([d({json:{write:!0}})],_n.prototype,"webTierAuth",void 0),_n=c([O("esri.identity.ServerInfo")],_n);const oC=_n,E1={},bH=e=>{const t=new En(e.owningSystemUrl).host,i=new En(e.server).host,r=/.+\.arcgis\.com$/i;return r.test(t)&&r.test(i)},JM=(e,t)=>!!(bH(e)&&t&&t.some(i=>i.test(e.server)));let A1=null,M1=null;try{A1=window.localStorage,M1=window.sessionStorage}catch{}class wH extends bo{constructor(){super(),this._portalConfig=globalThis.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this.defaultOAuthInfo=null,this.defaultTokenValidity=60,this.dialog=null,this.formConstructor=oxe,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appOrigin=window.origin!=="null"?window.origin:window.location.origin,this._appUrlObj=_i(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthLocationParams=null,this._gwTokenUrl="/sharing/rest/generateToken",this._agsRest="/rest/services",this._agsPortal=/\/sharing(\/|$)/i,this._agsAdmin=/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,this._adminSvcs=/\/rest\/admin\/services(\/|$)/i,this._gwDomains=[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"}],this._legacyFed=[],this._regexSDirUrl=/http.+\/rest\/services\/?/gi,this._regexServerType=/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/gi,this._gwUser=/http.+\/users\/([^\/]+)\/?.*/i,this._gwItem=/http.+\/items\/([^\/]+)\/?.*/i,this._gwGroup=/http.+\/groups\/([^\/]+)\/?.*/i,this._rePortalTokenSvc=/\/sharing(\/rest)?\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getOAuthLocationParams(),window.addEventListener("pageshow",t=>{this._pageShowHandler(t)})}registerServers(t){const i=this.serverInfos;i?(t=t.filter(r=>!this.findServerInfo(r.server)),this.serverInfos=i.concat(t)):this.serverInfos=t,t.forEach(r=>{r.owningSystemUrl&&this._portals.push(r.owningSystemUrl),r.hasPortal&&this._portals.push(r.server)})}registerOAuthInfos(t){const i=this.oAuthInfos;if(i){for(const r of t){const s=this.findOAuthInfo(r.portalUrl);s&&i.splice(i.indexOf(s),1)}this.oAuthInfos=i.concat(t)}else this.oAuthInfos=t}registerToken(t){t=k({},t);const i=this._sanitizeUrl(t.server),r=this._isServerRsrc(i);let s,n=this.findServerInfo(i),o=!0;n||(n=new oC,n.server=this._getServerInstanceRoot(i),r?n.hasServer=!0:(n.tokenServiceUrl=this._getTokenSvcUrl(i),n.hasPortal=!0),this.registerServers([n])),s=this._findCredential(i),s?(delete t.server,Object.assign(s,t),o=!1):(s=new hi({userId:t.userId,server:n.server,token:t.token,expires:t.expires,ssl:t.ssl,scope:r?"server":"portal"}),s.resources=[i],this.credentials.push(s)),s.emitTokenChange(!1),o||s.refreshServerTokens()}toJSON(){return Ex({serverInfos:this.serverInfos.map(t=>t.toJSON()),oAuthInfos:this.oAuthInfos.map(t=>t.toJSON()),credentials:this.credentials.map(t=>t.toJSON())})}initialize(t){if(!t)return;typeof t=="string"&&(t=JSON.parse(t));const i=t.serverInfos,r=t.oAuthInfos,s=t.credentials;if(i){const n=[];i.forEach(o=>{o.server&&o.tokenServiceUrl&&n.push(o.declaredClass?o:new oC(o))}),n.length&&this.registerServers(n)}if(r){const n=[];r.forEach(o=>{o.appId&&n.push(o.declaredClass?o:new c4(o))}),n.length&&this.registerOAuthInfos(n)}s&&s.forEach(n=>{n.server&&n.token&&n.expires&&n.expires>Date.now()&&((n=n.declaredClass?n:new hi(n)).emitTokenChange(),this.credentials.push(n))})}findServerInfo(t){let i;t=this._sanitizeUrl(t);for(const r of this.serverInfos)if(this._hasSameServerInstance(r.server,t)){i=r;break}return i}findOAuthInfo(t){let i;t=this._sanitizeUrl(t);for(const r of this.oAuthInfos)if(this._hasSameServerInstance(r.portalUrl,t)){i=r;break}return i}findCredential(t,i){let r;t=this._sanitizeUrl(t);const s=this._isServerRsrc(t)?"server":"portal";if(i){for(const n of this.credentials)if(this._hasSameServerInstance(n.server,t)&&i===n.userId&&n.scope===s){r=n;break}}else for(const n of this.credentials)if(this._hasSameServerInstance(n.server,t)&&this._getIdenticalSvcIdx(t,n)!==-1&&n.scope===s){r=n;break}return r}getCredential(t,i){let r,s,n=!0;i&&(r=!!i.token,s=i.error,n=i.prompt!==!1),i=k({},i),t=this._sanitizeUrl(t);const o=new AbortController,a=vg();if(i.signal&&rs(i.signal,()=>{o.abort()}),rs(o,()=>{a.reject(new B("identity-manager:user-aborted","ABORTED"))}),da(o))return a.promise;i.signal=o.signal;const l=this._isAdminResource(t),u=r?this.findCredential(t):null;let h;if(u&&s&&s.details&&s.details.httpStatus===498)u.destroy();else if(u)return h=new B("identity-manager:not-authorized","You are currently signed in as: '"+u.userId+"'. You do not have access to this resource: "+t,{error:s}),a.reject(h),a.promise;const f=this._findCredential(t,i);if(f)return a.resolve(f),a.promise;let y=this.findServerInfo(t);if(y)!y.hasServer&&this._isServerRsrc(t)&&(y._restInfoPms=this._getTokenSvcUrl(t),y.hasServer=!0);else{const g=this._getTokenSvcUrl(t);if(!g)return h=new B("identity-manager:unknown-resource","Unknown resource - could not find token service endpoint."),a.reject(h),a.promise;y=new oC,y.server=this._getServerInstanceRoot(t),typeof g=="string"?(y.tokenServiceUrl=g,y.hasPortal=!0):(y._restInfoPms=g,y.hasServer=!0),this.registerServers([y])}return y.hasPortal&&y._selfReq===void 0&&(n||so(y.tokenServiceUrl,this._appOrigin)||this._gwDomains.some(g=>g.tokenServiceUrl===y.tokenServiceUrl))&&(y._selfReq={owningTenant:i&&i.owningTenant,selfDfd:this._getPortalSelf(y.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),t)}),this._enqueue(t,y,i,a,l)}getResourceName(t){return this._isRESTService(t)?t.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(t)&&t.replace(this._gwUser,"$1")||this._gwItem.test(t)&&t.replace(this._gwItem,"$1")||this._gwGroup.test(t)&&t.replace(this._gwGroup,"$1")||""}generateToken(t,i,r){const s=this._rePortalTokenSvc.test(t.tokenServiceUrl),n=new En(this._appOrigin),o=t.shortLivedTokenValidity;let a,l,u,h,f,y,g,b;i&&(b=this.tokenValidity||o||this.defaultTokenValidity,b>o&&o>0&&(b=o)),r&&(a=r.isAdmin,l=r.serverUrl,u=r.token,y=r.signal,g=r.ssl,t.customParameters=r.customParameters),a?h=t.adminTokenServiceUrl:(h=t.tokenServiceUrl,f=new En(h.toLowerCase()),t.webTierAuth&&r!=null&&r.serverUrl&&!g&&n.scheme==="http"&&(so(n.uri,h,!0)||f.scheme==="https"&&n.host===f.host&&n.port==="7080"&&f.port==="7443")&&(h=h.replace(/^https:/i,"http:").replace(/:7443/i,":7080")));const w=k({query:k({request:"getToken",username:i==null?void 0:i.username,password:i==null?void 0:i.password,serverUrl:l,token:u,expiration:b,referer:a||s?this._appOrigin:null,client:a?"referer":null,f:"json"},t.customParameters),method:"post",authMode:"anonymous",useProxy:this._useProxy(t,r),signal:y},r==null?void 0:r.ioArgs);return s||(w.withCredentials=!1),ft(h,w).then(x=>{const T=x.data;if(!T||!T.token)return new B("identity-manager:authentication-failed","Unable to generate token");const M=t.server;return E1[M]||(E1[M]={}),i&&(E1[M][i.username]=i.password),T.validity=b,T})}isBusy(){return!!this._busy}checkSignInStatus(t){return this.checkAppAccess(t,"").then(i=>i.credential)}checkAppAccess(t,i,r){let s=!1;return this.getCredential(t,{prompt:!1}).then(n=>{let o;const a={f:"json"};if(n.scope==="portal")if(i&&(this._doPortalSignIn(t)||r&&r.force))o=n.server+"/sharing/rest/oauth2/validateAppAccess",a.client_id=i;else{if(!n.token)return{credential:n};o=n.server+"/sharing/rest"}else{if(!n.token)return{credential:n};o=n.server+"/rest/services"}return n.token&&(a.token=n.token),ft(o,{query:a,authMode:"anonymous"}).then(l=>{if(l.data.valid===!1)throw new B("identity-manager:not-authorized",`You are currently signed in as: '${n.userId}'.`,l.data);return s=!!l.data.viewOnlyUserTypeApp,{credential:n}}).catch(l=>{if(l.name==="identity-manager:not-authorized")throw l;const u=l.details&&l.details.httpStatus;if(u===498)throw n.destroy(),new B("identity-manager:not-authenticated","User is not signed in.");if(u===400)throw new B("identity-manager:invalid-request");return{credential:n}})}).then(n=>({credential:n.credential,viewOnly:s}))}setOAuthResponseHash(t){t&&(t.charAt(0)==="#"&&(t=t.substring(1)),this._processOAuthPopupParams(Hf(t)))}setOAuthRedirectionHandler(t){this._oAuthRedirectFunc=t}setProtocolErrorHandler(t){this._protocolFunc=t}signIn(t,i,r={}){const s=vg(),n=()=>{var f,y,g,b,w;(f=l)==null||f.remove(),(y=u)==null||y.remove(),(g=h)==null||g.remove(),(b=a)==null||b.destroy(),(w=this.dialog)==null||w.destroy(),this.dialog=a=l=u=h=null},o=()=>{n(),this._oAuthDfd=null,s.reject(new B("identity-manager:user-aborted","ABORTED"))};r.signal&&rs(r.signal,()=>{o()});let a=new this.formConstructor;a.resource=this.getResourceName(t),a.server=i.server,this.dialog=new l4,this.dialog.content=a,this.dialog.open=!0,this.emit("dialog-create");let l=a.on("cancel",o),u=this.dialog.watch("open",o),h=a.on("submit",f=>{this.generateToken(i,f,{isAdmin:r.isAdmin,signal:r.signal}).then(y=>{n();const g=new hi({userId:f.username,server:i.server,token:y.token,expires:y.expires!=null?Number(y.expires):null,ssl:!!y.ssl,isAdmin:r.isAdmin,validity:y.validity});s.resolve(g)}).catch(y=>{a.error=y,a.signingIn=!1})});return s.promise}oAuthSignIn(t,i,r,s){this._oAuthDfd=vg();const n=this._oAuthDfd;let o;s!=null&&s.signal&&rs(s.signal,()=>{const b=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;b&&!b.closed?b.close():this.dialog&&y()}),n.resUrl_=t,n.sinfo_=i,n.oinfo_=r;const a=r._oAuthCred;if(a.storage&&(r.flowType==="authorization-code"||r.flowType==="auto"&&!r.popup&&i.currentVersion>=8.4)){let b=crypto.getRandomValues(new Uint8Array(32));o=AT(b),a.codeVerifier=o,b=crypto.getRandomValues(new Uint8Array(32)),a.stateUID=AT(b),a.save()||(a.codeVerifier=o=null)}else a.codeVerifier=null;let l,u,h,f;this._getCodeChallenge(o).then(b=>{const w=!s||s.oAuthPopupConfirmation!==!1;r.popup&&w?(l=new this.formConstructor,l.oAuthPrompt=!0,l.server=i.server,this.dialog=new l4,this.dialog.content=l,this.dialog.open=!0,this.emit("dialog-create"),u=l.on("cancel",y),h=this.dialog.watch("open",y),f=l.on("submit",()=>{g(),this._doOAuthSignIn(t,i,r,b)})):this._doOAuthSignIn(t,i,r,b)});const y=()=>{g(),this._oAuthDfd=null,n.reject(new B("identity-manager:user-aborted","ABORTED"))},g=()=>{var b,w,x,T,M;(b=u)==null||b.remove(),(w=h)==null||w.remove(),(x=f)==null||x.remove(),(T=l)==null||T.destroy(),(M=this.dialog)==null||M.destroy(),this.dialog=null};return n.promise}destroyCredentials(){this.credentials&&this.credentials.slice().forEach(t=>{t.destroy()}),this.emit("credentials-destroy")}enablePostMessageAuth(t="https://www.arcgis.com/sharing/rest"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=sa(window,"message",i=>{var r;if((i.origin===this._appOrigin||i.origin.endsWith(".arcgis.com"))&&((r=i.data)==null?void 0:r.type)==="arcgis:auth:requestCredential"){const s=i.source;this.getCredential(t).then(n=>{s.postMessage({type:"arcgis:auth:credential",credential:{expires:n.expires,server:n.server,ssl:n.ssl,token:n.token,userId:n.userId}},i.origin)}).catch(n=>{s.postMessage({type:"arcgis:auth:error",error:{name:n.name,message:n.message}},i.origin)})}})}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthLocationParams(){let t=window.location.hash;if(t){t.charAt(0)==="#"&&(t=t.substring(1));const n=Hf(t);let o=!1;if(n.access_token&&n.expires_in&&n.state&&n.hasOwnProperty("username"))try{n.state=JSON.parse(n.state),n.state.portalUrl&&(this._oAuthLocationParams=n,o=!0)}catch{}else if(n.error&&n.error_description&&(console.log("IdentityManager OAuth Error: ",n.error," - ",n.error_description),n.error==="access_denied"&&(o=!0,n.state)))try{n.state=JSON.parse(n.state)}catch{}var i;o&&(window.location.hash=((i=n.state)==null?void 0:i.hash)||"")}let r=window.location.search;if(r){r.charAt(0)==="?"&&(r=r.substring(1));const n=Hf(r);let o=!1;if(n.code&&n.state)try{n.state=JSON.parse(n.state),n.state.portalUrl&&n.state.uid&&(this._oAuthLocationParams=n,o=!0)}catch{}else if(n.error&&n.error_description&&(console.log("IdentityManager OAuth Error: ",n.error," - ",n.error_description),n.error==="access_denied"&&(o=!0,n.state)))try{n.state=JSON.parse(n.state)}catch{}if(o){var s;const a=k({},n);["code","error","error_description","message_code","persist","state"].forEach(h=>{delete a[h]});const l=Yh(a),u=window.location.pathname+(l?`?${l}`:"")+(((s=n.state)==null?void 0:s.hash)||"");window.history.replaceState(window.history.state,"",u)}}}_getOAuthToken(t,i,r,s,n){return t=t.replace(/^http:/i,"https:"),ft(`${t}/sharing/rest/oauth2/token`,{authMode:"anonymous",method:"post",query:s&&n?{grant_type:"authorization_code",code:i,redirect_uri:s,client_id:r,code_verifier:n}:{grant_type:"refresh_token",refresh_token:i,client_id:r}}).then(o=>o.data)}_getCodeChallenge(t){if(t&&globalThis.isSecureContext){const i=new TextEncoder().encode(t);return crypto.subtle.digest("SHA-256",i).then(r=>AT(new Uint8Array(r)))}return Promise.resolve(null)}_pageShowHandler(t){if(t.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const i=new B("identity-manager:user-aborted","ABORTED");this._errbackFunc(i)}}_findCredential(t,i){let r,s,n,o,a=-1;const l=i&&i.token,u=i&&i.resource,h=this._isServerRsrc(t)?"server":"portal",f=this.credentials.filter(y=>this._hasSameServerInstance(y.server,t)&&y.scope===h);if(t=u||t,f.length)if(f.length===1){if(r=f[0],o=this.findServerInfo(r.server),s=o&&o.owningSystemUrl,n=s&&this.findCredential(s,r.userId),a=this._getIdenticalSvcIdx(t,r),!l)return a===-1&&r.resources.push(t),this._addResource(t,n),r;a!==-1&&(r.resources.splice(a,1),this._removeResource(t,n))}else{let y,g;if(f.some(b=>(g=this._getIdenticalSvcIdx(t,b),g!==-1&&(y=b,o=this.findServerInfo(y.server),s=o&&o.owningSystemUrl,n=s&&this.findCredential(s,y.userId),a=g,!0))),l)y&&(y.resources.splice(a,1),this._removeResource(t,n));else if(y)return this._addResource(t,n),y}}_findOAuthInfo(t){let i=this.findOAuthInfo(t);if(!i){for(const r of this.oAuthInfos)if(this._isIdProvider(r.portalUrl,t)){i=r;break}}return i}_addResource(t,i){i&&this._getIdenticalSvcIdx(t,i)===-1&&i.resources.push(t)}_removeResource(t,i){let r=-1;i&&(r=this._getIdenticalSvcIdx(t,i),r>-1&&i.resources.splice(r,1))}_useProxy(t,i){return i&&i.isAdmin&&!so(t.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(t.tokenServiceUrl)&&String(t.currentVersion)==="10.1"&&!so(t.tokenServiceUrl,this._appOrigin)}_getOrigin(t){const i=new En(t);return i.scheme+"://"+i.host+(i.port!=null?":"+i.port:"")}_getServerInstanceRoot(t){const i=t.toLowerCase();let r=i.indexOf(this._agsRest);return r===-1&&this._isAdminResource(t)&&(r=this._agsAdmin.test(t)?t.replace(this._agsAdmin,"$1").length:t.search(this._adminSvcs)),r===-1&&(r=i.indexOf("/sharing")),r===-1&&i.substr(-1)==="/"&&(r=i.length-1),r>-1?t.substring(0,r):t}_hasSameServerInstance(t,i){return t.substr(-1)==="/"&&(t=t.slice(0,-1)),t=t.toLowerCase(),i=this._getServerInstanceRoot(i).toLowerCase(),t=this._normalizeAGOLorgDomain(t),i=this._normalizeAGOLorgDomain(i),(t=t.substr(t.indexOf(":")))===(i=i.substr(i.indexOf(":")))}_normalizeAGOLorgDomain(t){const i=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,s=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return i.test(t)?t=t.replace(i,"https://www.arcgis.com"):r.test(t)?t=t.replace(r,"https://devext.arcgis.com"):s.test(t)&&(t=t.replace(s,"https://qaext.arcgis.com")),t}_sanitizeUrl(t){const i=(Tt.request.proxyUrl||"").toLowerCase(),r=i?t.toLowerCase().indexOf(i+"?"):-1;return r!==-1&&(t=t.substring(r+i.length+1)),t=uo(t),_i(t).path}_isRESTService(t){return t.indexOf(this._agsRest)>-1}_isAdminResource(t){return this._agsAdmin.test(t)||this._adminSvcs.test(t)}_isServerRsrc(t){return this._isRESTService(t)||this._isAdminResource(t)}_isIdenticalService(t,i){let r;if(this._isRESTService(t)&&this._isRESTService(i)){const s=this._getSuffix(t).toLowerCase(),n=this._getSuffix(i).toLowerCase();if(r=s===n,!r){const o=/(.*)\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;r=s.replace(o,"$1")===n.replace(o,"$1")}}else this._isAdminResource(t)&&this._isAdminResource(i)?r=!0:this._isServerRsrc(t)||this._isServerRsrc(i)||!this._isPortalDomain(t)||(r=!0);return r}_isPortalDomain(t){const i=new En(t.toLowerCase()),r=this._portalConfig;let s=this._gwDomains.some(n=>n.regex.test(i.uri));return!s&&r&&(s=this._hasSameServerInstance(this._getServerInstanceRoot(r.restBaseUrl),i.uri)),s||Tt.portalUrl&&(s=so(i,Tt.portalUrl,!0)),s||(s=this._portals.some(n=>this._hasSameServerInstance(n,i.uri))),s=s||this._agsPortal.test(i.path),s}_isIdProvider(t,i){let r=-1,s=-1;this._gwDomains.forEach((o,a)=>{r===-1&&o.regex.test(t)&&(r=a),s===-1&&o.regex.test(i)&&(s=a)});let n=!1;if(r>-1&&s>-1&&(r===0||r===4?s!==0&&s!==4||(n=!0):r===1?s!==1&&s!==2||(n=!0):r===2?s===2&&(n=!0):r===3&&s===3&&(n=!0)),!n){const o=this.findServerInfo(i),a=o&&o.owningSystemUrl;a&&bH(o)&&this._isPortalDomain(a)&&this._isIdProvider(t,a)&&(n=!0)}return n}_getIdenticalSvcIdx(t,i){let r=-1;for(let s=0;s<i.resources.length;s++){const n=i.resources[s];if(this._isIdenticalService(t,n)){r=s;break}}return r}_getSuffix(t){return t.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")}_getTokenSvcUrl(t){let i,r,s;if(this._isRESTService(t)||this._isAdminResource(t)){const n=this._getServerInstanceRoot(t);return i=n+"/admin/generateToken",r=ft(t=n+"/rest/info",{query:{f:"json"}}).then(o=>o.data),{adminUrl:i,promise:r}}if(this._isPortalDomain(t)){let n="";if(this._gwDomains.some(o=>(o.regex.test(t)&&(n=o.tokenServiceUrl),!!n)),n||this._portals.some(o=>(this._hasSameServerInstance(o,t)&&(n=o+this._gwTokenUrl),!!n)),n||(s=t.toLowerCase().indexOf("/sharing"),s!==-1&&(n=t.substring(0,s)+this._gwTokenUrl)),n||(n=this._getOrigin(t)+this._gwTokenUrl),n){const o=new En(t).port;/^http:\/\//i.test(t)&&o==="7080"&&(n=n.replace(/:7080/i,":7443")),n=n.replace(/http:/i,"https:")}return n}if(t.toLowerCase().indexOf("premium.arcgisonline.com")!==-1)return"https://premium.arcgisonline.com/server/tokens"}_processOAuthResponseParams(t,i,r){const s=i._oAuthCred;if(t.code){const o=s.codeVerifier;return s.codeVerifier=null,s.stateUID=null,s.save(),this._getOAuthToken(r.server,t.code,i.appId,this._getRedirectURI(i,!0),o).then(a=>{const l=new hi({userId:a.username,server:r.server,token:a.access_token,expires:Date.now()+1e3*a.expires_in,ssl:a.ssl,oAuthState:t.state,_oAuthCred:s});return i.userId=l.userId,s.storage=a.persist?A1:M1,s.refreshToken=a.refresh_token,s.token=null,s.expires=a.refresh_token_expires_in?Date.now()+1e3*a.refresh_token_expires_in:null,s.userId=l.userId,s.ssl=l.ssl,s.save(),l})}const n=new hi({userId:t.username,server:r.server,token:t.access_token,expires:Date.now()+1e3*Number(t.expires_in),ssl:t.ssl==="true",oAuthState:t.state,_oAuthCred:s});return i.userId=n.userId,s.storage=t.persist?A1:M1,s.refreshToken=null,s.token=n.token,s.expires=n.expires,s.userId=n.userId,s.ssl=n.ssl,s.save(),Promise.resolve(n)}_processOAuthPopupParams(t){var i;const r=this._oAuthDfd;if(this._oAuthDfd=null,r)if(clearInterval(this._oAuthIntervalId),(i=this._oAuthOnPopupHandle)==null||i.remove(),t.error){const s=t.error==="access_denied",n=new B(s?"identity-manager:user-aborted":"identity-manager:authentication-failed",s?"ABORTED":"OAuth: "+t.error+" - "+t.error_description);r.reject(n)}else this._processOAuthResponseParams(t,r.oinfo_,r.sinfo_).then(s=>{r.resolve(s)}).catch(s=>{r.reject(s)})}_setOAuthResponseQueryString(t){t&&(t.charAt(0)==="?"&&(t=t.substring(1)),this._processOAuthPopupParams(Hf(t)))}_exchangeToken(t,i,r){return ft(`${t}/sharing/rest/oauth2/exchangeToken`,{authMode:"anonymous",method:"post",query:{f:"json",client_id:i,token:r}}).then(s=>s.data.token)}_getPlatformSelf(t,i){return t=t.replace(/^http:/i,"https:"),ft(`${t}/sharing/rest/oauth2/platformSelf`,{authMode:"anonymous",headers:{"X-Esri-Auth-Client-Id":i,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},method:"post",query:{f:"json",expiration:30},withCredentials:!0}).then(r=>r.data)}_getPortalSelf(t,i){let r;return this._gwDomains.some(s=>(s.regex.test(t)&&(r=s.customBaseUrl),!!r)),r?Promise.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:r,portalMode:"multitenant",supportsOAuth:!0}):(this._appOrigin.startsWith("https:")?t=t.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(i)&&(t=t.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),ft(t,{query:{f:"json"},authMode:"anonymous",withCredentials:!0}).then(s=>s.data))}_doPortalSignIn(t){const i=this._portalConfig,r=window.location.href,s=this.findServerInfo(t);return!(!i&&!this._isPortalDomain(r)||!(s?s.hasPortal||s.owningSystemUrl&&this._isPortalDomain(s.owningSystemUrl):this._isPortalDomain(t))||!(this._isIdProvider(r,t)||i&&(this._hasSameServerInstance(this._getServerInstanceRoot(i.restBaseUrl),t)||this._isIdProvider(i.restBaseUrl,t))||so(r,t,!0)))}_checkProtocol(t,i,r,s){let n=!0;const o=s?i.adminTokenServiceUrl:i.tokenServiceUrl;return o.trim().toLowerCase().startsWith("https:")&&!this._appOrigin.startsWith("https:")&&Qv(o)&&(n=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:t,serverInfo:i}),!n)&&r(new B("identity-manager:aborted","Aborted the Sign-In process to avoid sending password over insecure connection.")),n}_enqueue(t,i,r,s,n,o){return s||(s=vg()),s.resUrl_=t,s.sinfo_=i,s.options_=r,s.admin_=n,s.refresh_=o,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(t),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(s)):this._xoReqs.push(s):this._doSignIn(s),s.promise}_doSignIn(t){this._busy=t,this._rejectOnPersistedPageShow=!1;const i=u=>{const h=t.options_&&t.options_.resource,f=t.resUrl_,y=t.refresh_;let g=!1;this.credentials.indexOf(u)===-1&&(y&&this.credentials.indexOf(y)!==-1?(y.userId=u.userId,y.token=u.token,y.expires=u.expires,y.validity=u.validity,y.ssl=u.ssl,y.creationTime=u.creationTime,g=!0,u=y):this.credentials.push(u)),u.resources||(u.resources=[]),u.resources.includes(h||f)||u.resources.push(h||f),u.scope=this._isServerRsrc(f)?"server":"portal",u.emitTokenChange();const b=this._soReqs,w={};this._soReqs=[],b.forEach(x=>{if(!this._isIdenticalService(f,x.resUrl_)){const T=this._getSuffix(x.resUrl_);w[T]||(w[T]=!0,u.resources.push(x.resUrl_))}}),t.resolve(u),b.forEach(x=>{this._hasSameServerInstance(this._getServerInstanceRoot(f),x.resUrl_)?x.resolve(u):this._soReqs.push(x)}),this._busy=t.resUrl_=t.sinfo_=t.refresh_=null,g||this.emit("credential-create",{credential:u}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=u=>{t.reject(u),this._busy=t.resUrl_=t.sinfo_=t.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=(u,h,f,y)=>{var g,b;const w=t.sinfo_,x=!t.options_||t.options_.prompt!==!1,T=w.hasPortal&&this._findOAuthInfo(t.resUrl_);let M,F;if(u)i(new hi({userId:u,server:w.server,token:f||null,expires:y!=null?Number(y):null,ssl:!!h}));else if(window!==window.parent&&(g=this._appUrlObj.query)!=null&&g["arcgis-auth-origin"]&&(b=this._appUrlObj.query)!=null&&b["arcgis-auth-portal"]&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query["arcgis-auth-portal"]),t.resUrl_)){var D;window.parent.postMessage({type:"arcgis:auth:requestCredential"},this._appUrlObj.query["arcgis-auth-origin"]);const R=sa(window,"message",_=>{_.source===window.parent&&_.data&&(_.data.type==="arcgis:auth:credential"?(R.remove(),_.data.credential.expires<Date.now()?r(new B("identity-manager:credential-request-failed","Parent application's token has expired.")):i(new hi(_.data.credential))):_.data.type==="arcgis:auth:error"&&(R.remove(),_.data.error.name==="tokenExpiredError"?r(new B("identity-manager:credential-request-failed","Parent application's token has expired.")):r(B.fromJSON(_.data.error))))});rs((D=t.options_)==null?void 0:D.signal,()=>{R.remove()})}else if(T){let R=T._oAuthCred;if(!R){const _=new HM(T,A1),q=new HM(T,M1);_.isValid()&&q.isValid()?_.expires>q.expires?(R=_,q.destroy()):(R=q,_.destroy()):R=_.isValid()?_:q,T._oAuthCred=R}if(R.isValid()){M=new hi({userId:R.userId,server:w.server,token:R.token,expires:R.expires,ssl:R.ssl,_oAuthCred:R});const _=T.appId!==R.appId&&this._doPortalSignIn(t.resUrl_);_||R.refreshToken?(t._pendingDfd=R.refreshToken?this._getOAuthToken(w.server,R.refreshToken,R.appId).then(q=>(M.expires=Date.now()+1e3*q.expires_in,M.token=q.access_token,M)):Promise.resolve(M),t._pendingDfd.then(q=>_?this._exchangeToken(q.server,T.appId,q.token).then(W=>(q.token=W,q)).catch(()=>q):q).then(q=>{i(q)}).catch(()=>{R.destroy(),s()})):i(M)}else if(this._oAuthLocationParams&&this._hasSameServerInstance(T.portalUrl,this._oAuthLocationParams.state.portalUrl)&&(this._oAuthLocationParams.access_token||this._oAuthLocationParams.code&&this._oAuthLocationParams.state.uid===R.stateUID&&R.codeVerifier)){const _=this._oAuthLocationParams;this._oAuthLocationParams=null,t._pendingDfd=this._processOAuthResponseParams(_,T,w).then(q=>{i(q)}).catch(r)}else{const _=()=>{x?t._pendingDfd=this.oAuthSignIn(t.resUrl_,w,T,t.options_).then(i,r):(F=new B("identity-manager:not-authenticated","User is not signed in."),r(F))};this._doPortalSignIn(t.resUrl_)?t._pendingDfd=this._getPlatformSelf(w.server,T.appId).then(q=>{so(q.portalUrl,this._appOrigin,!0)?(M=new hi({userId:q.username,server:w.server,expires:Date.now()+1e3*q.expires_in,token:q.token}),i(M)):_()}).catch(_):_()}}else if(x){if(this._checkProtocol(t.resUrl_,w,r,t.admin_)){let R=t.options_;t.admin_&&(R=R||{},R.isAdmin=!0),t._pendingDfd=this.signIn(t.resUrl_,w,R).then(i,r)}}else F=new B("identity-manager:not-authenticated","User is not signed in."),r(F)},n=()=>{const u=t.sinfo_,h=u.owningSystemUrl,f=t.options_;let y,g,b,w;if(f&&(y=f.token,g=f.error,b=f.prompt),w=this._findCredential(h,{token:y,resource:t.resUrl_}),!w){for(const x of this.credentials)if(this._isIdProvider(h,x.server)){w=x;break}}if(w){const x=this.findCredential(t.resUrl_,w.userId);if(x)i(x);else if(JM(u,this._legacyFed)){const T=w.toJSON();T.server=u.server,T.resources=null,i(new hi(T))}else(t._pendingDfd=this.generateToken(this.findServerInfo(w.server),null,{serverUrl:t.resUrl_,token:w.token,signal:t.options_.signal,ssl:w.ssl})).then(T=>{i(new hi({userId:w.userId,server:u.server,token:T.token,expires:T.expires!=null?Number(T.expires):null,ssl:!!T.ssl,isAdmin:t.admin_,validity:T.validity}))},r)}else this._busy=null,y&&(t.options_.token=null),(t._pendingDfd=this.getCredential(h.replace(/\/?$/,"/sharing"),{resource:t.resUrl_,owningTenant:u.owningTenant,signal:t.options_.signal,token:y,error:g,prompt:b})).then(()=>{this._enqueue(t.resUrl_,t.sinfo_,t.options_,t,t.admin_)},x=>{t.resUrl_=t.sinfo_=t.refresh_=null,t.reject(x)})};this._errbackFunc=r;const o=t.sinfo_.owningSystemUrl,a=this._isServerRsrc(t.resUrl_),l=t.sinfo_._restInfoPms;l?l.promise.then(u=>{const h=t.sinfo_;if(h._restInfoPms){h.adminTokenServiceUrl=h._restInfoPms.adminUrl,h._restInfoPms=null,h.tokenServiceUrl=Ja("authInfo.tokenServicesUrl",u)||Ja("authInfo.tokenServiceUrl",u)||Ja("tokenServiceUrl",u),h.shortLivedTokenValidity=Ja("authInfo.shortLivedTokenValidity",u),h.currentVersion=u.currentVersion,h.owningTenant=u.owningTenant;const f=h.owningSystemUrl=u.owningSystemUrl;f&&this._portals.push(f)}a&&h.owningSystemUrl?n():s()},()=>{t.sinfo_._restInfoPms=null;const u=new B("identity-manager:server-identification-failed","Unknown resource - could not find token service endpoint.");r(u)}):a&&o?n():t.sinfo_._selfReq?t.sinfo_._selfReq.selfDfd.then(u=>{const h={};let f,y,g,b;return u&&(f=u.user&&u.user.username,h.username=f,h.allSSL=u.allSSL,y=u.supportsOAuth,g=parseFloat(u.currentVersion),u.portalMode==="multitenant"&&(b=u.customBaseUrl),t.sinfo_.currentVersion=g),t.sinfo_.webTierAuth=!!f,f&&this.normalizeWebTierAuth?this.generateToken(t.sinfo_,null,{ssl:h.allSSL}).catch(()=>null).then(w=>(h.portalToken=w&&w.token,h.tokenExpiration=w&&w.expires,h)):!f&&y&&g>=4.4&&!this._findOAuthInfo(t.resUrl_)?this._generateOAuthInfo({portalUrl:t.sinfo_.server,customBaseUrl:b,owningTenant:t.sinfo_._selfReq.owningTenant}).catch(()=>null).then(()=>h):h}).catch(()=>null).then(u=>{t.sinfo_._selfReq=null,u?s(u.username,u.allSSL,u.portalToken,u.tokenExpiration):s()}):s()}_generateOAuthInfo(t){let i,r,s=t.portalUrl;const n=t.customBaseUrl,o=t.owningTenant,a=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(a){r=window.location.href;let l=r.indexOf("?");l>-1&&(r=r.slice(0,l)),l=r.search(/\/(apps|home)\//),r=l>-1?r.slice(0,l):null}return a&&r?(this._hasTestedIfAppIsOnPortal=!0,i=ft(r+"/sharing/rest",{query:{f:"json"}}).then(()=>{this.defaultOAuthInfo=new c4({appId:"arcgisonline",popupCallbackUrl:r+"/home/oauth-callback.html"})})):i=Promise.resolve(),i.then(()=>{if(this.defaultOAuthInfo)return s=s.replace(/^http:/i,"https:"),ft(s+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:o,client_id:this.defaultOAuthInfo.appId,redirect_uri:An(this.defaultOAuthInfo.popupCallbackUrl),f:"json"}}).then(l=>{if(l.data.valid){const u=this.defaultOAuthInfo.clone();l.data.urlKey&&n?u.portalUrl="https://"+l.data.urlKey.toLowerCase()+"."+n:u.portalUrl=s,u.popup=window!==window.top||!(so(s,this._appOrigin)||this._gwDomains.some(h=>h.regex.test(s)&&h.regex.test(this._appOrigin))),this.oAuthInfos.push(u)}})})}_doOAuthSignIn(t,i,r,s){const n=r._oAuthCred,o={portalUrl:r.portalUrl};!r.popup&&r.preserveUrlHash&&window.location.hash&&(o.hash=window.location.hash),n.stateUID&&(o.uid=n.stateUID);const a={client_id:r.appId,response_type:n.codeVerifier?"code":"token",state:JSON.stringify(o),expiration:r.expiration,locale:r.locale,redirect_uri:this._getRedirectURI(r,!!n.codeVerifier)};r.forceLogin&&(a.force_login=!0),r.forceUserId&&r.userId&&(a.prepopulatedusername=r.userId),!r.popup&&this._doPortalSignIn(t)&&(a.redirectToUserOrgUrl=!0),n.codeVerifier&&(a.code_challenge=s||n.codeVerifier,a.code_challenge_method=s?"S256":"plain");const l=r.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",u=l+"?"+Yh(a);if(r.popup){const h=window.open(u,"esriJSAPIOAuth",r.popupWindowFeatures);if(h)h.focus(),this._oAuthDfd.oAuthWin_=h,this._oAuthIntervalId=setInterval(()=>{if(h.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle.remove();const f=this._oAuthDfd;if(f){const y=new B("identity-manager:user-aborted","ABORTED");f.reject(y)}}},500),this._oAuthOnPopupHandle=sa(window,["arcgis:auth:hash","arcgis:auth:location:search"],f=>{f.type==="arcgis:auth:hash"?this.setOAuthResponseHash(f.detail):this._setOAuthResponseQueryString(f.detail)});else{const f=new B("identity-manager:popup-blocked","ABORTED");this._oAuthDfd.reject(f)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:a,authorizeUrl:l,resourceUrl:t,serverInfo:i,oAuthInfo:r}):window.location.href=u}_getRedirectURI(t,i){const r=window.location.href.replace(/#.*$/,"");if(t.popup)return An(t.popupCallbackUrl);if(i){const s=_i(r);return s.query&&["code","error","error_description","message_code","persist","state"].forEach(n=>{delete s.query[n]}),tS(s.path,s.query)}return r}}wH.prototype.declaredClass="esri.identity.IdentityManagerBase";let hi=class extends bo.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],this.creationTime==null&&(this.creationTime=Date.now())}refreshToken(){const e=ht.findServerInfo(this.server),t=e&&e.owningSystemUrl,i=!!t&&this.scope==="server",r=i&&JM(e,ht._legacyFed),s=e.webTierAuth,n=s&&ht.normalizeWebTierAuth,o=E1[this.server],a=o&&o[this.userId];let l,u=this.resources&&this.resources[0],h=i&&ht.findServerInfo(t),f={username:this.userId,password:a};if(s&&!n)return;i&&!h&&ht.serverInfos.some(g=>(ht._isIdProvider(t,g.server)&&(h=g),!!h));const y=h&&ht.findCredential(h.server,this.userId);if(!i||y){if(!r){if(i)l={serverUrl:u,token:y&&y.token,ssl:y&&y.ssl};else if(n)f=null,l={ssl:this.ssl};else{if(!a){let g;return u&&(u=ht._sanitizeUrl(u),this._enqueued=1,g=ht._enqueue(u,e,null,null,this.isAdmin,this),g.then(()=>{this._enqueued=0,this.refreshServerTokens()}).catch(()=>{this._enqueued=0})),g}this.isAdmin&&(l={isAdmin:!0})}return ht.generateToken(i?h:e,i?null:f,l).then(g=>{this.token=g.token,this.expires=g.expires!=null?Number(g.expires):null,this.creationTime=Date.now(),this.validity=g.validity,this.emitTokenChange(),this.refreshServerTokens()}).catch(()=>{})}y.refreshToken()}}refreshServerTokens(){this.scope==="portal"&&ht.credentials.forEach(e=>{const t=ht.findServerInfo(e.server),i=t&&t.owningSystemUrl;e!==this&&e.userId===this.userId&&i&&e.scope==="server"&&(ht._hasSameServerInstance(this.server,i)||ht._isIdProvider(i,this.server))&&(JM(t,ht._legacyFed)?(e.token=this.token,e.expires=this.expires,e.creationTime=this.creationTime,e.validity=this.validity,e.emitTokenChange()):e.refreshToken())})}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=this.server&&ht.findServerInfo(this.server),i=t&&t.owningSystemUrl,r=i&&ht.findServerInfo(i);e===!1||i&&this.scope!=="portal"&&(!r||!r.webTierAuth||ht.normalizeWebTierAuth)||this.expires==null&&this.validity==null||this._startRefreshTimer(),this.emit("token-change")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=ht.credentials.indexOf(this);e>-1&&ht.credentials.splice(e,1),this.emitTokenChange(),this.emit("destroy")}toJSON(){const e=Ex({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,t=2**31-1;let i=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();i<0?i=0:i>t&&(i=t),this._refreshTimer=setTimeout(this.refreshToken.bind(this),i>e?i-e:i)}};c([d()],hi.prototype,"creationTime",void 0),c([d()],hi.prototype,"expires",void 0),c([d()],hi.prototype,"isAdmin",void 0),c([d()],hi.prototype,"oAuthState",void 0),c([d()],hi.prototype,"resources",void 0),c([d()],hi.prototype,"scope",void 0),c([d()],hi.prototype,"server",void 0),c([d()],hi.prototype,"ssl",void 0),c([d()],hi.prototype,"token",void 0),c([d()],hi.prototype,"tokenRefreshBuffer",void 0),c([d()],hi.prototype,"userId",void 0),c([d()],hi.prototype,"validity",void 0),hi=c([O("esri.identity.Credential")],hi);class SH extends wH{}SH.prototype.declaredClass="esri.identity.IdentityManager";const xH=new SH;LQ(xH);var $xe=Object.freeze(Object.defineProperty({__proto__:null,default:xH},Symbol.toStringTag,{value:"Module"}));const kv=-1;let Va=class extends Ee{constructor(e){super(e),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=re("mapview-transitions-duration"),this.effects=[]}set effect(e){if(this._get("effect")!==(e=e||"")){this._set("effect",e);try{this._transitionTo(u4(e))}catch(t){this._transitionTo([]),fe.getLogger(this.declaredClass).warn("Invalid Effect",{effect:e,error:t})}}}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(e){this._updateForScale(e)}get transitioning(){return this._to!==null}canTransitionTo(e){try{return this.scale>0&&d4(this._current,u4(e),this.scale)}catch{return!1}}transitionStep(e,t){this._applyTimeTransition(e),this._updateForScale(t)}end(){this._applyTimeTransition(this.duration)}_transitionTo(e){this.scale>0&&d4(this._current,e,this.scale)?(this._final=e,this._to=K(e),Cxe(this._current,this._to,this.scale),this._from=K(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._set("effects",this._current[0]?K(this._current[0].effects):[])}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const t=Math.min(1,this._time/this.duration);for(let i=0;i<this._current.length;i++){const r=this._current[i],s=this._from[i],n=this._to[i];r.scale=Exe(s.scale,n.scale,t);for(let o=0;o<r.effects.length;o++){const a=r.effects[o],l=s.effects[o],u=n.effects[o];a.interpolate(l,u,t)}}t===1&&(this._current=this._final,this._set("effects",this._current[0]?K(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(e){if(this._set("scale",e),this._current.length===0)return;const t=this._current,i=this._current.length-1;let r,s,n=1;if(t.length===1||e>=t[0].scale)s=r=t[0].effects;else if(e<=t[i].scale)s=r=t[i].effects;else for(let o=0;o<i;o++){const a=t[o],l=t[o+1];if(a.scale>=e&&l.scale<=e){n=(e-a.scale)/(l.scale-a.scale),r=a.effects,s=l.effects;break}}for(let o=0;o<this.effects.length;o++)this.effects[o].interpolate(r[o],s[o],n)}};function u4(e){const t=VP(e)||[];return Axe(t)?[{scale:kv,effects:t}]:t}function d4(e,t,i){var r,s,n,o;return(r=e[0])==null||!r.effects||(s=t[0])==null||!s.effects?!0:!((((n=e[0])==null?void 0:n.scale)===kv||((o=t[0])==null?void 0:o.scale)===kv)&&(e.length>1||t.length>1)&&i<=0)&&HB(e[0].effects,t[0].effects)}function Cxe(e,t,i){var r,s;const n=e.length>t.length?e:t,o=e.length>t.length?t:e,a=o[o.length-1],l=(r=a==null?void 0:a.scale)!=null?r:i,u=(s=a==null?void 0:a.effects)!=null?s:[];for(let h=o.length;h<n.length;h++)o.push({scale:l,effects:[...u]});for(let h=0;h<n.length;h++)o[h].scale=o[h].scale===kv?i:o[h].scale,n[h].scale=n[h].scale===kv?i:n[h].scale,WB(o[h].effects,n[h].effects)}function Exe(e,t,i){return e+(t-e)*i}function Axe(e){const t=e[0];return!!t&&"type"in t}c([d()],Va.prototype,"_to",void 0),c([d()],Va.prototype,"duration",void 0),c([d({value:""})],Va.prototype,"effect",null),c([d({readOnly:!0})],Va.prototype,"effects",void 0),c([d({readOnly:!0})],Va.prototype,"hasEffects",null),c([d({value:0})],Va.prototype,"scale",null),c([d({readOnly:!0})],Va.prototype,"transitioning",null),Va=c([O("esri.layers.effects.EffectView")],Va);function kPe(e,t,i){return t.flatten(({sublayers:s})=>s).length!==e.length?!0:!!e.some(s=>s.originIdOf("minScale")>i||s.originIdOf("maxScale")>i||s.originIdOf("renderer")>i||s.originIdOf("labelingInfo")>i||s.originIdOf("opacity")>i||s.originIdOf("labelsVisible")>i||s.originIdOf("source")>i)||!IH(e,t)}function Mxe(e,t,i){return!!e.some(r=>{const s=r.source;return!(!s||s.type==="map-layer"&&s.mapLayerId===r.id&&(!s.gdbVersion||s.gdbVersion===i.gdbVersion))||r.originIdOf("renderer")>it.SERVICE||r.originIdOf("labelingInfo")>it.SERVICE||r.originIdOf("opacity")>it.SERVICE||r.originIdOf("labelsVisible")>it.SERVICE})||!IH(e,t)}function IH(e,t){if(!e||!e.length)return!0;const i=t.slice().reverse().flatten(({sublayers:n})=>n&&n.toArray().reverse()).map(n=>n.id).toArray();if(e.length>i.length)return!1;let r=0;const s=i.length;for(const{id:n}of e){for(;r<s&&i[r]!==n;)r++;if(r>=s)return!1}return!0}function PPe(e){return!!e&&e.some(t=>t.minScale!=null||t.layerDefinition&&t.layerDefinition.minScale!=null)}const Oxe={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let bn=class extends Xs(Ee){constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(t=>{const i=QF(this.floors,t);return t.toExportImageJSON(i)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&Mxe(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",t=>this.notifyChange(Oxe[t.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(t=>t.id).join(","):"show:-1":null}get layerDefs(){var e;const t=!((e=this.floors)==null||!e.length),i=this.visibleSublayers.filter(r=>r.definitionExpression!=null||t&&r.floorInfo!=null);return i.length?JSON.stringify(i.reduce((r,s)=>{const n=QF(this.floors,s),o=N(n)?Uce(n,s):s.definitionExpression;return r[s.id]=o,r},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const t=this.layer.sublayers,i=s=>{const n=this.scale,o=n===0,a=s.minScale===0||n<=s.minScale,l=s.maxScale===0||n>=s.maxScale;s.visible&&(o||a&&l)&&(s.sublayers?s.sublayers.forEach(i):e.unshift(s))};t&&t.forEach(i);const r=this._get("visibleSublayers");return!r||r.length!==e.length||r.some((s,n)=>e[n]!==s)?e:r}toJSON(){const e=this.layer;let t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t=be(k({},t),{layers:this.layers,layerDefs:this.layerDefs}),t}};c([d({readOnly:!0})],bn.prototype,"dynamicLayers",null),c([d()],bn.prototype,"floors",void 0),c([d({readOnly:!0})],bn.prototype,"hasDynamicLayers",null),c([d()],bn.prototype,"layer",null),c([d({readOnly:!0})],bn.prototype,"layers",null),c([d({readOnly:!0})],bn.prototype,"layerDefs",null),c([d({type:Number})],bn.prototype,"scale",void 0),c([d(zye)],bn.prototype,"timeExtent",void 0),c([d({readOnly:!0})],bn.prototype,"version",null),c([d({readOnly:!0})],bn.prototype,"visibleSublayers",null),bn=c([O("esri.layers.mixins.ExportImageParameters")],bn);function kxe(e){return Q(e)||e.type==="simple"||e.type==="unique-value"||e.type==="class-breaks"||e.type==="dictionary"||e.type==="heatmap"}function Pxe(e){return"r"in e&&"g"in e&&"b"in e}function TH(e){return"h"in e&&"s"in e&&"v"in e}function $H(e){return"l"in e&&"a"in e&&"b"in e}function CH(e){return"l"in e&&"c"in e&&"h"in e}function Lxe(e){return"x"in e&&"y"in e&&"z"in e}const Rxe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],Fxe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function EH(e,t){const i=[];let r,s;if(e[0].length!==t.length)throw"dimensions do not match";const n=e.length,o=e[0].length;let a=0;for(r=0;r<n;r++){for(a=0,s=0;s<o;s++)a+=e[r][s]*t[s];i.push(a)}return i}function AH(e){const t=[e.r/255,e.g/255,e.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=EH(Rxe,t);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function bL(e){const t=EH(Fxe,[e.x/100,e.y/100,e.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function MH(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function OH(e){const t=e.l,i=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function Nxe(e){const t=e.l,i=e.a,r=e.b,s=Math.sqrt(i*i+r*r);let n=Math.atan2(r,i);return n=n>0?n:n+2*Math.PI,{l:t,c:s,h:n}}function Dxe(e){const t=e.l,i=e.c,r=e.h;return{l:t,a:i*Math.cos(r),b:i*Math.sin(r)}}function jxe(e){return MH(AH(e))}function zxe(e){return bL(OH(e))}function Vxe(e){return Nxe(MH(AH(e)))}function Uxe(e){return bL(OH(Dxe(e)))}function Bxe(e){const t=e.r,i=e.g,r=e.b,s=Math.max(t,i,r),n=s-Math.min(t,i,r);let o=s,a=n===0?0:s===t?(i-r)/n%6:s===i?(r-t)/n+2:(t-i)/n+4,l=n===0?0:n/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function qxe(e){const t=(e.h+360)%360/60,i=e.s/100,r=e.v/100*255,s=r*i,n=s*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:s,g:n,b:0};break;case 1:o={r:n,g:s,b:0};break;case 2:o={r:0,g:s,b:n};break;case 3:o={r:0,g:n,b:s};break;case 4:o={r:n,g:0,b:s};break;case 5:case 6:o={r:s,g:0,b:n};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-s),o.g=Math.round(o.g+r-s),o.b=Math.round(o.b+r-s),o}function $_(e){return Pxe(e)?e:CH(e)?Uxe(e):$H(e)?zxe(e):Lxe(e)?bL(e):TH(e)?qxe(e):e}function wL(e){return TH(e)?e:Bxe($_(e))}function LPe(e){return $H(e)?e:jxe($_(e))}function RPe(e){return CH(e)?e:Vxe($_(e))}const Gxe="http://www.w3.org/2000/svg";let Hxe=0,Wxe=0;const h4=re("android"),Jxe=re("chrome")||h4&&h4>=4?"auto":"optimizeLegibility",Zxe={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},Yxe=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let Xi={},Lt={};const p4={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},Kxe=Math.PI;let Qxe=1;function nm(e,t){const i=e*(Kxe/180);return Math.abs(t*Math.sin(i))+Math.abs(t*Math.cos(i))}function kH(e){return e.map(t=>`${t.command} ${t.values.join(" ")}`).join(" ").trim()}function PH(e,t,i,r){if(e){if(e.type==="circle")return $("circle",{fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,r:e.r});if(e.type==="ellipse")return $("ellipse",{fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry});if(e.type==="rect")return $("rect",{fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",x:e.x,y:e.y,width:e.width,height:e.height});if(e.type==="image")return $("image",{href:e.src,x:e.x,y:e.y,width:e.width,height:e.height,preserveAspectRatio:"none"});if(e.type==="path"){const s=typeof e.path!="string"?kH(e.path):e.path;return $("path",{fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",d:s})}if(e.type==="text")return $("text",{fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4","text-anchor":r.align,"text-decoration":r.decoration,kerning:r.kerning,rotate:r.rotate,"text-rendering":Jxe,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,"font-size":r.font.size,"font-family":r.font.family,x:e.x,y:e.y},e.text)}return null}function LH(e){const t={fill:"none",pattern:null,linearGradient:null};if(e){if("type"in e&&e.type==="pattern"){const i="patternId-"+ ++Hxe;t.fill=`url(#${i})`,t.pattern={id:i,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else if("type"in e&&e.type==="linear"){const i="linearGradientId-"+ ++Wxe;t.fill=`url(#${i})`,t.linearGradient={id:i,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map(r=>({offset:r.offset,color:r.color&&new Oe(r.color).toString()}))}}else if(e){const i=new Oe(e);t.fill=i.toString()}}return t}function RH(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none"};if(e&&(e.width!=null&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new Oe(e.color).toString()),e.style)){let i=null;if(e.style in p4&&(i=p4[e.style]),Array.isArray(i)){i=i.slice(0);for(let r=0;r<i.length;++r)i[r]*=e.width;if(e.cap!=="butt"){for(let r=0;r<i.length;r+=2)i[r]-=e.width,i[r]<1&&(i[r]=1);for(let r=1;r<i.length;r+=2)i[r]+=e.width}i=i.join(",")}t.dashArray=i}return t}function Xxe(e,t){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};return e&&(i.align=e.align,i.decoration=e.decoration,i.kerning=e.kerning?"auto":"0",i.rotate=e.rotated?"90":"0",i.font.style=t.style||"normal",i.font.variant=t.variant||"normal",i.font.weight=t.weight||"normal",i.font.size=t.size&&t.size.toString()||"10pt",i.font.family=t.family||"serif"),i}function FH(e){const{pattern:t,linearGradient:i}=e;if(t)return $("pattern",{id:t.id,patternUnits:"userSpaceOnUse",x:t.x,y:t.y,width:t.width,height:t.height},$("image",{x:t.image.x,y:t.image.y,width:t.image.width,height:t.image.height,href:t.image.href}));if(i){const r=i.stops.map((s,n)=>$("stop",{key:`${n}-stop`,offset:s.offset,"stop-color":s.color}));return $("linearGradient",{id:i.id,gradientUnits:"userSpaceOnUse",x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},r)}return null}function f4(e,t,i){return Bm(e,LI(e),[t,i])}function m4(e,t,i,r,s){return RI(e,LI(e),[t,i]),e[4]=e[4]*t-r*t+r,e[5]=e[5]*i-s*i+s,e}function eIe(e,t,i,r){const s=t%360*Math.PI/180;S_(e,LI(e),s);const n=Math.cos(s),o=Math.sin(s),a=e[4],l=e[5];return e[4]=a*n-l*o+r*o-i*n+i,e[5]=l*n+a*o-i*o-r*n+r,e}function us(e,t){Xi&&"left"in Xi?(Xi.left>e&&(Xi.left=e),Xi.right<e&&(Xi.right=e),Xi.top>t&&(Xi.top=t),Xi.bottom<t&&(Xi.bottom=t)):Xi={left:e,bottom:t,right:e,top:t}}function y4(e){const t=e.args,i=t.length;let r;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)us(t[r],t[r+1]);Lt.x=t[i-2],Lt.y=t[i-1];break;case"H":for(r=0;r<i;++r)us(t[r],Lt.y);Lt.x=t[i-1];break;case"V":for(r=0;r<i;++r)us(Lt.x,t[r]);Lt.y=t[i-1];break;case"m":{let s=0;for(("x"in Lt)||(us(Lt.x=t[0],Lt.y=t[1]),s=2),r=s;r<i;r+=2)us(Lt.x+=t[r],Lt.y+=t[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)us(Lt.x+=t[r],Lt.y+=t[r+1]);break;case"h":for(r=0;r<i;++r)us(Lt.x+=t[r],Lt.y);break;case"v":for(r=0;r<i;++r)us(Lt.x,Lt.y+=t[r]);break;case"c":for(r=0;r<i;r+=6)us(Lt.x+t[r],Lt.y+t[r+1]),us(Lt.x+t[r+2],Lt.y+t[r+3]),us(Lt.x+=t[r+4],Lt.y+=t[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)us(Lt.x+t[r],Lt.y+t[r+1]),us(Lt.x+=t[r+2],Lt.y+=t[r+3]);break;case"A":for(r=0;r<i;r+=7)us(t[r+5],t[r+6]);Lt.x=t[i-2],Lt.y=t[i-1];break;case"a":for(r=0;r<i;r+=7)us(Lt.x+=t[r+5],Lt.y+=t[r+6])}}function g4(e,t,i){const r=Zxe[e.toLowerCase()];let s;typeof r=="number"&&(r?t.length>=r&&(s={action:e,args:t.slice(0,t.length-t.length%r)},i.push(s),y4(s)):(s={action:e,args:[]},i.push(s),y4(s)))}function tIe(e){const t=(typeof e.path!="string"?kH(e.path):e.path).match(Yxe),i=[];if(Xi={},Lt={},!t)return null;let r="",s=[];const n=t.length;for(let a=0;a<n;++a){const l=t[a],u=parseFloat(l);isNaN(u)?(r&&g4(r,s,i),s=[],r=l):s.push(u)}g4(r,s,i);const o={x:0,y:0,width:0,height:0};return Xi&&"left"in Xi&&(o.x=Xi.left,o.y=Xi.top,o.width=Xi.right-Xi.left,o.height=Xi.bottom-Xi.top),o}function NH(e){const t={x:0,y:0,width:0,height:0};if(e.type==="circle")t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if(e.type==="ellipse")t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if(e.type==="image"||e.type==="rect")t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if(e.type==="path"){const i=tIe(e);t.x=i.x,t.y=i.y,t.width=i.width,t.height=i.height}return t}function DH(e){const t={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY;for(const n of e)i?(i.x=Math.min(i.x,n.x),i.y=Math.min(i.y,n.y),r=Math.max(r,n.x+n.width),s=Math.max(s,n.y+n.height)):(i=t,i.x=n.x,i.y=n.y,r=n.x+n.width,s=n.y+n.height);return i&&(i.width=r-i.x,i.height=s-i.y),i}function ZM(e,t,i,r,s,n,o,a,l){let u=(o&&n?nm(n,t):t)/2,h=(o&&n?nm(n,i):i)/2;if(l){const M=l[0],F=l[1];u=(o&&n?nm(n,M):M)/2,h=(o&&n?nm(n,F):F)/2}const f=e.width+r,y=e.height+r,g=ex(),b=ex();let w=!1;if(s&&f!==0&&y!==0){const M=t!==i?t/i:f/y,F=t>i?t:i;let D=1,R=1;isNaN(F)||(M>1?(D=F/f,R=F/M/y):(R=F/y,D=F*M/f)),_h(b,b,m4(g,D,R,u,h)),w=!0}const x=e.x+(f-r)/2,T=e.y+(y-r)/2;if(_h(b,b,f4(g,u-x,h-T)),!w&&(f>t||y>i)){const M=f/t>y/i,F=(M?t:i)/(M?f:y);_h(b,b,m4(g,F,F,x,T))}return n&&_h(b,b,eIe(g,n,x,T)),a&&_h(b,b,f4(g,a[0],a[1])),`matrix(${b[0]},${b[1]},${b[2]},${b[3]},${b[4]},${b[5]})`}function iIe(e,t,i){const r=e==null?void 0:e.effects.find(u=>u.type==="bloom");if(!r)return null;const{strength:s,radius:n}=r,o=s>0?n:0,a=(s+o)*t,l=4*s+1;return $("filter",{id:`bloom${i}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},$("feMorphology",{operator:"dilate",radius:(s+.5*o)*(5**(t/100)*(.4+t/100)),in:"SourceGraphic",result:"dilate"}),$("feGaussianBlur",{in:"dilate",stdDeviation:a/25,result:"blur"}),$("feGaussianBlur",{in:"blur",stdDeviation:a/50,result:"intensityBlur"}),$("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},$("feFuncR",{type:"linear",slope:l}),$("feFuncG",{type:"linear",slope:l}),$("feFuncB",{type:"linear",slope:l})),$("feMerge",null,$("feMergeNode",{in:"intensityBlur"}),$("feMergeNode",{in:"intensityBrightness"}),$("feGaussianBlur",{stdDeviation:s/10})))}function jH(e,t,i,r){const s=[],n=[],o=++Qxe,a=iIe(r==null?void 0:r.effectView,t,o);let l=null;if(a){var u;const h=r==null||(u=r.effectView)==null?void 0:u.effects.find(b=>b.type==="bloom"),f=(h.strength?h.strength+h.radius/2:0)/3,y=t+t*f,g=i+i*f;l=[Math.max(y,10),Math.max(g,10)]}for(const h of e){const f=[],y=[];let g=0,b=0,w=0;for(const T of h){const{shape:M,fill:F,stroke:D,font:R,offset:_}=T;g+=D&&D.width||0;const q=LH(F),W=RH(D),oe=M.type==="text"?Xxe(M,R):null;s.push(FH(q)),f.push(PH(M,q.fill,W,oe)),y.push(NH(M)),_&&(b+=_[0],w+=_[1])}const x=ZM(DH(y),t,i,g,r==null?void 0:r.scale,r==null?void 0:r.rotation,r==null?void 0:r.useRotationSize,[b,w],l);n.push($("g",{transform:x},f))}return r!=null&&r.useRotationSize&&r!=null&&r.rotation&&(t=nm(r==null?void 0:r.rotation,t),i=nm(r==null?void 0:r.rotation,i)),a&&(t=l[0],i=l[1]),$("svg",{xmlns:Gxe,width:t,height:i,style:"display: block;"},a,$("defs",null,s),a?$("g",{filter:`url(#bloom${o})`},n):n)}const rIe=bS();function jI(e,t,i){const r=Math.ceil(t[0]),s=Math.ceil(t[1]);if(!e.some(o=>!!o.length))return null;const n=i&&i.node||document.createElement("div");return i.opacity!=null&&(n.style.opacity=i.opacity.toString()),i.effectView!=null&&(n.style.filter=Cv(i.effectView)),rIe.append(n,jH.bind(null,e,r,s,i)),n}function sIe(e,t){e=Math.ceil(e),t=Math.ceil(t);const i=document.createElement("canvas");i.width=e,i.height=t,i.style.width=e+"px",i.style.height=t+"px";const r=i.getContext("2d");return r.clearRect(0,0,e,t),r}function nIe(e,t,i){return e?ft(e,{responseType:"image"}).then(r=>{const s=r.data,n=s.width,o=s.height,a=n/o;let l=t;if(i){const u=Math.max(n,o);l=Math.min(l,u)}return{image:s,width:a<=1?Math.ceil(l*a):l,height:a<=1?l:Math.ceil(l/a)}}):Promise.reject(new B("renderUtils: imageDataSize","href not provided."))}function oIe(e,t){return!(!e||t==="ignore")&&(t!=="multiply"||e.r!==255||e.g!==255||e.b!==255||e.a!==1)}function aIe(e,t,i,r,s){switch(s){case"multiply":e[t+0]*=i[0],e[t+1]*=i[1],e[t+2]*=i[2],e[t+3]*=i[3];break;default:{const n=wL({r:e[t+0],g:e[t+1],b:e[t+2]});n.h=r.h,n.s=r.s,n.v=n.v/100*r.v;const o=$_(n);e[t+0]=o.r,e[t+1]=o.g,e[t+2]=o.b,e[t+3]*=i[3];break}}}function lIe(e,t,i,r,s){return nIe(e,t,s).then(n=>{const o=n.width?n.width:t,a=n.height?n.height:t;if(n.image&&oIe(i,r)){let l=n.image.width,u=n.image.height;re("edge")&&/\.svg$/i.test(e)&&(l-=1,u-=1);const h=sIe(o,a);h.drawImage(n.image,0,0,l,u,0,0,o,a);const f=h.getImageData(0,0,o,a),y=[i.r/255,i.g/255,i.b/255,i.a],g=wL(i);for(let b=0;b<f.data.length;b+=4)aIe(f.data,b,y,g,r);h.putImageData(f,0,0),e=h.canvas.toDataURL("image/png")}else{const l=ht&&ht.findCredential(e);if(l&&l.token){const u=e.indexOf("?")===-1?"?":"&";e=`${e}${u}token=${l.token}`}}return{url:e,width:o,height:a}}).catch(function(){return{url:e,width:t,height:t}})}const cIe=(e,t)=>{const i=e.featuresTilingScheme.getClosestInfoForScale(e.scale).level;return t!=null&&t.levels?t.levels[i]:null};function uIe(e,t){if(!e||!("visualVariables"in e)||!e.visualVariables)return null;const i=e.visualVariables.find(s=>s.type==="size"),r=cIe(t,i);return r?new PP({field:i.field,minSize:r[2].size,minDataValue:r[2].value,maxSize:r[3].size,maxDataValue:r[3].value}):null}const dIe=/^-?(\d+)(\.(\d+))?$/i;function hIe(e,t){return e-t}function pIe(e,t){let i,r;return i=Number(e.toFixed(t)),i<e?r=i+1/10**t:(r=i,i-=1/10**t),i=Number(i.toFixed(t)),r=Number(r.toFixed(t)),[i,r]}function fIe(e,t,i,r,s){const n=O1(e,t,i,r),o=n.previous==null||n.previous<=s,a=n.next==null||n.next<=s;return o&&a||n.previous+n.next<=2*s}function lx(e){const t=String(e),i=t.match(dIe);if(i&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(t.toLowerCase().indexOf("e")>-1){const r=t.split("e"),s=r[0],n=r[1];if(s&&n){const o=Number(s);let a=Number(n);const l=a>0;l||(a=Math.abs(a));const u=lx(o);return l?(u.integer+=a,a>u.fractional?u.fractional=0:u.fractional-=a):(u.fractional+=a,a>u.integer?u.integer=1:u.integer-=a),u}}return{integer:0,fractional:0}}function O1(e,t,i,r){const s={previous:null,next:null};if(i!=null){const n=e-i,o=t-i-n;s.previous=Math.floor(Math.abs(100*o/n))}if(r!=null){const n=r-e,o=r-t-n;s.next=Math.floor(Math.abs(100*o/n))}return s}function cx(e,t={}){const i=e.slice(0),{tolerance:r=2,strictBounds:s=!1,indexes:n=i.map((o,a)=>a)}=t;n.sort(hIe);for(let o=0;o<n.length;o++){const a=n[o],l=i[a],u=a===0?null:i[a-1],h=a===i.length-1?null:i[a+1],f=lx(l).fractional;if(f){let y,g=0,b=!1;for(;g<=f&&!b;){const w=pIe(l,g);y=s&&o===0?w[1]:w[0],b=fIe(l,y,u,h,r),g++}b&&(i[a]=y)}}return i}const mIe={maximumFractionDigits:20};function yIe(e){return ha(e,mIe)}const zH="<",VH=">",gIe=oy("short-date");function UH(e,t,i,r){let s="";t===0?s=`${zH} `:t===i&&(s=`${VH} `);let n=null;return n=r?fi(e,gIe):yIe(e),s+n}const vIe=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function YM(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find(o=>o.type==="color");if(!t)return null;let i=null,r=null;if(t.stops){if(t.stops.length===1)return t.stops[0].color;i=t.stops[0].value,r=t.stops[t.stops.length-1].value}const s=i+(r-i)/2,{getColor:n}=await se(()=>Promise.resolve().then(function(){return Tp}),void 0);return n(t,s)}async function BH(e,t){const i=e.trailWidth||1,r=t||await YM(e)||e.color;return new Nn({cap:"butt",color:r,width:i})}const _Ie=new Oe([64,64,64]);function qH(e,t){const i=[],r=e.length-1;return e.length===5?i.push(0,2,4):i.push(0,r),e.map((s,n)=>i.indexOf(n)>-1?UH(s,n,r,t):null)}async function v4(e,t,i){let r=!1,s=[],n=[];if(e.stops){const u=e.stops;s=u.map(h=>h.value),r=u.some(h=>!!h.label),r&&(n=u.map(h=>h.label))}const o=s[0],a=s[s.length-1];if(o==null&&a==null)return null;const l=r?null:qH(s,i);return(await Promise.all(s.map(async(u,h)=>({value:u,color:e.type==="opacity"?await bIe(u,e,t):(await se(()=>Promise.resolve().then(function(){return Tp}),void 0)).getColor(e,u),label:r?n[h]:l[h]})))).reverse()}async function bIe(e,t,i=_Ie){const r=new Oe(i),s=(await se(()=>Promise.resolve().then(function(){return Tp}),void 0)).getOpacity(t,e);return s!=null&&(r.a=s),r}function wIe(e){let t=!1,i=[],r=[];i=e.map(a=>a.value),t=e.some(a=>!!a.label),t&&(r=e.map(a=>a.label));const s=i[0],n=i[i.length-1];if(s==null&&n==null)return null;const o=t?null:qH(i,!1);return i.map((a,l)=>({value:a,color:GH(a,e),label:t?r[l]:o[l]})).reverse()}function GH(e,t){const{startIndex:i,endIndex:r,weight:s}=SIe(e,t);if(i===r)return t[i].color;const n=Oe.blendColors(t[i].color,t[r].color,s);return new Oe(n)}function SIe(e,t){let i=0,r=t.length-1;return t.some((s,n)=>e<s.value?(r=n,!0):(i=n,!1)),{startIndex:i,endIndex:r,weight:(e-t[i].value)/(t[r].value-t[i].value)}}function xIe(e,t){let i=[];if(e&&e.type==="multipart")e.colorRamps.reverse().forEach(function(r,s){s===0?i.push({value:t.max,color:new Oe(r.toColor),label:"high"}):i.push({value:null,color:new Oe(r.toColor),label:""}),s===e.colorRamps.length-1?i.push({value:t.min,color:new Oe(r.fromColor),label:"low"}):i.push({value:null,color:new Oe(r.fromColor),label:""})});else{let r,s;e&&e.type==="algorithmic"?(r=e.fromColor,s=e.toColor):(r=[0,0,0,1],s=[255,255,255,1]),i=[{value:t.max,color:new Oe(s),label:"high"},{value:t.min,color:new Oe(r),label:"low"}]}return i}function IIe(e){let t=e.colorStops,i=t.length-1;if(t&&t[0]){const r=t[i];r&&r.ratio!==1&&(t=t.slice(0),t.push(new k0({ratio:1,color:r.color})),i++)}return t.map((r,s)=>{let n="";return s===0?n="low":s===i&&(n="high"),{color:r.color,label:n,ratio:r.ratio}}).reverse()}function TIe(e){return e=e||globalThis.location.hostname,$Ie.some(t=>{var i;return((i=e)==null?void 0:i.match(t))!=null})}function _4(e,t){return e&&(t=t||globalThis.location.hostname)?t.match(HH)!=null||t.match(JH)!=null?e.replace("static.arcgis.com","staticdev.arcgis.com"):t.match(WH)!=null||t.match(ZH)!=null?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}const HH=/^devext.arcgis.com$/,WH=/^qaext.arcgis.com$/,JH=/^[\w-]*\.mapsdevext.arcgis.com$/,ZH=/^[\w-]*\.mapsqa.arcgis.com$/,$Ie=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,HH,WH,/^jsapps.esri.com$/,JH,ZH];function YH(e,t,i,r){return e.name?e.styleName&&e.styleName==="Esri2DPointSymbolsStyle"?CIe(e,t,r):OB(e,t,r).then(s=>KH(s,e.name,t,i,r)):Promise.reject(new B("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function KH(e,t,i,r,s){const n=e.data,o={portal:i&&i.portal||zr.getDefault(),url:_i(e.baseUrl),origin:"portal-item"},a=n.items.find(y=>y.name===t);if(!a){const y=`The symbol name '${t}' could not be found`;return Promise.reject(new B("symbolstyleutils:symbol-name-not-found",y,{symbolName:t}))}let l=ed(ume(a,r),o),u=a.thumbnail&&a.thumbnail.href;const h=a.thumbnail&&a.thumbnail.imageData;TIe()&&(l=_4(l),u=_4(u));const f={portal:i.portal,url:_i(YO(l)),origin:"portal-item"};return FP(l,s).then(y=>{const g=r==="cimRef"?kB(y.data):y.data,b=IB(g,f);if(b&&pc(b)){if(u){const w=ed(u,o);b.thumbnail=new jh({url:w})}else h&&(b.thumbnail=new jh({url:`data:image/png;base64,${h}`}));e.styleUrl?b.styleOrigin=new uv({portal:i.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(b.styleOrigin=new uv({portal:i.portal,styleName:e.styleName,name:t}))}return b})}function CIe(e,t,i){const r=dme.replace(/\{SymbolName\}/gi,e.name);return FP(r,i).then(s=>{const n=kB(s.data);return IB(n,{portal:t.portal,url:_i(YO(r)),origin:"portal-item"})})}var EIe=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:KH,resolveWebStyleSymbol:YH},Symbol.toStringTag,{value:"Module"}));const wh=ir.size,k1=ir.maxSize,SL=ir.maxOutlineSize,b4=ir.lineWidth,KM=ir.tallSymbolWidth,AIe=fe.getLogger("esri.symbols.support.previewSymbol3D");function om(e){const t=e.outline,i=N(e.material)?e.material.color:null,r=N(i)?i.toHex():null;if(Q(t)||"pattern"in t&&N(t.pattern)&&t.pattern.type==="style"&&t.pattern.style==="none")return e.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const s=Ei(t.size)||0;return{color:"rgba("+(N(t.color)?t.color.toRgba():"255,255,255,1")+")",width:Math.min(s,SL),style:"pattern"in t&&N(t.pattern)&&t.pattern.type==="style"?XP(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}function MIe(e,t){const i=t&&t.resource,r=i&&i.href;if(e.thumbnail&&e.thumbnail.url)return Promise.resolve(e.thumbnail.url);if(r&&t.type!=="object")return Promise.resolve(H0e(e,t));const s=It("esri/images/Legend/legend3dsymboldefault.png");return e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)?YH(e.styleOrigin,{portal:e.styleOrigin.portal},"webRef").catch(n=>n).then(n=>{var o;return(n==null||(o=n.thumbnail)==null?void 0:o.url)||s}):Promise.resolve(s)}function aC(e,t=1){const i=e.a,r=wL(e),s=r.h,n=r.s/t,o=100-(100-r.v)/t,{r:a,g:l,b:u}=$_({h:s,s:n,v:o});return[a,l,u,i]}function ux(e){return e.type==="water"?Q(e.color)?null:e.color:Q(e.material)||Q(e.material.color)?null:e.material.color}function qt(e,t=0){const i=ux(e);if(!i){if(e.type==="fill")return null;const s=U0e.r,n=Ju(s,t);return[n,n,n,100]}const r=i.toRgba();for(let s=0;s<3;s++)r[s]=Ju(r[s],t);return r}async function QH(e,t){const i=e.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await V0e(It(`esri/symbols/patterns/${i}.png`),t.toCss(!0)),width:5,height:5}}function w4(e){return e.outline?om(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function XH(e,t){const i=ux(e);if(!i)return null;let r="rgba(";return r+=Ju(i.r,t)+",",r+=Ju(i.g,t)+",",r+=Ju(i.b,t)+",",r+i.a+");"}function QM(e,t){const i=XH(e,t);return i?"pattern"in e&&N(e.pattern)&&e.pattern.type==="style"&&e.pattern.style==="none"?null:{color:i,width:Math.min(e.size?Ei(e.size):.75,SL),style:"pattern"in e&&N(e.pattern)&&e.pattern.type==="style"?XP(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?e.join==="miter"?Ei(2):e.join:null}:{}}function ew(e,t,i){const r=.75*i;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function OIe(e){const t=e.depth,i=e.height,r=e.width;return r&&t&&i&&r===t&&r<i}function kIe(e,t,i){const r=[];if(!e)return r;switch(e.type){case"icon":{const o=t,a=t;switch(e.resource&&e.resource.primitive||mre){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:qt(e,0),stroke:om(e)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[0,0]},{command:"L",values:[o,0]},{command:"L",values:[o,a]},{command:"Z",values:[]}]},fill:qt(e,0),stroke:om(e)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[.5*o,0]},{command:"L",values:[o,a]},{command:"Z",values:[]}]},fill:qt(e,0),stroke:om(e)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*o,0]},{command:"L",values:[.5*o,a]},{command:"M",values:[0,.5*a]},{command:"L",values:[o,.5*a]}]},stroke:w4(e)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[o,a]},{command:"M",values:[o,0]},{command:"L",values:[0,a]}]},stroke:w4(e)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*a]},{command:"L",values:[.5*o,0]},{command:"L",values:[o,.5*a]},{command:"L",values:[.5*o,a]},{command:"Z",values:[]}]},fill:qt(e,0),stroke:om(e)})}break}case"object":switch(e.resource&&e.resource.primitive||bre){case"cone":{const s=ew(qt(e,0),qt(e,-.6),i?KM:t),n=x0e(t,i);r.push({shape:n[0],fill:s}),r.push({shape:n[1],fill:s});break}case"inverted-cone":{const s=qt(e,0),n=ew(s,qt(e,-.6),t),o=I0e(t);r.push({shape:o[0],fill:n}),r.push({shape:o[1],fill:s});break}case"cube":{const s=w0e(t,i);r.push({shape:s[0],fill:qt(e,0)}),r.push({shape:s[1],fill:qt(e,-.3)}),r.push({shape:s[2],fill:qt(e,-.5)});break}case"cylinder":{const s=ew(qt(e,0),qt(e,-.6),i?KM:t),n=S0e(t,i);r.push({shape:n[0],fill:s}),r.push({shape:n[1],fill:s}),r.push({shape:n[2],fill:qt(e,0)});break}case"diamond":{const s=T0e(t);r.push({shape:s[0],fill:qt(e,-.3)}),r.push({shape:s[1],fill:qt(e,0)}),r.push({shape:s[2],fill:qt(e,-.3)}),r.push({shape:s[3],fill:qt(e,-.7)});break}case"sphere":{const s=ew(qt(e,0),qt(e,-.6));s.x1=0,s.y1=0,s.x2=.25*t,s.y2=.25*t,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:s});break}case"tetrahedron":{const s=$0e(t);r.push({shape:s[0],fill:qt(e,-.3)}),r.push({shape:s[1],fill:qt(e,0)}),r.push({shape:s[2],fill:qt(e,-.6)});break}}break}return r}function zI(e){const t=typeof(e==null?void 0:e.size)=="number"?e==null?void 0:e.size:null;return t?Ei(t):null}function PIe(e){return e.type==="icon"?"multiply":"tint"}function LIe(e,t){const i=zI(t),r=t&&t.maxSize?Ei(t.maxSize):null,s=t&&t.disableUpsampling,n=e.symbolLayers,o=[];let a=0,l=0;const u=n.getItemAt(n.length-1);let h;return u&&u.type==="icon"&&(h=u.size&&Ei(u.size)),n.forEach(f=>{if(f.type!=="icon"&&f.type!=="object")return;const y=f.type==="icon"?f.size&&Ei(f.size):0,g=i||y?Math.ceil(Math.min(i||y,r||k1)):wh;if(f&&f.resource&&f.resource.href){const w=MIe(e,f).then(function(x){const T=f.get("material.color"),M=PIe(f);return lIe(x,g,T,M,s)}).then(function(x){const T=x.width,M=x.height;return a=Math.max(a,T),l=Math.max(l,M),[{shape:{type:"image",x:0,y:0,width:T,height:M,src:x.url},fill:null,stroke:null}]});o.push(w)}else{var b;let w=g;f.type==="icon"&&h&&i&&(w=g*(y/h));const x=(t==null?void 0:t.symbolConfig)==="tall"||(t==null||(b=t.symbolConfig)==null?void 0:b.isTall)||f.type==="object"&&OIe(f);a=Math.max(a,x?KM:w),l=Math.max(l,w),o.push(Promise.resolve(kIe(f,w,x)))}}),mi(o).then(function(f){const y=[];return f.forEach(function(g){g.value?y.push(g.value):g.error&&AIe.warn("error while building swatchInfo!",g.error)}),jI(y,[a,l],{node:t&&t.node,scale:!1,opacity:t&&t.opacity})})}function RIe(e,t){const i=e.symbolLayers,r=[],s=OI(e),n=zI(t),o=(t&&t.maxSize?Ei(t.maxSize):null)||SL;let a,l=0,u=0;return i.forEach((h,f)=>{if(!h||h.type!=="line"&&h.type!=="path")return;const y=[];switch(h.type){case"line":{const g=QM(h,0);if(Q(g))break;const b=g&&g.width||0;f===0&&(a=b);const w=Math.min(n||b,o),x=f===0?w:n?w*(b/a):w,T=x>b4/2?2*x:b4;u=Math.max(u,x),l=Math.max(l,T),g.width=x,y.push({shape:{type:"path",path:[{command:"M",values:[0,.5*u]},{command:"L",values:[l,.5*u]}]},stroke:g});break}case"path":{const g=Math.min(n||wh,o),b=qt(h,0),w=qt(h,-.2),x=XH(h,-.4),T=x?{color:x,width:1}:{};if(h.profile==="quad"){const M=h.width,F=h.height,D=v0e(M&&F?M/F:1,F===0,M===0),R=be(k({},T),{join:"bevel"});y.push({shape:D[0],fill:w,stroke:R}),y.push({shape:D[1],fill:w,stroke:R}),y.push({shape:D[2],fill:b,stroke:R})}else y.push({shape:SM.pathSymbol3DLayer[0],fill:w,stroke:T}),y.push({shape:SM.pathSymbol3DLayer[1],fill:b,stroke:T});u=Math.max(u,g),l=u}}r.push(y)}),Promise.resolve(jI(r,[l,u],{node:t&&t.node,scale:s,opacity:t&&t.opacity}))}async function FIe(e,t){const i=e.type==="mesh-3d",r=e.symbolLayers,s=zI(t),n=t&&t.maxSize?Ei(t.maxSize):null,o=s||wh,a=[];let l=0,u=0,h=!1;for(let f=0;f<r.length;f++){const y=r.getItemAt(f),g=[];if(i&&y.type!=="fill")continue;const b=SM.fill[0];switch(y.type){case"fill":{const w=om(y),x=Math.min(o,n||k1);l=Math.max(l,x),u=Math.max(u,x),h=!0;let T=qt(y,0);const M="pattern"in y&&y.pattern,F=ux(y);!i&&N(M)&&M.type==="style"&&M.style!=="solid"&&F&&(T=await QH(M,F)),g.push({shape:b,fill:T,stroke:w});break}case"line":{const w=QM(y,0);if(Q(w))break;const x={stroke:w,shape:b};l=Math.max(l,wh),u=Math.max(u,wh),g.push(x);break}case"extrude":{const w=k({join:"round",width:1},QM(y,-.4)),x=qt(y,0),T=qt(y,-.2),M=Math.min(o,n||k1),F=_0e(M);w.width=1,g.push({shape:F[0],fill:T,stroke:w}),g.push({shape:F[1],fill:T,stroke:w}),g.push({shape:F[2],fill:x,stroke:w});const D=wh,R=.7*wh+.5*M;l=Math.max(l,D),u=Math.max(u,R);break}case"water":{const w=ux(y),x=aC(w),T=aC(w,2),M=aC(w,3),F=b0e();h=!0,g.push({shape:F[0],fill:x}),g.push({shape:F[1],fill:T}),g.push({shape:F[2],fill:M});const D=Math.min(o,n||k1);l=Math.max(l,D),u=Math.max(u,D);break}}a.push(g)}return Promise.resolve(jI(a,[l,u],{node:t&&t.node,scale:h,opacity:t&&t.opacity}))}function NIe(e,t){if(e.symbolLayers.length===0)return Promise.reject(new B("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return LIe(e,t);case"line-3d":return RIe(e,t);case"polygon-3d":case"mesh-3d":return FIe(e,t)}return Promise.reject(new B("symbolPreview: swatchInfo3D","symbol not supported."))}var DIe=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:QH,getSizeFromOptions:zI,getSymbolLayerFill:qt,previewSymbol3D:NIe},Symbol.toStringTag,{value:"Module"}));const S4={HH:315,HL:45,LL:135,LH:225},jIe={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function zIe(e){if(!e)return;const{type:t}=e;if(t.indexOf("3d")>-1)return qt(e.symbolLayers.getItemAt(0));if(t==="simple-line"){const i=JS(e);return i&&i.color}if(e.type==="simple-marker"&&(e.style==="x"||e.style==="cross")){const i=JS(e);return i&&i.color}return z0e(e)}function VIe(e,t){const i=t.HH.label,r=t.LL.label,s=t.HL.label,n=t.LH.label;switch(e){case"HH":default:return{top:i,bottom:r,left:s,right:n};case"HL":return{top:s,bottom:n,left:r,right:i};case"LL":return{top:r,bottom:i,left:n,right:s};case"LH":return{top:n,bottom:s,left:i,right:r}}}function UIe(e){const{focus:t,infos:i,numClasses:r}=e,s=jIe[r],n={};i.forEach(a=>{n[a.value]={label:a.label,fill:zIe(a.symbol)}});const o=[];for(let a=0;a<r;a++){const l=[];for(let u=0;u<r;u++){const h=n[s[a][u]];l.push(h.fill)}o.push(l)}return{type:"relationship-ramp",numClasses:r,focus:t,colors:o,labels:VIe(t,n),rotation:eW(t)}}function eW(e){let t=S4[e];return e&&t==null&&(t=S4.HH),t||0}const XM=30,eO=12,tW=[255,255,255],iW=[200,200,200],am=[128,128,128],BIe=20,qIe=5;function GIe(e){return e.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function HIe(e){return e.declaredClass==="esri.symbols.PictureMarkerSymbol"}function WIe(e){return e.declaredClass==="esri.symbols.SimpleLineSymbol"}function JIe(e){return e.declaredClass==="esri.symbols.TextSymbol"}function ZIe(e,t){const i=e.length-1;return e.map((r,s)=>UH(r,s,i,t))}async function YIe(e,t,i,r,s,n){var o,a;const l=t.legendOptions,u=l&&l.customValues,h=await XIe(e,i),f=!!h,y=!!u,g=t.minSize!=null&&t.maxSize!=null,b=t.stops&&t.stops.length>1,w=!!t.target;if(!f||!y&&!(g||b&&!w))return;const x=OI(h);let T=null,M=null,F=null;M=x&&!b?cx([t.minDataValue,t.maxDataValue]):u||await tTe(t,h,r,s);const D=e==null?void 0:e.authoringInfo,R=(D==null?void 0:D.type)==="univariate-color-size",_=R&&(D==null?void 0:D.univariateTheme)==="above-and-below";if(!M&&b&&(M=t.stops.map(te=>te.value),T=t.stops.some(te=>!!te.label),e.type==="flow"&&(M=cx(M)),T&&(F=t.stops.map(te=>te.label))),x&&((o=M)==null?void 0:o.length)>2&&!_&&(M=[M[0],M[M.length-1]]),!M)return null;R&&((a=M)==null?void 0:a.length)!==5&&(M=nW({minSize:M[0],maxSize:M[M.length-1]}));const q=x?KIe(e,M):null,W=G0e(h),oe=T?null:ZIe(M,n);return(await Promise.all(M.map(async(te,he)=>{const ge=x?q[he]:await jf(t,h,te,r,s);return{value:te,symbol:sTe(_&&e.type==="class-breaks"?QIe(e,he):h,ge),label:T?F[he]:oe[he],size:ge,outlineSize:W}}))).reverse()}function KIe(e,t){const i=e==null?void 0:e.authoringInfo,r=(i==null?void 0:i.type)==="univariate-color-size";let s=[eO,XM];if(r){const n=t[0],o=t[t.length-1],a=eO,l=XM;s=t.map(u=>a+(u-n)/(o-n)*(l-a))}return r&&(i==null?void 0:i.univariateTheme)==="below"&&s.reverse(),s}function QIe(e,t){const i=e.classBreakInfos,r=i.length,s=r<2||!(t>=2)?i[0].symbol.clone():i[r-1].symbol.clone();return e.visualVariables.some(n=>n.type==="color")&&(s.type.indexOf("3d")>-1?rW(s):sW(s)),s}async function XIe(e,t){if(e.type==="flow")return BH(e,t);let i=null,r=null;if(e.type==="simple")i=e.symbol;else if(e.type==="class-breaks"){const s=e.classBreakInfos;i=s&&s[0]&&s[0].symbol,r=s.length>1}else if(e.type==="unique-value"){const s=e.uniqueValueInfos;i=s&&s[0]&&s[0].symbol,r=s.length>1}return!i||eTe(i)?null:(i=i.clone(),(t||r)&&(i.type.indexOf("3d")>-1?rW(i):sW(i)),i)}function eTe(e){return e?pc(e)?!!e.symbolLayers&&e.symbolLayers.some(t=>t&&t.type==="fill"):e.type.indexOf("fill")!==-1:!1}function rW(e){e.type==="line-3d"?e.symbolLayers.forEach(t=>{t.material={color:am}}):e.symbolLayers.forEach(t=>{t.type!=="icon"||t.resource&&t.resource.href?t.material={color:iW}:(t.material={color:tW},t.outline={color:am,size:1.5})})}function sW(e){const t=tP();if(e.type==="cim")gq(e,new Oe(iW));else if(e.type.indexOf("line")!==-1)e.color=am;else if(e.color=t?am:tW,e.type==="simple-marker")if(e.outline){var i,r;((i=e.outline)==null||(r=i.color)==null?void 0:r.toHex())==="#ffffff"&&(e.outline.color=am)}else e.outline={color:am,width:1.5}}async function tTe(e,t,i,r){const s=(await se(()=>Promise.resolve().then(function(){return Tp}),void 0)).getSizeRangeAtScale(e,i,r),n=s&&nW(s);if(!s&&!n)return;let o=n.map(a=>iTe(a,e,s));o=cx(o);for(let a=1;a<o.length-1;a++){const l=await rTe(e,t,o[a],o[a-1],i,r);l&&(o[a]=l[0],n[a]=l[1])}return o}function nW(e){const t=e.minSize,i=e.maxSize,r=qIe,s=(i-t)/(r-1),n=[];for(let o=0;o<r;o++)n.push(t+s*o);return n}function iTe(e,t,i){const r=i.minSize,s=i.maxSize,n=t.minDataValue,o=t.maxDataValue;let a=null;return e<=r?a=n:e>=s?a=o:a=(e-r)/(s-r)*(o-n)+n,a}async function rTe(e,t,i,r,s,n){const o=await jf(e,t,i,s,n),a=await jf(e,t,r,s,n),l=lx(i),u=l.fractional,h=BIe;let f=l.integer,y=null,g=null;i>0&&i<1&&(y=10**u,f=lx(i*=y).integer);for(let b=f-1;b>=0;b--){const w=10**b;let x=Math.floor(i/w)*w,T=Math.ceil(i/w)*w;y!=null&&(x/=y,T/=y);let M=(x+T)/2;[,M]=cx([x,M,T],{indexes:[1]});const F=await jf(e,t,x,s,n),D=await jf(e,t,T,s,n),R=await jf(e,t,M,s,n),_=O1(o,F,a,null),q=O1(o,D,a,null),W=O1(o,R,a,null);let oe=_.previous<=h,te=q.previous<=h;if(oe&&te&&(_.previous<=q.previous?(oe=!0,te=!1):(te=!0,oe=!1)),oe?g=[x,F]:te?g=[T,D]:W.previous<=h&&(g=[M,R]),g)break}return g}async function jf(e,t,i,r,s){const{getSize:n}=await se(()=>Promise.resolve().then(function(){return Tp}),void 0);return n(e,i,{scale:r,view:s,shape:t.type==="simple-marker"?t.style:null})}function sTe(e,t){const i=e.clone();if(pc(i))OI(i)||i.symbolLayers.forEach(r=>{r.type!=="fill"&&(r.size=t)});else if(GIe(i))i.size=t;else if(HIe(i)){const r=i.width,s=i.height;i.height=t,i.width=t*(r/s)}else WIe(i)?i.width=t:JIe(i)&&i.font&&(i.font.size=t);return i}fe.getLogger("esri.renderers.support.utils");function nTe(e){const i=Math.floor(Math.log10(Math.abs(e)))+1,r=i<4||i>6?4:i,s=1e6,n=Math.abs(e)>=s?"compact":"standard";return ha(e,{notation:n,minimumSignificantDigits:2,maximumSignificantDigits:r})}const jc=fe.getLogger("esri.widgets.Legend.support.ActiveLayerInfo"),oTe="https://utility.arcgis.com/sharing/tools/legend",aTe="esri.layers.ImageryLayer",lTe="esri.layers.ImageryTileLayer",cTe="esri.layers.WCSLayer",tw=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,uTe=new rt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),x4={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},iw=new sd({size:6,outline:{color:[128,128,128,.5],width:.5}}),dTe=new cl({style:"solid"});function tO(e){return e.type==="flow"}function oW(e){return e.type==="vector-field"}function aW(e){return e.type==="raster-colormap"}function lW(e){return e.type==="raster-stretch"}function cW(e){return e.type==="raster-shaded-relief"}function zf(e){return e.declaredClass==="esri.renderers.SimpleRenderer"}function Vf(e){return e.declaredClass==="esri.renderers.ClassBreaksRenderer"}function iO(e){return e.declaredClass==="esri.renderers.UniqueValueRenderer"}function uW(e){return e.declaredClass==="esri.renderers.HeatmapRenderer"}function hTe(e){return xL(e)||IL(e)||TL(e)||pTe(e)}function pTe(e){return e.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function xL(e){return e.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function IL(e){return e.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function TL(e){return e.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function dW(e){return e.declaredClass==="esri.renderers.DotDensityRenderer"}function fTe(e,t){return zf(e)||Vf(e)||iO(e)||uW(e)||dW(e)?t.type==="2d"||kxe(e):lW(e)||aW(e)||cW(e)||xL(e)||IL(e)||TL(e)||oW(e)||tO(e)}function I4(e){return e.declaredClass==="esri.layers.BuildingSceneLayer"}function mTe(e){return e.declaredClass==="esri.layers.VoxelLayer"}function yTe(e){return e.declaredClass==="esri.layers.WMSLayer"}function gTe(e){return e.declaredClass==="esri.layers.WMTSLayer"}function T4(e){return e.declaredClass==="esri.layers.MapImageLayer"}function vTe(e){return e.declaredClass==="esri.layers.TileLayer"}function _Te(e){return e.declaredClass==="esri.layers.FeatureLayer"}function og(e){return e.declaredClass===aTe}function lC(e){return e.declaredClass===lTe}function bTe(e){return e.declaredClass===cTe}function wTe(e){return e.type==="stretch-ramp"}function STe(e){const t="authoringInfo"in e&&(e==null?void 0:e.authoringInfo);return(t==null?void 0:t.type)==="univariate-color-size"}function xTe(e){const t="authoringInfo"in e&&(e==null?void 0:e.authoringInfo);return(t==null?void 0:t.type)==="univariate-color-size"&&(t==null?void 0:t.univariateTheme)==="above-and-below"}const ITe=new sd({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let Gp={},Qi=class extends Ee{constructor(e){super(e),this._handles=new Ai,this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this.children=new ke,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const e=()=>this.notifyChange("ready");this._handles.add([oa(this,"children","change",t=>{const{added:i,removed:r}=t,s=this._handles;i.forEach(n=>{const o=`activeLayerInfo-ready-watcher-${n.layer.uid}`;s.add(Pt(n,"ready",e),o)}),r.forEach(n=>s.remove(n.layer.uid)),e()})]),this.keepCacheOnDestroy||(Gp={})}destroy(){this._handles.destroy(),this._handles=null,this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Gp=null)}get effectList(){const e=this.layer;let t=null;return"effect"in e&&e.effect&&(t=new Va,t.effect=e.effect,t.end(),t.scale=this.scale),t}get opacity(){var e;const t=this.layer.opacity,i=(e=this.parent)==null?void 0:e.opacity,r=this.layer.parent,s=r&&"uid"in r?this._getParentLayerOpacity(r):null;return i!=null?i*t:s!=null?s*t:t}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view&&this.view.scale}get isScaleDriven(){const e=this.layer;if(e===null)return!1;if("effect"in e&&e.effect&&Array.isArray(e.effect)||"featureReduction"in e&&e.featureReduction&&e.featureReduction.type==="cluster")return!0;if("renderer"in e&&e.renderer){if(e.renderer.type==="dot-density")return!0;const t=e.get("renderer.valueExpression");if(tw.test(t))return!0;const i=e.get("renderer.visualVariables");if(i)return i.some(r=>this._isScaleDrivenSizeVariable(r))}return this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(e){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange("ready");const t=Array.from(e,i=>{if(_Te(i))return this._getRendererLegendElements(i.renderer,{title:i.title});if(i.featureSet&&i.featureSet.features.length){const r=i.layerDefinition,s=r&&r.drawingInfo,n=s&&fme(s.renderer),o=uTe.read(r.geometryType);return n?this._getRendererLegendElements(n,{title:i.name,geometryType:o}):(jc.warn("drawingInfo not available!"),null)}return null});try{const i=[];await mi(t).then(r=>{r.forEach(({value:s})=>s&&i.push(...s))}),this.legendElements=i,this.notifyChange("ready")}catch(i){jc.warn("error while building legend for layer!",i)}}async buildLegendElementsForRenderer(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getRendererLegendElements(e):[],this.notifyChange("ready")}catch(t){jc.warn("error while building legend for layer!",t)}}async buildLegendElementsForTools(){const e=this.layer;if(mTe(e))this._constructLegendElementsForVoxellayer();else if(gTe(e))this._constructLegendElementsForWMTSlayer();else if(yTe(e))await this._constructLegendElementsForWMSSublayers();else if(I4(e))await this._constructLegendElementsForBuildingSceneLayer();else if(T4(e)||vTe(e)||I4(e))await this._constructLegendElementsForSublayers();else{this._handles.remove("imageryLayers-watcher");let r="default";if(og(e)){var t,i;const s=e;r=((s==null||(t=s.renderingRule)==null?void 0:t.functionName)||"default")+"_"+((i=e.bandIds)!=null&&i.length?e.bandIds.join(""):"###")}await this._getLegendLayers(`${e.uid}-${r}`).then(async s=>{this.legendElements=[],this.notifyChange("ready");const n=s.map(async o=>{if(og(e)||lC(e)){const l=e.watch(["renderingRule","bandIds"],()=>Nx(async()=>{Gp.default=null,e.renderer?await this.buildLegendElementsForRenderer(e.renderer):await this.buildLegendElementsForTools()})());this._handles.add(l,"imageryLayers-watcher")}const a=this._generateSymbolTableElementForLegendLayer(o);a&&a.infos.length&&(og(e)&&(a.title=e.title),this.legendElements.push(a)),this.notifyChange("ready")});await mi(n)}).catch(s=>{jc.warn("Request to server for legend has failed!",s)})}}async _isLayerInCurrentView(){const e=this.layer,t=this.layerView,i=t&&"createQuery"in t&&"queryFeatureCount"in t;if(!i&&!(t&&"createQuery"in e&&"queryFeatureCount"in e))return!0;await wae(t,"updating");const r=i?"createQuery"in t&&t.createQuery():"createQuery"in e&&e.createQuery();return r.geometry=this.view.extent,(i?"queryFeatureCount"in t&&await t.queryFeatureCount(r):"queryFeatureCount"in e&&await e.queryFeatureCount(r))!==0}_getParentLayerOpacity(e){let t=1;const i=e.parent;return i&&"uid"in i&&(t=this._getParentLayerOpacity(i)),e.opacity*t}_isGroupActive(){const e=this.children;return!!e.length&&e.some(t=>t.ready)}_isScaleDrivenSizeVariable(e){if(e&&e.type!=="size")return!1;const t=e,i=t.minSize,r=t.maxSize;return typeof i=="object"&&i?this._isScaleDrivenSizeVariable(i):typeof r=="object"&&r?this._isScaleDrivenSizeVariable(r):!!t.expression||tw.test(t.valueExpression)}_isLayerScaleDriven(e){if("minScale"in e&&e.minScale>0||"maxScale"in e&&e.maxScale>0)return!0;if("sublayers"in e&&e.sublayers)return e.sublayers.some(i=>this._isLayerScaleDriven(i));const t=e.parent;if(e.loaded===!1&&t&&T4(t)&&"source"in e&&e.source&&e.source.type==="map-layer"){for(const i of t.sourceJSON.layers)if(i.id===e.source.mapLayerId&&(i.minScale>0||i.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxellayer(){this.legendElements=[],this._handles.remove("voxel-style-watcher");const e=this.layer;this._handles.add(Qe(e,"style",()=>this._constructLegendElementsForVoxellayer()),"voxel-style-watcher");const t=e.getVariableStyle(null),i=[];var r;if(t){if((r=t.uniqueValues)!=null&&r.length){const o=[];t.uniqueValues.forEach(a=>{a.enabled&&o.push({label:a.label||`${a.value}`,value:a.value,symbol:new cl({color:a.color,outline:null})})}),o.length&&i.push({type:"symbol-table",title:t.label,infos:o})}else if(t.transferFunction){const{colorStops:o,stretchRange:a}=t.transferFunction,l=o.toArray().reverse(),u=a.map((f,y)=>`${y===0?zH:VH} ${nTe(f)}`).reverse(),h=l.map(f=>({color:f.color,value:null,label:null}));h[0].label=u[0],h[h.length-1].label=u[1],i.push({type:"color-ramp",title:t.label,infos:h,preview:oh(l.map(f=>f.color))})}}const s=e.opacity,n=i.reduce((o,a)=>o.concat(this._getAllInfos(a)),[]).filter(o=>!(o==null||!o.symbol)).map(o=>this._getSymbolPreview(o,s));await mi(n),this.legendElements=i,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this._handles.remove("wmts-activeLayer-watcher");const e=this.layer.activeLayer;if(this._handles.add(Qe(this.layer,"activeLayer",()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher"),e.styleId&&e.styles){let t=null;e.styles.some(i=>e.styleId===i.id&&(t=i.legendUrl,!0)),t&&(this.legendElements=[{type:"symbol-table",title:e.title,infos:[{src:t,opacity:this.opacity}]}])}this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this._handles.remove("wms-sublayers-watcher");const e=this.layer;let t=null;(e.customParameters||e.customLayerParameters)&&(t=k(k({},e.customParameters),e.customLayerParameters)),this._handles.add(Qe(this.layer,"sublayers",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(e.sublayers,t),this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(e,t){const i=[];this._handles.add(e.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");const r=e.toArray();for(const s of r){const n=s.watch(["title","visible","legendEnabled"],()=>this._constructLegendElementsForWMSSublayers());if(this._handles.add(n,"wms-sublayers-watcher"),!this.respectLayerVisibility||s.visible&&s.legendEnabled){const o=await this._generateSymbolTableElementForWMSSublayer(s,t);o&&o.infos.length&&i.unshift(o)}}return i}async _generateSymbolTableElementForWMSSublayer(e,t){if(!e.legendUrl&&e.sublayers){const i=(await this._generateLegendElementsForWMSSublayers(e.sublayers,t)).filter(r=>r);return{type:"symbol-table",title:e.title,infos:i}}return this._generateSymbolTableElementForLegendUrl(e,t)}async _generateSymbolTableElementForLegendUrl(e,t){var i;let r=e.legendUrl;if(!r)return;const s={type:"symbol-table",title:e.title||e.name||e.id&&e.id+"",infos:[]};t&&(r=tS(r,t));let n=null;const o=(i=e.layer)==null?void 0:i.opacity;try{n=(await ft(r,{responseType:"image"})).data,n&&(n.style.opacity=o)}catch{}return s.infos.push({src:r,preview:n,opacity:o}),s}_getLegendLayers(e,t){const i=Gp&&Gp[e];return i?Promise.resolve(i):this._legendRequest(t).then(r=>{const s=r.layers;return Gp[e]=s,s})}_legendRequest(e){const t=this.layer;let i={f:"json",dynamicLayers:e};if(og(t)){const s=t.exportImageServiceParameters.renderingRule;if(s&&(i.renderingRule=JSON.stringify(s.rasterFunctionDefinition||s.toJSON())),t.bandIds&&(i.bandIds=t.bandIds.join()),t.raster||t.viewId||t.customParameters){const{raster:n,viewId:o,customParameters:a}=t;i=k(k({raster:n,viewId:o},i),a)}}let r=t.url.replace(/(\/)+$/,"");if("version"in t&&t.version>=10.01){const s=r.indexOf("?");s>-1?r=r.substring(0,s)+"/legend"+r.substring(s):r+="/legend"}else{const s=r.toLowerCase().indexOf("/rest/"),n=r.substring(0,s)+r.substring(s+5,r.length);r=oTe+"?soapUrl="+encodeURI(n)+"&returnbytes=true"}return ft(r,{query:i}).then(s=>s.data)}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this._handles.remove("sublayers-watcher");const e=this.layer;this._handles.add(Qe(e,"sublayers",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity),this.notifyChange("ready")}catch(t){jc.warn("Request to server for legend has failed!",t)}}async _generateLegendElementsForBuildingSublayers(e,t){let i=[];this._handles.add(e.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");const r=e.toArray();for(const s of r){const n=s.watch(["renderer","opacity","title","visible"],()=>this._constructLegendElementsForBuildingSceneLayer());if(this._handles.add(n,"sublayers-watcher"),!this.respectLayerVisibility||s.visible){const o=s&&s.opacity!=null?s.opacity:null,a=o!=null?o*t:t;if(s.type==="building-group"){const l={type:"symbol-table",title:s.title,infos:[]},u=await this._generateLegendElementsForBuildingSublayers(s.sublayers,a);l.infos.push(...u),i=[l,...i]}else s.renderer&&(i=[...await this._getRendererLegendElements(s.renderer,{title:s.title,opacity:a,sublayer:s}),...i])}}return i.filter(s=>!!s&&(!("infos"in s)||s.infos.length>0))}async _constructLegendElementsForSublayers(){this.legendElements=[],this._handles.remove("sublayers-watcher");const e=this.layer;this._handles.add(Qe(e,"sublayers",()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity),this.notifyChange("ready")}catch(t){jc.warn("Request to server for legend has failed!",t)}}async _generateLegendElementsForSublayers(e,t,i){const r=this.layer;let s=[];this._handles.add(e.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");let n=e.toArray();!i&&this.sublayerIds&&this.sublayerIds.length&&(n=this.sublayerIds.map(o=>r.findSublayerById(o)).filter(Boolean));for(const o of n){const a=o.watch("renderer, opacity, title, visible, legendEnabled",()=>this._constructLegendElementsForSublayers());if(this._handles.add(a,"sublayers-watcher"),!this.respectLayerVisibility||o.visible&&o.legendEnabled&&this._isSublayerInScale(o)){const l=o&&o.opacity!=null?o.opacity:null,u=l!=null?l*t:t;if(o.renderer&&!o.sublayers&&o.originIdOf("renderer")>it.SERVICE)await o.load(),s=[...await this._getRendererLegendElements(o.renderer,{title:o.title,opacity:u,sublayer:o}),...s];else{const h=await this._generateSymbolTableElementForSublayer(o,u,i);h&&s.unshift(h)}}}return s.filter(o=>!!o&&(!("infos"in o)||o.infos.length>0))}async _generateSymbolTableElementForSublayer(e,t,i){if(!i){i=new Map;const s=this.layer,n=e.source;let o=null;if(!(!n||n.type==="map-layer"&&n.mapLayerId===e.id&&(!n.gdbVersion||n.gdbVersion===("gdbVersion"in s&&s.gdbVersion)))||e.originIdOf("renderer")>it.SERVICE||e.originIdOf("labelingInfo")>it.SERVICE||e.originIdOf("labelsVisible")>it.SERVICE){const l=new bn({layer:this.layer});o=l.hasDynamicLayers?l.dynamicLayers:null,l.destroy()}const a=o||`${s.uid}-default`;(await this._getLegendLayers(a,o)).forEach(l=>i.set(l.layerId,l))}const r=i.get(e.id);if((!r||r!=null&&r.subLayerIds&&r.defaultVisibility)&&e.sublayers){const s=await this._generateLegendElementsForSublayers(e.sublayers,t,i);return{type:"symbol-table",title:e.title,infos:s}}return this._generateSymbolTableElementForLegendLayer(r,e,t)}_generateSymbolTableElementForLegendLayer(e,t,i){var r;if(!e||!e.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;const s=t==null?void 0:t.renderer;let n=(t==null?void 0:t.title)||e.layerName;if(s&&(!t||(t==null?void 0:t.originIdOf("renderer"))>it.SERVICE)){const l=(t==null?void 0:t.title)||this._getRendererTitle(s,t);l&&(n&&typeof l!="string"&&"title"in l&&(l.title=n),n=l)}const o={type:"symbol-table",title:n,legendType:e.legendType?e.legendType:null,infos:[]},a=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return((r=e.legendGroups)==null?void 0:r.length)>0?e.legendGroups.forEach(l=>{var u;const h={type:"symbol-table",title:l.heading,legendType:e.legendType?e.legendType:null,infos:this._generateSymbolTableElementInfosForLegendLayer(a.filter(f=>f.groupId===l.id),e.layerId,i)};((u=h.infos)==null?void 0:u.length)>0&&o.infos.push(h)}):o.infos=this._generateSymbolTableElementInfosForLegendLayer(a,e.layerId,i),o.infos.length>0?o:null}_generateSymbolTableElementInfosForLegendLayer(e,t,i){return e.map(r=>{let s=r.url;if(r.imageData&&r.imageData.length>0)s=`data:image/png;base64,${r.imageData}`;else{if(s.indexOf("http")===0)return null;s=TV(`${this.layer.url}/${t}/images/${s}`)}return{label:r.label,src:s,opacity:i==null?this.opacity:i,width:r.width,height:r.height}}).filter(r=>!!r)}_isSublayerInScale(e){const t=e.minScale||0,i=e.maxScale||0;return!(t>0&&t<this.scale||i>this.scale)}_isLegendLayerInScale(e,t){const i=t||this.layer;let r=null,s=null,n=!0;return!i.minScale&&i.minScale!==0||!i.maxScale&&i.maxScale!==0?(e.minScale===0&&i.tileInfo&&(r=i.tileInfo.lods[0].scale),e.maxScale===0&&i.tileInfo&&(s=i.tileInfo.lods[i.tileInfo.lods.length-1].scale)):(r=Math.min(i.minScale,e.minScale)||i.minScale||e.minScale,s=Math.max(i.maxScale,e.maxScale)),(r>0&&r<this.scale||s>this.scale)&&(n=!1),n}_sanitizeLegendForSublayer(e,t){if("version"in this.layer&&this.layer.version<10.1||e.length===0)return e;const i=t.renderer,r=e.some(o=>o.values);let s=null,n=null;return r&&e.some((o,a)=>(o.values||(s=a,n=o,n.label||(n.label="others")),n!=null)),i?i.type==="unique-value"?n&&(e.splice(s,1),e.push(n)):i.type==="class-breaks"&&(n&&e.splice(s,1),e.reverse(),n&&e.push(n)):n&&(e.splice(s,1),e.push(n)),e}async _getRendererLegendElements(e,t={}){return fTe(e,this.view)?hTe(e)?this._constructPointCloudRendererLegendElements(e,t):dW(e)?this._constructDotDensityRendererLegendElements(e):this._constructRendererLegendElements(e,t):(jc.warn(`Renderer of type '${e.type}' not supported!`),[])}_getPointCloudRendererTitle(e){return e.legendOptions&&e.legendOptions.title||e.field}_constructPointCloudRendererLegendElements(e,t={}){const i=t.title,r=[];let s=null,n=null;if(xL(e))s={type:"symbol-table",title:i||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach(a=>{s.infos.unshift({label:a.label||a.minValue+" - "+a.maxValue,value:[a.minValue,a.maxValue],symbol:this._getAppliedCloneSymbol(iw,a.color)})});else if(IL(e)){const a=e.stops;let l=null;if(a.length&&(a.length===1&&(l=a[0].color),!l)){const h=a[0].value,f=a[a.length-1].value;h!=null&&f!=null&&(l=GH(h+(f-h)/2,a))}s={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(iw,l||iw.color)}]};const u=wIe(e.stops);n={type:"color-ramp",title:i||this._getPointCloudRendererTitle(e),infos:u,preview:oh(u.map(h=>h.color))}}else TL(e)&&(s={type:"symbol-table",title:i||this._getPointCloudRendererTitle(e),infos:[]},e.colorUniqueValueInfos.forEach(a=>{s.infos.push({label:a.label||a.values.join(", "),value:a.values.join(", "),symbol:this._getAppliedCloneSymbol(iw,a.color)})}));s&&s.infos.length&&r.push(s),n&&n.infos.length&&r.push(n);const o=r.reduce((a,l)=>a.concat(l.infos),[]).filter(a=>!!a.symbol).map(a=>this._getSymbolPreview(a,this.opacity,{symbolConfig:{applyColorModulation:!!e.colorModulation}}));return mi(o).then(()=>r)}_getElementInfoForDotDensity(e,t){const{backgroundColor:i,outline:r,dotSize:s}=e,n=this.effectList,o=n==null?void 0:n.effects.map(g=>g.toJSON()),a=BS(o),l=s+"-"+t+"-"+i+"-"+(r&&JSON.stringify(r.toJSON()))+"-"+a,u=this._dotDensityUrlCache,h=u.has(l)?u.get(l):nve(e,t);u.set(l,h);const f={shape:{type:"image",x:0,y:0,width:h.width,height:h.height,src:h.src},fill:null,stroke:null,offset:[0,0]},y=jI([[f]],[h.width,h.height],{effectView:this.effectList});return{opacity:1,src:h.src,preview:y,width:h.width,height:h.height}}_constructDotDensityRendererLegendElements(e){const t=e.calculateDotValue(this.view.scale),i=e.legendOptions&&e.legendOptions.unit,r={type:"symbol-table",title:{value:t&&Math.round(t),unit:i||""},infos:[]};return e.attributes.forEach(s=>{const n=this._getElementInfoForDotDensity(e,s.color);n.label=s.label||s.valueExpressionTitle||s.field,r.infos.push(n)}),Promise.resolve([r])}async _constructRendererLegendElements(e,t={}){const{title:i,sublayer:r}=t,s=r||this.layer;let n=await this._loadRenderer(e);this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const o=await this._getVisualVariableLegendElements(n,s)||[],a={type:"symbol-table",title:i||this._getRendererTitle(n,s),infos:[]};let l=null,u=!1;const h=new Set;if(tO(n)&&!this._hasSizeRamp){const x=await BH(n);a.infos.push({label:null,symbol:x})}else if(STe(n)){let x=i;const T=xTe(n)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",M=o.findIndex(q=>q.type==="color-ramp"),F=M!==-1?o.splice(M,1)[0]:null,D=o.findIndex(q=>q.type==="size-ramp"),R=D!==-1?o.splice(D,1)[0]:null,_=[];F&&(x=F.title,_.push(F)),R&&(x=R.title,_.push(R)),_.length>0&&o.push({type:T,title:x,infos:_})}else if(uW(n)){const x=IIe(n);o.push({type:"heatmap-ramp",title:i,infos:x,preview:oh(x.map(T=>T.color),{effectList:this.effectList})})}else if(iO(n)){const x=n&&n.authoringInfo;if(x&&x.type==="relationship"){const{focus:T,numClasses:M,field1:F,field2:D}=x;if(M&&F&&D){const R=[F,D];let _=eW(T)||0;for(const W of R){const{field:oe,normalizationField:te,label:he}=W,ge=he||{field:this._getFieldAlias(oe,s),normField:te&&this._getFieldAlias(te,s)},Te=ITe.clone();Te.angle=_,a.infos.push({label:ge,symbol:Te}),h.add(Te),_+=90}const q=UIe({focus:T,numClasses:M,infos:n.uniqueValueInfos});o.unshift(q)}}else{const T=n.field;n.uniqueValueInfos.forEach(M=>{M.symbol&&a.infos.push({label:M.label||this._getDomainName(T,M.value,s)||M.value,value:M.value,symbol:M.symbol})})}n.defaultSymbol&&(a.infos.push({label:n.defaultLabel||"others",symbol:n.defaultSymbol}),u=!0)}else if(Vf(n))l=this._isUnclassedRenderer(n),(!l||!this._hasSizeRamp)&&(n.classBreakInfos.forEach(x=>{x.symbol&&a.infos.unshift({label:x.label||(l?null:x.minValue+" - "+x.maxValue),value:[x.minValue,x.maxValue],symbol:x.symbol})}),l&&(a.title=null),this._updateInfosforClassedSizeRenderer(n,a.infos)),n.defaultSymbol&&!l&&(a.infos.push({label:n.defaultLabel||"others",symbol:n.defaultSymbol}),u=!0);else if(lW(n))if(lC(this.layer)||bTe(this.layer)){const x=this._constructTileImageryStretchRendererElements(n);wTe(x)?o.push(x):a.infos=x}else{const x=this.layer;let T,M;n.statistics&&n.statistics.length&&(T=n.statistics[0].min!=null?n.statistics[0].min:n.statistics[0][0],M=n.statistics[0].max!=null?n.statistics[0].max:n.statistics[0][1]);let F=[];const D=x.renderingRule?await x.generateRasterInfo(x.renderingRule):x.serviceRasterInfo,R=D.keyProperties.BandProperties,_=x4[x.rasterInfo.pixelType.toLowerCase()];D.bandCount===1||x.bandIds&&x.bandIds.length===1?(T=T!=null?T:D.statistics?D.statistics[x.bandIds[0]].min:_[0],M=M!=null?M:D.statistics?D.statistics[x.bandIds[0]].max:_[1],T||M?o.push(this._getStretchLegendElements(n,{min:T,max:M})):this._getServerSideLegend()):D.bandCount>=3?R&&R.length>=D.bandCount?x.bandIds&&x.bandIds.length===3?(F=x.bandIds.map(q=>R[q].BandName),a.infos=this._createSymbolTableElementMultiBand(F)):x.format==="lerc"?(F=[0,1,2].map(q=>R[q].BandName),a.infos=this._createSymbolTableElementMultiBand(F)):this._getServerSideLegend():x.format==="lerc"?(F=["band1","band2","band3"],a.infos=this._createSymbolTableElementMultiBand(F)):this._getServerSideLegend():this._getServerSideLegend()}else if(aW(n))n.colormapInfos.forEach(x=>{a.infos.push({label:x.label,value:x.value,symbol:this._getAppliedCloneSymbol(dTe,x.color)})});else if(zf(n)){let x=n.symbol;switch(t.geometryType){case"point":x="pointSymbol"in s&&s.pointSymbol;break;case"polyline":x="lineSymbol"in s&&s.lineSymbol;break;case"polygon":x="polygonSymbol"in s&&s.polygonSymbol}n.symbol&&!this._hasSizeRamp&&a.infos.push({label:n.label,symbol:x})}else if(oW(n)){n.outputUnit&&(this.title="("+n.toJSON().outputUnit+")"),a.title=n.attributeField;const x=n.getClassBreakInfos();x!=null&&x.length?x.forEach(T=>{a.infos.push({label:T.minValue+" - "+T.maxValue,symbol:T.symbol})}):a.infos.push({label:n.attributeField,symbol:n.getDefaultSymbol()})}else cW(n)&&o.push(this._getStretchLegendElements(n,{min:0,max:255}));const f=n.defaultSymbol;!f||u||zf(n)||l&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||o.push({type:"symbol-table",infos:[{label:n.defaultLabel||"others",symbol:f}]}),a.infos.length&&o.unshift(a);const y=t.opacity==null?this.opacity:t.opacity,g=this._isTallSymbol("visualVariables"in n&&n.visualVariables),b=og(this.layer)||lC(this.layer),w=o.reduce((x,T)=>x.concat(this._getAllInfos(T)),[]).filter(x=>!(x==null||!x.symbol)).map(x=>this._getSymbolPreview(x,y,{isDefault:x.symbol===f,applyScaleDrivenSize:!h.has(x.symbol),symbolConfig:{isTall:g,isSquareFill:b},effectList:h.has(x.symbol)?null:this.effectList}));return n=null,await mi(w),o}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(e){const t=e==null?void 0:e.infos;return t?t.reduce((i,r)=>i.concat(this._getAllInfos(r)),[]):[e]}_constructTileImageryStretchRendererElements(e){var t,i;const r=this.layer,s=r.rasterInfo,n=s.bandCount||e.statistics.length;let o,a,l=[];const u=s.keyProperties&&s.keyProperties.BandProperties,h=e!=null&&(t=e.statistics)!=null&&t.length?e.statistics:s==null?void 0:s.statistics;if(h)o=h[0].min!==void 0?h[0].min:h[0][0],a=h[0].max||h[0][1];else{const y=x4[r.rasterInfo.pixelType.toLowerCase()];o=y[0],a=y[1]}if(r.hasStandardTime()&&(o=r.getStandardTimeValue(o),a=r.getStandardTimeValue(a)),s.bandCount===1||((i=r.bandIds)==null?void 0:i.length)===1)return this._getStretchLegendElements(e,{min:o,max:a});function f(y){var g;const b=(r!=null&&(g=r.bandIds)!=null&&g.length?r.bandIds:Array.from(Array(Math.min(s.bandCount,3)).keys())).map(w=>y&&y[w]&&y[w].BandName||"band"+(w+1));return b.length<3?b.push(b[1]):b.length>3&&b.splice(3),b}return l=u&&u.length>=n?f(u):f(),this._createSymbolTableElementMultiBand(l)}_getStretchLegendElements(e,t){const i=e.colorRamp,r=xIe(i,t);return{type:"stretch-ramp",title:"",infos:r,preview:oh(r.map(s=>s.color))}}async _getSizeLegendElement(e,t,i,r){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(t):e,infos:await YIe(i,t,await YM(i),this.scale,this.view.type,r)}}_createSymbolTableElementMultiBand(e){const t=[],i=["red","green","blue"];return e.forEach((r,s)=>{t.push({label:{colorName:i[s],bandName:r},src:vIe[s],opacity:1})}),t}_updateInfosforClassedSizeRenderer(e,t){const i=e.authoringInfo&&e.authoringInfo.type==="class-breaks-size",r=e.classBreakInfos.some(s=>OI(s.symbol));if(i&&r){const s=XM,n=eO,o=e.classBreakInfos.length,a=(s-n)/(o>1?o-1:o);t.forEach((l,u)=>{l.size=s-a*u})}}_isTallSymbol(e){let t=!1,i=!1;if(e)for(let r=0;r<e.length&&(!t||!i);r++){const s=e[r];s.type==="size"&&(s.axis==="height"&&(t=!0),s.axis==="width-and-depth"&&(i=!0))}return t&&i}async _getSymbolPreview(e,t,i){let r=i!=null&&i.isDefault||e.size!=null||!this._hasSizeRamp?e.size:il(ir.size);if(this._scaleDrivenSizeVariable&&i!=null&&i.applyScaleDrivenSize){const{getSize:s}=await se(()=>Promise.resolve().then(function(){return Tp}),void 0);r=s(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:e.symbol.type==="simple-marker"?e.symbol.style:null})}return xq(e.symbol,{size:r,opacity:t,scale:!1,symbolConfig:i==null?void 0:i.symbolConfig,effectView:i==null?void 0:i.effectList}).then(s=>(e.preview=s,e)).catch(()=>(e.preview=null,e))}async _loadRenderer(e){var t,i;const r=[],s=this.layer;e=e.clone(),this._hasClusterSizeVariable=!1;const n="visualVariables"in e&&((t=e.visualVariables)==null?void 0:t.some(a=>a.type==="size"&&a.target!=="outline"&&!tw.test(a.valueExpression)));if(e&&"visualVariables"in e&&!n&&"featureReduction"in s&&((i=s.featureReduction)==null?void 0:i.type)==="cluster"){const a=this.layerView._effectiveRenderer,l=uIe(a,this.view);if(l){const u=s.featureReduction;if("clusterMinSize"in u&&"clusterMaxSize"in u){const{clusterMinSize:f,clusterMaxSize:y}=u;l.legendOptions=new fB({showLegend:f!==y})}const h=e.visualVariables||[];e.visualVariables=h.concat([l]),this._hasClusterSizeVariable=!0}}const o=await YM(e);if(Vf(e)||iO(e)){const a=(e.classBreakInfos||e.uniqueValueInfos).map(l=>this._fetchSymbol(l.symbol,o).then(u=>{l.symbol=u}).catch(()=>{l.symbol=null}));Array.prototype.push.apply(r,a)}return r.push(this._fetchSymbol(e.symbol||e.defaultSymbol,e.defaultSymbol?null:o).then(a=>{this._applySymbolToRenderer(e,a,zf(e))}).catch(()=>{this._applySymbolToRenderer(e,null,zf(e))})),mi(r).then(()=>e)}_applySymbolToRenderer(e,t,i){i?e.symbol=t:e.defaultSymbol=t}_fetchSymbol(e,t){if(!e)return Promise.reject();if(e.type==="web-style"){const i=e.portal,r=i&&i.url,s=i&&i.user&&i.user.username,n=e.name+"-"+e.styleName+"-"+e.styleUrl+"-"+r+"-"+s,o=this._webStyleSymbolCache;return o.has(n)||(this.view.type==="2d"?o.set(n,e.fetchCIMSymbol()):o.set(n,e.fetchSymbol())),o.get(n).then(a=>this._getAppliedCloneSymbol(a,t)).catch(()=>(jc.warn("Fetching web-style failed!"),Promise.reject()))}return Promise.resolve(this._getAppliedCloneSymbol(e,t))}_getAppliedCloneSymbol(e,t){if(!e||!t)return e;const i=e.clone(),r=t&&t.toRgba();return i.type.indexOf("3d")>-1?this._applyColorTo3dSymbol(i,r):i.type==="cim"?gq(i,t):i.color&&(i.color=new Oe(r||i.color)),i}_applyColorTo3dSymbol(e,t){t&&e.symbolLayers.forEach(i=>{i&&(i.material||(i.material={}),i.material.color=new Oe(t))})}async _getVisualVariableLegendElements(e,t){if(!("visualVariables"in e)||!e.visualVariables||e.type==="vector-field")return null;const i=e.visualVariables,r=[],s=[],n=[];for(const h of i)h.type==="color"?r.push(h):h.type==="size"?s.push(h):h.type==="opacity"&&n.push(h);const o=[...r,...s,...n];let a,l;if(r.length===0&&Vf(e)&&e.classBreakInfos&&e.classBreakInfos.length===1){const h=e.classBreakInfos[0];a=h&&h.symbol}if(r.length===0&&zf(e)&&(a=e.symbol),a)if(a.type.indexOf("3d")>-1){const h=a.symbolLayers.getItemAt(0);h.type==="water"?N(h.color)&&(l=h.color):N(h.material)&&N(h.material.color)&&(l=h.material.color)}else a.url||(l=a.color);const u=this.effectList;return(await Promise.all(o.map(async h=>{if(!h.legendOptions||h.legendOptions.showLegend!==!1){const f=tO(e)?h.field:this._getRampTitle(h,t);let y=null;const g="getField"in t&&t.getField&&t.getField(h.field),b=g&&uE(g);if(h.type==="color"){const w=await v4(h,null,b);y={type:"color-ramp",title:f,infos:w,preview:oh(w.map(x=>x.color),{effectList:u})},this._hasColorRamp||(this._hasColorRamp=!(y.infos==null||!y.infos.length))}else if(h.type==="size"&&h.target!=="outline")tw.test(h.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=h):(y=await this._getSizeLegendElement(f,h,e,b),this._hasSizeRamp||(this._hasSizeRamp=!(y.infos==null||!y.infos.length)));else if(h.type==="opacity"){const w=await v4(h,l,b);y={type:"opacity-ramp",title:f,infos:w,preview:oh(w.map(x=>x.color),{effectList:u})},this._hasOpacityRamp||(this._hasOpacityRamp=!(y.infos==null||!y.infos.length))}return y&&y.infos?y:null}}))).filter(h=>!!h)}_getDomainName(e,t,i){if(e&&typeof e!="function"){const r="getField"in i&&i.getField&&i.getField(e),s=r&&"getFieldDomain"in i&&i.getFieldDomain?i.getFieldDomain(r.name):null;return s&&s.type==="coded-value"?s.getName(t):null}return null}_getClusterTitle(e){const t=this.layer,i=e.field;if("featureReduction"in t&&t.featureReduction&&t.featureReduction.type==="cluster"){const r=t.featureReduction,s="popupTemplate"in r&&r.popupTemplate,n=s&&s.fieldInfos;if(n){for(const o of n)if(o.fieldName===i)return i==="cluster_count"?o.label||{showCount:!0}:o.label}}return{showCount:!0}}_getRampTitle(e,t){let i=e.field,r=e.normalizationField,s=!1,n=!1,o=!1,a=null;i=typeof i=="function"?null:i,r=typeof r=="function"?null:r;const l=e.legendOptions&&e.legendOptions.title;if(l!=null)a=l;else if(e.valueExpressionTitle)a=e.valueExpressionTitle;else{if("renderer"in t&&t.renderer&&"authoringInfo"in t.renderer&&t.renderer.authoringInfo&&t.renderer.authoringInfo.visualVariables){const u=t.renderer.authoringInfo.visualVariables;for(let h=0;h<u.length;h++){const f=u[h];if(f.type==="color"){if(f.style==="ratio"){s=!0;break}if(f.style==="percent"){n=!0;break}if(f.style==="percent-of-total"){o=!0;break}}}}a={field:i&&this._getFieldAlias(i,t),normField:r&&this._getFieldAlias(r,t),ratio:s,ratioPercent:n,ratioPercentTotal:o}}return a}_getRendererTitle(e,t){const i=e;if(i.legendOptions&&i.legendOptions.title)return i.legendOptions.title;if(i.valueExpressionTitle)return i.valueExpressionTitle;let r=i.field,s=null,n=null;Vf(i)&&(s=i.normalizationField,n=i.normalizationType==="percent-of-total"),r=typeof r=="function"?null:r,s=typeof s=="function"?null:s;let o=null;return(r||s)&&(o={field:r&&this._getFieldAlias(r,t),normField:s&&this._getFieldAlias(s,t),normByPct:n}),o}_getFieldAlias(e,t){const i="popupTemplate"in t&&t.popupTemplate,r=i&&i.fieldInfos;let s=null;r&&r.some(l=>e===l.fieldName&&(s=l,!0));let n=null;"getField"in t&&t.getField?n=t.getField(e):"fieldsIndex"in t&&t.fieldsIndex&&(n=t.fieldsIndex.get(e));const o=s||n;let a=null;return o&&(a=s&&s.label||n&&n.alias||"name"in o&&o.name||"fieldName"in o&&o.fieldName),a}_isUnclassedRenderer(e){const t=e.visualVariables;let i=!1;return Vf(e)&&e.classBreakInfos&&e.classBreakInfos.length===1&&t&&(i=e.field?t.some(r=>!(!r||e.field!==r.field||(e.normalizationField||r.normalizationField)&&e.normalizationField!==r.normalizationField)):!!t.length),i}};c([d()],Qi.prototype,"children",void 0),c([d({readOnly:!0})],Qi.prototype,"effectList",null),c([d()],Qi.prototype,"layerView",void 0),c([d()],Qi.prototype,"layer",void 0),c([d()],Qi.prototype,"legendElements",void 0),c([d({readOnly:!0})],Qi.prototype,"opacity",null),c([d()],Qi.prototype,"parent",void 0),c([d({readOnly:!0,dependsOn:[]})],Qi.prototype,"ready",null),c([d()],Qi.prototype,"hideLayersNotInCurrentView",void 0),c([d()],Qi.prototype,"keepCacheOnDestroy",void 0),c([d()],Qi.prototype,"respectLayerVisibility",void 0),c([d({readOnly:!0})],Qi.prototype,"scale",null),c([d()],Qi.prototype,"sublayerIds",void 0),c([d({readOnly:!0})],Qi.prototype,"isScaleDriven",null),c([d()],Qi.prototype,"title",void 0),c([d({readOnly:!0,dependsOn:["ready"],value:0})],Qi.prototype,"version",null),c([d()],Qi.prototype,"view",void 0),Qi=c([O("esri.widgets.Legend.support.ActiveLayerInfo")],Qi);const hW=Qi,Ed={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},pW=ke.ofType(hW),TTe=["esri.layers.BuildingSceneLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer"],fW="view.basemapView.baseLayerViews",mW="view.groundView.layerViews",yW="view.basemapView.referenceLayerViews",$Te=[fW,mW,"view.layerViews",yW];let io=class extends Ee{constructor(e){super(e),this._handles=new Ai,this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new ke,this.activeLayerInfos=new pW,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this._handles.add(Pt(this,"view",this._viewHandles),Ed.view),this._handles.add(Xv(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}_viewHandles(){this._handles.remove(Ed.state),this.view&&this._handles.add(Pt(this,"state",this._stateHandles),Ed.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this._handles.remove([Ed.allLayerViews,Ed.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this._handles.remove(e);const t=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],t&&t.parent&&t.parent.children.remove(t)}_watchPropertiesAndAllLayerViews(){const{allLayerViews:e}=this.view;e.length&&this._refresh(),this._handles.add(e.on("change",this._allLayerViewsChangeHandle.bind(this)),Ed.allLayerViews),this._handles.add(Qe(this,"layerInfos, basemapLegendVisible, groundLegendVisible",this._propertiesChangeHandle.bind(this)),Ed.legendProperties)}_allLayerViewsChangeHandle(e){e.removed.forEach(t=>this._destroyViewActiveLayerInfo(t.uid)),this._refresh()}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){if(e.length<2)return;const t=[];e.forEach(r=>{if(!r.parent){const s=r.layer.parent,n=s&&"uid"in s&&this._layerViewByLayerId[s.uid],o=n&&this._activeLayerInfosByLayerViewId[n.uid];o&&e.indexOf(o)!==-1&&(t.push(r),r.parent=o,o.children.add(r),this._sortActiveLayerInfos(o.children))}}),e.removeMany(t);const i={};this.view.allLayerViews.forEach((r,s)=>i[r.layer.uid]=s),e.sort((r,s)=>{const n=i[r.layer.uid]||0;return(i[s.layer.uid]||0)-n})}_generateLayerViews(){const e=[];return $Te.filter(this._filterLayerViews,this).map(this.get,this).filter(t=>t!=null).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const t=!this.basemapLegendVisible&&(e===fW||e===yW),i=!this.groundLegendVisible&&e===mW;return!t&&!i}_collectLayerViews(e,t){const i=r=>(r&&r.forEach(s=>{t.push(s),i(s[e])}),t);return i}_filterLayerViewsByLayerInfos(e){const t=this.layerInfos;return!t||!t.length||t.some(i=>this._hasLayerInfo(i,e))}_hasLayerInfo(e,t){const i=this._isLayerUIDMatching(e.layer,t.layer.uid);return i&&(this._layerInfosByLayerViewId[t.uid]=e),i}_isLayerUIDMatching(e,t){return e&&(e.uid===t||this._hasLayerUID(e.layers,t))}_hasLayerUID(e,t){return e&&e.some(i=>this._isLayerUIDMatching(i,t))}_isLayerViewSupported(e){return!!TTe.includes(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this._handles.remove(e.uid),this._handles.add(Qe(e,"legendEnabled, layer.legendEnabled",()=>this._layerActiveHandle(e)),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this._handles.remove(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){return!this.respectLayerVisibility||e.legendEnabled&&e.get("layer.legendEnabled")}_buildActiveLayerInfo(e){var t;const i=e.layer,r=e.uid,s=this._layerInfosByLayerViewId[r];let n=this._activeLayerInfosByLayerViewId[r];if(!n){const a=s&&s.title!==void 0&&s.layer.uid===i.uid;n=new hW({layer:i,layerView:e,title:a?s.title:i.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:s&&s.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[r]=n}const o=i.parent&&"uid"in i.parent&&this._layerViewByLayerId[(t=i.parent)==null?void 0:t.uid];if(n.parent=this._activeLayerInfosByLayerViewId[o==null?void 0:o.uid],!this._handles.has(r)){const a=[Qe(i,"title",l=>this._titleHandle(l,n)),Qe(i,"renderer?, opacity, pointSymbol?, lineSymbol?, polygonSymbol?",()=>this._constructLegendElements(n)),TU(this.view,"stationary",()=>this._scaleHandle(n)),Qe(e,"_effectiveRenderer",()=>this._constructLegendElements(n)),Qe(i,"effect",()=>this._constructLegendElements(n))];if(this.respectLayerVisibility){const l=Qe(e,"legendEnabled",h=>this._legendEnabledHandle(h,n)),u=Qe(i,"legendEnabled",h=>this._legendEnabledHandle(h,n));a.push(l,u)}this._handles.add(a,r)}n.isScaleDriven||this._constructLegendElements(n),this._addActiveLayerInfo(n)}_titleHandle(e,t){t.title=e,this._constructLegendElements(t)}_legendEnabledHandle(e,t){e?this._addActiveLayerInfo(t):this._removeActiveLayerInfo(t)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){const{layerView:t,layer:i}=e;if(this._isLayerActive(t)&&this.activeLayerInfos.indexOf(e)===-1){const s=e.parent;if(s)s.children.indexOf(e)===-1&&s.children.push(e),this._sortActiveLayerInfos(s.children);else{var r;const n=(r=this.layerInfos)==null?void 0:r.some(o=>o.layer.uid===i.uid);i.parent&&"uid"in i.parent&&!n?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const n=[];this._activeLayerInfosWithNoParent.forEach(o=>{const a=o.layer.parent,l=a&&"uid"in a&&this._layerViewByLayerId[a==null?void 0:a.uid],u=this._activeLayerInfosByLayerViewId[l==null?void 0:l.uid];u&&(n.push(o),o.parent=u)}),n.length&&(this._activeLayerInfosWithNoParent.removeMany(n),n.forEach(o=>this._addActiveLayerInfo(o)))}}}_removeActiveLayerInfo(e){const t=e.parent;t?t.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){const t=e.layer;"featureCollections"in t&&t.featureCollections?e.buildLegendElementsForFeatureCollections(t.featureCollections):"renderer"in t&&t.renderer?e.buildLegendElementsForRenderer(t.renderer):"url"in t&&t.url?e.buildLegendElementsForTools():e.children.forEach(i=>this._constructLegendElements(i))}};c([d({type:pW})],io.prototype,"activeLayerInfos",void 0),c([d()],io.prototype,"basemapLegendVisible",void 0),c([d()],io.prototype,"groundLegendVisible",void 0),c([d()],io.prototype,"hideLayersNotInCurrentView",void 0),c([d()],io.prototype,"keepCacheOnDestroy",void 0),c([d()],io.prototype,"respectLayerVisibility",void 0),c([d()],io.prototype,"layerInfos",void 0),c([d({readOnly:!0})],io.prototype,"state",null),c([d()],io.prototype,"view",void 0),io=c([O("esri.widgets.Legend.LegendViewModel")],io);const CTe=io,ETe="http://www.w3.org/2000/svg",Xt={diamondContainer:"esri-relationship-ramp--diamond__container",diamondLeftCol:"esri-relationship-ramp--diamond__left-column",diamondRightCol:"esri-relationship-ramp--diamond__right-column",diamondMidCol:"esri-relationship-ramp--diamond__middle-column",diamondMidColLabel:"esri-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"esri-relationship-ramp--diamond__middle-column--ramp",squareTable:"esri-relationship-ramp--square__table",squareTableRow:"esri-relationship-ramp--square__table-row",squareTableCell:"esri-relationship-ramp--square__table-cell",squareTableLabel:"esri-relationship-ramp--square__table-label",squareTableLabelLeftBottom:"esri-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"esri-relationship-ramp--square__table-label--right-bottom",squareTableLabelLeftTop:"esri-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"esri-relationship-ramp--square__table-label--right-top"};function gW(e,t,i,r){const{focus:s,labels:n}=e,o=!!s,a=ATe(e,t,i,r),l={justifyContent:"center"},u=Is();return o?$("div",{class:Xt.diamondContainer,styles:l},$("div",{class:Xt.diamondLeftCol},u?n.right:n.left),$("div",{class:Xt.diamondMidCol},$("div",{class:Xt.diamondMidColLabel},n.top),a,$("div",{class:Xt.diamondMidColLabel},n.bottom)),$("div",{class:Xt.diamondRightCol},u?n.left:n.right)):$("div",{class:Xt.squareTable},$("div",{class:Xt.squareTableRow},$("div",{class:Kf(Xt.squareTableCell,Xt.squareTableLabel,Xt.squareTableLabelRightBottom)},u?n.top:n.left),$("div",{class:Xt.squareTableCell}),$("div",{class:Kf(Xt.squareTableCell,Xt.squareTableLabel,Xt.squareTableLabelLeftBottom)},u?n.left:n.top)),$("div",{class:Xt.squareTableRow},$("div",{class:Xt.squareTableCell}),a,$("div",{class:Xt.squareTableCell})),$("div",{class:Xt.squareTableRow},$("div",{class:Kf(Xt.squareTableCell,Xt.squareTableLabel,Xt.squareTableLabelRightTop)},u?n.right:n.bottom),$("div",{class:Xt.squareTableCell}),$("div",{class:Kf(Xt.squareTableCell,Xt.squareTableLabel,Xt.squareTableLabelLeftTop)},u?n.bottom:n.right)))}function $4(e,t,i){const r=`${i}_arrowStart`,s=`${i}_arrowEnd`,n=e==="left",o={markerStart:null,markerEnd:null};switch(t){case"HL":n?o.markerStart=`url(#${s})`:o.markerEnd=`url(#${r})`;break;case"LL":o.markerStart=`url(#${s})`;break;case"LH":n?o.markerEnd=`url(#${r})`:o.markerStart=`url(#${s})`;break;default:o.markerEnd=`url(#${r})`}return o}function ATe(e,t,i,r,s=60){const{focus:n,numClasses:o,colors:a,rotation:l}=e,u=!!n,h=Math.sqrt(s**2+s**2)+(u?0:5),f=[],y=[],g=[],b=(s||75)/o;for(let te=0;te<o;te++){const he=te*b;for(let ge=0;ge<o;ge++){const Te=ge*b,Se=LH(a[te][ge]),vt=RH(null),$t={type:"rect",x:Te,y:he,width:b,height:b};f.push(FH(Se)),y.push(PH($t,Se.fill,vt,null)),g.push(NH($t))}}const w=10,x=15,T=15,M=10;let F=null;u||(F="margin: -15px -15px -18px -15px");const D=$4("left",n,t),R=$4("right",n,t),_=DH(g),q=ZM(_,h,h,0,!1,l,!1),W=ZM(_,h,h,0,!1,u?-45:null,!1),oe={filter:Cv(r),opacity:i==null?null:`${i}`};return $("div",{styles:oe,class:u?Xt.diamondMidColRamp:Xt.squareTableCell},$("svg",{xmlns:ETe,width:h,height:h,style:F},$("defs",null,$("marker",{id:`${t}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},$("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),$("marker",{id:`${t}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},$("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),f),$("g",{transform:q},y),$("g",{transform:W},$("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":D.markerStart,"marker-end":D.markerEnd,x1:-w,y1:s-x,x2:-w,y2:x}),$("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":R.markerStart,"marker-end":R.markerEnd,x1:T,y1:s+M,x2:s-T,y2:s+M}))))}const MTe=bS(),vW=10,$L=20,VI=10,CL=20,EL={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function OTe(e="vertical"){const t="stroke:rgb(200, 200, 200);stroke-width:1";return e==="vertical"?$("svg",{height:"4",width:"10"},$("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:t})):$("svg",{height:"10",width:"10"},$("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:t}))}function kTe(e,t="vertical"){const i=document.createElement("div");return i.style.height=`${$L}px`,i.className=EL.univariateAboveAndBelowSymbol,e!=null&&(i.style.opacity=e.toString()),MTe.append(i,OTe.bind(null,t)),i}function _W(e,t,i="vertical",r){e.infos.forEach((s,n)=>{if(r&&n===2)s.preview=kTe(t,i);else{const o=Ei(s.size)+(i==="horizontal"?CL:VI),a=s.preview.tagName.toLowerCase()==="div",l=a?s.preview:document.createElement("div");l.className=EL.univariateAboveAndBelowSymbol,i==="horizontal"?l.style.width=`${o}px`:l.style.height=`${o}px`,a||l.appendChild(s.preview),s.preview=l}})}function dx(e,t="classic"){const i=e.infos;return t==="classic"?(Ei(i[0].size)+VI)/2:(Ei(i[0].size)-Ei(i[i.length-1].size))/2}function Sm(e,t){if(!e)return null;const i=e.infos.map(s=>s.color),r=oh(t.type==="full"?i:t.type==="above"?i.slice(0,3):i.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,effectList:t.effectList});return r.className=EL.colorRamp,t.opacity!=null&&(r.style.opacity=t.opacity.toString()),r}function rO(e,t,i,r="vertical"){let s=0;const n=e.infos,o=Math.floor(n.length/2),a=t==="full"||t==="above"?0:o,l=t==="full"||t==="below"?n.length-1:o;for(let u=a;u<=l;u++)i&&u===o?s+=r==="horizontal"?vW:$L:s+=Ei(n[u].size)+(r==="horizontal"?CL:VI);return Math.round(s)}function xm(e,t,i,r="vertical"){const s=rO(e,t,i,r),n=e.infos,o=Math.floor(n.length/2),a=t==="full"||t==="above"?0:o,l=t==="full"||t==="below"?n.length-1:o,u=t==="full"?n[a].size+n[l].size:t==="above"?n[a].size:n[l].size,h=i?r==="vertical"?$L:vW:0,f=r==="vertical"?VI*(t==="full"?2:1):CL*(t==="full"?2:1);return Math.round(s-(Ei(u)/2+h/2+f/2))}function bW(e,t,i="vertical"){const r=e.infos;let s=r.find(({type:l})=>l==="size-ramp"),n=r.find(({type:l})=>l==="color-ramp");var o,a;return s&&(s=k({},s),s.infos=[...s.infos],_W(s,t,i,!0)),n&&(n=k({},n),n.infos=[...n.infos]),i==="horizontal"&&((o=s)==null||o.infos.reverse(),(a=n)==null||a.infos.reverse()),{sizeRampElement:s,colorRampElement:n}}function wW(e,t="vertical"){const i=e.infos;let r=i.find(({type:a})=>a==="size-ramp"),s=i.find(({type:a})=>a==="color-ramp");var n,o;return r&&(r=k({},r),r.infos=[...r.infos],_W(r,null,t,!1)),s&&(s=k({},s),s.infos=[...s.infos]),t==="horizontal"&&((n=r)==null||n.infos.reverse(),(o=s)==null||o.infos.reverse()),{sizeRampElement:r,colorRampElement:s}}function PTe(e,t){return t}function Dr(e){const t=this;e.appendChild(t)}function Im(e,t,i){if(!t)return;if(typeof t=="string"||typeof t=="number")return t;if("value"in t||"unit"in t)return wr(e.dotValue,t);if("colorName"in t||"bandName"in t)return e[t.colorName]+": "+(e[t.bandName]||t.bandName);if("showCount"in t)return t.showCount?e.clusterCountTitle:null;let r=null;return PTe(t,i)?r=t.ratioPercentTotal?"showRatioPercentTotal":t.ratioPercent?"showRatioPercent":t.ratio?"showRatio":t.normField?"showNormField":t.field?"showField":null:SW(t,i)&&(r=t.normField?"showNormField":t.normByPct?"showNormPct":t.field?"showField":null),r?wr(r==="showField"?"{field}":e[r],{field:t.field,normField:t.normField}):null}function SW(e,t){return!t}function xW(e,t){return!!(t&&t==="Stretched"&&e.version>=10.3&&e.declaredClass==="esri.layers.ImageryLayer")}const Re={activated:"esri-legend--card__carousel-indicator--activated",base:"esri-legend--card",stacked:"esri-legend--stacked",carouselTitle:"esri-legend--card__carousel-title",indicator:"esri-legend--card__carousel-indicator",intervalSeparator:"esri-legend--card__interval-separator",imageryLayerStretchedImage:"esri-legend--card__imagery-layer-image--stretched",imageLabel:"esri-legend--card__image-label",layerCaption:"esri-legend--card__layer-caption",labelElement:"esri-legend--card__label-element",layerRow:"esri-legend--card__layer-row",labelCell:"esri-legend--card__label-cell",message:"esri-legend--card__message",rampLabel:"esri-legend--card__ramp-label",section:"esri-legend--card__section",relationshipSection:"esri-legend--card__relationship-section",serviceCaptionText:"esri-legend--card__service-caption-text",serviceContent:"esri-legend--card__service-content",service:"esri-legend--card__service",groupLayer:"esri-legend--card__group-layer",groupLayerChild:"esri-legend--card__group-layer-child",symbol:"esri-legend--card__symbol",sizeRampRow:"esri-legend--card__size-ramp-row",symbolRow:"esri-legend--card__symbol-row",symbolCell:"esri-legend--card__symbol-cell",indicatorContainer:"esri-legend--card__carousel-indicator-container",intervalSeparatorsContainer:"esri-legend--card__interval-separators-container",relationshipLabelContainer:"esri-legend--card__relationship-label-container",labelContainer:"esri-legend--card__label-container",serviceCaptionContainer:"esri-legend--card__service-caption-container",symbolContainer:"esri-legend--card__symbol-container",sizeRampContainer:"esri-legend--card__size-ramp-container",sizeRampPreview:"esri-legend--card__size-ramp-preview",rampContainer:"esri-legend__ramps",sizeRampHorizontal:"esri-legend__size-ramp--horizontal",rampLabelsContainer:"esri-legend__ramp-labels",layerInfo:"esri-legend__layer-cell esri-legend__layer-cell--info",univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card",hidden:"esri-hidden"},LTe=25,RTe=25,FTe=768,NTe=100;var U0;(function(e){e.Auto="auto",e.Stack="stack",e.SideBySide="side-by-side"})(U0||(U0={}));const DTe="#ddd",Hp=window.devicePixelRatio;function jTe(e){if(e){if(e.type.indexOf("3d")>-1){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const i=e.symbolLayers.getItemAt(t-1),r=i.resource&&i.resource.primitive;return r==="circle"||r==="cross"||r==="kite"||r==="sphere"||r==="cube"||r==="diamond"}{const t=e.style;return t==="circle"||t==="diamond"||t==="cross"}}}function zTe(e){if(e){if(e.type.indexOf("3d")>-1){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const i=e.symbolLayers.getItemAt(t-1).get("resource.primitive");return i==="triangle"||i==="cone"||i==="tetrahedron"}return e.style==="triangle"}}let Yo=class extends Yt{constructor(e,t){super(e,t),this._handles=new Ai,this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.headingLevel=3,this.layout=U0.Stack,this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}initialize(){this.own([this.watch("activeLayerInfos",e=>{this._handles.removeAll(),this._watchForSectionChanges(e)})])}destroy(){this._handles.destroy(),this._handles=null}render(){this._hasIndicators=this.layout===U0.Auto&&this.view.container.clientWidth<=FTe||this.layout===U0.Stack;const e=this.activeLayerInfos,t=e&&e.toArray().map(a=>this._renderLegendForLayer(a)).filter(a=>!!a);this._hasIndicators?this._selectedSectionName&&this._sectionNames.indexOf(this._selectedSectionName)!==-1||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const i=this._sectionNames.length,r=this._sectionNames.map((a,l)=>{const u=wr(this.messagesCommon.pagination.pageText,{index:l+1,total:i});return $("div",{key:a,role:"tab",id:a,"aria-label":u,"aria-controls":`${a}-panel`,"aria-selected":(this._selectedSectionName===a).toString(),tabIndex:this._selectedSectionName===a?0:-1,title:u,onclick:this._selectSection,onkeydown:this._focusSection,bind:this,class:this.classes(Re.indicator,{[Re.activated]:this._selectedSectionName===a}),"data-section-name":a})}),s=this._hasIndicators&&i>1?$("div",{class:Re.indicatorContainer,key:"carousel-navigation",role:"tablist"},r):null,n=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):t&&t.length?t:null,o={[Re.stacked]:this._hasIndicators};return $("div",{class:this.classes(Re.base,o)},n||$("div",{class:Re.message},this.messages.noLegend),s)}_selectSection(e){const t=e.target.getAttribute("data-section-name");t&&(this._selectedSectionName=t)}_focusSection(e){switch(e.key){case"ArrowLeft":case"ArrowRight":this._switchSectionOnArrowPress(e);break;case"Enter":case" ":this._selectSection(e)}}_switchSectionOnArrowPress(e){const t=e.key,i=t==="ArrowLeft"?-1:1,r=e.target.getAttribute("data-section-name"),s=this._sectionNames.indexOf(r),n=this._sectionNames;let o=null;s!==-1&&(n[s+i]?o=document.getElementById(n[s+i]):t==="ArrowLeft"?o=document.getElementById(n[n.length-1]):t==="ArrowRight"&&(o=document.getElementById(n[0])),o&&o.focus())}_watchForSectionChanges(e){if(this._generateSectionNames(),e){e.forEach(i=>{const r=`activeLayerInfo-${i.layer.uid}-version-change`;this._handles.remove(r),this._watchForSectionChanges(i.children),this._handles.add(i.watch("version",()=>this._generateSectionNames()),r)});const t="activeLayerInfos-collection-change";this._handles.remove(t),this._handles.add(e.on("change",()=>this._watchForSectionChanges(e)),t)}}_generateSectionNames(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)}_getSectionName(e,t,i){return`${this.id}${e.uid}-type-${t.type}-${i}`}_generateSectionNamesForActiveLayerInfo(e){e.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),e.legendElements&&e.legendElements.forEach((t,i)=>{this._sectionNames.push(this._getSectionName(e.layer,t,i))})}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const t=e.children.map(i=>this._renderLegendForLayer(i)).toArray();return $("div",{key:e.layer.uid,class:this.classes(Re.service,Re.groupLayer)},$("div",{class:Re.serviceCaptionContainer},e.title),t)}{const t=e.legendElements;if(t&&!t.length)return null;const i=t.some(n=>n.type==="relationship-ramp"),r=t.map((n,o)=>this._renderLegendForElement(n,e,o,i)).filter(n=>!!n);if(!r.length)return null;const s={[Re.groupLayerChild]:!!e.parent};return $("div",{key:e.layer.uid,class:this.classes(Re.service,s)},$("div",{class:Re.serviceCaptionContainer},$("div",{class:Re.serviceCaptionText},e.title)),$("div",{class:Re.serviceContent},r))}}_renderLegendForElement(e,t,i,r=!1){const s=e.type==="color-ramp",n=e.type==="opacity-ramp",o=e.type==="size-ramp",a=t.layer;let l=null;if(typeof e.title=="string")l=e.title;else if(e.title){const b=e.title,w=Im(this.messages,b,s||n);l=b.title?`${b.title} (${w})`:w}const u=this._getSectionName(a,e,i),h=this._hasIndicators?$("div",null,$(Uh,{level:this.headingLevel,class:Re.carouselTitle},t.title),$(Uh,{level:_ce(this.headingLevel),class:Re.layerCaption},l)):l?$(Uh,{level:this.headingLevel,class:Re.layerCaption},l):null,f=t.effectList;let y=null;if(e.type==="symbol-table"){const b=e.infos.map((w,x)=>this._renderLegendForElementInfo(w,t,e.legendType,x)).filter(w=>!!w);if(b.length){const w=b[0].properties.classes&&b[0].properties.classes[Re.symbolRow],x={[Re.labelContainer]:!w&&!r,[Re.relationshipLabelContainer]:r};y=$("div",{class:this.classes(x)},b)}}else e.type==="color-ramp"||e.type==="opacity-ramp"||e.type==="heatmap-ramp"?y=this._renderLegendForRamp(e,a.opacity,f):o?y=this._renderSizeRamp(e,a.opacity):e.type==="relationship-ramp"?y=gW(e,this.id,a.opacity,f):e.type==="univariate-above-and-below-ramp"?y=this._renderUnivariateAboveAndBelowRamp(e,a.opacity,f):e.type==="univariate-color-size-ramp"&&(y=this._renderUnivariateColorSizeRamp(e,a.opacity,f));if(!y)return null;const g=$("div",{key:u,class:Re.section,id:`${u}-panel`,role:"tabpanel","aria-labelledby":u,tabIndex:0},[h,y]);return this._sectionMap.set(u,g),g}_renderUnivariateAboveAndBelowRamp(e,t,i){const{sizeRampElement:r,colorRampElement:s}=bW(e,t,"horizontal");if(!r)return null;const n=rO(r,"full",!0,"horizontal"),o=xm(r,"above",!0,"horizontal"),a=xm(r,"below",!0,"horizontal"),l=12,u=Sm(s,{width:o,height:l,rampAlignment:"horizontal",opacity:t,type:"above",effectList:i}),h=Sm(s,{width:a,height:l,rampAlignment:"horizontal",opacity:t,type:"below",effectList:i}),f=dx(r,"card"),y=r.infos.map(F=>F.label),g=y.length-1,b=y.map((F,D)=>D===0||D===g?$("div",{key:D},F):null),w={display:"flex",flexDirection:"column"},x={display:"flex",flexDirection:"row"},T={marginTop:"3px",display:"flex"};Is(this.container)?T.marginRight=`${f}px`:T.marginLeft=`${f}px`;const M={width:`${n}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return $("div",{class:Re.layerRow,key:"size-ramp-preview",styles:w},$("div",{class:this.classes(Re.symbolContainer,Re.sizeRampHorizontal),styles:x},r.infos.map((F,D)=>$("div",{key:D,class:Re.symbol,bind:F.preview,afterCreate:Dr}))),u?$("div",{class:Re.univariateAboveAndBelowColorRamp,styles:T,key:"color-ramp-preview"},$("div",{bind:u,afterCreate:Dr}),$("div",{bind:h,afterCreate:Dr})):null,$("div",{class:Re.layerInfo},$("div",{class:Re.rampLabelsContainer,styles:M},b)))}_renderUnivariateColorSizeRamp(e,t,i){const{sizeRampElement:r,colorRampElement:s}=wW(e,"horizontal");if(!r)return null;const n=rO(r,"full",!1,"horizontal"),o=xm(r,"full",!1,"horizontal"),a=Sm(s,{width:o,height:12,rampAlignment:"horizontal",opacity:t,type:"full",effectList:i}),l=dx(r,"card"),u=r.infos.length-1,h=r.infos.map((w,x)=>x===0||x===u?$("div",{key:x},w.label):null),f={display:"flex",flexDirection:"column"},y={display:"flex",flexDirection:"row"},g={marginTop:"3px",display:"flex"};Is(this.container)?g.marginRight=`${l}px`:g.marginLeft=`${l}px`;const b={width:`${n}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return $("div",{class:Re.layerRow,key:"size-ramp-preview",styles:f},$("div",{class:this.classes(Re.symbolContainer,Re.sizeRampHorizontal),styles:y},r.infos.map((w,x)=>$("div",{key:x,class:Re.symbol,bind:w.preview,afterCreate:Dr}))),$("div",{class:Re.univariateAboveAndBelowColorRamp,styles:g,key:"color-ramp-preview"},$("div",{bind:a,afterCreate:Dr})),$("div",{class:Re.layerInfo},$("div",{class:Re.rampLabelsContainer,styles:b},h)))}_renderLegendForElementInfo(e,t,i,r){const s=t.layer;if(e.type)return this._renderLegendForElement(e,t,r);const n=xW(s,i);if(e.preview){var o,a;if(!e.symbol||e.symbol.type.indexOf("simple-fill")===-1){if(!e.label)return $("div",{key:r,bind:e.preview,afterCreate:Dr});const R={[Re.symbolCell]:this._hasIndicators};return $("div",{key:r,class:this.classes(Re.layerRow,{[Re.symbolRow]:this._hasIndicators})},$("div",{class:this.classes(R),bind:e.preview,afterCreate:Dr}),$("div",{class:this.classes(Re.imageLabel,{[Re.labelCell]:this._hasIndicators})},Im(this.messages,e.label,!1)||""))}let l=255,u=255,h=255,f=0,y=255,g=255,b=255,w=0;const x=e.symbol.color&&e.symbol.color.a,T=e.symbol.outline&&e.symbol.outline.color&&e.symbol.outline.color.a;x&&(l=e.symbol.color.r,u=e.symbol.color.g,h=e.symbol.color.b,f=e.symbol.color.a*s.opacity),T&&(y=e.symbol.outline.color.r,g=e.symbol.outline.color.g,b=e.symbol.outline.color.b,w=e.symbol.outline.color.a*s.opacity);const M=(o=(a=e.symbol.color)==null?void 0:a.isBright)==null||o,F=M?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)",D={background:x?`rgba(${l}, ${u}, ${h}, ${f})`:"none",color:M?"black":"white",textShadow:`-1px -1px 0 ${F},
                                              1px -1px 0 ${F},
                                              -1px 1px 0 ${F},
                                              1px 1px 0 ${F}`,border:T?`1px solid rgba(${y}, ${g}, ${b}, ${w})`:"none",filter:Cv(t.effectList)};return $("div",{key:r,class:Re.layerRow},$("div",{class:Re.labelElement,styles:D}," ",e.label," "))}if(e.src){const l=this._renderImage(e,s,n);return $("div",{key:r,class:Re.layerRow},l,$("div",{class:Re.imageLabel},e.label||""))}}_renderImage(e,t,i){const{label:r,src:s,opacity:n}=e,o={[Re.imageryLayerStretchedImage]:i,[Re.symbol]:!i},a={opacity:`${n!=null?n:t.opacity}`};return $("img",{alt:Im(this.messages,r,!1),src:s,border:0,width:e.width,height:e.height,class:this.classes(o),styles:a})}_renderSizeRampLines(e){const t=e.infos,i=t[0],r=t[t.length-1],s=i.symbol,n=this._hasIndicators,o=Ei(i.size+i.outlineSize)*Hp,a=Ei(r.size+r.outlineSize)*Hp,l=n?o:o+50*Hp,u=n?o/2+50*Hp:o,h=zTe(s),f=jTe(s),y=document.createElement("canvas");y.width=l,y.height=u,y.style.width=y.width/Hp+"px",y.style.height=y.height/Hp+"px";const g=y.getContext("2d");if(n){g.beginPath();const b=0,w=0,x=l/2-a/2,T=u;g.moveTo(b,w),g.lineTo(x,T);const M=l,F=0,D=l/2+a/2,R=u;g.moveTo(M,F),g.lineTo(D,R)}else{g.beginPath();const b=0,w=u/2-a/2,x=l,T=0;g.moveTo(b,w),g.lineTo(x,T);const M=0,F=u/2+a/2,D=l,R=u;g.moveTo(M,F),g.lineTo(D,R)}return g.strokeStyle=DTe,g.stroke(),$("div",{bind:y,afterCreate:Dr,styles:n?{display:"flex",marginTop:`-${h?0:f?o/2:0}px`,marginBottom:`-${h?a:f?a/2:0}px`}:{display:"flex",marginRight:`-${h?0:f?o/2:0}px`,marginLeft:`-${h?0:f?a/2:0}px`}})}_renderSizeRamp(e,t){const i=e.infos,r=i[0].label,s=i[i.length-1].label;let n=i[0].preview,o=i[i.length-1].preview;const a=this._hasIndicators,l={"flex-direction":a?"column":"row-reverse"};n&&(n=n.cloneNode(!0),n.style.display="flex"),o&&(o=o.cloneNode(!0),o.style.display="flex");const u={opacity:t!=null?`${t}`:""};return $("div",{class:this.classes(Re.layerRow,{[Re.sizeRampRow]:a})},$("div",{class:Re.rampLabel},a?r:s),$("div",{class:Re.sizeRampContainer,styles:l},$("div",{bind:n,afterCreate:Dr,class:Re.sizeRampPreview,styles:u}),this._renderSizeRampLines(e),$("div",{bind:o,afterCreate:Dr,class:Re.sizeRampContainer,styles:u})),$("div",{class:Re.rampLabel},a?s:r))}_renderLegendForRamp(e,t,i){const r=e.infos,s=e.type==="heatmap-ramp",n=r.length-1,o=RTe,a=n>2&&!s?LTe*n:NTe,l=a+20,u=10,h=r.slice(0).reverse();h.forEach((R,_)=>{R.offset=s?R.ratio:_/n});const f=h.length-1,y=h.length%2!=0&&h[h.length/2|0],g=y&&$("div",{class:Re.intervalSeparatorsContainer},$("div",{class:Re.intervalSeparator},"|"),$("div",{class:Re.rampLabel},y.label)),b=r[r.length-1].label,w=r[0].label,x=[[{shape:{type:"path",path:`M0 ${o/2} L${u} 0 L${u} ${o} Z`},fill:h[0].color,stroke:{width:0}},{shape:{type:"rect",x:u,y:0,width:a,height:o},fill:{type:"linear",x1:u,y1:0,x2:a+u,y2:0,colors:h},stroke:{width:0}},{shape:{type:"path",path:`M${a+u} 0 L${l} ${o/2} L${a+u} ${o} Z`},fill:h[f].color,stroke:{width:0}}]],T=jH(x,l,o),{messages:M}=this,F={filter:Cv(i),opacity:t==null?null:`${t}`},D={justifyContent:"center"};return $("div",{class:Re.layerRow,styles:D},$("div",{class:Re.rampLabel},s?M[b]:b),$("div",{class:Re.symbolContainer},$("div",{styles:F},T),g),$("div",{class:Re.rampLabel},s?M[w]:w))}};c([d()],Yo.prototype,"activeLayerInfos",void 0),c([d()],Yo.prototype,"headingLevel",void 0),c([d()],Yo.prototype,"layout",void 0),c([d(),Zt("esri/widgets/Legend/t9n/Legend")],Yo.prototype,"messages",void 0),c([d(),Zt("esri/t9n/common")],Yo.prototype,"messagesCommon",void 0),c([d({readOnly:!0})],Yo.prototype,"type",void 0),c([d()],Yo.prototype,"view",void 0),c([pr()],Yo.prototype,"_selectSection",null),Yo=c([O("esri.widgets.Legend.styles.Card")],Yo);const cC=Yo,Ze={service:"esri-legend__service",label:"esri-legend__service-label",layer:"esri-legend__layer",groupLayer:"esri-legend__group-layer",groupLayerChild:"esri-legend__group-layer-child",layerTable:"esri-legend__layer-table",layerTableSizeRamp:"esri-legend__layer-table--size-ramp",layerChildTable:"esri-legend__layer-child-table",layerCaption:"esri-legend__layer-caption",layerBody:"esri-legend__layer-body",layerRow:"esri-legend__layer-row",layerCell:"esri-legend__layer-cell",layerInfo:"esri-legend__layer-cell esri-legend__layer-cell--info",imageryLayerStretchedImage:"esri-legend__imagery-layer-image--stretched",imageryLayerCellStretched:"esri-legend__imagery-layer-cell--stretched",imageryLayerInfoStretched:"esri-legend__imagery-layer-info--stretched",symbolContainer:"esri-legend__layer-cell esri-legend__layer-cell--symbols",symbol:"esri-legend__symbol",rampContainer:"esri-legend__ramps",sizeRamp:"esri-legend__size-ramp",colorRamp:"esri-legend__color-ramp",opacityRamp:"esri-legend__opacity-ramp",borderlessRamp:"esri-legend__borderless-ramp",rampTick:"esri-legend__ramp-tick",rampFirstTick:"esri-legend__ramp-tick-first",rampLastTick:"esri-legend__ramp-tick-last",rampLabelsContainer:"esri-legend__ramp-labels",rampLabel:"esri-legend__ramp-label",univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label",message:"esri-legend__message",header:"esri-widget__heading",hidden:"esri-hidden"},VTe="esri-legend__",UTe=24,C4={display:"flex",alignItems:"flex-start"},uC={marginLeft:"3px"},Wp={display:"table-cell",verticalAlign:"middle"};let hh=class extends Yt{constructor(e,t){super(e,t),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,t=e&&e.toArray().map(i=>this._renderLegendForLayer(i)).filter(i=>!!i);return $("div",null,t&&t.length?t:$("div",{class:Ze.message},this.messages.noLegend))}_renderLegendForLayer(e){if(!e.ready)return null;const t=!!e.children.length,i=`${VTe}${e.layer.uid}-version-${e.version}`,r=e.title?Uh({level:this.headingLevel,class:this.classes(Ze.header,Ze.label)},e.title):null;if(t){const s=e.children.map(n=>this._renderLegendForLayer(n)).toArray();return $("div",{key:i,class:this.classes(Ze.service,Ze.groupLayer)},r,s)}{const s=e.legendElements;if(s&&!s.length)return null;const n=s.map(a=>this._renderLegendForElement(a,e.layer,e.effectList)).filter(a=>!!a);if(!n.length)return null;const o={[Ze.groupLayerChild]:!!e.parent};return $("div",{key:i,class:this.classes(Ze.service,o),tabIndex:0},r,$("div",{class:Ze.layer},n))}}_renderLegendForElement(e,t,i,r){const s=e.type==="color-ramp",n=e.type==="opacity-ramp",o=e.type==="size-ramp";let a=null;if(e.type==="symbol-table"||o){const g=e.infos.map(b=>this._renderLegendForElementInfo(b,t,i,o,e.legendType)).filter(b=>!!b);g.length&&(a=$("div",{class:Ze.layerBody},g))}else e.type==="color-ramp"||e.type==="opacity-ramp"||e.type==="heatmap-ramp"||e.type==="stretch-ramp"?a=this._renderLegendForRamp(e,t.opacity):e.type==="relationship-ramp"?a=gW(e,this.id,t.opacity,i):e.type==="univariate-above-and-below-ramp"?a=this._renderUnivariateAboveAndBelowRamp(e,t.opacity,i):e.type==="univariate-color-size-ramp"&&(a=this._renderUnivariateColorSizeRamp(e,t.opacity,i));if(!a)return null;const l=e.title;let u=null;if(typeof l=="string")u=l;else if(l){const g=Im(this.messages,l,s||n);u=SW(l,s||n)&&l.title?`${l.title} (${g})`:g}const h=r?Ze.layerChildTable:Ze.layerTable,f=u?$("div",{class:Ze.layerCaption},u):null,y={[Ze.layerTableSizeRamp]:o||!r};return $("div",{class:this.classes(h,y)},f,a)}_renderUnivariateAboveAndBelowRamp(e,t,i){const{sizeRampElement:r,colorRampElement:s}=bW(e,t);if(!r)return null;const n=xm(r,"above",!0),o=xm(r,"below",!0),a=12,l=Sm(s,{width:a,height:n,rampAlignment:"vertical",opacity:t,type:"above",effectList:i}),u=Sm(s,{width:a,height:o,rampAlignment:"vertical",opacity:t,type:"below",effectList:i}),h=dx(r),f=r.infos.map(D=>D.label),y=f.map((D,R)=>R===0?$("div",{key:R,class:D?l?Ze.univariateAboveAndBelowLabel:Ze.rampLabel:null},D):R===2?$("div",null):null),g=f.length-1,b=Math.floor(f.length/2),w=f.map((D,R)=>R===b||R===g?$("div",{key:R,class:D?l?Ze.univariateAboveAndBelowLabel:Ze.rampLabel:null},D):null),x={display:"table-cell",verticalAlign:"middle"},T={marginTop:`${h}px`},M={height:`${n}px`},F={height:`${o}px`};return $("div",{key:"univariate-above-and-below-ramp-preview",styles:C4},$("div",{class:Ze.layerBody},r.infos.map((D,R)=>$("div",{class:this.classes(Ze.layerRow,Ze.sizeRamp)},$("div",{class:Ze.symbol,styles:x,bind:D.preview,afterCreate:Dr}),l||R%2!=0?null:$("div",{class:Ze.layerInfo},f[R])))),l?$("div",{styles:T,key:"color-ramp-preview"},$("div",{styles:uC},$("div",{styles:Wp},$("div",{class:Ze.rampContainer,bind:l,afterCreate:Dr})),$("div",{styles:Wp},$("div",{class:Ze.rampLabelsContainer,styles:M},y))),$("div",{styles:uC},$("div",{styles:Wp},$("div",{class:Ze.rampContainer,bind:u,afterCreate:Dr})),$("div",{styles:Wp},$("div",{class:Ze.rampLabelsContainer,styles:F},w)))):null)}_renderUnivariateColorSizeRamp(e,t,i){const{sizeRampElement:r,colorRampElement:s}=wW(e);if(!r)return null;const n=dx(r),o=12,a=xm(r,"full",!1),l=Sm(s,{width:o,height:a,rampAlignment:"vertical",opacity:t,type:"full",effectList:i}),u=r.infos.length-1,h=r.infos.map((b,w)=>w===0||w===u?$("div",{key:w,class:b.label?s?Ze.univariateAboveAndBelowLabel:Ze.rampLabel:null},b.label):null),f={display:"table-cell",verticalAlign:"middle"},y={marginTop:`${n}px`},g={height:`${a}px`};return $("div",{key:"univariate-above-and-below-ramp-preview",styles:C4},$("div",{class:Ze.layerBody},r.infos.map(b=>$("div",{class:this.classes(Ze.layerRow,Ze.sizeRamp)},$("div",{class:Ze.symbol,styles:f,bind:b.preview,afterCreate:Dr})))),$("div",{styles:y,key:"color-ramp-preview"},$("div",{styles:uC},$("div",{styles:Wp},$("div",{class:Ze.rampContainer,bind:l,afterCreate:Dr})),$("div",{styles:Wp},$("div",{class:Ze.rampLabelsContainer,styles:g},h)))))}_renderLegendForRamp(e,t){const i=e.infos,r=e.type==="opacity-ramp",s=e.type==="heatmap-ramp",n=e.type==="stretch-ramp",o=e.preview,a=r?Ze.opacityRamp:"";o.className=`${Ze.colorRamp} ${a}`,t!=null&&(o.style.opacity=t.toString());const l=i.map(f=>$("div",{class:f.label?Ze.rampLabel:null},s?this.messages[f.label]:n?this._getStretchStopLabel(f):f.label)),u={width:`${UTe}px`},h={height:o.style.height};return $("div",{class:Ze.layerRow},$("div",{class:Ze.symbolContainer,styles:u},$("div",{class:Ze.rampContainer,bind:o,afterCreate:Dr})),$("div",{class:Ze.layerInfo},$("div",{class:Ze.rampLabelsContainer,styles:h},l)))}_getStretchStopLabel(e){return e.label?this.messages[e.label]+": "+(typeof e.value=="string"?e.value:ha(e.value,{style:"decimal",notation:e.value.toString().indexOf("e")>-1?"scientific":"standard"})):""}_renderLegendForElementInfo(e,t,i,r,s){if(e.type)return this._renderLegendForElement(e,t,i,!0);let n=null;const o=xW(t,s);if(e.preview?n=$("div",{class:Ze.symbol,bind:e.preview,afterCreate:Dr}):e.src&&(n=this._renderImage(e,t,o)),!n)return null;const a={[Ze.imageryLayerInfoStretched]:o},l={[Ze.imageryLayerInfoStretched]:o,[Ze.sizeRamp]:!o&&r};return $("div",{class:Ze.layerRow},$("div",{class:this.classes(Ze.symbolContainer,l)},n),$("div",{class:this.classes(Ze.layerInfo,a)},Im(this.messages,e.label,!1)||""))}_renderImage(e,t,i){const{label:r,src:s,opacity:n}=e,o={[Ze.imageryLayerStretchedImage]:i,[Ze.symbol]:!i},a={opacity:`${n!=null?n:t.opacity}`};return $("img",{alt:Im(this.messages,r,!1),src:s,border:0,width:e.width,height:e.height,class:this.classes(o),styles:a})}};c([d()],hh.prototype,"activeLayerInfos",void 0),c([d()],hh.prototype,"headingLevel",void 0),c([d(),Zt("esri/widgets/Legend/t9n/Legend")],hh.prototype,"messages",void 0),c([d({readOnly:!0})],hh.prototype,"type",void 0),hh=c([O("esri.widgets.Legend.styles.Classic")],hh);const Jp=hh,rw={base:"esri-legend",widget:"esri-widget",panel:"esri-widget--panel",widgetIcon:"esri-icon-layer-list"};let _r=class extends Yt{constructor(e,t){super(e,t),this._handles=new Ai,this.activeLayerInfos=null,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.headingLevel=3,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.iconClass=rw.widgetIcon,this.label=void 0,this.layerInfos=null,this.messages=null,this.style=new Jp,this.view=null,this.viewModel=new CTe}initialize(){this.own(oa(this,"view","resize",()=>this.scheduleRender()),oa(this,"activeLayerInfos","change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),Qe(this,"headingLevel",e=>{const{style:t}=this;t&&(t.headingLevel=e)}),Pt(this,"style",(e,t)=>{t&&e!==t&&t.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,e.type==="card"&&(e.view=this.view),e.headingLevel=this.headingLevel)}))}destroy(){this._handles.destroy(),this._handles=null}castStyle(e){if(e instanceof cC||e instanceof Jp)return e;if(typeof e=="string")return e==="card"?new cC:new Jp;if(e&&typeof e.type=="string"){const t=k({},e);return delete t.type,new(e.type==="card"?cC:Jp)(t)}return new Jp}render(){return $("div",{class:this.classes(rw.base,rw.widget,this.style instanceof Jp?rw.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){this._handles.removeAll(),e.forEach(t=>this._renderOnActiveLayerInfoChange(t)),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const t=Pt(e,"version",()=>this.scheduleRender());this._handles.add(t,`version_${e.layer.uid}`);const i=oa(e,"children","change",()=>{e.children.forEach(r=>this._renderOnActiveLayerInfoChange(r))});this._handles.add(i,`children_${e.layer.uid}`),e.children.forEach(r=>this._renderOnActiveLayerInfoChange(r))}};c([ne("viewModel.activeLayerInfos")],_r.prototype,"activeLayerInfos",void 0),c([ne("viewModel.basemapLegendVisible")],_r.prototype,"basemapLegendVisible",void 0),c([ne("viewModel.groundLegendVisible")],_r.prototype,"groundLegendVisible",void 0),c([d()],_r.prototype,"headingLevel",void 0),c([ne("viewModel.hideLayersNotInCurrentView")],_r.prototype,"hideLayersNotInCurrentView",void 0),c([ne("viewModel.keepCacheOnDestroy")],_r.prototype,"keepCacheOnDestroy",void 0),c([ne("viewModel.respectLayerVisibility")],_r.prototype,"respectLayerVisibility",void 0),c([d()],_r.prototype,"iconClass",void 0),c([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],_r.prototype,"label",void 0),c([ne("viewModel.layerInfos")],_r.prototype,"layerInfos",void 0),c([d(),Zt("esri/widgets/Legend/t9n/Legend")],_r.prototype,"messages",void 0),c([d()],_r.prototype,"style",void 0),c([gt("style")],_r.prototype,"castStyle",null),c([ne("viewModel.view")],_r.prototype,"view",void 0),c([d()],_r.prototype,"viewModel",void 0),_r=c([O("esri.widgets.Legend")],_r);const BTe=_r;let _u=class extends Ee{constructor(e){super(e),this._viewpointHandle=null,this._handles=new Ai,this.group=null}initialize(){this._handles.add(oa(this,"view.ui","expand",e=>{const{target:t}=e;t&&t!==this&&t.expanded&&t.group&&t.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){const t=!!e;this._set("expanded",t);const i=this.get("view.ui");i&&i.emit("expand",{target:this}),this._viewpointHandleChange(t)}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&IF(e,"ready",()=>{this.view===e&&this._watchViewpoint()}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?IF(this.view,"stationary",()=>this._viewpointHandle.resume()):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this._handles.remove(e),this._viewpointHandle=null;const{autoCollapse:t,view:i}=this;if(i&&t){const r=i.type==="3d"?"camera":"viewpoint",s=$U(i,r,()=>this._collapse());this._handles.add(s,e),this._viewpointHandle=s}}_collapse(){this.expanded=!1}};c([d({value:!1})],_u.prototype,"autoCollapse",null),c([d({value:!1})],_u.prototype,"expanded",null),c([d()],_u.prototype,"group",void 0),c([d({readOnly:!0})],_u.prototype,"state",null),c([d({value:null})],_u.prototype,"view",null),_u=c([O("esri.widgets.Expand.ExpandViewModel")],_u);const IW=_u,Ji={base:"esri-expand esri-widget",modeAuto:"esri-expand--auto",modeDrawer:"esri-expand--drawer",modeFloating:"esri-expand--floating",container:"esri-expand__container",containerExpanded:"esri-expand__container--expanded",panel:"esri-expand__panel",button:"esri-widget--button",text:"esri-icon-font-fallback-text",icon:"esri-collapse__icon",iconExpanded:"esri-expand__icon--expanded",iconNumber:"esri-expand__icon-number",iconNumberExpanded:"esri-expand__icon-number--expanded",expandIcon:"esri-icon-expand",collapseIcon:"esri-icon-collapse",content:"esri-expand__content",contentExpanded:"esri-expand__content--expanded",expandMask:"esri-expand__mask",expandMaskExpanded:"esri-expand__mask--expanded"};let Ri=class extends Yt{constructor(e,t){super(e,t),this.autoCollapse=null,this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expanded=null,this.expandTooltip="",this.group=null,this.iconNumber=0,this.label=void 0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.view=null,this.viewModel=new IW,this._handleKeyDown=i=>{const{closeOnEsc:r,_toggleButtonEl:s,expanded:n}=this;!n||!r||i.target===s||i.key!=="Escape"||(typeof r=="function"?r(i):r)&&(this.expanded=!1,s==null||s.focus())}}get contentId(){return`${this.id}_controls_content`}get expandTitle(){const{expanded:e,messagesCommon:t,collapseTooltip:i,expandTooltip:r}=this;return e?i||t.collapse:r||t.expand}get collapseIconClass(){return Ji.collapseIcon}set collapseIconClass(e){e?this._override("collapseIconClass",e):this._clearOverride("collapseIconClass")}get expandIconClass(){return vv(this.content)?this.content.iconClass:Ji.expandIcon}set expandIconClass(e){e?this._override("expandIconClass",e):this._clearOverride("expandIconClass")}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}toggle(){this.viewModel.expanded=!this.viewModel.expanded}render(){const{mode:e}=this,t={[Ji.modeAuto]:e==="auto",[Ji.modeDrawer]:e==="drawer",[Ji.modeFloating]:e==="floating"};return $("div",{class:this.classes(Ji.base,t),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())}renderContainer(){const{expanded:e}=this,t={[Ji.containerExpanded]:e};return $("div",{class:this.classes(Ji.container,t)},this.renderPanel(),this.renderContent())}renderMask(){const{expanded:e}=this,t={[Ji.expandMaskExpanded]:e};return $("div",{bind:this,onclick:this._toggle,class:this.classes(Ji.expandMask,t)})}renderBadgeNumber(){const{expanded:e,iconNumber:t}=this;return t&&!e?$("span",{key:"expand__icon-number",class:Ji.iconNumber},t):null}renderPanelNumber(){const{iconNumber:e,expanded:t}=this;return e&&t?$("span",{key:"expand__expand-icon-number",class:this.classes(Ji.iconNumber,Ji.iconNumberExpanded)},e):null}renderIcon(){const{collapseIconClass:e,expandIconClass:t,expanded:i}=this,r={[Ji.iconExpanded]:i,[e]:i,[t]:!i};return e===t&&(r[e]=!0),$("span",{"aria-hidden":"true",class:this.classes(Ji.icon,r)})}renderTitle(){return $("span",{class:Ji.text},this.expandTitle)}renderExpandButton(){const{expanded:e,expandTitle:t,contentId:i}=this;return $("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":i,"aria-expanded":e?"true":"false",bind:this,class:Ji.button,onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:t},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}renderPanel(){return $("div",{class:Ji.panel},this.renderExpandButton(),this.renderPanelNumber())}renderContent(){const{expanded:e,contentId:t,content:i}=this,r={[Ji.contentExpanded]:e},s={id:t,role:"region",class:this.classes(Ji.content,r)};return typeof i=="string"?$("div",k({key:"content__string",innerHTML:i},s)):vv(i)?$("div",k({key:"content__widget"},s),i.render()):i instanceof HTMLElement?$("div",k({key:"content__html-element",bind:i,afterCreate:this._attachToNode},s)):m9(i)?$("div",k({key:"content__node",bind:i.domNode,afterCreate:this._attachToNode},s)):null}_toggle(){this.toggle()}_attachToNode(e){const t=this;e.appendChild(t)}_storeToggleButtonEl(e){this._toggleButtonEl=e}};c([d({readOnly:!0})],Ri.prototype,"contentId",null),c([d({readOnly:!0})],Ri.prototype,"expandTitle",null),c([ne("viewModel.autoCollapse")],Ri.prototype,"autoCollapse",void 0),c([d()],Ri.prototype,"closeOnEsc",void 0),c([d()],Ri.prototype,"collapseIconClass",null),c([d()],Ri.prototype,"collapseTooltip",void 0),c([d()],Ri.prototype,"content",void 0),c([ne("viewModel.expanded")],Ri.prototype,"expanded",void 0),c([d()],Ri.prototype,"expandIconClass",null),c([d()],Ri.prototype,"expandTooltip",void 0),c([ne("viewModel.group")],Ri.prototype,"group",void 0),c([d()],Ri.prototype,"iconNumber",void 0),c([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ri.prototype,"label",void 0),c([d(),Zt("esri/widgets/Expand/t9n/Expand")],Ri.prototype,"messages",void 0),c([d(),Zt("esri/t9n/common")],Ri.prototype,"messagesCommon",void 0),c([d()],Ri.prototype,"mode",void 0),c([ne("viewModel.view")],Ri.prototype,"view",void 0),c([d({type:IW})],Ri.prototype,"viewModel",void 0),c([pr()],Ri.prototype,"_toggle",null),Ri=c([O("esri.widgets.Expand")],Ri);const qTe=Ri;var P1;let ro=P1=class extends Ee{constructor(e){super(e),this.autoCloseMenu=!1,this.iconClass=null,this.items=null,this.label=null,this.open=!1,this.selected=!1,this.selectionEnabled=!1,this.clickFunction=null}castItems(e){return e?e.map(t=>t instanceof P1?t:new P1(t)):null}};c([d()],ro.prototype,"autoCloseMenu",void 0),c([d()],ro.prototype,"iconClass",void 0),c([d()],ro.prototype,"items",void 0),c([gt("items")],ro.prototype,"castItems",null),c([d()],ro.prototype,"label",void 0),c([d()],ro.prototype,"open",void 0),c([d()],ro.prototype,"selected",void 0),c([d()],ro.prototype,"selectionEnabled",void 0),c([d()],ro.prototype,"clickFunction",void 0),ro=P1=c([O("esri.widgets.FeatureTable.Grid.support.ButtonMenuItem")],ro);const Kl=ro;let Uf=class extends Ee{constructor(e){super(e),this.items=null,this.open=!1}castItems(e){return e?e.map(t=>t instanceof Kl?t:new Kl(t)):null}};c([d()],Uf.prototype,"items",void 0),c([gt("items")],Uf.prototype,"castItems",null),c([d()],Uf.prototype,"open",void 0),Uf=c([O("esri.widgets.FeatureTable.Grid.support.ButtonMenuViewModel")],Uf);const GTe=Uf;function ma(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Hm(e){var t=ma(e).Element;return e instanceof t||e instanceof Element}function po(e){var t=ma(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function AL(e){if(typeof ShadowRoot=="undefined")return!1;var t=ma(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var Hh=Math.max,hx=Math.min,Wm=Math.round;function Jm(e,t){t===void 0&&(t=!1);var i=e.getBoundingClientRect(),r=1,s=1;if(po(e)&&t){var n=e.offsetHeight,o=e.offsetWidth;o>0&&(r=Wm(i.width)/o||1),n>0&&(s=Wm(i.height)/n||1)}return{width:i.width/r,height:i.height/s,top:i.top/s,right:i.right/r,bottom:i.bottom/s,left:i.left/r,x:i.left/r,y:i.top/s}}function ML(e){var t=ma(e),i=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:i,scrollTop:r}}function HTe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function WTe(e){return e===ma(e)||!po(e)?ML(e):HTe(e)}function nl(e){return e?(e.nodeName||"").toLowerCase():null}function ld(e){return((Hm(e)?e.ownerDocument:e.document)||window.document).documentElement}function OL(e){return Jm(ld(e)).left+ML(e).scrollLeft}function mc(e){return ma(e).getComputedStyle(e)}function kL(e){var t=mc(e),i=t.overflow,r=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+s+r)}function JTe(e){var t=e.getBoundingClientRect(),i=Wm(t.width)/e.offsetWidth||1,r=Wm(t.height)/e.offsetHeight||1;return i!==1||r!==1}function ZTe(e,t,i){i===void 0&&(i=!1);var r=po(t),s=po(t)&&JTe(t),n=ld(t),o=Jm(e,s),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!i)&&((nl(t)!=="body"||kL(n))&&(a=WTe(t)),po(t)?(l=Jm(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):n&&(l.x=OL(n))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function PL(e){var t=Jm(e),i=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:r}}function UI(e){return nl(e)==="html"?e:e.assignedSlot||e.parentNode||(AL(e)?e.host:null)||ld(e)}function TW(e){return["html","body","#document"].indexOf(nl(e))>=0?e.ownerDocument.body:po(e)&&kL(e)?e:TW(UI(e))}function B0(e,t){var i;t===void 0&&(t=[]);var r=TW(e),s=r===((i=e.ownerDocument)==null?void 0:i.body),n=ma(r),o=s?[n].concat(n.visualViewport||[],kL(r)?r:[]):r,a=t.concat(o);return s?a:a.concat(B0(UI(o)))}function YTe(e){return["table","td","th"].indexOf(nl(e))>=0}function E4(e){return!po(e)||mc(e).position==="fixed"?null:e.offsetParent}function KTe(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,i=navigator.userAgent.indexOf("Trident")!==-1;if(i&&po(e)){var r=mc(e);if(r.position==="fixed")return null}var s=UI(e);for(AL(s)&&(s=s.host);po(s)&&["html","body"].indexOf(nl(s))<0;){var n=mc(s);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||t&&n.willChange==="filter"||t&&n.filter&&n.filter!=="none")return s;s=s.parentNode}return null}function C_(e){for(var t=ma(e),i=E4(e);i&&YTe(i)&&mc(i).position==="static";)i=E4(i);return i&&(nl(i)==="html"||nl(i)==="body"&&mc(i).position==="static")?t:i||KTe(e)||t}var Ws="top",go="bottom",vo="right",Js="left",LL="auto",E_=[Ws,go,vo,Js],Zm="start",Pv="end",QTe="clippingParents",$W="viewport",ag="popper",XTe="reference",A4=E_.reduce(function(e,t){return e.concat([t+"-"+Zm,t+"-"+Pv])},[]),CW=[].concat(E_,[LL]).reduce(function(e,t){return e.concat([t,t+"-"+Zm,t+"-"+Pv])},[]),e$e="beforeRead",t$e="read",i$e="afterRead",r$e="beforeMain",s$e="main",n$e="afterMain",o$e="beforeWrite",a$e="write",l$e="afterWrite",c$e=[e$e,t$e,i$e,r$e,s$e,n$e,o$e,a$e,l$e];function u$e(e){var t=new Map,i=new Set,r=[];e.forEach(function(n){t.set(n.name,n)});function s(n){i.add(n.name);var o=[].concat(n.requires||[],n.requiresIfExists||[]);o.forEach(function(a){if(!i.has(a)){var l=t.get(a);l&&s(l)}}),r.push(n)}return e.forEach(function(n){i.has(n.name)||s(n)}),r}function d$e(e){var t=u$e(e);return c$e.reduce(function(i,r){return i.concat(t.filter(function(s){return s.phase===r}))},[])}function h$e(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function Qa(e){return e.split("-")[0]}function p$e(e){var t=e.reduce(function(i,r){var s=i[r.name];return i[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,i},{});return Object.keys(t).map(function(i){return t[i]})}function f$e(e){var t=ma(e),i=ld(e),r=t.visualViewport,s=i.clientWidth,n=i.clientHeight,o=0,a=0;return r&&(s=r.width,n=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,a=r.offsetTop)),{width:s,height:n,x:o+OL(e),y:a}}function m$e(e){var t,i=ld(e),r=ML(e),s=(t=e.ownerDocument)==null?void 0:t.body,n=Hh(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Hh(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+OL(e),l=-r.scrollTop;return mc(s||i).direction==="rtl"&&(a+=Hh(i.clientWidth,s?s.clientWidth:0)-n),{width:n,height:o,x:a,y:l}}function EW(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&AL(i)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function sO(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function y$e(e){var t=Jm(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function M4(e,t){return t===$W?sO(f$e(e)):Hm(t)?y$e(t):sO(m$e(ld(e)))}function g$e(e){var t=B0(UI(e)),i=["absolute","fixed"].indexOf(mc(e).position)>=0,r=i&&po(e)?C_(e):e;return Hm(r)?t.filter(function(s){return Hm(s)&&EW(s,r)&&nl(s)!=="body"}):[]}function v$e(e,t,i){var r=t==="clippingParents"?g$e(e):[].concat(t),s=[].concat(r,[i]),n=s[0],o=s.reduce(function(a,l){var u=M4(e,l);return a.top=Hh(u.top,a.top),a.right=hx(u.right,a.right),a.bottom=hx(u.bottom,a.bottom),a.left=Hh(u.left,a.left),a},M4(e,n));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Ym(e){return e.split("-")[1]}function RL(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function AW(e){var t=e.reference,i=e.element,r=e.placement,s=r?Qa(r):null,n=r?Ym(r):null,o=t.x+t.width/2-i.width/2,a=t.y+t.height/2-i.height/2,l;switch(s){case Ws:l={x:o,y:t.y-i.height};break;case go:l={x:o,y:t.y+t.height};break;case vo:l={x:t.x+t.width,y:a};break;case Js:l={x:t.x-i.width,y:a};break;default:l={x:t.x,y:t.y}}var u=s?RL(s):null;if(u!=null){var h=u==="y"?"height":"width";switch(n){case Zm:l[u]=l[u]-(t[h]/2-i[h]/2);break;case Pv:l[u]=l[u]+(t[h]/2-i[h]/2);break}}return l}function MW(){return{top:0,right:0,bottom:0,left:0}}function OW(e){return Object.assign({},MW(),e)}function kW(e,t){return t.reduce(function(i,r){return i[r]=e,i},{})}function Lv(e,t){t===void 0&&(t={});var i=t,r=i.placement,s=r===void 0?e.placement:r,n=i.boundary,o=n===void 0?QTe:n,a=i.rootBoundary,l=a===void 0?$W:a,u=i.elementContext,h=u===void 0?ag:u,f=i.altBoundary,y=f===void 0?!1:f,g=i.padding,b=g===void 0?0:g,w=OW(typeof b!="number"?b:kW(b,E_)),x=h===ag?XTe:ag,T=e.rects.popper,M=e.elements[y?x:h],F=v$e(Hm(M)?M:M.contextElement||ld(e.elements.popper),o,l),D=Jm(e.elements.reference),R=AW({reference:D,element:T,strategy:"absolute",placement:s}),_=sO(Object.assign({},T,R)),q=h===ag?_:D,W={top:F.top-q.top+w.top,bottom:q.bottom-F.bottom+w.bottom,left:F.left-q.left+w.left,right:q.right-F.right+w.right},oe=e.modifiersData.offset;if(h===ag&&oe){var te=oe[s];Object.keys(W).forEach(function(he){var ge=[vo,go].indexOf(he)>=0?1:-1,Te=[Ws,go].indexOf(he)>=0?"y":"x";W[he]+=te[Te]*ge})}return W}var O4={placement:"bottom",modifiers:[],strategy:"absolute"};function k4(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function _$e(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,r=i===void 0?[]:i,s=t.defaultOptions,n=s===void 0?O4:s;return function(a,l,u){u===void 0&&(u=n);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},O4,n),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],y=!1,g={state:h,setOptions:function(T){var M=typeof T=="function"?T(h.options):T;w(),h.options=Object.assign({},n,h.options,M),h.scrollParents={reference:Hm(a)?B0(a):a.contextElement?B0(a.contextElement):[],popper:B0(l)};var F=d$e(p$e([].concat(r,h.options.modifiers)));return h.orderedModifiers=F.filter(function(D){return D.enabled}),b(),g.update()},forceUpdate:function(){if(!y){var T=h.elements,M=T.reference,F=T.popper;if(!!k4(M,F)){h.rects={reference:ZTe(M,C_(F),h.options.strategy==="fixed"),popper:PL(F)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(te){return h.modifiersData[te.name]=Object.assign({},te.data)});for(var D=0;D<h.orderedModifiers.length;D++){if(h.reset===!0){h.reset=!1,D=-1;continue}var R=h.orderedModifiers[D],_=R.fn,q=R.options,W=q===void 0?{}:q,oe=R.name;typeof _=="function"&&(h=_({state:h,options:W,name:oe,instance:g})||h)}}}},update:h$e(function(){return new Promise(function(x){g.forceUpdate(),x(h)})}),destroy:function(){w(),y=!0}};if(!k4(a,l))return g;g.setOptions(u).then(function(x){!y&&u.onFirstUpdate&&u.onFirstUpdate(x)});function b(){h.orderedModifiers.forEach(function(x){var T=x.name,M=x.options,F=M===void 0?{}:M,D=x.effect;if(typeof D=="function"){var R=D({state:h,name:T,instance:g,options:F}),_=function(){};f.push(R||_)}})}function w(){f.forEach(function(x){return x()}),f=[]}return g}}var sw={passive:!0};function b$e(e){var t=e.state,i=e.instance,r=e.options,s=r.scroll,n=s===void 0?!0:s,o=r.resize,a=o===void 0?!0:o,l=ma(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return n&&u.forEach(function(h){h.addEventListener("scroll",i.update,sw)}),a&&l.addEventListener("resize",i.update,sw),function(){n&&u.forEach(function(h){h.removeEventListener("scroll",i.update,sw)}),a&&l.removeEventListener("resize",i.update,sw)}}var w$e={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:b$e,data:{}};function S$e(e){var t=e.state,i=e.name;t.modifiersData[i]=AW({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var x$e={name:"popperOffsets",enabled:!0,phase:"read",fn:S$e,data:{}},I$e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function T$e(e){var t=e.x,i=e.y,r=window,s=r.devicePixelRatio||1;return{x:Wm(t*s)/s||0,y:Wm(i*s)/s||0}}function P4(e){var t,i=e.popper,r=e.popperRect,s=e.placement,n=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,h=e.roundOffsets,f=e.isFixed,y=o.x,g=y===void 0?0:y,b=o.y,w=b===void 0?0:b,x=typeof h=="function"?h({x:g,y:w}):{x:g,y:w};g=x.x,w=x.y;var T=o.hasOwnProperty("x"),M=o.hasOwnProperty("y"),F=Js,D=Ws,R=window;if(u){var _=C_(i),q="clientHeight",W="clientWidth";if(_===ma(i)&&(_=ld(i),mc(_).position!=="static"&&a==="absolute"&&(q="scrollHeight",W="scrollWidth")),_=_,s===Ws||(s===Js||s===vo)&&n===Pv){D=go;var oe=f&&_===R&&R.visualViewport?R.visualViewport.height:_[q];w-=oe-r.height,w*=l?1:-1}if(s===Js||(s===Ws||s===go)&&n===Pv){F=vo;var te=f&&_===R&&R.visualViewport?R.visualViewport.width:_[W];g-=te-r.width,g*=l?1:-1}}var he=Object.assign({position:a},u&&I$e),ge=h===!0?T$e({x:g,y:w}):{x:g,y:w};if(g=ge.x,w=ge.y,l){var Te;return Object.assign({},he,(Te={},Te[D]=M?"0":"",Te[F]=T?"0":"",Te.transform=(R.devicePixelRatio||1)<=1?"translate("+g+"px, "+w+"px)":"translate3d("+g+"px, "+w+"px, 0)",Te))}return Object.assign({},he,(t={},t[D]=M?w+"px":"",t[F]=T?g+"px":"",t.transform="",t))}function $$e(e){var t=e.state,i=e.options,r=i.gpuAcceleration,s=r===void 0?!0:r,n=i.adaptive,o=n===void 0?!0:n,a=i.roundOffsets,l=a===void 0?!0:a,u={placement:Qa(t.placement),variation:Ym(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,P4(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,P4(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var C$e={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:$$e,data:{}};function E$e(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var r=t.styles[i]||{},s=t.attributes[i]||{},n=t.elements[i];!po(n)||!nl(n)||(Object.assign(n.style,r),Object.keys(s).forEach(function(o){var a=s[o];a===!1?n.removeAttribute(o):n.setAttribute(o,a===!0?"":a)}))})}function A$e(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(r){var s=t.elements[r],n=t.attributes[r]||{},o=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:i[r]),a=o.reduce(function(l,u){return l[u]="",l},{});!po(s)||!nl(s)||(Object.assign(s.style,a),Object.keys(n).forEach(function(l){s.removeAttribute(l)}))})}}var M$e={name:"applyStyles",enabled:!0,phase:"write",fn:E$e,effect:A$e,requires:["computeStyles"]};function O$e(e,t,i){var r=Qa(e),s=[Js,Ws].indexOf(r)>=0?-1:1,n=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,o=n[0],a=n[1];return o=o||0,a=(a||0)*s,[Js,vo].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function k$e(e){var t=e.state,i=e.options,r=e.name,s=i.offset,n=s===void 0?[0,0]:s,o=CW.reduce(function(h,f){return h[f]=O$e(f,t.rects,n),h},{}),a=o[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=o}var P$e={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:k$e},L$e={left:"right",right:"left",bottom:"top",top:"bottom"};function L1(e){return e.replace(/left|right|bottom|top/g,function(t){return L$e[t]})}var R$e={start:"end",end:"start"};function L4(e){return e.replace(/start|end/g,function(t){return R$e[t]})}function F$e(e,t){t===void 0&&(t={});var i=t,r=i.placement,s=i.boundary,n=i.rootBoundary,o=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,u=l===void 0?CW:l,h=Ym(r),f=h?a?A4:A4.filter(function(b){return Ym(b)===h}):E_,y=f.filter(function(b){return u.indexOf(b)>=0});y.length===0&&(y=f);var g=y.reduce(function(b,w){return b[w]=Lv(e,{placement:w,boundary:s,rootBoundary:n,padding:o})[Qa(w)],b},{});return Object.keys(g).sort(function(b,w){return g[b]-g[w]})}function N$e(e){if(Qa(e)===LL)return[];var t=L1(e);return[L4(e),t,L4(t)]}function D$e(e){var t=e.state,i=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=i.mainAxis,n=s===void 0?!0:s,o=i.altAxis,a=o===void 0?!0:o,l=i.fallbackPlacements,u=i.padding,h=i.boundary,f=i.rootBoundary,y=i.altBoundary,g=i.flipVariations,b=g===void 0?!0:g,w=i.allowedAutoPlacements,x=t.options.placement,T=Qa(x),M=T===x,F=l||(M||!b?[L1(x)]:N$e(x)),D=[x].concat(F).reduce(function(ns,Hi){return ns.concat(Qa(Hi)===LL?F$e(t,{placement:Hi,boundary:h,rootBoundary:f,padding:u,flipVariations:b,allowedAutoPlacements:w}):Hi)},[]),R=t.rects.reference,_=t.rects.popper,q=new Map,W=!0,oe=D[0],te=0;te<D.length;te++){var he=D[te],ge=Qa(he),Te=Ym(he)===Zm,Se=[Ws,go].indexOf(ge)>=0,vt=Se?"width":"height",$t=Lv(t,{placement:he,boundary:h,rootBoundary:f,altBoundary:y,padding:u}),st=Se?Te?vo:Js:Te?go:Ws;R[vt]>_[vt]&&(st=L1(st));var Kt=L1(st),yi=[];if(n&&yi.push($t[ge]<=0),a&&yi.push($t[st]<=0,$t[Kt]<=0),yi.every(function(ns){return ns})){oe=he,W=!1;break}q.set(he,yi)}if(W)for(var wo=b?3:1,ni=function(Hi){var So=D.find(function(tn){var ot=q.get(tn);if(ot)return ot.slice(0,Hi).every(function($r){return $r})});if(So)return oe=So,"break"},Tr=wo;Tr>0;Tr--){var yr=ni(Tr);if(yr==="break")break}t.placement!==oe&&(t.modifiersData[r]._skip=!0,t.placement=oe,t.reset=!0)}}var j$e={name:"flip",enabled:!0,phase:"main",fn:D$e,requiresIfExists:["offset"],data:{_skip:!1}};function z$e(e){return e==="x"?"y":"x"}function q0(e,t,i){return Hh(e,hx(t,i))}function V$e(e,t,i){var r=q0(e,t,i);return r>i?i:r}function U$e(e){var t=e.state,i=e.options,r=e.name,s=i.mainAxis,n=s===void 0?!0:s,o=i.altAxis,a=o===void 0?!1:o,l=i.boundary,u=i.rootBoundary,h=i.altBoundary,f=i.padding,y=i.tether,g=y===void 0?!0:y,b=i.tetherOffset,w=b===void 0?0:b,x=Lv(t,{boundary:l,rootBoundary:u,padding:f,altBoundary:h}),T=Qa(t.placement),M=Ym(t.placement),F=!M,D=RL(T),R=z$e(D),_=t.modifiersData.popperOffsets,q=t.rects.reference,W=t.rects.popper,oe=typeof w=="function"?w(Object.assign({},t.rects,{placement:t.placement})):w,te=typeof oe=="number"?{mainAxis:oe,altAxis:oe}:Object.assign({mainAxis:0,altAxis:0},oe),he=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,ge={x:0,y:0};if(!!_){if(n){var Te,Se=D==="y"?Ws:Js,vt=D==="y"?go:vo,$t=D==="y"?"height":"width",st=_[D],Kt=st+x[Se],yi=st-x[vt],wo=g?-W[$t]/2:0,ni=M===Zm?q[$t]:W[$t],Tr=M===Zm?-W[$t]:-q[$t],yr=t.elements.arrow,ns=g&&yr?PL(yr):{width:0,height:0},Hi=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:MW(),So=Hi[Se],tn=Hi[vt],ot=q0(0,q[$t],ns[$t]),$r=F?q[$t]/2-wo-ot-So-te.mainAxis:ni-ot-So-te.mainAxis,$p=F?-q[$t]/2+wo+ot+tn+te.mainAxis:Tr+ot+tn+te.mainAxis,xo=t.elements.arrow&&C_(t.elements.arrow),ya=xo?D==="y"?xo.clientTop||0:xo.clientLeft||0:0,os=(Te=he==null?void 0:he[D])!=null?Te:0,hl=st+$r-os-ya,pl=st+$p-os,Be=q0(g?hx(Kt,hl):Kt,st,g?Hh(yi,pl):yi);_[D]=Be,ge[D]=Be-st}if(a){var rr,Sy=D==="x"?Ws:Js,xy=D==="x"?go:vo,Io=_[R],fl=R==="y"?"height":"width",ud=Io+x[Sy],ga=Io-x[xy],as=[Ws,Js].indexOf(T)!==-1,rn=(rr=he==null?void 0:he[R])!=null?rr:0,jn=as?ud:Io-q[fl]-W[fl]-rn+te.altAxis,sn=as?Io+q[fl]+W[fl]-rn-te.altAxis:ga,ml=g&&as?V$e(jn,Io,sn):q0(g?jn:ud,Io,g?sn:ga);_[R]=ml,ge[R]=ml-Io}t.modifiersData[r]=ge}}var B$e={name:"preventOverflow",enabled:!0,phase:"main",fn:U$e,requiresIfExists:["offset"]},q$e=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,OW(typeof t!="number"?t:kW(t,E_))};function G$e(e){var t,i=e.state,r=e.name,s=e.options,n=i.elements.arrow,o=i.modifiersData.popperOffsets,a=Qa(i.placement),l=RL(a),u=[Js,vo].indexOf(a)>=0,h=u?"height":"width";if(!(!n||!o)){var f=q$e(s.padding,i),y=PL(n),g=l==="y"?Ws:Js,b=l==="y"?go:vo,w=i.rects.reference[h]+i.rects.reference[l]-o[l]-i.rects.popper[h],x=o[l]-i.rects.reference[l],T=C_(n),M=T?l==="y"?T.clientHeight||0:T.clientWidth||0:0,F=w/2-x/2,D=f[g],R=M-y[h]-f[b],_=M/2-y[h]/2+F,q=q0(D,_,R),W=l;i.modifiersData[r]=(t={},t[W]=q,t.centerOffset=q-_,t)}}function H$e(e){var t=e.state,i=e.options,r=i.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||!EW(t.elements.popper,s)||(t.elements.arrow=s))}var W$e={name:"arrow",enabled:!0,phase:"main",fn:G$e,effect:H$e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function R4(e,t,i){return i===void 0&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function F4(e){return[Ws,vo,go,Js].some(function(t){return e[t]>=0})}function J$e(e){var t=e.state,i=e.name,r=t.rects.reference,s=t.rects.popper,n=t.modifiersData.preventOverflow,o=Lv(t,{elementContext:"reference"}),a=Lv(t,{altBoundary:!0}),l=R4(o,r),u=R4(a,s,n),h=F4(l),f=F4(u);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:h,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":f})}var Z$e={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:J$e},Y$e=[w$e,x$e,C$e,M$e,P$e,j$e,B$e,W$e,Z$e],K$e=_$e({defaultModifiers:Y$e});const Q$e=["bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","top","top-start","top-end"],N4={base:"esri-popover",open:"esri-popover--open"},X$e={position:"fixed","z-index":"1000"};let Ua=class extends Yt{constructor(e,t){super(e,t),this._popper=null,this._contentNode=null,this._renderAttached=!1,this._rootNode=null,this.anchorElement=null,this.offset=[0,0],this.open=!1,this.renderContentFunction=null,this._afterRootCreate=i=>{this._rootNode=i},this._afterContentCreate=i=>{this._contentNode=i},this._updatePosition=()=>{N(this._popper)&&this._popper.update()}}initialize(){this.when(()=>{this.destroyed||(this._projector.append(document.body,this.render),this._renderAttached=!0)}),this.own(Pt(this,["open","anchorElement"],()=>this._buildPopper()),Pt(this,["placement","offset"],()=>this._setPopperOptions()))}destroy(){this.owner=null,this.anchorElement=null,this.renderContentFunction=null,this._renderAttached&&(this._projector.detach(this.render),this._renderAttached=!1),N(this._rootNode)&&(Yne(this._rootNode),this._rootNode=null),this._contentNode=null,N(this._popper)&&(this._popper.destroy(),this._popper=null)}set container(e){}set owner(e){this._set("owner",e)}get placement(){return"top"}set placement(e){Q$e.indexOf(e)!==-1?this._override("placement",e):this._clearOverride("placement")}render(){var e;const{open:t,owner:i,renderContentFunction:r}=this;return $("div",{afterCreate:this._afterRootCreate,class:this.classes(N4.base,t?N4.open:null),styles:X$e},$("div",{dir:rae((e=this.owner)==null?void 0:e.container),afterCreate:this._afterContentCreate,afterUpdate:this._updatePosition},t&&(r==null?void 0:r.call(i))))}_buildPopper(){N(this._popper)&&(this._popper.destroy(),this._popper=null);const e=this._contentNode;if(Q(e)||!this.open||!this.renderContentFunction)return;const t=this._getAnchor();t&&(this._popper=K$e(t,e),this._setPopperOptions())}_setPopperOptions(){const{placement:e,offset:t,_popper:i}=this;Q(i)||(i.setOptions({placement:e,modifiers:[{name:"offset",options:{offset:t}}]}),i.forceUpdate())}_getAnchor(){const{anchorElement:e}=this;return sI(typeof e=="function"?e():e)}};c([d()],Ua.prototype,"anchorElement",void 0),c([d()],Ua.prototype,"container",null),c([d()],Ua.prototype,"offset",void 0),c([d()],Ua.prototype,"open",void 0),c([d()],Ua.prototype,"owner",null),c([d()],Ua.prototype,"placement",null),c([d()],Ua.prototype,"renderContentFunction",void 0),Ua=c([O("esri.widgets.support.Popover")],Ua);const PW=Ua,Jr={base:"esri-button-menu",content:"esri-button-menu__content",contentWrapper:"esri-button-menu__content-wrapper",itemWrapper:"esri-button-menu__item-wrapper",label:"esri-button-menu__label",icon:"esri-button-menu__icon",item:"esri-button-menu__item",itemLabel:"esri-button-menu__item-label",itemLabelContent:"esri-button-menu__item-label-content",selectableMenuItem:"esri-button-menu__item--selectable",selectedMenuItem:"esri-button-menu__item--selected",checkbox:"esri-button-menu__checkbox",embeddedContentWrapper:"esri-button-menu__embedded-content-wrapper",button:"esri-button-menu__button",buttonSelected:"esri-button-menu__button--selected",defaultIconClass:"esri-icon-menu",widget:"esri-widget"};let bu=class extends Xs(Yt){constructor(e,t){super(e,t),this._menuContentNode=null,this._popover=null,this._rootNode=null,this.iconClass=null,this.items=null,this.label=null,this.open=null,this.viewModel=new GTe,this._handleOutsideClick=this._handleOutsideClick.bind(this)}postInitialize(){this._popover=new PW({owner:this,open:!!this.open,placement:Is(this.container)?"bottom-start":"bottom-end",renderContentFunction:this.renderMenuContent,anchorElement:this._rootNode}),this.handles.add([Qe(this,"open",e=>this._popover.set("open",e))]),document.addEventListener("click",this._handleOutsideClick)}destroy(){var e;(e=this._popover)==null||e.destroy(),this._popover=null,document.removeEventListener("click",this._handleOutsideClick)}_handleOutsideClick(e){var t,i;if(!this.open||!this._rootNode||!this._menuContentNode)return;const r=e.target;(t=this._menuContentNode)!=null&&t.contains(r)||(i=this._rootNode)!=null&&i.contains(r)||(this.open=!1)}render(){return $("div",{afterCreate:this._afterRootNodeCreate,bind:this,"data-node-ref":"_rootNode",class:this.classes(Jr.base,Jr.widget),key:"menu"},this.renderMenuButton())}renderMenuButton(){const{iconClass:e,id:t,label:i,open:r}=this,s=this.classes([Jr.button,e||Jr.defaultIconClass,r?Jr.buttonSelected:null]);return $("button",{"aria-pressed":r.toString(),"aria-controls":`${t}-menu`,"aria-expanded":r.toString(),"aria-haspopup":"true","aria-label":i,bind:this,class:s,id:`${t}-button`,title:i,selected:r,onclick:this._toggleOpen,tabindex:"0",type:"button"})}renderMenuContent(){var e;const{id:t,open:i}=this;return $("div",{afterCreate:this._afterMenuContentNodeCreate,bind:this,class:Jr.content,"data-node-ref":"_menuContentNode",key:"esri-button-menu-content",hidden:!i},$("ul",{"aria-labelledby":`${t}-button`,bind:this,class:Jr.itemWrapper,id:`${t}-menu`,role:"menu"},((e=this.items)==null?void 0:e.length)&&this.renderItems()))}renderItems(){var e;return(e=this.items)==null?void 0:e.map((t,i)=>this.renderItem(t,i))}renderItem(e,t,i){var r;const s=N(i)?`${this.id}-menu-item-${t}-${i}`:`${this.id}-menu-item-${t}`,n=`${s}-label`,o=this.classes(Jr.item,e.selectionEnabled?Jr.selectableMenuItem:null,e.selectionEnabled&&e.selected?Jr.selectedMenuItem:null);return $("li",{afterCreate:this._afterMenuItemCreate,bind:this,class:o,"data-item-index":t,"data-item-subIndex":i,for:s,key:s,onkeydown:a=>this._handleMenuItemKeydown(a,e),onclick:a=>this._handleMenuItemInteraction(a,e),role:"menuitem",tabindex:"0"},$("input",{disabled:!0,checked:e.selected,class:Jr.checkbox,id:s,name:s,tabindex:"-1",type:"checkbox"}),$("label",{bind:this,class:this.classes(Jr.button,Jr.itemLabel),for:s,id:n},$("span",{class:this.classes(Jr.icon,e.iconClass),"aria-hidden":"true"}),$("span",{class:Jr.itemLabelContent},e.label)),$("ul",{"aria-labelledby":n,class:Jr.embeddedContentWrapper,id:`${this.id}-submenu`,role:"menu"},e==null||(r=e.items)==null?void 0:r.map((a,l)=>this.renderItem(a,t,l))))}_afterRootNodeCreate(e){var t;this._rootNode=e,(t=this._popover)==null||t.set("anchorElement",()=>e)}_handleMenuItemInteraction(e,t){t.selected=!t.selected,t.open=!(!t.selected||!t.items),t.autoCloseMenu&&this.set("open",!1),t.clickFunction&&t.clickFunction({event:e,item:t}),e.stopPropagation()}_handleMenuItemKeydown(e,t){const i=Us(e);Mh(i)&&this._handleMenuItemInteraction(e,t),i==="Escape"&&(this.open=!1,e.preventDefault(),e.stopPropagation())}_afterMenuContentNodeCreate(e){this._menuContentNode=e,e.focus()}_toggleOpen(){this.open=!this.open}_afterMenuItemCreate(e){e["data-item-index"]===0&&e.focus()}};c([d()],bu.prototype,"iconClass",void 0),c([ne("viewModel.items")],bu.prototype,"items",void 0),c([d()],bu.prototype,"label",void 0),c([ne("viewModel.open")],bu.prototype,"open",void 0),c([d()],bu.prototype,"viewModel",void 0),bu=c([O("esri.widgets.FeatureTable.Grid.support.ButtonMenu")],bu);const LW=bu,lg={sortAscIcon:"esri-icon-arrow-up",sortDescIcon:"esri-icon-arrow-down",menuContainer:"esri-column__menu-container",menuIcon:"esri-icon-handle-horizontal",sorter:"esri-column__sorter"},D4={keyboardSort1:"Enter",keyboardSort2:"Spacebar"};let Ht=class extends Xs(bo.EventedAccessor){constructor(e){super(e),this._menuContainer=null,this.activeRowIndex=null,this.autoWidth=!1,this.cellValueFormatFunction=({value:t})=>mv.sanitize(t),this.flexGrow=1,this.footerRenderFunction=null,this.frozen=!1,this.grid=null,this.header=null,this.headerRenderFunction=t=>{const{root:i}=t,{header:r,headerMenuEnabled:s,path:n,sortable:o}=this;if(this.removeCellContent(i),o)return this.headerSorterRenderFunction(t),void(s&&this.headerMenuRenderFunction(t));s&&this.headerMenuRenderFunction(t);const a=r||n;i.innerHTML!==a&&(i.innerHTML=a)},this.headerMenuRenderFunction=({root:t})=>{var i,r;!((i=this.menu)==null||(r=i.items)==null)&&r.length&&t.appendChild(this._menuContainer)},this.headerSorterRenderFunction=({root:t})=>{var i;const{header:r,path:s,sortElement:n}=this,o=r||s;if(!n)return void(t.innerHTML=o);n.innerHTML!==o&&n.setAttribute("innerHTML",o),t.appendChild(n);const a=(i=this.grid)==null?void 0:i.getSlotElementByName(t.slot),l=a==null?void 0:a.parentElement;l&&!l.onkeydown&&(l.onkeydown=({key:u})=>{u!==D4.keyboardSort1&&u!==D4.keyboardSort2||n.click()})},this.hidden=!1,this.headerMenuEnabled=!0,this.initialSortPriority=null,this.menu=null,this.menuConfig=null,this.messages=null,this.messagesCommon=null,this.renderFunction=({root:t,column:i,rowData:r})=>{const s=this.getCellValue(i,r),n=this.cellValueFormatFunction({column:i,rowData:r,value:s});t.innerHTML!==n&&(t.innerHTML=n)},this.resizable=!0,this.sortable=!0,this.sortElement=null,this.textAlign="start",this.width=200}initialize(){const{messages:e,path:t}=this;this._set("sortElement",this.createSortElement()),this.sortElement.setAttribute("path",t),this._menuContainer=document.createElement("div"),this._menuContainer.classList.add(lg.menuContainer),this.menu=new LW(k({label:e==null?void 0:e.options,iconClass:lg.menuIcon},this.menuConfig)),this.menu.container=this._menuContainer,this.menu.set("items",this.getMenuItems()),this.handles.add([Qe(this,"hidden",()=>{var i;return(i=this.menu)==null?void 0:i.set("open",!1)})])}destroy(){var e;(e=this.menu)==null||e.destroy()}set direction(e){this.sortable&&(this.sortElement&&(e?this.sortElement.direction!==e&&this.sortElement.setAttribute("direction",e):this.sortElement.removeAttribute("direction")),this._set("direction",e))}get direction(){return this._get("direction")||null}set path(e){this.sortElement&&this.sortElement.path!==e&&this.sortElement.setAttribute("path",e),this._set("path",e)}getMenuItems(){const{menuConfig:e,sortable:t}=this,i=e==null?void 0:e.items,r=this.getSortMenuItems(),s=[];return t&&s.push(...r),i!=null&&i.length&&s.push(...i),s.length?s:null}getSortMenuItems(){const{messages:e}=this;return[{selected:this.direction==="asc",iconClass:lg.sortAscIcon,label:e==null?void 0:e.sortAsc,autoCloseMenu:!0,clickFunction:()=>this.set("direction",this.direction!=="asc"?"asc":null)},{selected:this.direction==="desc",iconClass:lg.sortDescIcon,label:e==null?void 0:e.sortDesc,autoCloseMenu:!0,clickFunction:()=>this.set("direction",this.direction!=="desc"?"desc":null)}]}getCellValue(e,t){var i;return(i=t==null?void 0:t.item[e==null?void 0:e.path])!=null?i:""}createSortElement(){const{direction:e,header:t,path:i,initialSortPriority:r}=this,s=t||i,n=document.createElement("vaadin-grid-sorter");return n.classList.add(lg.sorter),n.setAttribute("path",i),n.setAttribute("title",s),n.innerHTML=s,e&&n.setAttribute("direction",e),N(r)&&(n._initialOrder=r),n.addEventListener("direction-changed",()=>{this.direction!==n.direction&&this._set("direction",n.direction)}),n}removeCellContent(e){if(e)for(;e.firstChild;)try{e.removeChild(e.firstChild)}catch{}}};c([d()],Ht.prototype,"activeRowIndex",void 0),c([d()],Ht.prototype,"autoWidth",void 0),c([d()],Ht.prototype,"cellValueFormatFunction",void 0),c([d()],Ht.prototype,"direction",null),c([d()],Ht.prototype,"flexGrow",void 0),c([d()],Ht.prototype,"footerRenderFunction",void 0),c([d()],Ht.prototype,"frozen",void 0),c([d()],Ht.prototype,"grid",void 0),c([d()],Ht.prototype,"header",void 0),c([d()],Ht.prototype,"headerRenderFunction",void 0),c([d()],Ht.prototype,"headerMenuRenderFunction",void 0),c([d()],Ht.prototype,"headerSorterRenderFunction",void 0),c([d()],Ht.prototype,"hidden",void 0),c([d()],Ht.prototype,"headerMenuEnabled",void 0),c([d({constructOnly:!0})],Ht.prototype,"initialSortPriority",void 0),c([d()],Ht.prototype,"menu",void 0),c([d()],Ht.prototype,"menuConfig",void 0),c([d()],Ht.prototype,"messages",void 0),c([d()],Ht.prototype,"messagesCommon",void 0),c([d()],Ht.prototype,"path",null),c([d()],Ht.prototype,"renderFunction",void 0),c([d()],Ht.prototype,"resizable",void 0),c([d()],Ht.prototype,"sortable",void 0),c([d({readOnly:!0})],Ht.prototype,"sortElement",void 0),c([d()],Ht.prototype,"textAlign",void 0),c([d()],Ht.prototype,"width",void 0),Ht=c([O("esri.widgets.FeatureTable.Grid.Column")],Ht);const RW=Ht,eCe={attachmentsColumn:"esri-feature-table__column--attachments"};let wu=class extends RW{constructor(e){super(e),this.header="",this.path="EsriFeatureTableAttachmentsColumn",this.renderFunction=({root:t,rowData:i})=>{const r=this._countFromItem(i.item).toString();t.innerHTML=`<div class="${eCe.attachmentsColumn}">${r}</div>`},this.sortable=!1,this.textAlign="center"}_countFromItem(e){return e.attachments&&e.attachments.length||0}};c([d({constructOnly:!0})],wu.prototype,"header",void 0),c([d({readOnly:!0})],wu.prototype,"path",void 0),c([d()],wu.prototype,"renderFunction",void 0),c([d({readOnly:!0})],wu.prototype,"sortable",void 0),c([d({readOnly:!0})],wu.prototype,"textAlign",void 0),wu=c([O("esri.widgets.FeatureTable.AttachmentsColumn")],wu);const tCe=wu;var Mu,px;(function(e){e.Text="text",e.Number="number",e.Date="date",e.Unsupported="unsupported"})(Mu||(Mu={})),function(e){e.TOO_SHORT="length-validation-error::too-short"}(px||(px={}));const j4={type:"number"},z4={type:"number",intlOptions:{notation:"scientific"}},V4={type:"date",intlOptions:{day:"2-digit",month:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}};function U4(e){return e>=1e7||e<=-1e7}let yt=class extends Xs(Ee){constructor(e){super(e),this._storedValue=null,this.arcade=null,this.editableFunction=null,this.id=lm().toString(),this.requiredFunction=null,this.valueFunction=null,this.visibilityFunction=null,this.feature=null,this.field=null,this.fieldElement=null,this.layer=null,this.description=null,this.inputType=null,this.error=null,this.group=null,this.hint=null,this.messages=null,this.name=null}initialize(){this.handles.add(St(()=>this.value,(e,t)=>{if(e!==t){const{feature:i,name:r,value:s}=this;i.setAttribute(r,s)}}))}get _configAllowsEdits(){var e,t,i;const{fieldElement:r,layer:s,name:n}=this;if(N(r))return r.editable!==!1;const o=(s==null?void 0:s.type)!=="subtype-group"?s==null||(e=s.popupTemplate)==null||(t=e.fieldInfos)==null?void 0:t.find(({fieldName:a})=>a===n):null;return(i=o==null?void 0:o.isEditable)==null||i}get _layerFieldAllowsEdits(){const{field:e,layer:t}=this;return(t==null?void 0:t.capabilities.operations.supportsEditing)&&(e==null?void 0:e.editable)}get isUsingValueExpression(){return this._shouldUseValueExpression()}get evaluatedEditableExpression(){const{editableFunction:e}=this;if(Q(e))return null;const{arcade:t}=this;return t.arcadeUtils.executeFunction(e,t.arcadeUtils.createExecContext(this.feature))}get evaluatedRequiredExpression(){const{requiredFunction:e}=this;if(Q(e))return null;const{arcade:t}=this;return t.arcadeUtils.executeFunction(e,t.arcadeUtils.createExecContext(this.feature))}get evaluatedVisibilityExpression(){const{visibilityFunction:e}=this;if(Q(e))return null;const{arcade:t}=this;return t.arcadeUtils.executeFunction(e,t.arcadeUtils.createExecContext(this.feature))}get evaluatedValueExpression(){const{valueFunction:e}=this;if(Q(e))return null;const{arcade:t}=this;return t.arcadeUtils.executeFunction(e,t.arcadeUtils.createExecContext(this.feature))}set initialFeature(e){this._set("initialFeature",e),this.notifyChange("valid")}get domain(){var e;const{typeIdField:t}=this.layer,i=t===this.name,r=(e=this.field)==null?void 0:e.domain;if(i&&!r){const{layer:a}=this,l=a.type==="subtype-group"?a.sublayers.map(({subtypeCode:u,title:h})=>({id:u,name:h})):a.types.map(({id:u,name:h})=>({code:u,name:h}));return new dI({name:"__internal-type-based-coded-value-domain__",codedValues:l})}const{feature:s}=this,n=t&&this.layer.getFieldDomain(this.name,{feature:s})||r,o=Cx(this.fieldElement,"domain");return N(o)&&this._isDomainCompatible(o)?o:n}get editable(){var e;return!!this._layerFieldAllowsEdits&&((e=this.evaluatedEditableExpression)!=null?e:this._configAllowsEdits)}get errorMessage(){return this._toErrorMessage()}get includeTime(){var e;const{fieldElement:t}=this,i=N(t)&&((e=t.input)==null?void 0:e.type)==="datetime-picker"?t.input.includeTime:void 0;return i===void 0||i}get label(){return N(this.fieldElement)&&this.fieldElement.label||this.field.alias||this.field.name}get maxLength(){if(this.type===Mu.Date)return-1;const{field:t,fieldElement:i}=this,r=t==null?void 0:t.length,s=N(i)&&B4(i.input)?i.input.maxLength:NaN;return!isNaN(s)&&s>=-1&&(r===-1||s<=r)?s:r}get minLength(){if(this.type===Mu.Date)return-1;const{field:t,fieldElement:i}=this,r=t==null?void 0:t.length,s=N(i)&&B4(i.input)?i.input.minLength:NaN;return!isNaN(s)&&s>=-1&&(r===-1||s<=r)?s:-1}get required(){var e,t;return!!this.editable&&(((e=this.field)==null?void 0:e.nullable)===!1||(t=this.evaluatedRequiredExpression)!=null&&t)}get submittable(){const{field:e,required:t,valid:i,value:r}=this;return!!i||(!t||!Q(r))&&this.initialFeature.getAttribute(e.name)===r}get type(){const{field:e}=this;return ia(e)?Mu.Number:cE(e)?Mu.Text:uE(e)?Mu.Date:Mu.Unsupported}get valid(){const e=this.editable?this._validate():null;return this._set("error",e),e===null}get value(){return this._shouldUseValueExpression()?this.evaluatedValueExpression:this.get("_storedValue")}set value(e){this.notifyChange("evaluatedVisibilityExpression"),this.set("_storedValue",e)}get visible(){return!this._isEditorField()&&(N(this.fieldElement)?(e=this.evaluatedVisibilityExpression)==null||e:this._isVisibleByDefault());var e}_isDomainCompatible(e){const{field:t}=this;if((e==null?void 0:e.type)==="coded-value"){const i=typeof e.codedValues[0].code;if(i==="string"&&cE(t)||i==="number"&&ia(t))return!0}return!!((e==null?void 0:e.type)==="range"&&ia(t)||uE(t))}_validate(){const{domain:e,field:t,initialFeature:i,minLength:r,required:s,type:n,valid:o,value:a}=this,l=s&&a===null,u=o!==void 0;return!l&&i.getAttribute(t.name)===a&&u?null:n==="text"&&r>-1&&typeof a=="string"&&a.length<r?px.TOO_SHORT:e?a!==null||s?E6(e,a):null:l?km.INVALID_TYPE:nie(t,a)}_isVisibleByDefault(){var e;const t=(e=this.field)==null?void 0:e.type;return t!=="oid"&&t!=="global-id"&&!this._isGeometryField()}_isEditorField(){return Zte(this.layer).indexOf(this.name)>-1}_isGeometryField(){return Yte(this.layer).indexOf(this.name)>-1}_shouldUseValueExpression(){return this._layerFieldAllowsEdits&&!this._configAllowsEdits&&N(this.valueFunction)}_toErrorMessage(){const{domain:e,field:t,messages:i,minLength:r,value:s,required:n,type:o}=this,a=this.error;if(n&&s===null)return i.validationErrors.cannotBeNull;if(a===Xu.VALUE_OUT_OF_RANGE||a===sv.OUT_OF_RANGE){const l=A6(e)||aie(t);return wr(i.validationErrors.outsideRange,l,{format:{max:o==="date"?V4:U4(l.max)?z4:j4,min:o==="date"?V4:U4(l.min)?z4:j4}})}return a===Xu.INVALID_CODED_VALUE?i.validationErrors.invalidCodedValue:a===km.INVALID_TYPE?i.validationErrors.invalidType:a===px.TOO_SHORT?wr(i.validationErrors.tooShort,{min:r}):null}};function B4(e){return!!e&&"maxLength"in e}c([d()],yt.prototype,"_storedValue",void 0),c([d()],yt.prototype,"_configAllowsEdits",null),c([d()],yt.prototype,"_layerFieldAllowsEdits",null),c([d()],yt.prototype,"arcade",void 0),c([d()],yt.prototype,"editableFunction",void 0),c([d()],yt.prototype,"requiredFunction",void 0),c([d()],yt.prototype,"valueFunction",void 0),c([d()],yt.prototype,"isUsingValueExpression",null),c([d()],yt.prototype,"visibilityFunction",void 0),c([d()],yt.prototype,"evaluatedEditableExpression",null),c([d()],yt.prototype,"evaluatedRequiredExpression",null),c([d()],yt.prototype,"evaluatedVisibilityExpression",null),c([d()],yt.prototype,"evaluatedValueExpression",null),c([d()],yt.prototype,"feature",void 0),c([d()],yt.prototype,"field",void 0),c([d()],yt.prototype,"fieldElement",void 0),c([d()],yt.prototype,"initialFeature",null),c([d()],yt.prototype,"layer",void 0),c([d({aliasOf:"fieldElement.description"})],yt.prototype,"description",void 0),c([d()],yt.prototype,"domain",null),c([d()],yt.prototype,"editable",null),c([d({aliasOf:"fieldElement.input.type"})],yt.prototype,"inputType",void 0),c([d({readOnly:!0})],yt.prototype,"error",void 0),c([d({dependsOn:["error","messages","value"]})],yt.prototype,"errorMessage",null),c([d()],yt.prototype,"group",void 0),c([d({aliasOf:"fieldElement.hint"})],yt.prototype,"hint",void 0),c([d()],yt.prototype,"includeTime",null),c([d()],yt.prototype,"label",null),c([d()],yt.prototype,"maxLength",null),c([d()],yt.prototype,"minLength",null),c([d()],yt.prototype,"messages",void 0),c([d({aliasOf:"field.name"})],yt.prototype,"name",void 0),c([d()],yt.prototype,"required",null),c([d()],yt.prototype,"submittable",null),c([d()],yt.prototype,"type",null),c([d()],yt.prototype,"valid",null),c([d({value:null})],yt.prototype,"value",null),c([d()],yt.prototype,"visible",null),yt=c([O("esri.widgets.FeatureForm.InputField")],yt);const iCe=yt,q4={input:"esri-editor-column__cell-input",inputContainer:"esri-editor-column__cell-input--container"},G4={showInput:"Enter",hideInput:"Escape"};let Xr=class extends RW{constructor(e){super(e),this.activeEditInfo=null,this.cellValueValidatorFunction=({oldValue:t,value:i})=>t!==i,this.editable=!1,this.inputRenderFunction=({root:t,column:i,rowData:r})=>{var s,n;if((s=this.activeEditInfo)!=null&&s.updating||!this.editable)return;const o=this.getCellValue(i,r),a=this.createInputElement({root:t,column:i,rowData:r,value:o});this._set("activeEditInfo",{column:i,input:a,root:t,rowData:r,updating:!0,oldValue:o});const l=this.createInputContainer();l.appendChild(a),this.removeCellContent(t),t.appendChild(l),a.focus(),a instanceof HTMLInputElement&&a.select(),(n=this.grid)==null||n.notifyResize()},this.loadingMessage="",this.inputType="text",this.maxLength=null,this.parseInputValueFunction=({input:t})=>t.value,this.renderFunction=t=>{var i;const{root:r,column:s,rowData:n}=t,{activeEditInfo:o}=this;if(o&&o.updating)return;const a=this.getCellValue(s,n),l=this.cellValueFormatFunction({column:s,rowData:n,value:a});r.onclick=()=>r.focus(),r.ondblclick=()=>this.inputRenderFunction(t),r.ontouchend=()=>this.inputRenderFunction(t);const u=(i=this.grid)==null?void 0:i.getSlotElementByName(r.slot),h=u==null?void 0:u.parentElement;h&&!h.onkeydown&&(h.onkeydown=f=>{f.key!==G4.showInput||this.activeEditInfo||this.inputRenderFunction(t),f.key===G4.hideInput&&this.activeEditInfo&&this.cancel()}),(l==null?void 0:l.toString())!==r.innerHTML&&(r.innerHTML=l)},this.required=!1,this.store=null,this.updateRowItemFunction=({rowData:t,column:i,value:r})=>{t.item[i.path]=r},this.updateStoreItemFunction=({rowData:t,column:i,value:r})=>{var s;return(s=this.store)==null?void 0:s.updateItem({index:t.index,name:i.path,value:r})}}cancel(){var e;const{activeEditInfo:t}=this;if(!t)return;const{column:i,root:r,rowData:s,oldValue:n}=t;this._set("activeEditInfo",null);const o=this.cellValueFormatFunction({column:i,rowData:s,value:n});r.innerHTML=o,(e=this.grid)==null||e.notifyResize()}createInputContainer(){const e=document.createElement("div");return e.classList.add(q4.inputContainer),e}createInputElement({value:e}){const t=document.createElement("input");return t.classList.add(q4.input),t.maxLength=this.maxLength,t.type=this.inputType,t.value=e,t.onblur=()=>{t.onblur=null,this.submit()},t}async submit(){var e;const{activeEditInfo:t}=this;if(!t)return;const{column:i,input:r,root:s,rowData:n,oldValue:o}=t,a=this.parseInputValueFunction({input:r,column:i,rowData:n});if(!this.cellValueValidatorFunction({value:a,oldValue:o,column:i,rowData:n}))this.cancel();else{s.innerHTML=this.loadingMessage,(e=this.grid)==null||e.notifyResize();try{var l;await this.updateStoreItemFunction({rowData:n,column:i,value:a}),this.updateRowItemFunction({rowData:n,column:i,value:a});const u=this.getCellValue(i,n),h=this.cellValueFormatFunction({column:i,rowData:n,value:u});s.innerHTML=h,this.emit("value-change",{column:i,rowData:n,value:u}),this._set("activeEditInfo",null),(l=this.grid)==null||l.notifyResize()}catch{this.cancel()}}}};c([d({readOnly:!0})],Xr.prototype,"activeEditInfo",void 0),c([d()],Xr.prototype,"cellValueValidatorFunction",void 0),c([d()],Xr.prototype,"editable",void 0),c([d()],Xr.prototype,"inputRenderFunction",void 0),c([d({constructOnly:!0})],Xr.prototype,"loadingMessage",void 0),c([d()],Xr.prototype,"inputType",void 0),c([d()],Xr.prototype,"maxLength",void 0),c([d()],Xr.prototype,"parseInputValueFunction",void 0),c([d()],Xr.prototype,"renderFunction",void 0),c([d()],Xr.prototype,"required",void 0),c([d()],Xr.prototype,"store",void 0),c([d()],Xr.prototype,"updateRowItemFunction",void 0),c([d()],Xr.prototype,"updateStoreItemFunction",void 0),Xr=c([O("esri.widgets.FeatureTable.EditorColumn")],Xr);const rCe=Xr;function sCe(e,t){const i=N6(t),r=Date.now(),s=i.formatToParts(r),n=new Set;s.filter(({type:u})=>u==="literal").forEach(({value:u})=>n.add(u));let o=0;const a={};for(;s.length>0;){const{type:u,value:h}=s.shift();for(let f=0;f<h.length;f++,o++){const y=e.charAt(o);if(n.has(y)){o++;break}if(u==="literal")break;a[u]||(a[u]=[]),a[u].push(y)}}const l={};try{l.day=dC(a.day.join("")),l.month=dC(a.month.join(""))-1,l.year=dC((a.year||a.relatedYear).join(""))}catch{throw H4(t)}if(isNaN(l.day)||isNaN(l.month)||isNaN(l.year))throw H4(t);return l}function dC(e){const t=[//g,//g,//g,//g,//g,//g,//g,//g,//g,//g];for(let i=0;i<10;i++)e=e.replace(t[i],i.toString());return Number(e)}function H4(e){return new B(`could not parse date input, expecting the following format: ${fi(Date.now(),e)}`)}const cg={ar:6,"ar-dz":6,"ar-kw":6,"ar-ly":6,"ar-ma":1,"ar-sa":7,"ar-tn":1,bg:1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":7,"en-gb":1,"en-ie":1,"en-il":7,"en-in":7,"en-nz":1,"en-sg":7,es:1,"es-do":7,"es-mx":7,"es-us":7,et:1,fi:1,fr:1,"fr-ca":7,"fr-ch":1,he:7,hr:1,hu:1,id:7,it:1,"it-ch":1,ja:7,ko:7,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:7,"pt-br":7,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:7,tr:1,uk:1,vi:1,"zh-cn":7,"zh-hk":7,"zh-mo":7,"zh-tw":7},nCe="Locale"in Intl&&"weekInfo"in Intl.Locale.prototype;function FW(e){if(e=e.toLowerCase(),cg[e])return cg[e];if(nCe)try{const i=new Intl.Locale(e).weekInfo.firstDay;return cg[e]=i,i}catch{}const t=gX(e);return cg[t]?cg[t]:7}function oCe(e,t){return(t+7-FW(e))%7}let m0=class extends Ee{constructor(){super(...arguments),this.state="ready",this.value=new Date}};c([d()],m0.prototype,"state",void 0),c([d()],m0.prototype,"value",void 0),m0=c([O("esri.widgets.support.DateTimeElementViewModel")],m0);const NW=m0;let nO=class extends NW{constructor(e){super(e)}};nO=c([O("esri.widgets.support.DatePickerViewModel")],nO);const DW=nO,xt={base:"esri-date-picker",datePicker:"esri-date-picker__calendar",monthPicker:"esri-date-picker__month-picker",dayPicker:"esri-date-picker__day-picker",week:"esri-date-picker__week-item",nearbyMonth:"esri-date-picker__day-item--nearby-month",activeDay:"esri-date-picker__day-item--active",today:"esri-date-picker__day-item--today",selectedDay:"esri-date-picker__day-item--selected",day:"esri-date-picker__day-item",dayHeader:"esri-date-picker__day-item--header",yearPicker:"esri-date-picker__year-picker",selectedYear:"esri-date-picker__year-picker-item--selected",year:"esri-date-picker__year-picker-item",monthDropdown:"esri-date-picker__month-dropdown",date:"esri-date-picker__date",datePickerToggle:"esri-date-picker__calendar-toggle",dateInput:"esri-date-picker__input",dateTextInput:"esri-date-picker__text-input",leadingIcon:"esri-date-picker__icon--leading",previousIcon:"esri-icon-left",nextIcon:"esri-icon-right",calendarIcon:"esri-icon-calendar",widget:"esri-widget",button:"esri-widget--button",input:"esri-input",select:"esri-select"},Zp={year:"numeric",month:"2-digit",day:"2-digit"},aCe=[" ","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","Home","PageDown","PageUp"],jW="esri.widgets.support.DatePicker",lCe=fe.getLogger(jW);let wn=class extends Yt{constructor(e,t){super(e,t),this._activeDate=null,this._calendarNode=null,this._calendarPopover=new PW({owner:this,placement:"bottom-start",anchorElement:()=>this._rootNode,renderContentFunction:this._renderCalendar}),this._inputOrButtonNode=null,this._isOpen=!1,this._requestDayPickerFocusOnCreate=!1,this._rootNode=null,this.dateInputEnabled=!1,this.label=void 0,this.messages=null,this.value=null,this.commitOnMonthChange=!1,this.viewModel=new DW,this._toggle=this._toggle.bind(this)}initialize(){this.own(St(()=>{var e;return{viewModel:this.viewModel,value:(e=this.viewModel)==null?void 0:e.value}},({viewModel:e,value:t})=>{this.destroyed||!e||Q(this.onChange)||this.onChange(t)},lS))}destroy(){this._calendarPopover.destroy()}render(){return $("div",{afterCreate:Mn,bind:this,class:this.classes(xt.base,xt.widget),"data-node-ref":"_rootNode"},this.dateInputEnabled?this.renderInputAndButtonMode():this.renderButtonOnlyMode())}renderButtonOnlyMode(){const e=fi(this.viewModel.value,Zp),{_isOpen:t,messages:i}=this;return $("div",{afterCreate:Mn,"aria-controls":t?this._getCalendarId():null,"aria-expanded":t.toString(),"aria-haspopup":"true","aria-label":i.setDate,"aria-pressed":t.toString(),bind:this,class:this.classes(xt.button,xt.select,xt.datePickerToggle),"data-node-ref":"_inputOrButtonNode",onclick:this._toggle,onkeydown:this._handleDateButtonKeyDown,role:"button",tabIndex:0},$("span",{class:xt.date},e))}renderInputAndButtonMode(){const e=fi(this.viewModel.value,Zp),{_isOpen:t,messages:i}=this;return $("div",{class:this.classes(xt.dateInput)},$("input",{afterCreate:Mn,"data-node-ref":"_inputOrButtonNode","aria-controls":t?this._getCalendarId():null,"aria-haspopup":"true","aria-label":i.setDate,bind:this,class:this.classes(xt.dateTextInput,xt.input),key:"date-input",onblur:this._handleDateInputBlur,onclick:this._handleDateInputClick,onkeydown:this._handleDateInputKeyDown,type:"text",value:e}),$("span",{"aria-hidden":"true",class:this.classes(xt.leadingIcon,xt.calendarIcon)}))}_handleDateInputClick(){this._open(this.viewModel.value,!1)}_handleDateInputKeyDown(e){const{key:t}=e;this._isOpen?t==="Enter"?this._handleDateText(e):t==="Escape"&&this._close():t==="ArrowDown"&&(this._open(this.viewModel.value),e.preventDefault())}_handleDateButtonKeyDown(e){const{key:t,shiftKey:i}=e;this._isOpen&&t==="Tab"&&i?this._close():Mh(t)&&this._toggle()}_handleDateInputBlur(e){this._isOpen||this._handleDateText(e)}_handleDateText(e){const t=e.currentTarget;let i;try{i=sCe(t.value,Zp)}catch(s){return lCe.warn(s),void(t.value=fi(this.viewModel.value,Zp))}const r=Ve.fromObject(i);r.isValid?(this.viewModel.value=r.toJSDate(),this._activeDate=r):t.value=fi(this.viewModel.value,Zp)}_handleDatePickerKeydown(e){Us(e)==="Escape"&&(this._close(),e.preventDefault(),e.stopPropagation())}_renderCalendar(){const e=this._activeDate,t=Ve.fromJSDate(this.viewModel.value);return $("div",{afterCreate:Mn,bind:this,class:this.classes(xt.datePicker,xt.widget),"data-node-ref":"_calendarNode",id:this._getCalendarId(),key:"esri-date-picker__calendar",onkeydown:this._handleDatePickerKeydown},this._renderMonthPicker(e),this._renderDayPicker(e,t),this._renderYearPicker(e))}_getCalendarId(){return`date-picker__calendar--${this.id}`}_renderMonthPicker(e){const t=Is(this.container),i=t?xt.nextIcon:xt.previousIcon,r=t?xt.previousIcon:xt.nextIcon,s=Yg.months("long",{locale:mr()}).map((o,a)=>{const l=e.month-1===a;return $("option",{selected:l,value:a.toString()},o)}),{messages:n}=this;return $("div",{class:xt.monthPicker},$("div",{"aria-label":n.goToPreviousMonth,bind:this,class:xt.button,onclick:this._setPreviousMonth,onkeydown:this._handlePreviousMonthKeyDown,role:"button",tabIndex:0,title:n.goToPreviousMonth},$("span",{"aria-hidden":"true",class:i})),$("select",{"aria-live":"assertive","aria-label":n.selectMonth,bind:this,class:this.classes(xt.monthDropdown,xt.select),id:`${this.id}__month-picker`,onchange:this._setMonth,onkeydown:this._setMonth,title:n.selectMonth},s),$("div",{"aria-label":n.goToNextMonth,bind:this,class:xt.button,onclick:this._setNextMonth,onkeydown:this._setNextMonth,role:"button",tabIndex:0,title:n.goToNextMonth},$("span",{"aria-hidden":"true",class:r})))}_renderDayPicker(e,t){const i=this._getWeekLabels(),r=this._getDayId(e),s=this._renderMonth(e,t);return $("div",{afterCreate:this._handleDayPickerCreate,"aria-activedescendant":r,"aria-labelledby":`${this.id}__month-picker ${this.id}__selected-year`,bind:this,class:xt.dayPicker,id:`${this.id}__day-picker`,onkeydown:this._handleDayPickerKeydown,role:"grid",tabIndex:0},$("div",{class:xt.week,role:"row"},i.map(n=>$("div",{"aria-label":n.name,class:this.classes(xt.day,xt.dayHeader),role:"columnheader",title:n.name},n.abbr))),s)}_getDayId(e){return`${this.id}__${fi(e.valueOf(),Zp)}`}_handleDayPickerCreate(e){this._requestDayPickerFocusOnCreate&&(this._requestDayPickerFocusOnCreate=!1,e.focus())}_getWeekLabels(){const e=[],t={weekday:"long"},i={weekday:"narrow"};let r=Ve.now().set({weekday:FW(mr())});for(let s=0;s<7;s++)e.push({name:fi(r.valueOf(),t),abbr:fi(r.valueOf(),i)}),r=r.plus({day:1});return e}_handleDayPickerKeydown(e){const{ctrlKey:t,shiftKey:i}=e,r=Us(e);if(aCe.indexOf(r)===-1)return;let s=this._activeDate;if(r==="ArrowLeft")s=s.minus({day:1});else if(r==="ArrowRight")s=s.plus({day:1});else if(r==="ArrowUp")s=s.minus({week:1});else if(r==="ArrowDown")s=s.plus({week:1});else if(r==="PageUp"){const n=i?"year":"month";s=s.minus({[n]:1})}else if(r==="PageDown"){const n=i?"year":"month";s=s.plus({[n]:1})}else if(r==="Home"){const n=t?"year":"month";s=s.startOf(n)}else if(r==="End"){const n=t?"year":"month";s=s.endOf(n)}else Mh(r)&&(this.viewModel.value=s.toJSDate(),this._close());this._activeDate=s,e.preventDefault(),e.stopPropagation()}_renderMonth(e,t){const i=Ve.now(),r=e.startOf("month"),s=e.endOf("month"),n=6,o=7;let a=r.minus({day:oCe(mr(),r.weekday)});const l=[];for(let u=0;u<n;u++){const h=[];for(let f=0;f<o;f++){const y=a.day,g=a.hasSame(e,"day"),b=a.hasSame(t,"day"),w=this._getDayId(a),x=$i.fromDateTimes(r,s),T={[xt.nearbyMonth]:!x.contains(a),[xt.today]:a.hasSame(i,"day"),[xt.activeDay]:g,[xt.selectedDay]:b};h.push($("div",{"aria-label":y.toString(),"aria-selected":g.toString(),bind:this,class:this.classes(xt.day,T),"data-iso-date":a.toISO(),id:w,onclick:this._handleSelectedDate,onkeydown:this._handleSelectedDate,role:"gridcell"},y)),a=a.plus({day:1})}l.push($("div",{class:xt.week,role:"row"},h))}return l}_renderYearPicker(e){const t={year:"numeric"},i=e,r=fi(i.valueOf(),t),s=fi(i.plus({year:1}).valueOf(),t),n=fi(i.minus({year:1}).valueOf(),t),{messages:o}=this;return $("div",{class:xt.yearPicker},$("div",{"aria-label":o.goToPreviousYear,bind:this,class:xt.year,onclick:this._setPreviousYear,onkeydown:this._setPreviousYear,tabIndex:0,title:o.goToPreviousYear},n),$("div",{class:this.classes(xt.year,xt.selectedYear),id:`${this.id}__selected-year`},r),$("div",{"aria-label":o.goToNextYear,bind:this,class:xt.year,onclick:this._setNextYear,onkeydown:this._handleNextYearKeyDown,tabIndex:0,title:o.goToNextYear},s))}_toggle(){this._isOpen?this._close():this._open(this.viewModel.value)}_setMonth(e){const t=e.target,i=Number(t.value)+1;this._activeDate=this._activeDate.set({month:i}),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toJSDate())}_close(e=!0){this._activeDate=null,this._isOpen=!1,this._calendarPopover.open=!1,this.pageClickHandler.pause(),e&&this._inputOrButtonNode.focus()}_open(e,t=!0){this._activeDate=Ve.fromJSDate(e),this._isOpen=!0,this._calendarPopover.open=!0,this._requestDayPickerFocusOnCreate=t,this.pageClickHandler||(this.pageClickHandler=CY(document,"click",({target:i})=>{var r,s;((r=this._calendarNode)==null?void 0:r.contains(i))||((s=this._rootNode)==null?void 0:s.contains(i))||this._close()}),this.own(this.pageClickHandler)),this.pageClickHandler.resume()}_setPreviousMonth(){this._activeDate=this._activeDate.minus({month:1}),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toJSDate())}_handlePreviousMonthKeyDown(e){if(e.key==="Tab"&&e.shiftKey)return e.preventDefault(),void this._close();Mh(e.key)&&this._setPreviousMonth()}_setNextMonth(){this._activeDate=this._activeDate.plus({month:1}),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toJSDate())}_setPreviousYear(){this._activeDate=this._activeDate.minus({year:1})}_setNextYear(){this._activeDate=this._activeDate.plus({year:1})}_handleNextYearKeyDown(e){if(e.key==="Tab"&&!e.shiftKey)return e.preventDefault(),void this._close();Mh(e.key)&&this._setNextYear()}_handleSelectedDate(e){const t=e.target;this.viewModel.value=Ve.fromISO(t.getAttribute("data-iso-date")).toJSDate(),this._close()}};c([d()],wn.prototype,"dateInputEnabled",void 0),c([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],wn.prototype,"label",void 0),c([d(),Zt("esri/widgets/support/t9n/DatePicker")],wn.prototype,"messages",void 0),c([ne("viewModel.value")],wn.prototype,"value",void 0),c([d()],wn.prototype,"commitOnMonthChange",void 0),c([d({type:DW})],wn.prototype,"viewModel",void 0),c([d()],wn.prototype,"onChange",void 0),c([pr()],wn.prototype,"_setNextMonth",null),c([pr()],wn.prototype,"_setPreviousYear",null),c([pr()],wn.prototype,"_handleSelectedDate",null),wn=c([O(jW)],wn);const cCe=wn;let oO=class extends NW{constructor(e){super(e)}};oO=c([O("esri.widgets.support.TimePickerViewModel")],oO);const zW=oO,hC={base:"esri-time-picker esri-widget",timePicker:"esri-time-picker__date-picker",timePickerInput:"esri-time-picker__input",input:"esri-input",button:"esri-widget--button"},aO={hour:"numeric",minute:"numeric"},W4="t",uCe=["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","Tab"];function J4(e){return fi(e.valueOf(),aO).indexOf(" ")>-1}let ph=class extends Yt{constructor(e,t){super(e,t),this._activeTime=null,this.label=void 0,this.messages=null,this.value=null,this.viewModel=new zW}render(){const e=this._activeTime||this.viewModel.value;return $("div",{class:hC.base},$("input",{afterUpdate:this._handleInputUpdate,"aria-label":this.messages.inputTitle,bind:this,class:this.classes(hC.timePickerInput,hC.input),onblur:this._handleInputBlur,onfocus:this._handleInputFocus,onkeydown:this._handleInputKeydown,oninput:this._handleInputKeydown,onclick:this._handleInputClick,onpaste:this._handleInputPaste,onwheel:this._handleInputWheel,value:fi(e.valueOf(),aO)}))}_handleInputBlur(){this._activeTime.isValid&&(this.viewModel.value=this._activeTime.toJSDate()),this._activeTime=null,this._activePart=null}_handleInputUpdate(e){this._selectPart(e,this._activePart)}_selectPart(e,t){const i=this._activeTime;if(!i)return;const r=fi(i.valueOf(),aO),s=0,n=r.indexOf(":");if(t==="hours")return void e.setSelectionRange(s,n);const o=n+1,a=o+2;if(t==="minutes")return void e.setSelectionRange(o,a);const l=a+1,u=r.length;t!=="meridiem"||e.setSelectionRange(l,u)}_handleInputFocus(e){this._activePart="hours",this._activeTime=Ve.fromJSDate(this.viewModel.value).startOf("minute"),this._selectPart(e.target,"hours")}_caretIndexToPartName(e){const t=this._activeTime.toFormat(W4,{locale:mr(),numberingSystem:"latn"}),i=t.indexOf(":"),r=t.indexOf(" ");return e<=i?"hours":e>i&&e<=r?"minutes":"meridiem"}_handleInputKeydown(e){const{ctrlKey:t,metaKey:i,shiftKey:r}=e,s=Us(e),n=this._activeTime,o=this._activePart,a=/\d/.test(s),l=/^a|p$/i.test(s),u=i||t;if(uCe.indexOf(s)>-1||a||o==="meridiem"&&l&&!u){if(s==="ArrowLeft")this._activePart=this._prevPart();else if(s==="ArrowRight")this._activePart=this._nextPart();else if(s==="Tab"){const h=r?this._prevPart():this._nextPart();if(h===this._activePart)return;this._activePart=h}else if(s==="ArrowUp")this._shift("up",o);else if(s==="ArrowDown")this._shift("down",o);else if(a)this._setTime(n,o,Number(s));else if(l){const h=s.toLowerCase(),f=n.hour;(h==="a"&&f>=12||h==="p"&&f<12)&&this._shift("up",o)}e.preventDefault(),e.stopImmediatePropagation()}else u||(e.preventDefault(),e.stopImmediatePropagation())}_handleInputClick(e){const t=e.target;this._activePart=null,this.renderNow(),this._activePart=this._caretIndexToPartName(t.selectionStart)}_getOrderedParts(){return J4(this._activeTime)?["hours","minutes","meridiem"]:["hours","minutes"]}_prevPart(){const e=this._getOrderedParts(),t=e.indexOf(this._activePart)-1;return e[Math.max(t,0)]}_nextPart(){const e=this._getOrderedParts(),t=e.indexOf(this._activePart)+1;return e[Math.min(t,e.length-1)]}_setTime(e,t,i){if(t==="hours"){const r=J4(e)?12:24,s=""+e.hour%r,n=i,o=Number(`${s}${i}`);s.length===2||o>r?e.set({hour:n}):o<=r&&e.set({hour:o})}else if(t==="minutes"){const s=`${e.minute}`,n=i,o=Number(`${s}${i}`);s.length===2||o>59?e.set({minute:n}):o<59&&e.set({minute:o})}}_parseTime(e){const t={locale:mr(),numberingSystem:"latn"};let i=Ve.fromFormat(e,W4,t);return i.isValid?i:(i=Ve.fromISO(e,t),i.isValid?i:(i=Ve.fromRFC2822(e,t),i.isValid?i:(i=Ve.fromJSDate(new Date(e)),i.isValid?i:null)))}_handleInputPaste(e){const t=e.clipboardData.getData("text/plain"),i=this._parseTime(t);i&&(this._activeTime=i),e.preventDefault(),e.stopImmediatePropagation()}_handleInputWheel(e){const t=e.deltaY<0?"up":"down";this._shift(t,this._activePart)}_shift(e,t){if(!e||!t)return;const i=e==="up"?"plus":"minus",r=t==="meridiem"?12:1,s=t==="hours"?"hour":t==="minutes"?"minute":"hours";this._activeTime=this._activeTime[i]({[s]:r})}};c([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ph.prototype,"label",void 0),c([d(),Zt("esri/widgets/support/t9n/TimePicker")],ph.prototype,"messages",void 0),c([ne("viewModel.value")],ph.prototype,"value",void 0),c([d({type:zW})],ph.prototype,"viewModel",void 0),ph=c([O("esri.widgets.support.TimePicker")],ph);const dCe=ph,hCe={cancelEdit:"Escape"},wa={headerContent:"esri-field-column__header-content",input:"esri-field-column__cell-input",inputContainer:"esri-field-column__cell__input-container",dateInputContainer:"esri-field-column__cell__date-input-container",dateInputWrapper:"esri-field-column__cell__date-input-wrapper",button:"esri-field-column__button",saveIcon:"esri-icon-save",trashIcon:"esri-icon-trash",locked:"esri-icon-locked"},pCe=oy("short-date-short-time"),fCe=oy("short-date"),mCe=Yx({digitSeparator:!0,places:null});function yCe(e){return(e==null?void 0:e.type)==="feature"}let Wt=class extends rCe{constructor(e){super(e),this._inputField=null,this.alias=null,this.cellValueFormatFunction=({rowData:t,value:i})=>{if(this.formatFunction){const{config:u,field:h}=this;return this.formatFunction({config:u,field:h,value:mv.sanitize(i)})}if(i===null)return"&nbsp;";const{config:r,field:s,type:n}=this,{item:{feature:o}}=t,a=this._getDomainForFeature(o);if(a)return this._getComputedDomain(i,a);if(n==="date"){var l;const u=r!=null&&(l=r.format)!=null&&l.dateFormat?oy(r.format.dateFormat):(r==null?void 0:r.includeTime)===!1?fCe:pCe,h=yCe(this.layer)&&this.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null;return i?fi(i,k(k({},u),h)):null}if(ia(s)){const u=r!=null&&r.format?Yx(r.format):mCe;return ha(parseFloat(i),u)}return mv.sanitize(i)},this.cellValueValidatorFunction=({oldValue:t,value:i})=>t!==i,this.config=null,this.defaultValue=null,this.description=null,this.editingEnabled=!1,this.field=null,this.formatFunction=null,this.headerRenderFunction=t=>{const{root:i}=t,{editable:r,editingEnabled:s,headerMenuEnabled:n,sortable:o}=this;if(this.removeCellContent(i),i.classList.add(wa.headerContent),s&&!r&&i.appendChild(this.createLockedElement()),o)this.headerSorterRenderFunction(t);else{const{header:a,path:l}=this,u=document.createElement("div");u.innerHTML=a||l,i.appendChild(u)}n&&this.headerMenuRenderFunction(t)},this.inputRenderFunction=({root:t,column:i,rowData:r})=>{var s,n;if((s=this.activeEditInfo)!=null&&s.updating||!this.editable)return;const o=this.getCellValue(i,r),a=this.createInputElement({root:t,column:i,rowData:r,value:o});if(this._set("activeEditInfo",{column:i,input:a,root:t,rowData:r,updating:!0,oldValue:o}),this.type==="date")return void this._renderDateEditors(o,t,a);const l=this.createInputContainer();l.appendChild(a),this.removeCellContent(t),t.appendChild(l),a.focus(),a instanceof HTMLInputElement&&a.select(),(n=this.grid)==null||n.notifyResize()},this.layer=null,this.menuConfig=null,this.name=null,this.nullable=!0,this.parseInputValueFunction=({input:t})=>{const i=this._inputField,r=t.value,{required:s,type:n}=i;return s||r!==""?n==="number"||n==="date"?parseFloat(r):r:null},this.type=null,this.updateRowItemFunction=({rowData:t,column:i,value:r})=>{t.item.feature.attributes[i.path]=r}}get editable(){var e,t,i;return this.editingEnabled?this.config?this.config.editable!==!1&&((t=this.field)==null?void 0:t.editable):(i=this.field)==null?void 0:i.editable:!!this.config&&this.config.editable===!0&&((e=this.field)==null?void 0:e.editable)}get header(){var e;return((e=this.config)==null?void 0:e.label)||this.alias||this.path||null}get hidden(){const{config:e}=this;return(e==null?void 0:e.visible)===!1||this._get("hidden")||!1}set hidden(e){this._set("hidden",e)}get loadingMessage(){var e;return((e=this.messages)==null?void 0:e.loading)||"..."}get maxLength(){var e,t;const i=(e=this.field)==null?void 0:e.length,r=(t=this.config)==null?void 0:t.maxLength;return!isNaN(r)&&r>=-1&&(i===-1||r<=i)?r:i}get path(){var e;return((e=this.field)==null?void 0:e.name)||null}get required(){const e=this.get("field.nullable"),t=this.get("config.required");return this.editable&&(!e||t===!0)}get sortable(){var e;return((e=this.config)==null?void 0:e.sortable)!==!1}createInputElement({rowData:e,value:t}){const{item:i}=e;if(!i||!i.feature)return null;this._inputField=this._setUpInputField(i.feature,t);const{field:r,maxLength:s,required:n}=this,{domain:o}=this._inputField;let a=null;(o==null?void 0:o.type)==="coded-value"?(a=this._createSelectElement(t,o.codedValues.map(({code:h,name:f})=>({value:h,name:f})),this._inputField),a.onchange=()=>{a.onblur=null,u()}):(a=document.createElement("input"),a.type=ia(r)?"number":"text",s>-1&&(a.maxLength=s)),a.classList.add(wa.input),a.value=t,a.required=n;let l=!1;a.onkeydown=h=>{l=h.key===hCe.cancelEdit},a.onblur=()=>{a.onblur=null,u()};const u=()=>{l?this.cancel():this.submit(),this._inputField=null};return a}createInputContainer(){const e=document.createElement("div");return e.classList.add(wa.inputContainer),e}createLockedElement(){const e=document.createElement("div");return e.classList.add(wa.locked),e}getCellValue({path:e},{item:t}){var i,r,s;return(i=t==null||(r=t.feature)==null||(s=r.attributes)==null?void 0:s[e])!=null?i:null}_renderDateEditors(e,t,i){var r;const{config:s,messagesCommon:n}=this,o=e?new Date(e):new Date(Date.now()),a=new cCe({dateInputEnabled:!0,value:o}),l=new dCe({value:o});i.value=o.getTime().toString();let u=!e;const h=()=>{u=!0;const F=this._getCombinedDateTime(a.value,l.value);i.value=F.getTime().toString()},f=()=>{u?this.submit():this.cancel()},y=()=>{i.value=null,this.submit()};a.watch("value",()=>h()),l.watch("value",()=>h());const g=document.createElement("div"),b=document.createElement("div");a.container=g,l.container=b;const w=document.createElement("button");w.classList.add(wa.button,wa.saveIcon),w.onclick=()=>f(),w.title=n==null?void 0:n.save;const x=document.createElement("button");x.classList.add(wa.button,wa.trashIcon),x.onclick=()=>y(),x.title=n==null?void 0:n.clear;const T=document.createElement("div");T.classList.add(wa.dateInputWrapper),T.appendChild(g),s.includeTime!==!1&&T.appendChild(b);const M=document.createElement("div");M.classList.add(wa.dateInputContainer),M.appendChild(T),M.appendChild(w),M.appendChild(x),a.when(()=>{var F;return(F=this.grid)==null?void 0:F.notifyResize()}),l.when(()=>{var F;return(F=this.grid)==null?void 0:F.notifyResize()}),this.removeCellContent(t),t.appendChild(M),(r=this.grid)==null||r.notifyResize()}_createSelectElement(e,t,i){let r=!1;const s=t.map(o=>{o.value===e&&(r=!0);const a=document.createElement("option");return a.text=o.name,a.value=o.value,a});if(e!=null&&e!==""&&!r){const o=document.createElement("option");o.text=e,o.value=e,s.unshift(o)}if(!i.required&&i.value==null){const o=document.createElement("option");o.value="",s.unshift(o)}const n=document.createElement("select");return s.forEach(o=>n.add(o)),n.value=e,n}_setUpInputField(e,t){const{config:i,field:r,layer:s}=this,n=new iCe({config:i,feature:e,field:r,layer:s,group:null,messages:null});return n.set("value",t),n}_isDomainCompatible(e){const{field:t}=this;if(e&&e.type==="coded-value"){const i=typeof e.codedValues[0].code;if(i==="string"&&cE(t)||i==="number"&&ia(t))return!0}return!(!e||e.type!=="range"||!ia(t))}_getDomainForFeature(e){const{layer:t,name:i}=this;if(t.type==="wfs"||t.type==="geojson")return null;const{typeIdField:r}=t,s=r===i,n=this.get("field.domain");if(s&&!n)return new dI({name:"__internal-type-based-coded-value-domain__",codedValues:t.types.map(({id:l,name:u})=>({code:l,name:u}))});const o=r&&t.getFieldDomain(i,{feature:e})||n,a=this.get("config.domain");return this._isDomainCompatible(a)?a:o}_getComputedDomain(e,t){if(!t)return null;if(t.type==="range")return e;if(t.type==="coded-value"){const i=t.codedValues.filter(r=>r.hasOwnProperty("code")&&r.code===e);return i&&i.length?i[0].name:e}return null}_getCombinedDateTime(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())}};c([d({readOnly:!0,aliasOf:"field.alias"})],Wt.prototype,"alias",void 0),c([d()],Wt.prototype,"cellValueFormatFunction",void 0),c([d()],Wt.prototype,"cellValueValidatorFunction",void 0),c([d()],Wt.prototype,"config",void 0),c([d({readOnly:!0,aliasOf:"field.defaultValue"})],Wt.prototype,"defaultValue",void 0),c([d({readOnly:!0,aliasOf:"field.description"})],Wt.prototype,"description",void 0),c([d({readOnly:!0})],Wt.prototype,"editable",null),c([d()],Wt.prototype,"editingEnabled",void 0),c([d()],Wt.prototype,"field",void 0),c([d()],Wt.prototype,"formatFunction",void 0),c([d({readOnly:!0})],Wt.prototype,"header",null),c([d()],Wt.prototype,"hidden",null),c([d()],Wt.prototype,"headerRenderFunction",void 0),c([d()],Wt.prototype,"inputRenderFunction",void 0),c([d()],Wt.prototype,"layer",void 0),c([d({readOnly:!0})],Wt.prototype,"loadingMessage",null),c([d()],Wt.prototype,"maxLength",null),c([d({readOnly:!0,aliasOf:"config.menuConfig"})],Wt.prototype,"menuConfig",void 0),c([d({readOnly:!0,aliasOf:"field.name"})],Wt.prototype,"name",void 0),c([d({readOnly:!0,aliasOf:"field.nullable"})],Wt.prototype,"nullable",void 0),c([d()],Wt.prototype,"parseInputValueFunction",void 0),c([d({readOnly:!0})],Wt.prototype,"path",null),c([d({readOnly:!0})],Wt.prototype,"required",null),c([d()],Wt.prototype,"sortable",null),c([d({readOnly:!0,aliasOf:"field.type"})],Wt.prototype,"type",void 0),c([d()],Wt.prototype,"updateRowItemFunction",void 0),Wt=c([O("esri.widgets.FeatureTable.FieldColumn")],Wt);const Z4=Wt;let Sn=class extends Ee{constructor(e){super(e),this.cellClassNameGenerator=null,this.columnReorderingEnabled=!0,this.columns=new ke,this.dataProvider=async({page:t,pageSize:i},r)=>{const{store:s}=this;r&&(s?r(await s.fetchItems({page:t,pageSize:i})):r&&r([]))},this.multiSortEnabled=!1,this.pageSize=50,this.rowDetailsRenderer=null,this.store=null}get size(){return this.store&&this.store.count||0}get state(){const{store:e}=this;return e&&e.state!=="disabled"?e.state==="loading"?"loading":e.state==="loaded"?"loaded":"ready":"disabled"}closeColumnMenus(){var e;(e=this.columns)==null||e.forEach(t=>{t.menu&&t.menu.open&&t.menu.set("open",!1)})}sortColumn(e,t){const i=this.findColumn(e);i&&(i.direction=t)}hideColumn(e){const t=this.findColumn(e);t&&t.hidden===!1&&(t.hidden=!0)}showColumn(e){const t=this.findColumn(e);t&&t.hidden&&(t.hidden=!1)}showAllColumns(){var e;(e=this.columns)==null||e.forEach(t=>{t.hidden&&(t.hidden=!1)})}findColumn(e){return this.columns.find(t=>t.path===e)}getRowItemAt(e){return this.store&&this.store.getLocalItemAt(e)}refresh(){this.store&&(this.store.reset(),this.store.load())}};c([d()],Sn.prototype,"cellClassNameGenerator",void 0),c([d()],Sn.prototype,"columnReorderingEnabled",void 0),c([d()],Sn.prototype,"columns",void 0),c([d()],Sn.prototype,"dataProvider",void 0),c([d()],Sn.prototype,"multiSortEnabled",void 0),c([d()],Sn.prototype,"pageSize",void 0),c([d()],Sn.prototype,"rowDetailsRenderer",void 0),c([d({readOnly:!0})],Sn.prototype,"size",null),c([d()],Sn.prototype,"store",void 0),c([d({readOnly:!0})],Sn.prototype,"state",null),Sn=c([O("esri.widgets.FeatureTable.Grid.GridViewModel")],Sn);const VW=Sn;class gCe extends HTMLElement{static get version(){return"1.6.1"}}customElements.define("vaadin-lumo-styles",gCe);let pC,fC=null,Y4=window.HTMLImports&&window.HTMLImports.whenReady||null;function K4(e){requestAnimationFrame(function(){Y4?Y4(e):(fC||(fC=new Promise(t=>{pC=t}),document.readyState==="complete"?pC():document.addEventListener("readystatechange",()=>{document.readyState==="complete"&&pC()})),fC.then(function(){e&&e()}))})}const Q4="__seenByShadyCSS",nw="__shadyCSSCachedStyle";let fx=null,G0=null;class Su{constructor(){this.customStyles=[],this.enqueued=!1,K4(()=>{window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles()})}enqueueDocumentValidation(){!this.enqueued&&G0&&(this.enqueued=!0,K4(G0))}addCustomStyle(t){t[Q4]||(t[Q4]=!0,this.customStyles.push(t),this.enqueueDocumentValidation())}getStyleForCustomStyle(t){if(t[nw])return t[nw];let i;return i=t.getStyle?t.getStyle():t,i}processStyles(){const t=this.customStyles;for(let i=0;i<t.length;i++){const r=t[i];if(r[nw])continue;const s=this.getStyleForCustomStyle(r);if(s){const n=s.__appliedElement||s;fx&&fx(n),r[nw]=n}}return t}}Su.prototype.addCustomStyle=Su.prototype.addCustomStyle,Su.prototype.getStyleForCustomStyle=Su.prototype.getStyleForCustomStyle,Su.prototype.processStyles=Su.prototype.processStyles,Object.defineProperties(Su.prototype,{transformCallback:{get:()=>fx,set(e){fx=e}},validateCallback:{get:()=>G0,set(e){let t=!1;G0||(t=!0),G0=e,t&&this.enqueueDocumentValidation()}}});const lO=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,mx=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,vCe=/@media\s(.*)/;function cO(e,t){for(let i in t)i===null?e.style.removeProperty(i):e.style.setProperty(i,t[i])}function UW(e,t){const i=window.getComputedStyle(e).getPropertyValue(t);return i?i.trim():""}function _Ce(e){const t=mx.test(e)||lO.test(e);return mx.lastIndex=0,lO.lastIndex=0,t}const BI=!(window.ShadyDOM&&window.ShadyDOM.inUse);let FL,Rv;function X4(e){FL=(!e||!e.shimcssproperties)&&(BI||Boolean(!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&window.ShadyCSS.cssBuild!==void 0&&(Rv=window.ShadyCSS.cssBuild);const BW=Boolean(window.ShadyCSS&&window.ShadyCSS.disableRuntime);window.ShadyCSS&&window.ShadyCSS.nativeCss!==void 0?FL=window.ShadyCSS.nativeCss:window.ShadyCSS?(X4(window.ShadyCSS),window.ShadyCSS=void 0):X4(window.WebComponents&&window.WebComponents.flags);const NL=FL,ow=new Su;window.ShadyCSS||(window.ShadyCSS={prepareTemplate(e,t,i){},prepareTemplateDom(e,t){},prepareTemplateStyles(e,t,i){},styleSubtree(e,t){ow.processStyles(),cO(e,t)},styleElement(e){ow.processStyles()},styleDocument(e){ow.processStyles(),cO(document.body,e)},getComputedStyleValue:(e,t)=>UW(e,t),flushCustomStyles(){},nativeCss:NL,nativeShadow:BI,cssBuild:Rv,disableRuntime:BW}),window.ShadyCSS.CustomStyleInterface=ow,window.JSCompiler_renameProperty=function(e,t){return e};let aw,dn,bCe=/(url\()([^)]*)(\))/g,wCe=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/;function H0(e,t){if(e&&wCe.test(e)||e==="//")return e;if(aw===void 0){aw=!1;try{const i=new URL("b","http://a");i.pathname="c%20d",aw=i.href==="http://a/c%20d"}catch{}}if(t||(t=document.baseURI||window.location.href),aw)try{return new URL(e,t).href}catch{return e}return dn||(dn=document.implementation.createHTMLDocument("temp"),dn.base=dn.createElement("base"),dn.head.appendChild(dn.base),dn.anchor=dn.createElement("a"),dn.body.appendChild(dn.anchor)),dn.base.href=t,dn.anchor.href=e,dn.anchor.href||e}function DL(e,t){return e.replace(bCe,function(i,r,s,n){return r+"'"+H0(s.replace(/["']/g,""),t)+"'"+n})}function jL(e){return e.substring(0,e.lastIndexOf("/")+1)}const zL=!window.ShadyDOM||!window.ShadyDOM.inUse;Boolean(!window.ShadyCSS||window.ShadyCSS.nativeCss);const SCe=zL&&"adoptedStyleSheets"in Document.prototype&&"replaceSync"in CSSStyleSheet.prototype&&(()=>{try{const e=new CSSStyleSheet;e.replaceSync("");const t=document.createElement("div");return t.attachShadow({mode:"open"}),t.shadowRoot.adoptedStyleSheets=[e],t.shadowRoot.adoptedStyleSheets[0]===e}catch{return!1}})();let xCe=window.Polymer&&window.Polymer.rootPath||jL(document.baseURI||window.location.href),yx=window.Polymer&&window.Polymer.sanitizeDOMValue||void 0,ICe=window.Polymer&&window.Polymer.setPassiveTouchGestures||!1,Km=window.Polymer&&window.Polymer.strictTemplatePolicy||!1,TCe=window.Polymer&&window.Polymer.allowTemplateFromDomModule||!1,Fv=window.Polymer&&window.Polymer.legacyOptimizations||!1,qW=window.Polymer&&window.Polymer.legacyWarnings||!1,$Ce=window.Polymer&&window.Polymer.syncInitialRender||!1,uO=window.Polymer&&window.Polymer.legacyUndefined||!1,CCe=window.Polymer&&window.Polymer.orderedComputed||!1,ej=window.Polymer&&window.Polymer.removeNestedTemplates||!1,GW=window.Polymer&&window.Polymer.fastDomIf||!1,dO=window.Polymer&&window.Polymer.suppressTemplateNotifications||!1,lw=window.Polymer&&window.Polymer.legacyNoObservedAttributes||!1,ECe=window.Polymer&&window.Polymer.useAdoptedStyleSheetsWithBuiltCSS||!1,VL={},HW={};function tj(e,t){VL[e]=HW[e.toLowerCase()]=t}function ij(e){return VL[e]||HW[e.toLowerCase()]}function ACe(e){e.querySelector("style")&&console.warn("dom-module %s has style outside template",e.id)}class Qm extends HTMLElement{static get observedAttributes(){return["id"]}static import(t,i){if(t){let r=ij(t);return r&&i?r.querySelector(i):r}return null}attributeChangedCallback(t,i,r,s){i!==r&&this.register()}get assetpath(){if(!this.__assetpath){const t=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,i=H0(this.getAttribute("assetpath")||"",t.baseURI);this.__assetpath=jL(i)}return this.__assetpath}register(t){if(t=t||this.id){if(Km&&ij(t)!==void 0)throw tj(t,null),new Error(`strictTemplatePolicy: dom-module ${t} re-registered`);this.id=t,tj(t,this),ACe(this)}}}Qm.prototype.modules=VL,customElements.define("dom-module",Qm);const MCe="link[rel=import][type~=css]",OCe="include",rj="shady-unscoped";function UL(e){return Qm.import(e)}function sj(e){const t=DL((e.body?e.body:e).textContent,e.baseURI),i=document.createElement("style");return i.textContent=t,i}function kCe(e){const t=e.trim().split(/\s+/),i=[];for(let r=0;r<t.length;r++)i.push(...PCe(t[r]));return i}function PCe(e){const t=UL(e);if(!t)return console.warn("Could not find style data in module named",e),[];if(t._styles===void 0){const i=[];i.push(...qL(t));const r=t.querySelector("template");r&&i.push(...BL(r,t.assetpath)),t._styles=i}return t._styles}function BL(e,t){if(!e._styles){const i=[],r=e.content.querySelectorAll("style");for(let s=0;s<r.length;s++){let n=r[s],o=n.getAttribute(OCe);o&&i.push(...kCe(o).filter(function(a,l,u){return u.indexOf(a)===l})),t&&(n.textContent=DL(n.textContent,t)),i.push(n)}e._styles=i}return e._styles}function LCe(e){let t=UL(e);return t?qL(t):[]}function qL(e){const t=[],i=e.querySelectorAll(MCe);for(let r=0;r<i.length;r++){let s=i[r];if(s.import){const n=s.import,o=s.hasAttribute(rj);if(o&&!n._unscopedStyle){const a=sj(n);a.setAttribute(rj,""),n._unscopedStyle=a}else n._style||(n._style=sj(n));t.push(o?n._unscopedStyle:n._style)}}return t}function RCe(e){let t=e.trim().split(/\s+/),i="";for(let r=0;r<t.length;r++)i+=FCe(t[r]);return i}function FCe(e){let t=UL(e);if(t&&t._cssText===void 0){let i=DCe(t),r=t.querySelector("template");r&&(i+=NCe(r,t.assetpath)),t._cssText=i||null}return t||console.warn("Could not find style data in module named",e),t&&t._cssText||""}function NCe(e,t){let i="";const r=BL(e,t);for(let s=0;s<r.length;s++){let n=r[s];n.parentNode&&n.parentNode.removeChild(n),i+=n.textContent}return i}function DCe(e){let t="",i=qL(e);for(let r=0;r<i.length;r++)t+=i[r].textContent;return t}const nj="include",jCe=window.ShadyCSS.CustomStyleInterface;class zCe extends HTMLElement{constructor(){super(),this._style=null,jCe.addCustomStyle(this)}getStyle(){if(this._style)return this._style;const t=this.querySelector("style");if(!t)return null;this._style=t;const i=t.getAttribute(nj);return i&&(t.removeAttribute(nj),t.textContent=RCe(i)+t.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}}window.customElements.define("custom-style",zCe);const oj=document.createElement("template");oj.innerHTML=`<custom-style>
  <style>
    html {
      /* Base (background) */
      --lumo-base-color: #FFF;

      /* Tint */
      --lumo-tint-5pct: hsla(0, 0%, 100%, 0.3);
      --lumo-tint-10pct: hsla(0, 0%, 100%, 0.37);
      --lumo-tint-20pct: hsla(0, 0%, 100%, 0.44);
      --lumo-tint-30pct: hsla(0, 0%, 100%, 0.5);
      --lumo-tint-40pct: hsla(0, 0%, 100%, 0.57);
      --lumo-tint-50pct: hsla(0, 0%, 100%, 0.64);
      --lumo-tint-60pct: hsla(0, 0%, 100%, 0.7);
      --lumo-tint-70pct: hsla(0, 0%, 100%, 0.77);
      --lumo-tint-80pct: hsla(0, 0%, 100%, 0.84);
      --lumo-tint-90pct: hsla(0, 0%, 100%, 0.9);
      --lumo-tint: #FFF;

      /* Shade */
      --lumo-shade-5pct: hsla(214, 61%, 25%, 0.05);
      --lumo-shade-10pct: hsla(214, 57%, 24%, 0.1);
      --lumo-shade-20pct: hsla(214, 53%, 23%, 0.16);
      --lumo-shade-30pct: hsla(214, 50%, 22%, 0.26);
      --lumo-shade-40pct: hsla(214, 47%, 21%, 0.38);
      --lumo-shade-50pct: hsla(214, 45%, 20%, 0.5);
      --lumo-shade-60pct: hsla(214, 43%, 19%, 0.61);
      --lumo-shade-70pct: hsla(214, 42%, 18%, 0.72);
      --lumo-shade-80pct: hsla(214, 41%, 17%, 0.83);
      --lumo-shade-90pct: hsla(214, 40%, 16%, 0.94);
      --lumo-shade: hsl(214, 35%, 15%);

      /* Contrast */
      --lumo-contrast-5pct: var(--lumo-shade-5pct);
      --lumo-contrast-10pct: var(--lumo-shade-10pct);
      --lumo-contrast-20pct: var(--lumo-shade-20pct);
      --lumo-contrast-30pct: var(--lumo-shade-30pct);
      --lumo-contrast-40pct: var(--lumo-shade-40pct);
      --lumo-contrast-50pct: var(--lumo-shade-50pct);
      --lumo-contrast-60pct: var(--lumo-shade-60pct);
      --lumo-contrast-70pct: var(--lumo-shade-70pct);
      --lumo-contrast-80pct: var(--lumo-shade-80pct);
      --lumo-contrast-90pct: var(--lumo-shade-90pct);
      --lumo-contrast: var(--lumo-shade);

      /* Text */
      --lumo-header-text-color: var(--lumo-contrast);
      --lumo-body-text-color: var(--lumo-contrast-90pct);
      --lumo-secondary-text-color: var(--lumo-contrast-70pct);
      --lumo-tertiary-text-color: var(--lumo-contrast-50pct);
      --lumo-disabled-text-color: var(--lumo-contrast-30pct);

      /* Primary */
      --lumo-primary-color: hsl(214, 90%, 52%);
      --lumo-primary-color-50pct: hsla(214, 90%, 52%, 0.5);
      --lumo-primary-color-10pct: hsla(214, 90%, 52%, 0.1);
      --lumo-primary-text-color: var(--lumo-primary-color);
      --lumo-primary-contrast-color: #FFF;

      /* Error */
      --lumo-error-color: hsl(3, 100%, 61%);
      --lumo-error-color-50pct: hsla(3, 100%, 60%, 0.5);
      --lumo-error-color-10pct: hsla(3, 100%, 60%, 0.1);
      --lumo-error-text-color: hsl(3, 92%, 53%);
      --lumo-error-contrast-color: #FFF;

      /* Success */
      --lumo-success-color: hsl(145, 80%, 42%); /* hsl(144,82%,37%); */
      --lumo-success-color-50pct: hsla(145, 76%, 44%, 0.55);
      --lumo-success-color-10pct: hsla(145, 76%, 44%, 0.12);
      --lumo-success-text-color: hsl(145, 100%, 32%);
      --lumo-success-contrast-color: #FFF;
    }
  </style>
</custom-style><dom-module id="lumo-color">
  <template>
    <style>
      [theme~="dark"] {
        /* Base (background) */
        --lumo-base-color: hsl(214, 35%, 21%);

        /* Tint */
        --lumo-tint-5pct: hsla(214, 65%, 85%, 0.06);
        --lumo-tint-10pct: hsla(214, 60%, 80%, 0.14);
        --lumo-tint-20pct: hsla(214, 64%, 82%, 0.23);
        --lumo-tint-30pct: hsla(214, 69%, 84%, 0.32);
        --lumo-tint-40pct: hsla(214, 73%, 86%, 0.41);
        --lumo-tint-50pct: hsla(214, 78%, 88%, 0.5);
        --lumo-tint-60pct: hsla(214, 82%, 90%, 0.6);
        --lumo-tint-70pct: hsla(214, 87%, 92%, 0.7);
        --lumo-tint-80pct: hsla(214, 91%, 94%, 0.8);
        --lumo-tint-90pct: hsla(214, 96%, 96%, 0.9);
        --lumo-tint: hsl(214, 100%, 98%);

        /* Shade */
        --lumo-shade-5pct: hsla(214, 0%, 0%, 0.07);
        --lumo-shade-10pct: hsla(214, 4%, 2%, 0.15);
        --lumo-shade-20pct: hsla(214, 8%, 4%, 0.23);
        --lumo-shade-30pct: hsla(214, 12%, 6%, 0.32);
        --lumo-shade-40pct: hsla(214, 16%, 8%, 0.41);
        --lumo-shade-50pct: hsla(214, 20%, 10%, 0.5);
        --lumo-shade-60pct: hsla(214, 24%, 12%, 0.6);
        --lumo-shade-70pct: hsla(214, 28%, 13%, 0.7);
        --lumo-shade-80pct: hsla(214, 32%, 13%, 0.8);
        --lumo-shade-90pct: hsla(214, 33%, 13%, 0.9);
        --lumo-shade: hsl(214, 33%, 13%);

        /* Contrast */
        --lumo-contrast-5pct: var(--lumo-tint-5pct);
        --lumo-contrast-10pct: var(--lumo-tint-10pct);
        --lumo-contrast-20pct: var(--lumo-tint-20pct);
        --lumo-contrast-30pct: var(--lumo-tint-30pct);
        --lumo-contrast-40pct: var(--lumo-tint-40pct);
        --lumo-contrast-50pct: var(--lumo-tint-50pct);
        --lumo-contrast-60pct: var(--lumo-tint-60pct);
        --lumo-contrast-70pct: var(--lumo-tint-70pct);
        --lumo-contrast-80pct: var(--lumo-tint-80pct);
        --lumo-contrast-90pct: var(--lumo-tint-90pct);
        --lumo-contrast: var(--lumo-tint);

        /* Text */
        --lumo-header-text-color: var(--lumo-contrast);
        --lumo-body-text-color: var(--lumo-contrast-90pct);
        --lumo-secondary-text-color: var(--lumo-contrast-70pct);
        --lumo-tertiary-text-color: var(--lumo-contrast-50pct);
        --lumo-disabled-text-color: var(--lumo-contrast-30pct);

        /* Primary */
        --lumo-primary-color: hsl(214, 86%, 55%);
        --lumo-primary-color-50pct: hsla(214, 86%, 55%, 0.5);
        --lumo-primary-color-10pct: hsla(214, 90%, 63%, 0.1);
        --lumo-primary-text-color: hsl(214, 100%, 70%);
        --lumo-primary-contrast-color: #FFF;

        /* Error */
        --lumo-error-color: hsl(3, 90%, 63%);
        --lumo-error-color-50pct: hsla(3, 90%, 63%, 0.5);
        --lumo-error-color-10pct: hsla(3, 90%, 63%, 0.1);
        --lumo-error-text-color: hsl(3, 100%, 67%);

        /* Success */
        --lumo-success-color: hsl(145, 65%, 42%);
        --lumo-success-color-50pct: hsla(145, 65%, 42%, 0.5);
        --lumo-success-color-10pct: hsla(145, 65%, 42%, 0.1);
        --lumo-success-text-color: hsl(145, 85%, 47%);
      }

      html {
        color: var(--lumo-body-text-color);
        background-color: var(--lumo-base-color);
      }

      [theme~="dark"] {
        color: var(--lumo-body-text-color);
        background-color: var(--lumo-base-color);
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        color: var(--lumo-header-text-color);
      }

      a {
        color: var(--lumo-primary-text-color);
      }

      blockquote {
        color: var(--lumo-secondary-text-color);
      }

      code,
      pre {
        background-color: var(--lumo-contrast-10pct);
        border-radius: var(--lumo-border-radius-m);
      }
    </style>
  </template>
</dom-module><dom-module id="lumo-color-legacy">
  <template>
    <style include="lumo-color">
      :host {
        color: var(--lumo-body-text-color) !important;
        background-color: var(--lumo-base-color) !important;
      }
    </style>
  </template>
</dom-module>`,document.head.appendChild(oj.content);const aj=document.createElement("template");aj.innerHTML=`<custom-style>
  <style>
    @font-face {
      font-family: 'lumo-icons';
      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABEcAAsAAAAAIiwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAQwAAAFZAIUuKY21hcAAAAYgAAAD4AAADrsCU8d5nbHlmAAACgAAAC2MAABd4h9To2WhlYWQAAA3kAAAAMAAAADZa/6SsaGhlYQAADhQAAAAdAAAAJAbpA35obXR4AAAONAAAABAAAACspBAAAGxvY2EAAA5EAAAAWAAAAFh55IAsbWF4cAAADpwAAAAfAAAAIAFKAXBuYW1lAAAOvAAAATEAAAIuUUJZCHBvc3QAAA/wAAABKwAAAelm8SzVeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS+yDiBgZWBgamKaQ8DA0MPhGZ8wGDIyAQUZWBlZsAKAtJcUxgcXjG+0mIO+p/FEMUcxDANKMwIkgMABn8MLQB4nO3SWW6DMABF0UtwCEnIPM/zhLK8LqhfXRybSP14XUYtHV9hGYQwQBNIo3cUIPkhQeM7rib1ekqnXg981XuC1qvy84lzojleh3puxL0hPjGjRU473teloEefAUNGjJkwZcacBUtWrNmwZceeA0dOnLlw5cadB09elPGhGf+j0NTI/65KfXerT6JhqKnpRKtgOpuqaTrtKjPUlqHmhto21I7pL6i6hlqY3q7qGWrfUAeGOjTUkaGODXViqFNDnRnq3FAXhro01JWhrg11Y6hbQ90Z6t5QD4Z6NNSToZ4N9WKoV0O9GerdUB+G+jTUl6GWRvkL24BkEXictVh9bFvVFb/nxvbz+7Rf/N6zHcd2bCfP+Wgc1Z9N0jpNnEL6kbRVS6HA2hQYGh9TGR1CbCqa2rXrWOkQE/sHNJgmtZvoVNZqE1B1DNHxzTQxCehUTYiJTQyENui0qSLezr3PduyQfgmRWOfde8+9551z7rnn/O4jLoJ/bRP0UaKQMLFJjpBAvphLZC3Dk0ok7WBzR2/upJs7Ryw/nfFbln/uuN/apCvwrKLrSvUqRufbm5pn0fs0w4gYxnGVP6qHnO4bWiDQGQgwtS6lm3lB3QoX1M2vwEmuzirF39y+Es2+DJ8d1pkyqBIqoze3D1+Zz4DrFoazxI8dWwMrDlZ2DMqQAR9AROsJU+2cmlTPazTco52F1xTa2a2+K8vvq92dVHmtLoPeQX/AZPRYGthDYOeZjBjKoFsVGulR3lWU95WeCK44qHU7MhWUGUKZDT3oKUcG2GWuh+EDDfUYA/jhAhl0TOsJNYSEu7mQmi3UzfXwZKA4BsVsHLXQYGgRW95uEtpJ1Vfn9XiLriRBlFEqxsDjA09yCNUoQxxwd7KWSTt2y3GTKiflqHRSoWZc3m11Wa/fJdFgXD4sSYfleJBKd8GMz7J8dZn/cGRCcKGDnA2Ge3fKzcvlnTDNthGWLXzX/WaXtUAmRgeLlHSr30r0G9UTXMb0AtmwzOoy73fkSlHZkduw/TYuU9cAD4YutPoxTTsA3797wVr4Z/1NC5zARHr4vtxJjxIfiZMhMkbWk+14BnJZKwqGZwDfswLyxWDSg11rFLJF7Nopxjd1h1/QOT+oezgfu3Yq+Hk+duf5x+40o1GTkaIgikK/IEnC6aYxCUBaZJSN4XTYFjU/YMNIKqJwhDGOCCI8FDXnXmXjtGhGJyShqjAOnBOkW2JG9S7GgYeMWAU5JzhnWmBOaOM+CKEPoqSfFDC2Unq+DLlUgUVUFFLZGJg6jtlojsdsa8kPObPuJdi5dnBdBsLJMGTWDa4t2JvtwuPo9s+Y86suv/W33QG1rAaOAUV+vx4K6f2D04PVKlC7WLSrZzAi45ZV6lIC7WoXqmRyvUqoVwrzUoVsIjeTXWQv+RH5GTlBXiB/In8ln0IbBCAFOajAJrgZYyOHWqOfUe/aHjI12R6OQo1jCgt215l+4f6XPb+0MNou0V+43n2F77tSfRb24d7zitgnKmvYHs69zugaPvBwv6ioXkb2LdL65Atw51uLkXlu1bhMMRcXSPcYoqKIRlh34lQP8/5JbuUFye4vxD6/6MxFF11C0uVLr9Ulgw44tS3pMViNLUExbycFgLIct+QDMibRimx1ydUz8FXZiuOIDBOMVX2nUZc+huNE5XUJ81uiJoiabwqaVF0uacKbau/pl4R2VW0XXlJra6boVrYG646TF5NYzwy4vjENVrDlcNpZPl8DH6XX8XWCx0mvWVZY6KFLrvsY66/zPict5FnxaNUR/juvZCM3TvD60E2W1tZizbXTPDuabcm0nbbzpWKpmA1ayBQ8giedLUM+A0kNjBjQjmuYz7YrgIXYvmF63ZLBwSXrpn9Tb9wwdd/U1H0PMQK3XcO8ul3WT7PyPPdpy0TemKxNRcJNauiXJnnUDpUppQWs4SnUIy0EESGYqJYQLGHxzaGWwVIaS6Y7mQFM8ZjYDQ3axjf61SWjU33JwOZA1pwaG1L9mzf71aHRdX1JHw6Fp0aXhNwbqyeGNg4NbdzGCBxoz4ZXjy4Nu69Zr6sDY6vMrLU5nA1P8JkbdWXJ6ERfMryvNh1JfQ9+T4dIhGvK9w3dxjBBzatsQ/MlOHVIDnYpDz6odAXlQ01t2Pa5Iafd8MMpxAeDKP0C6CjgVLT5osB6icUx01lWjXxzT/GyRF2welEM5Z/7jG3VjQ1SrNn5IbyzOG5dobB3/QHxyZvsXcoz8IoEwS7plCg+zxHQk424q9BfEpkESJbFHQusDBSWFkuBkoPO0kLKwRVYjxGXlHTcTDQMJ/H6TX9afkO7mnraTO1feTnZAXLu4cp7HAXMmNG1yeFk9TgS/NHhZR/4QoBTr/ZB+6hCgyl15Nq1UbN6nE1/ZnP1U2cizCBpvs8cJQZJ4LkYx5N/yZPAUZNQQ0V4f3BQllWrK3YRzl30dOT6RVn2upNur6woSa8CqpdT/aKnBM4o3jNur9d9xqtUT6veBEt9Ca9at+ERzEEhUkR8sa5mQ4aVvJoVeEA8zI4ei5mULXFGyU7z/6TAeYLVcpzSWZY8PYYF5yrTV60sT0+XV141vX++Wf16V2bFeGVPZXxFpkvyeKTWLlzfW0mnKxsY6Y3294/0998SCfX1blm5pbcvFGlq/r07MRAMhYIDiW5JFKWW3vdrEpCsZSJG+om7Zu/PSScZJhNkLbmW5Wsr12pWqW5zKtlwRS4bFOxUw17mCzy6lskCDl1WYOGWDYrADrMA7BDDweWWNd5koiJnR1dz+ytLP2q0SqPB1lnK2ccB7RYe4FSoPks3iB3t4txTSHctb2sy1ivk0pvHuCNm6w1f6wxv3+OCgN78LqdQnUVh7R0oTAp0zOf2rbW770Vu5C2dIyGdTnHo8zSji7dppj0USoVCz+lhRMTh53Teq9VbGfbjuSbAooSdXayY4PYHg374C6f7gl1B/DXuJ4/QXxOBdJFJspFsI3egpoWUUCjlTIFnNYNl+ZyZKmBeYKGHkD1QyDlhaKbKwKcIJqJ4TLJ2OmdY/JWXae4DdGBw8HZ7eXcgFF2zr2SoalDry5iKqoa0Puhe3hPQ2s3elTYM+MI+n3rK0KgL7/La3GeMLt6m7u912vGnvtORiIa0qBmhqVi+XW9XNBmqb8eVgKzIHfGI5bNoG7X0UCzeISmqIcO/nY8FH7U8avX9fx/ST+hx0sezPw9Qy8Mum3GWf2N4Uy/yIYGVBXbJHWIZp7dfTcptdMTr9Qmq7DaiK/ukqCL4kt4RUfS5XPnMtmT22/mQFqF7emSqtrlu8SVElxDRJrZODkpuwe0VfTfjdEp1f7A7v+fozNBXUJ/6WTuK2TtFlpFVZAZ3LcFvUi1Z2p2YT+EMAkGJVStOzLTAPg4IqWIAlzRSjOBkl2zxj3TKycpzT/MnvX3uaSMWM+gU0rkXjohhefVRMaps3/kLMSKv23lT23uxQrkQjyOJleMDsdhAnD6ZGElWZ5MjCXzCE/hkWX+WF4knzGhVOyK2eQZekV3eyo0zL8kuYWCnDCvjjhAkcTPOBDXVdoav3HVcFnQjLvtV9S2p0zA6JegPwMQxt+yFb3ll9zGlq/5dRKb3cEyQYoaNYpharJ7xCB7AWxsLY3jjZXY0XsZj0Wjwc9I6PP/dKABnCZaqHpaZEACxk4ZeLZSKNgZABl+lYQX1sJQOSX3n6r410evcoud5JeAGUXVP9H1tZOKejTq4Ono0z0erro1FrnOpohva1d/hTdtVsQdKN5W9RlT3NjD0nznyKNTgKAMfWNWcyodV0IGLPIHOF0o4JyqufaK4z6WIIzuGh3d8c8cwQg8ER+OVxyrjdm8vNuhts4LoOihGxIMuUdgzwiYN7xhh1+oZnJNuTG7gQZvu4XWZ9GAZZjGEubwePqYhtKDTH+9VQkl17/iGybsnJ+8+sKtyPrcll9ty65Zsdst/9iqpEKh7M5VdBxh3csOdNc6tW3I1uyM1PzOXegSOrLFsFNI2O27M+TF2ApnN9MUv5ud6LjxIvEQnHRzxIu4IsA9MLFkJn2tcZoZ7ON7dXe7ujrc8HrusPKamlqXwd77lQUuLpilau4PUMapueBb7irU4RoUXEYXuVuIGlRGmOp+2lNkaRPVziOqmlaZvaqG4dFgSj0jxEJWrv12IUWntmw+rfQarRE0Aph4ocI6nlUlGqs+u3/+T/ethW62PpHp2eHbZstnh/wOO95yDAHicY2BkYGAA4pmJ6QHx/DZfGbiZXwBFGGpUNzQi6P+vmacy3QJyORiYQKIANoULVXicY2BkYGAO+p8FJF8wAAHzVAZGBlSgDQBW9gNvAAAAeJxjYGBgYH4xNDAAzwQmjwAAAAAATgCaAOgBCgEsAU4BcAGaAcQB7gIaApwC6ASaBLwE1gTyBQ4FKgV6BdAF/gZEBmYGtgcYB5AIGAhSCGoI/glGCb4J2goECjwKggq4CvALUAuWC7x4nGNgZGBg0GZMYRBlAAEmIOYCQgaG/2A+AwAYlAG8AHicbZE9TsMwGIbf9A/RSggEYmHxAgtq+jN2ZGj3Dt3T1GlTOXHkuBW9AyfgEByCgTNwCA7BW/NJlVBtyd/jx+8XKwmAa3whwnFE6Ib1OBq44O6Pm6Qb4Rb5QbiNHh6FO/RD4S6eMRHu4RaaT4halzR3eBVu4Apvwk36d+EW+UO4jXt8Cnfov4W7WOBHuIen6MXsCtvPU1vWc73emcSdxIkW2tW5LdUoHp7kTJfaJV6v1PKg6v167H2mMmcLNbWl18ZYVTm71amPN95Xk8EgEx+ntoDBDgUs+siRspaoMef7rukNEriziXNuwS7Hmoe9wggxv+e55IzJMqQTeNYV00scuNbY8+YxrUfGfcaMZb/CNPQe04bT0lThbEuT0sfYhK6K/23Amf3Lx+H24hcj4GScAAAAeJxtjtlugzAQRbkJUEJIuu/7vqR8lGNPAcWx0YAb5e/LklR96EgenSufGY038PqKvf9rhgGG8BEgxA4ijBBjjAQTTLGLPezjAIc4wjFOcIoznOMCl7jCNW5wizvc4wGPeMIzXvCKN7zjAzN8eonQRWZSSaYmjvug6ase98hFltexMJmmVNmV2WBvdNgZUc+ujAWzXW3UDnu1w43asStHc8GpzAXX/py0jqTQZJTgkcxJLpaCF0lD32xNt+43tAsn29Dft02uDKS2cjGUNgsk26qK2lFthYoU27INPqmiDqg5goe0pqR5qSoqMdek/CUZFywL46rEsiImleqiqoMyt4baXlu/1GLdNFf5zbcNmdr1YUWCZe47o+zUmb/DoStbw3cVsef9ALjjiPQA) format('woff');
      font-weight: normal;
      font-style: normal;
    }

    html {
      --lumo-icons-align-center: "\\ea01";
      --lumo-icons-align-left: "\\ea02";
      --lumo-icons-align-right: "\\ea03";
      --lumo-icons-angle-down: "\\ea04";
      --lumo-icons-angle-left: "\\ea05";
      --lumo-icons-angle-right: "\\ea06";
      --lumo-icons-angle-up: "\\ea07";
      --lumo-icons-arrow-down: "\\ea08";
      --lumo-icons-arrow-left: "\\ea09";
      --lumo-icons-arrow-right: "\\ea0a";
      --lumo-icons-arrow-up: "\\ea0b";
      --lumo-icons-bar-chart: "\\ea0c";
      --lumo-icons-bell: "\\ea0d";
      --lumo-icons-calendar: "\\ea0e";
      --lumo-icons-checkmark: "\\ea0f";
      --lumo-icons-chevron-down: "\\ea10";
      --lumo-icons-chevron-left: "\\ea11";
      --lumo-icons-chevron-right: "\\ea12";
      --lumo-icons-chevron-up: "\\ea13";
      --lumo-icons-clock: "\\ea14";
      --lumo-icons-cog: "\\ea15";
      --lumo-icons-cross: "\\ea16";
      --lumo-icons-download: "\\ea17";
      --lumo-icons-dropdown: "\\ea18";
      --lumo-icons-edit: "\\ea19";
      --lumo-icons-error: "\\ea1a";
      --lumo-icons-eye: "\\ea1b";
      --lumo-icons-eye-disabled: "\\ea1c";
      --lumo-icons-menu: "\\ea1d";
      --lumo-icons-minus: "\\ea1e";
      --lumo-icons-ordered-list: "\\ea1f";
      --lumo-icons-phone: "\\ea20";
      --lumo-icons-photo: "\\ea21";
      --lumo-icons-play: "\\ea22";
      --lumo-icons-plus: "\\ea23";
      --lumo-icons-redo: "\\ea24";
      --lumo-icons-reload: "\\ea25";
      --lumo-icons-search: "\\ea26";
      --lumo-icons-undo: "\\ea27";
      --lumo-icons-unordered-list: "\\ea28";
      --lumo-icons-upload: "\\ea29";
      --lumo-icons-user: "\\ea2a";
    }
  </style>
</custom-style>`,document.head.appendChild(aj.content);const lj=document.createElement("template");lj.innerHTML=`<custom-style>
  <style>
    html {
      --lumo-size-xs: 1.625rem;
      --lumo-size-s: 1.875rem;
      --lumo-size-m: 2.25rem;
      --lumo-size-l: 2.75rem;
      --lumo-size-xl: 3.5rem;

      /* Icons */
      --lumo-icon-size-s: 1.25em;
      --lumo-icon-size-m: 1.5em;
      --lumo-icon-size-l: 2.25em;
      /* For backwards compatibility */
      --lumo-icon-size: var(--lumo-icon-size-m);
    }
  </style>
</custom-style>`,document.head.appendChild(lj.content);const cj=document.createElement("template");cj.innerHTML=`<custom-style>
  <style>
    html {
      /* Square */
      --lumo-space-xs: 0.25rem;
      --lumo-space-s: 0.5rem;
      --lumo-space-m: 1rem;
      --lumo-space-l: 1.5rem;
      --lumo-space-xl: 2.5rem;

      /* Wide */
      --lumo-space-wide-xs: calc(var(--lumo-space-xs) / 2) var(--lumo-space-xs);
      --lumo-space-wide-s: calc(var(--lumo-space-s) / 2) var(--lumo-space-s);
      --lumo-space-wide-m: calc(var(--lumo-space-m) / 2) var(--lumo-space-m);
      --lumo-space-wide-l: calc(var(--lumo-space-l) / 2) var(--lumo-space-l);
      --lumo-space-wide-xl: calc(var(--lumo-space-xl) / 2) var(--lumo-space-xl);

      /* Tall */
      --lumo-space-tall-xs: var(--lumo-space-xs) calc(var(--lumo-space-xs) / 2);
      --lumo-space-tall-s: var(--lumo-space-s) calc(var(--lumo-space-s) / 2);
      --lumo-space-tall-m: var(--lumo-space-m) calc(var(--lumo-space-m) / 2);
      --lumo-space-tall-l: var(--lumo-space-l) calc(var(--lumo-space-l) / 2);
      --lumo-space-tall-xl: var(--lumo-space-xl) calc(var(--lumo-space-xl) / 2);
    }
  </style>
</custom-style>`,document.head.appendChild(cj.content);const uj=document.createElement("template");uj.innerHTML=`<custom-style>
  <style>
    html {
      /* Border radius */
      --lumo-border-radius-s: 0.25em; /* Checkbox, badge, date-picker year indicator, etc */
      --lumo-border-radius-m: var(--lumo-border-radius, 0.25em); /* Button, text field, menu overlay, etc */
      --lumo-border-radius-l: 0.5em; /* Dialog, notification, etc */
      --lumo-border-radius: 0.25em; /* Deprecated */

      /* Shadow */
      --lumo-box-shadow-xs: 0 1px 4px -1px var(--lumo-shade-50pct);
      --lumo-box-shadow-s: 0 2px 4px -1px var(--lumo-shade-20pct), 0 3px 12px -1px var(--lumo-shade-30pct);
      --lumo-box-shadow-m: 0 2px 6px -1px var(--lumo-shade-20pct), 0 8px 24px -4px var(--lumo-shade-40pct);
      --lumo-box-shadow-l: 0 3px 18px -2px var(--lumo-shade-20pct), 0 12px 48px -6px var(--lumo-shade-40pct);
      --lumo-box-shadow-xl: 0 4px 24px -3px var(--lumo-shade-20pct), 0 18px 64px -8px var(--lumo-shade-40pct);

      /* Clickable element cursor */
      --lumo-clickable-cursor: default;
    }
  </style>
</custom-style>`,document.head.appendChild(uj.content);const dj=document.createElement("template");dj.innerHTML=`<custom-style>
  <style>
    html {
      /* Font families */
      --lumo-font-family: -apple-system, BlinkMacSystemFont, "Roboto", "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";

      /* Font sizes */
      --lumo-font-size-xxs: .75rem;
      --lumo-font-size-xs: .8125rem;
      --lumo-font-size-s: .875rem;
      --lumo-font-size-m: 1rem;
      --lumo-font-size-l: 1.125rem;
      --lumo-font-size-xl: 1.375rem;
      --lumo-font-size-xxl: 1.75rem;
      --lumo-font-size-xxxl: 2.5rem;

      /* Line heights */
      --lumo-line-height-xs: 1.25;
      --lumo-line-height-s: 1.375;
      --lumo-line-height-m: 1.625;
    }

  </style>
</custom-style><dom-module id="lumo-typography">
  <template>
    <style>
      html {
        font-family: var(--lumo-font-family);
        font-size: var(--lumo-font-size, var(--lumo-font-size-m));
        line-height: var(--lumo-line-height-m);
        -webkit-text-size-adjust: 100%;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      /* Can\u2019t combine with the above selector because that doesn\u2019t work in browsers without native shadow dom */
      :host {
        font-family: var(--lumo-font-family);
        font-size: var(--lumo-font-size, var(--lumo-font-size-m));
        line-height: var(--lumo-line-height-m);
        -webkit-text-size-adjust: 100%;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      small,
      [theme~="font-size-s"] {
        font-size: var(--lumo-font-size-s);
        line-height: var(--lumo-line-height-s);
      }

      [theme~="font-size-xs"] {
        font-size: var(--lumo-font-size-xs);
        line-height: var(--lumo-line-height-xs);
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-weight: 600;
        line-height: var(--lumo-line-height-xs);
        margin-top: 1.25em;
      }

      h1 {
        font-size: var(--lumo-font-size-xxxl);
        margin-bottom: 0.75em;
      }

      h2 {
        font-size: var(--lumo-font-size-xxl);
        margin-bottom: 0.5em;
      }

      h3 {
        font-size: var(--lumo-font-size-xl);
        margin-bottom: 0.5em;
      }

      h4 {
        font-size: var(--lumo-font-size-l);
        margin-bottom: 0.5em;
      }

      h5 {
        font-size: var(--lumo-font-size-m);
        margin-bottom: 0.25em;
      }

      h6 {
        font-size: var(--lumo-font-size-xs);
        margin-bottom: 0;
        text-transform: uppercase;
        letter-spacing: 0.03em;
      }

      p,
      blockquote {
        margin-top: 0.5em;
        margin-bottom: 0.75em;
      }

      a {
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      hr {
        display: block;
        align-self: stretch;
        height: 1px;
        border: 0;
        padding: 0;
        margin: var(--lumo-space-s) calc(var(--lumo-border-radius-m) / 2);
        background-color: var(--lumo-contrast-10pct);
      }

      blockquote {
        border-left: 2px solid var(--lumo-contrast-30pct);
      }

      b,
      strong {
        font-weight: 600;
      }

      /* RTL specific styles */

      blockquote[dir="rtl"] {
        border-left: none;
        border-right: 2px solid var(--lumo-contrast-30pct);
      }

    </style>
  </template>
</dom-module>`,document.head.appendChild(dj.content),String(Math.random()).slice(2),window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e});let VCe=!1;(()=>{try{const e={get capture(){return VCe=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch{}})(),typeof window!="undefined"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.0"),window.ShadyCSS===void 0||window.ShadyCSS.prepareTemplateDom===void 0&&console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),window.JSCompiler_renameProperty=(e,t)=>e;const UCe=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,WW=Symbol();class GL{constructor(t,i){if(i!==WW)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return this._styleSheet===void 0&&(UCe?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const BCe=e=>{if(e instanceof GL)return e.cssText;if(typeof e=="number")return e;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but
            take care to ensure page security.`)},Nv=(e,...t)=>{const i=t.reduce((r,s,n)=>r+BCe(s)+e[n+1],e[0]);return new GL(i,WW)};(window.litElementVersions||(window.litElementVersions=[])).push("2.5.0");let hj=0;const mC={},Dv=(e,t,i)=>{const r=i&&i.moduleId||"custom-style-module-"+hj++;Array.isArray(t)||(t=t?[t]:[]),t.forEach(o=>{if(!(o instanceof GL))throw new Error("An item in styles is not of type CSSResult. Use `unsafeCSS` or `css`.");if(!mC[o]){const a=document.createElement("dom-module");a.innerHTML=`
        <template>
          <style>${o.toString()}</style>
        </template>
      `;const l="custom-style-module-"+hj++;a.register(l),mC[o]=l}});const s=document.createElement("dom-module");if(e){const o=window.customElements&&window.customElements.get(e);o&&o.hasOwnProperty("__finalized")&&console.warn(`The custom element definition for "${e}"
      was finalized before a style module was registered.
      Make sure to add component specific style modules before
      importing the corresponding custom element.`),s.setAttribute("theme-for",e)}const n=i&&i.include||[];s.innerHTML=`
    <template>
      ${n.map(o=>`<style include=${o}></style>`)}
      ${t.map(o=>`<style include=${mC[o]}></style>`)}
    </template>
  `,s.register(r)};Dv("vaadin-checkbox",Nv`
    :host {
      -webkit-tap-highlight-color: transparent;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
      cursor: default;
      outline: none;
    }

    [part='label']:not([empty]) {
      margin: 0.1875em 0.875em 0.1875em 0.375em;
    }

    [part='checkbox'] {
      width: calc(1em + 2px);
      height: calc(1em + 2px);
      margin: 0.1875em;
      position: relative;
      border-radius: var(--lumo-border-radius-s);
      background-color: var(--lumo-contrast-20pct);
      transition: transform 0.2s cubic-bezier(0.12, 0.32, 0.54, 2), background-color 0.15s;
      pointer-events: none;
      line-height: 1.2;
    }

    :host([indeterminate]) [part='checkbox'],
    :host([checked]) [part='checkbox'] {
      background-color: var(--lumo-primary-color);
    }

    /* Needed to align the checkbox nicely on the baseline */
    [part='checkbox']::before {
      content: '\\2003';
    }

    /* Checkmark */
    [part='checkbox']::after {
      content: '';
      display: inline-block;
      width: 0;
      height: 0;
      border: 0 solid var(--lumo-primary-contrast-color);
      border-width: 0.1875em 0 0 0.1875em;
      box-sizing: border-box;
      transform-origin: 0 0;
      position: absolute;
      top: 0.8125em;
      left: 0.5em;
      transform: scale(0.55) rotate(-135deg);
      opacity: 0;
    }

    :host([checked]) [part='checkbox']::after {
      opacity: 1;
      width: 0.625em;
      height: 1.0625em;
    }

    /* Indeterminate checkmark */
    :host([indeterminate]) [part='checkbox']::after {
      transform: none;
      opacity: 1;
      top: 45%;
      height: 10%;
      left: 22%;
      right: 22%;
      width: auto;
      border: 0;
      background-color: var(--lumo-primary-contrast-color);
      transition: opacity 0.25s;
    }

    /* Focus ring */
    :host([focus-ring]) [part='checkbox'] {
      box-shadow: 0 0 0 3px var(--lumo-primary-color-50pct);
    }

    /* Disabled */
    :host([disabled]) {
      pointer-events: none;
      color: var(--lumo-disabled-text-color);
    }

    :host([disabled]) [part='label'] ::slotted(*) {
      color: inherit;
    }

    :host([disabled]) [part='checkbox'] {
      background-color: var(--lumo-contrast-10pct);
    }

    :host([disabled]) [part='checkbox']::after {
      border-color: var(--lumo-contrast-30pct);
    }

    :host([indeterminate][disabled]) [part='checkbox']::after {
      background-color: var(--lumo-contrast-30pct);
    }

    /* RTL specific styles */
    :host([dir='rtl']) [part='label']:not([empty]) {
      margin: 0.1875em 0.375em 0.1875em 0.875em;
    }

    /* Transition the checkmark if activated with the mouse (disabled for grid select-all this way) */
    :host(:hover) [part='checkbox']::after {
      transition: width 0.1s, height 0.25s;
    }

    /* Used for activation "halo" */
    [part='checkbox']::before {
      color: transparent;
      display: inline-block;
      width: 100%;
      height: 100%;
      border-radius: inherit;
      background-color: inherit;
      transform: scale(1.4);
      opacity: 0;
      transition: transform 0.1s, opacity 0.8s;
    }

    /* Hover */
    :host(:not([checked]):not([indeterminate]):not([disabled]):hover) [part='checkbox'] {
      background-color: var(--lumo-contrast-30pct);
    }

    /* Disable hover for touch devices */
    @media (pointer: coarse) {
      :host(:not([checked]):not([indeterminate]):not([disabled]):hover) [part='checkbox'] {
        background-color: var(--lumo-contrast-20pct);
      }
    }

    /* Active */
    :host([active]) [part='checkbox'] {
      transform: scale(0.9);
      transition-duration: 0.05s;
    }

    :host([active][checked]) [part='checkbox'] {
      transform: scale(1.1);
    }

    :host([active]:not([checked])) [part='checkbox']::before {
      transition-duration: 0.01s, 0.01s;
      transform: scale(0);
      opacity: 0.4;
    }
  `,{moduleId:"lumo-checkbox"});let qCe=0;const Dn=function(e){let t=e.__mixinApplications;t||(t=new WeakMap,e.__mixinApplications=t);let i=qCe++;function r(s){let n=s.__mixinSet;if(n&&n[i])return s;let o=t,a=o.get(s);if(!a){a=e(s),o.set(s,a);let l=Object.create(a.__mixinSet||n||null);l[i]=!0,a.__mixinSet=l}return a}return r},ze=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?e=>ShadyDOM.patch(e):e=>e;function hO(e){return e.indexOf(".")>=0}function vc(e){let t=e.indexOf(".");return t===-1?e:e.slice(0,t)}function JW(e,t){return e.indexOf(t+".")===0}function jv(e,t){return t.indexOf(e+".")===0}function zv(e,t,i){return t+i.slice(e.length)}function GCe(e,t){return e===t||JW(e,t)||jv(e,t)}function y0(e){if(Array.isArray(e)){let t=[];for(let i=0;i<e.length;i++){let r=e[i].toString().split(".");for(let s=0;s<r.length;s++)t.push(r[s])}return t.join(".")}return e}function ZW(e){return Array.isArray(e)?y0(e).split("."):e.toString().split(".")}function vs(e,t,i){let r=e,s=ZW(t);for(let n=0;n<s.length;n++){if(!r)return;r=r[s[n]]}return i&&(i.path=s.join(".")),r}function pj(e,t,i){let r=e,s=ZW(t),n=s[s.length-1];if(s.length>1){for(let o=0;o<s.length-1;o++)if(r=r[s[o]],!r)return;r[n]=i}else r[t]=i;return s.join(".")}const gx={},HCe=/-[a-z]/g,WCe=/([A-Z])/g;function YW(e){return gx[e]||(gx[e]=e.indexOf("-")<0?e:e.replace(HCe,t=>t[1].toUpperCase()))}function qI(e){return gx[e]||(gx[e]=e.replace(WCe,"-$1").toLowerCase())}let JCe=0,KW=0,Tm=[],ZCe=0,pO=!1,QW=document.createTextNode("");function YCe(){pO=!1;const e=Tm.length;for(let t=0;t<e;t++){let i=Tm[t];if(i)try{i()}catch(r){setTimeout(()=>{throw r})}}Tm.splice(0,e),KW+=e}new window.MutationObserver(YCe).observe(QW,{characterData:!0});const la={after:e=>({run:t=>window.setTimeout(t,e),cancel(t){window.clearTimeout(t)}}),run:(e,t)=>window.setTimeout(e,t),cancel(e){window.clearTimeout(e)}},ac={run:e=>window.requestAnimationFrame(e),cancel(e){window.cancelAnimationFrame(e)}},XW={run:e=>window.requestIdleCallback?window.requestIdleCallback(e):window.setTimeout(e,16),cancel(e){window.cancelIdleCallback?window.cancelIdleCallback(e):window.clearTimeout(e)}},ca={run:e=>(pO||(pO=!0,QW.textContent=ZCe++),Tm.push(e),JCe++),cancel(e){const t=e-KW;if(t>=0){if(!Tm[t])throw new Error("invalid async handle: "+e);Tm[t]=null}}},KCe=ca,eJ=Dn(e=>{class t extends e{static createProperties(r){const s=this.prototype;for(let n in r)n in s||s._createPropertyAccessor(n)}static attributeNameForProperty(r){return r.toLowerCase()}static typeForProperty(r){}_createPropertyAccessor(r,s){this._addPropertyToAttributeMap(r),this.hasOwnProperty(JSCompiler_renameProperty("__dataHasAccessor",this))||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[r]||(this.__dataHasAccessor[r]=!0,this._definePropertyAccessor(r,s))}_addPropertyToAttributeMap(r){this.hasOwnProperty(JSCompiler_renameProperty("__dataAttributes",this))||(this.__dataAttributes=Object.assign({},this.__dataAttributes));let s=this.__dataAttributes[r];return s||(s=this.constructor.attributeNameForProperty(r),this.__dataAttributes[s]=r),s}_definePropertyAccessor(r,s){Object.defineProperty(this,r,{get(){return this.__data[r]},set:s?function(){}:function(n){this._setPendingProperty(r,n,!0)&&this._invalidateProperties()}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__dataCounter=0,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let r in this.__dataHasAccessor)this.hasOwnProperty(r)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[r]=this[r],delete this[r])}_initializeInstanceProperties(r){Object.assign(this,r)}_setProperty(r,s){this._setPendingProperty(r,s)&&this._invalidateProperties()}_getProperty(r){return this.__data[r]}_setPendingProperty(r,s,n){let o=this.__data[r],a=this._shouldPropertyChange(r,s,o);return a&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(r in this.__dataOld)&&(this.__dataOld[r]=o),this.__data[r]=s,this.__dataPending[r]=s),a}_isPropertyPending(r){return!(!this.__dataPending||!this.__dataPending.hasOwnProperty(r))}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,KCe.run(()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())}))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){this.__dataCounter++;const r=this.__data,s=this.__dataPending,n=this.__dataOld;this._shouldPropertiesChange(r,s,n)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(r,s,n)),this.__dataCounter--}_shouldPropertiesChange(r,s,n){return Boolean(s)}_propertiesChanged(r,s,n){}_shouldPropertyChange(r,s,n){return n!==s&&(n==n||s==s)}attributeChangedCallback(r,s,n,o){s!==n&&this._attributeToProperty(r,n),super.attributeChangedCallback&&super.attributeChangedCallback(r,s,n,o)}_attributeToProperty(r,s,n){if(!this.__serializing){const o=this.__dataAttributes,a=o&&o[r]||r;this[a]=this._deserializeValue(s,n||this.constructor.typeForProperty(a))}}_propertyToAttribute(r,s,n){this.__serializing=!0,n=arguments.length<3?this[r]:n,this._valueToNodeAttribute(this,n,s||this.constructor.attributeNameForProperty(r)),this.__serializing=!1}_valueToNodeAttribute(r,s,n){const o=this._serializeValue(s);n!=="class"&&n!=="name"&&n!=="slot"||(r=ze(r)),o===void 0?r.removeAttribute(n):r.setAttribute(n,o)}_serializeValue(r){return typeof r=="boolean"?r?"":void 0:r!=null?r.toString():void 0}_deserializeValue(r,s){switch(s){case Boolean:return r!==null;case Number:return Number(r);default:return r}}}return t}),tJ={};let cw=HTMLElement.prototype;for(;cw;){let e=Object.getOwnPropertyNames(cw);for(let t=0;t<e.length;t++)tJ[e[t]]=!0;cw=Object.getPrototypeOf(cw)}function QCe(e,t){if(!tJ[t]){let i=e[t];i!==void 0&&(e.__data?e._setPendingProperty(t,i):(e.__dataProto?e.hasOwnProperty(JSCompiler_renameProperty("__dataProto",e))||(e.__dataProto=Object.create(e.__dataProto)):e.__dataProto={},e.__dataProto[t]=i))}}const iJ=Dn(e=>{const t=eJ(e);class i extends t{static createPropertiesForAttributes(){let s=this.observedAttributes;for(let n=0;n<s.length;n++)this.prototype._createPropertyAccessor(YW(s[n]))}static attributeNameForProperty(s){return qI(s)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties()}_initializeProtoProperties(s){for(let n in s)this._setProperty(n,s[n])}_ensureAttribute(s,n){const o=this;o.hasAttribute(s)||this._valueToNodeAttribute(o,n,s)}_serializeValue(s){if(typeof s=="object"){if(s instanceof Date)return s.toString();if(s)try{return JSON.stringify(s)}catch{return""}}return super._serializeValue(s)}_deserializeValue(s,n){let o;switch(n){case Object:try{o=JSON.parse(s)}catch{o=s}break;case Array:try{o=JSON.parse(s)}catch{o=null,console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${s}`)}break;case Date:o=isNaN(s)?String(s):Number(s),o=new Date(o);break;default:o=super._deserializeValue(s,n)}return o}_definePropertyAccessor(s,n){QCe(this,s),super._definePropertyAccessor(s,n)}_hasAccessor(s){return this.__dataHasAccessor&&this.__dataHasAccessor[s]}_isPropertyPending(s){return Boolean(this.__dataPending&&s in this.__dataPending)}}return i}),XCe={"dom-if":!0,"dom-repeat":!0};let fj=!1,mj=!1;function eEe(){if(!fj){fj=!0;const e=document.createElement("textarea");e.placeholder="a",mj=e.placeholder===e.textContent}return mj}function tEe(e){eEe()&&e.localName==="textarea"&&e.placeholder&&e.placeholder===e.textContent&&(e.textContent=null)}function iEe(e){let t=e.getAttribute("is");if(t&&XCe[t]){let i=e;for(i.removeAttribute("is"),e=i.ownerDocument.createElement(t),i.parentNode.replaceChild(e,i),e.appendChild(i);i.attributes.length;)e.setAttribute(i.attributes[0].name,i.attributes[0].value),i.removeAttribute(i.attributes[0].name)}return e}function rJ(e,t){let i=t.parentInfo&&rJ(e,t.parentInfo);if(!i)return e;for(let r=i.firstChild,s=0;r;r=r.nextSibling)if(t.parentIndex===s++)return r}function rEe(e,t,i,r){r.id&&(t[r.id]=i)}function sEe(e,t,i){if(i.events&&i.events.length)for(let r,s=0,n=i.events;s<n.length&&(r=n[s]);s++)e._addMethodEventListenerToNode(t,r.name,r.value,e)}function nEe(e,t,i,r){i.templateInfo&&(t._templateInfo=i.templateInfo,t._parentTemplateInfo=r)}function oEe(e,t,i){return e=e._methodHost||e,function(r){e[i]?e[i](r,r.detail):console.warn("listener method `"+i+"` not defined")}}const aEe=Dn(e=>{class t extends e{static _parseTemplate(r,s){if(!r._templateInfo){let n=r._templateInfo={};n.nodeInfoList=[],n.nestedTemplate=Boolean(s),n.stripWhiteSpace=s&&s.stripWhiteSpace||r.hasAttribute("strip-whitespace"),this._parseTemplateContent(r,n,{parent:null})}return r._templateInfo}static _parseTemplateContent(r,s,n){return this._parseTemplateNode(r.content,s,n)}static _parseTemplateNode(r,s,n){let o=!1,a=r;return a.localName!="template"||a.hasAttribute("preserve-content")?a.localName==="slot"&&(s.hasInsertionPoint=!0):o=this._parseTemplateNestedTemplate(a,s,n)||o,tEe(a),a.firstChild&&this._parseTemplateChildNodes(a,s,n),a.hasAttributes&&a.hasAttributes()&&(o=this._parseTemplateNodeAttributes(a,s,n)||o),o||n.noted}static _parseTemplateChildNodes(r,s,n){if(r.localName!=="script"&&r.localName!=="style")for(let o,a=r.firstChild,l=0;a;a=o){if(a.localName=="template"&&(a=iEe(a)),o=a.nextSibling,a.nodeType===Node.TEXT_NODE){let h=o;for(;h&&h.nodeType===Node.TEXT_NODE;)a.textContent+=h.textContent,o=h.nextSibling,r.removeChild(h),h=o;if(s.stripWhiteSpace&&!a.textContent.trim()){r.removeChild(a);continue}}let u={parentIndex:l,parentInfo:n};this._parseTemplateNode(a,s,u)&&(u.infoIndex=s.nodeInfoList.push(u)-1),a.parentNode&&l++}}static _parseTemplateNestedTemplate(r,s,n){let o=r,a=this._parseTemplate(o,s);return(a.content=o.content.ownerDocument.createDocumentFragment()).appendChild(o.content),n.templateInfo=a,!0}static _parseTemplateNodeAttributes(r,s,n){let o=!1,a=Array.from(r.attributes);for(let l,u=a.length-1;l=a[u];u--)o=this._parseTemplateNodeAttribute(r,s,n,l.name,l.value)||o;return o}static _parseTemplateNodeAttribute(r,s,n,o,a){return o.slice(0,3)==="on-"?(r.removeAttribute(o),n.events=n.events||[],n.events.push({name:o.slice(3),value:a}),!0):o==="id"&&(n.id=a,!0)}static _contentForTemplate(r){let s=r._templateInfo;return s&&s.content||r.content}_stampTemplate(r,s){r&&!r.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(r);let n=(s=s||this.constructor._parseTemplate(r)).nodeInfoList,o=s.content||r.content,a=document.importNode(o,!0);a.__noInsertionPoint=!s.hasInsertionPoint;let l=a.nodeList=new Array(n.length);a.$={};for(let u,h=0,f=n.length;h<f&&(u=n[h]);h++){let y=l[h]=rJ(a,u);rEe(this,a.$,y,u),nEe(this,y,u,s),sEe(this,y,u)}return a=a,a}_addMethodEventListenerToNode(r,s,n,o){let a=oEe(o=o||r,s,n);return this._addEventListenerToNode(r,s,a),a}_addEventListenerToNode(r,s,n){r.addEventListener(s,n)}_removeEventListenerFromNode(r,s,n){r.removeEventListener(s,n)}}return t});let Vv=0;const Uv=[],Ft={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},sJ="__computeInfo",lEe=/[A-Z]/;function yC(e,t,i){let r=e[t];if(r){if(!e.hasOwnProperty(t)&&(r=e[t]=Object.create(e[t]),i))for(let s in r){let n=r[s],o=r[s]=Array(n.length);for(let a=0;a<n.length;a++)o[a]=n[a]}}else r=e[t]={};return r}function g0(e,t,i,r,s,n){if(t){let o=!1;const a=Vv++;for(let l in i){let u=t[s?vc(l):l];if(u)for(let h,f=0,y=u.length;f<y&&(h=u[f]);f++)h.info&&h.info.lastRun===a||s&&!HL(l,h.trigger)||(h.info&&(h.info.lastRun=a),h.fn(e,l,i,r,h.info,s,n),o=!0)}return o}return!1}function cEe(e,t,i,r,s,n,o,a){let l=!1,u=t[o?vc(r):r];if(u)for(let h,f=0,y=u.length;f<y&&(h=u[f]);f++)h.info&&h.info.lastRun===i||o&&!HL(r,h.trigger)||(h.info&&(h.info.lastRun=i),h.fn(e,r,s,n,h.info,o,a),l=!0);return l}function HL(e,t){if(t){let i=t.name;return i==e||!(!t.structured||!JW(i,e))||!(!t.wildcard||!jv(i,e))}return!0}function yj(e,t,i,r,s){let n=typeof s.method=="string"?e[s.method]:s.method,o=s.property;n?n.call(e,e.__data[o],r[o]):s.dynamicFn||console.warn("observer method `"+s.method+"` not defined")}function uEe(e,t,i,r,s){let n,o,a=e[Ft.NOTIFY],l=Vv++;for(let u in t)t[u]&&(a&&cEe(e,a,l,u,i,r,s)||s&&dEe(e,u,i))&&(n=!0);n&&(o=e.__dataHost)&&o._invalidateProperties&&o._invalidateProperties()}function dEe(e,t,i){let r=vc(t);return r!==t?(nJ(e,qI(r)+"-changed",i[t],t),!0):!1}function nJ(e,t,i,r){let s={value:i,queueProperty:!0};r&&(s.path=r),ze(e).dispatchEvent(new CustomEvent(t,{detail:s}))}function hEe(e,t,i,r,s,n){let o=(n?vc(t):t)!=t?t:null,a=o?vs(e,o):e.__data[t];o&&a===void 0&&(a=i[t]),nJ(e,s.eventName,a,o)}function pEe(e,t,i,r,s){let n,o=e.detail,a=o&&o.path;a?(r=zv(i,r,a),n=o&&o.value):n=e.currentTarget[i],n=s?!n:n,t[Ft.READ_ONLY]&&t[Ft.READ_ONLY][r]||!t._setPendingPropertyOrPath(r,n,!0,Boolean(a))||o&&o.queueProperty||t._invalidateProperties()}function fEe(e,t,i,r,s){let n=e.__data[t];yx&&(n=yx(n,s.attrName,"attribute",e)),e._propertyToAttribute(t,s.attrName,n)}function mEe(e,t,i,r){let s=e[Ft.COMPUTE];if(s)if(CCe){Vv++;const n=gEe(e),o=[];for(let l in t)gj(l,s,o,n,r);let a;for(;a=o.shift();)oJ(e,"",t,i,a)&&gj(a.methodInfo,s,o,n,r);Object.assign(i,e.__dataOld),Object.assign(t,e.__dataPending),e.__dataPending=null}else{let n=t;for(;g0(e,s,n,i,r);)Object.assign(i,e.__dataOld),Object.assign(t,e.__dataPending),n=e.__dataPending,e.__dataPending=null}}const yEe=(e,t,i)=>{let r=0,s=t.length-1,n=-1;for(;r<=s;){const o=r+s>>1,a=i.get(t[o].methodInfo)-i.get(e.methodInfo);if(a<0)r=o+1;else{if(!(a>0)){n=o;break}s=o-1}}n<0&&(n=s+1),t.splice(n,0,e)},gj=(e,t,i,r,s)=>{const n=t[s?vc(e):e];if(n)for(let o=0;o<n.length;o++){const a=n[o];a.info.lastRun===Vv||s&&!HL(e,a.trigger)||(a.info.lastRun=Vv,yEe(a.info,i,r))}};function gEe(e){let t=e.constructor.__orderedComputedDeps;if(!t){t=new Map;const i=e[Ft.COMPUTE];let r,{counts:s,ready:n,total:o}=vEe(e);for(;r=n.shift();){t.set(r,t.size);const a=i[r];a&&a.forEach(l=>{const u=l.info.methodInfo;--o,--s[u]==0&&n.push(u)})}o!==0&&console.warn(`Computed graph for ${e.localName} incomplete; circular?`),e.constructor.__orderedComputedDeps=t}return t}function vEe(e){const t=e[sJ],i={},r=e[Ft.COMPUTE],s=[];let n=0;for(let o in t){const a=t[o];n+=i[o]=a.args.filter(l=>!l.literal).length+(a.dynamicFn?1:0)}for(let o in r)t[o]||s.push(o);return{counts:i,ready:s,total:n}}function oJ(e,t,i,r,s){let n=fO(e,t,i,r,s);if(n===Uv)return!1;let o=s.methodInfo;return e.__dataHasAccessor&&e.__dataHasAccessor[o]?e._setPendingProperty(o,n,!0):(e[o]=n,!1)}function _Ee(e,t,i){let r=e.__dataLinkedPaths;if(r){let s;for(let n in r){let o=r[n];jv(n,t)?(s=zv(n,o,t),e._setPendingPropertyOrPath(s,i,!0,!0)):jv(o,t)&&(s=zv(o,n,t),e._setPendingPropertyOrPath(s,i,!0,!0))}}}function gC(e,t,i,r,s,n,o){i.bindings=i.bindings||[];let a={kind:r,target:s,parts:n,literal:o,isCompound:n.length!==1};if(i.bindings.push(a),IEe(a)){let{event:u,negate:h}=a.parts[0];a.listenerEvent=u||qI(s)+"-changed",a.listenerNegate=h}let l=t.nodeInfoList.length;for(let u=0;u<a.parts.length;u++){let h=a.parts[u];h.compoundIndex=u,bEe(e,t,a,h,l)}}function bEe(e,t,i,r,s){if(!r.literal)if(i.kind==="attribute"&&i.target[0]==="-")console.warn("Cannot set attribute "+i.target+' because "-" is not a valid attribute starting character');else{let n=r.dependencies,o={index:s,binding:i,part:r,evaluator:e};for(let a=0;a<n.length;a++){let l=n[a];typeof l=="string"&&(l=lJ(l),l.wildcard=!0),e._addTemplatePropertyEffect(t,l.rootProperty,{fn:wEe,info:o,trigger:l})}}}function wEe(e,t,i,r,s,n,o){let a=o[s.index],l=s.binding,u=s.part;if(n&&u.source&&t.length>u.source.length&&l.kind=="property"&&!l.isCompound&&a.__isPropertyEffectsClient&&a.__dataHasAccessor&&a.__dataHasAccessor[l.target]){let h=i[t];t=zv(u.source,l.target,t),a._setPendingPropertyOrPath(t,h,!1,!0)&&e._enqueueClient(a)}else{let h=s.evaluator._evaluateBinding(e,u,t,i,r,n);h!==Uv&&SEe(e,a,l,u,h)}}function SEe(e,t,i,r,s){if(s=xEe(t,s,i,r),yx&&(s=yx(s,i.target,i.kind,t)),i.kind=="attribute")e._valueToNodeAttribute(t,s,i.target);else{let n=i.target;t.__isPropertyEffectsClient&&t.__dataHasAccessor&&t.__dataHasAccessor[n]?t[Ft.READ_ONLY]&&t[Ft.READ_ONLY][n]||t._setPendingProperty(n,s)&&e._enqueueClient(t):e._setUnmanagedPropertyToNode(t,n,s)}}function xEe(e,t,i,r){if(i.isCompound){let s=e.__dataCompoundStorage[i.target];s[r.compoundIndex]=t,t=s.join("")}return i.kind!=="attribute"&&(i.target!=="textContent"&&(i.target!=="value"||e.localName!=="input"&&e.localName!=="textarea")||(t=t==null?"":t)),t}function IEe(e){return Boolean(e.target)&&e.kind!="attribute"&&e.kind!="text"&&!e.isCompound&&e.parts[0].mode==="{"}function TEe(e,t){let{nodeList:i,nodeInfoList:r}=t;if(r.length)for(let s=0;s<r.length;s++){let n=r[s],o=i[s],a=n.bindings;if(a)for(let l=0;l<a.length;l++){let u=a[l];$Ee(o,u),CEe(o,e,u)}o.__dataHost=e}}function $Ee(e,t){if(t.isCompound){let i=e.__dataCompoundStorage||(e.__dataCompoundStorage={}),r=t.parts,s=new Array(r.length);for(let o=0;o<r.length;o++)s[o]=r[o].literal;let n=t.target;i[n]=s,t.literal&&t.kind=="property"&&(n==="className"&&(e=ze(e)),e[n]=t.literal)}}function CEe(e,t,i){if(i.listenerEvent){let r=i.parts[0];e.addEventListener(i.listenerEvent,function(s){pEe(s,t,i.target,r.source,r.negate)})}}function vj(e,t,i,r,s,n){n=t.static||n&&(typeof n!="object"||n[t.methodName]);let o={methodName:t.methodName,args:t.args,methodInfo:s,dynamicFn:n};for(let a,l=0;l<t.args.length&&(a=t.args[l]);l++)a.literal||e._addPropertyEffect(a.rootProperty,i,{fn:r,info:o,trigger:a});return n&&e._addPropertyEffect(t.methodName,i,{fn:r,info:o}),o}function fO(e,t,i,r,s){let n=e._methodHost||e,o=n[s.methodName];if(o){let a=e._marshalArgs(s.args,t,i);return a===Uv?Uv:o.apply(n,a)}s.dynamicFn||console.warn("method `"+s.methodName+"` not defined")}const EEe=[],aJ="(?:[a-zA-Z_$][\\w.:$\\-*]*)",_j="(?:("+aJ+`|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:"(?:[^"\\\\]|\\\\.)*")))\\s*)`,bj=new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?"+("("+aJ+"\\s*"+("(?:\\(\\s*(?:"+("(?:"+_j+"(?:,\\s*"+_j+")*)")+"?)\\)\\s*)")+"?)")+"(?:]]|}})","g");function wj(e){let t="";for(let i=0;i<e.length;i++)t+=e[i].literal||"";return t}function vC(e){let t=e.match(/([^\s]+?)\(([\s\S]*)\)/);if(t){let i={methodName:t[1],static:!0,args:EEe};return t[2].trim()?AEe(t[2].replace(/\\,/g,"&comma;").split(","),i):i}return null}function AEe(e,t){return t.args=e.map(function(i){let r=lJ(i);return r.literal||(t.static=!1),r},this),t}function lJ(e){let t=e.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),i={name:t,value:"",literal:!1},r=t[0];switch(r==="-"&&(r=t[1]),r>="0"&&r<="9"&&(r="#"),r){case"'":case'"':i.value=t.slice(1,-1),i.literal=!0;break;case"#":i.value=Number(t),i.literal=!0}return i.literal||(i.rootProperty=vc(t),i.structured=hO(t),i.structured&&(i.wildcard=t.slice(-2)==".*",i.wildcard&&(i.name=t.slice(0,-2)))),i}function Sj(e,t,i){let r=vs(e,i);return r===void 0&&(r=t[i]),r}function cJ(e,t,i,r){const s={indexSplices:r};uO&&!e._overrideLegacyUndefined&&(t.splices=s),e.notifyPath(i+".splices",s),e.notifyPath(i+".length",t.length),uO&&!e._overrideLegacyUndefined&&(s.indexSplices=[])}function ug(e,t,i,r,s,n){cJ(e,t,i,[{index:r,addedCount:s,removed:n,object:t,type:"splice"}])}function MEe(e){return e[0].toUpperCase()+e.substring(1)}const GI=Dn(e=>{const t=aEe(iJ(e));class i extends t{constructor(){super(),this.__isPropertyEffectsClient=!0,this.__dataClientsReady,this.__dataPendingClients,this.__dataToNotify,this.__dataLinkedPaths,this.__dataHasPaths,this.__dataCompoundStorage,this.__dataHost,this.__dataTemp,this.__dataClientsInitialized,this.__data,this.__dataPending,this.__dataOld,this.__computeEffects,this.__computeInfo,this.__reflectEffects,this.__notifyEffects,this.__propagateEffects,this.__observeEffects,this.__readOnly,this.__templateInfo,this._overrideLegacyUndefined}get PROPERTY_EFFECT_TYPES(){return Ft}_initializeProperties(){super._initializeProperties(),this._registerHost(),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_registerHost(){if(dg.length){let s=dg[dg.length-1];s._enqueueClient(this),this.__dataHost=s}}_initializeProtoProperties(s){this.__data=Object.create(s),this.__dataPending=Object.create(s),this.__dataOld={}}_initializeInstanceProperties(s){let n=this[Ft.READ_ONLY];for(let o in s)n&&n[o]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[o]=this.__dataPending[o]=s[o])}_addPropertyEffect(s,n,o){this._createPropertyAccessor(s,n==Ft.READ_ONLY);let a=yC(this,n,!0)[s];a||(a=this[n][s]=[]),a.push(o)}_removePropertyEffect(s,n,o){let a=yC(this,n,!0)[s],l=a.indexOf(o);l>=0&&a.splice(l,1)}_hasPropertyEffect(s,n){let o=this[n];return Boolean(o&&o[s])}_hasReadOnlyEffect(s){return this._hasPropertyEffect(s,Ft.READ_ONLY)}_hasNotifyEffect(s){return this._hasPropertyEffect(s,Ft.NOTIFY)}_hasReflectEffect(s){return this._hasPropertyEffect(s,Ft.REFLECT)}_hasComputedEffect(s){return this._hasPropertyEffect(s,Ft.COMPUTE)}_setPendingPropertyOrPath(s,n,o,a){if(a||vc(Array.isArray(s)?s[0]:s)!==s){if(!a){let l=vs(this,s);if(!(s=pj(this,s,n))||!super._shouldPropertyChange(s,n,l))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(s,n,o))return _Ee(this,s,n),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[s])return this._setPendingProperty(s,n,o);this[s]=n}return!1}_setUnmanagedPropertyToNode(s,n,o){o===s[n]&&typeof o!="object"||(n==="className"&&(s=ze(s)),s[n]=o)}_setPendingProperty(s,n,o){let a=this.__dataHasPaths&&hO(s),l=a?this.__dataTemp:this.__data;return!!this._shouldPropertyChange(s,n,l[s])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),s in this.__dataOld||(this.__dataOld[s]=this.__data[s]),a?this.__dataTemp[s]=n:this.__data[s]=n,this.__dataPending[s]=n,(a||this[Ft.NOTIFY]&&this[Ft.NOTIFY][s])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[s]=o),!0)}_setProperty(s,n){this._setPendingProperty(s,n,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(s){this.__dataPendingClients=this.__dataPendingClients||[],s!==this&&this.__dataPendingClients.push(s)}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let s=this.__dataPendingClients;if(s){this.__dataPendingClients=null;for(let n=0;n<s.length;n++){let o=s[n];o.__dataEnabled?o.__dataPending&&o._flushProperties():o._enableProperties()}}}_readyClients(){this.__enableOrFlushClients()}setProperties(s,n){for(let o in s)!n&&this[Ft.READ_ONLY]&&this[Ft.READ_ONLY][o]||this._setPendingPropertyOrPath(o,s[o],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(s,n,o){let a,l=this.__dataHasPaths;this.__dataHasPaths=!1,mEe(this,n,o,l),a=this.__dataToNotify,this.__dataToNotify=null,this._propagatePropertyChanges(n,o,l),this._flushClients(),g0(this,this[Ft.REFLECT],n,o,l),g0(this,this[Ft.OBSERVE],n,o,l),a&&uEe(this,a,n,o,l),this.__dataCounter==1&&(this.__dataTemp={})}_propagatePropertyChanges(s,n,o){this[Ft.PROPAGATE]&&g0(this,this[Ft.PROPAGATE],s,n,o),this.__templateInfo&&this._runEffectsForTemplate(this.__templateInfo,s,n,o)}_runEffectsForTemplate(s,n,o,a){const l=(u,h)=>{g0(this,s.propertyEffects,u,o,h,s.nodeList);for(let f=s.firstChild;f;f=f.nextSibling)this._runEffectsForTemplate(f,u,o,h)};s.runEffects?s.runEffects(l,n,a):l(n,a)}linkPaths(s,n){s=y0(s),n=y0(n),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[s]=n}unlinkPaths(s){s=y0(s),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[s]}notifySplices(s,n){let o={path:""};cJ(this,vs(this,s,o),o.path,n)}get(s,n){return vs(n||this,s)}set(s,n,o){o?pj(o,s,n):this[Ft.READ_ONLY]&&this[Ft.READ_ONLY][s]||this._setPendingPropertyOrPath(s,n,!0)&&this._invalidateProperties()}push(s,...n){let o={path:""},a=vs(this,s,o),l=a.length,u=a.push(...n);return n.length&&ug(this,a,o.path,l,n.length,[]),u}pop(s){let n={path:""},o=vs(this,s,n),a=Boolean(o.length),l=o.pop();return a&&ug(this,o,n.path,o.length,0,[l]),l}splice(s,n,o,...a){let l,u={path:""},h=vs(this,s,u);return n<0?n=h.length-Math.floor(-n):n&&(n=Math.floor(n)),l=arguments.length===2?h.splice(n):h.splice(n,o,...a),(a.length||l.length)&&ug(this,h,u.path,n,a.length,l),l}shift(s){let n={path:""},o=vs(this,s,n),a=Boolean(o.length),l=o.shift();return a&&ug(this,o,n.path,0,0,[l]),l}unshift(s,...n){let o={path:""},a=vs(this,s,o),l=a.unshift(...n);return n.length&&ug(this,a,o.path,0,n.length,[]),l}notifyPath(s,n){let o;if(arguments.length==1){let a={path:""};n=vs(this,s,a),o=a.path}else o=Array.isArray(s)?y0(s):s;this._setPendingPropertyOrPath(o,n,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(s,n){this._addPropertyEffect(s,Ft.READ_ONLY),n&&(this["_set"+MEe(s)]=function(o){this._setProperty(s,o)})}_createPropertyObserver(s,n,o){let a={property:s,method:n,dynamicFn:Boolean(o)};this._addPropertyEffect(s,Ft.OBSERVE,{fn:yj,info:a,trigger:{name:s}}),o&&this._addPropertyEffect(n,Ft.OBSERVE,{fn:yj,info:a,trigger:{name:n}})}_createMethodObserver(s,n){let o=vC(s);if(!o)throw new Error("Malformed observer expression '"+s+"'");vj(this,o,Ft.OBSERVE,fO,null,n)}_createNotifyingProperty(s){this._addPropertyEffect(s,Ft.NOTIFY,{fn:hEe,info:{eventName:qI(s)+"-changed",property:s}})}_createReflectedProperty(s){let n=this.constructor.attributeNameForProperty(s);n[0]==="-"?console.warn("Property "+s+" cannot be reflected to attribute "+n+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(s,Ft.REFLECT,{fn:fEe,info:{attrName:n}})}_createComputedProperty(s,n,o){let a=vC(n);if(!a)throw new Error("Malformed computed expression '"+n+"'");const l=vj(this,a,Ft.COMPUTE,oJ,s,o);yC(this,sJ)[s]=l}_marshalArgs(s,n,o){const a=this.__data,l=[];for(let u=0,h=s.length;u<h;u++){let{name:f,structured:y,wildcard:g,value:b,literal:w}=s[u];if(!w)if(g){const x=jv(f,n),T=Sj(a,o,x?n:f);b={path:x?n:f,value:T,base:x?vs(a,f):T}}else b=y?Sj(a,o,f):a[f];if(uO&&!this._overrideLegacyUndefined&&b===void 0&&s.length>1)return Uv;l[u]=b}return l}static addPropertyEffect(s,n,o){this.prototype._addPropertyEffect(s,n,o)}static createPropertyObserver(s,n,o){this.prototype._createPropertyObserver(s,n,o)}static createMethodObserver(s,n){this.prototype._createMethodObserver(s,n)}static createNotifyingProperty(s){this.prototype._createNotifyingProperty(s)}static createReadOnlyProperty(s,n){this.prototype._createReadOnlyProperty(s,n)}static createReflectedProperty(s){this.prototype._createReflectedProperty(s)}static createComputedProperty(s,n,o){this.prototype._createComputedProperty(s,n,o)}static bindTemplate(s){return this.prototype._bindTemplate(s)}_bindTemplate(s,n){let o=this.constructor._parseTemplate(s),a=this.__preBoundTemplateInfo==o;if(!a)for(let l in o.propertyEffects)this._createPropertyAccessor(l);if(n)if(o=Object.create(o),o.wasPreBound=a,this.__templateInfo){const l=s._parentTemplateInfo||this.__templateInfo,u=l.lastChild;o.parent=l,l.lastChild=o,o.previousSibling=u,u?u.nextSibling=o:l.firstChild=o}else this.__templateInfo=o;else this.__preBoundTemplateInfo=o;return o}static _addTemplatePropertyEffect(s,n,o){(s.hostProps=s.hostProps||{})[n]=!0;let a=s.propertyEffects=s.propertyEffects||{};(a[n]=a[n]||[]).push(o)}_stampTemplate(s,n){n=n||this._bindTemplate(s,!0),dg.push(this);let o=super._stampTemplate(s,n);if(dg.pop(),n.nodeList=o.nodeList,!n.wasPreBound){let a=n.childNodes=[];for(let l=o.firstChild;l;l=l.nextSibling)a.push(l)}return o.templateInfo=n,TEe(this,n),this.__dataClientsReady&&(this._runEffectsForTemplate(n,this.__data,null,!1),this._flushClients()),o}_removeBoundDom(s){const n=s.templateInfo,{previousSibling:o,nextSibling:a,parent:l}=n;o?o.nextSibling=a:l&&(l.firstChild=a),a?a.previousSibling=o:l&&(l.lastChild=o),n.nextSibling=n.previousSibling=null;let u=n.childNodes;for(let h=0;h<u.length;h++){let f=u[h];ze(ze(f).parentNode).removeChild(f)}}static _parseTemplateNode(s,n,o){let a=t._parseTemplateNode.call(this,s,n,o);if(s.nodeType===Node.TEXT_NODE){let l=this._parseBindings(s.textContent,n);l&&(s.textContent=wj(l)||" ",gC(this,n,o,"text","textContent",l),a=!0)}return a}static _parseTemplateNodeAttribute(s,n,o,a,l){let u=this._parseBindings(l,n);if(u){let h=a,f="property";lEe.test(a)?f="attribute":a[a.length-1]=="$"&&(a=a.slice(0,-1),f="attribute");let y=wj(u);return y&&f=="attribute"&&(a=="class"&&s.hasAttribute("class")&&(y+=" "+s.getAttribute(a)),s.setAttribute(a,y)),f=="attribute"&&h=="disable-upgrade$"&&s.setAttribute(a,""),s.localName==="input"&&h==="value"&&s.setAttribute(h,""),s.removeAttribute(h),f==="property"&&(a=YW(a)),gC(this,n,o,f,a,u,y),!0}return t._parseTemplateNodeAttribute.call(this,s,n,o,a,l)}static _parseTemplateNestedTemplate(s,n,o){let a=t._parseTemplateNestedTemplate.call(this,s,n,o);const l=s.parentNode,u=o.templateInfo,h=l.localName==="dom-if",f=l.localName==="dom-repeat";ej&&(h||f)&&(l.removeChild(s),(o=o.parentInfo).templateInfo=u,o.noted=!0,a=!1);let y=u.hostProps;if(GW&&h)y&&(n.hostProps=Object.assign(n.hostProps||{},y),ej||(o.parentInfo.noted=!0));else{let g="{";for(let b in y)gC(this,n,o,"property","_host_"+b,[{mode:g,source:b,dependencies:[b],hostProp:!0}])}return a}static _parseBindings(s,n){let o,a=[],l=0;for(;(o=bj.exec(s))!==null;){o.index>l&&a.push({literal:s.slice(l,o.index)});let u=o[1][0],h=Boolean(o[2]),f=o[3].trim(),y=!1,g="",b=-1;u=="{"&&(b=f.indexOf("::"))>0&&(g=f.substring(b+2),f=f.substring(0,b),y=!0);let w=vC(f),x=[];if(w){let{args:T,methodName:M}=w;for(let D=0;D<T.length;D++){let R=T[D];R.literal||x.push(R)}let F=n.dynamicFns;(F&&F[M]||w.static)&&(x.push(M),w.dynamicFn=!0)}else x.push(f);a.push({source:f,mode:u,negate:h,customEvent:y,signature:w,dependencies:x,event:g}),l=bj.lastIndex}if(l&&l<s.length){let u=s.substring(l);u&&a.push({literal:u})}return a.length?a:null}static _evaluateBinding(s,n,o,a,l,u){let h;return h=n.signature?fO(s,o,a,l,n.signature):o!=n.source?vs(s,n.source):u&&hO(o)?vs(s,o):s.__data[o],n.negate&&(h=!h),h}}return i}),dg=[];function OEe(e){const t={};for(let i in e){const r=e[i];t[i]=typeof r=="function"?{type:r}:r}return t}const kEe=Dn(e=>{const t=eJ(e);function i(n){const o=Object.getPrototypeOf(n);return o.prototype instanceof s?o:null}function r(n){if(!n.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",n))){let o=null;if(n.hasOwnProperty(JSCompiler_renameProperty("properties",n))){const a=n.properties;a&&(o=OEe(a))}n.__ownProperties=o}return n.__ownProperties}class s extends t{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){this.prototype;const o=this._properties;this.__observedAttributes=o?Object.keys(o).map(a=>this.prototype._addPropertyToAttributeMap(a)):[]}return this.__observedAttributes}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const o=i(this);o&&o.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const o=r(this);o&&this.createProperties(o)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const o=i(this);this.__properties=Object.assign({},o&&o._properties,r(this))}return this.__properties}static typeForProperty(o){const a=this._properties[o];return a&&a.type}_initializeProperties(){this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return s}),PEe="3.4.1",mO=window.ShadyCSS&&window.ShadyCSS.cssBuild,HI=Dn(e=>{const t=kEe(GI(e));function i(l){if(!l.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",l))){l.__propertyDefaults=null;let u=l._properties;for(let h in u){let f=u[h];"value"in f&&(l.__propertyDefaults=l.__propertyDefaults||{},l.__propertyDefaults[h]=f)}}return l.__propertyDefaults}function r(l){return l.hasOwnProperty(JSCompiler_renameProperty("__ownObservers",l))||(l.__ownObservers=l.hasOwnProperty(JSCompiler_renameProperty("observers",l))?l.observers:null),l.__ownObservers}function s(l,u,h,f){h.computed&&(h.readOnly=!0),h.computed&&(l._hasReadOnlyEffect(u)?console.warn(`Cannot redefine computed property '${u}'.`):l._createComputedProperty(u,h.computed,f)),h.readOnly&&!l._hasReadOnlyEffect(u)?l._createReadOnlyProperty(u,!h.computed):h.readOnly===!1&&l._hasReadOnlyEffect(u)&&console.warn(`Cannot make readOnly property '${u}' non-readOnly.`),h.reflectToAttribute&&!l._hasReflectEffect(u)?l._createReflectedProperty(u):h.reflectToAttribute===!1&&l._hasReflectEffect(u)&&console.warn(`Cannot make reflected property '${u}' non-reflected.`),h.notify&&!l._hasNotifyEffect(u)?l._createNotifyingProperty(u):h.notify===!1&&l._hasNotifyEffect(u)&&console.warn(`Cannot make notify property '${u}' non-notify.`),h.observer&&l._createPropertyObserver(u,h.observer,f[h.observer]),l._addPropertyToAttributeMap(u)}function n(l,u,h,f){if(!mO){const y=u.content.querySelectorAll("style"),g=BL(u),b=LCe(h),w=u.content.firstElementChild;for(let T=0;T<b.length;T++){let M=b[T];M.textContent=l._processStyleText(M.textContent,f),u.content.insertBefore(M,w)}let x=0;for(let T=0;T<g.length;T++){let M=g[T],F=y[x];F!==M?(M=M.cloneNode(!0),F.parentNode.insertBefore(M,F)):x++,M.textContent=l._processStyleText(M.textContent,f)}}if(window.ShadyCSS&&window.ShadyCSS.prepareTemplate(u,h),ECe&&mO&&SCe){const y=u.content.querySelectorAll("style");if(y){let g="";Array.from(y).forEach(b=>{g+=b.textContent,b.parentNode.removeChild(b)}),l._styleSheet=new CSSStyleSheet,l._styleSheet.replaceSync(g)}}}function o(l){let u=null;if(l&&(!Km||TCe)&&(u=Qm.import(l,"template"),Km&&!u))throw new Error(`strictTemplatePolicy: expecting dom-module or null template for ${l}`);return u}class a extends t{static get polymerElementVersion(){return PEe}static _finalizeClass(){t._finalizeClass.call(this);const u=r(this);u&&this.createObservers(u,this._properties),this._prepareTemplate()}static _prepareTemplate(){let u=this.template;u&&(typeof u=="string"?(console.error("template getter must return HTMLTemplateElement"),u=null):Fv||(u=u.cloneNode(!0))),this.prototype._template=u}static createProperties(u){for(let h in u)s(this.prototype,h,u[h],u)}static createObservers(u,h){const f=this.prototype;for(let y=0;y<u.length;y++)f._createMethodObserver(u[y],h)}static get template(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_template",this))){const u=this.prototype.hasOwnProperty(JSCompiler_renameProperty("_template",this.prototype))?this.prototype._template:void 0;this._template=u!==void 0?u:this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&o(this.is)||Object.getPrototypeOf(this.prototype).constructor.template}return this._template}static set template(u){this._template=u}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const u=this.importMeta;if(u)this._importPath=jL(u.url);else{const h=Qm.import(this.is);this._importPath=h&&h.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath}}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=xCe,this.importPath=this.constructor.importPath;let u=i(this.constructor);if(u)for(let h in u){let f=u[h];if(this._canApplyPropertyDefault(h)){let y=typeof f.value=="function"?f.value.call(this):f.value;this._hasAccessor(h)?this._setPendingProperty(h,y,!0):this[h]=y}}}_canApplyPropertyDefault(u){return!this.hasOwnProperty(u)}static _processStyleText(u,h){return DL(u,h)}static _finalizeTemplate(u){const h=this.prototype._template;if(h&&!h.__polymerFinalized){h.__polymerFinalized=!0;const f=this.importPath;n(this,h,u,f?H0(f):""),this.prototype._bindTemplate(h)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(u){const h=ze(this);if(h.attachShadow)return u?(h.shadowRoot||(h.attachShadow({mode:"open",shadyUpgradeFragment:u}),h.shadowRoot.appendChild(u),this.constructor._styleSheet&&(h.shadowRoot.adoptedStyleSheets=[this.constructor._styleSheet])),$Ce&&window.ShadyDOM&&window.ShadyDOM.flushInitial(h.shadowRoot),h.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(u){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,u)}resolveUrl(u,h){return!h&&this.importPath&&(h=H0(this.importPath)),H0(u,h)}static _parseTemplateContent(u,h,f){return h.dynamicFns=h.dynamicFns||this._properties,t._parseTemplateContent.call(this,u,h,f)}static _addTemplatePropertyEffect(u,h,f){return!qW||h in this._properties||f.info.part.signature&&f.info.part.signature.static||f.info.part.hostProp||u.nestedTemplate||console.warn(`Property '${h}' used in template but not declared in 'properties'; attribute will not be observed.`),t._addTemplatePropertyEffect.call(this,u,h,f)}}return a});class uJ{constructor(t){this.value=t.toString()}toString(){return this.value}}function LEe(e){if(e instanceof uJ)return e.value;throw new Error(`non-literal value passed to Polymer's htmlLiteral function: ${e}`)}function REe(e){if(e instanceof HTMLTemplateElement)return e.innerHTML;if(e instanceof uJ)return LEe(e);throw new Error(`non-template value passed to Polymer's html function: ${e}`)}const A_=function(e,...t){const i=document.createElement("template");return i.innerHTML=t.reduce((r,s,n)=>r+REe(s)+e[n+1],e[0]),i},cd=HI(HTMLElement);class Di{constructor(){this._asyncModule=null,this._callback=null,this._timer=null}setConfig(t,i){this._asyncModule=t,this._callback=i,this._timer=this._asyncModule.run(()=>{this._timer=null,Bv.delete(this),this._callback()})}cancel(){this.isActive()&&(this._cancelAsync(),Bv.delete(this))}_cancelAsync(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}flush(){this.isActive()&&(this.cancel(),this._callback())}isActive(){return this._timer!=null}static debounce(t,i,r){return t instanceof Di?t._cancelAsync():t=new Di,t.setConfig(i,r),t}}let Bv=new Set;const WI=function(e){Bv.add(e)},FEe=function(){const e=Boolean(Bv.size);return Bv.forEach(t=>{try{t.flush()}catch(i){setTimeout(()=>{throw i})}}),e};let WL=typeof document.head.style.touchAction=="string",vx="__polymerGestures",R1="__polymerGesturesHandled",yO="__polymerGesturesTouchAction",xj=25,Ij=5,NEe=2,DEe=2500,dJ=["mousedown","mousemove","mouseup","click"],jEe=[0,1,4,2],zEe=function(){try{return new MouseEvent("test",{buttons:1}).buttons===1}catch{return!1}}();function JL(e){return dJ.indexOf(e)>-1}let ZL=!1;function hJ(e){if(!JL(e)&&e!=="touchend")return WL&&ZL&&ICe?{passive:!0}:void 0}(function(){try{let e=Object.defineProperty({},"passive",{get(){ZL=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}})();let pJ=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/);const gO=[],VEe={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0},UEe={button:!0,command:!0,fieldset:!0,input:!0,keygen:!0,optgroup:!0,option:!0,select:!0,textarea:!0};function BEe(e){return VEe[e.localName]||!1}function qEe(e){let t=Array.prototype.slice.call(e.labels||[]);if(!t.length){t=[];let i=e.getRootNode();if(e.id){let r=i.querySelectorAll(`label[for = ${e.id}]`);for(let s=0;s<r.length;s++)t.push(r[s])}}return t}let Tj=function(e){let t=e.sourceCapabilities;if((!t||t.firesTouchEvents)&&(e[R1]={skip:!0},e.type==="click")){let i=!1,r=JI(e);for(let s=0;s<r.length;s++){if(r[s].nodeType===Node.ELEMENT_NODE){if(r[s].localName==="label")gO.push(r[s]);else if(BEe(r[s])){let n=qEe(r[s]);for(let o=0;o<n.length;o++)i=i||gO.indexOf(n[o])>-1}}if(r[s]===is.mouse.target)return}if(i)return;e.preventDefault(),e.stopPropagation()}};function $j(e){let t=pJ?["click"]:dJ;for(let i,r=0;r<t.length;r++)i=t[r],e?(gO.length=0,document.addEventListener(i,Tj,!0)):document.removeEventListener(i,Tj,!0)}function GEe(e){is.mouse.mouseIgnoreJob||$j(!0);let t=function(){$j(),is.mouse.target=null,is.mouse.mouseIgnoreJob=null};is.mouse.target=JI(e)[0],is.mouse.mouseIgnoreJob=Di.debounce(is.mouse.mouseIgnoreJob,la.after(DEe),t)}function Ad(e){let t=e.type;if(!JL(t))return!1;if(t==="mousemove"){let i=e.buttons===void 0?1:e.buttons;return e instanceof window.MouseEvent&&!zEe&&(i=jEe[e.which]||0),Boolean(1&i)}return(e.button===void 0?0:e.button)===0}function HEe(e){if(e.type==="click"){if(e.detail===0)return!0;let t=Ou(e);if(!t.nodeType||t.nodeType!==Node.ELEMENT_NODE)return!0;let i=t.getBoundingClientRect(),r=e.pageX,s=e.pageY;return!(r>=i.left&&r<=i.right&&s>=i.top&&s<=i.bottom)}return!1}let is={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function WEe(e){let t="auto",i=JI(e);for(let r,s=0;s<i.length;s++)if(r=i[s],r[yO]){t=r[yO];break}return t}function Cj(e,t,i){e.movefn=t,e.upfn=i,document.addEventListener("mousemove",t),document.addEventListener("mouseup",i)}function Yp(e){document.removeEventListener("mousemove",e.movefn),document.removeEventListener("mouseup",e.upfn),e.movefn=null,e.upfn=null}document.addEventListener("touchend",GEe,!!ZL&&{passive:!0});const JI=window.ShadyDOM&&window.ShadyDOM.noPatch?window.ShadyDOM.composedPath:e=>e.composedPath&&e.composedPath()||[],M_={},Fh=[];function JEe(e,t){let i=document.elementFromPoint(e,t),r=i;for(;r&&r.shadowRoot&&!window.ShadyDOM;){let s=r;if(r=r.shadowRoot.elementFromPoint(e,t),s===r)break;r&&(i=r)}return i}function Ou(e){const t=JI(e);return t.length>0?t[0]:e.target}function fJ(e){let t,i=e.type,r=e.currentTarget[vx];if(!r)return;let s=r[i];if(s){if(!e[R1]&&(e[R1]={},i.slice(0,5)==="touch")){let n=(e=e).changedTouches[0];if(i==="touchstart"&&e.touches.length===1&&(is.touch.id=n.identifier),is.touch.id!==n.identifier)return;WL||i!=="touchstart"&&i!=="touchmove"||ZEe(e)}if(t=e[R1],!t.skip){for(let n,o=0;o<Fh.length;o++)n=Fh[o],s[n.name]&&!t[n.name]&&n.flow&&n.flow.start.indexOf(e.type)>-1&&n.reset&&n.reset();for(let n,o=0;o<Fh.length;o++)n=Fh[o],s[n.name]&&!t[n.name]&&(t[n.name]=!0,n[i](e))}}}function ZEe(e){let t=e.changedTouches[0],i=e.type;if(i==="touchstart")is.touch.x=t.clientX,is.touch.y=t.clientY,is.touch.scrollDecided=!1;else if(i==="touchmove"){if(is.touch.scrollDecided)return;is.touch.scrollDecided=!0;let r=WEe(e),s=!1,n=Math.abs(is.touch.x-t.clientX),o=Math.abs(is.touch.y-t.clientY);e.cancelable&&(r==="none"?s=!0:r==="pan-x"?s=o>n:r==="pan-y"&&(s=n>o)),s?e.preventDefault():_x("track")}}function YL(e,t,i){return!!M_[t]&&(KEe(e,t,i),!0)}function YEe(e,t,i){return!!M_[t]&&(QEe(e,t,i),!0)}function KEe(e,t,i){let r=M_[t],s=r.deps,n=r.name,o=e[vx];o||(e[vx]=o={});for(let a,l,u=0;u<s.length;u++)a=s[u],pJ&&JL(a)&&a!=="click"||(l=o[a],l||(o[a]=l={_count:0}),l._count===0&&e.addEventListener(a,fJ,hJ(a)),l[n]=(l[n]||0)+1,l._count=(l._count||0)+1);e.addEventListener(t,i),r.touchAction&&mJ(e,r.touchAction)}function QEe(e,t,i){let r=M_[t],s=r.deps,n=r.name,o=e[vx];if(o)for(let a,l,u=0;u<s.length;u++)a=s[u],l=o[a],l&&l[n]&&(l[n]=(l[n]||1)-1,l._count=(l._count||1)-1,l._count===0&&e.removeEventListener(a,fJ,hJ(a)));e.removeEventListener(t,i)}function _C(e){Fh.push(e);for(let t=0;t<e.emits.length;t++)M_[e.emits[t]]=e}function XEe(e){for(let t,i=0;i<Fh.length;i++){t=Fh[i];for(let r,s=0;s<t.emits.length;s++)if(r=t.emits[s],r===e)return t}return null}function mJ(e,t){WL&&e instanceof HTMLElement&&ca.run(()=>{e.style.touchAction=t}),e[yO]=t}function KL(e,t,i){let r=new Event(t,{bubbles:!0,cancelable:!0,composed:!0});if(r.detail=i,ze(e).dispatchEvent(r),r.defaultPrevented){let s=i.preventer||i.sourceEvent;s&&s.preventDefault&&s.preventDefault()}}function _x(e){let t=XEe(e);t.info&&(t.info.prevent=!0)}function hg(e,t,i,r){t&&KL(t,e,{x:i.clientX,y:i.clientY,sourceEvent:i,preventer:r,prevent:function(s){return _x(s)}})}function Ej(e,t,i){if(e.prevent)return!1;if(e.started)return!0;let r=Math.abs(e.x-t),s=Math.abs(e.y-i);return r>=Ij||s>=Ij}function bC(e,t,i){if(!t)return;let r,s=e.moves[e.moves.length-2],n=e.moves[e.moves.length-1],o=n.x-e.x,a=n.y-e.y,l=0;s&&(r=n.x-s.x,l=n.y-s.y),KL(t,"track",{state:e.state,x:i.clientX,y:i.clientY,dx:o,dy:a,ddx:r,ddy:l,sourceEvent:i,hover:function(){return JEe(i.clientX,i.clientY)}})}function Aj(e,t,i){let r=Math.abs(t.clientX-e.x),s=Math.abs(t.clientY-e.y),n=Ou(i||t);!n||UEe[n.localName]&&n.hasAttribute("disabled")||(isNaN(r)||isNaN(s)||r<=xj&&s<=xj||HEe(t))&&(e.prevent||KL(n,"tap",{x:t.clientX,y:t.clientY,sourceEvent:t,preventer:i}))}_C({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){Yp(this.info)},mousedown:function(e){if(!Ad(e))return;let t=Ou(e),i=this,r=function(n){Ad(n)||(hg("up",t,n),Yp(i.info))},s=function(n){Ad(n)&&hg("up",t,n),Yp(i.info)};Cj(this.info,r,s),hg("down",t,e)},touchstart:function(e){hg("down",Ou(e),e.changedTouches[0],e)},touchend:function(e){hg("up",Ou(e),e.changedTouches[0],e)}}),_C({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(e){this.moves.length>NEe&&this.moves.shift(),this.moves.push(e)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,Yp(this.info)},mousedown:function(e){if(!Ad(e))return;let t=Ou(e),i=this,r=function(n){let o=n.clientX,a=n.clientY;Ej(i.info,o,a)&&(i.info.state=i.info.started?n.type==="mouseup"?"end":"track":"start",i.info.state==="start"&&_x("tap"),i.info.addMove({x:o,y:a}),Ad(n)||(i.info.state="end",Yp(i.info)),t&&bC(i.info,t,n),i.info.started=!0)},s=function(n){i.info.started&&r(n),Yp(i.info)};Cj(this.info,r,s),this.info.x=e.clientX,this.info.y=e.clientY},touchstart:function(e){let t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchmove:function(e){let t=Ou(e),i=e.changedTouches[0],r=i.clientX,s=i.clientY;Ej(this.info,r,s)&&(this.info.state==="start"&&_x("tap"),this.info.addMove({x:r,y:s}),bC(this.info,t,i),this.info.state="track",this.info.started=!0)},touchend:function(e){let t=Ou(e),i=e.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:i.clientX,y:i.clientY}),bC(this.info,t,i))}}),_C({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},mousedown:function(e){Ad(e)&&(this.info.x=e.clientX,this.info.y=e.clientY)},click:function(e){Ad(e)&&Aj(this.info,e)},touchstart:function(e){const t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchend:function(e){Aj(this.info,e.changedTouches[0],e)}});const O_=Dn(e=>{class t extends e{_addEventListenerToNode(r,s,n){YL(r,s,n)||super._addEventListenerToNode(r,s,n)}_removeEventListenerFromNode(r,s,n){YEe(r,s,n)||super._removeEventListenerFromNode(r,s,n)}}return t}),e2e=e=>class extends e{static get properties(){return{theme:{type:String,readOnly:!0}}}attributeChangedCallback(t,i,r){super.attributeChangedCallback(t,i,r),t==="theme"&&this._setTheme(r)}},QL=e=>class extends e2e(e){static finalize(){super.finalize();const t=this.prototype._template,i=this.template&&this.template.parentElement&&this.template.parentElement.id===this.is,r=Object.getPrototypeOf(this.prototype)._template;r&&!i&&Array.from(r.content.querySelectorAll("style[include]")).forEach(s=>{this._includeStyle(s.getAttribute("include"),t)}),this._includeMatchingThemes(t)}static _includeMatchingThemes(t){const i=Qm.prototype.modules;let r=!1;const s=this.is+"-default-theme";Object.keys(i).sort((n,o)=>{const a=n.indexOf("vaadin-")===0,l=o.indexOf("vaadin-")===0,u=["lumo-","material-"],h=u.filter(y=>n.indexOf(y)===0).length>0,f=u.filter(y=>o.indexOf(y)===0).length>0;return a!==l?a?-1:1:h!==f?h?-1:1:0}).forEach(n=>{if(n!==s){const o=i[n].getAttribute("theme-for");o&&o.split(" ").forEach(a=>{new RegExp("^"+a.split("*").join(".*")+"$").test(this.is)&&(r=!0,this._includeStyle(n,t))})}}),!r&&i[s]&&this._includeStyle(s,t)}static _includeStyle(t,i){if(i&&!i.content.querySelector(`style[include="${t}"]`)){const r=document.createElement("style");r.setAttribute("include",t),i.content.appendChild(r)}}};let vO=!1;window.addEventListener("keydown",()=>{vO=!0},{capture:!0}),window.addEventListener("mousedown",()=>{vO=!1},{capture:!0});const t2e=e=>class extends e{static get properties(){var t={tabindex:{type:Number,value:0,reflectToAttribute:!0,observer:"_tabindexChanged"}};return window.ShadyDOM&&(t.tabIndex=t.tabindex),t}},i2e=e=>class extends t2e(e){static get properties(){return{autofocus:{type:Boolean},_previousTabIndex:{type:Number},disabled:{type:Boolean,observer:"_disabledChanged",reflectToAttribute:!0},_isShiftTabbing:{type:Boolean}}}ready(){this.addEventListener("focusin",i=>{i.composedPath()[0]===this?this.contains(i.relatedTarget)||this._focus():i.composedPath().indexOf(this.focusElement)===-1||this.disabled||this._setFocused(!0)}),this.addEventListener("focusout",i=>this._setFocused(!1)),super.ready();const t=i=>{i.composed||i.target.dispatchEvent(new CustomEvent(i.type,{bubbles:!0,composed:!0,cancelable:!1}))};this.shadowRoot.addEventListener("focusin",t),this.shadowRoot.addEventListener("focusout",t),this.addEventListener("keydown",i=>{if(!i.defaultPrevented&&i.keyCode===9)if(i.shiftKey)this._isShiftTabbing=!0,HTMLElement.prototype.focus.apply(this),this._setFocused(!1),setTimeout(()=>this._isShiftTabbing=!1,0);else{const r=window.navigator.userAgent.match(/Firefox\/(\d\d\.\d)/);if(r&&parseFloat(r[1])>=63&&parseFloat(r[1])<66&&this.parentNode&&this.nextSibling){const s=document.createElement("input");s.style.position="absolute",s.style.opacity="0",s.tabIndex=this.tabIndex,this.parentNode.insertBefore(s,this.nextSibling),s.focus(),s.addEventListener("focusout",()=>this.parentNode.removeChild(s))}}}),this.autofocus&&!this.disabled&&window.requestAnimationFrame(()=>{this._focus(),this._setFocused(!0),this.setAttribute("focus-ring","")})}disconnectedCallback(){super.disconnectedCallback(),this.hasAttribute("focused")&&this._setFocused(!1)}_setFocused(t){t?this.setAttribute("focused",""):this.removeAttribute("focused"),t&&vO?this.setAttribute("focus-ring",""):this.removeAttribute("focus-ring")}get focusElement(){return window.console.warn(`Please implement the 'focusElement' property in <${this.localName}>`),this}_focus(){this.focusElement&&!this._isShiftTabbing&&(this.focusElement.focus(),this._setFocused(!0))}focus(){this.focusElement&&!this.disabled&&(this.focusElement.focus(),this._setFocused(!0))}blur(){this.focusElement&&(this.focusElement.blur(),this._setFocused(!1))}_disabledChanged(t){this.focusElement.disabled=t,t?(this.blur(),this._previousTabIndex=this.tabindex,this.tabindex=-1,this.setAttribute("aria-disabled","true")):(this._previousTabIndex!==void 0&&(this.tabindex=this._previousTabIndex),this.removeAttribute("aria-disabled"))}_tabindexChanged(t){t!==void 0&&(this.focusElement.tabIndex=t),this.disabled&&this.tabindex&&(this.tabindex!==-1&&(this._previousTabIndex=this.tabindex),this.tabindex=t=void 0),window.ShadyDOM&&this.setProperties({tabIndex:t,tabindex:t})}click(){this.disabled||super.click()}},Xm=function(){let e,t;do e=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),t=FEe();while(e||t)};class wC{static detectScrollType(){const t=document.createElement("div");t.textContent="ABCD",t.dir="rtl",t.style.fontSize="14px",t.style.width="4px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.overflow="scroll",document.body.appendChild(t);let i="reverse";return t.scrollLeft>0?i="default":(t.scrollLeft=2,t.scrollLeft<2&&(i="negative")),document.body.removeChild(t),i}static getNormalizedScrollLeft(t,i,r){const{scrollLeft:s}=r;if(i!=="rtl"||!t)return s;switch(t){case"negative":return r.scrollWidth-r.clientWidth+s;case"reverse":return r.scrollWidth-r.clientWidth-s}return s}static setNormalizedScrollLeft(t,i,r,s){if(i==="rtl"&&t)switch(t){case"negative":r.scrollLeft=r.clientWidth-r.scrollWidth+s;break;case"reverse":r.scrollLeft=r.scrollWidth-r.clientWidth-s;break;default:r.scrollLeft=s}else r.scrollLeft=s}}const xu=[],r2e=function(){const e=Bf();xu.forEach(t=>{_O(t,e)})};let uw;new MutationObserver(r2e).observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]});const _O=function(e,t){t?e.setAttribute("dir",t):e.removeAttribute("dir")},Bf=function(){return document.documentElement.getAttribute("dir")},XL=e=>class extends e{static get properties(){return{dir:{type:String,readOnly:!0}}}static finalize(){super.finalize(),uw||(uw=wC.detectScrollType())}connectedCallback(){super.connectedCallback(),this.hasAttribute("dir")||(this.__subscribe(),_O(this,Bf()))}attributeChangedCallback(t,i,r){if(super.attributeChangedCallback(t,i,r),t!=="dir")return;const s=r===Bf()&&xu.indexOf(this)===-1,n=!r&&i&&xu.indexOf(this)===-1,o=r!==Bf()&&i===Bf();s||n?(this.__subscribe(),_O(this,Bf())):o&&this.__subscribe(!1)}disconnectedCallback(){super.disconnectedCallback(),this.__subscribe(!1),this.removeAttribute("dir")}__subscribe(t=!0){t?xu.indexOf(this)===-1&&xu.push(this):xu.indexOf(this)>-1&&xu.splice(xu.indexOf(this),1)}__getNormalizedScrollLeft(t){return wC.getNormalizedScrollLeft(uw,this.getAttribute("dir")||"ltr",t)}__setNormalizedScrollLeft(t,i){return wC.setNormalizedScrollLeft(uw,this.getAttribute("dir")||"ltr",t,i)}},s2e=/\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,F1=window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients;function n2e(){function e(){return!0}return yJ(e)}function o2e(){try{return!!a2e()||!!l2e()&&(F1?!c2e():!n2e())}catch{return!1}}function a2e(){return localStorage.getItem("vaadin.developmentmode.force")}function l2e(){return["localhost","127.0.0.1"].indexOf(window.location.hostname)>=0}function c2e(){return!!(F1&&Object.keys(F1).map(e=>F1[e]).filter(e=>e.productionMode).length>0)}function yJ(e,t){if(typeof e!="function")return;const i=s2e.exec(e.toString());if(i)try{e=new Function(i[1])}catch(r){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",r)}return e(t)}window.Vaadin=window.Vaadin||{};const Mj=function(e,t){if(window.Vaadin.developmentMode)return yJ(e,t)};function u2e(){}window.Vaadin.developmentMode===void 0&&(window.Vaadin.developmentMode=o2e());const Oj=function(){if(typeof Mj=="function")return Mj(u2e)};let SC;window.Vaadin||(window.Vaadin={}),window.Vaadin.registrations=window.Vaadin.registrations||[],window.Vaadin.developmentModeCallback=window.Vaadin.developmentModeCallback||{},window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]=function(){Oj&&Oj()};const kj=new Set,gJ=e=>class extends XL(e){static finalize(){super.finalize();const{is:t}=this;t&&!kj.has(t)&&(window.Vaadin.registrations.push(this),kj.add(t),window.Vaadin.developmentModeCallback&&(SC=Di.debounce(SC,XW,()=>{window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]()}),WI(SC)))}constructor(){super(),document.doctype===null&&console.warn('Vaadin components require the "standards mode" declaration. Please add <!DOCTYPE html> to the HTML document.')}};class Pj extends gJ(i2e(QL(O_(cd)))){static get template(){return A_`
      <style>
        :host {
          display: inline-block;
        }

        :host([hidden]) {
          display: none !important;
        }

        label {
          display: inline-flex;
          align-items: baseline;
          outline: none;
        }

        [part='checkbox'] {
          position: relative;
          display: inline-block;
          flex: none;
        }

        input[type='checkbox'] {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          width: 100%;
          height: 100%;
          opacity: 0;
          cursor: inherit;
          margin: 0;
        }

        :host([disabled]) {
          -webkit-tap-highlight-color: transparent;
        }
      </style>

      <label>
        <span part="checkbox">
          <input
            type="checkbox"
            checked="{{checked::change}}"
            disabled$="[[disabled]]"
            indeterminate="{{indeterminate::change}}"
            role="presentation"
            tabindex="-1"
          />
        </span>

        <span part="label">
          <slot></slot>
        </span>
      </label>
    `}static get is(){return"vaadin-checkbox"}static get version(){return"3.0.0"}static get properties(){return{checked:{type:Boolean,value:!1,notify:!0,observer:"_checkedChanged",reflectToAttribute:!0},indeterminate:{type:Boolean,notify:!0,observer:"_indeterminateChanged",reflectToAttribute:!0,value:!1},value:{type:String,value:"on"},_nativeCheckbox:{type:Object}}}constructor(){super(),this.name}get name(){return this.checked?this._storedName:""}set name(t){this._storedName=t}ready(){super.ready(),this.setAttribute("role","checkbox"),this._nativeCheckbox=this.shadowRoot.querySelector('input[type="checkbox"]'),this.addEventListener("click",this._handleClick.bind(this)),this._addActiveListeners();const t=this.getAttribute("name");t&&(this.name=t),this.shadowRoot.querySelector('[part~="label"]').querySelector("slot").addEventListener("slotchange",this._updateLabelAttribute.bind(this)),this._updateLabelAttribute()}_updateLabelAttribute(){const t=this.shadowRoot.querySelector('[part~="label"]'),i=t.firstElementChild.assignedNodes();this._isAssignedNodesEmpty(i)?t.setAttribute("empty",""):t.removeAttribute("empty")}_isAssignedNodesEmpty(t){return t.length===0||t.length==1&&t[0].nodeType==Node.TEXT_NODE&&t[0].textContent.trim()===""}_checkedChanged(t){this.indeterminate?this.setAttribute("aria-checked","mixed"):this.setAttribute("aria-checked",Boolean(t))}_indeterminateChanged(t){t?this.setAttribute("aria-checked","mixed"):this.setAttribute("aria-checked",this.checked)}_addActiveListeners(){this._addEventListenerToNode(this,"down",t=>{this.__interactionsAllowed(t)&&this.setAttribute("active","")}),this._addEventListenerToNode(this,"up",()=>this.removeAttribute("active")),this.addEventListener("keydown",t=>{this.__interactionsAllowed(t)&&t.keyCode===32&&(t.preventDefault(),this.setAttribute("active",""))}),this.addEventListener("keyup",t=>{this.__interactionsAllowed(t)&&t.keyCode===32&&(t.preventDefault(),this._toggleChecked(),this.removeAttribute("active"),this.indeterminate&&(this.indeterminate=!1))})}get focusElement(){return this.shadowRoot.querySelector("input")}__interactionsAllowed(t){return!this.disabled&&t.target.localName!=="a"}_handleClick(t){this.__interactionsAllowed(t)&&(this.indeterminate?(this.indeterminate=!1,t.preventDefault(),this._toggleChecked()):t.composedPath()[0]!==this._nativeCheckbox&&(t.preventDefault(),this._toggleChecked()))}_toggleChecked(){this.checked=!this.checked,this.dispatchEvent(new CustomEvent("change",{composed:!1,bubbles:!0}))}}customElements.define(Pj.is,Pj),Dv("vaadin-grid",Nv`
    :host {
      font-family: var(--lumo-font-family);
      font-size: var(--lumo-font-size-m);
      line-height: var(--lumo-line-height-s);
      color: var(--lumo-body-text-color);
      background-color: var(--lumo-base-color);
      box-sizing: border-box;
      -webkit-text-size-adjust: 100%;
      -webkit-tap-highlight-color: transparent;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;

      /* For internal use only */
      --_lumo-grid-border-color: var(--lumo-contrast-20pct);
      --_lumo-grid-secondary-border-color: var(--lumo-contrast-10pct);
      --_lumo-grid-border-width: 1px;
      --_lumo-grid-selected-row-color: var(--lumo-primary-color-10pct);
    }

    /* No (outer) border */

    :host(:not([theme~='no-border'])) {
      border: var(--_lumo-grid-border-width) solid var(--_lumo-grid-border-color);
    }

    /* Cell styles */

    [part~='cell'] {
      min-height: var(--lumo-size-m);
      background-color: var(--lumo-base-color);
    }

    [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      cursor: default;
      padding: var(--lumo-space-xs) var(--lumo-space-m);
    }

    /* Apply row borders by default and introduce the "no-row-borders" variant */
    :host(:not([theme~='no-row-borders'])) [part~='cell']:not([part~='details-cell']) {
      border-top: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);
    }

    /* Hide first body row top border */
    :host(:not([theme~='no-row-borders'])) [part='row'][first] [part~='cell']:not([part~='details-cell']) {
      border-top: 0;
      min-height: calc(var(--lumo-size-m) - var(--_lumo-grid-border-width));
    }

    /* Focus-ring */

    [part~='cell']:focus {
      outline: none;
    }

    :host([navigating]) [part~='cell']:focus::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);
    }

    /* Drag and Drop styles */
    :host([dragover])::after {
      content: '';
      position: absolute;
      z-index: 100;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);
    }

    [part~='row'][dragover] {
      z-index: 100 !important;
    }

    [part~='row'][dragover] [part~='cell'] {
      overflow: visible;
    }

    [part~='row'][dragover] [part~='cell']::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      height: calc(var(--_lumo-grid-border-width) + 2px);
      pointer-events: none;
      background: var(--lumo-primary-color-50pct);
    }

    :host([theme~='no-row-borders']) [dragover] [part~='cell']::after {
      height: 2px;
    }

    [part~='row'][dragover='below'] [part~='cell']::after {
      top: 100%;
      bottom: auto;
      margin-top: -1px;
    }

    [part~='row'][dragover='above'] [part~='cell']::after {
      top: auto;
      bottom: 100%;
      margin-bottom: -1px;
    }

    [part~='row'][details-opened][dragover='below'] [part~='cell']:not([part~='details-cell'])::after,
    [part~='row'][details-opened][dragover='above'] [part~='details-cell']::after {
      display: none;
    }

    [part~='row'][dragover][dragover='on-top'] [part~='cell']::after {
      height: 100%;
    }

    [part~='row'][dragstart] {
      /* Add bottom-space to the row so the drag number doesn't get clipped. Needed for IE/Edge */
      border-bottom: 100px solid transparent;
      z-index: 100 !important;
      opacity: 0.9;
    }

    [part~='row'][dragstart] [part~='cell'] {
      border: none !important;
      box-shadow: none !important;
    }

    [part~='row'][dragstart] [part~='cell'][last-column] {
      border-radius: 0 var(--lumo-border-radius-s) var(--lumo-border-radius-s) 0;
    }

    [part~='row'][dragstart] [part~='cell'][first-column] {
      border-radius: var(--lumo-border-radius-s) 0 0 var(--lumo-border-radius-s);
    }

    [ios] [part~='row'][dragstart] [part~='cell'] {
      background: var(--lumo-primary-color-50pct);
    }

    #scroller:not([ios]) [part~='row'][dragstart]:not([dragstart=''])::after {
      display: block;
      position: absolute;
      left: var(--_grid-drag-start-x);
      top: var(--_grid-drag-start-y);
      z-index: 100;
      content: attr(dragstart);
      align-items: center;
      justify-content: center;
      box-sizing: border-box;
      padding: calc(var(--lumo-space-xs) * 0.8);
      color: var(--lumo-error-contrast-color);
      background-color: var(--lumo-error-color);
      border-radius: var(--lumo-border-radius-m);
      font-family: var(--lumo-font-family);
      font-size: var(--lumo-font-size-xxs);
      line-height: 1;
      font-weight: 500;
      text-transform: initial;
      letter-spacing: initial;
      min-width: calc(var(--lumo-size-s) * 0.7);
      text-align: center;
    }

    /* Headers and footers */

    [part~='header-cell'] ::slotted(vaadin-grid-cell-content),
    [part~='footer-cell'] ::slotted(vaadin-grid-cell-content),
    [part~='reorder-ghost'] {
      font-size: var(--lumo-font-size-s);
      font-weight: 500;
    }

    [part~='footer-cell'] ::slotted(vaadin-grid-cell-content) {
      font-weight: 400;
    }

    [part='row']:only-child [part~='header-cell'] {
      min-height: var(--lumo-size-xl);
    }

    /* Header borders */

    /* Hide first header row top border */
    :host(:not([theme~='no-row-borders'])) [part='row']:first-child [part~='header-cell'] {
      border-top: 0;
    }

    [part='row']:last-child [part~='header-cell'] {
      border-bottom: var(--_lumo-grid-border-width) solid transparent;
    }

    :host(:not([theme~='no-row-borders'])) [part='row']:last-child [part~='header-cell'] {
      border-bottom-color: var(--_lumo-grid-secondary-border-color);
    }

    /* Overflow uses a stronger border color */
    :host([overflow~='top']) [part='row']:last-child [part~='header-cell'] {
      border-bottom-color: var(--_lumo-grid-border-color);
    }

    /* Footer borders */

    [part='row']:first-child [part~='footer-cell'] {
      border-top: var(--_lumo-grid-border-width) solid transparent;
    }

    :host(:not([theme~='no-row-borders'])) [part='row']:first-child [part~='footer-cell'] {
      border-top-color: var(--_lumo-grid-secondary-border-color);
    }

    /* Overflow uses a stronger border color */
    :host([overflow~='bottom']) [part='row']:first-child [part~='footer-cell'] {
      border-top-color: var(--_lumo-grid-border-color);
    }

    /* Column reordering */

    :host([reordering]) [part~='cell'] {
      background: linear-gradient(var(--lumo-shade-20pct), var(--lumo-shade-20pct)) var(--lumo-base-color);
    }

    :host([reordering]) [part~='cell'][reorder-status='allowed'] {
      background: var(--lumo-base-color);
    }

    :host([reordering]) [part~='cell'][reorder-status='dragging'] {
      background: linear-gradient(var(--lumo-contrast-5pct), var(--lumo-contrast-5pct)) var(--lumo-base-color);
    }

    [part~='reorder-ghost'] {
      opacity: 0.85;
      box-shadow: var(--lumo-box-shadow-s);
      /* TODO Use the same styles as for the cell element (reorder-ghost copies styles from the cell element) */
      padding: var(--lumo-space-s) var(--lumo-space-m) !important;
    }

    /* Column resizing */

    [part='resize-handle'] {
      width: 3px;
      background-color: var(--lumo-primary-color-50pct);
      opacity: 0;
      transition: opacity 0.2s;
    }

    :host(:not([reordering])) *:not([column-resizing]) [part~='cell']:hover [part='resize-handle'],
    [part='resize-handle']:active {
      opacity: 1;
      transition-delay: 0.15s;
    }

    /* Column borders */

    :host([theme~='column-borders']) [part~='cell']:not([last-column]):not([part~='details-cell']) {
      border-right: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);
    }

    /* Frozen columns */

    [last-frozen] {
      border-right: var(--_lumo-grid-border-width) solid transparent;
      overflow: hidden;
    }

    :host([overflow~='left']) [part~='cell'][last-frozen]:not([part~='details-cell']) {
      border-right-color: var(--_lumo-grid-border-color);
    }

    /* Row stripes */

    :host([theme~='row-stripes']) [part~='row']:not([odd]) [part~='body-cell'],
    :host([theme~='row-stripes']) [part~='row']:not([odd]) [part~='details-cell'] {
      background-image: linear-gradient(var(--lumo-contrast-5pct), var(--lumo-contrast-5pct));
      background-repeat: repeat-x;
    }

    /* Selected row */

    /* Raise the selected rows above unselected rows (so that box-shadow can cover unselected rows) */
    :host(:not([reordering])) [part~='row'][selected] {
      z-index: 1;
    }

    :host(:not([reordering])) [part~='row'][selected] [part~='body-cell']:not([part~='details-cell']) {
      background-image: linear-gradient(var(--_lumo-grid-selected-row-color), var(--_lumo-grid-selected-row-color));
      background-repeat: repeat;
    }

    /* Cover the border of an unselected row */
    :host(:not([theme~='no-row-borders'])) [part~='row'][selected] [part~='cell']:not([part~='details-cell']) {
      box-shadow: 0 var(--_lumo-grid-border-width) 0 0 var(--_lumo-grid-selected-row-color);
    }

    /* Compact */

    :host([theme~='compact']) [part='row']:only-child [part~='header-cell'] {
      min-height: var(--lumo-size-m);
    }

    :host([theme~='compact']) [part~='cell'] {
      min-height: var(--lumo-size-s);
    }

    :host([theme~='compact']) [part='row'][first] [part~='cell']:not([part~='details-cell']) {
      min-height: calc(var(--lumo-size-s) - var(--_lumo-grid-border-width));
    }

    :host([theme~='compact']) [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      padding: var(--lumo-space-xs) var(--lumo-space-s);
    }

    /* Wrap cell contents */

    :host([theme~='wrap-cell-content']) [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      white-space: normal;
    }

    /* RTL specific styles */

    :host([dir='rtl']) [part~='row'][dragstart] [part~='cell'][last-column] {
      border-radius: var(--lumo-border-radius-s) 0 0 var(--lumo-border-radius-s);
    }

    :host([dir='rtl']) [part~='row'][dragstart] [part~='cell'][first-column] {
      border-radius: 0 var(--lumo-border-radius-s) var(--lumo-border-radius-s) 0;
    }

    :host([dir='rtl'][theme~='column-borders']) [part~='cell']:not([last-column]):not([part~='details-cell']) {
      border-right: none;
      border-left: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);
    }

    :host([dir='rtl']) [last-frozen] {
      border-right: none;
      border-left: var(--_lumo-grid-border-width) solid transparent;
    }

    :host([dir='rtl'][overflow~='right']) [part~='cell'][last-frozen]:not([part~='details-cell']) {
      border-left-color: var(--_lumo-grid-border-color);
    }
  `,{moduleId:"lumo-grid"}),Dv("vaadin-checkbox",Nv`
    :host(.vaadin-grid-select-all-checkbox) {
      font-size: var(--lumo-font-size-m);
    }
  `,{moduleId:"vaadin-grid-select-all-checkbox-lumo"});let bx=!1,vJ=[],_J=[];function bJ(){bx=!0,requestAnimationFrame(function(){bx=!1,d2e(vJ),setTimeout(function(){h2e(_J)})})}function d2e(e){for(;e.length;)wJ(e.shift())}function h2e(e){for(let t=0,i=e.length;t<i;t++)wJ(e.shift())}function wJ(e){const t=e[0],i=e[1],r=e[2];try{i.apply(t,r)}catch(s){setTimeout(()=>{throw s})}}function p2e(e,t,i){bx||bJ(),vJ.push([e,t,i])}function f2e(e,t,i){bx||bJ(),_J.push([e,t,i])}class Lj{constructor(){this.start=0,this.end=0,this.previous=null,this.parent=null,this.rules=null,this.parsedCssText="",this.cssText="",this.atRule=!1,this.type=0,this.keyframesName="",this.selector="",this.parsedSelector=""}}function SJ(e){return xJ(y2e(e=m2e(e)),e)}function m2e(e){return e.replace(lc.comments,"").replace(lc.port,"")}function y2e(e){let t=new Lj;t.start=0,t.end=e.length;let i=t;for(let r=0,s=e.length;r<s;r++)if(e[r]===TJ){i.rules||(i.rules=[]);let n=i,o=n.rules[n.rules.length-1]||null;i=new Lj,i.start=r+1,i.parent=n,i.previous=o,n.rules.push(i)}else e[r]===$J&&(i.end=r+1,i=i.parent||t);return t}function xJ(e,t){let i=t.substring(e.start,e.end-1);if(e.parsedCssText=e.cssText=i.trim(),e.parent){let s=e.previous?e.previous.end:e.parent.start;i=t.substring(s,e.start-1),i=g2e(i),i=i.replace(lc.multipleSpaces," "),i=i.substring(i.lastIndexOf(";")+1);let n=e.parsedSelector=e.selector=i.trim();e.atRule=n.indexOf(x2e)===0,e.atRule?n.indexOf(S2e)===0?e.type=Bu.MEDIA_RULE:n.match(lc.keyframesRule)&&(e.type=Bu.KEYFRAMES_RULE,e.keyframesName=e.selector.split(lc.multipleSpaces).pop()):n.indexOf(CJ)===0?e.type=Bu.MIXIN_RULE:e.type=Bu.STYLE_RULE}let r=e.rules;if(r)for(let s,n=0,o=r.length;n<o&&(s=r[n]);n++)xJ(s,t);return e}function g2e(e){return e.replace(/\\([0-9a-f]{1,6})\s/gi,function(){let t=arguments[1],i=6-t.length;for(;i--;)t="0"+t;return"\\"+t})}function IJ(e,t,i=""){let r="";if(e.cssText||e.rules){let s=e.rules;if(s&&!v2e(s))for(let n,o=0,a=s.length;o<a&&(n=s[o]);o++)r=IJ(n,t,r);else r=t?e.cssText:_2e(e.cssText),r=r.trim(),r&&(r="  "+r+`
`)}return r&&(e.selector&&(i+=e.selector+" "+TJ+`
`),i+=r,e.selector&&(i+=$J+`

`)),i}function v2e(e){let t=e[0];return Boolean(t)&&Boolean(t.selector)&&t.selector.indexOf(CJ)===0}function _2e(e){return w2e(e=b2e(e))}function b2e(e){return e.replace(lc.customProp,"").replace(lc.mixinProp,"")}function w2e(e){return e.replace(lc.mixinApply,"").replace(lc.varApply,"")}const Bu={STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1e3},TJ="{",$J="}",lc={comments:/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},CJ="--",S2e="@media",x2e="@",Rj=new Set,I2e="shady-unscoped";function T2e(e){const t=e.textContent;if(!Rj.has(t)){Rj.add(t);const i=document.createElement("style");i.setAttribute("shady-unscoped",""),i.textContent=t,document.head.appendChild(i)}}function $2e(e){return e.hasAttribute(I2e)}function bO(e,t){return e?(typeof e=="string"&&(e=SJ(e)),t&&W0(e,t),IJ(e,NL)):""}function Fj(e){return!e.__cssRules&&e.textContent&&(e.__cssRules=SJ(e.textContent)),e.__cssRules||null}function W0(e,t,i,r){if(!e)return;let s=!1,n=e.type;if(r&&n===Bu.MEDIA_RULE){let a=e.selector.match(vCe);a&&(window.matchMedia(a[1]).matches||(s=!0))}n===Bu.STYLE_RULE?t(e):i&&n===Bu.KEYFRAMES_RULE?i(e):n===Bu.MIXIN_RULE&&(s=!0);let o=e.rules;if(o&&!s)for(let a,l=0,u=o.length;l<u&&(a=o[l]);l++)W0(a,t,i,r)}function C2e(e,t){let i=0;for(let r=t,s=e.length;r<s;r++)if(e[r]==="(")i++;else if(e[r]===")"&&--i==0)return r;return-1}function EJ(e,t){let i=e.indexOf("var(");if(i===-1)return t(e,"","","");let r=C2e(e,i+3),s=e.substring(i+4,r),n=e.substring(0,i),o=EJ(e.substring(r+1),t),a=s.indexOf(",");return a===-1?t(n,s.trim(),"",o):t(n,s.substring(0,a).trim(),s.substring(a+1).trim(),o)}function E2e(e){let t=e.localName,i="",r="";return t?t.indexOf("-")>-1?i=t:(r=t,i=e.getAttribute&&e.getAttribute("is")||""):(i=e.is,r=e.extends),{is:i,typeExtension:r}}function A2e(e){const t=[],i=e.querySelectorAll("style");for(let r=0;r<i.length;r++){const s=i[r];$2e(s)?BI||(T2e(s),s.parentNode.removeChild(s)):(t.push(s.textContent),s.parentNode.removeChild(s))}return t.join("").trim()}window.ShadyDOM&&window.ShadyDOM.wrap;const AJ="css-build";function M2e(e){if(Rv!==void 0)return Rv;if(e.__cssBuild===void 0){const t=e.getAttribute(AJ);if(t)e.__cssBuild=t;else{const i=O2e(e);i!==""&&k2e(e),e.__cssBuild=i}}return e.__cssBuild||""}function Nj(e){return M2e(e)!==""}function O2e(e){const t=e.localName==="template"?e.content.firstChild:e.firstChild;if(t instanceof Comment){const i=t.textContent.trim().split(":");if(i[0]===AJ)return i[1]}return""}function k2e(e){const t=e.localName==="template"?e.content.firstChild:e.firstChild;t.parentNode.removeChild(t)}const P2e=/;\s*/m,L2e=/^\s*(initial)|(inherit)\s*$/,Dj=/\s*!important/,wO="_-_";class R2e{constructor(){this._map={}}set(t,i){t=t.trim(),this._map[t]={properties:i,dependants:{}}}get(t){return t=t.trim(),this._map[t]||null}}let wx=null;class ys{constructor(){this._currentElement=null,this._measureElement=null,this._map=new R2e}detectMixin(t){return _Ce(t)}gatherStyles(t){const i=A2e(t.content);if(i){const r=document.createElement("style");return r.textContent=i,t.content.insertBefore(r,t.content.firstChild),r}return null}transformTemplate(t,i){t._gatheredStyle===void 0&&(t._gatheredStyle=this.gatherStyles(t));const r=t._gatheredStyle;return r?this.transformStyle(r,i):null}transformStyle(t,i=""){let r=Fj(t);return this.transformRules(r,i),t.textContent=bO(r),r}transformCustomStyle(t){let i=Fj(t);return W0(i,r=>{r.selector===":root"&&(r.selector="html"),this.transformRule(r)}),t.textContent=bO(i),i}transformRules(t,i){this._currentElement=i,W0(t,r=>{this.transformRule(r)}),this._currentElement=null}transformRule(t){t.cssText=this.transformCssText(t.parsedCssText,t),t.selector===":root"&&(t.selector=":host > *")}transformCssText(t,i){return t=t.replace(lO,(r,s,n,o)=>this._produceCssProperties(r,s,n,o,i)),this._consumeCssProperties(t,i)}_getInitialValueForProperty(t){return this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.setAttribute("apply-shim-measure",""),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement)),window.getComputedStyle(this._measureElement).getPropertyValue(t)}_fallbacksFromPreviousRules(t){let i=t;for(;i.parent;)i=i.parent;const r={};let s=!1;return W0(i,n=>{s=s||n===t,s||n.selector===t.selector&&Object.assign(r,this._cssTextToMap(n.parsedCssText))}),r}_consumeCssProperties(t,i){let r=null;for(;r=mx.exec(t);){let s=r[0],n=r[1],o=r.index,a=o+s.indexOf("@apply"),l=o+s.length,u=t.slice(0,a),h=t.slice(l),f=i?this._fallbacksFromPreviousRules(i):{};Object.assign(f,this._cssTextToMap(u));let y=this._atApplyToCssProperties(n,f);t=`${u}${y}${h}`,mx.lastIndex=o+y.length}return t}_atApplyToCssProperties(t,i){t=t.replace(P2e,"");let r=[],s=this._map.get(t);if(s||(this._map.set(t,{}),s=this._map.get(t)),s){let n,o,a;this._currentElement&&(s.dependants[this._currentElement]=!0);const l=s.properties;for(n in l)a=i&&i[n],o=[n,": var(",t,wO,n],a&&o.push(",",a.replace(Dj,"")),o.push(")"),Dj.test(l[n])&&o.push(" !important"),r.push(o.join(""))}return r.join("; ")}_replaceInitialOrInherit(t,i){let r=L2e.exec(i);return r&&(i=r[1]?this._getInitialValueForProperty(t):"apply-shim-inherit"),i}_cssTextToMap(t,i=!1){let r,s,n=t.split(";"),o={};for(let a,l,u=0;u<n.length;u++)a=n[u],a&&(l=a.split(":"),l.length>1&&(r=l[0].trim(),s=l.slice(1).join(":"),i&&(s=this._replaceInitialOrInherit(r,s)),o[r]=s));return o}_invalidateMixinEntry(t){if(wx)for(let i in t.dependants)i!==this._currentElement&&wx(i)}_produceCssProperties(t,i,r,s,n){if(r&&EJ(r,(x,T)=>{T&&this._map.get(T)&&(s=`@apply ${T};`)}),!s)return t;let o=this._consumeCssProperties(""+s,n),a=t.slice(0,t.indexOf("--")),l=this._cssTextToMap(o,!0),u=l,h=this._map.get(i),f=h&&h.properties;f?u=Object.assign(Object.create(f),l):this._map.set(i,u);let y,g,b=[],w=!1;for(y in u)g=l[y],g===void 0&&(g="initial"),f&&!(y in f)&&(w=!0),b.push(`${i}${wO}${y}: ${g}`);return w&&this._invalidateMixinEntry(h),h&&(h.properties=u),r&&(a=`${t};${a}`),`${a}${b.join("; ")};`}}ys.prototype.detectMixin=ys.prototype.detectMixin,ys.prototype.transformStyle=ys.prototype.transformStyle,ys.prototype.transformCustomStyle=ys.prototype.transformCustomStyle,ys.prototype.transformRules=ys.prototype.transformRules,ys.prototype.transformRule=ys.prototype.transformRule,ys.prototype.transformTemplate=ys.prototype.transformTemplate,ys.prototype._separator=wO,Object.defineProperty(ys.prototype,"invalidCallback",{get:()=>wx,set(e){wx=e}});const SO={},Sx="_applyShimCurrentVersion",ey="_applyShimNextVersion",xx="_applyShimValidatingVersion",F2e=Promise.resolve();function N2e(e){let t=SO[e];t&&D2e(t)}function D2e(e){e[Sx]=e[Sx]||0,e[xx]=e[xx]||0,e[ey]=(e[ey]||0)+1}function MJ(e){return e[Sx]===e[ey]}function j2e(e){return!MJ(e)&&e[xx]===e[ey]}function z2e(e){e[xx]=e[ey],e._validating||(e._validating=!0,F2e.then(function(){e[Sx]=e[ey],e._validating=!1}))}const v0=new ys;class V2e{constructor(){this.customStyleInterface=null,v0.invalidCallback=N2e}ensure(){this.customStyleInterface||window.ShadyCSS.CustomStyleInterface&&(this.customStyleInterface=window.ShadyCSS.CustomStyleInterface,this.customStyleInterface.transformCallback=t=>{v0.transformCustomStyle(t)},this.customStyleInterface.validateCallback=()=>{requestAnimationFrame(()=>{this.customStyleInterface.enqueued&&this.flushCustomStyles()})})}prepareTemplate(t,i){if(this.ensure(),Nj(t))return;SO[i]=t;let r=v0.transformTemplate(t,i);t._styleAst=r}flushCustomStyles(){if(this.ensure(),!this.customStyleInterface)return;let t=this.customStyleInterface.processStyles();if(this.customStyleInterface.enqueued){for(let i=0;i<t.length;i++){let r=t[i],s=this.customStyleInterface.getStyleForCustomStyle(r);s&&v0.transformCustomStyle(s)}this.customStyleInterface.enqueued=!1}}styleSubtree(t,i){if(this.ensure(),i&&cO(t,i),t.shadowRoot){this.styleElement(t);let r=t.shadowRoot.children||t.shadowRoot.childNodes;for(let s=0;s<r.length;s++)this.styleSubtree(r[s])}else{let r=t.children||t.childNodes;for(let s=0;s<r.length;s++)this.styleSubtree(r[s])}}styleElement(t){this.ensure();let{is:i}=E2e(t),r=SO[i];if((!r||!Nj(r))&&r&&!MJ(r)){j2e(r)||(this.prepareTemplate(r,i),z2e(r));let s=t.shadowRoot;if(s){let n=s.querySelector("style");n&&(n.__cssRules=r._styleAst,n.textContent=bO(r._styleAst))}}}styleDocument(t){this.ensure(),this.styleSubtree(document.body,t)}}if(!window.ShadyCSS||!window.ShadyCSS.ScopingShim){const e=new V2e;let t=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate(i,r,s){e.flushCustomStyles(),e.prepareTemplate(i,r)},prepareTemplateStyles(i,r,s){window.ShadyCSS.prepareTemplate(i,r,s)},prepareTemplateDom(i,r){},styleSubtree(i,r){e.flushCustomStyles(),e.styleSubtree(i,r)},styleElement(i){e.flushCustomStyles(),e.styleElement(i)},styleDocument(i){e.flushCustomStyles(),e.styleDocument(i)},getComputedStyleValue:(i,r)=>UW(i,r),flushCustomStyles(){e.flushCustomStyles()},nativeCss:NL,nativeShadow:BI,cssBuild:Rv,disableRuntime:BW},t&&(window.ShadyCSS.CustomStyleInterface=t)}window.ShadyCSS.ApplyShim=v0;const U2e=/:host\(:dir\((ltr|rtl)\)\)/g,B2e=':host([dir="$1"])',q2e=/([\s\w-#\.\[\]\*]*):dir\((ltr|rtl)\)/g,G2e=':host([dir="$2"]) $1',H2e=/:dir\((?:ltr|rtl)\)/,jj=Boolean(window.ShadyDOM&&window.ShadyDOM.inUse),J0=[];let Z0=null,eR="";function OJ(){eR=document.documentElement.getAttribute("dir")}function kJ(e){e.__autoDirOptOut||e.setAttribute("dir",eR)}function PJ(){OJ(),eR=document.documentElement.getAttribute("dir");for(let e=0;e<J0.length;e++)kJ(J0[e])}function W2e(){Z0&&Z0.takeRecords().length&&PJ()}const J2e=Dn(e=>{jj||Z0||(OJ(),Z0=new MutationObserver(PJ),Z0.observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]}));const t=iJ(e);class i extends t{static _processStyleText(s,n){return s=t._processStyleText.call(this,s,n),!jj&&H2e.test(s)&&(s=this._replaceDirInCssText(s),this.__activateDir=!0),s}static _replaceDirInCssText(s){let n=s;return n=n.replace(U2e,B2e),n=n.replace(q2e,G2e),n}constructor(){super(),this.__autoDirOptOut=!1}ready(){super.ready(),this.__autoDirOptOut=this.hasAttribute("dir")}connectedCallback(){t.prototype.connectedCallback&&super.connectedCallback(),this.constructor.__activateDir&&(W2e(),J0.push(this),kJ(this))}disconnectedCallback(){if(t.prototype.disconnectedCallback&&super.disconnectedCallback(),this.constructor.__activateDir){const s=J0.indexOf(this);s>-1&&J0.splice(s,1)}}}return i.__activateDir=!1,i});function zj(){document.body.removeAttribute("unresolved")}function pg(e,t,i){return{index:e,removed:t,addedCount:i}}document.readyState==="interactive"||document.readyState==="complete"?zj():window.addEventListener("DOMContentLoaded",zj);const LJ=0,RJ=1,xO=2,IO=3;function Z2e(e,t,i,r,s,n){let o=n-s+1,a=i-t+1,l=new Array(o);for(let u=0;u<o;u++)l[u]=new Array(a),l[u][0]=u;for(let u=0;u<a;u++)l[0][u]=u;for(let u=1;u<o;u++)for(let h=1;h<a;h++)if(tR(e[t+h-1],r[s+u-1]))l[u][h]=l[u-1][h-1];else{let f=l[u-1][h]+1,y=l[u][h-1]+1;l[u][h]=f<y?f:y}return l}function Y2e(e){let t=e.length-1,i=e[0].length-1,r=e[t][i],s=[];for(;t>0||i>0;){if(t==0){s.push(xO),i--;continue}if(i==0){s.push(IO),t--;continue}let n,o=e[t-1][i-1],a=e[t-1][i],l=e[t][i-1];n=a<l?a<o?a:o:l<o?l:o,n==o?(o==r?s.push(LJ):(s.push(RJ),r=o),t--,i--):n==a?(s.push(IO),t--,r=a):(s.push(xO),i--,r=l)}return s.reverse(),s}function K2e(e,t,i,r,s,n){let o,a=0,l=0,u=Math.min(i-t,n-s);if(t==0&&s==0&&(a=Q2e(e,r,u)),i==e.length&&n==r.length&&(l=X2e(e,r,u-a)),s+=a,n-=l,(i-=l)-(t+=a)==0&&n-s==0)return[];if(t==i){for(o=pg(t,[],0);s<n;)o.removed.push(r[s++]);return[o]}if(s==n)return[pg(t,[],i-t)];let h=Y2e(Z2e(e,t,i,r,s,n));o=void 0;let f=[],y=t,g=s;for(let b=0;b<h.length;b++)switch(h[b]){case LJ:o&&(f.push(o),o=void 0),y++,g++;break;case RJ:o||(o=pg(y,[],0)),o.addedCount++,y++,o.removed.push(r[g]),g++;break;case xO:o||(o=pg(y,[],0)),o.addedCount++,y++;break;case IO:o||(o=pg(y,[],0)),o.removed.push(r[g]),g++}return o&&f.push(o),f}function Q2e(e,t,i){for(let r=0;r<i;r++)if(!tR(e[r],t[r]))return r;return i}function X2e(e,t,i){let r=e.length,s=t.length,n=0;for(;n<i&&tR(e[--r],t[--s]);)n++;return n}function FJ(e,t){return K2e(e,0,e.length,t,0,t.length)}function tR(e,t){return e===t}function Kp(e){return e.localName==="slot"}let Wh=class{static getFlattenedNodes(e){const t=ze(e);return Kp(e)?(e=e,t.assignedNodes({flatten:!0})):Array.from(t.childNodes).map(i=>Kp(i)?ze(i=i).assignedNodes({flatten:!0}):[i]).reduce((i,r)=>i.concat(r),[])}constructor(e,t){this._shadyChildrenObserver=null,this._nativeChildrenObserver=null,this._connected=!1,this._target=e,this.callback=t,this._effectiveNodes=[],this._observer=null,this._scheduled=!1,this._boundSchedule=()=>{this._schedule()},this.connect(),this._schedule()}connect(){Kp(this._target)?this._listenSlots([this._target]):ze(this._target).children&&(this._listenSlots(ze(this._target).children),window.ShadyDOM?this._shadyChildrenObserver=window.ShadyDOM.observeChildren(this._target,e=>{this._processMutations(e)}):(this._nativeChildrenObserver=new MutationObserver(e=>{this._processMutations(e)}),this._nativeChildrenObserver.observe(this._target,{childList:!0}))),this._connected=!0}disconnect(){Kp(this._target)?this._unlistenSlots([this._target]):ze(this._target).children&&(this._unlistenSlots(ze(this._target).children),window.ShadyDOM&&this._shadyChildrenObserver?(window.ShadyDOM.unobserveChildren(this._shadyChildrenObserver),this._shadyChildrenObserver=null):this._nativeChildrenObserver&&(this._nativeChildrenObserver.disconnect(),this._nativeChildrenObserver=null)),this._connected=!1}_schedule(){this._scheduled||(this._scheduled=!0,ca.run(()=>this.flush()))}_processMutations(e){this._processSlotMutations(e),this.flush()}_processSlotMutations(e){if(e)for(let t=0;t<e.length;t++){let i=e[t];i.addedNodes&&this._listenSlots(i.addedNodes),i.removedNodes&&this._unlistenSlots(i.removedNodes)}}flush(){if(!this._connected)return!1;window.ShadyDOM&&ShadyDOM.flush(),this._nativeChildrenObserver?this._processSlotMutations(this._nativeChildrenObserver.takeRecords()):this._shadyChildrenObserver&&this._processSlotMutations(this._shadyChildrenObserver.takeRecords()),this._scheduled=!1;let e={target:this._target,addedNodes:[],removedNodes:[]},t=this.constructor.getFlattenedNodes(this._target),i=FJ(t,this._effectiveNodes);for(let s,n=0;n<i.length&&(s=i[n]);n++)for(let o,a=0;a<s.removed.length&&(o=s.removed[a]);a++)e.removedNodes.push(o);for(let s,n=0;n<i.length&&(s=i[n]);n++)for(let o=s.index;o<s.index+s.addedCount;o++)e.addedNodes.push(t[o]);this._effectiveNodes=t;let r=!1;return(e.addedNodes.length||e.removedNodes.length)&&(r=!0,this.callback.call(this._target,e)),r}_listenSlots(e){for(let t=0;t<e.length;t++){let i=e[t];Kp(i)&&i.addEventListener("slotchange",this._boundSchedule)}}_unlistenSlots(e){for(let t=0;t<e.length;t++){let i=e[t];Kp(i)&&i.removeEventListener("slotchange",this._boundSchedule)}}};const Qp=Element.prototype,eAe=Qp.matches||Qp.matchesSelector||Qp.mozMatchesSelector||Qp.msMatchesSelector||Qp.oMatchesSelector||Qp.webkitMatchesSelector,NJ=function(e,t){return eAe.call(e,t)};class qf{constructor(t){window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.patch(t),this.node=t}observeNodes(t){return new Wh(this.node,t)}unobserveNodes(t){t.disconnect()}notifyObserver(){}deepContains(t){if(ze(this.node).contains(t))return!0;let i=t,r=t.ownerDocument;for(;i&&i!==r&&i!==this.node;)i=ze(i).parentNode||ze(i).host;return i===this.node}getOwnerRoot(){return ze(this.node).getRootNode()}getDistributedNodes(){return this.node.localName==="slot"?ze(this.node).assignedNodes({flatten:!0}):[]}getDestinationInsertionPoints(){let t=[],i=ze(this.node).assignedSlot;for(;i;)t.push(i),i=ze(i).assignedSlot;return t}importNode(t,i){let r=this.node instanceof Document?this.node:this.node.ownerDocument;return ze(r).importNode(t,i)}getEffectiveChildNodes(){return Wh.getFlattenedNodes(this.node)}queryDistributedElements(t){let i=this.getEffectiveChildNodes(),r=[];for(let s,n=0,o=i.length;n<o&&(s=i[n]);n++)s.nodeType===Node.ELEMENT_NODE&&NJ(s,t)&&r.push(s);return r}get activeElement(){let t=this.node;return t._activeElement!==void 0?t._activeElement:t.activeElement}}function tAe(e,t){for(let i=0;i<t.length;i++){let r=t[i];e[r]=function(){return this.node[r].apply(this.node,arguments)}}}function Vj(e,t){for(let i=0;i<t.length;i++){let r=t[i];Object.defineProperty(e,r,{get:function(){return this.node[r]},configurable:!0})}}function iAe(e,t){for(let i=0;i<t.length;i++){let r=t[i];Object.defineProperty(e,r,{get:function(){return this.node[r]},set:function(s){this.node[r]=s},configurable:!0})}}class TO{constructor(t){this.event=t}get rootTarget(){return this.path[0]}get localTarget(){return this.event.target}get path(){return this.event.composedPath()}}let $O=qf;if(window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.noPatch&&window.ShadyDOM.Wrapper){class e extends window.ShadyDOM.Wrapper{}Object.getOwnPropertyNames(qf.prototype).forEach(t=>{t!="activeElement"&&(e.prototype[t]=qf.prototype[t])}),Vj(e.prototype,["classList"]),$O=e,Object.defineProperties(TO.prototype,{localTarget:{get(){const t=this.event.currentTarget,i=t&&qu(t).getOwnerRoot(),r=this.path;for(let s=0;s<r.length;s++){const n=r[s];if(qu(n).getOwnerRoot()===i)return n}},configurable:!0},path:{get(){return window.ShadyDOM.composedPath(this.event)},configurable:!0}})}else tAe(qf.prototype,["cloneNode","appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute","querySelector","querySelectorAll"]),Vj(qf.prototype,["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling","childNodes","children","classList"]),iAe(qf.prototype,["textContent","innerHTML","className"]);const qu=function(e){if((e=e||document)instanceof $O||e instanceof TO)return e;let t=e.__domApi;return t||(t=e instanceof Event?new TO(e):new $O(e),e.__domApi=t),t},xC=window.ShadyDOM,Uj=window.ShadyCSS;function Bj(e,t){return ze(e).getRootNode()===t}function rAe(e,t=!1){if(!xC||!Uj||!xC.handlesDynamicScoping)return null;const i=Uj.ScopingShim;if(!i)return null;const r=i.scopeForNode(e),s=ze(e).getRootNode(),n=o=>{if(!Bj(o,s))return;const a=Array.from(xC.nativeMethods.querySelectorAll.call(o,"*"));a.push(o);for(let l=0;l<a.length;l++){const u=a[l];if(!Bj(u,s))continue;const h=i.currentScopeForNode(u);h!==r&&(h!==""&&i.unscopeNode(u,h),i.scopeNode(u,r))}};if(n(e),t){const o=new MutationObserver(a=>{for(let l=0;l<a.length;l++){const u=a[l];for(let h=0;h<u.addedNodes.length;h++){const f=u.addedNodes[h];f.nodeType===Node.ELEMENT_NODE&&n(f)}}});return o.observe(e,{childList:!0,subtree:!0}),o}return null}const IC="disable-upgrade",DJ=e=>{for(;e;){const t=Object.getOwnPropertyDescriptor(e,"observedAttributes");if(t)return t.get;e=Object.getPrototypeOf(e.prototype).constructor}return()=>[]};Dn(e=>{const t=HI(e);let i=DJ(t);class r extends t{constructor(){super(),this.__isUpgradeDisabled}static get observedAttributes(){return i.call(this).concat(IC)}_initializeProperties(){this.hasAttribute(IC)?this.__isUpgradeDisabled=!0:super._initializeProperties()}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties()}_canApplyPropertyDefault(n){return super._canApplyPropertyDefault(n)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(n))}attributeChangedCallback(n,o,a,l){n==IC?this.__isUpgradeDisabled&&a==null&&(super._initializeProperties(),this.__isUpgradeDisabled=!1,ze(this).isConnected&&super.connectedCallback()):super.attributeChangedCallback(n,o,a,l)}connectedCallback(){this.__isUpgradeDisabled||super.connectedCallback()}disconnectedCallback(){this.__isUpgradeDisabled||super.disconnectedCallback()}}return r});const dw="disable-upgrade";let sAe=window.ShadyCSS;const jJ=Dn(e=>{const t=O_(HI(e)),i=mO?t:J2e(t),r=DJ(i),s={x:"pan-x",y:"pan-y",none:"none",all:"auto"};class n extends i{constructor(){super(),this.isAttached,this.__boundListeners,this._debouncers,this.__isUpgradeDisabled,this.__needsAttributesAtConnected,this._legacyForceObservedAttributes}static get importMeta(){return this.prototype.importMeta}created(){}__attributeReaction(a,l,u){(this.__dataAttributes&&this.__dataAttributes[a]||a===dw)&&this.attributeChangedCallback(a,l,u,null)}setAttribute(a,l){if(lw&&!this._legacyForceObservedAttributes){const u=this.getAttribute(a);super.setAttribute(a,l),this.__attributeReaction(a,u,String(l))}else super.setAttribute(a,l)}removeAttribute(a){if(lw&&!this._legacyForceObservedAttributes){const l=this.getAttribute(a);super.removeAttribute(a),this.__attributeReaction(a,l,null)}else super.removeAttribute(a)}static get observedAttributes(){return lw&&!this.prototype._legacyForceObservedAttributes?(this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))||(this.__observedAttributes=[],this.prototype,void 0),this.__observedAttributes):r.call(this).concat(dw)}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties()}_canApplyPropertyDefault(a){return super._canApplyPropertyDefault(a)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(a))}connectedCallback(){this.__needsAttributesAtConnected&&this._takeAttributes(),this.__isUpgradeDisabled||(super.connectedCallback(),this.isAttached=!0,this.attached())}attached(){}disconnectedCallback(){this.__isUpgradeDisabled||(super.disconnectedCallback(),this.isAttached=!1,this.detached())}detached(){}attributeChangedCallback(a,l,u,h){l!==u&&(a==dw?this.__isUpgradeDisabled&&u==null&&(this._initializeProperties(),this.__isUpgradeDisabled=!1,ze(this).isConnected&&this.connectedCallback()):(super.attributeChangedCallback(a,l,u,h),this.attributeChanged(a,l,u)))}attributeChanged(a,l,u){}_initializeProperties(){if(Fv&&this.hasAttribute(dw))this.__isUpgradeDisabled=!0;else{let a=Object.getPrototypeOf(this);a.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",a))||(this._registered(),a.__hasRegisterFinished=!0),super._initializeProperties(),this.root=this,this.created(),lw&&!this._legacyForceObservedAttributes&&(this.hasAttributes()?this._takeAttributes():this.parentNode||(this.__needsAttributesAtConnected=!0)),this._applyListeners()}}_takeAttributes(){const a=this.attributes;for(let l=0,u=a.length;l<u;l++){const h=a[l];this.__attributeReaction(h.name,null,h.value)}}_registered(){}ready(){this._ensureAttributes(),super.ready()}_ensureAttributes(){}_applyListeners(){}serialize(a){return this._serializeValue(a)}deserialize(a,l){return this._deserializeValue(a,l)}reflectPropertyToAttribute(a,l,u){this._propertyToAttribute(a,l,u)}serializeValueToAttribute(a,l,u){this._valueToNodeAttribute(u||this,a,l)}extend(a,l){if(!a||!l)return a||l;let u=Object.getOwnPropertyNames(l);for(let h,f=0;f<u.length&&(h=u[f]);f++){let y=Object.getOwnPropertyDescriptor(l,h);y&&Object.defineProperty(a,h,y)}return a}mixin(a,l){for(let u in l)a[u]=l[u];return a}chainObject(a,l){return a&&l&&a!==l&&(a.__proto__=l),a}instanceTemplate(a){let l=this.constructor._contentForTemplate(a);return document.importNode(l,!0)}fire(a,l,u){u=u||{},l=l==null?{}:l;let h=new Event(a,{bubbles:u.bubbles===void 0||u.bubbles,cancelable:Boolean(u.cancelable),composed:u.composed===void 0||u.composed});h.detail=l;let f=u.node||this;return ze(f).dispatchEvent(h),h}listen(a,l,u){a=a||this;let h=this.__boundListeners||(this.__boundListeners=new WeakMap),f=h.get(a);f||(f={},h.set(a,f));let y=l+u;f[y]||(f[y]=this._addMethodEventListenerToNode(a,l,u,this))}unlisten(a,l,u){a=a||this;let h=this.__boundListeners&&this.__boundListeners.get(a),f=l+u,y=h&&h[f];y&&(this._removeEventListenerFromNode(a,l,y),h[f]=null)}setScrollDirection(a,l){mJ(l||this,s[a]||"auto")}$$(a){return this.root.querySelector(a)}get domHost(){let a=ze(this).getRootNode();return a instanceof DocumentFragment?a.host:a}distributeContent(){const a=qu(this);window.ShadyDOM&&a.shadowRoot&&ShadyDOM.flush()}getEffectiveChildNodes(){return qu(this).getEffectiveChildNodes()}queryDistributedElements(a){return qu(this).queryDistributedElements(a)}getEffectiveChildren(){return this.getEffectiveChildNodes().filter(function(a){return a.nodeType===Node.ELEMENT_NODE})}getEffectiveTextContent(){let a=this.getEffectiveChildNodes(),l=[];for(let u,h=0;u=a[h];h++)u.nodeType!==Node.COMMENT_NODE&&l.push(u.textContent);return l.join("")}queryEffectiveChildren(a){let l=this.queryDistributedElements(a);return l&&l[0]}queryAllEffectiveChildren(a){return this.queryDistributedElements(a)}getContentChildNodes(a){let l=this.root.querySelector(a||"slot");return l?qu(l).getDistributedNodes():[]}getContentChildren(a){return this.getContentChildNodes(a).filter(function(l){return l.nodeType===Node.ELEMENT_NODE})}isLightDescendant(a){const l=this;return l!==a&&ze(l).contains(a)&&ze(l).getRootNode()===ze(a).getRootNode()}isLocalDescendant(a){return this.root===ze(a).getRootNode()}scopeSubtree(a,l=!1){return rAe(a,l)}getComputedStyleValue(a){return sAe.getComputedStyleValue(this,a)}debounce(a,l,u){return this._debouncers=this._debouncers||{},this._debouncers[a]=Di.debounce(this._debouncers[a],u>0?la.after(u):ca,l.bind(this))}isDebouncerActive(a){this._debouncers=this._debouncers||{};let l=this._debouncers[a];return!(!l||!l.isActive())}flushDebouncer(a){this._debouncers=this._debouncers||{};let l=this._debouncers[a];l&&l.flush()}cancelDebouncer(a){this._debouncers=this._debouncers||{};let l=this._debouncers[a];l&&l.cancel()}async(a,l){return l>0?la.run(a.bind(this),l):~ca.run(a.bind(this))}cancelAsync(a){a<0?ca.cancel(~a):la.cancel(a)}create(a,l){let u=document.createElement(a);if(l)if(u.setProperties)u.setProperties(l);else for(let h in l)u[h]=l[h];return u}elementMatches(a,l){return NJ(l||this,a)}toggleAttribute(a,l){let u=this;return arguments.length===3&&(u=arguments[2]),arguments.length==1&&(l=!u.hasAttribute(a)),l?(ze(u).setAttribute(a,""),!0):(ze(u).removeAttribute(a),!1)}toggleClass(a,l,u){u=u||this,arguments.length==1&&(l=!u.classList.contains(a)),l?u.classList.add(a):u.classList.remove(a)}transform(a,l){(l=l||this).style.webkitTransform=a,l.style.transform=a}translate3d(a,l,u,h){h=h||this,this.transform("translate3d("+a+","+l+","+u+")",h)}arrayDelete(a,l){let u;if(Array.isArray(a)){if(u=a.indexOf(l),u>=0)return a.splice(u,1)}else if(u=vs(this,a).indexOf(l),u>=0)return this.splice(a,u,1);return null}_logger(a,l){switch(Array.isArray(l)&&l.length===1&&Array.isArray(l[0])&&(l=l[0]),a){case"log":case"warn":case"error":console[a](...l)}}_log(...a){this._logger("log",a)}_warn(...a){this._logger("warn",a)}_error(...a){this._logger("error",a)}_logf(a,...l){return["[%s::%s]",this.is,a,...l]}}return n.prototype.is="",n}),nAe={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,listeners:!0,hostAttributes:!0},zJ={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,behaviors:!0,_noAccessors:!0},oAe=Object.assign({listeners:!0,hostAttributes:!0,properties:!0,observers:!0},zJ);function aAe(e,t,i){const r=e._noAccessors,s=Object.getOwnPropertyNames(e);for(let n=0;n<s.length;n++){let o=s[n];if(!(o in i))if(r)t[o]=e[o];else{let a=Object.getOwnPropertyDescriptor(e,o);a&&(a.configurable=!0,Object.defineProperty(t,o,a))}}}function lAe(e,t,i){for(let r=0;r<t.length;r++)VJ(e,t[r],i,oAe)}function VJ(e,t,i,r){aAe(t,e,r);for(let s in nAe)t[s]&&(i[s]=i[s]||[],i[s].push(t[s]))}function UJ(e,t,i){t=t||[];for(let r=e.length-1;r>=0;r--){let s=e[r];s?Array.isArray(s)?UJ(s,t):t.indexOf(s)<0&&(!i||i.indexOf(s)<0)&&t.unshift(s):console.warn("behavior is null, check for missing or 404 import")}return t}function qj(e,t){for(const i in t){const r=e[i],s=t[i];e[i]=!("value"in s)&&r&&"value"in r?Object.assign({value:r.value},s):s}}const Gj=jJ(HTMLElement);function cAe(e,t,i){let r;const s={};class n extends t{static _finalizeClass(){if(this.hasOwnProperty(JSCompiler_renameProperty("generatedFrom",this))){if(r)for(let l,u=0;u<r.length;u++)l=r[u],l.properties&&this.createProperties(l.properties),l.observers&&this.createObservers(l.observers,l.properties);e.properties&&this.createProperties(e.properties),e.observers&&this.createObservers(e.observers,e.properties),this._prepareTemplate()}else t._finalizeClass.call(this)}static get properties(){const l={};if(r)for(let u=0;u<r.length;u++)qj(l,r[u].properties);return qj(l,e.properties),l}static get observers(){let l=[];if(r)for(let u,h=0;h<r.length;h++)u=r[h],u.observers&&(l=l.concat(u.observers));return e.observers&&(l=l.concat(e.observers)),l}created(){super.created();const l=s.created;if(l)for(let u=0;u<l.length;u++)l[u].call(this)}_registered(){const l=n.prototype;if(!l.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",l))){l.__hasRegisterFinished=!0,super._registered(),Fv&&o(l);const u=Object.getPrototypeOf(this);let h=s.beforeRegister;if(h)for(let f=0;f<h.length;f++)h[f].call(u);if(h=s.registered,h)for(let f=0;f<h.length;f++)h[f].call(u)}}_applyListeners(){super._applyListeners();const l=s.listeners;if(l)for(let u=0;u<l.length;u++){const h=l[u];if(h)for(let f in h)this._addMethodEventListenerToNode(this,f,h[f])}}_ensureAttributes(){const l=s.hostAttributes;if(l)for(let u=l.length-1;u>=0;u--){const h=l[u];for(let f in h)this._ensureAttribute(f,h[f])}super._ensureAttributes()}ready(){super.ready();let l=s.ready;if(l)for(let u=0;u<l.length;u++)l[u].call(this)}attached(){super.attached();let l=s.attached;if(l)for(let u=0;u<l.length;u++)l[u].call(this)}detached(){super.detached();let l=s.detached;if(l)for(let u=0;u<l.length;u++)l[u].call(this)}attributeChanged(l,u,h){super.attributeChanged();let f=s.attributeChanged;if(f)for(let y=0;y<f.length;y++)f[y].call(this,l,u,h)}}if(i){Array.isArray(i)||(i=[i]);let a=t.prototype.behaviors;r=UJ(i,null,a),n.prototype.behaviors=a?a.concat(i):r}const o=a=>{r&&lAe(a,r,s),VJ(a,e,s,zJ)};return Fv||o(n.prototype),n.generatedFrom=e,n}const uAe=function(e,t){e||console.warn("Polymer.Class requires `info` argument");let i=t?t(Gj):Gj;return i=cAe(e,i,e.behaviors),i.is=i.prototype.is=e.is,i};function iR(e,t,i,r,s){let n;s&&(n=typeof i=="object"&&i!==null,n&&(r=e.__dataTemp[t]));let o=r!==i&&(r==r||i==i);return n&&o&&(e.__dataTemp[t]=i),o}const rR=Dn(e=>{class t extends e{_shouldPropertyChange(r,s,n){return iR(this,r,s,n,!0)}}return t}),BJ=Dn(e=>{class t extends e{static get properties(){return{mutableData:Boolean}}_shouldPropertyChange(r,s,n){return iR(this,r,s,n,this.mutableData)}}return t});rR._mutablePropertyChange=iR;let CO=null;function EO(){return CO}EO.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:EO,writable:!0}});const qJ=GI(EO),dAe=rR(qJ);function hAe(e,t){CO=e,Object.setPrototypeOf(e,t.prototype),new t,CO=null}const pAe=GI(class{});function GJ(e,t){for(let i=0;i<t.length;i++){let r=t[i];if(Boolean(e)!=Boolean(r.__hideTemplateChildren__))if(r.nodeType===Node.TEXT_NODE)e?(r.__polymerTextContent__=r.textContent,r.textContent=""):r.textContent=r.__polymerTextContent__;else if(r.localName==="slot")if(e)r.__polymerReplaced__=document.createComment("hidden-slot"),ze(ze(r).parentNode).replaceChild(r.__polymerReplaced__,r);else{const s=r.__polymerReplaced__;s&&ze(ze(s).parentNode).replaceChild(r,s)}else r.style&&(e?(r.__polymerDisplay__=r.style.display,r.style.display="none"):r.style.display=r.__polymerDisplay__);r.__hideTemplateChildren__=e,r._showHideChildren&&r._showHideChildren(e)}}class sR extends pAe{constructor(t){super(),this._configureProperties(t),this.root=this._stampTemplate(this.__dataHost);let i=[];this.children=i;for(let s=this.root.firstChild;s;s=s.nextSibling)i.push(s),s.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let r=this.__templatizeOptions;(t&&r.instanceProps||!r.instanceProps)&&this._enableProperties()}_configureProperties(t){if(this.__templatizeOptions.forwardHostProp)for(let i in this.__hostProps)this._setPendingProperty(i,this.__dataHost["_host_"+i]);for(let i in t)this._setPendingProperty(i,t[i])}forwardHostProp(t,i){this._setPendingPropertyOrPath(t,i,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(t,i,r){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(t,i,s=>{s.model=this,r(s)});else{let s=this.__dataHost.__dataHost;s&&s._addEventListenerToNode(t,i,r)}}_showHideChildren(t){GJ(t,this.children)}_setUnmanagedPropertyToNode(t,i,r){t.__hideTemplateChildren__&&t.nodeType==Node.TEXT_NODE&&i=="textContent"?t.__polymerTextContent__=r:super._setUnmanagedPropertyToNode(t,i,r)}get parentModel(){let t=this.__parentModel;if(!t){let i;t=this;do t=t.__dataHost.__dataHost;while((i=t.__templatizeOptions)&&!i.parentModel);this.__parentModel=t}return t}dispatchEvent(t){return!0}}const fAe=rR(sR);function Hj(e){let t=e.__dataHost;return t&&t._methodHost||t}function mAe(e,t,i){let r=i.mutableData?fAe:sR;qv.mixin&&(r=qv.mixin(r));let s=class extends r{};return s.prototype.__templatizeOptions=i,s.prototype._bindTemplate(e),vAe(s,e,t,i),s}function yAe(e,t,i,r){let s=i.forwardHostProp;if(s&&t.hasHostProps){const n=e.localName=="template";let o=t.templatizeTemplateClass;if(!o){if(n){let l=i.mutableData?dAe:qJ;class u extends l{}o=t.templatizeTemplateClass=u}else{const l=e.constructor;class u extends l{}o=t.templatizeTemplateClass=u}let a=t.hostProps;for(let l in a)o.prototype._addPropertyEffect("_host_"+l,o.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:gAe(l,s)}),o.prototype._createNotifyingProperty("_host_"+l);qW&&r&&wAe(t,i,r)}if(e.__dataProto&&Object.assign(e.__data,e.__dataProto),n)hAe(e,o),e.__dataTemp={},e.__dataPending=null,e.__dataOld=null,e._enableProperties();else{Object.setPrototypeOf(e,o.prototype);const a=t.hostProps;for(let l in a)if(l="_host_"+l,l in e){const u=e[l];delete e[l],e.__data[l]=u}}}}function gAe(e,t){return function(i,r,s){t.call(i.__templatizeOwner,r.substring(6),s[r])}}function vAe(e,t,i,r){let s=i.hostProps||{};for(let n in r.instanceProps){delete s[n];let o=r.notifyInstanceProp;o&&e.prototype._addPropertyEffect(n,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:_Ae(n,o)})}if(r.forwardHostProp&&t.__dataHost)for(let n in s)i.hasHostProps||(i.hasHostProps=!0),e.prototype._addPropertyEffect(n,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:bAe()})}function _Ae(e,t){return function(i,r,s){t.call(i.__templatizeOwner,i,r,s[r])}}function bAe(){return function(e,t,i){e.__dataHost._setPendingPropertyOrPath("_host_"+t,i[t],!0,!0)}}function qv(e,t,i){if(Km&&!Hj(e))throw new Error("strictTemplatePolicy: template owner not trusted");if(i=i||{},e.__templatizeOwner)throw new Error("A <template> can only be templatized once");e.__templatizeOwner=t;let r=(t?t.constructor:sR)._parseTemplate(e),s=r.templatizeInstanceClass;s||(s=mAe(e,r,i),r.templatizeInstanceClass=s);const n=Hj(e);yAe(e,r,i,n);let o=class extends s{};return o.prototype._methodHost=n,o.prototype.__dataHost=e,o.prototype.__templatizeOwner=t,o.prototype.__hostProps=r.hostProps,o=o,o}function wAe(e,t,i){const r=i.constructor._properties,{propertyEffects:s}=e,{instanceProps:n}=t;for(let o in s)if(!(r[o]||n&&n[o])){const a=s[o];for(let l=0;l<a.length;l++){const{part:u}=a[l].info;if(!u.signature||!u.signature.static){console.warn(`Property '${o}' used in template but not declared in 'properties'; attribute will not be observed.`);break}}}}function SAe(e,t){let i;for(;t;)if(i=t.__dataHost?t:t.__templatizeInstance){if(i.__dataHost==e)return i;t=i.__dataHost}else t=ze(t).parentNode;return null}let Wj=!1;function nR(){if(Fv&&!zL){if(!Wj){Wj=!0;const e=document.createElement("style");e.textContent="dom-bind,dom-if,dom-repeat{display:none;}",document.head.appendChild(e)}return!0}return!1}const xAe=O_(BJ(GI(HTMLElement)));class IAe extends xAe{static get observedAttributes(){return["mutable-data"]}constructor(){if(super(),Km)throw new Error("strictTemplatePolicy: dom-bind not allowed");this.root=null,this.$=null,this.__children=null}attributeChangedCallback(t,i,r,s){this.mutableData=!0}connectedCallback(){nR()||(this.style.display="none"),this.render()}disconnectedCallback(){this.__removeChildren()}__insertChildren(){ze(ze(this).parentNode).insertBefore(this.root,this)}__removeChildren(){if(this.__children)for(let t=0;t<this.__children.length;t++)this.root.appendChild(this.__children[t])}render(){let t;if(!this.__children){if(t=t||this.querySelector("template"),!t){let i=new MutationObserver(()=>{if(t=this.querySelector("template"),!t)throw new Error("dom-bind requires a <template> child");i.disconnect(),this.render()});return void i.observe(this,{childList:!0})}this.root=this._stampTemplate(t),this.$=this.root.$,this.__children=[];for(let i=this.root.firstChild;i;i=i.nextSibling)this.__children[this.__children.length]=i;this._enableProperties()}this.__insertChildren(),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}}customElements.define("dom-bind",IAe);const TAe=BJ(cd);class Jj extends TAe{static get is(){return"dom-repeat"}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!dO,readOnly:!0},initialCount:{type:Number},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"},notifyDomChange:{type:Boolean},reuseChunkedInstances:{type:Boolean}}}static get observers(){return["__itemsChanged(items.*)"]}constructor(){super(),this.__instances=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__renderStartTime=null,this.__itemsArrayChanged=!1,this.__shouldMeasureChunk=!1,this.__shouldContinueChunking=!1,this.__chunkingId=0,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null,this._templateInfo}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let t=0;t<this.__instances.length;t++)this.__detachInstance(t)}connectedCallback(){if(super.connectedCallback(),nR()||(this.style.display="none"),this.__isDetached){this.__isDetached=!1;let t=ze(ze(this).parentNode);for(let i=0;i<this.__instances.length;i++)this.__attachInstance(i,t)}}__ensureTemplatized(){if(!this.__ctor){const t=this;let i=this.template=t._templateInfo?t:this.querySelector("template");if(!i){let s=new MutationObserver(()=>{if(!this.querySelector("template"))throw new Error("dom-repeat requires a <template> child");s.disconnect(),this.__render()});return s.observe(this,{childList:!0}),!1}let r={};r[this.as]=!0,r[this.indexAs]=!0,r[this.itemsIndexAs]=!0,this.__ctor=qv(i,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:r,forwardHostProp:function(s,n){let o=this.__instances;for(let a,l=0;l<o.length&&(a=o[l]);l++)a.forwardHostProp(s,n)},notifyInstanceProp:function(s,n,o){if(GCe(this.as,n)){let a=s[this.itemsIndexAs];n==this.as&&(this.items[a]=o);let l=zv(this.as,`${JSCompiler_renameProperty("items",this)}.${a}`,n);this.notifyPath(l,o)}}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(t){if(typeof t=="string"){let i=t,r=this.__getMethodHost();return function(){return r[i].apply(r,arguments)}}return t}__sortChanged(t){this.__sortFn=this.__functionFromPropertyValue(t),this.items&&this.__debounceRender(this.__render)}__filterChanged(t){this.__filterFn=this.__functionFromPropertyValue(t),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(t){return Math.ceil(1e3/t)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}__handleObservedPaths(t){if(this.__sortFn||this.__filterFn)if(t){if(this.__observePaths){let i=this.__observePaths;for(let r=0;r<i.length;r++)t.indexOf(i[r])===0&&this.__debounceRender(this.__render,this.delay)}}else this.__debounceRender(this.__render,this.delay)}__itemsChanged(t){this.items&&!Array.isArray(this.items)&&console.warn("dom-repeat expected array for `items`, found",this.items),this.__handleItemPath(t.path,t.value)||(t.path==="items"&&(this.__itemsArrayChanged=!0),this.__debounceRender(this.__render))}__debounceRender(t,i=0){this.__renderDebouncer=Di.debounce(this.__renderDebouncer,i>0?la.after(i):ca,t.bind(this)),WI(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),Xm()}__render(){if(!this.__ensureTemplatized())return;let t=this.items||[];const i=this.__sortAndFilterItems(t),r=this.__calculateLimit(i.length);this.__updateInstances(t,r,i),this.initialCount&&(this.__shouldMeasureChunk||this.__shouldContinueChunking)&&(cancelAnimationFrame(this.__chunkingId),this.__chunkingId=requestAnimationFrame(()=>this.__continueChunking())),this._setRenderedItemCount(this.__instances.length),dO&&!this.notifyDomChange||this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}__sortAndFilterItems(t){let i=new Array(t.length);for(let r=0;r<t.length;r++)i[r]=r;return this.__filterFn&&(i=i.filter((r,s,n)=>this.__filterFn(t[r],s,n))),this.__sortFn&&i.sort((r,s)=>this.__sortFn(t[r],t[s])),i}__calculateLimit(t){let i=t;const r=this.__instances.length;if(this.initialCount){let s;!this.__chunkCount||this.__itemsArrayChanged&&!this.reuseChunkedInstances?(i=Math.min(t,this.initialCount),s=Math.max(i-r,0),this.__chunkCount=s||1):(s=Math.min(Math.max(t-r,0),this.__chunkCount),i=Math.min(r+s,t)),this.__shouldMeasureChunk=s===this.__chunkCount,this.__shouldContinueChunking=i<t,this.__renderStartTime=performance.now()}return this.__itemsArrayChanged=!1,i}__continueChunking(){if(this.__shouldMeasureChunk){const t=performance.now()-this.__renderStartTime,i=this._targetFrameTime/t;this.__chunkCount=Math.round(this.__chunkCount*i)||1}this.__shouldContinueChunking&&this.__debounceRender(this.__render)}__updateInstances(t,i,r){const s=this.__itemsIdxToInstIdx={};let n;for(n=0;n<i;n++){let o=this.__instances[n],a=r[n],l=t[a];s[a]=n,o?(o._setPendingProperty(this.as,l),o._setPendingProperty(this.indexAs,n),o._setPendingProperty(this.itemsIndexAs,a),o._flushProperties()):this.__insertInstance(l,n,a)}for(let o=this.__instances.length-1;o>=n;o--)this.__detachAndRemoveInstance(o)}__detachInstance(t){let i=this.__instances[t];const r=ze(i.root);for(let s=0;s<i.children.length;s++){let n=i.children[s];r.appendChild(n)}return i}__attachInstance(t,i){let r=this.__instances[t];i.insertBefore(r.root,this)}__detachAndRemoveInstance(t){this.__detachInstance(t),this.__instances.splice(t,1)}__stampInstance(t,i,r){let s={};return s[this.as]=t,s[this.indexAs]=i,s[this.itemsIndexAs]=r,new this.__ctor(s)}__insertInstance(t,i,r){const s=this.__stampInstance(t,i,r);let n=this.__instances[i+1],o=n?n.children[0]:this;return ze(ze(this).parentNode).insertBefore(s.root,o),this.__instances[i]=s,s}_showHideChildren(t){for(let i=0;i<this.__instances.length;i++)this.__instances[i]._showHideChildren(t)}__handleItemPath(t,i){let r=t.slice(6),s=r.indexOf("."),n=s<0?r:r.substring(0,s);if(n==parseInt(n,10)){let o=s<0?"":r.substring(s+1);this.__handleObservedPaths(o);let a=this.__itemsIdxToInstIdx[n],l=this.__instances[a];if(l){let u=this.as+(o?"."+o:"");l._setPendingPropertyOrPath(u,i,!1,!0),l._flushProperties()}return!0}}itemForElement(t){let i=this.modelForElement(t);return i&&i[this.as]}indexForElement(t){let i=this.modelForElement(t);return i&&i[this.indexAs]}modelForElement(t){return SAe(this.template,t)}}customElements.define(Jj.is,Jj);class HJ extends cd{static get is(){return"dom-if"}static get template(){return null}static get properties(){return{if:{type:Boolean,observer:"__debounceRender"},restamp:{type:Boolean,observer:"__debounceRender"},notifyDomChange:{type:Boolean}}}constructor(){super(),this.__renderDebouncer=null,this._lastIf=!1,this.__hideTemplateChildren__=!1,this.__template,this._templateInfo}__debounceRender(){this.__renderDebouncer=Di.debounce(this.__renderDebouncer,ca,()=>this.__render()),WI(this.__renderDebouncer)}disconnectedCallback(){super.disconnectedCallback();const t=ze(this).parentNode;t&&(t.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||ze(t).host)||this.__teardownInstance()}connectedCallback(){super.connectedCallback(),nR()||(this.style.display="none"),this.if&&this.__debounceRender()}__ensureTemplate(){if(!this.__template){const t=this;let i=t._templateInfo?t:ze(t).querySelector("template");if(!i){let r=new MutationObserver(()=>{if(!ze(this).querySelector("template"))throw new Error("dom-if requires a <template> child");r.disconnect(),this.__render()});return r.observe(this,{childList:!0}),!1}this.__template=i}return!0}__ensureInstance(){let t=ze(this).parentNode;if(this.__hasInstance()){let i=this.__getInstanceNodes();if(i&&i.length&&ze(this).previousSibling!==i[i.length-1])for(let r,s=0;s<i.length&&(r=i[s]);s++)ze(t).insertBefore(r,this)}else{if(!t||!this.__ensureTemplate())return!1;this.__createAndInsertInstance(t)}return!0}render(){Xm()}__render(){if(this.if){if(!this.__ensureInstance())return}else this.restamp&&this.__teardownInstance();this._showHideChildren(),dO&&!this.notifyDomChange||this.if==this._lastIf||(this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this._lastIf=this.if)}__hasInstance(){}__getInstanceNodes(){}__createAndInsertInstance(t){}__teardownInstance(){}_showHideChildren(){}}class $Ae extends HJ{constructor(){super(),this.__instance=null,this.__syncInfo=null}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.templateInfo.childNodes}__createAndInsertInstance(t){const i=this.__dataHost||this;if(Km&&!this.__dataHost)throw new Error("strictTemplatePolicy: template owner not trusted");const r=i._bindTemplate(this.__template,!0);r.runEffects=(s,n,o)=>{let a=this.__syncInfo;if(this.if)a&&(this.__syncInfo=null,this._showHideChildren(),n=Object.assign(a.changedProps,n)),s(n,o);else if(this.__instance)if(a||(a=this.__syncInfo={runEffects:s,changedProps:{}}),o)for(const l in n){const u=vc(l);a.changedProps[u]=this.__dataHost[u]}else Object.assign(a.changedProps,n)},this.__instance=i._stampTemplate(this.__template,r),ze(t).insertBefore(this.__instance,this)}__syncHostProperties(){const t=this.__syncInfo;t&&(this.__syncInfo=null,t.runEffects(t.changedProps,!1))}__teardownInstance(){const t=this.__dataHost||this;this.__instance&&(t._removeBoundDom(this.__instance),this.__instance=null,this.__syncInfo=null)}_showHideChildren(){const t=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==t&&(this.__instance.__hidden=t,GJ(t,this.__instance.templateInfo.childNodes)),t||this.__syncHostProperties()}}class CAe extends HJ{constructor(){super(),this.__ctor=null,this.__instance=null,this.__invalidProps=null}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.children}__createAndInsertInstance(t){this.__ctor||(this.__ctor=qv(this.__template,this,{mutableData:!0,forwardHostProp:function(i,r){this.__instance&&(this.if?this.__instance.forwardHostProp(i,r):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[vc(i)]=!0))}})),this.__instance=new this.__ctor,ze(t).insertBefore(this.__instance.root,this)}__teardownInstance(){if(this.__instance){let t=this.__instance.children;if(t&&t.length){let i=ze(t[0]).parentNode;if(i){i=ze(i);for(let r,s=0;s<t.length&&(r=t[s]);s++)i.removeChild(r)}}this.__invalidProps=null,this.__instance=null}}__syncHostProperties(){let t=this.__invalidProps;if(t){this.__invalidProps=null;for(let i in t)this.__instance._setPendingProperty(i,this.__dataHost[i]);this.__instance._flushProperties()}}_showHideChildren(){const t=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==t&&(this.__instance.__hidden=t,this.__instance._showHideChildren(t)),t||this.__syncHostProperties()}}const Zj=GW?$Ae:CAe;customElements.define(Zj.is,Zj);let EAe=Dn(e=>{let t=HI(e);class i extends t{static get properties(){return{items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}static get observers(){return["__updateSelection(multi, items.*)"]}constructor(){super(),this.__lastItems=null,this.__lastMulti=null,this.__selectedMap=null}__updateSelection(s,n){let o=n.path;if(o==JSCompiler_renameProperty("items",this)){let a=n.base||[],l=this.__lastItems;if(s!==this.__lastMulti&&this.clearSelection(),l){let u=FJ(a,l);this.__applySplices(u)}this.__lastItems=a,this.__lastMulti=s}else if(n.path==`${JSCompiler_renameProperty("items",this)}.splices`)this.__applySplices(n.value.indexSplices);else{let a=o.slice(`${JSCompiler_renameProperty("items",this)}.`.length),l=parseInt(a,10);a.indexOf(".")<0&&a==l&&this.__deselectChangedIdx(l)}}__applySplices(s){let n=this.__selectedMap;for(let a=0;a<s.length;a++){let l=s[a];n.forEach((u,h)=>{u<l.index||(u>=l.index+l.removed.length?n.set(h,u+l.addedCount-l.removed.length):n.set(h,-1))});for(let u=0;u<l.addedCount;u++){let h=l.index+u;n.has(this.items[h])&&n.set(this.items[h],h)}}this.__updateLinks();let o=0;n.forEach((a,l)=>{a<0?(this.multi?this.splice(JSCompiler_renameProperty("selected",this),o,1):this.selected=this.selectedItem=null,n.delete(l)):o++})}__updateLinks(){if(this.__dataLinkedPaths={},this.multi){let s=0;this.__selectedMap.forEach(n=>{n>=0&&this.linkPaths(`${JSCompiler_renameProperty("items",this)}.${n}`,`${JSCompiler_renameProperty("selected",this)}.${s++}`)})}else this.__selectedMap.forEach(s=>{this.linkPaths(JSCompiler_renameProperty("selected",this),`${JSCompiler_renameProperty("items",this)}.${s}`),this.linkPaths(JSCompiler_renameProperty("selectedItem",this),`${JSCompiler_renameProperty("items",this)}.${s}`)})}clearSelection(){this.__dataLinkedPaths={},this.__selectedMap=new Map,this.selected=this.multi?[]:null,this.selectedItem=null}isSelected(s){return this.__selectedMap.has(s)}isIndexSelected(s){return this.isSelected(this.items[s])}__deselectChangedIdx(s){let n=this.__selectedIndexForItemIndex(s);if(n>=0){let o=0;this.__selectedMap.forEach((a,l)=>{n==o++&&this.deselect(l)})}}__selectedIndexForItemIndex(s){let n=this.__dataLinkedPaths[`${JSCompiler_renameProperty("items",this)}.${s}`];if(n)return parseInt(n.slice(`${JSCompiler_renameProperty("selected",this)}.`.length),10)}deselect(s){let n=this.__selectedMap.get(s);if(n>=0){let o;this.__selectedMap.delete(s),this.multi&&(o=this.__selectedIndexForItemIndex(n)),this.__updateLinks(),this.multi?this.splice(JSCompiler_renameProperty("selected",this),o,1):this.selected=this.selectedItem=null}}deselectIndex(s){this.deselect(this.items[s])}select(s){this.selectIndex(this.items.indexOf(s))}selectIndex(s){let n=this.items[s];this.isSelected(n)?this.toggle&&this.deselectIndex(s):(this.multi||this.__selectedMap.clear(),this.__selectedMap.set(n,s),this.__updateLinks(),this.multi?this.push(JSCompiler_renameProperty("selected",this),n):this.selected=this.selectedItem=n)}}return i})(cd);class Yj extends EAe{static get is(){return"array-selector"}static get template(){return null}}customElements.define(Yj.is,Yj);const Xp=jJ(HTMLElement).prototype;var hw=new Set;const AAe={properties:{_parentResizable:{type:Object,observer:"_parentResizableChanged"},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":"_onIronRequestResizeNotifications"},created:function(){this._interestedResizables=[],this._boundNotifyResize=this.notifyResize.bind(this),this._boundOnDescendantIronResize=this._onDescendantIronResize.bind(this)},attached:function(){this._requestResizeNotifications()},detached:function(){this._parentResizable?this._parentResizable.stopResizeNotificationsFor(this):(hw.delete(this),window.removeEventListener("resize",this._boundNotifyResize)),this._parentResizable=null},notifyResize:function(){this.isAttached&&(this._interestedResizables.forEach(function(e){this.resizerShouldNotify(e)&&this._notifyDescendant(e)},this),this._fireResize())},assignParentResizable:function(e){this._parentResizable&&this._parentResizable.stopResizeNotificationsFor(this),this._parentResizable=e,e&&e._interestedResizables.indexOf(this)===-1&&(e._interestedResizables.push(this),e._subscribeIronResize(this))},stopResizeNotificationsFor:function(e){var t=this._interestedResizables.indexOf(e);t>-1&&(this._interestedResizables.splice(t,1),this._unsubscribeIronResize(e))},_subscribeIronResize:function(e){e.addEventListener("iron-resize",this._boundOnDescendantIronResize)},_unsubscribeIronResize:function(e){e.removeEventListener("iron-resize",this._boundOnDescendantIronResize)},resizerShouldNotify:function(e){return!0},_onDescendantIronResize:function(e){this._notifyingDescendant?e.stopPropagation():zL||this._fireResize()},_fireResize:function(){this.fire("iron-resize",null,{node:this,bubbles:!1})},_onIronRequestResizeNotifications:function(e){var t=qu(e).rootTarget;t!==this&&(t.assignParentResizable(this),this._notifyDescendant(t),e.stopPropagation())},_parentResizableChanged:function(e){e&&window.removeEventListener("resize",this._boundNotifyResize)},_notifyDescendant:function(e){this.isAttached&&(this._notifyingDescendant=!0,e.notifyResize(),this._notifyingDescendant=!1)},_requestResizeNotifications:function(){if(this.isAttached)if(document.readyState==="loading"){var e=this._requestResizeNotifications.bind(this);document.addEventListener("readystatechange",function t(){document.removeEventListener("readystatechange",t),e()})}else this._findParent(),this._parentResizable?this._parentResizable._interestedResizables.forEach(function(t){t!==this&&t._findParent()},this):(hw.forEach(function(t){t!==this&&t._findParent()},this),window.addEventListener("resize",this._boundNotifyResize),this.notifyResize())},_findParent:function(){this.assignParentResizable(null),this.fire("iron-request-resize-notifications",null,{node:this,bubbles:!0,cancelable:!0}),this._parentResizable?hw.delete(this):hw.add(this)}},MAe={properties:{scrollTarget:{type:HTMLElement,value:function(){return this._defaultScrollTarget}}},observers:["_scrollTargetChanged(scrollTarget, isAttached)"],_shouldHaveListener:!0,_scrollTargetChanged:function(e,t){if(this._oldScrollTarget&&(this._toggleScrollListener(!1,this._oldScrollTarget),this._oldScrollTarget=null),t)if(e==="document")this.scrollTarget=this._doc;else if(typeof e=="string"){var i=this.domHost;this.scrollTarget=i&&i.$?i.$[e]:qu(this.ownerDocument).querySelector("#"+e)}else this._isValidScrollTarget()&&(this._oldScrollTarget=e,this._toggleScrollListener(this._shouldHaveListener,e))},_scrollHandler:function(){},get _defaultScrollTarget(){return this._doc},get _doc(){return this.ownerDocument.documentElement},get _scrollTop(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageYOffset:this.scrollTarget.scrollTop:0},get _scrollLeft(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageXOffset:this.scrollTarget.scrollLeft:0},set _scrollTop(e){this.scrollTarget===this._doc?window.scrollTo(window.pageXOffset,e):this._isValidScrollTarget()&&(this.scrollTarget.scrollTop=e)},set _scrollLeft(e){this.scrollTarget===this._doc?window.scrollTo(e,window.pageYOffset):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=e)},scroll:function(e,t){var i;typeof e=="object"?(i=e.left,t=e.top):i=e,i=i||0,t=t||0,this.scrollTarget===this._doc?window.scrollTo(i,t):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=i,this.scrollTarget.scrollTop=t)},get _scrollTargetWidth(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerWidth:this.scrollTarget.offsetWidth:0},get _scrollTargetHeight(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerHeight:this.scrollTarget.offsetHeight:0},_isValidScrollTarget:function(){return this.scrollTarget instanceof HTMLElement},_toggleScrollListener:function(e,t){var i=t===this._doc?window:t;e?this._boundScrollHandler||(this._boundScrollHandler=this._scrollHandler.bind(this),i.addEventListener("scroll",this._boundScrollHandler)):this._boundScrollHandler&&(i.removeEventListener("scroll",this._boundScrollHandler),this._boundScrollHandler=null)},toggleScrollListener:function(e){this._shouldHaveListener=e,this._toggleScrollListener(e,this.scrollTarget)}},Kj=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),OAe=Kj&&Kj[1]>=8,Qj=3,kAe=uAe({behaviors:[AAe,MAe],_ratio:.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_lastVisibleIndexVal:null,_maxPages:2,_focusedVirtualIndex:-1,_templateCost:0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){return this._physicalSize-this._viewportHeight},get _maxScrollTop(){return this._estScrollHeight-this._viewportHeight+this._scrollOffset},get _maxVirtualStart(){return Math.max(0,this._virtualCount-this._physicalCount)},set _virtualStart(e){e=this._clamp(e,0,this._maxVirtualStart),this._virtualStartVal=e},get _virtualStart(){return this._virtualStartVal||0},set _physicalStart(e){(e%=this._physicalCount)<0&&(e=this._physicalCount+e),this._physicalStartVal=e},get _physicalStart(){return this._physicalStartVal||0},get _physicalEnd(){return(this._physicalStart+this._physicalCount-1)%this._physicalCount},set _physicalCount(e){this._physicalCountVal=e},get _physicalCount(){return this._physicalCountVal||0},get _optPhysicalSize(){return this._viewportHeight===0?1/0:this._viewportHeight*this._maxPages},get _isVisible(){return Boolean(this.offsetWidth||this.offsetHeight)},get firstVisibleIndex(){let e=this._firstVisibleIndexVal;if(e==null){let t=this._physicalTop+this._scrollOffset;e=this._iterateItems(function(i,r){if(t+=this._physicalSizes[i],t>this._scrollPosition)return r})||0,this._firstVisibleIndexVal=e}return e},get lastVisibleIndex(){let e=this._lastVisibleIndexVal;if(e==null){let t=this._physicalTop+this._scrollOffset;this._iterateItems(function(i,r){t<this._scrollBottom&&(e=r),t+=this._physicalSizes[i]}),this._lastVisibleIndexVal=e}return e},get _scrollOffset(){return this._scrollerPaddingTop},attached:function(){this._debounce("_render",this._render,ac),this.listen(this,"iron-resize","_resizeHandler")},detached:function(){this.unlisten(this,"iron-resize","_resizeHandler")},updateViewportBoundaries:function(){const e=window.getComputedStyle(this);this._scrollerPaddingTop=this.scrollTarget===this?0:parseInt(e["padding-top"],10),this._isRTL=Boolean(e.direction==="rtl"),this._viewportWidth=this.$.items.offsetWidth,this._viewportHeight=this._scrollTargetHeight},_scrollHandler:function(){const e=Math.max(0,Math.min(this._maxScrollTop,this._scrollTop));let t=e-this._scrollPosition;const i=t>=0;if(this._scrollPosition=e,this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,Math.abs(t)>this._physicalSize&&this._physicalSize>0){t-=this._scrollOffset;const r=Math.round(t/this._physicalAverage);this._virtualStart=this._virtualStart+r,this._physicalStart=this._physicalStart+r,this._physicalTop=Math.floor(this._virtualStart)*this._physicalAverage,this._update()}else if(this._physicalCount>0){const{physicalTop:r,indexes:s}=this._getReusables(i);i?(this._physicalTop=r,this._virtualStart=this._virtualStart+s.length,this._physicalStart=this._physicalStart+s.length):(this._virtualStart=this._virtualStart-s.length,this._physicalStart=this._physicalStart-s.length),this._update(s,i?null:s),this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,0),ca)}},_getReusables:function(e){let t,i,r;const s=[],n=this._hiddenContentSize*this._ratio,o=this._virtualStart,a=this._virtualEnd,l=this._physicalCount;let u=this._physicalTop+this._scrollOffset;const h=this._physicalBottom+this._scrollOffset,f=this._scrollTop,y=this._scrollBottom;for(e?(t=this._physicalStart,i=f-u):(t=this._physicalEnd,i=h-y);r=this._physicalSizes[t],i-=r,!(s.length>=l||i<=n);)if(e){if(a+s.length+1>=this._virtualCount||u+r>=f-this._scrollOffset)break;s.push(t),u+=r,t=(t+1)%l}else{if(o-s.length<=0||u+this._physicalSize-r<=y)break;s.push(t),u-=r,t=t===0?l-1:t-1}return{indexes:s,physicalTop:u-this._scrollOffset}},_update:function(e,t){if(!(e&&e.length===0||this._physicalCount===0)){if(this._assignModels(e),this._updateMetrics(e),t)for(;t.length;){const i=t.pop();this._physicalTop-=this._physicalSizes[i]}this._positionItems(),this._updateScrollerSize()}},_isClientFull:function(){return this._scrollBottom!=0&&this._physicalBottom-1>=this._scrollBottom&&this._physicalTop<=this._scrollPosition},_increasePoolIfNeeded:function(e){const t=this._clamp(this._physicalCount+e,Qj,this._virtualCount-this._virtualStart)-this._physicalCount;let i=Math.round(.5*this._physicalCount);if(!(t<0)){if(t>0){const r=window.performance.now();[].push.apply(this._physicalItems,this._createPool(t));for(let s=0;s<t;s++)this._physicalSizes.push(0);this._physicalCount=this._physicalCount+t,this._physicalStart>this._physicalEnd&&this._isIndexRendered(this._focusedVirtualIndex)&&this._getPhysicalIndex(this._focusedVirtualIndex)<this._physicalEnd&&(this._physicalStart=this._physicalStart+t),this._update(),this._templateCost=(window.performance.now()-r)/t,i=Math.round(.5*this._physicalCount)}this._virtualEnd>=this._virtualCount-1||i===0||(this._isClientFull()?this._physicalSize<this._optPhysicalSize&&this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,this._clamp(Math.round(50/this._templateCost),1,i)),XW):this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,i),ca))}},_render:function(){if(this.isAttached&&this._isVisible)if(this._physicalCount!==0){const{physicalTop:e,indexes:t}=this._getReusables(!0);this._physicalTop=e,this._virtualStart=this._virtualStart+t.length,this._physicalStart=this._physicalStart+t.length,this._update(t),this._update(),this._increasePoolIfNeeded(0)}else this._virtualCount>0&&(this.updateViewportBoundaries(),this._increasePoolIfNeeded(Qj))},_itemsChanged:function(e){e.path==="items"&&(this._virtualStart=0,this._physicalTop=0,this._virtualCount=this.items?this.items.length:0,this._physicalIndexForKey={},this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this._physicalCount=this._physicalCount||0,this._physicalItems=this._physicalItems||[],this._physicalSizes=this._physicalSizes||[],this._physicalStart=0,this._scrollTop>this._scrollOffset&&this._resetScrollPosition(0),this._debounce("_render",this._render,ac))},_iterateItems:function(e,t){let i,r,s,n;if(arguments.length===2&&t){for(n=0;n<t.length;n++)if(i=t[n],r=this._computeVidx(i),(s=e.call(this,i,r))!=null)return s}else{for(i=this._physicalStart,r=this._virtualStart;i<this._physicalCount;i++,r++)if((s=e.call(this,i,r))!=null)return s;for(i=0;i<this._physicalStart;i++,r++)if((s=e.call(this,i,r))!=null)return s}},_computeVidx:function(e){return e>=this._physicalStart?this._virtualStart+(e-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+e},_updateMetrics:function(e){Xm();let t=0,i=0;const r=this._physicalAverageCount,s=this._physicalAverage;this._iterateItems(function(n){i+=this._physicalSizes[n],this._physicalSizes[n]=this._physicalItems[n].offsetHeight,t+=this._physicalSizes[n],this._physicalAverageCount+=this._physicalSizes[n]?1:0},e),this._physicalSize=this._physicalSize+t-i,this._physicalAverageCount!==r&&(this._physicalAverage=Math.round((s*r+t)/this._physicalAverageCount))},_positionItems:function(){this._adjustScrollPosition();let e=this._physicalTop;this._iterateItems(function(t){this.translate3d(0,e+"px",0,this._physicalItems[t]),e+=this._physicalSizes[t]})},_adjustScrollPosition:function(){const e=this._virtualStart===0?this._physicalTop:Math.min(this._scrollPosition+this._physicalTop,0);if(e!==0){this._physicalTop=this._physicalTop-e;const t=this._scrollTop;!OAe&&t>0&&this._resetScrollPosition(t-e)}},_resetScrollPosition:function(e){this.scrollTarget&&e>=0&&(this._scrollTop=e,this._scrollPosition=this._scrollTop)},_updateScrollerSize:function(e){this._estScrollHeight=this._physicalBottom+Math.max(this._virtualCount-this._physicalCount-this._virtualStart,0)*this._physicalAverage,((e=(e=e||this._scrollHeight===0)||this._scrollPosition>=this._estScrollHeight-this._physicalSize)||Math.abs(this._estScrollHeight-this._scrollHeight)>=this._viewportHeight)&&(this.$.items.style.height=this._estScrollHeight+"px",this._scrollHeight=this._estScrollHeight)},scrollToIndex:function(e){if(typeof e!="number"||e<0||e>this.items.length-1||(Xm(),this._physicalCount===0))return;e=this._clamp(e,0,this._virtualCount-1),(!this._isIndexRendered(e)||e>=this._maxVirtualStart)&&(this._virtualStart=e-1),this._assignModels(),this._updateMetrics(),this._physicalTop=Math.floor(this._virtualStart)*this._physicalAverage;let t=this._physicalStart,i=this._virtualStart,r=0;const s=this._hiddenContentSize;for(;i<e&&r<=s;)r+=this._physicalSizes[t],t=(t+1)%this._physicalCount,i++;this._updateScrollerSize(!0),this._positionItems(),this._resetScrollPosition(this._physicalTop+this._scrollOffset+r),this._increasePoolIfNeeded(0),this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null},_resetAverage:function(){this._physicalAverage=0,this._physicalAverageCount=0},_resizeHandler:function(){this._debounce("_render",function(){this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this.updateViewportBoundaries(),this._isVisible?(this.toggleScrollListener(!0),this._resetAverage(),this._render()):this.toggleScrollListener(!1)},ac)},_isIndexRendered:function(e){return e>=this._virtualStart&&e<=this._virtualEnd},_getPhysicalIndex:function(e){return(this._physicalStart+(e-this._virtualStart))%this._physicalCount},_clamp:function(e,t,i){return Math.min(i,Math.max(t,e))},_debounce:function(e,t,i){this._debouncers=this._debouncers||{},this._debouncers[e]=Di.debounce(this._debouncers[e],i,t.bind(this)),WI(this._debouncers[e])}});class PAe extends kAe{static get properties(){return{size:{type:Number,notify:!0},_vidxOffset:{type:Number,value:0}}}static get observers(){return["_effectiveSizeChanged(_effectiveSize)"]}connectedCallback(){super.connectedCallback(),this._scrollHandler()}_updateScrollerItem(){}_afterScroll(){}_getRowTarget(){}_createScrollerRows(){}_canPopulate(){}scrollToIndex(t){this._warnPrivateAPIAccess("scrollToIndex"),this._scrollingToIndex=!0,t=Math.min(Math.max(t,0),this._effectiveSize-1),this.$.table.scrollTop=t/this._effectiveSize*(this.$.table.scrollHeight-this.$.table.offsetHeight),this._scrollHandler(),this._accessIronListAPI(()=>this._maxScrollTop)&&this._virtualCount<this._effectiveSize&&this._adjustVirtualIndexOffset(1e6),this._accessIronListAPI(()=>super.scrollToIndex(t-this._vidxOffset)),this._scrollHandler();const i=Array.from(this.$.items.children).filter(r=>r.index===t)[0];if(i){const r=i.getBoundingClientRect().top-this.$.header.getBoundingClientRect().bottom;Math.abs(r)>1&&(this.$.table.scrollTop+=r,this._scrollHandler())}this._scrollingToIndex=!1}_effectiveSizeChanged(t){let i,r=0;this._iterateItems((s,n)=>{if(n===this._firstVisibleIndex){const o=this._physicalItems[s];i=o.index,r=o.getBoundingClientRect().top}}),this.items&&t<this.items.length&&(this._scrollTop=0),!Array.isArray(this.items)&&(this.items={length:Math.min(t,1e5)}),this._accessIronListAPI(()=>super._itemsChanged({path:"items"})),this._virtualCount=Math.min(this.items.length,t)||0,this._scrollTop===0&&(this._accessIronListAPI(()=>this._scrollToIndex(Math.min(t-1,i))),this._iterateItems(s=>{const n=this._physicalItems[s];if(n.index===i&&(this.$.table.scrollTop+=Math.round(n.getBoundingClientRect().top-r)),n.index===this._focusedItemIndex&&this._itemsFocusable&&this.$.items.contains(this.shadowRoot.activeElement)){const o=Array.from(this._itemsFocusable.parentElement.children).indexOf(this._itemsFocusable);n.children[o].focus()}})),this._assignModels(),requestAnimationFrame(()=>this._update()),this.__updateFooterPositioning()}_positionItems(){let t;this._adjustScrollPosition(),isNaN(this._physicalTop)&&(t=!0,this._physicalTop=0);let i=this._physicalTop;this._iterateItems(r=>{this._physicalItems[r].style.transform=`translateY(${i}px)`,i+=this._physicalSizes[r]}),t&&this._scrollToIndex(0)}_increasePoolIfNeeded(t){t===0&&this._scrollingToIndex||!this._canPopulate()||!this._effectiveSize||(this._initialPoolCreated?this._optPhysicalSize!==1/0&&(this._debounceIncreasePool=Di.debounce(this._debounceIncreasePool,ac,()=>{this._updateMetrics();const i=this._optPhysicalSize-this._physicalSize;let r=Math.ceil(i/this._physicalAverage);this._physicalCount+r>this._effectiveSize&&(r=Math.max(0,this._effectiveSize-this._physicalCount)),this._physicalSize&&r>0&&this._optPhysicalSize!==1/0&&(super._increasePoolIfNeeded(r),this.__reorderChildNodes())})):(this._initialPoolCreated=!0,super._increasePoolIfNeeded(25)))}__reorderChildNodes(){const t=Array.from(this.$.items.childNodes);t.reduce((i,r,s,n)=>{if(s===0||n[s-1].index===r.index-1)return i},!0)||t.sort((i,r)=>i.index-r.index).forEach(i=>this.$.items.appendChild(i))}_createPool(t){const i=document.createDocumentFragment(),r=this._createScrollerRows(t);r.forEach(n=>i.appendChild(n)),this._getRowTarget().appendChild(i);const s=this.querySelector("[slot]");if(s){const n=s.getAttribute("slot");s.setAttribute("slot","foo-bar"),s.setAttribute("slot",n)}return f2e(this,()=>this.notifyResize()),r}_assignModels(t){this._iterateItems((i,r)=>{const s=this._physicalItems[i];this._toggleAttribute("hidden",r>=this._effectiveSize,s),this._updateScrollerItem(s,r+(this._vidxOffset||0))},t)}_scrollHandler(){const t=this.$.table.scrollTop-this._scrollPosition;this._accessIronListAPI(super._scrollHandler);const i=this._vidxOffset;this._accessIronListAPI(()=>this._maxScrollTop)&&this._virtualCount<this._effectiveSize?this._adjustVirtualIndexOffset(t):this._vidxOffset=0,this._vidxOffset!==i&&this._update(),this._afterScroll()}_adjustVirtualIndexOffset(t){if(Math.abs(t)>1e4){if(this._noScale)return void(this._noScale=!1);const i=this.$.table.scrollTop/(this.$.table.scrollHeight-this.$.table.offsetHeight),r=i*this._effectiveSize;this._vidxOffset=Math.round(r-i*this._virtualCount)}else{const i=this._vidxOffset||0,r=1e3,s=100;this._scrollTop===0?(this._vidxOffset=0,i!==this._vidxOffset&&super.scrollToIndex(0)):this.firstVisibleIndex<r&&this._vidxOffset>0&&(this._vidxOffset-=Math.min(this._vidxOffset,s),i!==this._vidxOffset&&super.scrollToIndex(this.firstVisibleIndex+(i-this._vidxOffset)),this._noScale=!0);const n=this._effectiveSize-this._virtualCount;this._scrollTop>=this._maxScrollTop&&this._maxScrollTop>0?(this._vidxOffset=n,i!==this._vidxOffset&&super.scrollToIndex(this._virtualCount)):this.firstVisibleIndex>this._virtualCount-r&&this._vidxOffset<n&&(this._vidxOffset+=Math.min(n-this._vidxOffset,s),i!==this._vidxOffset&&super.scrollToIndex(this.firstVisibleIndex-(this._vidxOffset-i)),this._noScale=!0)}}_accessIronListAPI(t){this._warnPrivateAPIAccessAsyncEnabled=!1;const i=t.apply(this);return this._debouncerWarnPrivateAPIAccess=Di.debounce(this._debouncerWarnPrivateAPIAccess,ac,()=>this._warnPrivateAPIAccessAsyncEnabled=!0),i}_debounceRender(t,i){super._debounceRender(()=>this._accessIronListAPI(t),i)}_warnPrivateAPIAccess(t){this._warnPrivateAPIAccessAsyncEnabled&&console.warn(`Accessing private API (${t})!`)}_render(){this._accessIronListAPI(super._render)}_itemsChanged(){}get _firstVisibleIndex(){return this._accessIronListAPI(()=>super.firstVisibleIndex)}get _lastVisibleIndex(){return this._accessIronListAPI(()=>super.lastVisibleIndex)}_scrollToIndex(t){this._accessIronListAPI(()=>this.scrollToIndex(t))}get firstVisibleIndex(){return this._warnPrivateAPIAccess("firstVisibleIndex"),super.firstVisibleIndex}set firstVisibleIndex(t){this._warnPrivateAPIAccess("firstVisibleIndex"),super.firstVisibleIndex=t}get lastVisibleIndex(){return this._warnPrivateAPIAccess("lastVisibleIndex"),super.lastVisibleIndex}set lastVisibleIndex(t){this._warnPrivateAPIAccess("lastVisibleIndex"),super.lastVisibleIndex=t}updateViewportBoundaries(){this._warnPrivateAPIAccess("updateViewportBoundaries"),super.updateViewportBoundaries.apply(this,arguments)}_resizeHandler(){super._resizeHandler(),Xm()}}const LAe=e=>class extends e{static get observers(){return["_a11yUpdateGridSize(size, _columnTree, _columnTree.*)"]}_a11yGetHeaderRowCount(t){return t.filter(i=>i.some(r=>r._headerTemplate||r.headerRenderer||r.path||r.header)).length}_a11yGetFooterRowCount(t){return t.filter(i=>i.some(r=>r._headerTemplate||r.headerRenderer)).length}_a11yUpdateGridSize(t,i){if(t===void 0||i===void 0)return;const r=i[i.length-1];this.$.table.setAttribute("aria-rowcount",t+this._a11yGetHeaderRowCount(i)+this._a11yGetFooterRowCount(i)),this.$.table.setAttribute("aria-colcount",r&&r.length||0),this._a11yUpdateHeaderRows(),this._a11yUpdateFooterRows()}_a11yUpdateHeaderRows(){Array.from(this.$.header.children).forEach((t,i)=>t.setAttribute("aria-rowindex",i+1))}_a11yUpdateFooterRows(){Array.from(this.$.footer.children).forEach((t,i)=>t.setAttribute("aria-rowindex",this._a11yGetHeaderRowCount(this._columnTree)+this.size+i+1))}_a11yUpdateRowRowindex(t,i){t.setAttribute("aria-rowindex",i+this._a11yGetHeaderRowCount(this._columnTree)+1)}_a11yUpdateRowSelected(t,i){t.setAttribute("aria-selected",Boolean(i)),Array.from(t.children).forEach(r=>r.setAttribute("aria-selected",Boolean(i)))}_a11yUpdateRowLevel(t,i){t.setAttribute("aria-level",i+1)}_a11yUpdateRowDetailsOpened(t,i){Array.from(t.children).forEach(r=>{typeof i=="boolean"?r.setAttribute("aria-expanded",i):r.hasAttribute("aria-expanded")&&r.removeAttribute("aria-expanded")})}_a11ySetRowDetailsCell(t,i){Array.from(t.children).forEach(r=>{r!==i&&r.setAttribute("aria-controls",i.id)})}_a11yUpdateCellColspan(t,i){t.setAttribute("aria-colspan",Number(i))}_a11yUpdateSorters(){Array.from(this.querySelectorAll("vaadin-grid-sorter")).forEach(t=>{let i=t.parentNode;for(;i&&i.localName!=="vaadin-grid-cell-content";)i=i.parentNode;i&&i.assignedSlot&&i.assignedSlot.parentNode.setAttribute("aria-sort",{asc:"ascending",desc:"descending"}[String(t.direction)]||"none")})}},RAe=e=>class extends e{static get properties(){return{activeItem:{type:Object,notify:!0,value:null}}}ready(){super.ready(),this.$.scroller.addEventListener("click",this._onClick.bind(this)),this.addEventListener("cell-activate",this._activateItem.bind(this))}_activateItem(t){const i=t.detail.model,r=i?i.item:null;r&&(this.activeItem=this._itemsEqual(this.activeItem,r)?null:r)}_onClick(t){if(t.defaultPrevented)return;const i=t.composedPath(),r=i[i.indexOf(this.$.table)-3];if(!r||r.getAttribute("part").indexOf("details-cell")>-1)return;const s=r._content,n=this.getRootNode().activeElement;s.contains(n)||this._isFocusable(t.target)||this.dispatchEvent(new CustomEvent("cell-activate",{detail:{model:this.__getRowModel(r.parentElement)}}))}_isFocusable(t){return FAe(t)}},FAe=e=>{if(!e.parentNode)return!1;const t=Array.from(e.parentNode.querySelectorAll("[tabindex], button, input, select, textarea, object, iframe, label, a[href], area[href]")).filter(i=>i.getAttribute("part")!=="cell body-cell").indexOf(e)!==-1;return!e.disabled&&t},NAe=e=>class extends e{static get properties(){return{items:Array}}static get observers(){return["_itemsChanged(items, items.*, isAttached)"]}_itemsChanged(t,i,r){if(r){if(!Array.isArray(t))return t==null&&(this.size=0),void(this.dataProvider===this._arrayDataProvider&&(this.dataProvider=void 0));this.size=t.length,this.dataProvider=this.dataProvider||this._arrayDataProvider,this.clearCache(),this._ensureFirstPageLoaded()}}_arrayDataProvider(t,i){let r=(Array.isArray(this.items)?this.items:[]).slice(0);this._filters&&this._checkPaths(this._filters,"filtering",r)&&(r=this._filter(r)),this.size=r.length,t.sortOrders.length&&this._checkPaths(this._sorters,"sorting",r)&&(r=r.sort(this._multiSort.bind(this)));const s=t.page*t.pageSize,n=s+t.pageSize;i(r.slice(s,n),r.length)}_checkPaths(t,i,r){if(!r.length)return!1;let s=!0;for(let n in t){const o=t[n].path;if(!o||o.indexOf(".")===-1)continue;const a=o.replace(/\.[^.]*$/,"");Xp.get(a,r[0])===void 0&&(console.warn(`Path "${o}" used for ${i} does not exist in all of the items, ${i} is disabled.`),s=!1)}return s}_multiSort(t,i){return this._sorters.map(r=>r.direction==="asc"?this._compare(Xp.get(r.path,t),Xp.get(r.path,i)):r.direction==="desc"?this._compare(Xp.get(r.path,i),Xp.get(r.path,t)):0).reduce((r,s)=>r||s,0)}_normalizeEmptyValue(t){return[void 0,null].indexOf(t)>=0?"":isNaN(t)?t.toString():t}_compare(t,i){return(t=this._normalizeEmptyValue(t))<(i=this._normalizeEmptyValue(i))?-1:t>i?1:0}_filter(t){return t.filter(i=>this._filters.filter(r=>{const s=this._normalizeEmptyValue(Xp.get(r.path,i)),n=this._normalizeEmptyValue(r.value).toString().toLowerCase();return s.toString().toLowerCase().indexOf(n)===-1}).length===0)}},DAe=e=>class extends O_(e){ready(){super.ready();const t=this.$.scroller;YL(t,"track",this._onHeaderTrack.bind(this)),t.addEventListener("touchmove",i=>t.hasAttribute("column-resizing")&&i.preventDefault()),t.addEventListener("contextmenu",i=>i.target.getAttribute("part")=="resize-handle"&&i.preventDefault()),t.addEventListener("mousedown",i=>i.target.getAttribute("part")==="resize-handle"&&i.preventDefault())}_onHeaderTrack(t){const i=t.target;if(i.getAttribute("part")==="resize-handle"){let r=i.parentElement._column;for(this._toggleAttribute("column-resizing",!0,this.$.scroller);r.localName==="vaadin-grid-column-group";)r=Array.prototype.slice.call(r._childColumns,0).sort(function(o,a){return o._order-a._order}).filter(function(o){return!o.hidden}).pop();const s=Array.from(this.$.header.querySelectorAll('[part~="row"]:last-child [part~="cell"]')),n=s.filter(o=>o._column===r)[0];if(n.offsetWidth){const o=window.getComputedStyle(n),a=10+parseInt(o.paddingLeft)+parseInt(o.paddingRight)+parseInt(o.borderLeftWidth)+parseInt(o.borderRightWidth)+parseInt(o.marginLeft)+parseInt(o.marginRight),l=n.offsetWidth+(this.__isRTL?n.getBoundingClientRect().left-t.detail.x:t.detail.x-n.getBoundingClientRect().right);r.width=Math.max(a,l)+"px",r.flexGrow=0}s.sort(function(o,a){return o._column._order-a._column._order}).forEach(function(o,a,l){a<l.indexOf(n)&&(o._column.width=o.offsetWidth+"px",o._column.flexGrow=0)}),t.detail.state==="end"&&(this._toggleAttribute("column-resizing",!1,this.$.scroller),this.dispatchEvent(new CustomEvent("column-resize",{detail:{resizedColumn:r}}))),this._resizeHandler()}}},Xj=class WJ{constructor(t,i,r){this.grid=t,this.parentCache=i,this.parentItem=r,this.itemCaches={},this.items={},this.effectiveSize=0,this.size=0,this.pendingRequests={}}isLoading(){return Boolean(Object.keys(this.pendingRequests).length||Object.keys(this.itemCaches).filter(t=>this.itemCaches[t].isLoading())[0])}getItemForIndex(t){const{cache:i,scaledIndex:r}=this.getCacheAndIndex(t);return i.items[r]}updateSize(){this.effectiveSize=!this.parentItem||this.grid._isExpanded(this.parentItem)?this.size+Object.keys(this.itemCaches).reduce((t,i)=>{const r=this.itemCaches[i];return r.updateSize(),t+r.effectiveSize},0):0}ensureSubCacheForScaledIndex(t){if(!this.itemCaches[t]){const i=new WJ(this.grid,this,this.items[t]);this.itemCaches[t]=i,this.grid._loadPage(0,i)}}getCacheAndIndex(t){let i=t;const r=Object.keys(this.itemCaches);for(let s=0;s<r.length;s++){const n=Number(r[s]),o=this.itemCaches[n];if(i<=n)return{cache:this,scaledIndex:i};if(i<=n+o.effectiveSize)return o.getCacheAndIndex(i-n-1);i-=o.effectiveSize}return{cache:this,scaledIndex:i}}},jAe=e=>class extends e{static get properties(){return{pageSize:{type:Number,value:50,observer:"_pageSizeChanged"},dataProvider:{type:Object,notify:!0,observer:"_dataProviderChanged"},loading:{type:Boolean,notify:!0,readOnly:!0,reflectToAttribute:!0},_cache:{type:Object,value:function(){return new Xj(this)}},itemIdPath:{type:String,value:null},expandedItems:{type:Object,notify:!0,value:()=>[]}}}static get observers(){return["_sizeChanged(size)","_itemIdPathChanged(itemIdPath)","_expandedItemsChanged(expandedItems.*)"]}_sizeChanged(t){const i=t-this._cache.size;this._cache.size+=i,this._cache.effectiveSize+=i,this._effectiveSize=this._cache.effectiveSize,this._increasePoolIfNeeded(0),this._debounceIncreasePool&&this._debounceIncreasePool.flush()}_getItem(t,i){if(t>=this._effectiveSize)return;i.index=t;const{cache:r,scaledIndex:s}=this._cache.getCacheAndIndex(t),n=r.items[s];n?(this._toggleAttribute("loading",!1,i),this._updateItem(i,n),this._isExpanded(n)&&r.ensureSubCacheForScaledIndex(s)):(this._toggleAttribute("loading",!0,i),this._loadPage(this._getPageForIndex(s),r))}_expandedInstanceChangedCallback(t,i){t.item!==void 0&&(i?this.expandItem(t.item):this.collapseItem(t.item))}getItemId(t){return this.itemIdPath?this.get(this.itemIdPath,t):t}_isExpanded(t){return this.__expandedKeys.has(this.getItemId(t))}_expandedItemsChanged(){this.__cacheExpandedKeys(),this._cache.updateSize(),this._effectiveSize=this._cache.effectiveSize,this._assignModels()}_itemIdPathChanged(){this.__cacheExpandedKeys()}__cacheExpandedKeys(){this.expandedItems&&(this.__expandedKeys=new Set,this.expandedItems.forEach(t=>{this.__expandedKeys.add(this.getItemId(t))}))}expandItem(t){this._isExpanded(t)||this.push("expandedItems",t)}collapseItem(t){this._isExpanded(t)&&this.splice("expandedItems",this._getItemIndexInArray(t,this.expandedItems),1)}_getIndexLevel(t){let{cache:i}=this._cache.getCacheAndIndex(t),r=0;for(;i.parentCache;)i=i.parentCache,r++;return r}_canPopulate(){return Boolean(this._hasData&&this._columnTree)}_loadPage(t,i){if(!i.pendingRequests[t]&&this.dataProvider){this._setLoading(!0),i.pendingRequests[t]=!0;const r={page:t,pageSize:this.pageSize,sortOrders:this._mapSorters(),filters:this._mapFilters(),parentItem:i.parentItem};this._debounceIncreasePool&&this._debounceIncreasePool.flush(),this.dataProvider(r,(s,n)=>{n!==void 0?i.size=n:r.parentItem&&(i.size=s.length);const o=Array.from(this.$.items.children).map(a=>a._item);s.forEach((a,l)=>{const u=t*this.pageSize+l;i.items[u]=a,this._isExpanded(a)&&o.indexOf(a)>-1&&i.ensureSubCacheForScaledIndex(u)}),this._hasData=!0,delete i.pendingRequests[t],this._debouncerApplyCachedData=Di.debounce(this._debouncerApplyCachedData,la.after(0),()=>{this._setLoading(!1),this._cache.updateSize(),this._effectiveSize=this._cache.effectiveSize,Array.from(this.$.items.children).filter(a=>!a.hidden).forEach(a=>{this._cache.getItemForIndex(a.index)&&this._getItem(a.index,a)}),this._increasePoolIfNeeded(0),this.__scrollToPendingIndex()}),this._cache.isLoading()||this._debouncerApplyCachedData.flush(),this.__itemsReceived()})}}_getPageForIndex(t){return Math.floor(t/this.pageSize)}clearCache(){this._cache=new Xj(this),Array.from(this.$.items.children).forEach(t=>{Array.from(t.children).forEach(i=>{i._instance&&i._instance._setPendingProperty("item",{},!1)})}),this._cache.size=this.size||0,this._cache.updateSize(),this._hasData=!1,this._assignModels(),this._effectiveSize&&this._initialPoolCreated||this._loadPage(0,this._cache)}_pageSizeChanged(t,i){i!==void 0&&t!==i&&this.clearCache()}_checkSize(){this.size===void 0&&this._effectiveSize===0&&console.warn("The <vaadin-grid> needs the total number of items in order to display rows. Set the total number of items to the `size` property, or provide the total number of items in the second argument of the `dataProvider`\u2019s `callback` call.")}_dataProviderChanged(t,i){i!==void 0&&this.clearCache(),t&&this.items&&this.items.length&&this._scrollToIndex(this._firstVisibleIndex),this._ensureFirstPageLoaded(),this._debouncerCheckSize=Di.debounce(this._debouncerCheckSize,la.after(2e3),this._checkSize.bind(this)),this._scrollHandler()}_ensureFirstPageLoaded(){this._hasData||this._loadPage(0,this._cache)}_itemsEqual(t,i){return this.getItemId(t)===this.getItemId(i)}_getItemIndexInArray(t,i){let r=-1;return i.forEach((s,n)=>{this._itemsEqual(s,t)&&(r=n)}),r}scrollToIndex(t){super.scrollToIndex(t),isNaN(t)||!this._cache.isLoading()&&this.clientHeight||(this.__pendingScrollToIndex=t)}__scrollToPendingIndex(){if(this.__pendingScrollToIndex&&this.$.items.children.length){const t=this.__pendingScrollToIndex;delete this.__pendingScrollToIndex,this._debounceIncreasePool&&this._debounceIncreasePool.flush(),this.scrollToIndex(t)}}},zAe=e=>class extends e{ready(){super.ready(),this._addNodeObserver()}_hasColumnGroups(t){for(let i=0;i<t.length;i++)if(t[i].localName==="vaadin-grid-column-group")return!0;return!1}_getChildColumns(t){return Wh.getFlattenedNodes(t).filter(this._isColumnElement)}_flattenColumnGroups(t){return t.map(i=>i.localName==="vaadin-grid-column-group"?this._getChildColumns(i):[i]).reduce((i,r)=>i.concat(r),[])}_getColumnTree(){const t=[];for(let i=Wh.getFlattenedNodes(this).filter(this._isColumnElement);t.push(i),this._hasColumnGroups(i);)i=this._flattenColumnGroups(i);return t}_updateColumnTree(){const t=this._getColumnTree();this._arrayEquals(t,this._columnTree)||(this._columnTree=t)}_addNodeObserver(){this._observer=new Wh(this,t=>{const i=t.addedNodes.filter(s=>s.localName==="template"&&s.classList.contains("row-details"))[0];i&&this._rowDetailsTemplate!==i&&(this._rowDetailsTemplate=i);const r=s=>s.filter(this._isColumnElement).length>0;if(r(t.addedNodes)||r(t.removedNodes)){const s=t.removedNodes.flatMap(o=>o._allCells),n=o=>s.filter(a=>a._content.contains(o)).length;this.__removeSorters(this._sorters.filter(n)),this.__removeFilters(this._filters.filter(n)),this._updateColumnTree()}this._debouncerCheckImports=Di.debounce(this._debouncerCheckImports,la.after(2e3),this._checkImports.bind(this)),this._ensureFirstPageLoaded()})}_arrayEquals(t,i){if(!t||!i||t.length!=i.length)return!1;for(let r=0,s=t.length;r<s;r++)if(t[r]instanceof Array&&i[r]instanceof Array){if(!this._arrayEquals(t[r],i[r]))return!1}else if(t[r]!=i[r])return!1;return!0}_checkImports(){["vaadin-grid-column-group","vaadin-grid-filter","vaadin-grid-filter-column","vaadin-grid-tree-toggle","vaadin-grid-selection-column","vaadin-grid-sort-column","vaadin-grid-sorter"].forEach(t=>{const i=this.querySelector(t);!i||i instanceof cd||console.warn(`Make sure you have imported the required module for <${t}> element.`)})}_updateFirstAndLastColumn(){Array.from(this.shadowRoot.querySelectorAll("tr")).forEach(t=>this._updateFirstAndLastColumnForRow(t))}_updateFirstAndLastColumnForRow(t){Array.from(t.querySelectorAll('[part~="cell"]:not([part~="details-cell"])')).sort((i,r)=>i._column._order-r._column._order).forEach((i,r,s)=>{this._toggleAttribute("first-column",r===0,i),this._toggleAttribute("last-column",r===s.length-1,i)})}_isColumnElement(t){return t.nodeType===Node.ELEMENT_NODE&&/\bcolumn\b/.test(t.localName)}},VAe=e=>class extends e{getEventContext(t){const i={},r=t.composedPath(),s=r[r.indexOf(this.$.table)-3];return s&&(i.section=["body","header","footer","details"].filter(n=>s.getAttribute("part").indexOf(n)>-1)[0],s._column&&(i.column=s._column),i.section!=="body"&&i.section!=="details"||Object.assign(i,this.__getRowModel(s.parentElement))),i}},UAe=e=>class extends e{static get properties(){return{_filters:{type:Array,value:function(){return[]}}}}ready(){super.ready(),this.addEventListener("filter-changed",this._filterChanged.bind(this))}_filterChanged(t){t.stopPropagation(),this.__addFilter(t.target),this.__applyFilters()}__removeFilters(t){t.length!=0&&(this._filters=this._filters.filter(i=>t.indexOf(i)<0),this.__applyFilters())}__addFilter(t){this._filters.indexOf(t)===-1&&this._filters.push(t)}__applyFilters(){this.dataProvider&&this.isAttached&&this.clearCache()}_mapFilters(){return this._filters.map(t=>({path:t.path,value:t.value}))}};class Ix extends cd{static get is(){return"vaadin-grid-templatizer"}static get properties(){return{dataHost:Object,template:Object,_templateInstances:{type:Array,value:function(){return[]}},_parentPathValues:{value:function(){return{}}},_grid:Object}}static get observers(){return["_templateInstancesChanged(_templateInstances.*, _parentPathValues.*)"]}constructor(){super(),this._instanceProps={detailsOpened:!0,index:!0,item:!0,selected:!0,expanded:!0,level:!0}}createInstance(){this._ensureTemplatized();const t=new this._TemplateClass({});return this.addInstance(t),t}addInstance(t){this._templateInstances.indexOf(t)===-1&&(this._templateInstances.push(t),requestAnimationFrame(()=>this.notifyPath("_templateInstances.*",this._templateInstances)))}removeInstance(t){const i=this._templateInstances.indexOf(t);this.splice("_templateInstances",i,1)}_ensureTemplatized(){this._TemplateClass||(this._TemplateClass=qv(this.template,this,{instanceProps:this._instanceProps,parentModel:!0,forwardHostProp:function(t,i){this._forwardParentProp(t,i),this._templateInstances&&this._templateInstances.forEach(r=>r.notifyPath(t,i))},notifyInstanceProp:function(t,i,r){if(i==="index"||i==="item")return;const s=`__${i}__`;if(t[s]===r)return;t[s]=r;const n=Array.from(this._grid.$.items.children).filter(l=>this._grid._itemsEqual(l._item,t.item))[0];n&&Array.from(n.children).forEach(l=>{l._instance&&(l._instance[s]=r,l._instance.notifyPath(i,r))});const o="item.";if(Array.isArray(this._grid.items)&&i.indexOf(o)===0){const l=this._grid.items.indexOf(t.item),u=i.slice(o.length);this._grid.notifyPath(`items.${l}.${u}`,r)}const a=`_${i}InstanceChangedCallback`;this._grid&&this._grid[a]&&this._grid[a](t,r)}}))}_forwardParentProp(t,i){this._parentPathValues[t]=i,this._templateInstances.forEach(r=>r.notifyPath(t,i))}_templateInstancesChanged(t){let i,r;if(t.path==="_templateInstances")i=0,r=this._templateInstances.length;else{if(t.path!=="_templateInstances.splices")return;i=t.value.index,r=t.value.addedCount}Object.keys(this._parentPathValues||{}).forEach(s=>{for(let n=i;n<i+r;n++)this._templateInstances[n].set(s,this._parentPathValues[s])})}}customElements.define(Ix.is,Ix);const BAe=e=>class extends e{static get properties(){return{detailsOpenedItems:{type:Array,value:function(){return[]}},_rowDetailsTemplate:Object,rowDetailsRenderer:Function,_detailsCells:{type:Array}}}static get observers(){return["_detailsOpenedItemsChanged(detailsOpenedItems.*, _rowDetailsTemplate, rowDetailsRenderer)","_rowDetailsTemplateOrRendererChanged(_rowDetailsTemplate, rowDetailsRenderer)"]}_rowDetailsTemplateOrRendererChanged(t,i){if(t&&i)throw new Error("You should only use either a renderer or a template for row details");if(t||i){if(t&&!t.templatizer){const r=new Ix;r._grid=this,r.dataHost=this.dataHost,r.template=t,t.templatizer=r}this._columnTree&&Array.from(this.$.items.children).forEach(r=>{r.querySelector("[part~=details-cell]")||(this._updateRow(r,this._columnTree[this._columnTree.length-1]),this._a11yUpdateRowDetailsOpened(r,!1)),delete r.querySelector("[part~=details-cell]")._instance}),this.detailsOpenedItems.length&&(Array.from(this.$.items.children).forEach(this._toggleDetailsCell,this),this._update())}}_detailsOpenedItemsChanged(t){t.path!=="detailsOpenedItems.length"&&t.value&&Array.from(this.$.items.children).forEach(i=>{this._toggleDetailsCell(i,i._item),this._a11yUpdateRowDetailsOpened(i,this._isDetailsOpened(i._item)),this._toggleAttribute("details-opened",this._isDetailsOpened(i._item),i)})}_configureDetailsCell(t){t.setAttribute("part","cell details-cell"),this._toggleAttribute("frozen",!0,t)}_toggleDetailsCell(t,i){const r=t.querySelector('[part~="details-cell"]');if(!r)return;const s=!this._isDetailsOpened(i),n=!!r.hidden!==s;(r._instance||r._renderer)&&r.hidden===s||(r.hidden=s,s?t.style.removeProperty("padding-bottom"):(this.rowDetailsRenderer?(r._renderer=this.rowDetailsRenderer,r._renderer.call(this,r._content,this,{index:t.index,item:i})):this._rowDetailsTemplate&&!r._instance&&(r._instance=this._rowDetailsTemplate.templatizer.createInstance(),r._content.innerHTML="",r._content.appendChild(r._instance.root),this._updateItem(t,i)),Xm(),t.style.setProperty("padding-bottom",`${r.offsetHeight}px`),requestAnimationFrame(()=>this.notifyResize()))),n&&(this._updateMetrics(),this._positionItems())}_updateDetailsCellHeights(){Array.from(this.$.items.querySelectorAll('[part~="details-cell"]:not([hidden])')).forEach(t=>{t.parentElement.style.setProperty("padding-bottom",`${t.offsetHeight}px`)})}_isDetailsOpened(t){return this.detailsOpenedItems&&this._getItemIndexInArray(t,this.detailsOpenedItems)!==-1}openItemDetails(t){this._isDetailsOpened(t)||this.push("detailsOpenedItems",t)}closeItemDetails(t){this._isDetailsOpened(t)&&this.splice("detailsOpenedItems",this._getItemIndexInArray(t,this.detailsOpenedItems),1)}_detailsOpenedInstanceChangedCallback(t,i){i?this.openItemDetails(t.item):this.closeItemDetails(t.item)}},TC={SCROLLING:500,IGNORE_WHEEL:500},qAe=e=>class extends e{static get properties(){return{_frozenCells:{type:Array,value:()=>[]},_rowWithFocusedElement:Element,_deltaYAcc:{type:Number,value:0},_useSticky:{type:Boolean,value:window.CSS&&window.CSS.supports&&(window.CSS.supports("position","sticky")||window.CSS.supports("position","-webkit-sticky"))}}}static get observers(){return["_scrollViewportHeightUpdated(_viewportHeight)"]}set _scrollTop(t){this.$.table.scrollTop=t}get _scrollTop(){return this.$.table.scrollTop}constructor(){super(),this._scrollLineHeight=this._getScrollLineHeight()}_getScrollLineHeight(){const t=document.createElement("div");t.style.fontSize="initial",t.style.display="none",document.body.appendChild(t);const i=window.getComputedStyle(t).fontSize;return document.body.removeChild(t),i?window.parseInt(i):void 0}_scrollViewportHeightUpdated(t){this._scrollPageHeight=t-this.$.header.clientHeight-this.$.footer.clientHeight-this._scrollLineHeight}ready(){super.ready(),this.$.outerscroller=document.createElement("div"),this.scrollTarget=this.$.table,this.addEventListener("wheel",this._onWheel),this.$.items.addEventListener("focusin",t=>{const i=t.composedPath().indexOf(this.$.items);this._rowWithFocusedElement=t.composedPath()[i-1]}),this.$.items.addEventListener("focusout",()=>this._rowWithFocusedElement=void 0),this.scrollTarget.addEventListener("mousedown",()=>this.__mouseDown=!0),this.scrollTarget.addEventListener("mouseup",()=>{this.__mouseDown=!1,this.__pendingReorder&&(this.__pendingReorder=!1,setTimeout(()=>this._reorderRows(),TC.SCROLLING))})}scrollToIndex(t){this._accessIronListAPI(()=>super.scrollToIndex(t))}_onWheel(t){if(t.ctrlKey||this._hasScrolledAncestor(t.target,t.deltaX,t.deltaY))return;const i=this.$.table;let r=t.deltaY;if(t.deltaMode===WheelEvent.DOM_DELTA_LINE?r*=this._scrollLineHeight:t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._scrollPageHeight),this._wheelAnimationFrame)return this._deltaYAcc+=r,void t.preventDefault();r+=this._deltaYAcc,this._deltaYAcc=0,this._wheelAnimationFrame=!0,this._debouncerWheelAnimationFrame=Di.debounce(this._debouncerWheelAnimationFrame,ac,()=>this._wheelAnimationFrame=!1);const s=Math.abs(t.deltaX)+Math.abs(r);this._canScroll(i,t.deltaX,r)?(t.preventDefault(),i.scrollTop+=r,i.scrollLeft+=t.deltaX,this._scrollHandler(),this._hasResidualMomentum=!0,this._ignoreNewWheel=!0,this._debouncerIgnoreNewWheel=Di.debounce(this._debouncerIgnoreNewWheel,la.after(TC.IGNORE_WHEEL),()=>this._ignoreNewWheel=!1)):this._hasResidualMomentum&&s<=this._previousMomentum||this._ignoreNewWheel?t.preventDefault():s>this._previousMomentum&&(this._hasResidualMomentum=!1),this._previousMomentum=s}_hasScrolledAncestor(t,i,r){return t.localName!=="vaadin-grid-cell-content"&&(!(!this._canScroll(t,i,r)||["auto","scroll"].indexOf(getComputedStyle(t).overflow)===-1)||(t!==this&&t.parentElement?this._hasScrolledAncestor(t.parentElement,i,r):void 0))}_canScroll(t,i,r){return r>0&&t.scrollTop<t.scrollHeight-t.offsetHeight||r<0&&t.scrollTop>0||i>0&&t.scrollLeft<t.scrollWidth-t.offsetWidth||i<0&&t.scrollLeft>0}_scheduleScrolling(){this._scrollingFrame||(this._scrollingFrame=requestAnimationFrame(()=>this._toggleAttribute("scrolling",!0,this.$.scroller))),this._debounceScrolling=Di.debounce(this._debounceScrolling,la.after(TC.SCROLLING),()=>{cancelAnimationFrame(this._scrollingFrame),delete this._scrollingFrame,this._toggleAttribute("scrolling",!1,this.$.scroller),this._reorderRows()})}_afterScroll(){this._translateStationaryElements(),this.hasAttribute("reordering")||this._scheduleScrolling(),this._updateOverflow()}_updateOverflow(){let t="";const i=this.$.table;i.scrollTop<i.scrollHeight-i.clientHeight&&(t+=" bottom"),i.scrollTop>0&&(t+=" top"),i.scrollLeft<i.scrollWidth-i.clientWidth&&(t+=" right"),i.scrollLeft>0&&(t+=" left"),this._debounceOverflow=Di.debounce(this._debounceOverflow,ac,()=>{const r=t.trim();r.length>0&&this.getAttribute("overflow")!==r?this.setAttribute("overflow",r):r.length==0&&this.hasAttribute("overflow")&&this.removeAttribute("overflow")})}_reorderRows(){if(this.__mouseDown)return void(this.__pendingReorder=!0);const t=this.$.items,i=t.querySelectorAll("tr");if(!i.length)return;const r=this._virtualStart+this._vidxOffset,s=this._rowWithFocusedElement||Array.from(i).filter(a=>!a.hidden)[0];if(!s)return;const n=s.index-r,o=Array.from(i).indexOf(s)-n;if(o>0)for(let a=0;a<o;a++)t.appendChild(i[a]);else if(o<0)for(let a=i.length+o;a<i.length;a++)t.insertBefore(i[a],i[0]);if(this._safari){const{transform:a}=this.$.header.style;this.$.header.style.transform="",setTimeout(()=>this.$.header.style.transform=a)}}_frozenCellsChanged(){this._debouncerCacheElements=Di.debounce(this._debouncerCacheElements,ca,()=>{Array.from(this.shadowRoot.querySelectorAll('[part~="cell"]')).forEach(function(t){t.style.transform=""}),this._frozenCells=Array.prototype.slice.call(this.$.table.querySelectorAll("[frozen]")),this._updateScrollerMeasurements(),this._translateStationaryElements()}),this._updateLastFrozen()}_updateScrollerMeasurements(){this._frozenCells.length>0&&this.__isRTL&&(this.__scrollerMetrics={scrollWidth:this.$.table.scrollWidth,clientWidth:this.$.table.clientWidth})}_updateLastFrozen(){if(!this._columnTree)return;const t=this._columnTree[this._columnTree.length-1].slice(0);t.sort((r,s)=>r._order-s._order);const i=t.reduce((r,s,n)=>(s._lastFrozen=!1,s.frozen&&!s.hidden?n:r),void 0);i!==void 0&&(t[i]._lastFrozen=!0)}_translateStationaryElements(){const t=Math.max(0,this._scrollLeft),i=Math.max(0,this._scrollTop);let r=0,s=0,n=0;if(this._useSticky||(r=t,s=i,n=this.$.table.clientHeight-this.$.footer.offsetHeight-this.$.footer.offsetTop),this.$.header.style.transform=this._getTranslate(-t+r,s),this.$.footer.style.transform=this._getTranslate(-t+r,s+n),this.$.items.style.transform=this._getTranslate(-t+r,0),this._frozenCells.length>0){const o=this.__isRTL?this.__getNormalizedScrollLeft(this.$.table)+this.__scrollerMetrics.clientWidth-this.__scrollerMetrics.scrollWidth:this._scrollLeft,a=this._getTranslate(o,0);for(let l=0;l<this._frozenCells.length;l++)this._frozenCells[l].style.transform=a}}_getTranslate(t,i){return`translate(${t}px, ${i}px)`}},GAe=e=>class extends e{static get properties(){return{selectedItems:{type:Object,notify:!0,value:()=>[]}}}static get observers(){return["_selectedItemsChanged(selectedItems.*)"]}_isSelected(t){return this.selectedItems&&this._getItemIndexInArray(t,this.selectedItems)>-1}selectItem(t){this._isSelected(t)||this.push("selectedItems",t)}deselectItem(t){const i=this._getItemIndexInArray(t,this.selectedItems);i>-1&&this.splice("selectedItems",i,1)}_toggleItem(t){this._getItemIndexInArray(t,this.selectedItems)===-1?this.selectItem(t):this.deselectItem(t)}_selectedItemsChanged(t){!this.$.items.children.length||t.path!=="selectedItems"&&t.path!=="selectedItems.splices"||Array.from(this.$.items.children).forEach(i=>{this._updateItem(i,i._item)})}_selectedInstanceChangedCallback(t,i){i?this.selectItem(t.item):this.deselectItem(t.item)}},HAe=e=>class extends e{static get properties(){return{multiSort:{type:Boolean,value:!1},_sorters:{type:Array,value:function(){return[]}},_previousSorters:{type:Array,value:function(){return[]}}}}ready(){super.ready(),this.addEventListener("sorter-changed",this._onSorterChanged)}_onSorterChanged(t){const i=t.target;t.stopPropagation(),this.__updateSorter(i),this.__applySorters()}__removeSorters(t){t.length!=0&&(this._sorters=this._sorters.filter(i=>t.indexOf(i)<0),this.multiSort&&this.__updateSortOrders(),this.__applySorters())}__updateSortOrders(){this._sorters.forEach((t,i)=>t._order=this._sorters.length>1?i:null,this)}__updateSorter(t){if(t.direction||this._sorters.indexOf(t)!==-1){if(t._order=null,this.multiSort)this._removeArrayItem(this._sorters,t),t.direction&&this._sorters.unshift(t),this.__updateSortOrders();else if(t.direction){const i=this._sorters.filter(r=>r!=t);this._sorters=[t],i.forEach(r=>{r._order=null,r.direction=null})}}}__applySorters(){this.dataProvider&&this.isAttached&&JSON.stringify(this._previousSorters)!==JSON.stringify(this._mapSorters())&&this.clearCache(),this._a11yUpdateSorters(),this._previousSorters=this._mapSorters()}_mapSorters(){return this._sorters.map(t=>({path:t.path,direction:t.direction}))}_removeArrayItem(t,i){const r=t.indexOf(i);r>-1&&t.splice(r,1)}},WAe=e=>class extends e{static get properties(){return{cellClassNameGenerator:Function}}static get observers(){return["__cellClassNameGeneratorChanged(cellClassNameGenerator)"]}__cellClassNameGeneratorChanged(){this.generateCellClassNames()}generateCellClassNames(){Array.from(this.$.items.children).filter(t=>!t.hidden).forEach(t=>this._generateCellClassNames(t,this.__getRowModel(t)))}_generateCellClassNames(t,i){Array.from(t.children).forEach(r=>{if(r.__generatedClasses&&r.__generatedClasses.forEach(s=>r.classList.remove(s)),this.cellClassNameGenerator){const s=this.cellClassNameGenerator(r._column,i);r.__generatedClasses=s&&s.split(" ").filter(n=>n.length>0),r.__generatedClasses&&r.__generatedClasses.forEach(n=>r.classList.add(n))}})}},fg={BETWEEN:"between",ON_TOP:"on-top",ON_TOP_OR_BETWEEN:"on-top-or-between",ON_GRID:"on-grid"},zc={ON_TOP:"on-top",ABOVE:"above",BELOW:"below",EMPTY:"empty"},JAe=e=>class extends e{static get properties(){return{dropMode:String,rowsDraggable:Boolean,dragFilter:Function,dropFilter:Function,__dndAutoScrollThreshold:{value:50}}}static get observers(){return["_dragDropAccessChanged(rowsDraggable, dropMode, dragFilter, dropFilter)"]}ready(){super.ready(),this.$.table.addEventListener("dragstart",this._onDragStart.bind(this)),this.$.table.addEventListener("dragend",this._onDragEnd.bind(this)),this.$.table.addEventListener("dragover",this._onDragOver.bind(this)),this.$.table.addEventListener("dragleave",this._onDragLeave.bind(this)),this.$.table.addEventListener("drop",this._onDrop.bind(this)),this.$.table.addEventListener("dragenter",t=>{this.dropMode&&(t.preventDefault(),t.stopPropagation())})}_onDragStart(t){if(this.rowsDraggable){let i=t.target;if(i.localName==="vaadin-grid-cell-content"&&(i=i.assignedSlot.parentNode.parentNode),i.parentNode!==this.$.items)return;if(t.stopPropagation(),this._toggleAttribute("dragging-rows",!0,this),this._safari){const o=i.style.transform;i.style.top=/translateY\((.*)\)/.exec(o)[1],i.style.transform="none",requestAnimationFrame(()=>{i.style.top="",i.style.transform=o})}const r=i.getBoundingClientRect();this._ios?t.dataTransfer.setDragImage(i):t.dataTransfer.setDragImage(i,t.clientX-r.left,t.clientY-r.top);let s=[i];this._isSelected(i._item)&&(s=this.__getViewportRows().filter(o=>this._isSelected(o._item)).filter(o=>!this.dragFilter||this.dragFilter(this.__getRowModel(o)))),t.dataTransfer.setData("text",this.__formatDefaultTransferData(s)),i.setAttribute("dragstart",s.length>1?s.length:""),this.updateStyles({"--_grid-drag-start-x":t.clientX-r.left+20+"px","--_grid-drag-start-y":t.clientY-r.top+10+"px"}),requestAnimationFrame(()=>{i.removeAttribute("dragstart"),this.updateStyles({"--_grid-drag-start-x":"","--_grid-drag-start-y":""})});const n=new CustomEvent("grid-dragstart",{detail:{draggedItems:s.map(o=>o._item),setDragData:(o,a)=>t.dataTransfer.setData(o,a),setDraggedItemsCount:o=>i.setAttribute("dragstart",o)}});n.originalEvent=t,this.dispatchEvent(n)}}_onDragEnd(t){this._toggleAttribute("dragging-rows",!1,this),t.stopPropagation();const i=new CustomEvent("grid-dragend");i.originalEvent=t,this.dispatchEvent(i)}_onDragLeave(t){t.stopPropagation(),this._clearDragStyles()}_onDragOver(t){if(this.dropMode){if(this._dropLocation=void 0,this._dragOverItem=void 0,this.__dndAutoScroll(t.clientY))return void this._clearDragStyles();let i=t.composedPath().filter(r=>r.localName==="tr")[0];if(this._effectiveSize&&this.dropMode!==fg.ON_GRID)if(i&&i.parentNode===this.$.items){const r=i.getBoundingClientRect();if(this._dropLocation=zc.ON_TOP,this.dropMode===fg.BETWEEN){const s=t.clientY-r.top<r.bottom-t.clientY;this._dropLocation=s?zc.ABOVE:zc.BELOW}else this.dropMode===fg.ON_TOP_OR_BETWEEN&&(t.clientY-r.top<r.height/3?this._dropLocation=zc.ABOVE:t.clientY-r.top>r.height/3*2&&(this._dropLocation=zc.BELOW))}else{if(i||this.dropMode!==fg.BETWEEN&&this.dropMode!==fg.ON_TOP_OR_BETWEEN)return;i=Array.from(this.$.items.children).filter(r=>!r.hidden).pop(),this._dropLocation=zc.BELOW}else this._dropLocation=zc.EMPTY;if(i&&i.hasAttribute("drop-disabled"))return void(this._dropLocation=void 0);t.stopPropagation(),t.preventDefault(),this._dropLocation===zc.EMPTY?this._toggleAttribute("dragover",!0,this):i?(this._dragOverItem=i._item,i.getAttribute("dragover")!==this._dropLocation&&i.setAttribute("dragover",this._dropLocation)):this._clearDragStyles()}}__dndAutoScroll(t){if(this.__dndAutoScrolling)return!0;const i=this.$.header.getBoundingClientRect().bottom,r=this.$.footer.getBoundingClientRect().top,s=i-t+this.__dndAutoScrollThreshold,n=t-r+this.__dndAutoScrollThreshold;let o=0;if(n>0?o=2*n:s>0&&(o=2*-s),o){const a=this.$.table.scrollTop;if(this.$.table.scrollTop+=o,a!==this.$.table.scrollTop)return this.__dndAutoScrolling=!0,setTimeout(()=>this.__dndAutoScrolling=!1,20),this._scrollHandler(),!0}}__getViewportRows(){const t=this.$.header.getBoundingClientRect().bottom,i=this.$.footer.getBoundingClientRect().top;return Array.from(this.$.items.children).filter(r=>{const s=r.getBoundingClientRect();return s.bottom>t&&s.top<i})}_clearDragStyles(){this.removeAttribute("dragover"),Array.from(this.$.items.children).forEach(t=>t.removeAttribute("dragover"))}_onDrop(t){if(this.dropMode){t.stopPropagation(),t.preventDefault();const i=t.dataTransfer.types&&Array.from(t.dataTransfer.types).map(s=>({type:s,data:t.dataTransfer.getData(s)}));this._clearDragStyles();const r=new CustomEvent("grid-drop",{bubbles:t.bubbles,cancelable:t.cancelable,detail:{dropTargetItem:this._dragOverItem,dropLocation:this._dropLocation,dragData:i}});r.originalEvent=t,this.dispatchEvent(r)}}__formatDefaultTransferData(t){return t.map(i=>Array.from(i.children).filter(r=>!r.hidden&&r.getAttribute("part").indexOf("details-cell")===-1).sort((r,s)=>r._column._order>s._column._order?1:-1).map(r=>r._content.textContent.trim()).filter(r=>r).join("	")).join(`
`)}_dragDropAccessChanged(){this.filterDragAndDrop()}filterDragAndDrop(){Array.from(this.$.items.children).filter(t=>!t.hidden).forEach(t=>{this._filterDragAndDrop(t,this.__getRowModel(t))})}_filterDragAndDrop(t,i){const r=!this.rowsDraggable||this.dragFilter&&!this.dragFilter(i),s=!this.dropMode||this.dropFilter&&!this.dropFilter(i);Array.from(t.children).map(n=>n._content).forEach(n=>{r?n.removeAttribute("draggable"):n.setAttribute("draggable",!0)}),this._toggleAttribute("drag-disabled",r,t),this._toggleAttribute("drop-disabled",s,t)}},ZAe=e=>class extends e{static get properties(){return{_headerFocusable:{type:Object,observer:"_focusableChanged"},_itemsFocusable:{type:Object,observer:"_focusableChanged"},_footerFocusable:{type:Object,observer:"_focusableChanged"},_navigatingIsHidden:Boolean,_focusedItemIndex:{type:Number,value:0},_focusedColumnOrder:Number}}ready(){super.ready(),this._ios||this._android||(this.addEventListener("keydown",this._onKeyDown),this.addEventListener("keyup",this._onKeyUp),this.addEventListener("focusin",this._onFocusIn),this.addEventListener("focusout",this._onFocusOut),this.$.table.addEventListener("focusin",this._onCellFocusIn.bind(this)),this.$.table.addEventListener("focusout",this._onCellFocusOut.bind(this)),this.addEventListener("mousedown",()=>{this._toggleAttribute("navigating",!1,this),this._isMousedown=!0}),this.addEventListener("mouseup",()=>this._isMousedown=!1))}_focusableChanged(t,i){i&&i.setAttribute("tabindex","-1"),t&&t.setAttribute("tabindex","0")}_onKeyDown(t){const i=t.key;let r;switch(i){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"PageUp":case"PageDown":case"Home":case"End":r="Navigation";break;case"Enter":case"Escape":case"F2":r="Interaction";break;case"Tab":r="Tab";break;case" ":r="Space"}this._detectInteracting(t),this.hasAttribute("interacting")&&r!=="Interaction"&&(r=void 0),r&&this[`_on${r}KeyDown`](t,i)}_ensureScrolledToIndex(t){Array.from(this.$.items.children).filter(i=>i.index===t)[0]||this._scrollToIndex(t)}_onNavigationKeyDown(t,i){function r(W){return Array.prototype.indexOf.call(W.parentNode.children,W)}this._scrollHandler(),t.preventDefault();const s=this._lastVisibleIndex-this._firstVisibleIndex-1;let n=0,o=0;switch(i){case"ArrowRight":n=this.__isRTL?-1:1;break;case"ArrowLeft":n=this.__isRTL?1:-1;break;case"Home":n=-1/0,t.ctrlKey&&(o=-1/0);break;case"End":n=1/0,t.ctrlKey&&(o=1/0);break;case"ArrowDown":o=1;break;case"ArrowUp":o=-1;break;case"PageDown":o=s;break;case"PageUp":o=-s}const a=t.composedPath()[0],l=r(a),u=this._elementMatches(a,'[part~="details-cell"]'),h=a.parentNode,f=h.parentNode,y=(f===this.$.items?this._effectiveSize:f.children.length)-1,g=f===this.$.items?this._focusedItemIndex!==void 0?this._focusedItemIndex:h.index:r(h);let b=Math.max(0,Math.min(g+o,y)),w=!1;if(f===this.$.items){const W=h._item,oe=this._cache.getItemForIndex(b);w=u?o===0:o===1&&this._isDetailsOpened(W)||o===-1&&b!==g&&this._isDetailsOpened(oe),w!==u&&(o===1&&w||o===-1&&!w)&&(b=g)}if(f!==this.$.items){if(b>g)for(;b<y&&f.children[b].hidden;)b++;else if(b<g)for(;b>0&&f.children[b].hidden;)b--}this._focusedColumnOrder===void 0&&(this._focusedColumnOrder=u?0:this._getColumns(f,g).filter(W=>!W.hidden)[l]._order);const x=this._getColumns(f,b).filter(W=>!W.hidden),T=x.map(W=>W._order).sort((W,oe)=>W-oe),M=T.length-1,F=T.indexOf(T.slice(0).sort((W,oe)=>Math.abs(W-this._focusedColumnOrder)-Math.abs(oe-this._focusedColumnOrder))[0]),D=o===0&&u?F:Math.max(0,Math.min(F+n,M));D!==F&&(this._focusedColumnOrder=void 0),f===this.$.items&&this._ensureScrolledToIndex(b),this._toggleAttribute("navigating",!0,this);const R=x.reduce((W,oe,te)=>(W[oe._order]=te,W),{})[T[D]],_=f===this.$.items?Array.from(f.children).filter(W=>W.index===b)[0]:f.children[b];if(!_)return;const q=w?Array.from(_.children).filter(W=>this._elementMatches(W,'[part~="details-cell"]'))[0]:_.children[R];if(this._scrollHorizontallyToCell(q),f===this.$.items&&(this._focusedItemIndex=b),f===this.$.items){const W=q.getBoundingClientRect(),oe=this.$.footer.getBoundingClientRect().top,te=this.$.header.getBoundingClientRect().bottom;W.bottom>oe?(this.$.table.scrollTop+=W.bottom-oe,this._scrollHandler()):W.top<te&&(this.$.table.scrollTop-=te-W.top,this._scrollHandler())}q.focus()}_parseEventPath(t){const i=t.indexOf(this.$.table);return{rowGroup:t[i-1],row:t[i-2],cell:t[i-3]}}_onInteractionKeyDown(t,i){const r=t.composedPath()[0],s=r.localName==="input"&&!/^(button|checkbox|color|file|image|radio|range|reset|submit)$/i.test(r.type);let n;switch(i){case"Enter":n=!this.hasAttribute("interacting")||!s;break;case"Escape":n=!1;break;case"F2":n=!this.hasAttribute("interacting")}const{cell:o}=this._parseEventPath(t.composedPath());if(this.hasAttribute("interacting")!==n)if(n){const a=o._content.querySelector("[focus-target]")||o._content.firstElementChild;a&&(t.preventDefault(),a.focus(),this._toggleAttribute("interacting",!0,this),this._toggleAttribute("navigating",!1,this))}else t.preventDefault(),this._focusedColumnOrder=void 0,o.focus(),this._toggleAttribute("interacting",!1,this),this._toggleAttribute("navigating",!0,this)}_predictFocusStepTarget(t,i){const r=[this.$.table,this._headerFocusable,this._itemsFocusable,this._footerFocusable,this.$.focusexit];let s=r.indexOf(t);for(s+=i;s>=0&&s<=r.length-1&&(!r[s]||r[s].parentNode.hidden);)s+=i;return r[s]}_onTabKeyDown(t){const i=this._predictFocusStepTarget(t.composedPath()[0],t.shiftKey?-1:1);if(i===this.$.table)this.$.table.focus();else if(i===this.$.focusexit)this.$.focusexit.focus();else if(i===this._itemsFocusable){let r=i;const s=this._itemsFocusable.parentNode;if(this._ensureScrolledToIndex(this._focusedItemIndex),s.index!==this._focusedItemIndex){const n=Array.from(s.children).indexOf(this._itemsFocusable),o=Array.from(this.$.items.children).filter(a=>a.index===this._focusedItemIndex)[0];o&&(r=o.children[n])}t.preventDefault(),r.focus()}else t.preventDefault(),i.focus();this._toggleAttribute("navigating",!0,this)}_onSpaceKeyDown(t){t.preventDefault();const i=t.composedPath()[0];i._content&&i._content.firstElementChild||this.dispatchEvent(new CustomEvent("cell-activate",{detail:{model:this.__getRowModel(i.parentElement)}}))}_onKeyUp(t){if(!/^( |SpaceBar)$/.test(t.key))return;t.preventDefault();const i=t.composedPath()[0];if(i._content&&i._content.firstElementChild){const r=this.hasAttribute("navigating");i._content.firstElementChild.click(),this._toggleAttribute("navigating",r,this)}}_onFocusIn(t){this._isMousedown||this._toggleAttribute("navigating",!0,this);const i=t.composedPath()[0];i===this.$.table||i===this.$.focusexit?(this._predictFocusStepTarget(i,i===this.$.table?1:-1).focus(),this._toggleAttribute("interacting",!1,this)):this._detectInteracting(t)}_onFocusOut(t){this._toggleAttribute("navigating",!1,this),this._detectInteracting(t)}_onCellFocusIn(t){if(this._detectInteracting(t),t.composedPath().indexOf(this.$.table)===3){const i=t.composedPath()[0];this._activeRowGroup=i.parentNode.parentNode,this._activeRowGroup===this.$.header?this._headerFocusable=i:this._activeRowGroup===this.$.items?this._itemsFocusable=i:this._activeRowGroup===this.$.footer&&(this._footerFocusable=i),i._content.dispatchEvent(new CustomEvent("cell-focusin",{bubbles:!1}))}this._detectFocusedItemIndex(t)}_onCellFocusOut(t){t.composedPath().indexOf(this.$.table)===3&&t.composedPath()[0]._content.dispatchEvent(new CustomEvent("cell-focusout",{bubbles:!1}))}_detectInteracting(t){this._toggleAttribute("interacting",t.composedPath().some(i=>i.localName==="vaadin-grid-cell-content"),this)}_detectFocusedItemIndex(t){const{rowGroup:i,row:r}=this._parseEventPath(t.composedPath());i===this.$.items&&(this._focusedItemIndex=r.index)}_preventScrollerRotatingCellFocus(t,i){t.index===this._focusedItemIndex&&this.hasAttribute("navigating")&&this._activeRowGroup===this.$.items&&(this._navigatingIsHidden=!0,this._toggleAttribute("navigating",!1,this)),i===this._focusedItemIndex&&this._navigatingIsHidden&&(this._navigatingIsHidden=!1,this._toggleAttribute("navigating",!0,this))}_getColumns(t,i){let r=this._columnTree.length-1;return t===this.$.header?r=i:t===this.$.footer&&(r=this._columnTree.length-1-i),this._columnTree[r]}_resetKeyboardNavigation(){if(this.$.header.firstElementChild&&(this._headerFocusable=Array.from(this.$.header.firstElementChild.children).filter(t=>!t.hidden)[0]),this.$.items.firstElementChild){const t=this._iterateItems((i,r)=>{if(this._firstVisibleIndex===r)return this.$.items.children[i]});t&&(this._itemsFocusable=Array.from(t.children).filter(i=>!i.hidden)[0])}this.$.footer.firstElementChild&&(this._footerFocusable=Array.from(this.$.footer.firstElementChild.children).filter(t=>!t.hidden)[0])}_scrollHorizontallyToCell(t){if(t.hasAttribute("frozen")||this._elementMatches(t,'[part~="details-cell"]'))return;const i=t.getBoundingClientRect(),r=t.parentNode,s=Array.from(r.children).indexOf(t),n=this.$.table.getBoundingClientRect();let o=n.left,a=n.right;for(let l=s-1;l>=0;l--){const u=r.children[l];if(!u.hasAttribute("hidden")&&!this._elementMatches(u,'[part~="details-cell"]')&&u.hasAttribute("frozen")){o=u.getBoundingClientRect().right;break}}for(let l=s+1;l<r.children.length;l++){const u=r.children[l];if(!u.hasAttribute("hidden")&&!this._elementMatches(u,'[part~="details-cell"]')&&u.hasAttribute("frozen")){a=u.getBoundingClientRect().left;break}}i.left<o&&(this.$.table.scrollLeft+=Math.round(i.left-o)),i.right>a&&(this.$.table.scrollLeft+=Math.round(i.right-a))}_elementMatches(t,i){return t.matches?t.matches(i):Array.from(t.parentNode.querySelectorAll(i)).indexOf(t)!==-1}},YAe=e=>class extends O_(e){static get properties(){return{columnReorderingAllowed:{type:Boolean,value:!1},_orderBaseScope:{type:Number,value:1e7}}}static get observers(){return["_updateOrders(_columnTree, _columnTree.*)"]}ready(){super.ready(),YL(this,"track",this._onTrackEvent),this._reorderGhost=this.shadowRoot.querySelector('[part="reorder-ghost"]'),this.addEventListener("touchstart",this._onTouchStart.bind(this)),this.addEventListener("touchmove",this._onTouchMove.bind(this)),this.addEventListener("touchend",this._onTouchEnd.bind(this)),this.addEventListener("contextmenu",this._onContextMenu.bind(this))}_onContextMenu(t){this.hasAttribute("reordering")&&t.preventDefault()}_onTouchStart(t){this._startTouchReorderTimeout=setTimeout(()=>{this._onTrackStart({detail:{x:t.touches[0].clientX,y:t.touches[0].clientY}})},100)}_onTouchMove(t){this._draggedColumn&&t.preventDefault(),clearTimeout(this._startTouchReorderTimeout)}_onTouchEnd(){clearTimeout(this._startTouchReorderTimeout),this._onTrackEnd()}_onTrackEvent(t){if(t.detail.state==="start"){const i=t.composedPath(),r=i[i.indexOf(this.$.header)-2];if(!r||!r._content||r._content.contains(this.getRootNode().activeElement)||this.$.scroller.hasAttribute("column-resizing"))return;this._touchDevice||this._onTrackStart(t)}else t.detail.state==="track"?this._onTrack(t):t.detail.state==="end"&&this._onTrackEnd(t)}_onTrackStart(t){if(!this.columnReorderingAllowed)return;const i=t.composedPath&&t.composedPath();if(i&&i.filter(s=>s.hasAttribute&&s.hasAttribute("draggable"))[0])return;const r=this._cellFromPoint(t.detail.x,t.detail.y);if(r&&r.getAttribute("part").indexOf("header-cell")!==-1){for(this._toggleAttribute("reordering",!0,this),this._draggedColumn=r._column;this._draggedColumn.parentElement.childElementCount===1;)this._draggedColumn=this._draggedColumn.parentElement;this._setSiblingsReorderStatus(this._draggedColumn,"allowed"),this._draggedColumn._reorderStatus="dragging",this._updateGhost(r),this._reorderGhost.style.visibility="visible",this._updateGhostPosition(t.detail.x,this._touchDevice?t.detail.y-50:t.detail.y),this._autoScroller()}}_onTrack(t){if(!this._draggedColumn)return;const i=this._cellFromPoint(t.detail.x,t.detail.y);if(!i)return;const r=this._getTargetColumn(i,this._draggedColumn);this._isSwapAllowed(this._draggedColumn,r)&&this._isSwappableByPosition(r,t.detail.x)&&this._swapColumnOrders(this._draggedColumn,r),this._updateGhostPosition(t.detail.x,this._touchDevice?t.detail.y-50:t.detail.y),this._lastDragClientX=t.detail.x}_onTrackEnd(){this._draggedColumn&&(this._toggleAttribute("reordering",!1,this),this._draggedColumn._reorderStatus="",this._setSiblingsReorderStatus(this._draggedColumn,""),this._draggedColumn=null,this._lastDragClientX=null,this._reorderGhost.style.visibility="hidden",this.dispatchEvent(new CustomEvent("column-reorder",{detail:{columns:this._getColumnsInOrder()}})))}_getColumnsInOrder(){return this._columnTree.slice(0).pop().filter(t=>!t.hidden).sort((t,i)=>t._order-i._order)}_cellFromPoint(t,i){t=t||0,i=i||0,this._draggedColumn||this._toggleAttribute("no-content-pointer-events",!0,this.$.scroller);const r=this.shadowRoot.elementFromPoint(t,i);if(this._toggleAttribute("no-content-pointer-events",!1,this.$.scroller),r&&r._column)return r}_updateGhostPosition(t,i){const r=this._reorderGhost.getBoundingClientRect(),s=t-r.width/2,n=i-r.height/2,o=parseInt(this._reorderGhost._left||0),a=parseInt(this._reorderGhost._top||0);this._reorderGhost._left=o-(r.left-s),this._reorderGhost._top=a-(r.top-n),this._reorderGhost.style.transform=`translate(${this._reorderGhost._left}px, ${this._reorderGhost._top}px)`}_updateGhost(t){const i=this._reorderGhost;i.textContent=t._content.innerText;const r=window.getComputedStyle(t);return["boxSizing","display","width","height","background","alignItems","padding","border","flex-direction","overflow"].forEach(s=>i.style[s]=r[s]),i}_updateOrders(t,i){t!==void 0&&i!==void 0&&(t[0].forEach(r=>r._order=0),t[0].forEach((r,s)=>r._order=(s+1)*this._orderBaseScope))}_setSiblingsReorderStatus(t,i){Array.from(t.parentNode.children).filter(r=>/column/.test(r.localName)&&this._isSwapAllowed(r,t)).forEach(r=>r._reorderStatus=i)}_autoScroller(){if(this._lastDragClientX){const t=this._lastDragClientX-this.getBoundingClientRect().right+50,i=this.getBoundingClientRect().left-this._lastDragClientX+50;t>0?this.$.table.scrollLeft+=t/10:i>0&&(this.$.table.scrollLeft-=i/10),this._scrollHandler()}this._draggedColumn&&this.async(this._autoScroller,10)}_isSwapAllowed(t,i){if(t&&i){const r=t!==i,s=t.parentElement===i.parentElement,n=t.frozen===i.frozen;return r&&s&&n}}_isSwappableByPosition(t,i){const r=Array.from(this.$.header.querySelectorAll('tr:not([hidden]) [part~="cell"]')).filter(o=>t.contains(o._column))[0],s=this.$.header.querySelector("tr:not([hidden]) [reorder-status=dragging]").getBoundingClientRect(),n=r.getBoundingClientRect();return n.left>s.left?i>n.right-s.width:i<n.left+s.width}_swapColumnOrders(t,i){const r=t._order;t._order=i._order,i._order=r,this._updateLastFrozen(),this._updateFirstAndLastColumn()}_getTargetColumn(t,i){if(t&&i){let r=t._column;for(;r.parentElement!==i.parentElement&&r!==this;)r=r.parentElement;return r.parentElement===i.parentElement?r:t._column}}},KAe=e=>class extends e{static get properties(){return{resizable:{type:Boolean,value:function(){if(this.localName==="vaadin-grid-column-group")return;const t=this.parentNode;return t&&t.localName==="vaadin-grid-column-group"&&t.resizable||!1}},_headerTemplate:{type:Object},_footerTemplate:{type:Object},frozen:{type:Boolean,value:!1},hidden:{type:Boolean},header:{type:String},textAlign:{type:String},_lastFrozen:{type:Boolean,value:!1},_order:Number,_reorderStatus:Boolean,_emptyCells:Array,_headerCell:Object,_footerCell:Object,_grid:Object,headerRenderer:Function,footerRenderer:Function}}static get observers(){return["_widthChanged(width, _headerCell, _footerCell, _cells.*)","_frozenChanged(frozen, _headerCell, _footerCell, _cells.*)","_flexGrowChanged(flexGrow, _headerCell, _footerCell, _cells.*)","_pathOrHeaderChanged(path, header, _headerCell, _footerCell, _cells.*, renderer, headerRenderer, _bodyTemplate, _headerTemplate)","_textAlignChanged(textAlign, _cells.*, _headerCell, _footerCell)","_orderChanged(_order, _headerCell, _footerCell, _cells.*)","_lastFrozenChanged(_lastFrozen)","_setBodyTemplateOrRenderer(_bodyTemplate, renderer, _cells, _cells.*)","_setHeaderTemplateOrRenderer(_headerTemplate, headerRenderer, _headerCell)","_setFooterTemplateOrRenderer(_footerTemplate, footerRenderer, _footerCell)","_resizableChanged(resizable, _headerCell)","_reorderStatusChanged(_reorderStatus, _headerCell, _footerCell, _cells.*)","_hiddenChanged(hidden, _headerCell, _footerCell, _cells.*)"]}connectedCallback(){super.connectedCallback(),this._bodyTemplate&&(this._bodyTemplate.templatizer._grid=this._grid),this._headerTemplate&&(this._headerTemplate.templatizer._grid=this._grid),this._footerTemplate&&(this._footerTemplate.templatizer._grid=this._grid),this._templateObserver.flush(),this._bodyTemplate||this._templateObserver.callback(),requestAnimationFrame(()=>{this._allCells.forEach(t=>{t._content.parentNode||this._grid&&this._grid.appendChild(t._content)})})}disconnectedCallback(){super.disconnectedCallback(),requestAnimationFrame(()=>{this._findHostGrid()||this._allCells.forEach(t=>{t._content.parentNode&&t._content.parentNode.removeChild(t._content)})}),this._gridValue=void 0}_findHostGrid(){let t=this;for(;t&&!/^vaadin.*grid(-pro)?$/.test(t.localName);)t=t.assignedSlot?t.assignedSlot.parentNode:t.parentNode;return t||void 0}get _grid(){return this._gridValue||(this._gridValue=this._findHostGrid()),this._gridValue}get _allCells(){return[].concat(this._cells||[]).concat(this._emptyCells||[]).concat(this._headerCell).concat(this._footerCell).filter(t=>t)}constructor(){super(),this._templateObserver=new Wh(this,()=>{this._headerTemplate=this._prepareHeaderTemplate(),this._footerTemplate=this._prepareFooterTemplate(),this._bodyTemplate=this._prepareBodyTemplate()})}_prepareHeaderTemplate(){return this._prepareTemplatizer(this._findTemplate(!0)||null,{})}_prepareFooterTemplate(){return this._prepareTemplatizer(this._findTemplate(!1,!0)||null,{})}_prepareBodyTemplate(){return this._prepareTemplatizer(this._findTemplate()||null)}_prepareTemplatizer(t,i){if(t&&!t.templatizer){const r=new Ix;r._grid=this._grid,r.dataHost=this.dataHost,r._instanceProps=i||r._instanceProps,r.template=t,t.templatizer=r}return t}_renderHeaderAndFooter(){this.headerRenderer&&this._headerCell&&this.__runRenderer(this.headerRenderer,this._headerCell),this.footerRenderer&&this._footerCell&&this.__runRenderer(this.footerRenderer,this._footerCell)}__runRenderer(t,i,r){const s=[i._content,this];r&&r.item&&s.push(r),t.apply(this,s)}__setColumnTemplateOrRenderer(t,i,r){if(!this.hidden){if(t&&i)throw new Error("You should only use either a renderer or a template");r.forEach(s=>{const n=this._grid.__getRowModel(s.parentElement);if(i)s._renderer=i,(n.item||i===this.headerRenderer||i===this.footerRenderer)&&this.__runRenderer(i,s,n);else if(s._template!==t){s._template=t,s._content.innerHTML="",t.templatizer._grid=t.templatizer._grid||this._grid;const o=t.templatizer.createInstance();s._content.appendChild(o.root),s._instance=o,n.item&&s._instance.setProperties(n)}})}}_setBodyTemplateOrRenderer(t,i,r){(t||i)&&r&&this.__setColumnTemplateOrRenderer(t,i,r)}_setHeaderTemplateOrRenderer(t,i,r){(t||i)&&r&&this.__setColumnTemplateOrRenderer(t,i,[r])}_setFooterTemplateOrRenderer(t,i,r){(t||i)&&r&&(this.__setColumnTemplateOrRenderer(t,i,[r]),this._grid.__updateHeaderFooterRowVisibility(r.parentElement))}_selectFirstTemplate(t=!1,i=!1){return Wh.getFlattenedNodes(this).filter(r=>r.localName==="template"&&r.classList.contains("header")===t&&r.classList.contains("footer")===i)[0]}_findTemplate(t,i){const r=this._selectFirstTemplate(t,i);return r&&this.dataHost&&(r._rootDataHost=this.dataHost._rootDataHost||this.dataHost),r}_flexGrowChanged(t){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("flexGrow"),this._allCells.forEach(i=>i.style.flexGrow=t)}_orderChanged(t){this._allCells.forEach(i=>i.style.order=t)}_widthChanged(t){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("width"),this._allCells.forEach(i=>i.style.width=t),this._grid&&this._grid.__forceReflow&&this._grid.__forceReflow()}_frozenChanged(t){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("frozen",t),this._allCells.forEach(i=>this._toggleAttribute("frozen",t,i)),this._grid&&this._grid._frozenCellsChanged&&this._grid._frozenCellsChanged()}_lastFrozenChanged(t){this._allCells.forEach(i=>this._toggleAttribute("last-frozen",t,i)),this.parentElement&&this.parentElement._columnPropChanged&&(this.parentElement._lastFrozen=t)}_pathOrHeaderChanged(t,i,r,s,n,o,a,l,u){const h=i!==void 0;if(!a&&!u&&h&&r&&this.__setTextContent(r._content,i),t&&n.value){if(!o&&!l){const f=(y,g,{item:b})=>this.__setTextContent(y,this.get(t,b));this.__setColumnTemplateOrRenderer(void 0,f,n.value)}a||u||h||!r||i===null||this.__setTextContent(r._content,this._generateHeader(t))}r&&this._grid.__updateHeaderFooterRowVisibility(r.parentElement)}__setTextContent(t,i){t.textContent!==i&&(t.textContent=i)}_generateHeader(t){return t.substr(t.lastIndexOf(".")+1).replace(/([A-Z])/g,"-$1").toLowerCase().replace(/-/g," ").replace(/^./,i=>i.toUpperCase())}_toggleAttribute(t,i,r){r.hasAttribute(t)===!i&&(i?r.setAttribute(t,""):r.removeAttribute(t))}_reorderStatusChanged(t){this._allCells.forEach(i=>i.setAttribute("reorder-status",t))}_resizableChanged(t,i){t!==void 0&&i!==void 0&&i&&[i].concat(this._emptyCells).forEach(r=>{if(r){const s=r.querySelector('[part~="resize-handle"]');if(s&&r.removeChild(s),t){const n=document.createElement("div");n.setAttribute("part","resize-handle"),r.appendChild(n)}}})}_textAlignChanged(t){if(t===void 0)return;if(["start","end","center"].indexOf(t)===-1)return void console.warn('textAlign can only be set as "start", "end" or "center"');let i;getComputedStyle(this._grid).direction==="ltr"?t==="start"?i="left":t==="end"&&(i="right"):t==="start"?i="right":t==="end"&&(i="left"),this._allCells.forEach(r=>{r._content.style.textAlign=t,getComputedStyle(r._content).textAlign!==t&&(r._content.style.textAlign=i)})}_hiddenChanged(t){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("hidden",t),!!t!=!!this._previousHidden&&this._grid&&(t===!0&&this._allCells.forEach(i=>{i._content.parentNode&&i._content.parentNode.removeChild(i._content)}),this._grid._debouncerHiddenChanged=Di.debounce(this._grid._debouncerHiddenChanged,ac,()=>{this._grid&&this._grid._renderColumnTree&&this._grid._renderColumnTree(this._grid._columnTree)}),this._grid._updateLastFrozen&&this._grid._updateLastFrozen(),this._grid.notifyResize&&this._grid.notifyResize(),this._grid._resetKeyboardNavigation&&this._grid._resetKeyboardNavigation()),this._previousHidden=t}};class Tx extends KAe(XL(cd)){static get is(){return"vaadin-grid-column"}static get properties(){return{width:{type:String,value:"100px"},flexGrow:{type:Number,value:1},renderer:Function,path:{type:String},autoWidth:{type:Boolean,value:!1},_bodyTemplate:{type:Object},_cells:Array}}}customElements.define(Tx.is,Tx),Dv("vaadin-grid",Nv`
    @keyframes vaadin-grid-appear {
      to {
        opacity: 1;
      }
    }

    :host {
      display: block;
      animation: 1ms vaadin-grid-appear;
      height: 400px;
      flex: 1 1 auto;
      align-self: stretch;
      position: relative;
    }

    :host([hidden]) {
      display: none !important;
    }

    #scroller {
      display: block;
      transform: translateY(0);
      width: auto;
      height: auto;
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }

    :host([height-by-rows]) {
      height: auto;
      align-self: flex-start;
      flex-grow: 0;
      width: 100%;
    }

    :host([height-by-rows]) #scroller {
      width: 100%;
      height: 100%;
      position: relative;
    }

    #table {
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
      overflow: auto;
      position: relative;
      outline: none;
      /* Workaround for a Desktop Safari bug: new stacking context here prevents the scrollbar from getting hidden */
      z-index: 0;
    }

    #header,
    #footer {
      display: block;
      position: -webkit-sticky;
      position: sticky;
      left: 0;
      overflow: visible;
      width: 100%;
      z-index: 1;
    }

    #header {
      top: 0;
    }

    th {
      text-align: inherit;
    }

    /* Safari doesn't work with "inherit" */
    [safari] th {
      text-align: initial;
    }

    #footer {
      bottom: 0;
    }

    #items {
      flex-grow: 1;
      flex-shrink: 0;
      display: block;
      position: -webkit-sticky;
      position: sticky;
      width: 100%;
      left: 0;
      overflow: visible;
    }

    [part~='row'] {
      display: flex;
      width: 100%;
      box-sizing: border-box;
      margin: 0;
    }

    [part~='row'][loading] [part~='body-cell'] ::slotted(vaadin-grid-cell-content) {
      opacity: 0;
    }

    #items [part~='row'] {
      position: absolute;
    }

    #items [part~='row']:empty {
      height: 1em;
    }

    [part~='cell']:not([part~='details-cell']) {
      flex-shrink: 0;
      flex-grow: 1;
      box-sizing: border-box;
      display: flex;
      width: 100%;
      position: relative;
      align-items: center;
      padding: 0;
      white-space: nowrap;
    }

    [part~='details-cell'] {
      position: absolute;
      bottom: 0;
      width: 100%;
      box-sizing: border-box;
      padding: 0;
    }

    [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      display: block;
      width: 100%;
      box-sizing: border-box;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    [hidden] {
      display: none !important;
    }

    [frozen] {
      z-index: 2;
      will-change: transform;
    }

    [no-scrollbars][safari] #table,
    [no-scrollbars][firefox] #table {
      overflow: hidden;
    }

    /* Reordering styles */
    :host([reordering]) [part~='cell'] ::slotted(vaadin-grid-cell-content),
    :host([reordering]) [part~='resize-handle'],
    #scroller[no-content-pointer-events] [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      pointer-events: none;
    }

    [part~='reorder-ghost'] {
      visibility: hidden;
      position: fixed;
      pointer-events: none;
      opacity: 0.5;

      /* Prevent overflowing the grid in Firefox */
      top: 0;
      left: 0;
    }

    :host([reordering]) {
      -moz-user-select: none;
      -webkit-user-select: none;
      user-select: none;
    }

    /* Resizing styles */
    [part~='resize-handle'] {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
      cursor: col-resize;
      z-index: 1;
    }

    [part~='resize-handle']::before {
      position: absolute;
      content: '';
      height: 100%;
      width: 35px;
      transform: translateX(-50%);
    }

    [last-column] [part~='resize-handle']::before,
    [last-frozen] [part~='resize-handle']::before {
      width: 18px;
      transform: none;
      right: 0;
    }

    #scroller[column-resizing] {
      -ms-user-select: none;
      -moz-user-select: none;
      -webkit-user-select: none;
      user-select: none;
    }

    /* Sizer styles */
    #sizer {
      display: flex;
      position: absolute;
      visibility: hidden;
    }

    #sizer [part~='details-cell'] {
      display: none !important;
    }

    #sizer [part~='cell'][hidden] {
      display: none !important;
    }

    #sizer [part~='cell'] {
      display: block;
      flex-shrink: 0;
      line-height: 0;
      height: 0 !important;
      min-height: 0 !important;
      max-height: 0 !important;
      padding: 0 !important;
      border: none !important;
    }

    #sizer [part~='cell']::before {
      content: '-';
    }

    #sizer [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      display: none !important;
    }

    /* RTL specific styles */

    :host([dir='rtl']) #items,
    :host([dir='rtl']) #header,
    :host([dir='rtl']) #footer {
      left: auto;
    }

    :host([dir='rtl']) [part~='reorder-ghost'] {
      left: auto;
      right: 0;
    }

    :host([dir='rtl']) [part~='resize-handle'] {
      left: 0;
      right: auto;
    }

    :host([dir='rtl']) [part~='resize-handle']::before {
      transform: translateX(50%);
    }

    :host([dir='rtl']) [last-column] [part~='resize-handle']::before,
    :host([dir='rtl']) [last-frozen] [part~='resize-handle']::before {
      left: 0;
      right: auto;
    }
  `,{moduleId:"vaadin-grid-styles"});const QAe=(()=>{try{return document.createEvent("TouchEvent"),!0}catch{return!1}})();class ez extends gJ(QL(jAe(NAe(zAe(RAe(qAe(GAe(HAe(BAe(ZAe(LAe(UAe(YAe(DAe(VAe(JAe(WAe(PAe)))))))))))))))))){static get template(){return A_`
      <div
        id="scroller"
        safari$="[[_safari]]"
        ios$="[[_ios]]"
        loading$="[[loading]]"
        column-reordering-allowed$="[[columnReorderingAllowed]]"
      >
        <table id="table" role="grid" aria-multiselectable="true" tabindex="0">
          <caption id="sizer" part="row"></caption>
          <thead id="header" role="rowgroup"></thead>
          <tbody id="items" role="rowgroup"></tbody>
          <tfoot id="footer" role="rowgroup"></tfoot>
        </table>

        <div part="reorder-ghost"></div>
      </div>

      <div id="focusexit" tabindex="0"></div>
    `}static get is(){return"vaadin-grid"}static get version(){return"6.0.2"}static get observers(){return["_columnTreeChanged(_columnTree, _columnTree.*)"]}static get properties(){return{_safari:{type:Boolean,value:/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},_ios:{type:Boolean,value:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1},_firefox:{type:Boolean,value:navigator.userAgent.toLowerCase().indexOf("firefox")>-1},_android:{type:Boolean,value:/android/i.test(navigator.userAgent)},_touchDevice:{type:Boolean,value:QAe},heightByRows:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_heightByRowsChanged"},_recalculateColumnWidthOnceLoadingFinished:{type:Boolean,value:!0}}}constructor(){super(),this.addEventListener("animationend",this._onAnimationEnd)}connectedCallback(){super.connectedCallback(),this.recalculateColumnWidths()}attributeChangedCallback(t,i,r){super.attributeChangedCallback(t,i,r),t==="dir"&&(this.__isRTL=r==="rtl",this._updateScrollerMeasurements())}__hasRowsWithClientHeight(){return!!Array.from(this.$.items.children).filter(t=>t.clientHeight).length}__itemsReceived(){this._recalculateColumnWidthOnceLoadingFinished&&!this._cache.isLoading()&&this.__hasRowsWithClientHeight()&&(this._recalculateColumnWidthOnceLoadingFinished=!1,this.recalculateColumnWidths())}_recalculateColumnWidths(t){t.forEach(i=>{i.width="auto",i._origFlexGrow=i.flexGrow,i.flexGrow=0}),t.forEach(i=>{i._currentWidth=0,i._allCells.forEach(r=>{const s=r.offsetWidth+1;i._currentWidth=Math.max(i._currentWidth,s)})}),t.forEach(i=>{i.width=`${i._currentWidth}px`,i.flexGrow=i._origFlexGrow,i._currentWidth=void 0,i._origFlexGrow=void 0})}recalculateColumnWidths(){if(this._columnTree)if(this._cache.isLoading())this._recalculateColumnWidthOnceLoadingFinished=!0;else{const t=this._getColumns().filter(i=>!i.hidden&&i.autoWidth);this._recalculateColumnWidths(t)}}_createScrollerRows(t){const i=[];for(let r=0;r<t;r++){const s=document.createElement("tr");s.setAttribute("part","row"),s.setAttribute("role","row"),this._columnTree&&this._updateRow(s,this._columnTree[this._columnTree.length-1],"body",!1,!0),i.push(s)}return this._columnTree&&this._columnTree[this._columnTree.length-1].forEach(r=>r.isConnected&&r.notifyPath&&r.notifyPath("_cells.*",r._cells)),p2e(this,()=>{this._updateFirstAndLastColumn(),this._resetKeyboardNavigation()}),i}_getRowTarget(){return this.$.items}_createCell(t){const i="vaadin-grid-cell-content-"+(this._contentIndex=this._contentIndex+1||0),r=document.createElement("vaadin-grid-cell-content");r.setAttribute("slot",i);const s=document.createElement(t);s.id=i.replace("-content-","-"),s.setAttribute("tabindex","-1"),s.setAttribute("role",t==="td"?"gridcell":"columnheader");const n=document.createElement("slot");return n.setAttribute("name",i),s.appendChild(n),s._content=r,r.addEventListener("mousedown",()=>{if(window.chrome){const o=()=>{r.contains(this.getRootNode().activeElement)||s.focus(),document.removeEventListener("mouseup",o,!0)};document.addEventListener("mouseup",o,!0)}else setTimeout(()=>{r.contains(this.getRootNode().activeElement)||s.focus()})}),s}_updateRow(t,i,r,s,n){r=r||"body";const o=document.createDocumentFragment();Array.from(t.children).forEach(a=>a._vacant=!0),t.innerHTML="",t.id!=="sizer"&&(t.hidden=!0),i.filter(a=>!a.hidden).forEach((a,l,u)=>{let h;if(r==="body"){if(a._cells=a._cells||[],h=a._cells.filter(f=>f._vacant)[0],h||(h=this._createCell("td"),a._cells.push(h)),h.setAttribute("part","cell body-cell"),t.appendChild(h),l===u.length-1&&(this._rowDetailsTemplate||this.rowDetailsRenderer)){this._detailsCells=this._detailsCells||[];const f=this._detailsCells.filter(y=>y._vacant)[0]||this._createCell("td");this._detailsCells.indexOf(f)===-1&&this._detailsCells.push(f),f._content.parentElement||o.appendChild(f._content),this._configureDetailsCell(f),t.appendChild(f),this._a11ySetRowDetailsCell(t,f),f._vacant=!1}a.notifyPath&&!n&&a.notifyPath("_cells.*",a._cells)}else{const f=r==="header"?"th":"td";s||a.localName==="vaadin-grid-column-group"?(h=a[`_${r}Cell`]||this._createCell(f),h._column=a,t.appendChild(h),a[`_${r}Cell`]=h):(a._emptyCells=a._emptyCells||[],h=a._emptyCells.filter(y=>y._vacant)[0]||this._createCell(f),h._column=a,t.appendChild(h),a._emptyCells.indexOf(h)===-1&&a._emptyCells.push(h)),h.setAttribute("part",`cell ${r}-cell`),this.__updateHeaderFooterRowVisibility(t)}h._content.parentElement||o.appendChild(h._content),h._vacant=!1,h._column=a}),this.appendChild(o),this._frozenCellsChanged(),this._updateFirstAndLastColumnForRow(t)}__updateHeaderFooterRowVisibility(t){if(!t)return;const i=Array.from(t.children).filter(r=>{const s=r._column;if(s._emptyCells&&s._emptyCells.indexOf(r)>-1)return!1;if(t.parentElement===this.$.header){if(s.headerRenderer||s._headerTemplate)return!0;if(s.header===null)return!1;if(s.path||s.header!==void 0)return!0}else if(s.footerRenderer||s._footerTemplate)return!0});t.hidden!==!i.length&&(t.hidden=!i.length,this.notifyResize())}_updateScrollerItem(t,i){this._preventScrollerRotatingCellFocus(t,i),this._columnTree&&(this._toggleAttribute("first",i===0,t),this._toggleAttribute("odd",i%2,t),this._a11yUpdateRowRowindex(t,i),this._getItem(i,t))}_columnTreeChanged(t){this._renderColumnTree(t),this.recalculateColumnWidths()}_renderColumnTree(t){for(Array.from(this.$.items.children).forEach(i=>this._updateRow(i,t[t.length-1],null,!1,!0));this.$.header.children.length<t.length;){const i=document.createElement("tr");i.setAttribute("part","row"),i.setAttribute("role","row"),this.$.header.appendChild(i);const r=document.createElement("tr");r.setAttribute("part","row"),r.setAttribute("role","row"),this.$.footer.appendChild(r)}for(;this.$.header.children.length>t.length;)this.$.header.removeChild(this.$.header.firstElementChild),this.$.footer.removeChild(this.$.footer.firstElementChild);Array.from(this.$.header.children).forEach((i,r)=>this._updateRow(i,t[r],"header",r===t.length-1)),Array.from(this.$.footer.children).forEach((i,r)=>this._updateRow(i,t[t.length-1-r],"footer",r===0)),this._updateRow(this.$.sizer,t[t.length-1]),this._resizeHandler(),this._frozenCellsChanged(),this._updateFirstAndLastColumn(),this._resetKeyboardNavigation(),this._a11yUpdateHeaderRows(),this._a11yUpdateFooterRows(),this.__updateFooterPositioning()}__updateFooterPositioning(){this._firefox&&(this.$.items.style.paddingBottom=0,this.heightByRows||(this.$.items.style.paddingBottom=`${this.$.footer.offsetHeight}px`)),this._ios&&!window.CSS.supports("position","sticky")&&(this.$.table.style.height="",this.$.table.style.minHeight="100%",this.$.table.style.maxHeight="100%",setTimeout(()=>this.$.table.style.height=`${this.$.scroller.offsetHeight}px`))}_updateItem(t,i){t._item=i;const r=this.__getRowModel(t);this._toggleAttribute("selected",r.selected,t),this._a11yUpdateRowSelected(t,r.selected),this._a11yUpdateRowLevel(t,r.level),this._toggleAttribute("expanded",r.expanded,t),this._toggleAttribute("details-opened",this._isDetailsOpened(i),t),(this._rowDetailsTemplate||this.rowDetailsRenderer)&&this._toggleDetailsCell(t,i),this._generateCellClassNames(t,r),this._filterDragAndDrop(t,r),Array.from(t.children).forEach(s=>{if(s._renderer){const n=s._column||this;s._renderer.call(n,s._content,n,r)}else s._instance&&(s._instance.__detailsOpened__=r.detailsOpened,s._instance.__selected__=r.selected,s._instance.__level__=r.level,s._instance.__expanded__=r.expanded,s._instance.setProperties(r))}),this._debouncerUpdateHeights=Di.debounce(this._debouncerUpdateHeights,la.after(1),()=>{this._updateMetrics(),this._positionItems(),this._updateScrollerSize()})}_resizeHandler(){this._updateDetailsCellHeights(),this._accessIronListAPI(super._resizeHandler,!0),this._updateScrollerMeasurements(),this.__updateFooterPositioning()}_onAnimationEnd(t){t.animationName.indexOf("vaadin-grid-appear")===0&&(this._render(),t.stopPropagation(),this.notifyResize(),this.__itemsReceived(),requestAnimationFrame(()=>{this.__scrollToPendingIndex(),this.$.table.style.webkitOverflowScrolling="touch"}))}_toggleAttribute(t,i,r){r.hasAttribute(t)===!i&&(i?r.setAttribute(t,""):r.removeAttribute(t))}__getRowModel(t){return{index:t.index,item:t._item,level:this._getIndexLevel(t.index),expanded:this._isExpanded(t._item),selected:this._isSelected(t._item),detailsOpened:!(!this._rowDetailsTemplate&&!this.rowDetailsRenderer)&&this._isDetailsOpened(t._item)}}render(){this._columnTree&&(this._columnTree.forEach(t=>{t.forEach(i=>i._renderHeaderAndFooter())}),this._update())}notifyResize(){super.notifyResize()}_heightByRowsChanged(t,i){(t||i)&&this.notifyResize()}__forceReflow(){this._debouncerForceReflow=Di.debounce(this._debouncerForceReflow,ac,()=>{this.$.scroller.style.overflow="hidden",setTimeout(()=>this.$.scroller.style.overflow="")})}}customElements.define(ez.is,ez);class tz extends Tx{static get template(){return A_`
      <template class="header" id="defaultHeaderTemplate">
        <vaadin-checkbox
          class="vaadin-grid-select-all-checkbox"
          aria-label="Select All"
          hidden$="[[_selectAllHidden]]"
          on-checked-changed="_onSelectAllCheckedChanged"
          checked="[[_isChecked(selectAll, _indeterminate)]]"
          indeterminate="[[_indeterminate]]"
        ></vaadin-checkbox>
      </template>
      <template id="defaultBodyTemplate">
        <vaadin-checkbox aria-label="Select Row" checked="{{selected}}"></vaadin-checkbox>
      </template>
    `}static get is(){return"vaadin-grid-selection-column"}static get properties(){return{width:{type:String,value:"58px"},flexGrow:{type:Number,value:0},selectAll:{type:Boolean,value:!1,notify:!0},autoSelect:{type:Boolean,value:!1},_indeterminate:Boolean,_previousActiveItem:Object,_selectAllHidden:Boolean}}static get observers(){return["_onSelectAllChanged(selectAll)"]}_pathOrHeaderChanged(t,i,r,s,n,o,a,l,u){!n.value||t===void 0&&o===void 0||(this._bodyTemplate=l=void 0,this.__cleanCellsOfTemplateProperties(n.value)),!r||i===void 0&&a===void 0||(this._headerTemplate=u=void 0,this.__cleanCellsOfTemplateProperties([r])),super._pathOrHeaderChanged(t,i,r,s,n,o,a,l,u)}__cleanCellsOfTemplateProperties(t){t.forEach(i=>{i._content.innerHTML="",delete i._instance,delete i._template})}_prepareHeaderTemplate(){const t=this._prepareTemplatizer(this._findTemplate(!0)||this.$.defaultHeaderTemplate);return t.templatizer.dataHost=t===this.$.defaultHeaderTemplate?this:this.dataHost,t}_prepareBodyTemplate(){const t=this._prepareTemplatizer(this._findTemplate()||this.$.defaultBodyTemplate);return t.templatizer.dataHost=t===this.$.defaultBodyTemplate?this:this.dataHost,t}constructor(){super(),this._boundOnActiveItemChanged=this._onActiveItemChanged.bind(this),this._boundOnDataProviderChanged=this._onDataProviderChanged.bind(this),this._boundOnSelectedItemsChanged=this._onSelectedItemsChanged.bind(this)}disconnectedCallback(){this._grid.removeEventListener("active-item-changed",this._boundOnActiveItemChanged),this._grid.removeEventListener("data-provider-changed",this._boundOnDataProviderChanged),this._grid.removeEventListener("filter-changed",this._boundOnSelectedItemsChanged),this._grid.removeEventListener("selected-items-changed",this._boundOnSelectedItemsChanged),super.disconnectedCallback()}connectedCallback(){super.connectedCallback(),this._grid&&(this._grid.addEventListener("active-item-changed",this._boundOnActiveItemChanged),this._grid.addEventListener("data-provider-changed",this._boundOnDataProviderChanged),this._grid.addEventListener("filter-changed",this._boundOnSelectedItemsChanged),this._grid.addEventListener("selected-items-changed",this._boundOnSelectedItemsChanged))}_onSelectAllChanged(t){t!==void 0&&this._grid&&(this._selectAllChangeLock||(this._grid.selectedItems=t&&Array.isArray(this._grid.items)?this._grid._filter(this._grid.items):[]))}_arrayContains(t,i){for(var r=0;t&&i&&i[r]&&t.indexOf(i[r])>=0;r++);return r==i.length}_onSelectAllCheckedChanged(t){this.selectAll=this._indeterminate||t.target.checked}_isChecked(t,i){return i||t}_onActiveItemChanged(t){const i=t.detail.value;if(this.autoSelect){const r=i||this._previousActiveItem;r&&this._grid._toggleItem(r)}this._previousActiveItem=i}_onSelectedItemsChanged(){this._selectAllChangeLock=!0,Array.isArray(this._grid.items)&&(this._grid.selectedItems.length?this._arrayContains(this._grid.selectedItems,this._grid._filter(this._grid.items))?(this.selectAll=!0,this._indeterminate=!1):(this.selectAll=!1,this._indeterminate=!0):(this.selectAll=!1,this._indeterminate=!1)),this._selectAllChangeLock=!1}_onDataProviderChanged(){this._selectAllHidden=!Array.isArray(this._grid.items)}}customElements.define(tz.is,tz),Dv("vaadin-grid-sorter",Nv`
    :host {
      justify-content: flex-start;
      align-items: baseline;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    [part='content'] {
      display: inline-block;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    [part='indicators'] {
      margin-left: var(--lumo-space-s);
    }

    :host(:not([direction])) [part='indicators']::before {
      opacity: 0.2;
    }

    :host([direction]) {
      color: var(--lumo-primary-text-color);
    }

    [part='order'] {
      font-size: var(--lumo-font-size-xxs);
      line-height: 1;
    }

    /* RTL specific styles */

    :host([dir='rtl']) [part='indicators'] {
      margin-right: var(--lumo-space-s);
      margin-left: 0;
    }
  `,{moduleId:"lumo-grid-sorter"});const iz=document.createElement("template");iz.innerHTML=`
  <style>
    @font-face {
      font-family: 'vaadin-grid-sorter-icons';
      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAQwAA0AAAAABuwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAEFAAAABkAAAAcfep+mUdERUYAAAP4AAAAHAAAAB4AJwAOT1MvMgAAAZgAAAA/AAAAYA8TBPpjbWFwAAAB7AAAAFUAAAFeF1fZ4mdhc3AAAAPwAAAACAAAAAgAAAAQZ2x5ZgAAAlgAAABcAAAAnMvguMloZWFkAAABMAAAAC8AAAA2C5Ap72hoZWEAAAFgAAAAHQAAACQGbQPHaG10eAAAAdgAAAAUAAAAHAoAAABsb2NhAAACRAAAABIAAAASAIwAYG1heHAAAAGAAAAAFgAAACAACwAKbmFtZQAAArQAAAECAAACZxWCgKhwb3N0AAADuAAAADUAAABZCrApUXicY2BkYGAA4rDECVrx/DZfGbhZGEDgyqNPOxH0/wNMq5kPALkcDEwgUQBWRA0dAHicY2BkYGA+8P8AAwMLAwgwrWZgZEAFbABY4QM8AAAAeJxjYGRgYOAAQiYGEICQSAAAAi8AFgAAeJxjYGY6yziBgZWBgWkm0xkGBoZ+CM34msGYkZMBFTAKoAkwODAwvmRiPvD/AIMDMxCD1CDJKjAwAgBktQsXAHicY2GAAMZQCM0EwqshbAALxAEKeJxjYGBgZoBgGQZGBhCIAPIYwXwWBhsgzcXAwcAEhIwMCi+Z/v/9/x+sSuElA4T9/4k4K1gHFwMMMILMY2QDYmaoABOQYGJABUA7WBiGNwAAJd4NIQAAAAAAAAAACAAIABAAGAAmAEAATgAAeJyNjLENgDAMBP9tIURJwQCMQccSZgk2i5fIYBDAidJjycXr7x5EPwE2wY8si7jmyBNXGo/bNBerxJNrpxhbO3/fEFpx8ZICpV+ghxJ74fAMe+h7Ox14AbrsHB14nK2QQWrDMBRER4mTkhQK3ZRQKOgCNk7oGQqhhEIX2WSlWEI1BAlkJ5CDdNsj5Ey9Rncdi38ES+jzNJo/HwTgATcoDEthhY3wBHc4CE+pfwsX5F/hGe7Vo/AcK/UhvMSz+mGXKhZU6pww8ISz3oWn1BvhgnwTnuEJf8Jz1OpFeIlX9YULDLdFi4ASHolkSR0iuYdjLak1vAequBhj21D61Nqyi6l3qWybGPjySbPHGScGJl6dP58MYcQRI0bts7mjebBqrFENH7t3qWtj0OuqHnXcW7b0HOTZFnKryRGW2hFX1m0O2vEM3opNMfTau+CS6Z3Vx6veNnEXY6jwDxhsc2gAAHicY2BiwA84GBgYmRiYGJkZmBlZGFkZ2djScyoLMgzZS/MyDQwMwLSrpYEBlIbxjQDrzgsuAAAAAAEAAf//AA94nGNgZGBg4AFiMSBmYmAEQnYgZgHzGAAD6wA2eJxjYGBgZACCKyoz1cD0o087YTQATOcIewAAAA==) format('woff');
      font-weight: normal;
      font-style: normal;
    }
  </style>
`,document.head.appendChild(iz.content);class rz extends QL(XL(cd)){static get template(){return A_`
      <style>
        :host {
          display: inline-flex;
          cursor: pointer;
          max-width: 100%;
        }

        [part='content'] {
          flex: 1 1 auto;
        }

        [part='indicators'] {
          position: relative;
          align-self: center;
          flex: none;
        }

        [part='order'] {
          display: inline;
          vertical-align: super;
        }

        [part='indicators']::before {
          font-family: 'vaadin-grid-sorter-icons';
          display: inline-block;
        }

        :host(:not([direction])) [part='indicators']::before {
          content: '\\e901';
        }

        :host([direction='asc']) [part='indicators']::before {
          content: '\\e900';
        }

        :host([direction='desc']) [part='indicators']::before {
          content: '\\e902';
        }
      </style>

      <div part="content">
        <slot></slot>
      </div>
      <div part="indicators">
        <span part="order">[[_getDisplayOrder(_order)]]</span>
      </div>
    `}static get is(){return"vaadin-grid-sorter"}static get properties(){return{path:String,direction:{type:String,reflectToAttribute:!0,notify:!0,value:null},_order:{type:Number,value:null},_isConnected:{type:Boolean,observer:"__isConnectedChanged"}}}static get observers(){return["_pathOrDirectionChanged(path, direction)"]}ready(){super.ready(),this.addEventListener("click",this._onClick.bind(this))}connectedCallback(){super.connectedCallback(),this._isConnected=!0}disconnectedCallback(){super.disconnectedCallback(),this._isConnected=!1}_pathOrDirectionChanged(){this.__dispatchSorterChangedEvenIfPossible()}__isConnectedChanged(t,i){i!==!1&&this.__dispatchSorterChangedEvenIfPossible()}__dispatchSorterChangedEvenIfPossible(){this.path!==void 0&&this.direction!==void 0&&this._isConnected&&this.dispatchEvent(new CustomEvent("sorter-changed",{bubbles:!0,composed:!0}))}_getDisplayOrder(t){return t===null?"":t+1}_onClick(t){const i=this.getRootNode().activeElement;this!==i&&this.contains(i)||(t.preventDefault(),this.direction==="asc"?this.direction="desc":this.direction==="desc"?this.direction=null:this.direction="asc")}}customElements.define(rz.is,rz);class sz extends Tx{static get template(){return A_`
      <template class="header" id="headerTemplate">
        <vaadin-grid-sorter path="[[path]]" direction="{{direction}}">[[_getHeader(header, path)]]</vaadin-grid-sorter>
      </template>
    `}static get is(){return"vaadin-grid-sort-column"}static get properties(){return{path:String,direction:{type:String,notify:!0}}}_prepareHeaderTemplate(){const t=this._prepareTemplatizer(this.$.headerTemplate);return t.templatizer.dataHost=this,t}_getHeader(t,i){return t||this._generateHeader(i)}}customElements.define(sz.is,sz);const nz={selectionColumn:!0,columnMenus:!0},mg={base:"esri-grid",content:"esri-grid__content",grid:"esri-grid__grid",noColumnMenu:"esri-grid--no-column-menu",widget:"esri-widget"};let Fi=class extends Xs(Yt){constructor(e,t){super(e,t),this._grid=null,this._headerStyles="display: flex; font-weight: 400;",this._hostStyles='font-family: "Avenir Next", "Helvetica Neue", Helvetica, Arial, sans-serif; font-size: 1em; background-color: inherit; color: inherit;',this._rowHoverStyles="background-color: var(--lumo-row-background-hover);",this._columnElements=[],this.cellClassNameGenerator=null,this.columns=null,this.columnReorderingEnabled=null,this.dataProvider=null,this.itemIdPath=null,this.label=void 0,this.messages=null,this.multiSortEnabled=null,this.pageSize=null,this.rowDetailsRenderer=null,this.selectedItems=new ke,this.size=null,this.store=null,this.viewModel=new VW,this.visibleElements=k({},nz)}initialize(){this.handles.add([this.columns.on("change",()=>this._syncColumnRenderers()),Qe(this,"viewModel.size",()=>this._updateGridSize()),Qe(this,"store.state",(e,t)=>{e!=="ready"||t!=="loaded"&&t!=="error"||this.refreshPageCache()}),oa(this,"_grid.$.table","scroll",()=>{var e;(e=this.viewModel)==null||e.closeColumnMenus()})])}destroy(){var e;this.handles.removeAll(),this.resetColumns(),(e=this.columns)==null||e.destroy()}resetColumns(){this.columns.items.forEach(e=>e.destroy()),this.columns.removeAll()}get sortOrders(){return this._grid._sorters.filter(e=>!!e).map(({direction:e,path:t})=>({direction:e,path:t}))}castVisibleElements(e){return k(k({},nz),e)}render(){const{columnMenus:e}=this.visibleElements;return $("div",{bind:this,class:this.classes(mg.base,mg.widget,{[mg.noColumnMenu]:!e})},$("div",{bind:this,class:mg.content},this.renderGrid()))}renderGrid(){return $("vaadin-grid",k({},this.getGridProps()),this.renderAllColumns())}renderAllColumns(){if(this.viewModel.state!=="disabled"&&this.columns&&this.columns.length)return[this.renderSelectionColumn(),this.renderColumns()]}renderSelectionColumn(){return $("vaadin-grid-selection-column",{_selectAllHidden:!0,selectAll:!1,bind:this,hidden:!this.visibleElements.selectionColumn,sortable:!1,frozen:!Is(this.container)})}renderColumns(){return this.columns.items.map((e,t)=>$("vaadin-grid-column",k({},this.getColumnProps(e,t))))}getGridProps(){const{columnReorderingEnabled:e,id:t,multiSortEnabled:i,pageSize:r,size:s}=this;return{_safari:!1,class:mg.grid,id:`${t}_grid`,theme:"compact column-borders",ref:"grid",bind:this,afterCreate:this._afterGridCreate,afterUpdate:this._afterGridUpdate,columnReorderingAllowed:e,pageSize:r,size:s,multiSort:i}}getColumnProps(e,t){const{id:i}=this,{autoWidth:r,direction:s,flexGrow:n,frozen:o,header:a,hidden:l,path:u,resizable:h,textAlign:f,width:y}=e;return{autoWidth:r,direction:s,flexGrow:n,frozen:o,header:a,hidden:l,key:`${i}_${a}_${N(t)?t:u}`,path:u,resizable:h,"text-align":f,width:typeof y=="number"?`${y}px`:y,bind:this,afterCreate:this._afterColumnCreate,afterRemoved:this._afterColumnRemoved}}clearSelection(){this._clearSelection(),this.scheduleRender()}clearSort(){var e,t;let i=!1;this._grid&&((e=this._grid._sorters)!=null&&e.length&&(this._grid._sorters.forEach(r=>{r._order=null,r.direction=null}),i=!0),(t=this.columns)!=null&&t.length&&this.columns.find(r=>!!r.direction)&&(this.columns.forEach(r=>r.direction=null),i=!0),i&&(this.notifyChange("sortOrders"),this.scheduleRender()))}deselectItem(e){this._deselectRowByItem(e)}deselectRow(e){const t=this.viewModel.getRowItemAt(e);t&&this._deselectRowByItem(t)}findColumn(){}generateCellClassNames(){var e;(e=this._grid)==null||e.generateCellClassNames()}getSlotElementByName(e){var t,i;return(t=this._grid)==null||(i=t.shadowRoot)==null?void 0:i.querySelector(`slot[name='${e}']`)}hideColumn(e){var t;(t=this.viewModel)==null||t.hideColumn(e),this.scheduleRender()}notifyResize(){var e;(e=this._grid)==null||e.notifyResize()}recalculateColumnWidths(){var e;(e=this._grid)==null||e.recalculateColumnWidths()}async reset(){var e;this._clearSelection(),await((e=this.store)==null?void 0:e.reset()),this.scrollToTop()}refreshPageCache(){var e;(e=this._grid)==null||e.clearCache()}selectRows(e){const t=this._grid.selectedItems.slice();e.forEach(i=>{t.findIndex(r=>r.objectId===i.objectId)<0&&this._grid.selectedItems.push(i)}),this._updateSelectionProps(),this._grid.render()}deselectRows(e){const t=this._grid.selectedItems.slice();e.forEach(i=>{const r=t.findIndex(s=>s.objectId===i.objectId);r>-1&&t.splice(r,1)}),this._grid.selectedItems=t,this._updateSelectionProps(),this._grid.render()}selectItem(e){this._selectRowByItem(e)}selectRow(e){const t=this.viewModel.getRowItemAt(e);t&&this._selectRowByItem(t)}showColumn(e){var t;(t=this.viewModel)==null||t.showColumn(e),this.scheduleRender()}sort({path:e,direction:t}){var i;(i=this.viewModel)==null||i.sortColumn(e,t),this.notifyChange("sortOrders")}scrollToIndex(e){var t;(t=this._grid)==null||t.scrollToIndex(e)}scrollToTop(){var e;(e=this._grid)==null||e.scrollToIndex(0)}isEditingActive(){return!!this._getActiveEditInfo().length}getSelectedRowIds(){return this.selectedItems.map(e=>e.objectId).toArray()}_afterGridCreate(e){const{cellClassNameGenerator:t,dataProvider:i,itemIdPath:r,rowDetailsRenderer:s}=this;e.cellClassNameGenerator=t,e.dataProvider=i,e.rowDetailsRenderer=s,e.itemIdPath=r,this._grid=e,customElements.whenDefined("vaadin-grid").then(()=>{this._appendStyles(),this._addGridEventListeners()}),this._grid.__updateSorter=n=>{const o=this._grid,a=o._sorters,l=a.indexOf(n)===-1;if(n.direction||!l){if(n._order=null,o.multiSort)o._removeArrayItem(a,n),n.direction&&(N(n._initialOrder)?(l?a[n._initialOrder]=n:a.splice(n._initialOrder,0,n),n._initialOrder=null):a.unshift(n)),o.__updateSortOrders();else if(n.direction){const u=a.filter(h=>h!==n);o._sorters=[n],u.forEach(h=>{h._order=null,h.direction=null})}}}}_afterGridUpdate(e){this._grid||(this._grid=e)}_afterColumnCreate(e){this._applyRenderersToColumnElement(e),this._columnElements.push(e)}_afterColumnRemoved(e){const t=this._columnElements.indexOf(e,0);t>-1&&this._columnElements.splice(t,1)}_syncColumnRenderers(){this._columnElements.forEach(e=>this._applyRenderersToColumnElement(e))}_appendStyles(){var e;const t=(e=this._grid)==null?void 0:e.shadowRoot,i=document.createElement("style");i.textContent=`
      :host { ${this._hostStyles} }
      [part~="header-cell"] ::slotted(vaadin-grid-cell-content) { ${this._headerStyles} }
      [part~="row"]:hover [part~="body-cell"] { ${this._rowHoverStyles} }
    `,t==null||t.appendChild(i)}_updateGridSize(){this._grid&&(this._grid.size=this.size||0,this.scheduleRender())}_getActiveEditInfo(){return!this.columns||this.columns.length?[]:this.columns.filter(e=>"activeEditInfo"in e).map(e=>e.activeEditInfo).items}_addGridEventListeners(){const{_grid:e}=this;this.handles.add([sa(e,"click",t=>this._onRowClick(t)),sa(e,"selected-items-changed",t=>this._onSelectionChange(t)),sa(e,"sorter-changed",()=>this.notifyChange("sortOrders"))])}_onRowClick(e){const{_grid:t}=this,i=t.getEventContext(e),{item:r,section:s}=i;r&&s&&s!=="details"&&s!=="header"&&this.emit("row-click",{context:i,native:e})}_selectRowByItem(e){var t;(t=this._grid)==null||t.selectItem(e)}_deselectRowByItem(e){var t;(t=this._grid)==null||t.deselectItem(e)}_clearSelection(){this._grid.selectedItems=[],this._updateSelectionProps(),this._grid.render()}_onSelectionChange(e){const t=e;if(t.detail.path==="selectedItems.splices"){const{removed:i,index:r,object:s}=t.detail.value.indexSplices[0];this._updateSelectionProps(),this.emit("selection-change",{index:r,added:s,removed:i})}}_updateSelectionProps(){this.selectedItems.length&&this.selectedItems.removeAll(),this._grid&&this.selectedItems.addMany(this._grid.selectedItems)}_applyRenderersToColumnElement(e){const t=e.getAttribute("path"),i=this.viewModel.findColumn(t);if(i)try{i.renderFunction&&(e.renderer=(r,s,n)=>i.renderFunction({root:r,column:s,rowData:n})),i.footerRenderFunction&&(e.footerRenderer=(r,s)=>i.footerRenderFunction({root:r,column:s})),i.headerRenderFunction&&(e.headerRenderer=(r,s)=>i.headerRenderFunction({root:r,column:s}))}catch{}}};c([d()],Fi.prototype,"_grid",void 0),c([ne("viewModel.cellClassNameGenerator")],Fi.prototype,"cellClassNameGenerator",void 0),c([ne("viewModel.columns")],Fi.prototype,"columns",void 0),c([ne("viewModel.columnReorderingEnabled")],Fi.prototype,"columnReorderingEnabled",void 0),c([ne("viewModel.dataProvider")],Fi.prototype,"dataProvider",void 0),c([d()],Fi.prototype,"itemIdPath",void 0),c([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Fi.prototype,"label",void 0),c([d(),Zt("esri/widgets/FeatureTable/t9n/FeatureTable")],Fi.prototype,"messages",void 0),c([ne("viewModel.multiSortEnabled")],Fi.prototype,"multiSortEnabled",void 0),c([ne("viewModel.pageSize")],Fi.prototype,"pageSize",void 0),c([ne("viewModel.rowDetailsRenderer")],Fi.prototype,"rowDetailsRenderer",void 0),c([d({readOnly:!0})],Fi.prototype,"selectedItems",void 0),c([ne("viewModel.size")],Fi.prototype,"size",void 0),c([d({readOnly:!0})],Fi.prototype,"sortOrders",null),c([ne("viewModel.store")],Fi.prototype,"store",void 0),c([d()],Fi.prototype,"viewModel",void 0),c([d()],Fi.prototype,"visibleElements",void 0),c([gt("visibleElements")],Fi.prototype,"castVisibleElements",null),c([ne("viewModel.findColumn")],Fi.prototype,"findColumn",null),Fi=c([O("esri.widgets.FeatureTable.Grid.Grid")],Fi);const XAe=Fi,JJ="esri.widgets.FeatureTable.support.FeatureStore",eMe=fe.getLogger(JJ);function $C(e,t,i){eMe.error(new B(e,t,i))}let Rr=class extends Ee{constructor(e){super(e),this._loaded=!1,this._loadError=!1,this._loading=!1,this._editOperationQueue=[],this._queryOperationQueue=[],this._objectIdCache=new ke,this._hasStaleCache=!1,this.count=0,this.failures=new ke,this.itemCache=new ke,this.relatedRecordsEnabled=!1}destroy(){this.layer=null,this.itemCache&&this.itemCache.destroy(),this.failures&&this.failures.destroy(),this._set("itemCache",null)}set attachmentsEnabled(e){this._reset(),this._set("attachmentsEnabled",e),this.notifyChange("state")}set filterGeometry(e){this._reset(),this._set("filterGeometry",e),this.notifyChange("state")}set layer(e){this._reset(),this._set("layer",e),this.notifyChange("state")}set objectIds(e){this._reset(),this._set("objectIds",e||null),this.notifyChange("state")}get orderByFields(){return this._get("orderByFields")||[]}set orderByFields(e){const t=this.orderByFields;OO(e,t)||(this.itemCache.removeAll(),this._hasStaleCache=!0,this._set("orderByFields",e))}get querying(){return this._queryOperationQueue.length>0}set returnGeometry(e){this._reset(),this._set("returnGeometry",e),this.notifyChange("state")}get state(){const{layer:e,_loaded:t,_loadError:i,_loading:r}=this;return i?"error":!e||this.get("layer.loadError")?"disabled":r?"loading":this.get("layer.loadStatus")==="loaded"&&t?"loaded":"ready"}get syncing(){return this._editOperationQueue.length>0}get where(){return this._get("where")||null}set where(e){this._reset(),this._set("where",e),this.notifyChange("state")}async load(){this._reset();const{layer:e}=this;if(!e)return Promise.resolve();this._loading=!0,this.notifyChange("state");try{await e.when(),await this._syncLayerInfo(),this._loading=!1,this._loaded=!0,this.notifyChange("state")}catch(t){throw this._reset(),this._loadError=!0,this.notifyChange("state"),$C("store:load-error","An error ocurred.",{error:t}),t}}async refreshLayerInfo(){return this._syncLayerInfo()}async addItems(e){}async fetchItems(e){const{page:t,pageSize:i}=e,r=t*i,s=r+i,{layer:n,state:o}=this;if(!n||o!=="loaded")return Promise.resolve([]);this.notifyChange("querying");const a=await this._query({start:r,num:s,page:t,pageSize:i});return this.notifyChange("state"),a}async verifyFeaturesByObjectId(e){const{layer:t,state:i}=this;if(!t||i!=="loaded")return Promise.resolve([]);const{features:r}=await this._verifyFeaturesByObjectId(e);return e.map(s=>!!r.find(n=>(n==null?void 0:n.getObjectId())===s))}async query(e){const{layer:t,state:i}=this;if(!t||i!=="loaded")return[];this.notifyChange("querying");const r=await this._query(e);return this.notifyChange("state"),r}async removeItemAt(e){}async reset(){this._reset()}async updateItem(e){return this._update(e)}getItemByObjectId(e){const{itemCache:t,layer:{objectIdField:i}}=this;return t.find(r=>r.feature.attributes[i]===e)}getLocalItemAt(e){return this.itemCache.getItemAt(e)}getItemAt(e){return Promise.resolve(this.itemCache.getItemAt(e))}getObjectIdIndex(e){const{itemCache:t,layer:{objectIdField:i}}=this;return t.findIndex(r=>r.feature.attributes[i]===e)}_reset(){this.itemCache.removeAll(),this.failures.removeAll(),this._editOperationQueue=[],this._queryOperationQueue=[],this._hasStaleCache=!1,this._loading=!1,this._loaded=!1,this._loadError=!1,this._set("count",0),this._objectIdCache.removeAll(),this.notifyChange("querying"),this.notifyChange("syncing"),this.notifyChange("state")}_getIdsFromFeatures(e){return e.map(t=>t.attributes[this.layer.objectIdField])}_toFeatureData(e,t){const{layer:{objectIdField:i}}=this;return e.map(r=>{const{attributes:s}=r,n=s[i];return{objectId:n,feature:r,attachments:t?t[n]:null,relatedRecords:null}})}async _update(e){const{layer:t}=this,{operations:i}=t.capabilities;if(!i.supportsUpdate||!("applyEdits"in t))throw new B("store:update-error","Update is not supported.");const{index:r,name:s,value:n}=e,o=await this.getItemAt(r);if(!o||!o.feature)throw new B("store:update-error","Feature with provided 'objectId' not found.");const{feature:a}=o,l=K(a.attributes);l[s]=n;const u=new xr({attributes:l}),h=t.applyEdits({updateFeatures:[u]}).then(f=>{const{updateFeatureResults:y}=f,g=y.find(b=>!!b.error);if(g)throw g.error;return y.length&&(a.attributes=l),f});return this._queueEditOperation(()=>h)}async _query(e){const{refresh:t}=e;return t===!0?(this.itemCache.removeAll(),this._syncLayerInfo().then(()=>this._queryFeatureData(e))):(this._hasStaleCache&&(await this._updateIds(),this._hasStaleCache=!1),this._queryFeatureData(e))}async _queryFeatureData(e){return this._queueQueryOperation(async()=>{const{features:t}=await this._queryFeatures(e),i=this._getIdsFromFeatures(t),r=await this._queryAttachments(i);return this._toFeatureData(t,r)||[]})}async _syncLayerInfo(){await this._updateCount(),await this._updateIds()}async _updateCount(){await this._queryCount().then(e=>this._set("count",e))}async _updateIds(){var e,t,i;(e=this.layer)!=null&&(t=e.capabilities)!=null&&(i=t.query)!=null&&i.supportsPagination||(this._objectIdCache.removeAll(),await this._queryForObjectIds().then(r=>this._objectIdCache.addMany(r)))}_queryCount(){const{filterGeometry:e,layer:t}=this,{capabilities:{query:{supportsCacheHint:i}}}=t,r=t.createQuery();return r.geometry=e,r.returnGeometry=!1,r.where=this._getWhere(),r.objectIds=this.objectIds,i&&(r.cacheHint=!0),t.queryFeatureCount(r)}_queryForObjectIds(){const{filterGeometry:e,layer:t,orderByFields:i}=this,{capabilities:{query:{supportsCacheHint:r,supportsOrderBy:s}}}=t,n=t.createQuery();return n.geometry=e,n.outFields=[t.objectIdField],n.returnGeometry=!1,n.where=this._getWhere(),n.objectIds=this.objectIds,s&&(n.orderByFields=i),r&&(n.cacheHint=!0),t.queryObjectIds(n)}async _queryFeatures(e){const{layer:t}=this;if(!t.capabilities.operations.supportsQuery)return Promise.reject(new B("store:query-error","Layer does not support query operation."));const{filterGeometry:i,layer:{capabilities:{query:{supportsCacheHint:r,supportsOrderBy:s,supportsPagination:n}}},orderByFields:o,returnGeometry:a}=this,{start:l,pageSize:u}=e,h=t.createQuery();return h.returnGeometry=a,n?(h.start=l,h.num=u,h.where=this._getWhere(),h.objectIds=this.objectIds):h.objectIds=this.objectIds||this._getObjectIdsForPage(l,u),s&&(h.orderByFields=o),i&&(h.geometry=i),r&&(h.cacheHint=!0),t.queryFeatures(h)}async _verifyFeaturesByObjectId(e){const{layer:t}=this;if(!t.capabilities.operations.supportsQuery)return Promise.reject(new B("store:query-error","Layer does not support query operation."));const{filterGeometry:i,layer:{capabilities:{query:{supportsCacheHint:r,supportsOrderBy:s}}},orderByFields:n}=this,o=t.createQuery();return o.where=this._getWhere(),o.returnGeometry=!1,o.objectIds=e,o.outFields=[t.objectIdField],s&&(o.orderByFields=n),i&&(o.geometry=i),r&&(o.cacheHint=!0),t.queryFeatures(o)}_getObjectIdsForPage(e,t){const i=this._objectIdCache.toArray();return i.length>=e+t?i.slice(e,e+t):i.slice(e)}_queryAttachments(e){const{attachmentsEnabled:t,layer:i}=this,{capabilities:{data:{supportsAttachment:r},operations:{supportsQueryAttachments:s}}}=i;return t&&r&&s&&"queryAttachments"in i?i.queryAttachments(new gv({objectIds:e,where:this._getWhere()})):Promise.resolve(null)}_queueQueryOperation(e){return this._queryOperationQueue.push(e),this.notifyChange("querying"),e().then(t=>this._queryOperationQueue.indexOf(e)>-1?(this.itemCache.addMany(t),t):[]).catch(t=>{$C("store:query-error","An error ocurred.",{error:t});const i={error:t,retry:()=>{this.failures.remove(i),this._queueQueryOperation(e)},cancel:()=>this.failures.remove(i)};return this.failures.add(i),[]}).then(t=>(pw(this._queryOperationQueue,e),this.notifyChange("querying"),t))}_queueEditOperation(e){return this._editOperationQueue.push(e),this.notifyChange("syncing"),e().then(()=>{pw(this._editOperationQueue,e),this.notifyChange("syncing")}).catch(t=>{$C("store:edit-error","An error ocurred.",{error:t});const i={error:t,retry:()=>{this.failures.remove(i),this._queueEditOperation(e)},cancel:()=>this.failures.remove(i)};throw this.failures.add(i),pw(this._editOperationQueue,e),this.notifyChange("syncing"),t})}_getWhere(){return this.where||this.layer.definitionExpression||"1=1"}};c([d()],Rr.prototype,"attachmentsEnabled",null),c([d({readOnly:!0})],Rr.prototype,"count",void 0),c([d({readOnly:!0})],Rr.prototype,"failures",void 0),c([d()],Rr.prototype,"filterGeometry",null),c([d({readOnly:!0})],Rr.prototype,"itemCache",void 0),c([d({value:null})],Rr.prototype,"layer",null),c([d({value:null})],Rr.prototype,"objectIds",null),c([d()],Rr.prototype,"orderByFields",null),c([d({readOnly:!0})],Rr.prototype,"querying",null),c([d()],Rr.prototype,"relatedRecordsEnabled",void 0),c([d({value:!1})],Rr.prototype,"returnGeometry",null),c([d({readOnly:!0})],Rr.prototype,"state",null),c([d({readOnly:!0})],Rr.prototype,"syncing",null),c([d()],Rr.prototype,"where",null),Rr=c([O(JJ)],Rr);const ZJ=Rr;let Ni=class extends Xs(VW){constructor(e){super(e),this._debounceRefresh=Nx(()=>this._refresh()),this._defaultHiddenFields=["CreationDate","Creator","EditDate","Editor","GlobalID"],this._highlights=new Ai,this.activeFilters=new ke,this.autoRefreshEnabled=!0,this.cellClassNameGenerator=(r,s)=>r.path||null,this.dataProvider=async(r,s)=>{const{store:n}=this,{page:o,pageSize:a,sortOrders:l}=r,u=this._sortOrdersToLayerOrderByFields(l);s&&(n?(await n.set({orderByFields:u}),n.state!=="loaded"&&n.state!=="loading"&&await n.load(),s&&s(await n.fetchItems({page:o,pageSize:a}))):s&&s([]))},this.editingEnabled=!1,this.grid=null,this.hiddenFields=new ke,this.highlightOnRowSelectEnabled=!0,this.itemIdPath="objectId",this.messagesCommon=null,this.relatedRecordsEnabled=!1,this.store=null,this.view=null;const{hiddenFields:t,itemIdPath:i}=this;t.addMany(this._defaultHiddenFields),this._onLayerRefresh=this._onLayerRefresh.bind(this),this._set("store",new ZJ),this._set("grid",new XAe({itemIdPath:i,viewModel:this}))}initialize(){const e=async()=>{this.messages=await Em("esri/widgets/FeatureTable/t9n/FeatureTable"),this.messagesCommon=await Em("esri/t9n/common")};e(),this.handles.add([Xv(e),Hu(()=>this.grid.selectedItems,"change",t=>this._onSelectionChange(t)),St(()=>this.relatedRecordsEnabled,t=>this.store.relatedRecordsEnabled=t),St(()=>{var t;return(t=this.layer)==null?void 0:t.loaded},t=>t&&this._onLayerLoad()),St(()=>this.store.state,t=>{var i;t==="loaded"&&((i=this.grid)==null||i.scrollToTop())}),St(()=>[this.editingEnabled,this.messages],()=>{var t;return((t=this.layer)==null?void 0:t.loaded)&&this._generateColumns()}),St(()=>{var t;return(t=this.layer)==null?void 0:t.definitionExpression},(t,i)=>(t||i)&&this.store.state==="loaded"&&this.reset()),Hu(()=>this.layer,"refresh",t=>this._onLayerRefresh(t))])}destroy(){var e,t;this._resetColumns(),this.handles.removeAll(),this._highlights.removeAll(),this._highlights.destroy(),(e=this.grid)==null||e.destroy(),(t=this.columns)==null||t.destroy(),this.layer=null,this.view=null}get activeSortOrders(){var e;return((e=this.grid)==null?void 0:e.sortOrders)||[]}set attachmentsEnabled(e){this.attachmentsEnabled!==e&&(this._set("attachmentsEnabled",e),this._generateColumns(),this.store.attachmentsEnabled=e)}set fieldConfigs(e){var t;this._set("fieldConfigs",e),(t=this.layer)!=null&&t.loaded&&this._generateColumns()}set filterGeometry(e){if(!this.filterGeometry&&!e)return;const t=this.activeFilters.find(i=>i.type==="geometry");t&&this.activeFilters.remove(t),this.clearSelection(),this._set("filterGeometry",e),this.store.filterGeometry=e,e&&this.activeFilters.add({type:"geometry",geometry:e})}set layer(e){var t;this._set("layer",e),(t=this.grid)==null||t.clearSort(),this._resetColumns(),this.store.layer=e,e&&(e.loaded?this._onLayerLoad():e.load()),this.notifyChange("state")}set messages(e){var t;(t=this.grid)==null||t.set("messages",e),this._set("messages",e)}clearHighlights(){this._highlights.removeAll()}clearSelection(){var e;(e=this.grid)==null||e.clearSelection()}deselectRows(e){const t=this._getStoreItemsFromSelectionParams(e);this.grid.deselectRows(t)}filterBySelection(){const e=this.grid.getSelectedRowIds();e.length&&(this.clearSelectionFilter(),this.store.objectIds=e,this.activeFilters.add({type:"selection",objectIds:e}))}getObjectIdIndex(e){var t;return(t=this.store)==null?void 0:t.getObjectIdIndex(e)}getValue(e,t){var i;const r=this.store.getItemByObjectId(e);return r==null||(i=r.feature)==null?void 0:i.attributes[t]}async refresh(){return B1(this._debounceRefresh())}reset(){this.grid.reset()}selectRows(e){const t=this._getStoreItemsFromSelectionParams(e);this.grid.selectRows(t)}scrollToIndex(e){var t;(t=this.grid)==null||t.scrollToIndex(e)}clearSelectionFilter(){this.store.objectIds=null;const e=this.activeFilters.find(t=>t.type==="selection");e&&this.activeFilters.remove(e)}zoomToSelection(){const{layer:e,view:t}=this,i=this.grid.getSelectedRowIds();if(!e||!t||!i.length)return;const r=e.createQuery();r.objectIds=i,r.returnGeometry=!0,e.queryFeatures(r).then(s=>{t.goTo(s.features).catch(n=>{n.name!=="AbortError"&&console.error(n)})})}async _refresh(){await this.store.refreshLayerInfo();const e=this.grid.getSelectedRowIds();e.length&&(await this.store.verifyFeaturesByObjectId(e)).forEach((t,i)=>{t||this.deselectRows(e[i])}),this.grid.refreshPageCache()}_onLayerLoad(){const e=this.layer.capabilities.query.maxRecordCount;e&&e<this.pageSize&&this.grid&&(this.grid.pageSize=e),this._generateColumns()}_onLayerRefresh(e){this.autoRefreshEnabled&&e.dataChanged&&this.refresh()}_generateColumns(){this._resetColumns(),this.columns.addMany([...this._createFieldColumns()]),this.attachmentsEnabled&&this.columns.push(this._createAttachmentsColumn())}_createFieldColumns(){return this.fieldConfigs&&this.fieldConfigs.length?this._createColumnsFromConfigs():this._createColumnsFromFields()}_createColumnsFromConfigs(){var e,t;const{editingEnabled:i,fieldConfigs:r,grid:s,hiddenFields:n,layer:o,messages:a,messagesCommon:l,store:u}=this,h=(e=(t=this.layer)==null?void 0:t.fields)!=null?e:[];return r.filter(f=>(h||[]).find(y=>f.name===y.name)).map(f=>{const y=f.direction||null,g=f.formatFunction||null,b=f.textAlign||null,w=N(f.initialSortPriority)?f.initialSortPriority:null,x=(h||[]).find(M=>f.name===M.name),T=f.visible===!1||f.visible!==!0&&n.indexOf(x.name)>-1;return new Z4({config:f,direction:y,editingEnabled:i,field:x,formatFunction:g,grid:s,hidden:T,layer:o,store:u,messages:a,messagesCommon:l,textAlign:b,initialSortPriority:w})})}_createColumnsFromFields(){var e,t;const{editingEnabled:i,grid:r,hiddenFields:s,layer:n,messages:o,messagesCommon:a,store:l}=this;return((e=(t=this.layer)==null?void 0:t.fields)!=null?e:[]).map(u=>{const h=s.indexOf(u.name)>-1;return new Z4({editingEnabled:i,field:u,grid:r,hidden:h,layer:n,store:l,messages:o,messagesCommon:a})})}_createAttachmentsColumn(){var e;return new tCe({header:(e=this.messages)==null?void 0:e.attachments})}_sortOrdersToLayerOrderByFields(e){return e&&e.length?e.filter((t,i,r)=>r.map(s=>s.path).indexOf(t.path)===i).filter(({direction:t})=>!!t).map(({direction:t,path:i})=>i+" "+t.toUpperCase()):[]}_highlight(e){const{view:t}=this,i=t&&e&&t.allLayerViews.items.find(({layer:r})=>r===e.layer);eL(i)&&this._highlights.add(i.highlight(e),`feature-${e.getObjectId()}`)}_unhighlight(e){e&&this._highlights.remove(`feature-${e.getObjectId()}`)}_getStoreItemsFromSelectionParams(e){const t=[];return(e=e instanceof Array?e:[e]).forEach(i=>{let r=i instanceof xr?i:null;const s=r?r.getObjectId():i;if(typeof s=="number"||typeof s=="string"){if(!r){const n=this.store.getItemByObjectId(s);n&&(r=n.feature)}t.push({objectId:s,feature:r})}}),t}_onSelectionChange(e){const{highlightOnRowSelectEnabled:t}=this,{added:i,removed:r}=e;t&&i.forEach(s=>this._highlight(s.feature)),t&&r.forEach(s=>this._unhighlight(s.feature))}_resetColumns(){this.columns.items.forEach(e=>e.destroy()),this.columns.removeAll()}};c([d({readOnly:!0})],Ni.prototype,"activeFilters",void 0),c([d({readOnly:!0})],Ni.prototype,"activeSortOrders",null),c([d()],Ni.prototype,"attachmentsEnabled",null),c([d()],Ni.prototype,"autoRefreshEnabled",void 0),c([d()],Ni.prototype,"cellClassNameGenerator",void 0),c([d()],Ni.prototype,"dataProvider",void 0),c([d()],Ni.prototype,"editingEnabled",void 0),c([d()],Ni.prototype,"fieldConfigs",null),c([d()],Ni.prototype,"filterGeometry",null),c([d({readOnly:!0})],Ni.prototype,"grid",void 0),c([d()],Ni.prototype,"hiddenFields",void 0),c([d()],Ni.prototype,"highlightOnRowSelectEnabled",void 0),c([d({readOnly:!0})],Ni.prototype,"itemIdPath",void 0),c([d()],Ni.prototype,"layer",null),c([d()],Ni.prototype,"messages",null),c([d()],Ni.prototype,"messagesCommon",void 0),c([d()],Ni.prototype,"relatedRecordsEnabled",void 0),c([d({readOnly:!0,type:ZJ})],Ni.prototype,"store",void 0),c([d()],Ni.prototype,"view",void 0),Ni=c([O("esri.widgets.FeatureTable.FeatureTableViewModel")],Ni);const tMe=Ni,oz={header:!0,menu:!0,menuItems:{clearSelection:!0,refreshData:!0,toggleColumns:!0,selectedRecordsShowAllToggle:!0,selectedRecordsShowSelectedToggle:!0,zoomToSelection:!0},selectionColumn:!0,columnMenus:!0},hn={base:"esri-feature-table",header:"esri-feature-table__header",title:"esri-feature-table__title",content:"esri-feature-table__content",loader:"esri-feature-table__loader",loaderContainer:"esri-feature-table__loader-container",menuContainer:"esri-feature-table__menu",menuIcon:"esri-icon-handle-horizontal",menuItemGroupOpenedIcon:"esri-icon-down",menuItemGroupClosedIcon:"esri-icon-right",checkmarkIcon:"esri-icon-check-mark",widget:"esri-widget"};let Ct=class extends Xs(Yt){constructor(e,t){super(e,t),this.activeSortOrders=null,this.attachmentsEnabled=null,this.autoRefreshEnabled=null,this.columnReorderingEnabled=null,this.columns=null,this.editingEnabled=null,this.fieldConfigs=null,this.filterGeometry=null,this.grid=null,this.highlightOnRowSelectEnabled=null,this.label=void 0,this.layer=null,this.messages=null,this.menu=null,this.menuConfig=null,this.multiSortEnabled=null,this.pageSize=null,this.relatedRecordsEnabled=null,this.state=null,this.view=null,this.viewModel=new tMe,this.visibleElements=k({},oz)}initialize(){var e,t,i;const r=async()=>this.messages=await Em("esri/widgets/FeatureTable/t9n/FeatureTable");r(),this.handles.add([Xv(r),Hu(()=>this.viewModel.columns,"change",()=>this._syncMenuConfig()),Hu(()=>this.viewModel.activeFilters,"change",()=>this._syncMenuConfig()),Hu(()=>this.grid.selectedItems,"change",o=>{this._syncMenuConfig(),this._onSelectionChange(o)}),St(()=>[this.viewModel.store.querying,this.viewModel.store.syncing],()=>this.scheduleRender()),St(()=>this.menuConfig,()=>this._syncMenuConfig()),St(()=>this.messages,()=>{var o;this.menu.label=(o=this.messages)==null?void 0:o.options,this._syncMenuConfig()})]),this._set("menu",new LW(k({label:(e=this.messages)==null?void 0:e.options,iconClass:hn.menuIcon},this.menuConfig)));const{attachmentsEnabled:s,relatedRecordsEnabled:n}=this;(t=this.viewModel)==null||(i=t.store)==null||i.set({attachmentsEnabled:s,relatedRecordsEnabled:n})}destroy(){var e;this.clearSelection(),this.handles.removeAll(),(e=this.menu)==null||e.destroy()}castVisibleElements(e){var t;const i=k(k({},oz),e);return(t=this.grid)==null||t.set("visibleElements",be(k({},this.grid.visibleElements),{selectionColumn:i.selectionColumn,columnMenus:i.columnMenus})),i}clearHighlights(){}clearSelection(){}clearSelectionFilter(){}deselectRows(){}filterBySelection(){}hideColumn(e){var t;(t=this.grid)==null||t.hideColumn(e),this._syncMenuConfig()}refresh(){}showColumn(e){var t;(t=this.grid)==null||t.showColumn(e),this._syncMenuConfig()}sortColumn(){}selectRows(){}scrollToIndex(){}render(){var e;return $("div",{bind:this,class:this.classes(hn.base,hn.widget)},this.visibleElements.header?this._renderHeader():null,$("div",{class:hn.content},this.state!=="disabled"&&((e=this.grid)==null?void 0:e.render())))}zoomToSelection(){}_renderHeader(){return $("div",{key:"header",class:hn.header},this._renderLoader(),this._renderTitle(),this.visibleElements.menu?this._renderMenu():null)}_renderTitle(){return $("div",{class:hn.title,key:"title"},this._getTitle())}_getTitle(){const{grid:e,layer:{title:t},messages:i,viewModel:{size:r}}=this;return e?wr(i.header,{title:t,count:r,selected:e.selectedItems.length||0}):""}_renderLoader(){const{state:e,store:t}=this.viewModel,i=e==="loading"||t.syncing||t.querying;return $("div",{class:hn.loaderContainer},i?$("div",{class:hn.loader,key:"loader"}):null)}_renderMenu(){return $("div",{class:hn.menuContainer},this.menu.render())}_onSelectionChange(e){const{added:t,removed:i}=e;this.emit("selection-change",{added:[...t],removed:[...i]})}_syncMenuConfig(){var e;(e=this.menu)==null||e.set(be(k({},this.menuConfig),{items:this._getMenuItems()}))}_getMenuItems(){var e;const t=(e=this.menuConfig)==null?void 0:e.items,i=this._getDefaultMenuItems(),r=[];return i!=null&&i.length&&r.push(...i),t!=null&&t.length&&r.push(...t),r}_getDefaultMenuItems(){var e;const{messages:t,viewModel:i,visibleElements:r}=this,{menuItems:s}=r,n=[];if(s!=null&&s.refreshData&&n.push(new Kl({selectionEnabled:!1,label:t==null?void 0:t.refreshData,clickFunction:()=>this.refresh()})),this._hasActiveSelection()){const o=this.grid.selectedItems.length,a=this._getSelectionFilter();if(s!=null&&s.clearSelection&&n.push(new Kl({selectionEnabled:!1,label:t==null?void 0:t.clearSelection,clickFunction:()=>this.clearSelection()})),s!=null&&s.zoomToSelection&&this.view&&n.push(new Kl({selectionEnabled:!1,label:t==null?void 0:t.zoomToSelection,clickFunction:()=>this.viewModel.zoomToSelection()})),s!=null&&s.selectedRecordsShowSelectedToggle&&(!a||o!==a.objectIds.length)){const l=t.showSelected,u=new Kl({selectionEnabled:!1,label:l,clickFunction:()=>{this.filterBySelection(),u.set("label",l)}});n.push(u)}}if(s!=null&&s.selectedRecordsShowAllToggle&&this._hasSelectionFilter()){const o=t.showAllRecords,a=new Kl({selectionEnabled:!1,label:o,clickFunction:()=>{this.clearSelectionFilter(),a.set("label",o)}});n.push(a)}return s!=null&&s.toggleColumns&&n.push(new Kl({iconClass:hn.menuItemGroupClosedIcon,label:t==null?void 0:t.toggleColumns,clickFunction:this._toggleMenuItemSelectedIcon,items:i==null||(e=i.columns)==null?void 0:e.items.map(({header:o,hidden:a,path:l})=>new Kl({label:o||l,selected:!a,selectionEnabled:!0,iconClass:hn.checkmarkIcon,clickFunction:()=>this._toggleColumnFromMenuItem(l)}))})),n.length?n:null}_toggleMenuItemSelectedIcon({item:e}){e==null||e.set("iconClass",e!=null&&e.selected?hn.menuItemGroupOpenedIcon:hn.menuItemGroupClosedIcon)}_toggleColumnFromMenuItem(e){const{grid:t,viewModel:i}=this,r=i.findColumn(e);r!=null&&r.hidden?t.showColumn(e):t.hideColumn(e)}_hasActiveSelection(){var e,t;return!((e=this.grid)==null||(t=e.selectedItems)==null||!t.length)}_getSelectionFilter(){var e;return(e=this.viewModel.activeFilters)==null?void 0:e.find(t=>t.type==="selection")}_hasSelectionFilter(){return!!this._getSelectionFilter()}};c([ne("viewModel.activeSortOrders")],Ct.prototype,"activeSortOrders",void 0),c([ne("viewModel.attachmentsEnabled")],Ct.prototype,"attachmentsEnabled",void 0),c([ne("viewModel.autoRefreshEnabled")],Ct.prototype,"autoRefreshEnabled",void 0),c([ne("viewModel.columnReorderingEnabled")],Ct.prototype,"columnReorderingEnabled",void 0),c([ne("viewModel.columns")],Ct.prototype,"columns",void 0),c([ne("viewModel.editingEnabled")],Ct.prototype,"editingEnabled",void 0),c([ne("viewModel.fieldConfigs")],Ct.prototype,"fieldConfigs",void 0),c([ne("viewModel.filterGeometry")],Ct.prototype,"filterGeometry",void 0),c([ne("viewModel.grid")],Ct.prototype,"grid",void 0),c([ne("viewModel.highlightOnRowSelectEnabled")],Ct.prototype,"highlightOnRowSelectEnabled",void 0),c([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ct.prototype,"label",void 0),c([ne("viewModel.layer")],Ct.prototype,"layer",void 0),c([d(),Zt("esri/widgets/FeatureTable/t9n/FeatureTable")],Ct.prototype,"messages",void 0),c([d({readOnly:!0})],Ct.prototype,"menu",void 0),c([d()],Ct.prototype,"menuConfig",void 0),c([ne("viewModel.multiSortEnabled")],Ct.prototype,"multiSortEnabled",void 0),c([ne("viewModel.pageSize")],Ct.prototype,"pageSize",void 0),c([ne("viewModel.relatedRecordsEnabled")],Ct.prototype,"relatedRecordsEnabled",void 0),c([ne("viewModel.state")],Ct.prototype,"state",void 0),c([ne("viewModel.view")],Ct.prototype,"view",void 0),c([d()],Ct.prototype,"viewModel",void 0),c([d()],Ct.prototype,"visibleElements",void 0),c([gt("visibleElements")],Ct.prototype,"castVisibleElements",null),c([ne("viewModel.clearHighlights")],Ct.prototype,"clearHighlights",null),c([ne("viewModel.clearSelection")],Ct.prototype,"clearSelection",null),c([ne("viewModel.clearSelectionFilter")],Ct.prototype,"clearSelectionFilter",null),c([ne("viewModel.deselectRows")],Ct.prototype,"deselectRows",null),c([ne("viewModel.filterBySelection")],Ct.prototype,"filterBySelection",null),c([ne("viewModel.refresh")],Ct.prototype,"refresh",null),c([ne("viewModel.sortColumn")],Ct.prototype,"sortColumn",null),c([ne("viewModel.selectRows")],Ct.prototype,"selectRows",null),c([ne("viewModel.scrollToIndex")],Ct.prototype,"scrollToIndex",null),c([ne("viewModel.zoomToSelection")],Ct.prototype,"zoomToSelection",null),Ct=c([O("esri.widgets.FeatureTable")],Ct);var YJ={exports:{}};/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */(function(e){(function(t,i){e.exports=t.document?i(t,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return i(r)}})(typeof window!="undefined"?window:OZ,function(t,i){var r=[],s=Object.getPrototypeOf,n=r.slice,o=r.flat?function(m){return r.flat.call(m)}:function(m){return r.concat.apply([],m)},a=r.push,l=r.indexOf,u={},h=u.toString,f=u.hasOwnProperty,y=f.toString,g=y.call(Object),b={},w=function(v){return typeof v=="function"&&typeof v.nodeType!="number"&&typeof v.item!="function"},x=function(v){return v!=null&&v===v.window},T=t.document,M={type:!0,src:!0,nonce:!0,noModule:!0};function F(m,v,S){S=S||T;var I,C,E=S.createElement("script");if(E.text=m,v)for(I in M)C=v[I]||v.getAttribute&&v.getAttribute(I),C&&E.setAttribute(I,C);S.head.appendChild(E).parentNode.removeChild(E)}function D(m){return m==null?m+"":typeof m=="object"||typeof m=="function"?u[h.call(m)]||"object":typeof m}var R="3.6.0",_=function(m,v){return new _.fn.init(m,v)};_.fn=_.prototype={jquery:R,constructor:_,length:0,toArray:function(){return n.call(this)},get:function(m){return m==null?n.call(this):m<0?this[m+this.length]:this[m]},pushStack:function(m){var v=_.merge(this.constructor(),m);return v.prevObject=this,v},each:function(m){return _.each(this,m)},map:function(m){return this.pushStack(_.map(this,function(v,S){return m.call(v,S,v)}))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(_.grep(this,function(m,v){return(v+1)%2}))},odd:function(){return this.pushStack(_.grep(this,function(m,v){return v%2}))},eq:function(m){var v=this.length,S=+m+(m<0?v:0);return this.pushStack(S>=0&&S<v?[this[S]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:r.sort,splice:r.splice},_.extend=_.fn.extend=function(){var m,v,S,I,C,E,P=arguments[0]||{},V=1,U=arguments.length,Z=!1;for(typeof P=="boolean"&&(Z=P,P=arguments[V]||{},V++),typeof P!="object"&&!w(P)&&(P={}),V===U&&(P=this,V--);V<U;V++)if((m=arguments[V])!=null)for(v in m)I=m[v],!(v==="__proto__"||P===I)&&(Z&&I&&(_.isPlainObject(I)||(C=Array.isArray(I)))?(S=P[v],C&&!Array.isArray(S)?E=[]:!C&&!_.isPlainObject(S)?E={}:E=S,C=!1,P[v]=_.extend(Z,E,I)):I!==void 0&&(P[v]=I));return P},_.extend({expando:"jQuery"+(R+Math.random()).replace(/\D/g,""),isReady:!0,error:function(m){throw new Error(m)},noop:function(){},isPlainObject:function(m){var v,S;return!m||h.call(m)!=="[object Object]"?!1:(v=s(m),v?(S=f.call(v,"constructor")&&v.constructor,typeof S=="function"&&y.call(S)===g):!0)},isEmptyObject:function(m){var v;for(v in m)return!1;return!0},globalEval:function(m,v,S){F(m,{nonce:v&&v.nonce},S)},each:function(m,v){var S,I=0;if(q(m))for(S=m.length;I<S&&v.call(m[I],I,m[I])!==!1;I++);else for(I in m)if(v.call(m[I],I,m[I])===!1)break;return m},makeArray:function(m,v){var S=v||[];return m!=null&&(q(Object(m))?_.merge(S,typeof m=="string"?[m]:m):a.call(S,m)),S},inArray:function(m,v,S){return v==null?-1:l.call(v,m,S)},merge:function(m,v){for(var S=+v.length,I=0,C=m.length;I<S;I++)m[C++]=v[I];return m.length=C,m},grep:function(m,v,S){for(var I,C=[],E=0,P=m.length,V=!S;E<P;E++)I=!v(m[E],E),I!==V&&C.push(m[E]);return C},map:function(m,v,S){var I,C,E=0,P=[];if(q(m))for(I=m.length;E<I;E++)C=v(m[E],E,S),C!=null&&P.push(C);else for(E in m)C=v(m[E],E,S),C!=null&&P.push(C);return o(P)},guid:1,support:b}),typeof Symbol=="function"&&(_.fn[Symbol.iterator]=r[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(m,v){u["[object "+v+"]"]=v.toLowerCase()});function q(m){var v=!!m&&"length"in m&&m.length,S=D(m);return w(m)||x(m)?!1:S==="array"||v===0||typeof v=="number"&&v>0&&v-1 in m}var W=function(m){var v,S,I,C,E,P,V,U,Z,ie,me,ee,le,De,ct,je,sr,Wi,nn,Qt="sizzle"+1*new Date,at=m.document,ks=0,Mt=0,wi=H_(),ky=H_(),B_=H_(),on=H_(),md=function(L,z){return L===z&&(me=!0),0},yd={}.hasOwnProperty,Ps=[],xc=Ps.pop,Un=Ps.push,Ic=Ps.push,mR=Ps.slice,gd=function(L,z){for(var H=0,ce=L.length;H<ce;H++)if(L[H]===z)return H;return-1},fT="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",zt="[\\x20\\t\\r\\n\\f]",vd="(?:\\\\[\\da-fA-F]{1,6}"+zt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",yR="\\["+zt+"*("+vd+")(?:"+zt+"*([*^$|!~]?=)"+zt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+vd+"))|)"+zt+"*\\]",mT=":("+vd+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+yR+")*)|.*)\\)|)",fZ=new RegExp(zt+"+","g"),q_=new RegExp("^"+zt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+zt+"+$","g"),mZ=new RegExp("^"+zt+"*,"+zt+"*"),gR=new RegExp("^"+zt+"*([>+~]|"+zt+")"+zt+"*"),yZ=new RegExp(zt+"|>"),gZ=new RegExp(mT),vZ=new RegExp("^"+vd+"$"),G_={ID:new RegExp("^#("+vd+")"),CLASS:new RegExp("^\\.("+vd+")"),TAG:new RegExp("^("+vd+"|[*])"),ATTR:new RegExp("^"+yR),PSEUDO:new RegExp("^"+mT),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+zt+"*(even|odd|(([+-]|)(\\d*)n|)"+zt+"*(?:([+-]|)"+zt+"*(\\d+)|))"+zt+"*\\)|)","i"),bool:new RegExp("^(?:"+fT+")$","i"),needsContext:new RegExp("^"+zt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+zt+"*((?:-\\d)?\\d*)"+zt+"*\\)|)(?=[^-]|$)","i")},_Z=/HTML$/i,bZ=/^(?:input|select|textarea|button)$/i,wZ=/^h\d$/i,Py=/^[^{]+\{\s*\[native \w/,SZ=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yT=/[+~]/,gl=new RegExp("\\\\[\\da-fA-F]{1,6}"+zt+"?|\\\\([^\\r\\n\\f])","g"),vl=function(L,z){var H="0x"+L.slice(1)-65536;return z||(H<0?String.fromCharCode(H+65536):String.fromCharCode(H>>10|55296,H&1023|56320))},vR=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,_R=function(L,z){return z?L==="\0"?"\uFFFD":L.slice(0,-1)+"\\"+L.charCodeAt(L.length-1).toString(16)+" ":"\\"+L},bR=function(){ee()},xZ=J_(function(L){return L.disabled===!0&&L.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Ic.apply(Ps=mR.call(at.childNodes),at.childNodes),Ps[at.childNodes.length].nodeType}catch{Ic={apply:Ps.length?function(z,H){Un.apply(z,mR.call(H))}:function(z,H){for(var ce=z.length,Y=0;z[ce++]=H[Y++];);z.length=ce-1}}}function ti(L,z,H,ce){var Y,de,ye,Ie,Ae,We,Ge,Ye=z&&z.ownerDocument,_t=z?z.nodeType:9;if(H=H||[],typeof L!="string"||!L||_t!==1&&_t!==9&&_t!==11)return H;if(!ce&&(ee(z),z=z||le,ct)){if(_t!==11&&(Ae=SZ.exec(L)))if(Y=Ae[1]){if(_t===9)if(ye=z.getElementById(Y)){if(ye.id===Y)return H.push(ye),H}else return H;else if(Ye&&(ye=Ye.getElementById(Y))&&nn(z,ye)&&ye.id===Y)return H.push(ye),H}else{if(Ae[2])return Ic.apply(H,z.getElementsByTagName(L)),H;if((Y=Ae[3])&&S.getElementsByClassName&&z.getElementsByClassName)return Ic.apply(H,z.getElementsByClassName(Y)),H}if(S.qsa&&!on[L+" "]&&(!je||!je.test(L))&&(_t!==1||z.nodeName.toLowerCase()!=="object")){if(Ge=L,Ye=z,_t===1&&(yZ.test(L)||gR.test(L))){for(Ye=yT.test(L)&&vT(z.parentNode)||z,(Ye!==z||!S.scope)&&((Ie=z.getAttribute("id"))?Ie=Ie.replace(vR,_R):z.setAttribute("id",Ie=Qt)),We=P(L),de=We.length;de--;)We[de]=(Ie?"#"+Ie:":scope")+" "+W_(We[de]);Ge=We.join(",")}try{return Ic.apply(H,Ye.querySelectorAll(Ge)),H}catch{on(L,!0)}finally{Ie===Qt&&z.removeAttribute("id")}}}return U(L.replace(q_,"$1"),z,H,ce)}function H_(){var L=[];function z(H,ce){return L.push(H+" ")>I.cacheLength&&delete z[L.shift()],z[H+" "]=ce}return z}function To(L){return L[Qt]=!0,L}function $o(L){var z=le.createElement("fieldset");try{return!!L(z)}catch{return!1}finally{z.parentNode&&z.parentNode.removeChild(z),z=null}}function gT(L,z){for(var H=L.split("|"),ce=H.length;ce--;)I.attrHandle[H[ce]]=z}function wR(L,z){var H=z&&L,ce=H&&L.nodeType===1&&z.nodeType===1&&L.sourceIndex-z.sourceIndex;if(ce)return ce;if(H){for(;H=H.nextSibling;)if(H===z)return-1}return L?1:-1}function IZ(L){return function(z){var H=z.nodeName.toLowerCase();return H==="input"&&z.type===L}}function TZ(L){return function(z){var H=z.nodeName.toLowerCase();return(H==="input"||H==="button")&&z.type===L}}function SR(L){return function(z){return"form"in z?z.parentNode&&z.disabled===!1?"label"in z?"label"in z.parentNode?z.parentNode.disabled===L:z.disabled===L:z.isDisabled===L||z.isDisabled!==!L&&xZ(z)===L:z.disabled===L:"label"in z?z.disabled===L:!1}}function _d(L){return To(function(z){return z=+z,To(function(H,ce){for(var Y,de=L([],H.length,z),ye=de.length;ye--;)H[Y=de[ye]]&&(H[Y]=!(ce[Y]=H[Y]))})})}function vT(L){return L&&typeof L.getElementsByTagName!="undefined"&&L}S=ti.support={},E=ti.isXML=function(L){var z=L&&L.namespaceURI,H=L&&(L.ownerDocument||L).documentElement;return!_Z.test(z||H&&H.nodeName||"HTML")},ee=ti.setDocument=function(L){var z,H,ce=L?L.ownerDocument||L:at;return ce==le||ce.nodeType!==9||!ce.documentElement||(le=ce,De=le.documentElement,ct=!E(le),at!=le&&(H=le.defaultView)&&H.top!==H&&(H.addEventListener?H.addEventListener("unload",bR,!1):H.attachEvent&&H.attachEvent("onunload",bR)),S.scope=$o(function(Y){return De.appendChild(Y).appendChild(le.createElement("div")),typeof Y.querySelectorAll!="undefined"&&!Y.querySelectorAll(":scope fieldset div").length}),S.attributes=$o(function(Y){return Y.className="i",!Y.getAttribute("className")}),S.getElementsByTagName=$o(function(Y){return Y.appendChild(le.createComment("")),!Y.getElementsByTagName("*").length}),S.getElementsByClassName=Py.test(le.getElementsByClassName),S.getById=$o(function(Y){return De.appendChild(Y).id=Qt,!le.getElementsByName||!le.getElementsByName(Qt).length}),S.getById?(I.filter.ID=function(Y){var de=Y.replace(gl,vl);return function(ye){return ye.getAttribute("id")===de}},I.find.ID=function(Y,de){if(typeof de.getElementById!="undefined"&&ct){var ye=de.getElementById(Y);return ye?[ye]:[]}}):(I.filter.ID=function(Y){var de=Y.replace(gl,vl);return function(ye){var Ie=typeof ye.getAttributeNode!="undefined"&&ye.getAttributeNode("id");return Ie&&Ie.value===de}},I.find.ID=function(Y,de){if(typeof de.getElementById!="undefined"&&ct){var ye,Ie,Ae,We=de.getElementById(Y);if(We){if(ye=We.getAttributeNode("id"),ye&&ye.value===Y)return[We];for(Ae=de.getElementsByName(Y),Ie=0;We=Ae[Ie++];)if(ye=We.getAttributeNode("id"),ye&&ye.value===Y)return[We]}return[]}}),I.find.TAG=S.getElementsByTagName?function(Y,de){if(typeof de.getElementsByTagName!="undefined")return de.getElementsByTagName(Y);if(S.qsa)return de.querySelectorAll(Y)}:function(Y,de){var ye,Ie=[],Ae=0,We=de.getElementsByTagName(Y);if(Y==="*"){for(;ye=We[Ae++];)ye.nodeType===1&&Ie.push(ye);return Ie}return We},I.find.CLASS=S.getElementsByClassName&&function(Y,de){if(typeof de.getElementsByClassName!="undefined"&&ct)return de.getElementsByClassName(Y)},sr=[],je=[],(S.qsa=Py.test(le.querySelectorAll))&&($o(function(Y){var de;De.appendChild(Y).innerHTML="<a id='"+Qt+"'></a><select id='"+Qt+"-\r\\' msallowcapture=''><option selected=''></option></select>",Y.querySelectorAll("[msallowcapture^='']").length&&je.push("[*^$]="+zt+`*(?:''|"")`),Y.querySelectorAll("[selected]").length||je.push("\\["+zt+"*(?:value|"+fT+")"),Y.querySelectorAll("[id~="+Qt+"-]").length||je.push("~="),de=le.createElement("input"),de.setAttribute("name",""),Y.appendChild(de),Y.querySelectorAll("[name='']").length||je.push("\\["+zt+"*name"+zt+"*="+zt+`*(?:''|"")`),Y.querySelectorAll(":checked").length||je.push(":checked"),Y.querySelectorAll("a#"+Qt+"+*").length||je.push(".#.+[+~]"),Y.querySelectorAll("\\\f"),je.push("[\\r\\n\\f]")}),$o(function(Y){Y.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var de=le.createElement("input");de.setAttribute("type","hidden"),Y.appendChild(de).setAttribute("name","D"),Y.querySelectorAll("[name=d]").length&&je.push("name"+zt+"*[*^$|!~]?="),Y.querySelectorAll(":enabled").length!==2&&je.push(":enabled",":disabled"),De.appendChild(Y).disabled=!0,Y.querySelectorAll(":disabled").length!==2&&je.push(":enabled",":disabled"),Y.querySelectorAll("*,:x"),je.push(",.*:")})),(S.matchesSelector=Py.test(Wi=De.matches||De.webkitMatchesSelector||De.mozMatchesSelector||De.oMatchesSelector||De.msMatchesSelector))&&$o(function(Y){S.disconnectedMatch=Wi.call(Y,"*"),Wi.call(Y,"[s!='']:x"),sr.push("!=",mT)}),je=je.length&&new RegExp(je.join("|")),sr=sr.length&&new RegExp(sr.join("|")),z=Py.test(De.compareDocumentPosition),nn=z||Py.test(De.contains)?function(Y,de){var ye=Y.nodeType===9?Y.documentElement:Y,Ie=de&&de.parentNode;return Y===Ie||!!(Ie&&Ie.nodeType===1&&(ye.contains?ye.contains(Ie):Y.compareDocumentPosition&&Y.compareDocumentPosition(Ie)&16))}:function(Y,de){if(de){for(;de=de.parentNode;)if(de===Y)return!0}return!1},md=z?function(Y,de){if(Y===de)return me=!0,0;var ye=!Y.compareDocumentPosition-!de.compareDocumentPosition;return ye||(ye=(Y.ownerDocument||Y)==(de.ownerDocument||de)?Y.compareDocumentPosition(de):1,ye&1||!S.sortDetached&&de.compareDocumentPosition(Y)===ye?Y==le||Y.ownerDocument==at&&nn(at,Y)?-1:de==le||de.ownerDocument==at&&nn(at,de)?1:ie?gd(ie,Y)-gd(ie,de):0:ye&4?-1:1)}:function(Y,de){if(Y===de)return me=!0,0;var ye,Ie=0,Ae=Y.parentNode,We=de.parentNode,Ge=[Y],Ye=[de];if(!Ae||!We)return Y==le?-1:de==le?1:Ae?-1:We?1:ie?gd(ie,Y)-gd(ie,de):0;if(Ae===We)return wR(Y,de);for(ye=Y;ye=ye.parentNode;)Ge.unshift(ye);for(ye=de;ye=ye.parentNode;)Ye.unshift(ye);for(;Ge[Ie]===Ye[Ie];)Ie++;return Ie?wR(Ge[Ie],Ye[Ie]):Ge[Ie]==at?-1:Ye[Ie]==at?1:0}),le},ti.matches=function(L,z){return ti(L,null,null,z)},ti.matchesSelector=function(L,z){if(ee(L),S.matchesSelector&&ct&&!on[z+" "]&&(!sr||!sr.test(z))&&(!je||!je.test(z)))try{var H=Wi.call(L,z);if(H||S.disconnectedMatch||L.document&&L.document.nodeType!==11)return H}catch{on(z,!0)}return ti(z,le,null,[L]).length>0},ti.contains=function(L,z){return(L.ownerDocument||L)!=le&&ee(L),nn(L,z)},ti.attr=function(L,z){(L.ownerDocument||L)!=le&&ee(L);var H=I.attrHandle[z.toLowerCase()],ce=H&&yd.call(I.attrHandle,z.toLowerCase())?H(L,z,!ct):void 0;return ce!==void 0?ce:S.attributes||!ct?L.getAttribute(z):(ce=L.getAttributeNode(z))&&ce.specified?ce.value:null},ti.escape=function(L){return(L+"").replace(vR,_R)},ti.error=function(L){throw new Error("Syntax error, unrecognized expression: "+L)},ti.uniqueSort=function(L){var z,H=[],ce=0,Y=0;if(me=!S.detectDuplicates,ie=!S.sortStable&&L.slice(0),L.sort(md),me){for(;z=L[Y++];)z===L[Y]&&(ce=H.push(Y));for(;ce--;)L.splice(H[ce],1)}return ie=null,L},C=ti.getText=function(L){var z,H="",ce=0,Y=L.nodeType;if(Y){if(Y===1||Y===9||Y===11){if(typeof L.textContent=="string")return L.textContent;for(L=L.firstChild;L;L=L.nextSibling)H+=C(L)}else if(Y===3||Y===4)return L.nodeValue}else for(;z=L[ce++];)H+=C(z);return H},I=ti.selectors={cacheLength:50,createPseudo:To,match:G_,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(L){return L[1]=L[1].replace(gl,vl),L[3]=(L[3]||L[4]||L[5]||"").replace(gl,vl),L[2]==="~="&&(L[3]=" "+L[3]+" "),L.slice(0,4)},CHILD:function(L){return L[1]=L[1].toLowerCase(),L[1].slice(0,3)==="nth"?(L[3]||ti.error(L[0]),L[4]=+(L[4]?L[5]+(L[6]||1):2*(L[3]==="even"||L[3]==="odd")),L[5]=+(L[7]+L[8]||L[3]==="odd")):L[3]&&ti.error(L[0]),L},PSEUDO:function(L){var z,H=!L[6]&&L[2];return G_.CHILD.test(L[0])?null:(L[3]?L[2]=L[4]||L[5]||"":H&&gZ.test(H)&&(z=P(H,!0))&&(z=H.indexOf(")",H.length-z)-H.length)&&(L[0]=L[0].slice(0,z),L[2]=H.slice(0,z)),L.slice(0,3))}},filter:{TAG:function(L){var z=L.replace(gl,vl).toLowerCase();return L==="*"?function(){return!0}:function(H){return H.nodeName&&H.nodeName.toLowerCase()===z}},CLASS:function(L){var z=wi[L+" "];return z||(z=new RegExp("(^|"+zt+")"+L+"("+zt+"|$)"))&&wi(L,function(H){return z.test(typeof H.className=="string"&&H.className||typeof H.getAttribute!="undefined"&&H.getAttribute("class")||"")})},ATTR:function(L,z,H){return function(ce){var Y=ti.attr(ce,L);return Y==null?z==="!=":z?(Y+="",z==="="?Y===H:z==="!="?Y!==H:z==="^="?H&&Y.indexOf(H)===0:z==="*="?H&&Y.indexOf(H)>-1:z==="$="?H&&Y.slice(-H.length)===H:z==="~="?(" "+Y.replace(fZ," ")+" ").indexOf(H)>-1:z==="|="?Y===H||Y.slice(0,H.length+1)===H+"-":!1):!0}},CHILD:function(L,z,H,ce,Y){var de=L.slice(0,3)!=="nth",ye=L.slice(-4)!=="last",Ie=z==="of-type";return ce===1&&Y===0?function(Ae){return!!Ae.parentNode}:function(Ae,We,Ge){var Ye,_t,ii,Je,nr,Hr,an=de!==ye?"nextSibling":"previousSibling",gi=Ae.parentNode,Ly=Ie&&Ae.nodeName.toLowerCase(),Ry=!Ge&&!Ie,ln=!1;if(gi){if(de){for(;an;){for(Je=Ae;Je=Je[an];)if(Ie?Je.nodeName.toLowerCase()===Ly:Je.nodeType===1)return!1;Hr=an=L==="only"&&!Hr&&"nextSibling"}return!0}if(Hr=[ye?gi.firstChild:gi.lastChild],ye&&Ry){for(Je=gi,ii=Je[Qt]||(Je[Qt]={}),_t=ii[Je.uniqueID]||(ii[Je.uniqueID]={}),Ye=_t[L]||[],nr=Ye[0]===ks&&Ye[1],ln=nr&&Ye[2],Je=nr&&gi.childNodes[nr];Je=++nr&&Je&&Je[an]||(ln=nr=0)||Hr.pop();)if(Je.nodeType===1&&++ln&&Je===Ae){_t[L]=[ks,nr,ln];break}}else if(Ry&&(Je=Ae,ii=Je[Qt]||(Je[Qt]={}),_t=ii[Je.uniqueID]||(ii[Je.uniqueID]={}),Ye=_t[L]||[],nr=Ye[0]===ks&&Ye[1],ln=nr),ln===!1)for(;(Je=++nr&&Je&&Je[an]||(ln=nr=0)||Hr.pop())&&!((Ie?Je.nodeName.toLowerCase()===Ly:Je.nodeType===1)&&++ln&&(Ry&&(ii=Je[Qt]||(Je[Qt]={}),_t=ii[Je.uniqueID]||(ii[Je.uniqueID]={}),_t[L]=[ks,ln]),Je===Ae)););return ln-=Y,ln===ce||ln%ce===0&&ln/ce>=0}}},PSEUDO:function(L,z){var H,ce=I.pseudos[L]||I.setFilters[L.toLowerCase()]||ti.error("unsupported pseudo: "+L);return ce[Qt]?ce(z):ce.length>1?(H=[L,L,"",z],I.setFilters.hasOwnProperty(L.toLowerCase())?To(function(Y,de){for(var ye,Ie=ce(Y,z),Ae=Ie.length;Ae--;)ye=gd(Y,Ie[Ae]),Y[ye]=!(de[ye]=Ie[Ae])}):function(Y){return ce(Y,0,H)}):ce}},pseudos:{not:To(function(L){var z=[],H=[],ce=V(L.replace(q_,"$1"));return ce[Qt]?To(function(Y,de,ye,Ie){for(var Ae,We=ce(Y,null,Ie,[]),Ge=Y.length;Ge--;)(Ae=We[Ge])&&(Y[Ge]=!(de[Ge]=Ae))}):function(Y,de,ye){return z[0]=Y,ce(z,null,ye,H),z[0]=null,!H.pop()}}),has:To(function(L){return function(z){return ti(L,z).length>0}}),contains:To(function(L){return L=L.replace(gl,vl),function(z){return(z.textContent||C(z)).indexOf(L)>-1}}),lang:To(function(L){return vZ.test(L||"")||ti.error("unsupported lang: "+L),L=L.replace(gl,vl).toLowerCase(),function(z){var H;do if(H=ct?z.lang:z.getAttribute("xml:lang")||z.getAttribute("lang"))return H=H.toLowerCase(),H===L||H.indexOf(L+"-")===0;while((z=z.parentNode)&&z.nodeType===1);return!1}}),target:function(L){var z=m.location&&m.location.hash;return z&&z.slice(1)===L.id},root:function(L){return L===De},focus:function(L){return L===le.activeElement&&(!le.hasFocus||le.hasFocus())&&!!(L.type||L.href||~L.tabIndex)},enabled:SR(!1),disabled:SR(!0),checked:function(L){var z=L.nodeName.toLowerCase();return z==="input"&&!!L.checked||z==="option"&&!!L.selected},selected:function(L){return L.parentNode&&L.parentNode.selectedIndex,L.selected===!0},empty:function(L){for(L=L.firstChild;L;L=L.nextSibling)if(L.nodeType<6)return!1;return!0},parent:function(L){return!I.pseudos.empty(L)},header:function(L){return wZ.test(L.nodeName)},input:function(L){return bZ.test(L.nodeName)},button:function(L){var z=L.nodeName.toLowerCase();return z==="input"&&L.type==="button"||z==="button"},text:function(L){var z;return L.nodeName.toLowerCase()==="input"&&L.type==="text"&&((z=L.getAttribute("type"))==null||z.toLowerCase()==="text")},first:_d(function(){return[0]}),last:_d(function(L,z){return[z-1]}),eq:_d(function(L,z,H){return[H<0?H+z:H]}),even:_d(function(L,z){for(var H=0;H<z;H+=2)L.push(H);return L}),odd:_d(function(L,z){for(var H=1;H<z;H+=2)L.push(H);return L}),lt:_d(function(L,z,H){for(var ce=H<0?H+z:H>z?z:H;--ce>=0;)L.push(ce);return L}),gt:_d(function(L,z,H){for(var ce=H<0?H+z:H;++ce<z;)L.push(ce);return L})}},I.pseudos.nth=I.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})I.pseudos[v]=IZ(v);for(v in{submit:!0,reset:!0})I.pseudos[v]=TZ(v);function xR(){}xR.prototype=I.filters=I.pseudos,I.setFilters=new xR,P=ti.tokenize=function(L,z){var H,ce,Y,de,ye,Ie,Ae,We=ky[L+" "];if(We)return z?0:We.slice(0);for(ye=L,Ie=[],Ae=I.preFilter;ye;){(!H||(ce=mZ.exec(ye)))&&(ce&&(ye=ye.slice(ce[0].length)||ye),Ie.push(Y=[])),H=!1,(ce=gR.exec(ye))&&(H=ce.shift(),Y.push({value:H,type:ce[0].replace(q_," ")}),ye=ye.slice(H.length));for(de in I.filter)(ce=G_[de].exec(ye))&&(!Ae[de]||(ce=Ae[de](ce)))&&(H=ce.shift(),Y.push({value:H,type:de,matches:ce}),ye=ye.slice(H.length));if(!H)break}return z?ye.length:ye?ti.error(L):ky(L,Ie).slice(0)};function W_(L){for(var z=0,H=L.length,ce="";z<H;z++)ce+=L[z].value;return ce}function J_(L,z,H){var ce=z.dir,Y=z.next,de=Y||ce,ye=H&&de==="parentNode",Ie=Mt++;return z.first?function(Ae,We,Ge){for(;Ae=Ae[ce];)if(Ae.nodeType===1||ye)return L(Ae,We,Ge);return!1}:function(Ae,We,Ge){var Ye,_t,ii,Je=[ks,Ie];if(Ge){for(;Ae=Ae[ce];)if((Ae.nodeType===1||ye)&&L(Ae,We,Ge))return!0}else for(;Ae=Ae[ce];)if(Ae.nodeType===1||ye)if(ii=Ae[Qt]||(Ae[Qt]={}),_t=ii[Ae.uniqueID]||(ii[Ae.uniqueID]={}),Y&&Y===Ae.nodeName.toLowerCase())Ae=Ae[ce]||Ae;else{if((Ye=_t[de])&&Ye[0]===ks&&Ye[1]===Ie)return Je[2]=Ye[2];if(_t[de]=Je,Je[2]=L(Ae,We,Ge))return!0}return!1}}function _T(L){return L.length>1?function(z,H,ce){for(var Y=L.length;Y--;)if(!L[Y](z,H,ce))return!1;return!0}:L[0]}function $Z(L,z,H){for(var ce=0,Y=z.length;ce<Y;ce++)ti(L,z[ce],H);return H}function Z_(L,z,H,ce,Y){for(var de,ye=[],Ie=0,Ae=L.length,We=z!=null;Ie<Ae;Ie++)(de=L[Ie])&&(!H||H(de,ce,Y))&&(ye.push(de),We&&z.push(Ie));return ye}function bT(L,z,H,ce,Y,de){return ce&&!ce[Qt]&&(ce=bT(ce)),Y&&!Y[Qt]&&(Y=bT(Y,de)),To(function(ye,Ie,Ae,We){var Ge,Ye,_t,ii=[],Je=[],nr=Ie.length,Hr=ye||$Z(z||"*",Ae.nodeType?[Ae]:Ae,[]),an=L&&(ye||!z)?Z_(Hr,ii,L,Ae,We):Hr,gi=H?Y||(ye?L:nr||ce)?[]:Ie:an;if(H&&H(an,gi,Ae,We),ce)for(Ge=Z_(gi,Je),ce(Ge,[],Ae,We),Ye=Ge.length;Ye--;)(_t=Ge[Ye])&&(gi[Je[Ye]]=!(an[Je[Ye]]=_t));if(ye){if(Y||L){if(Y){for(Ge=[],Ye=gi.length;Ye--;)(_t=gi[Ye])&&Ge.push(an[Ye]=_t);Y(null,gi=[],Ge,We)}for(Ye=gi.length;Ye--;)(_t=gi[Ye])&&(Ge=Y?gd(ye,_t):ii[Ye])>-1&&(ye[Ge]=!(Ie[Ge]=_t))}}else gi=Z_(gi===Ie?gi.splice(nr,gi.length):gi),Y?Y(null,Ie,gi,We):Ic.apply(Ie,gi)})}function wT(L){for(var z,H,ce,Y=L.length,de=I.relative[L[0].type],ye=de||I.relative[" "],Ie=de?1:0,Ae=J_(function(Ye){return Ye===z},ye,!0),We=J_(function(Ye){return gd(z,Ye)>-1},ye,!0),Ge=[function(Ye,_t,ii){var Je=!de&&(ii||_t!==Z)||((z=_t).nodeType?Ae(Ye,_t,ii):We(Ye,_t,ii));return z=null,Je}];Ie<Y;Ie++)if(H=I.relative[L[Ie].type])Ge=[J_(_T(Ge),H)];else{if(H=I.filter[L[Ie].type].apply(null,L[Ie].matches),H[Qt]){for(ce=++Ie;ce<Y&&!I.relative[L[ce].type];ce++);return bT(Ie>1&&_T(Ge),Ie>1&&W_(L.slice(0,Ie-1).concat({value:L[Ie-2].type===" "?"*":""})).replace(q_,"$1"),H,Ie<ce&&wT(L.slice(Ie,ce)),ce<Y&&wT(L=L.slice(ce)),ce<Y&&W_(L))}Ge.push(H)}return _T(Ge)}function CZ(L,z){var H=z.length>0,ce=L.length>0,Y=function(de,ye,Ie,Ae,We){var Ge,Ye,_t,ii=0,Je="0",nr=de&&[],Hr=[],an=Z,gi=de||ce&&I.find.TAG("*",We),Ly=ks+=an==null?1:Math.random()||.1,Ry=gi.length;for(We&&(Z=ye==le||ye||We);Je!==Ry&&(Ge=gi[Je])!=null;Je++){if(ce&&Ge){for(Ye=0,!ye&&Ge.ownerDocument!=le&&(ee(Ge),Ie=!ct);_t=L[Ye++];)if(_t(Ge,ye||le,Ie)){Ae.push(Ge);break}We&&(ks=Ly)}H&&((Ge=!_t&&Ge)&&ii--,de&&nr.push(Ge))}if(ii+=Je,H&&Je!==ii){for(Ye=0;_t=z[Ye++];)_t(nr,Hr,ye,Ie);if(de){if(ii>0)for(;Je--;)nr[Je]||Hr[Je]||(Hr[Je]=xc.call(Ae));Hr=Z_(Hr)}Ic.apply(Ae,Hr),We&&!de&&Hr.length>0&&ii+z.length>1&&ti.uniqueSort(Ae)}return We&&(ks=Ly,Z=an),nr};return H?To(Y):Y}return V=ti.compile=function(L,z){var H,ce=[],Y=[],de=B_[L+" "];if(!de){for(z||(z=P(L)),H=z.length;H--;)de=wT(z[H]),de[Qt]?ce.push(de):Y.push(de);de=B_(L,CZ(Y,ce)),de.selector=L}return de},U=ti.select=function(L,z,H,ce){var Y,de,ye,Ie,Ae,We=typeof L=="function"&&L,Ge=!ce&&P(L=We.selector||L);if(H=H||[],Ge.length===1){if(de=Ge[0]=Ge[0].slice(0),de.length>2&&(ye=de[0]).type==="ID"&&z.nodeType===9&&ct&&I.relative[de[1].type]){if(z=(I.find.ID(ye.matches[0].replace(gl,vl),z)||[])[0],z)We&&(z=z.parentNode);else return H;L=L.slice(de.shift().value.length)}for(Y=G_.needsContext.test(L)?0:de.length;Y--&&(ye=de[Y],!I.relative[Ie=ye.type]);)if((Ae=I.find[Ie])&&(ce=Ae(ye.matches[0].replace(gl,vl),yT.test(de[0].type)&&vT(z.parentNode)||z))){if(de.splice(Y,1),L=ce.length&&W_(de),!L)return Ic.apply(H,ce),H;break}}return(We||V(L,Ge))(ce,z,!ct,H,!z||yT.test(L)&&vT(z.parentNode)||z),H},S.sortStable=Qt.split("").sort(md).join("")===Qt,S.detectDuplicates=!!me,ee(),S.sortDetached=$o(function(L){return L.compareDocumentPosition(le.createElement("fieldset"))&1}),$o(function(L){return L.innerHTML="<a href='#'></a>",L.firstChild.getAttribute("href")==="#"})||gT("type|href|height|width",function(L,z,H){if(!H)return L.getAttribute(z,z.toLowerCase()==="type"?1:2)}),(!S.attributes||!$o(function(L){return L.innerHTML="<input/>",L.firstChild.setAttribute("value",""),L.firstChild.getAttribute("value")===""}))&&gT("value",function(L,z,H){if(!H&&L.nodeName.toLowerCase()==="input")return L.defaultValue}),$o(function(L){return L.getAttribute("disabled")==null})||gT(fT,function(L,z,H){var ce;if(!H)return L[z]===!0?z.toLowerCase():(ce=L.getAttributeNode(z))&&ce.specified?ce.value:null}),ti}(t);_.find=W,_.expr=W.selectors,_.expr[":"]=_.expr.pseudos,_.uniqueSort=_.unique=W.uniqueSort,_.text=W.getText,_.isXMLDoc=W.isXML,_.contains=W.contains,_.escapeSelector=W.escape;var oe=function(m,v,S){for(var I=[],C=S!==void 0;(m=m[v])&&m.nodeType!==9;)if(m.nodeType===1){if(C&&_(m).is(S))break;I.push(m)}return I},te=function(m,v){for(var S=[];m;m=m.nextSibling)m.nodeType===1&&m!==v&&S.push(m);return S},he=_.expr.match.needsContext;function ge(m,v){return m.nodeName&&m.nodeName.toLowerCase()===v.toLowerCase()}var Te=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Se(m,v,S){return w(v)?_.grep(m,function(I,C){return!!v.call(I,C,I)!==S}):v.nodeType?_.grep(m,function(I){return I===v!==S}):typeof v!="string"?_.grep(m,function(I){return l.call(v,I)>-1!==S}):_.filter(v,m,S)}_.filter=function(m,v,S){var I=v[0];return S&&(m=":not("+m+")"),v.length===1&&I.nodeType===1?_.find.matchesSelector(I,m)?[I]:[]:_.find.matches(m,_.grep(v,function(C){return C.nodeType===1}))},_.fn.extend({find:function(m){var v,S,I=this.length,C=this;if(typeof m!="string")return this.pushStack(_(m).filter(function(){for(v=0;v<I;v++)if(_.contains(C[v],this))return!0}));for(S=this.pushStack([]),v=0;v<I;v++)_.find(m,C[v],S);return I>1?_.uniqueSort(S):S},filter:function(m){return this.pushStack(Se(this,m||[],!1))},not:function(m){return this.pushStack(Se(this,m||[],!0))},is:function(m){return!!Se(this,typeof m=="string"&&he.test(m)?_(m):m||[],!1).length}});var vt,$t=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,st=_.fn.init=function(m,v,S){var I,C;if(!m)return this;if(S=S||vt,typeof m=="string")if(m[0]==="<"&&m[m.length-1]===">"&&m.length>=3?I=[null,m,null]:I=$t.exec(m),I&&(I[1]||!v))if(I[1]){if(v=v instanceof _?v[0]:v,_.merge(this,_.parseHTML(I[1],v&&v.nodeType?v.ownerDocument||v:T,!0)),Te.test(I[1])&&_.isPlainObject(v))for(I in v)w(this[I])?this[I](v[I]):this.attr(I,v[I]);return this}else return C=T.getElementById(I[2]),C&&(this[0]=C,this.length=1),this;else return!v||v.jquery?(v||S).find(m):this.constructor(v).find(m);else{if(m.nodeType)return this[0]=m,this.length=1,this;if(w(m))return S.ready!==void 0?S.ready(m):m(_)}return _.makeArray(m,this)};st.prototype=_.fn,vt=_(T);var Kt=/^(?:parents|prev(?:Until|All))/,yi={children:!0,contents:!0,next:!0,prev:!0};_.fn.extend({has:function(m){var v=_(m,this),S=v.length;return this.filter(function(){for(var I=0;I<S;I++)if(_.contains(this,v[I]))return!0})},closest:function(m,v){var S,I=0,C=this.length,E=[],P=typeof m!="string"&&_(m);if(!he.test(m)){for(;I<C;I++)for(S=this[I];S&&S!==v;S=S.parentNode)if(S.nodeType<11&&(P?P.index(S)>-1:S.nodeType===1&&_.find.matchesSelector(S,m))){E.push(S);break}}return this.pushStack(E.length>1?_.uniqueSort(E):E)},index:function(m){return m?typeof m=="string"?l.call(_(m),this[0]):l.call(this,m.jquery?m[0]:m):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(m,v){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(m,v))))},addBack:function(m){return this.add(m==null?this.prevObject:this.prevObject.filter(m))}});function wo(m,v){for(;(m=m[v])&&m.nodeType!==1;);return m}_.each({parent:function(m){var v=m.parentNode;return v&&v.nodeType!==11?v:null},parents:function(m){return oe(m,"parentNode")},parentsUntil:function(m,v,S){return oe(m,"parentNode",S)},next:function(m){return wo(m,"nextSibling")},prev:function(m){return wo(m,"previousSibling")},nextAll:function(m){return oe(m,"nextSibling")},prevAll:function(m){return oe(m,"previousSibling")},nextUntil:function(m,v,S){return oe(m,"nextSibling",S)},prevUntil:function(m,v,S){return oe(m,"previousSibling",S)},siblings:function(m){return te((m.parentNode||{}).firstChild,m)},children:function(m){return te(m.firstChild)},contents:function(m){return m.contentDocument!=null&&s(m.contentDocument)?m.contentDocument:(ge(m,"template")&&(m=m.content||m),_.merge([],m.childNodes))}},function(m,v){_.fn[m]=function(S,I){var C=_.map(this,v,S);return m.slice(-5)!=="Until"&&(I=S),I&&typeof I=="string"&&(C=_.filter(I,C)),this.length>1&&(yi[m]||_.uniqueSort(C),Kt.test(m)&&C.reverse()),this.pushStack(C)}});var ni=/[^\x20\t\r\n\f]+/g;function Tr(m){var v={};return _.each(m.match(ni)||[],function(S,I){v[I]=!0}),v}_.Callbacks=function(m){m=typeof m=="string"?Tr(m):_.extend({},m);var v,S,I,C,E=[],P=[],V=-1,U=function(){for(C=C||m.once,I=v=!0;P.length;V=-1)for(S=P.shift();++V<E.length;)E[V].apply(S[0],S[1])===!1&&m.stopOnFalse&&(V=E.length,S=!1);m.memory||(S=!1),v=!1,C&&(S?E=[]:E="")},Z={add:function(){return E&&(S&&!v&&(V=E.length-1,P.push(S)),function ie(me){_.each(me,function(ee,le){w(le)?(!m.unique||!Z.has(le))&&E.push(le):le&&le.length&&D(le)!=="string"&&ie(le)})}(arguments),S&&!v&&U()),this},remove:function(){return _.each(arguments,function(ie,me){for(var ee;(ee=_.inArray(me,E,ee))>-1;)E.splice(ee,1),ee<=V&&V--}),this},has:function(ie){return ie?_.inArray(ie,E)>-1:E.length>0},empty:function(){return E&&(E=[]),this},disable:function(){return C=P=[],E=S="",this},disabled:function(){return!E},lock:function(){return C=P=[],!S&&!v&&(E=S=""),this},locked:function(){return!!C},fireWith:function(ie,me){return C||(me=me||[],me=[ie,me.slice?me.slice():me],P.push(me),v||U()),this},fire:function(){return Z.fireWith(this,arguments),this},fired:function(){return!!I}};return Z};function yr(m){return m}function ns(m){throw m}function Hi(m,v,S,I){var C;try{m&&w(C=m.promise)?C.call(m).done(v).fail(S):m&&w(C=m.then)?C.call(m,v,S):v.apply(void 0,[m].slice(I))}catch(E){S.apply(void 0,[E])}}_.extend({Deferred:function(m){var v=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],S="pending",I={state:function(){return S},always:function(){return C.done(arguments).fail(arguments),this},catch:function(E){return I.then(null,E)},pipe:function(){var E=arguments;return _.Deferred(function(P){_.each(v,function(V,U){var Z=w(E[U[4]])&&E[U[4]];C[U[1]](function(){var ie=Z&&Z.apply(this,arguments);ie&&w(ie.promise)?ie.promise().progress(P.notify).done(P.resolve).fail(P.reject):P[U[0]+"With"](this,Z?[ie]:arguments)})}),E=null}).promise()},then:function(E,P,V){var U=0;function Z(ie,me,ee,le){return function(){var De=this,ct=arguments,je=function(){var Wi,nn;if(!(ie<U)){if(Wi=ee.apply(De,ct),Wi===me.promise())throw new TypeError("Thenable self-resolution");nn=Wi&&(typeof Wi=="object"||typeof Wi=="function")&&Wi.then,w(nn)?le?nn.call(Wi,Z(U,me,yr,le),Z(U,me,ns,le)):(U++,nn.call(Wi,Z(U,me,yr,le),Z(U,me,ns,le),Z(U,me,yr,me.notifyWith))):(ee!==yr&&(De=void 0,ct=[Wi]),(le||me.resolveWith)(De,ct))}},sr=le?je:function(){try{je()}catch(Wi){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(Wi,sr.stackTrace),ie+1>=U&&(ee!==ns&&(De=void 0,ct=[Wi]),me.rejectWith(De,ct))}};ie?sr():(_.Deferred.getStackHook&&(sr.stackTrace=_.Deferred.getStackHook()),t.setTimeout(sr))}}return _.Deferred(function(ie){v[0][3].add(Z(0,ie,w(V)?V:yr,ie.notifyWith)),v[1][3].add(Z(0,ie,w(E)?E:yr)),v[2][3].add(Z(0,ie,w(P)?P:ns))}).promise()},promise:function(E){return E!=null?_.extend(E,I):I}},C={};return _.each(v,function(E,P){var V=P[2],U=P[5];I[P[1]]=V.add,U&&V.add(function(){S=U},v[3-E][2].disable,v[3-E][3].disable,v[0][2].lock,v[0][3].lock),V.add(P[3].fire),C[P[0]]=function(){return C[P[0]+"With"](this===C?void 0:this,arguments),this},C[P[0]+"With"]=V.fireWith}),I.promise(C),m&&m.call(C,C),C},when:function(m){var v=arguments.length,S=v,I=Array(S),C=n.call(arguments),E=_.Deferred(),P=function(V){return function(U){I[V]=this,C[V]=arguments.length>1?n.call(arguments):U,--v||E.resolveWith(I,C)}};if(v<=1&&(Hi(m,E.done(P(S)).resolve,E.reject,!v),E.state()==="pending"||w(C[S]&&C[S].then)))return E.then();for(;S--;)Hi(C[S],P(S),E.reject);return E.promise()}});var So=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(m,v){t.console&&t.console.warn&&m&&So.test(m.name)&&t.console.warn("jQuery.Deferred exception: "+m.message,m.stack,v)},_.readyException=function(m){t.setTimeout(function(){throw m})};var tn=_.Deferred();_.fn.ready=function(m){return tn.then(m).catch(function(v){_.readyException(v)}),this},_.extend({isReady:!1,readyWait:1,ready:function(m){(m===!0?--_.readyWait:_.isReady)||(_.isReady=!0,!(m!==!0&&--_.readyWait>0)&&tn.resolveWith(T,[_]))}}),_.ready.then=tn.then;function ot(){T.removeEventListener("DOMContentLoaded",ot),t.removeEventListener("load",ot),_.ready()}T.readyState==="complete"||T.readyState!=="loading"&&!T.documentElement.doScroll?t.setTimeout(_.ready):(T.addEventListener("DOMContentLoaded",ot),t.addEventListener("load",ot));var $r=function(m,v,S,I,C,E,P){var V=0,U=m.length,Z=S==null;if(D(S)==="object"){C=!0;for(V in S)$r(m,v,V,S[V],!0,E,P)}else if(I!==void 0&&(C=!0,w(I)||(P=!0),Z&&(P?(v.call(m,I),v=null):(Z=v,v=function(ie,me,ee){return Z.call(_(ie),ee)})),v))for(;V<U;V++)v(m[V],S,P?I:I.call(m[V],V,v(m[V],S)));return C?m:Z?v.call(m):U?v(m[0],S):E},$p=/^-ms-/,xo=/-([a-z])/g;function ya(m,v){return v.toUpperCase()}function os(m){return m.replace($p,"ms-").replace(xo,ya)}var hl=function(m){return m.nodeType===1||m.nodeType===9||!+m.nodeType};function pl(){this.expando=_.expando+pl.uid++}pl.uid=1,pl.prototype={cache:function(m){var v=m[this.expando];return v||(v={},hl(m)&&(m.nodeType?m[this.expando]=v:Object.defineProperty(m,this.expando,{value:v,configurable:!0}))),v},set:function(m,v,S){var I,C=this.cache(m);if(typeof v=="string")C[os(v)]=S;else for(I in v)C[os(I)]=v[I];return C},get:function(m,v){return v===void 0?this.cache(m):m[this.expando]&&m[this.expando][os(v)]},access:function(m,v,S){return v===void 0||v&&typeof v=="string"&&S===void 0?this.get(m,v):(this.set(m,v,S),S!==void 0?S:v)},remove:function(m,v){var S,I=m[this.expando];if(I!==void 0){if(v!==void 0)for(Array.isArray(v)?v=v.map(os):(v=os(v),v=v in I?[v]:v.match(ni)||[]),S=v.length;S--;)delete I[v[S]];(v===void 0||_.isEmptyObject(I))&&(m.nodeType?m[this.expando]=void 0:delete m[this.expando])}},hasData:function(m){var v=m[this.expando];return v!==void 0&&!_.isEmptyObject(v)}};var Be=new pl,rr=new pl,Sy=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,xy=/[A-Z]/g;function Io(m){return m==="true"?!0:m==="false"?!1:m==="null"?null:m===+m+""?+m:Sy.test(m)?JSON.parse(m):m}function fl(m,v,S){var I;if(S===void 0&&m.nodeType===1)if(I="data-"+v.replace(xy,"-$&").toLowerCase(),S=m.getAttribute(I),typeof S=="string"){try{S=Io(S)}catch{}rr.set(m,v,S)}else S=void 0;return S}_.extend({hasData:function(m){return rr.hasData(m)||Be.hasData(m)},data:function(m,v,S){return rr.access(m,v,S)},removeData:function(m,v){rr.remove(m,v)},_data:function(m,v,S){return Be.access(m,v,S)},_removeData:function(m,v){Be.remove(m,v)}}),_.fn.extend({data:function(m,v){var S,I,C,E=this[0],P=E&&E.attributes;if(m===void 0){if(this.length&&(C=rr.get(E),E.nodeType===1&&!Be.get(E,"hasDataAttrs"))){for(S=P.length;S--;)P[S]&&(I=P[S].name,I.indexOf("data-")===0&&(I=os(I.slice(5)),fl(E,I,C[I])));Be.set(E,"hasDataAttrs",!0)}return C}return typeof m=="object"?this.each(function(){rr.set(this,m)}):$r(this,function(V){var U;if(E&&V===void 0)return U=rr.get(E,m),U!==void 0||(U=fl(E,m),U!==void 0)?U:void 0;this.each(function(){rr.set(this,m,V)})},null,v,arguments.length>1,null,!0)},removeData:function(m){return this.each(function(){rr.remove(this,m)})}}),_.extend({queue:function(m,v,S){var I;if(m)return v=(v||"fx")+"queue",I=Be.get(m,v),S&&(!I||Array.isArray(S)?I=Be.access(m,v,_.makeArray(S)):I.push(S)),I||[]},dequeue:function(m,v){v=v||"fx";var S=_.queue(m,v),I=S.length,C=S.shift(),E=_._queueHooks(m,v),P=function(){_.dequeue(m,v)};C==="inprogress"&&(C=S.shift(),I--),C&&(v==="fx"&&S.unshift("inprogress"),delete E.stop,C.call(m,P,E)),!I&&E&&E.empty.fire()},_queueHooks:function(m,v){var S=v+"queueHooks";return Be.get(m,S)||Be.access(m,S,{empty:_.Callbacks("once memory").add(function(){Be.remove(m,[v+"queue",S])})})}}),_.fn.extend({queue:function(m,v){var S=2;return typeof m!="string"&&(v=m,m="fx",S--),arguments.length<S?_.queue(this[0],m):v===void 0?this:this.each(function(){var I=_.queue(this,m,v);_._queueHooks(this,m),m==="fx"&&I[0]!=="inprogress"&&_.dequeue(this,m)})},dequeue:function(m){return this.each(function(){_.dequeue(this,m)})},clearQueue:function(m){return this.queue(m||"fx",[])},promise:function(m,v){var S,I=1,C=_.Deferred(),E=this,P=this.length,V=function(){--I||C.resolveWith(E,[E])};for(typeof m!="string"&&(v=m,m=void 0),m=m||"fx";P--;)S=Be.get(E[P],m+"queueHooks"),S&&S.empty&&(I++,S.empty.add(V));return V(),C.promise(v)}});var ud=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ga=new RegExp("^(?:([+-])=|)("+ud+")([a-z%]*)$","i"),as=["Top","Right","Bottom","Left"],rn=T.documentElement,jn=function(m){return _.contains(m.ownerDocument,m)},sn={composed:!0};rn.getRootNode&&(jn=function(m){return _.contains(m.ownerDocument,m)||m.getRootNode(sn)===m.ownerDocument});var ml=function(m,v){return m=v||m,m.style.display==="none"||m.style.display===""&&jn(m)&&_.css(m,"display")==="none"};function k_(m,v,S,I){var C,E,P=20,V=I?function(){return I.cur()}:function(){return _.css(m,v,"")},U=V(),Z=S&&S[3]||(_.cssNumber[v]?"":"px"),ie=m.nodeType&&(_.cssNumber[v]||Z!=="px"&&+U)&&ga.exec(_.css(m,v));if(ie&&ie[3]!==Z){for(U=U/2,Z=Z||ie[3],ie=+U||1;P--;)_.style(m,v,ie+Z),(1-E)*(1-(E=V()/U||.5))<=0&&(P=0),ie=ie/E;ie=ie*2,_.style(m,v,ie+Z),S=S||[]}return S&&(ie=+ie||+U||0,C=S[1]?ie+(S[1]+1)*S[2]:+S[2],I&&(I.unit=Z,I.start=ie,I.end=C)),C}var P_={};function ZI(m){var v,S=m.ownerDocument,I=m.nodeName,C=P_[I];return C||(v=S.body.appendChild(S.createElement(I)),C=_.css(v,"display"),v.parentNode.removeChild(v),C==="none"&&(C="block"),P_[I]=C,C)}function _c(m,v){for(var S,I,C=[],E=0,P=m.length;E<P;E++)I=m[E],I.style&&(S=I.style.display,v?(S==="none"&&(C[E]=Be.get(I,"display")||null,C[E]||(I.style.display="")),I.style.display===""&&ml(I)&&(C[E]=ZI(I))):S!=="none"&&(C[E]="none",Be.set(I,"display",S)));for(E=0;E<P;E++)C[E]!=null&&(m[E].style.display=C[E]);return m}_.fn.extend({show:function(){return _c(this,!0)},hide:function(){return _c(this)},toggle:function(m){return typeof m=="boolean"?m?this.show():this.hide():this.each(function(){ml(this)?_(this).show():_(this).hide()})}});var dd=/^(?:checkbox|radio)$/i,L_=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,R_=/^$|^module$|\/(?:java|ecma)script/i;(function(){var m=T.createDocumentFragment(),v=m.appendChild(T.createElement("div")),S=T.createElement("input");S.setAttribute("type","radio"),S.setAttribute("checked","checked"),S.setAttribute("name","t"),v.appendChild(S),b.checkClone=v.cloneNode(!0).cloneNode(!0).lastChild.checked,v.innerHTML="<textarea>x</textarea>",b.noCloneChecked=!!v.cloneNode(!0).lastChild.defaultValue,v.innerHTML="<option></option>",b.option=!!v.lastChild})();var Ms={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ms.tbody=Ms.tfoot=Ms.colgroup=Ms.caption=Ms.thead,Ms.th=Ms.td,b.option||(Ms.optgroup=Ms.option=[1,"<select multiple='multiple'>","</select>"]);function Gr(m,v){var S;return typeof m.getElementsByTagName!="undefined"?S=m.getElementsByTagName(v||"*"):typeof m.querySelectorAll!="undefined"?S=m.querySelectorAll(v||"*"):S=[],v===void 0||v&&ge(m,v)?_.merge([m],S):S}function Iy(m,v){for(var S=0,I=m.length;S<I;S++)Be.set(m[S],"globalEval",!v||Be.get(v[S],"globalEval"))}var YI=/<|&#?\w+;/;function F_(m,v,S,I,C){for(var E,P,V,U,Z,ie,me=v.createDocumentFragment(),ee=[],le=0,De=m.length;le<De;le++)if(E=m[le],E||E===0)if(D(E)==="object")_.merge(ee,E.nodeType?[E]:E);else if(!YI.test(E))ee.push(v.createTextNode(E));else{for(P=P||me.appendChild(v.createElement("div")),V=(L_.exec(E)||["",""])[1].toLowerCase(),U=Ms[V]||Ms._default,P.innerHTML=U[1]+_.htmlPrefilter(E)+U[2],ie=U[0];ie--;)P=P.lastChild;_.merge(ee,P.childNodes),P=me.firstChild,P.textContent=""}for(me.textContent="",le=0;E=ee[le++];){if(I&&_.inArray(E,I)>-1){C&&C.push(E);continue}if(Z=jn(E),P=Gr(me.appendChild(E),"script"),Z&&Iy(P),S)for(ie=0;E=P[ie++];)R_.test(E.type||"")&&S.push(E)}return me}var N_=/^([^.]*)(?:\.(.+)|)/;function bc(){return!0}function wc(){return!1}function KI(m,v){return m===QI()==(v==="focus")}function QI(){try{return T.activeElement}catch{}}function Ty(m,v,S,I,C,E){var P,V;if(typeof v=="object"){typeof S!="string"&&(I=I||S,S=void 0);for(V in v)Ty(m,V,S,I,v[V],E);return m}if(I==null&&C==null?(C=S,I=S=void 0):C==null&&(typeof S=="string"?(C=I,I=void 0):(C=I,I=S,S=void 0)),C===!1)C=wc;else if(!C)return m;return E===1&&(P=C,C=function(U){return _().off(U),P.apply(this,arguments)},C.guid=P.guid||(P.guid=_.guid++)),m.each(function(){_.event.add(this,v,C,I,S)})}_.event={global:{},add:function(m,v,S,I,C){var E,P,V,U,Z,ie,me,ee,le,De,ct,je=Be.get(m);if(!!hl(m))for(S.handler&&(E=S,S=E.handler,C=E.selector),C&&_.find.matchesSelector(rn,C),S.guid||(S.guid=_.guid++),(U=je.events)||(U=je.events=Object.create(null)),(P=je.handle)||(P=je.handle=function(sr){return typeof _!="undefined"&&_.event.triggered!==sr.type?_.event.dispatch.apply(m,arguments):void 0}),v=(v||"").match(ni)||[""],Z=v.length;Z--;)V=N_.exec(v[Z])||[],le=ct=V[1],De=(V[2]||"").split(".").sort(),le&&(me=_.event.special[le]||{},le=(C?me.delegateType:me.bindType)||le,me=_.event.special[le]||{},ie=_.extend({type:le,origType:ct,data:I,handler:S,guid:S.guid,selector:C,needsContext:C&&_.expr.match.needsContext.test(C),namespace:De.join(".")},E),(ee=U[le])||(ee=U[le]=[],ee.delegateCount=0,(!me.setup||me.setup.call(m,I,De,P)===!1)&&m.addEventListener&&m.addEventListener(le,P)),me.add&&(me.add.call(m,ie),ie.handler.guid||(ie.handler.guid=S.guid)),C?ee.splice(ee.delegateCount++,0,ie):ee.push(ie),_.event.global[le]=!0)},remove:function(m,v,S,I,C){var E,P,V,U,Z,ie,me,ee,le,De,ct,je=Be.hasData(m)&&Be.get(m);if(!(!je||!(U=je.events))){for(v=(v||"").match(ni)||[""],Z=v.length;Z--;){if(V=N_.exec(v[Z])||[],le=ct=V[1],De=(V[2]||"").split(".").sort(),!le){for(le in U)_.event.remove(m,le+v[Z],S,I,!0);continue}for(me=_.event.special[le]||{},le=(I?me.delegateType:me.bindType)||le,ee=U[le]||[],V=V[2]&&new RegExp("(^|\\.)"+De.join("\\.(?:.*\\.|)")+"(\\.|$)"),P=E=ee.length;E--;)ie=ee[E],(C||ct===ie.origType)&&(!S||S.guid===ie.guid)&&(!V||V.test(ie.namespace))&&(!I||I===ie.selector||I==="**"&&ie.selector)&&(ee.splice(E,1),ie.selector&&ee.delegateCount--,me.remove&&me.remove.call(m,ie));P&&!ee.length&&((!me.teardown||me.teardown.call(m,De,je.handle)===!1)&&_.removeEvent(m,le,je.handle),delete U[le])}_.isEmptyObject(U)&&Be.remove(m,"handle events")}},dispatch:function(m){var v,S,I,C,E,P,V=new Array(arguments.length),U=_.event.fix(m),Z=(Be.get(this,"events")||Object.create(null))[U.type]||[],ie=_.event.special[U.type]||{};for(V[0]=U,v=1;v<arguments.length;v++)V[v]=arguments[v];if(U.delegateTarget=this,!(ie.preDispatch&&ie.preDispatch.call(this,U)===!1)){for(P=_.event.handlers.call(this,U,Z),v=0;(C=P[v++])&&!U.isPropagationStopped();)for(U.currentTarget=C.elem,S=0;(E=C.handlers[S++])&&!U.isImmediatePropagationStopped();)(!U.rnamespace||E.namespace===!1||U.rnamespace.test(E.namespace))&&(U.handleObj=E,U.data=E.data,I=((_.event.special[E.origType]||{}).handle||E.handler).apply(C.elem,V),I!==void 0&&(U.result=I)===!1&&(U.preventDefault(),U.stopPropagation()));return ie.postDispatch&&ie.postDispatch.call(this,U),U.result}},handlers:function(m,v){var S,I,C,E,P,V=[],U=v.delegateCount,Z=m.target;if(U&&Z.nodeType&&!(m.type==="click"&&m.button>=1)){for(;Z!==this;Z=Z.parentNode||this)if(Z.nodeType===1&&!(m.type==="click"&&Z.disabled===!0)){for(E=[],P={},S=0;S<U;S++)I=v[S],C=I.selector+" ",P[C]===void 0&&(P[C]=I.needsContext?_(C,this).index(Z)>-1:_.find(C,this,null,[Z]).length),P[C]&&E.push(I);E.length&&V.push({elem:Z,handlers:E})}}return Z=this,U<v.length&&V.push({elem:Z,handlers:v.slice(U)}),V},addProp:function(m,v){Object.defineProperty(_.Event.prototype,m,{enumerable:!0,configurable:!0,get:w(v)?function(){if(this.originalEvent)return v(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[m]},set:function(S){Object.defineProperty(this,m,{enumerable:!0,configurable:!0,writable:!0,value:S})}})},fix:function(m){return m[_.expando]?m:new _.Event(m)},special:{load:{noBubble:!0},click:{setup:function(m){var v=this||m;return dd.test(v.type)&&v.click&&ge(v,"input")&&Cp(v,"click",bc),!1},trigger:function(m){var v=this||m;return dd.test(v.type)&&v.click&&ge(v,"input")&&Cp(v,"click"),!0},_default:function(m){var v=m.target;return dd.test(v.type)&&v.click&&ge(v,"input")&&Be.get(v,"click")||ge(v,"a")}},beforeunload:{postDispatch:function(m){m.result!==void 0&&m.originalEvent&&(m.originalEvent.returnValue=m.result)}}}};function Cp(m,v,S){if(!S){Be.get(m,v)===void 0&&_.event.add(m,v,bc);return}Be.set(m,v,!1),_.event.add(m,v,{namespace:!1,handler:function(I){var C,E,P=Be.get(this,v);if(I.isTrigger&1&&this[v]){if(P.length)(_.event.special[v]||{}).delegateType&&I.stopPropagation();else if(P=n.call(arguments),Be.set(this,v,P),C=S(this,v),this[v](),E=Be.get(this,v),P!==E||C?Be.set(this,v,!1):E={},P!==E)return I.stopImmediatePropagation(),I.preventDefault(),E&&E.value}else P.length&&(Be.set(this,v,{value:_.event.trigger(_.extend(P[0],_.Event.prototype),P.slice(1),this)}),I.stopImmediatePropagation())}})}_.removeEvent=function(m,v,S){m.removeEventListener&&m.removeEventListener(v,S)},_.Event=function(m,v){if(!(this instanceof _.Event))return new _.Event(m,v);m&&m.type?(this.originalEvent=m,this.type=m.type,this.isDefaultPrevented=m.defaultPrevented||m.defaultPrevented===void 0&&m.returnValue===!1?bc:wc,this.target=m.target&&m.target.nodeType===3?m.target.parentNode:m.target,this.currentTarget=m.currentTarget,this.relatedTarget=m.relatedTarget):this.type=m,v&&_.extend(this,v),this.timeStamp=m&&m.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:wc,isPropagationStopped:wc,isImmediatePropagationStopped:wc,isSimulated:!1,preventDefault:function(){var m=this.originalEvent;this.isDefaultPrevented=bc,m&&!this.isSimulated&&m.preventDefault()},stopPropagation:function(){var m=this.originalEvent;this.isPropagationStopped=bc,m&&!this.isSimulated&&m.stopPropagation()},stopImmediatePropagation:function(){var m=this.originalEvent;this.isImmediatePropagationStopped=bc,m&&!this.isSimulated&&m.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},_.event.addProp),_.each({focus:"focusin",blur:"focusout"},function(m,v){_.event.special[m]={setup:function(){return Cp(this,m,KI),!1},trigger:function(){return Cp(this,m),!0},_default:function(){return!0},delegateType:v}}),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(m,v){_.event.special[m]={delegateType:v,bindType:v,handle:function(S){var I,C=this,E=S.relatedTarget,P=S.handleObj;return(!E||E!==C&&!_.contains(C,E))&&(S.type=P.origType,I=P.handler.apply(this,arguments),S.type=v),I}}}),_.fn.extend({on:function(m,v,S,I){return Ty(this,m,v,S,I)},one:function(m,v,S,I){return Ty(this,m,v,S,I,1)},off:function(m,v,S){var I,C;if(m&&m.preventDefault&&m.handleObj)return I=m.handleObj,_(m.delegateTarget).off(I.namespace?I.origType+"."+I.namespace:I.origType,I.selector,I.handler),this;if(typeof m=="object"){for(C in m)this.off(C,v,m[C]);return this}return(v===!1||typeof v=="function")&&(S=v,v=void 0),S===!1&&(S=wc),this.each(function(){_.event.remove(this,m,S,v)})}});var XI=/<script|<style|<link/i,eT=/checked\s*(?:[^=]|=\s*.checked.)/i,tT=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function D_(m,v){return ge(m,"table")&&ge(v.nodeType!==11?v:v.firstChild,"tr")&&_(m).children("tbody")[0]||m}function iT(m){return m.type=(m.getAttribute("type")!==null)+"/"+m.type,m}function X(m){return(m.type||"").slice(0,5)==="true/"?m.type=m.type.slice(5):m.removeAttribute("type"),m}function ei(m,v){var S,I,C,E,P,V,U;if(v.nodeType===1){if(Be.hasData(m)&&(E=Be.get(m),U=E.events,U)){Be.remove(v,"handle events");for(C in U)for(S=0,I=U[C].length;S<I;S++)_.event.add(v,C,U[C][S])}rr.hasData(m)&&(P=rr.access(m),V=_.extend({},P),rr.set(v,V))}}function Ep(m,v){var S=v.nodeName.toLowerCase();S==="input"&&dd.test(m.type)?v.checked=m.checked:(S==="input"||S==="textarea")&&(v.defaultValue=m.defaultValue)}function Cr(m,v,S,I){v=o(v);var C,E,P,V,U,Z,ie=0,me=m.length,ee=me-1,le=v[0],De=w(le);if(De||me>1&&typeof le=="string"&&!b.checkClone&&eT.test(le))return m.each(function(ct){var je=m.eq(ct);De&&(v[0]=le.call(this,ct,je.html())),Cr(je,v,S,I)});if(me&&(C=F_(v,m[0].ownerDocument,!1,m,I),E=C.firstChild,C.childNodes.length===1&&(C=E),E||I)){for(P=_.map(Gr(C,"script"),iT),V=P.length;ie<me;ie++)U=C,ie!==ee&&(U=_.clone(U,!0,!0),V&&_.merge(P,Gr(U,"script"))),S.call(m[ie],U,ie);if(V)for(Z=P[P.length-1].ownerDocument,_.map(P,X),ie=0;ie<V;ie++)U=P[ie],R_.test(U.type||"")&&!Be.access(U,"globalEval")&&_.contains(Z,U)&&(U.src&&(U.type||"").toLowerCase()!=="module"?_._evalUrl&&!U.noModule&&_._evalUrl(U.src,{nonce:U.nonce||U.getAttribute("nonce")},Z):F(U.textContent.replace(tT,""),U,Z))}return m}function Ap(m,v,S){for(var I,C=v?_.filter(v,m):m,E=0;(I=C[E])!=null;E++)!S&&I.nodeType===1&&_.cleanData(Gr(I)),I.parentNode&&(S&&jn(I)&&Iy(Gr(I,"script")),I.parentNode.removeChild(I));return m}_.extend({htmlPrefilter:function(m){return m},clone:function(m,v,S){var I,C,E,P,V=m.cloneNode(!0),U=jn(m);if(!b.noCloneChecked&&(m.nodeType===1||m.nodeType===11)&&!_.isXMLDoc(m))for(P=Gr(V),E=Gr(m),I=0,C=E.length;I<C;I++)Ep(E[I],P[I]);if(v)if(S)for(E=E||Gr(m),P=P||Gr(V),I=0,C=E.length;I<C;I++)ei(E[I],P[I]);else ei(m,V);return P=Gr(V,"script"),P.length>0&&Iy(P,!U&&Gr(m,"script")),V},cleanData:function(m){for(var v,S,I,C=_.event.special,E=0;(S=m[E])!==void 0;E++)if(hl(S)){if(v=S[Be.expando]){if(v.events)for(I in v.events)C[I]?_.event.remove(S,I):_.removeEvent(S,I,v.handle);S[Be.expando]=void 0}S[rr.expando]&&(S[rr.expando]=void 0)}}}),_.fn.extend({detach:function(m){return Ap(this,m,!0)},remove:function(m){return Ap(this,m)},text:function(m){return $r(this,function(v){return v===void 0?_.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=v)})},null,m,arguments.length)},append:function(){return Cr(this,arguments,function(m){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var v=D_(this,m);v.appendChild(m)}})},prepend:function(){return Cr(this,arguments,function(m){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var v=D_(this,m);v.insertBefore(m,v.firstChild)}})},before:function(){return Cr(this,arguments,function(m){this.parentNode&&this.parentNode.insertBefore(m,this)})},after:function(){return Cr(this,arguments,function(m){this.parentNode&&this.parentNode.insertBefore(m,this.nextSibling)})},empty:function(){for(var m,v=0;(m=this[v])!=null;v++)m.nodeType===1&&(_.cleanData(Gr(m,!1)),m.textContent="");return this},clone:function(m,v){return m=m==null?!1:m,v=v==null?m:v,this.map(function(){return _.clone(this,m,v)})},html:function(m){return $r(this,function(v){var S=this[0]||{},I=0,C=this.length;if(v===void 0&&S.nodeType===1)return S.innerHTML;if(typeof v=="string"&&!XI.test(v)&&!Ms[(L_.exec(v)||["",""])[1].toLowerCase()]){v=_.htmlPrefilter(v);try{for(;I<C;I++)S=this[I]||{},S.nodeType===1&&(_.cleanData(Gr(S,!1)),S.innerHTML=v);S=0}catch{}}S&&this.empty().append(v)},null,m,arguments.length)},replaceWith:function(){var m=[];return Cr(this,arguments,function(v){var S=this.parentNode;_.inArray(this,m)<0&&(_.cleanData(Gr(this)),S&&S.replaceChild(v,this))},m)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(m,v){_.fn[m]=function(S){for(var I,C=[],E=_(S),P=E.length-1,V=0;V<=P;V++)I=V===P?this:this.clone(!0),_(E[V])[v](I),a.apply(C,I.get());return this.pushStack(C)}});var Pe=new RegExp("^("+ud+")(?!px)[a-z%]+$","i"),yl=function(m){var v=m.ownerDocument.defaultView;return(!v||!v.opener)&&(v=t),v.getComputedStyle(m)},zi=function(m,v,S){var I,C,E={};for(C in v)E[C]=m.style[C],m.style[C]=v[C];I=S.call(m);for(C in v)m.style[C]=E[C];return I},hd=new RegExp(as.join("|"),"i");(function(){function m(){if(!!Z){U.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Z.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",rn.appendChild(U).appendChild(Z);var ie=t.getComputedStyle(Z);S=ie.top!=="1%",V=v(ie.marginLeft)===12,Z.style.right="60%",E=v(ie.right)===36,I=v(ie.width)===36,Z.style.position="absolute",C=v(Z.offsetWidth/3)===12,rn.removeChild(U),Z=null}}function v(ie){return Math.round(parseFloat(ie))}var S,I,C,E,P,V,U=T.createElement("div"),Z=T.createElement("div");!Z.style||(Z.style.backgroundClip="content-box",Z.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle=Z.style.backgroundClip==="content-box",_.extend(b,{boxSizingReliable:function(){return m(),I},pixelBoxStyles:function(){return m(),E},pixelPosition:function(){return m(),S},reliableMarginLeft:function(){return m(),V},scrollboxSize:function(){return m(),C},reliableTrDimensions:function(){var ie,me,ee,le;return P==null&&(ie=T.createElement("table"),me=T.createElement("tr"),ee=T.createElement("div"),ie.style.cssText="position:absolute;left:-11111px;border-collapse:separate",me.style.cssText="border:1px solid",me.style.height="1px",ee.style.height="9px",ee.style.display="block",rn.appendChild(ie).appendChild(me).appendChild(ee),le=t.getComputedStyle(me),P=parseInt(le.height,10)+parseInt(le.borderTopWidth,10)+parseInt(le.borderBottomWidth,10)===me.offsetHeight,rn.removeChild(ie)),P}}))})();function pd(m,v,S){var I,C,E,P,V=m.style;return S=S||yl(m),S&&(P=S.getPropertyValue(v)||S[v],P===""&&!jn(m)&&(P=_.style(m,v)),!b.pixelBoxStyles()&&Pe.test(P)&&hd.test(v)&&(I=V.width,C=V.minWidth,E=V.maxWidth,V.minWidth=V.maxWidth=V.width=P,P=S.width,V.width=I,V.minWidth=C,V.maxWidth=E)),P!==void 0?P+"":P}function zn(m,v){return{get:function(){if(m()){delete this.get;return}return(this.get=v).apply(this,arguments)}}}var $y=["Webkit","Moz","ms"],Cy=T.createElement("div").style,et={};function rT(m){for(var v=m[0].toUpperCase()+m.slice(1),S=$y.length;S--;)if(m=$y[S]+v,m in Cy)return m}function Mp(m){var v=_.cssProps[m]||et[m];return v||(m in Cy?m:et[m]=rT(m)||m)}var sT=/^(none|table(?!-c[ea]).+)/,j_=/^--/,Ey={position:"absolute",visibility:"hidden",display:"block"},z_={letterSpacing:"0",fontWeight:"400"};function Op(m,v,S){var I=ga.exec(v);return I?Math.max(0,I[2]-(S||0))+(I[3]||"px"):v}function Oi(m,v,S,I,C,E){var P=v==="width"?1:0,V=0,U=0;if(S===(I?"border":"content"))return 0;for(;P<4;P+=2)S==="margin"&&(U+=_.css(m,S+as[P],!0,C)),I?(S==="content"&&(U-=_.css(m,"padding"+as[P],!0,C)),S!=="margin"&&(U-=_.css(m,"border"+as[P]+"Width",!0,C))):(U+=_.css(m,"padding"+as[P],!0,C),S!=="padding"?U+=_.css(m,"border"+as[P]+"Width",!0,C):V+=_.css(m,"border"+as[P]+"Width",!0,C));return!I&&E>=0&&(U+=Math.max(0,Math.ceil(m["offset"+v[0].toUpperCase()+v.slice(1)]-E-U-V-.5))||0),U}function V_(m,v,S){var I=yl(m),C=!b.boxSizingReliable()||S,E=C&&_.css(m,"boxSizing",!1,I)==="border-box",P=E,V=pd(m,v,I),U="offset"+v[0].toUpperCase()+v.slice(1);if(Pe.test(V)){if(!S)return V;V="auto"}return(!b.boxSizingReliable()&&E||!b.reliableTrDimensions()&&ge(m,"tr")||V==="auto"||!parseFloat(V)&&_.css(m,"display",!1,I)==="inline")&&m.getClientRects().length&&(E=_.css(m,"boxSizing",!1,I)==="border-box",P=U in m,P&&(V=m[U])),V=parseFloat(V)||0,V+Oi(m,v,S||(E?"border":"content"),P,I,V)+"px"}_.extend({cssHooks:{opacity:{get:function(m,v){if(v){var S=pd(m,"opacity");return S===""?"1":S}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(m,v,S,I){if(!(!m||m.nodeType===3||m.nodeType===8||!m.style)){var C,E,P,V=os(v),U=j_.test(v),Z=m.style;if(U||(v=Mp(V)),P=_.cssHooks[v]||_.cssHooks[V],S!==void 0){if(E=typeof S,E==="string"&&(C=ga.exec(S))&&C[1]&&(S=k_(m,v,C),E="number"),S==null||S!==S)return;E==="number"&&!U&&(S+=C&&C[3]||(_.cssNumber[V]?"":"px")),!b.clearCloneStyle&&S===""&&v.indexOf("background")===0&&(Z[v]="inherit"),(!P||!("set"in P)||(S=P.set(m,S,I))!==void 0)&&(U?Z.setProperty(v,S):Z[v]=S)}else return P&&"get"in P&&(C=P.get(m,!1,I))!==void 0?C:Z[v]}},css:function(m,v,S,I){var C,E,P,V=os(v),U=j_.test(v);return U||(v=Mp(V)),P=_.cssHooks[v]||_.cssHooks[V],P&&"get"in P&&(C=P.get(m,!0,S)),C===void 0&&(C=pd(m,v,I)),C==="normal"&&v in z_&&(C=z_[v]),S===""||S?(E=parseFloat(C),S===!0||isFinite(E)?E||0:C):C}}),_.each(["height","width"],function(m,v){_.cssHooks[v]={get:function(S,I,C){if(I)return sT.test(_.css(S,"display"))&&(!S.getClientRects().length||!S.getBoundingClientRect().width)?zi(S,Ey,function(){return V_(S,v,C)}):V_(S,v,C)},set:function(S,I,C){var E,P=yl(S),V=!b.scrollboxSize()&&P.position==="absolute",U=V||C,Z=U&&_.css(S,"boxSizing",!1,P)==="border-box",ie=C?Oi(S,v,C,Z,P):0;return Z&&V&&(ie-=Math.ceil(S["offset"+v[0].toUpperCase()+v.slice(1)]-parseFloat(P[v])-Oi(S,v,"border",!1,P)-.5)),ie&&(E=ga.exec(I))&&(E[3]||"px")!=="px"&&(S.style[v]=I,I=_.css(S,v)),Op(S,I,ie)}}}),_.cssHooks.marginLeft=zn(b.reliableMarginLeft,function(m,v){if(v)return(parseFloat(pd(m,"marginLeft"))||m.getBoundingClientRect().left-zi(m,{marginLeft:0},function(){return m.getBoundingClientRect().left}))+"px"}),_.each({margin:"",padding:"",border:"Width"},function(m,v){_.cssHooks[m+v]={expand:function(S){for(var I=0,C={},E=typeof S=="string"?S.split(" "):[S];I<4;I++)C[m+as[I]+v]=E[I]||E[I-2]||E[0];return C}},m!=="margin"&&(_.cssHooks[m+v].set=Op)}),_.fn.extend({css:function(m,v){return $r(this,function(S,I,C){var E,P,V={},U=0;if(Array.isArray(I)){for(E=yl(S),P=I.length;U<P;U++)V[I[U]]=_.css(S,I[U],!1,E);return V}return C!==void 0?_.style(S,I,C):_.css(S,I)},m,v,arguments.length>1)}});function Er(m,v,S,I,C){return new Er.prototype.init(m,v,S,I,C)}_.Tween=Er,Er.prototype={constructor:Er,init:function(m,v,S,I,C,E){this.elem=m,this.prop=S,this.easing=C||_.easing._default,this.options=v,this.start=this.now=this.cur(),this.end=I,this.unit=E||(_.cssNumber[S]?"":"px")},cur:function(){var m=Er.propHooks[this.prop];return m&&m.get?m.get(this):Er.propHooks._default.get(this)},run:function(m){var v,S=Er.propHooks[this.prop];return this.options.duration?this.pos=v=_.easing[this.easing](m,this.options.duration*m,0,1,this.options.duration):this.pos=v=m,this.now=(this.end-this.start)*v+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),S&&S.set?S.set(this):Er.propHooks._default.set(this),this}},Er.prototype.init.prototype=Er.prototype,Er.propHooks={_default:{get:function(m){var v;return m.elem.nodeType!==1||m.elem[m.prop]!=null&&m.elem.style[m.prop]==null?m.elem[m.prop]:(v=_.css(m.elem,m.prop,""),!v||v==="auto"?0:v)},set:function(m){_.fx.step[m.prop]?_.fx.step[m.prop](m):m.elem.nodeType===1&&(_.cssHooks[m.prop]||m.elem.style[Mp(m.prop)]!=null)?_.style(m.elem,m.prop,m.now+m.unit):m.elem[m.prop]=m.now}}},Er.propHooks.scrollTop=Er.propHooks.scrollLeft={set:function(m){m.elem.nodeType&&m.elem.parentNode&&(m.elem[m.prop]=m.now)}},_.easing={linear:function(m){return m},swing:function(m){return .5-Math.cos(m*Math.PI)/2},_default:"swing"},_.fx=Er.prototype.init,_.fx.step={};var Sc,kp,nT=/^(?:toggle|show|hide)$/,oT=/queueHooks$/;function Ay(){kp&&(T.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Ay):t.setTimeout(Ay,_.fx.interval),_.fx.tick())}function ls(){return t.setTimeout(function(){Sc=void 0}),Sc=Date.now()}function Pp(m,v){var S,I=0,C={height:m};for(v=v?1:0;I<4;I+=2-v)S=as[I],C["margin"+S]=C["padding"+S]=m;return v&&(C.opacity=C.width=m),C}function U_(m,v,S){for(var I,C=(pe.tweeners[v]||[]).concat(pe.tweeners["*"]),E=0,P=C.length;E<P;E++)if(I=C[E].call(S,v,m))return I}function j(m,v,S){var I,C,E,P,V,U,Z,ie,me="width"in v||"height"in v,ee=this,le={},De=m.style,ct=m.nodeType&&ml(m),je=Be.get(m,"fxshow");S.queue||(P=_._queueHooks(m,"fx"),P.unqueued==null&&(P.unqueued=0,V=P.empty.fire,P.empty.fire=function(){P.unqueued||V()}),P.unqueued++,ee.always(function(){ee.always(function(){P.unqueued--,_.queue(m,"fx").length||P.empty.fire()})}));for(I in v)if(C=v[I],nT.test(C)){if(delete v[I],E=E||C==="toggle",C===(ct?"hide":"show"))if(C==="show"&&je&&je[I]!==void 0)ct=!0;else continue;le[I]=je&&je[I]||_.style(m,I)}if(U=!_.isEmptyObject(v),!(!U&&_.isEmptyObject(le))){me&&m.nodeType===1&&(S.overflow=[De.overflow,De.overflowX,De.overflowY],Z=je&&je.display,Z==null&&(Z=Be.get(m,"display")),ie=_.css(m,"display"),ie==="none"&&(Z?ie=Z:(_c([m],!0),Z=m.style.display||Z,ie=_.css(m,"display"),_c([m]))),(ie==="inline"||ie==="inline-block"&&Z!=null)&&_.css(m,"float")==="none"&&(U||(ee.done(function(){De.display=Z}),Z==null&&(ie=De.display,Z=ie==="none"?"":ie)),De.display="inline-block")),S.overflow&&(De.overflow="hidden",ee.always(function(){De.overflow=S.overflow[0],De.overflowX=S.overflow[1],De.overflowY=S.overflow[2]})),U=!1;for(I in le)U||(je?"hidden"in je&&(ct=je.hidden):je=Be.access(m,"fxshow",{display:Z}),E&&(je.hidden=!ct),ct&&_c([m],!0),ee.done(function(){ct||_c([m]),Be.remove(m,"fxshow");for(I in le)_.style(m,I,le[I])})),U=U_(ct?je[I]:0,I,ee),I in je||(je[I]=U.start,ct&&(U.end=U.start,U.start=0))}}function ae(m,v){var S,I,C,E,P;for(S in m)if(I=os(S),C=v[I],E=m[S],Array.isArray(E)&&(C=E[1],E=m[S]=E[0]),S!==I&&(m[I]=E,delete m[S]),P=_.cssHooks[I],P&&"expand"in P){E=P.expand(E),delete m[I];for(S in E)S in m||(m[S]=E[S],v[S]=C)}else v[I]=C}function pe(m,v,S){var I,C,E=0,P=pe.prefilters.length,V=_.Deferred().always(function(){delete U.elem}),U=function(){if(C)return!1;for(var me=Sc||ls(),ee=Math.max(0,Z.startTime+Z.duration-me),le=ee/Z.duration||0,De=1-le,ct=0,je=Z.tweens.length;ct<je;ct++)Z.tweens[ct].run(De);return V.notifyWith(m,[Z,De,ee]),De<1&&je?ee:(je||V.notifyWith(m,[Z,1,0]),V.resolveWith(m,[Z]),!1)},Z=V.promise({elem:m,props:_.extend({},v),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},S),originalProperties:v,originalOptions:S,startTime:Sc||ls(),duration:S.duration,tweens:[],createTween:function(me,ee){var le=_.Tween(m,Z.opts,me,ee,Z.opts.specialEasing[me]||Z.opts.easing);return Z.tweens.push(le),le},stop:function(me){var ee=0,le=me?Z.tweens.length:0;if(C)return this;for(C=!0;ee<le;ee++)Z.tweens[ee].run(1);return me?(V.notifyWith(m,[Z,1,0]),V.resolveWith(m,[Z,me])):V.rejectWith(m,[Z,me]),this}}),ie=Z.props;for(ae(ie,Z.opts.specialEasing);E<P;E++)if(I=pe.prefilters[E].call(Z,m,ie,Z.opts),I)return w(I.stop)&&(_._queueHooks(Z.elem,Z.opts.queue).stop=I.stop.bind(I)),I;return _.map(ie,U_,Z),w(Z.opts.start)&&Z.opts.start.call(m,Z),Z.progress(Z.opts.progress).done(Z.opts.done,Z.opts.complete).fail(Z.opts.fail).always(Z.opts.always),_.fx.timer(_.extend(U,{elem:m,anim:Z,queue:Z.opts.queue})),Z}_.Animation=_.extend(pe,{tweeners:{"*":[function(m,v){var S=this.createTween(m,v);return k_(S.elem,m,ga.exec(v),S),S}]},tweener:function(m,v){w(m)?(v=m,m=["*"]):m=m.match(ni);for(var S,I=0,C=m.length;I<C;I++)S=m[I],pe.tweeners[S]=pe.tweeners[S]||[],pe.tweeners[S].unshift(v)},prefilters:[j],prefilter:function(m,v){v?pe.prefilters.unshift(m):pe.prefilters.push(m)}}),_.speed=function(m,v,S){var I=m&&typeof m=="object"?_.extend({},m):{complete:S||!S&&v||w(m)&&m,duration:m,easing:S&&v||v&&!w(v)&&v};return _.fx.off?I.duration=0:typeof I.duration!="number"&&(I.duration in _.fx.speeds?I.duration=_.fx.speeds[I.duration]:I.duration=_.fx.speeds._default),(I.queue==null||I.queue===!0)&&(I.queue="fx"),I.old=I.complete,I.complete=function(){w(I.old)&&I.old.call(this),I.queue&&_.dequeue(this,I.queue)},I},_.fn.extend({fadeTo:function(m,v,S,I){return this.filter(ml).css("opacity",0).show().end().animate({opacity:v},m,S,I)},animate:function(m,v,S,I){var C=_.isEmptyObject(m),E=_.speed(v,S,I),P=function(){var V=pe(this,_.extend({},m),E);(C||Be.get(this,"finish"))&&V.stop(!0)};return P.finish=P,C||E.queue===!1?this.each(P):this.queue(E.queue,P)},stop:function(m,v,S){var I=function(C){var E=C.stop;delete C.stop,E(S)};return typeof m!="string"&&(S=v,v=m,m=void 0),v&&this.queue(m||"fx",[]),this.each(function(){var C=!0,E=m!=null&&m+"queueHooks",P=_.timers,V=Be.get(this);if(E)V[E]&&V[E].stop&&I(V[E]);else for(E in V)V[E]&&V[E].stop&&oT.test(E)&&I(V[E]);for(E=P.length;E--;)P[E].elem===this&&(m==null||P[E].queue===m)&&(P[E].anim.stop(S),C=!1,P.splice(E,1));(C||!S)&&_.dequeue(this,m)})},finish:function(m){return m!==!1&&(m=m||"fx"),this.each(function(){var v,S=Be.get(this),I=S[m+"queue"],C=S[m+"queueHooks"],E=_.timers,P=I?I.length:0;for(S.finish=!0,_.queue(this,m,[]),C&&C.stop&&C.stop.call(this,!0),v=E.length;v--;)E[v].elem===this&&E[v].queue===m&&(E[v].anim.stop(!0),E.splice(v,1));for(v=0;v<P;v++)I[v]&&I[v].finish&&I[v].finish.call(this);delete S.finish})}}),_.each(["toggle","show","hide"],function(m,v){var S=_.fn[v];_.fn[v]=function(I,C,E){return I==null||typeof I=="boolean"?S.apply(this,arguments):this.animate(Pp(v,!0),I,C,E)}}),_.each({slideDown:Pp("show"),slideUp:Pp("hide"),slideToggle:Pp("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(m,v){_.fn[m]=function(S,I,C){return this.animate(v,S,I,C)}}),_.timers=[],_.fx.tick=function(){var m,v=0,S=_.timers;for(Sc=Date.now();v<S.length;v++)m=S[v],!m()&&S[v]===m&&S.splice(v--,1);S.length||_.fx.stop(),Sc=void 0},_.fx.timer=function(m){_.timers.push(m),_.fx.start()},_.fx.interval=13,_.fx.start=function(){kp||(kp=!0,Ay())},_.fx.stop=function(){kp=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(m,v){return m=_.fx&&_.fx.speeds[m]||m,v=v||"fx",this.queue(v,function(S,I){var C=t.setTimeout(S,m);I.stop=function(){t.clearTimeout(C)}})},function(){var m=T.createElement("input"),v=T.createElement("select"),S=v.appendChild(T.createElement("option"));m.type="checkbox",b.checkOn=m.value!=="",b.optSelected=S.selected,m=T.createElement("input"),m.value="t",m.type="radio",b.radioValue=m.value==="t"}();var lt,bi=_.expr.attrHandle;_.fn.extend({attr:function(m,v){return $r(this,_.attr,m,v,arguments.length>1)},removeAttr:function(m){return this.each(function(){_.removeAttr(this,m)})}}),_.extend({attr:function(m,v,S){var I,C,E=m.nodeType;if(!(E===3||E===8||E===2)){if(typeof m.getAttribute=="undefined")return _.prop(m,v,S);if((E!==1||!_.isXMLDoc(m))&&(C=_.attrHooks[v.toLowerCase()]||(_.expr.match.bool.test(v)?lt:void 0)),S!==void 0){if(S===null){_.removeAttr(m,v);return}return C&&"set"in C&&(I=C.set(m,S,v))!==void 0?I:(m.setAttribute(v,S+""),S)}return C&&"get"in C&&(I=C.get(m,v))!==null?I:(I=_.find.attr(m,v),I==null?void 0:I)}},attrHooks:{type:{set:function(m,v){if(!b.radioValue&&v==="radio"&&ge(m,"input")){var S=m.value;return m.setAttribute("type",v),S&&(m.value=S),v}}}},removeAttr:function(m,v){var S,I=0,C=v&&v.match(ni);if(C&&m.nodeType===1)for(;S=C[I++];)m.removeAttribute(S)}}),lt={set:function(m,v,S){return v===!1?_.removeAttr(m,S):m.setAttribute(S,S),S}},_.each(_.expr.match.bool.source.match(/\w+/g),function(m,v){var S=bi[v]||_.find.attr;bi[v]=function(I,C,E){var P,V,U=C.toLowerCase();return E||(V=bi[U],bi[U]=P,P=S(I,C,E)!=null?U:null,bi[U]=V),P}});var ci=/^(?:input|select|textarea|button)$/i,Os=/^(?:a|area)$/i;_.fn.extend({prop:function(m,v){return $r(this,_.prop,m,v,arguments.length>1)},removeProp:function(m){return this.each(function(){delete this[_.propFix[m]||m]})}}),_.extend({prop:function(m,v,S){var I,C,E=m.nodeType;if(!(E===3||E===8||E===2))return(E!==1||!_.isXMLDoc(m))&&(v=_.propFix[v]||v,C=_.propHooks[v]),S!==void 0?C&&"set"in C&&(I=C.set(m,S,v))!==void 0?I:m[v]=S:C&&"get"in C&&(I=C.get(m,v))!==null?I:m[v]},propHooks:{tabIndex:{get:function(m){var v=_.find.attr(m,"tabindex");return v?parseInt(v,10):ci.test(m.nodeName)||Os.test(m.nodeName)&&m.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),b.optSelected||(_.propHooks.selected={get:function(m){var v=m.parentNode;return v&&v.parentNode&&v.parentNode.selectedIndex,null},set:function(m){var v=m.parentNode;v&&(v.selectedIndex,v.parentNode&&v.parentNode.selectedIndex)}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this});function Vn(m){var v=m.match(ni)||[];return v.join(" ")}function fd(m){return m.getAttribute&&m.getAttribute("class")||""}function aT(m){return Array.isArray(m)?m:typeof m=="string"?m.match(ni)||[]:[]}_.fn.extend({addClass:function(m){var v,S,I,C,E,P,V,U=0;if(w(m))return this.each(function(Z){_(this).addClass(m.call(this,Z,fd(this)))});if(v=aT(m),v.length){for(;S=this[U++];)if(C=fd(S),I=S.nodeType===1&&" "+Vn(C)+" ",I){for(P=0;E=v[P++];)I.indexOf(" "+E+" ")<0&&(I+=E+" ");V=Vn(I),C!==V&&S.setAttribute("class",V)}}return this},removeClass:function(m){var v,S,I,C,E,P,V,U=0;if(w(m))return this.each(function(Z){_(this).removeClass(m.call(this,Z,fd(this)))});if(!arguments.length)return this.attr("class","");if(v=aT(m),v.length){for(;S=this[U++];)if(C=fd(S),I=S.nodeType===1&&" "+Vn(C)+" ",I){for(P=0;E=v[P++];)for(;I.indexOf(" "+E+" ")>-1;)I=I.replace(" "+E+" "," ");V=Vn(I),C!==V&&S.setAttribute("class",V)}}return this},toggleClass:function(m,v){var S=typeof m,I=S==="string"||Array.isArray(m);return typeof v=="boolean"&&I?v?this.addClass(m):this.removeClass(m):w(m)?this.each(function(C){_(this).toggleClass(m.call(this,C,fd(this),v),v)}):this.each(function(){var C,E,P,V;if(I)for(E=0,P=_(this),V=aT(m);C=V[E++];)P.hasClass(C)?P.removeClass(C):P.addClass(C);else(m===void 0||S==="boolean")&&(C=fd(this),C&&Be.set(this,"__className__",C),this.setAttribute&&this.setAttribute("class",C||m===!1?"":Be.get(this,"__className__")||""))})},hasClass:function(m){var v,S,I=0;for(v=" "+m+" ";S=this[I++];)if(S.nodeType===1&&(" "+Vn(fd(S))+" ").indexOf(v)>-1)return!0;return!1}});var KJ=/\r/g;_.fn.extend({val:function(m){var v,S,I,C=this[0];return arguments.length?(I=w(m),this.each(function(E){var P;this.nodeType===1&&(I?P=m.call(this,E,_(this).val()):P=m,P==null?P="":typeof P=="number"?P+="":Array.isArray(P)&&(P=_.map(P,function(V){return V==null?"":V+""})),v=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()],(!v||!("set"in v)||v.set(this,P,"value")===void 0)&&(this.value=P))})):C?(v=_.valHooks[C.type]||_.valHooks[C.nodeName.toLowerCase()],v&&"get"in v&&(S=v.get(C,"value"))!==void 0?S:(S=C.value,typeof S=="string"?S.replace(KJ,""):S==null?"":S)):void 0}}),_.extend({valHooks:{option:{get:function(m){var v=_.find.attr(m,"value");return v!=null?v:Vn(_.text(m))}},select:{get:function(m){var v,S,I,C=m.options,E=m.selectedIndex,P=m.type==="select-one",V=P?null:[],U=P?E+1:C.length;for(E<0?I=U:I=P?E:0;I<U;I++)if(S=C[I],(S.selected||I===E)&&!S.disabled&&(!S.parentNode.disabled||!ge(S.parentNode,"optgroup"))){if(v=_(S).val(),P)return v;V.push(v)}return V},set:function(m,v){for(var S,I,C=m.options,E=_.makeArray(v),P=C.length;P--;)I=C[P],(I.selected=_.inArray(_.valHooks.option.get(I),E)>-1)&&(S=!0);return S||(m.selectedIndex=-1),E}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(m,v){if(Array.isArray(v))return m.checked=_.inArray(_(m).val(),v)>-1}},b.checkOn||(_.valHooks[this].get=function(m){return m.getAttribute("value")===null?"on":m.value})}),b.focusin="onfocusin"in t;var oR=/^(?:focusinfocus|focusoutblur)$/,aR=function(m){m.stopPropagation()};_.extend(_.event,{trigger:function(m,v,S,I){var C,E,P,V,U,Z,ie,me,ee=[S||T],le=f.call(m,"type")?m.type:m,De=f.call(m,"namespace")?m.namespace.split("."):[];if(E=me=P=S=S||T,!(S.nodeType===3||S.nodeType===8)&&!oR.test(le+_.event.triggered)&&(le.indexOf(".")>-1&&(De=le.split("."),le=De.shift(),De.sort()),U=le.indexOf(":")<0&&"on"+le,m=m[_.expando]?m:new _.Event(le,typeof m=="object"&&m),m.isTrigger=I?2:3,m.namespace=De.join("."),m.rnamespace=m.namespace?new RegExp("(^|\\.)"+De.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m.result=void 0,m.target||(m.target=S),v=v==null?[m]:_.makeArray(v,[m]),ie=_.event.special[le]||{},!(!I&&ie.trigger&&ie.trigger.apply(S,v)===!1))){if(!I&&!ie.noBubble&&!x(S)){for(V=ie.delegateType||le,oR.test(V+le)||(E=E.parentNode);E;E=E.parentNode)ee.push(E),P=E;P===(S.ownerDocument||T)&&ee.push(P.defaultView||P.parentWindow||t)}for(C=0;(E=ee[C++])&&!m.isPropagationStopped();)me=E,m.type=C>1?V:ie.bindType||le,Z=(Be.get(E,"events")||Object.create(null))[m.type]&&Be.get(E,"handle"),Z&&Z.apply(E,v),Z=U&&E[U],Z&&Z.apply&&hl(E)&&(m.result=Z.apply(E,v),m.result===!1&&m.preventDefault());return m.type=le,!I&&!m.isDefaultPrevented()&&(!ie._default||ie._default.apply(ee.pop(),v)===!1)&&hl(S)&&U&&w(S[le])&&!x(S)&&(P=S[U],P&&(S[U]=null),_.event.triggered=le,m.isPropagationStopped()&&me.addEventListener(le,aR),S[le](),m.isPropagationStopped()&&me.removeEventListener(le,aR),_.event.triggered=void 0,P&&(S[U]=P)),m.result}},simulate:function(m,v,S){var I=_.extend(new _.Event,S,{type:m,isSimulated:!0});_.event.trigger(I,null,v)}}),_.fn.extend({trigger:function(m,v){return this.each(function(){_.event.trigger(m,v,this)})},triggerHandler:function(m,v){var S=this[0];if(S)return _.event.trigger(m,v,S,!0)}}),b.focusin||_.each({focus:"focusin",blur:"focusout"},function(m,v){var S=function(I){_.event.simulate(v,I.target,_.event.fix(I))};_.event.special[v]={setup:function(){var I=this.ownerDocument||this.document||this,C=Be.access(I,v);C||I.addEventListener(m,S,!0),Be.access(I,v,(C||0)+1)},teardown:function(){var I=this.ownerDocument||this.document||this,C=Be.access(I,v)-1;C?Be.access(I,v,C):(I.removeEventListener(m,S,!0),Be.remove(I,v))}}});var My=t.location,lR={guid:Date.now()},lT=/\?/;_.parseXML=function(m){var v,S;if(!m||typeof m!="string")return null;try{v=new t.DOMParser().parseFromString(m,"text/xml")}catch{}return S=v&&v.getElementsByTagName("parsererror")[0],(!v||S)&&_.error("Invalid XML: "+(S?_.map(S.childNodes,function(I){return I.textContent}).join(`
`):m)),v};var QJ=/\[\]$/,cR=/\r?\n/g,XJ=/^(?:submit|button|image|reset|file)$/i,eZ=/^(?:input|select|textarea|keygen)/i;function cT(m,v,S,I){var C;if(Array.isArray(v))_.each(v,function(E,P){S||QJ.test(m)?I(m,P):cT(m+"["+(typeof P=="object"&&P!=null?E:"")+"]",P,S,I)});else if(!S&&D(v)==="object")for(C in v)cT(m+"["+C+"]",v[C],S,I);else I(m,v)}_.param=function(m,v){var S,I=[],C=function(E,P){var V=w(P)?P():P;I[I.length]=encodeURIComponent(E)+"="+encodeURIComponent(V==null?"":V)};if(m==null)return"";if(Array.isArray(m)||m.jquery&&!_.isPlainObject(m))_.each(m,function(){C(this.name,this.value)});else for(S in m)cT(S,m[S],v,C);return I.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var m=_.prop(this,"elements");return m?_.makeArray(m):this}).filter(function(){var m=this.type;return this.name&&!_(this).is(":disabled")&&eZ.test(this.nodeName)&&!XJ.test(m)&&(this.checked||!dd.test(m))}).map(function(m,v){var S=_(this).val();return S==null?null:Array.isArray(S)?_.map(S,function(I){return{name:v.name,value:I.replace(cR,`\r
`)}}):{name:v.name,value:S.replace(cR,`\r
`)}}).get()}});var tZ=/%20/g,iZ=/#.*$/,rZ=/([?&])_=[^&]*/,sZ=/^(.*?):[ \t]*([^\r\n]*)$/mg,nZ=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,oZ=/^(?:GET|HEAD)$/,aZ=/^\/\//,uR={},uT={},dR="*/".concat("*"),dT=T.createElement("a");dT.href=My.href;function hR(m){return function(v,S){typeof v!="string"&&(S=v,v="*");var I,C=0,E=v.toLowerCase().match(ni)||[];if(w(S))for(;I=E[C++];)I[0]==="+"?(I=I.slice(1)||"*",(m[I]=m[I]||[]).unshift(S)):(m[I]=m[I]||[]).push(S)}}function pR(m,v,S,I){var C={},E=m===uT;function P(V){var U;return C[V]=!0,_.each(m[V]||[],function(Z,ie){var me=ie(v,S,I);if(typeof me=="string"&&!E&&!C[me])return v.dataTypes.unshift(me),P(me),!1;if(E)return!(U=me)}),U}return P(v.dataTypes[0])||!C["*"]&&P("*")}function hT(m,v){var S,I,C=_.ajaxSettings.flatOptions||{};for(S in v)v[S]!==void 0&&((C[S]?m:I||(I={}))[S]=v[S]);return I&&_.extend(!0,m,I),m}function lZ(m,v,S){for(var I,C,E,P,V=m.contents,U=m.dataTypes;U[0]==="*";)U.shift(),I===void 0&&(I=m.mimeType||v.getResponseHeader("Content-Type"));if(I){for(C in V)if(V[C]&&V[C].test(I)){U.unshift(C);break}}if(U[0]in S)E=U[0];else{for(C in S){if(!U[0]||m.converters[C+" "+U[0]]){E=C;break}P||(P=C)}E=E||P}if(E)return E!==U[0]&&U.unshift(E),S[E]}function cZ(m,v,S,I){var C,E,P,V,U,Z={},ie=m.dataTypes.slice();if(ie[1])for(P in m.converters)Z[P.toLowerCase()]=m.converters[P];for(E=ie.shift();E;)if(m.responseFields[E]&&(S[m.responseFields[E]]=v),!U&&I&&m.dataFilter&&(v=m.dataFilter(v,m.dataType)),U=E,E=ie.shift(),E){if(E==="*")E=U;else if(U!=="*"&&U!==E){if(P=Z[U+" "+E]||Z["* "+E],!P){for(C in Z)if(V=C.split(" "),V[1]===E&&(P=Z[U+" "+V[0]]||Z["* "+V[0]],P)){P===!0?P=Z[C]:Z[C]!==!0&&(E=V[0],ie.unshift(V[1]));break}}if(P!==!0)if(P&&m.throws)v=P(v);else try{v=P(v)}catch(me){return{state:"parsererror",error:P?me:"No conversion from "+U+" to "+E}}}}return{state:"success",data:v}}_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:My.href,type:"GET",isLocal:nZ.test(My.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":dR,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(m,v){return v?hT(hT(m,_.ajaxSettings),v):hT(_.ajaxSettings,m)},ajaxPrefilter:hR(uR),ajaxTransport:hR(uT),ajax:function(m,v){typeof m=="object"&&(v=m,m=void 0),v=v||{};var S,I,C,E,P,V,U,Z,ie,me,ee=_.ajaxSetup({},v),le=ee.context||ee,De=ee.context&&(le.nodeType||le.jquery)?_(le):_.event,ct=_.Deferred(),je=_.Callbacks("once memory"),sr=ee.statusCode||{},Wi={},nn={},Qt="canceled",at={readyState:0,getResponseHeader:function(Mt){var wi;if(U){if(!E)for(E={};wi=sZ.exec(C);)E[wi[1].toLowerCase()+" "]=(E[wi[1].toLowerCase()+" "]||[]).concat(wi[2]);wi=E[Mt.toLowerCase()+" "]}return wi==null?null:wi.join(", ")},getAllResponseHeaders:function(){return U?C:null},setRequestHeader:function(Mt,wi){return U==null&&(Mt=nn[Mt.toLowerCase()]=nn[Mt.toLowerCase()]||Mt,Wi[Mt]=wi),this},overrideMimeType:function(Mt){return U==null&&(ee.mimeType=Mt),this},statusCode:function(Mt){var wi;if(Mt)if(U)at.always(Mt[at.status]);else for(wi in Mt)sr[wi]=[sr[wi],Mt[wi]];return this},abort:function(Mt){var wi=Mt||Qt;return S&&S.abort(wi),ks(0,wi),this}};if(ct.promise(at),ee.url=((m||ee.url||My.href)+"").replace(aZ,My.protocol+"//"),ee.type=v.method||v.type||ee.method||ee.type,ee.dataTypes=(ee.dataType||"*").toLowerCase().match(ni)||[""],ee.crossDomain==null){V=T.createElement("a");try{V.href=ee.url,V.href=V.href,ee.crossDomain=dT.protocol+"//"+dT.host!=V.protocol+"//"+V.host}catch{ee.crossDomain=!0}}if(ee.data&&ee.processData&&typeof ee.data!="string"&&(ee.data=_.param(ee.data,ee.traditional)),pR(uR,ee,v,at),U)return at;Z=_.event&&ee.global,Z&&_.active++===0&&_.event.trigger("ajaxStart"),ee.type=ee.type.toUpperCase(),ee.hasContent=!oZ.test(ee.type),I=ee.url.replace(iZ,""),ee.hasContent?ee.data&&ee.processData&&(ee.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(ee.data=ee.data.replace(tZ,"+")):(me=ee.url.slice(I.length),ee.data&&(ee.processData||typeof ee.data=="string")&&(I+=(lT.test(I)?"&":"?")+ee.data,delete ee.data),ee.cache===!1&&(I=I.replace(rZ,"$1"),me=(lT.test(I)?"&":"?")+"_="+lR.guid+++me),ee.url=I+me),ee.ifModified&&(_.lastModified[I]&&at.setRequestHeader("If-Modified-Since",_.lastModified[I]),_.etag[I]&&at.setRequestHeader("If-None-Match",_.etag[I])),(ee.data&&ee.hasContent&&ee.contentType!==!1||v.contentType)&&at.setRequestHeader("Content-Type",ee.contentType),at.setRequestHeader("Accept",ee.dataTypes[0]&&ee.accepts[ee.dataTypes[0]]?ee.accepts[ee.dataTypes[0]]+(ee.dataTypes[0]!=="*"?", "+dR+"; q=0.01":""):ee.accepts["*"]);for(ie in ee.headers)at.setRequestHeader(ie,ee.headers[ie]);if(ee.beforeSend&&(ee.beforeSend.call(le,at,ee)===!1||U))return at.abort();if(Qt="abort",je.add(ee.complete),at.done(ee.success),at.fail(ee.error),S=pR(uT,ee,v,at),!S)ks(-1,"No Transport");else{if(at.readyState=1,Z&&De.trigger("ajaxSend",[at,ee]),U)return at;ee.async&&ee.timeout>0&&(P=t.setTimeout(function(){at.abort("timeout")},ee.timeout));try{U=!1,S.send(Wi,ks)}catch(Mt){if(U)throw Mt;ks(-1,Mt)}}function ks(Mt,wi,ky,B_){var on,md,yd,Ps,xc,Un=wi;U||(U=!0,P&&t.clearTimeout(P),S=void 0,C=B_||"",at.readyState=Mt>0?4:0,on=Mt>=200&&Mt<300||Mt===304,ky&&(Ps=lZ(ee,at,ky)),!on&&_.inArray("script",ee.dataTypes)>-1&&_.inArray("json",ee.dataTypes)<0&&(ee.converters["text script"]=function(){}),Ps=cZ(ee,Ps,at,on),on?(ee.ifModified&&(xc=at.getResponseHeader("Last-Modified"),xc&&(_.lastModified[I]=xc),xc=at.getResponseHeader("etag"),xc&&(_.etag[I]=xc)),Mt===204||ee.type==="HEAD"?Un="nocontent":Mt===304?Un="notmodified":(Un=Ps.state,md=Ps.data,yd=Ps.error,on=!yd)):(yd=Un,(Mt||!Un)&&(Un="error",Mt<0&&(Mt=0))),at.status=Mt,at.statusText=(wi||Un)+"",on?ct.resolveWith(le,[md,Un,at]):ct.rejectWith(le,[at,Un,yd]),at.statusCode(sr),sr=void 0,Z&&De.trigger(on?"ajaxSuccess":"ajaxError",[at,ee,on?md:yd]),je.fireWith(le,[at,Un]),Z&&(De.trigger("ajaxComplete",[at,ee]),--_.active||_.event.trigger("ajaxStop")))}return at},getJSON:function(m,v,S){return _.get(m,v,S,"json")},getScript:function(m,v){return _.get(m,void 0,v,"script")}}),_.each(["get","post"],function(m,v){_[v]=function(S,I,C,E){return w(I)&&(E=E||C,C=I,I=void 0),_.ajax(_.extend({url:S,type:v,dataType:E,data:I,success:C},_.isPlainObject(S)&&S))}}),_.ajaxPrefilter(function(m){var v;for(v in m.headers)v.toLowerCase()==="content-type"&&(m.contentType=m.headers[v]||"")}),_._evalUrl=function(m,v,S){return _.ajax({url:m,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(I){_.globalEval(I,v,S)}})},_.fn.extend({wrapAll:function(m){var v;return this[0]&&(w(m)&&(m=m.call(this[0])),v=_(m,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&v.insertBefore(this[0]),v.map(function(){for(var S=this;S.firstElementChild;)S=S.firstElementChild;return S}).append(this)),this},wrapInner:function(m){return w(m)?this.each(function(v){_(this).wrapInner(m.call(this,v))}):this.each(function(){var v=_(this),S=v.contents();S.length?S.wrapAll(m):v.append(m)})},wrap:function(m){var v=w(m);return this.each(function(S){_(this).wrapAll(v?m.call(this,S):m)})},unwrap:function(m){return this.parent(m).not("body").each(function(){_(this).replaceWith(this.childNodes)}),this}}),_.expr.pseudos.hidden=function(m){return!_.expr.pseudos.visible(m)},_.expr.pseudos.visible=function(m){return!!(m.offsetWidth||m.offsetHeight||m.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var uZ={0:200,1223:204},Oy=_.ajaxSettings.xhr();b.cors=!!Oy&&"withCredentials"in Oy,b.ajax=Oy=!!Oy,_.ajaxTransport(function(m){var v,S;if(b.cors||Oy&&!m.crossDomain)return{send:function(I,C){var E,P=m.xhr();if(P.open(m.type,m.url,m.async,m.username,m.password),m.xhrFields)for(E in m.xhrFields)P[E]=m.xhrFields[E];m.mimeType&&P.overrideMimeType&&P.overrideMimeType(m.mimeType),!m.crossDomain&&!I["X-Requested-With"]&&(I["X-Requested-With"]="XMLHttpRequest");for(E in I)P.setRequestHeader(E,I[E]);v=function(V){return function(){v&&(v=S=P.onload=P.onerror=P.onabort=P.ontimeout=P.onreadystatechange=null,V==="abort"?P.abort():V==="error"?typeof P.status!="number"?C(0,"error"):C(P.status,P.statusText):C(uZ[P.status]||P.status,P.statusText,(P.responseType||"text")!=="text"||typeof P.responseText!="string"?{binary:P.response}:{text:P.responseText},P.getAllResponseHeaders()))}},P.onload=v(),S=P.onerror=P.ontimeout=v("error"),P.onabort!==void 0?P.onabort=S:P.onreadystatechange=function(){P.readyState===4&&t.setTimeout(function(){v&&S()})},v=v("abort");try{P.send(m.hasContent&&m.data||null)}catch(V){if(v)throw V}},abort:function(){v&&v()}}}),_.ajaxPrefilter(function(m){m.crossDomain&&(m.contents.script=!1)}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(m){return _.globalEval(m),m}}}),_.ajaxPrefilter("script",function(m){m.cache===void 0&&(m.cache=!1),m.crossDomain&&(m.type="GET")}),_.ajaxTransport("script",function(m){if(m.crossDomain||m.scriptAttrs){var v,S;return{send:function(I,C){v=_("<script>").attr(m.scriptAttrs||{}).prop({charset:m.scriptCharset,src:m.url}).on("load error",S=function(E){v.remove(),S=null,E&&C(E.type==="error"?404:200,E.type)}),T.head.appendChild(v[0])},abort:function(){S&&S()}}}});var fR=[],pT=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var m=fR.pop()||_.expando+"_"+lR.guid++;return this[m]=!0,m}}),_.ajaxPrefilter("json jsonp",function(m,v,S){var I,C,E,P=m.jsonp!==!1&&(pT.test(m.url)?"url":typeof m.data=="string"&&(m.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&pT.test(m.data)&&"data");if(P||m.dataTypes[0]==="jsonp")return I=m.jsonpCallback=w(m.jsonpCallback)?m.jsonpCallback():m.jsonpCallback,P?m[P]=m[P].replace(pT,"$1"+I):m.jsonp!==!1&&(m.url+=(lT.test(m.url)?"&":"?")+m.jsonp+"="+I),m.converters["script json"]=function(){return E||_.error(I+" was not called"),E[0]},m.dataTypes[0]="json",C=t[I],t[I]=function(){E=arguments},S.always(function(){C===void 0?_(t).removeProp(I):t[I]=C,m[I]&&(m.jsonpCallback=v.jsonpCallback,fR.push(I)),E&&w(C)&&C(E[0]),E=C=void 0}),"script"}),b.createHTMLDocument=function(){var m=T.implementation.createHTMLDocument("").body;return m.innerHTML="<form></form><form></form>",m.childNodes.length===2}(),_.parseHTML=function(m,v,S){if(typeof m!="string")return[];typeof v=="boolean"&&(S=v,v=!1);var I,C,E;return v||(b.createHTMLDocument?(v=T.implementation.createHTMLDocument(""),I=v.createElement("base"),I.href=T.location.href,v.head.appendChild(I)):v=T),C=Te.exec(m),E=!S&&[],C?[v.createElement(C[1])]:(C=F_([m],v,E),E&&E.length&&_(E).remove(),_.merge([],C.childNodes))},_.fn.load=function(m,v,S){var I,C,E,P=this,V=m.indexOf(" ");return V>-1&&(I=Vn(m.slice(V)),m=m.slice(0,V)),w(v)?(S=v,v=void 0):v&&typeof v=="object"&&(C="POST"),P.length>0&&_.ajax({url:m,type:C||"GET",dataType:"html",data:v}).done(function(U){E=arguments,P.html(I?_("<div>").append(_.parseHTML(U)).find(I):U)}).always(S&&function(U,Z){P.each(function(){S.apply(this,E||[U.responseText,Z,U])})}),this},_.expr.pseudos.animated=function(m){return _.grep(_.timers,function(v){return m===v.elem}).length},_.offset={setOffset:function(m,v,S){var I,C,E,P,V,U,Z,ie=_.css(m,"position"),me=_(m),ee={};ie==="static"&&(m.style.position="relative"),V=me.offset(),E=_.css(m,"top"),U=_.css(m,"left"),Z=(ie==="absolute"||ie==="fixed")&&(E+U).indexOf("auto")>-1,Z?(I=me.position(),P=I.top,C=I.left):(P=parseFloat(E)||0,C=parseFloat(U)||0),w(v)&&(v=v.call(m,S,_.extend({},V))),v.top!=null&&(ee.top=v.top-V.top+P),v.left!=null&&(ee.left=v.left-V.left+C),"using"in v?v.using.call(m,ee):me.css(ee)}},_.fn.extend({offset:function(m){if(arguments.length)return m===void 0?this:this.each(function(C){_.offset.setOffset(this,m,C)});var v,S,I=this[0];if(!!I)return I.getClientRects().length?(v=I.getBoundingClientRect(),S=I.ownerDocument.defaultView,{top:v.top+S.pageYOffset,left:v.left+S.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var m,v,S,I=this[0],C={top:0,left:0};if(_.css(I,"position")==="fixed")v=I.getBoundingClientRect();else{for(v=this.offset(),S=I.ownerDocument,m=I.offsetParent||S.documentElement;m&&(m===S.body||m===S.documentElement)&&_.css(m,"position")==="static";)m=m.parentNode;m&&m!==I&&m.nodeType===1&&(C=_(m).offset(),C.top+=_.css(m,"borderTopWidth",!0),C.left+=_.css(m,"borderLeftWidth",!0))}return{top:v.top-C.top-_.css(I,"marginTop",!0),left:v.left-C.left-_.css(I,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var m=this.offsetParent;m&&_.css(m,"position")==="static";)m=m.offsetParent;return m||rn})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(m,v){var S=v==="pageYOffset";_.fn[m]=function(I){return $r(this,function(C,E,P){var V;if(x(C)?V=C:C.nodeType===9&&(V=C.defaultView),P===void 0)return V?V[v]:C[E];V?V.scrollTo(S?V.pageXOffset:P,S?P:V.pageYOffset):C[E]=P},m,I,arguments.length)}}),_.each(["top","left"],function(m,v){_.cssHooks[v]=zn(b.pixelPosition,function(S,I){if(I)return I=pd(S,v),Pe.test(I)?_(S).position()[v]+"px":I})}),_.each({Height:"height",Width:"width"},function(m,v){_.each({padding:"inner"+m,content:v,"":"outer"+m},function(S,I){_.fn[I]=function(C,E){var P=arguments.length&&(S||typeof C!="boolean"),V=S||(C===!0||E===!0?"margin":"border");return $r(this,function(U,Z,ie){var me;return x(U)?I.indexOf("outer")===0?U["inner"+m]:U.document.documentElement["client"+m]:U.nodeType===9?(me=U.documentElement,Math.max(U.body["scroll"+m],me["scroll"+m],U.body["offset"+m],me["offset"+m],me["client"+m])):ie===void 0?_.css(U,Z,V):_.style(U,Z,ie,V)},v,P?C:void 0,P)}})}),_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(m,v){_.fn[v]=function(S){return this.on(v,S)}}),_.fn.extend({bind:function(m,v,S){return this.on(m,null,v,S)},unbind:function(m,v){return this.off(m,null,v)},delegate:function(m,v,S,I){return this.on(v,m,S,I)},undelegate:function(m,v,S){return arguments.length===1?this.off(m,"**"):this.off(v,m||"**",S)},hover:function(m,v){return this.mouseenter(m).mouseleave(v||m)}}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(m,v){_.fn[v]=function(S,I){return arguments.length>0?this.on(v,null,S,I):this.trigger(v)}});var dZ=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;_.proxy=function(m,v){var S,I,C;if(typeof v=="string"&&(S=m[v],v=m,m=S),!!w(m))return I=n.call(arguments,2),C=function(){return m.apply(v||this,I.concat(n.call(arguments)))},C.guid=m.guid=m.guid||_.guid++,C},_.holdReady=function(m){m?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=ge,_.isFunction=w,_.isWindow=x,_.camelCase=os,_.type=D,_.now=Date.now,_.isNumeric=function(m){var v=_.type(m);return(v==="number"||v==="string")&&!isNaN(m-parseFloat(m))},_.trim=function(m){return m==null?"":(m+"").replace(dZ,"")};var hZ=t.jQuery,pZ=t.$;return _.noConflict=function(m){return t.$===_&&(t.$=pZ),m&&t.jQuery===_&&(t.jQuery=hZ),_},typeof i=="undefined"&&(t.jQuery=t.$=_),_})})(YJ);var es=YJ.exports;function ds(e,t){es("#"+e)[0].checked===!1?t.visible=!1:t.visible=!0}const iMe={name:"ARCGIS",props:{},methods:{},mounted(){var e="AAPKb3eecaeb91ed45628a682756d20ac048lUNLwpchYPEGEPnbeLe5FAg-AgPBsF4b4Vk0j-B3i04OSiYxgCgQVLFBQjDuGreB";Tt.apiKey=e;const t={title:"Facility setup inside this  Hexagon has <em>Combined Index</em>  score of <strong class = 'numbers'>{a00_Full_I}</strong>",lastEditInfoEnabled:!0,content:[{type:"fields",fieldInfos:[{fieldName:"a0_index_A",label:" Accesibility Index"},{fieldName:"a0_index_E ",label:" Emergency Index"},{fieldName:"a0_index_p ",label:" Population Index"},{fieldName:"a0_index_1 ",label:" Hotzone Index"},{fieldName:"a0_index_2 ",label:" Provider Proximity Index"},{fieldName:"Routes",label:" Unique Bus Routes with stop inside the Hexagon"},{fieldName:"NAME",label:" Closest Hospital for Emergency Response"},{fieldName:"travel_tim",label:"Average Traveltime for Emergency Response(minutes)"},{fieldName:"Walk_full_",label:"Naitonal Walkability Index(scaled to 100)"},{fieldName:"F__of_Crim",label:"Number of Drug Related Crime Within Hexagon"}]}]};let i={type:"simple",symbol:{type:"simple-fill"},visualVariables:[{type:"color",field:"a00_Full_I",stops:[{value:0,color:"#F7FBFF"},{value:100,color:"#08306B"}]}]};const r=new Fr({url:"https://services7.arcgis.com/RMDVoZh3ZWsYjLnV/arcgis/rest/services/finalinedx/FeatureServer/0",popupTemplate:t,renderer:i,visible:!0});let s={type:"simple",symbol:{type:"simple-fill"},visualVariables:[{type:"color",field:"a0_index_p",stops:[{value:0,color:"#F7FBFF"},{value:100,color:"#08306B"}]}]};const n={title:"Facility setup inside this Hexagon has <em>Population Index</em> score of <strong class = 'numbers'>{a0_index_p}</strong>",lastEditInfoEnabled:!0,content:[{type:"fields",fieldInfos:[{fieldName:"TotPop",label:" Total Population"}]}]},o=new Fr({url:"https://services7.arcgis.com/RMDVoZh3ZWsYjLnV/arcgis/rest/services/finalinedx/FeatureServer/0",popupTemplate:n,renderer:s,visible:!1});let a={type:"simple",symbol:{type:"simple-fill"},visualVariables:[{type:"color",field:"a0_index_2",stops:[{value:0,color:"#F7FBFF"},{value:100,color:"#08306B"}]}]};const l={title:"Facility setup inside this Hexagon has <em>Avoiding Other HRC Provider Index</em> score of <strong class = 'numbers'>{a0_index_2}</strong>",lastEditInfoEnabled:!0,content:[{type:"fields",fieldInfos:[{fieldName:"F5_min",label:"within 5 minutes walking distance from a HRC Service Provider"},{fieldName:"F10_min",label:"within 10 minutes walking distance from a HRC Service Provider"},{fieldName:"F15_min",label:"within 15 minutes walking distance from a HRC Service Provider"},{fieldName:"F20_min",label:"within 20 minutes walking distance from a HRC Service Provider"},{fieldName:"F25_min",label:"within 25 minutes walking distance from a HRC Service Provider"}]}]},u=new Fr({url:"https://services7.arcgis.com/RMDVoZh3ZWsYjLnV/arcgis/rest/services/finalinedx/FeatureServer/0",popupTemplate:l,renderer:a,visible:!1});let h={type:"simple",symbol:{type:"simple-fill"},visualVariables:[{type:"color",field:"a0_index_1",stops:[{value:0,color:"#F7FBFF"},{value:100,color:"#08306B"}]}]};const f={title:"Facility setup inside this Hexagon has <em>Hotzone Index</em> score of <strong class = 'numbers'>{a0_index_1}</strong>",lastEditInfoEnabled:!0,content:[{type:"fields",fieldInfos:[{fieldName:"F__of_EMS",label:" # of Emergency Service Called"},{fieldName:"F__of_Crim",label:"Number of Drug Related Crime Within Hexagon"}]}]},y=new Fr({url:"https://services7.arcgis.com/RMDVoZh3ZWsYjLnV/arcgis/rest/services/finalinedx/FeatureServer/0",popupTemplate:f,renderer:h,visible:!1});let g={type:"simple",symbol:{type:"simple-fill"},visualVariables:[{type:"color",field:"a0_index_E",stops:[{value:0,color:"#F7FBFF"},{value:100,color:"#08306B"}]}]};const b={title:"Facility setup inside this Hexagon has <em>Emergency Response Index</em> score of <strong class = 'numbers'>{a0_index_E}</strong>",lastEditInfoEnabled:!0,content:[{type:"fields",fieldInfos:[{fieldName:"NAME",label:" Closest Hospital for Emergency Response"},{fieldName:"travel_tim",label:"Average Traveltime for Emergency Response(minutes)"}]}]},w=new Fr({url:"https://services7.arcgis.com/RMDVoZh3ZWsYjLnV/arcgis/rest/services/finalinedx/FeatureServer/0",popupTemplate:b,renderer:g,visible:!1});let x={type:"simple",symbol:{type:"simple-fill"},visualVariables:[{type:"color",field:"a0_index_A",stops:[{value:0,color:"#F7FBFF"},{value:100,color:"#08306B"}]}]};const T={title:"Facility setup inside this Hexagon has <em>Accesibility Index</em> score of <strong class = 'numbers'>{a0_index_A}</strong>",lastEditInfoEnabled:!0,content:[{type:"fields",fieldInfos:[{fieldName:"Walk_full_",label:"Naitonal Walkability Index(scaled to 100)"},{fieldName:"Routes",label:" Unique Bus Routes with stop inside the Hexagon"}]}]},M=new Fr({url:"https://services7.arcgis.com/RMDVoZh3ZWsYjLnV/arcgis/rest/services/finalinedx/FeatureServer/0",popupTemplate:T,renderer:x,visible:!1}),F={title:"Block <strong class = 'numbers'>{GEOID}</strong>",lastEditInfoEnabled:!0,content:[{type:"fields",fieldInfos:[{fieldName:"CountCat",label:" Count of OD EMS Runs (Range)"},{fieldName:"Count_ ",label:" Count of OD EMS Run"}]}]},D=new Fr({url:"https://services1.arcgis.com/dkWT1XL4nglP5MLP/ArcGIS/rest/services/Opioid_Overdose_Related_EMS_Runs_by_Census_Block_Group_08092020_to_08082021/FeatureServer/7",popupTemplate:F,visible:!1}),R={title:"Block <strong class = 'numbers'>{GEOID20 }</strong> has WalkabilityIndex of <strong class = 'numbers'>{NatWalkInd}</strong>",lastEditInfoEnabled:!0,content:[{type:"fields",fieldInfos:[{fieldName:"TotPop",label:" Population, 2018 "},{fieldName:"TotEmp",label:" Total employment, 2017"},{fieldName:"CountHU",label:" Housing units"}]}]},_=new Fr({url:"https://geodata.epa.gov/arcgis/rest/services/OA/WalkabilityIndex/MapServer/0",popupTemplate:R,visible:!1}),q={title:"Block <strong class = 'numbers'>{BLOCKCE20}</strong> has a population of <strong class = 'numbers'>{Total_Pop }</strong>",lastEditInfoEnabled:!0,content:[{type:"fields",fieldInfos:[{fieldName:"Population",label:"Population Density"},{fieldName:"ALAND20",label:"Land Area"}]}]},W=new Fr({url:"https://services7.arcgis.com/RMDVoZh3ZWsYjLnV/arcgis/rest/services/population_shapes/FeatureServer/0",popupTemplate:q,visible:!1}),oe={title:"<strong class = 'numbers'>{Counts}</strong> Case of Type1&2 Drug Related Crime Reported at <strong class = 'numbers'>{Location}</strong>",lastEditInfoEnabled:!0,content:[{type:"fields",fieldInfos:[{fieldName:"Month",label:"Month"},{fieldName:"Year",label:"Year"},{fieldName:"Statute_Desc",label:"Statute_Desccription"}]}]},te=new Fr({url:"https://services7.arcgis.com/RMDVoZh3ZWsYjLnV/arcgis/rest/services/cleaned_drugcrime/FeatureServer/0",popupTemplate:oe,visible:!1}),he={title:"Route <strong class = 'numbers'>{stops_csv_ROUTE}</strong> in <strong class = 'numbers'>{stops_csv_DIRECTION}</strong> Direction",lastEditInfoEnabled:!0,content:[{type:"fields",fieldInfos:[{fieldName:"routes_csv_RT_NAME",label:"ROUTE NAME"},{fieldName:"stops_csv_ROUTE",label:"DIRECTION"},{fieldName:"stops_csv_RXST_ADD",label:"STOP NAME"},{fieldName:"stops_csv_RROUTES_SER",label:"CORSSING OTHER ROUTES"},{fieldName:"routes_csv_runs_on_weekdays",label:"Runs on Weekdays?"},{fieldName:"routes_csv_runs_on_saturday",label:"Runs on Saturdays?"},{fieldName:"routes_csv_runs_on_sunday",label:"Runs on Sundays?"}]}]},ge={type:"unique-value",legendOptions:{title:"Bus Stops"},field:"stops_csv_ROUTE",defaultSymbol:{type:"simple-marker",color:"#1D5C63",size:"6px"}},Te=new Fr({url:"https://services7.arcgis.com/RMDVoZh3ZWsYjLnV/arcgis/rest/services/buslayer/FeatureServer/0",popupTemplate:he,renderer:ge,visible:!1}),Se={title:"<strong class = 'numbers'>{PROVIDER_NAME}</strong>",lastEditInfoEnabled:!0,content:[{type:"fields",fieldInfos:[{fieldName:"ADDRESS_LINE_1",label:"address"},{fieldName:"PHONE",label:"PHONE NUMBER"}]}]},vt=new Fr({url:"https://services7.arcgis.com/RMDVoZh3ZWsYjLnV/arcgis/rest/services/opiod_provider/FeatureServer/0",popupTemplate:Se,visible:!1,renderer:{type:"unique-value",legendOptions:{title:"Opiod treamtment Providers"},field:"ADDRESS_LINE_1",defaultSymbol:{type:"simple-marker",color:"#B4E197",size:"6px"}}}),$t={title:"<strong class = 'numbers'>{address}</strong> is Owned by <strong class = 'numbers'>{owner}</strong> and <strong class = 'numbers'>{co_owner}</strong>",lastEditInfoEnabled:!0,content:[{type:"fields",fieldInfos:[{fieldName:"land_use_description",label:"Usage Description"},{fieldName:"price",label:"Price of Property"},{fieldName:"price_per_sqft",label:"Price per Square Footage"}]}]},st=new Fr({url:"https://services7.arcgis.com/RMDVoZh3ZWsYjLnV/arcgis/rest/services/clean_commercial_condo/FeatureServer/0",popupTemplate:$t,visible:!1,renderer:{type:"unique-value",legendOptions:{title:"Commercial Buildings"},field:"address ",defaultSymbol:{type:"simple-marker",color:"#b2b2b2",size:"3px"}}}),Kt={title:"<strong class = 'numbers'>{NAME}</strong>",lastEditInfoEnabled:!0,content:[{type:"fields",fieldInfos:[{fieldName:"ADDRESS",label:"Address"},{fieldName:"TELEPHONE",label:"Phone Number"},{fieldName:"WEBSITE",label:"Website"}]}]},yi=new Fr({url:"https://services7.arcgis.com/RMDVoZh3ZWsYjLnV/arcgis/rest/services/clean_hospital/FeatureServer/0",popupTemplate:Kt,visible:!1,renderer:{type:"unique-value",legendOptions:{title:"Hospital Buildings"},field:"OBJECTID",defaultSymbol:{type:"simple-marker",color:"#005555",size:"6px"}}}),wo={title:"<strong class = 'numbers'>{location_name}</strong> is a <strong class = 'numbers'>{top_category }</strong>",lastEditInfoEnabled:!0,content:[{type:"fields",fieldInfos:[{fieldName:"top_category",label:"Top Category"},{fieldName:"street_address",label:"Street Address"},{fieldName:"phone_number",label:"Phone Number"}]}]},ni="5px",Tr={width:"0.1px"},yr=new Fr({url:"https://services7.arcgis.com/RMDVoZh3ZWsYjLnV/arcgis/rest/services/social_determinants_of_health/FeatureServer/0",popupTemplate:wo,visible:!1,renderer:{type:"unique-value",legendOptions:{title:"Social Determinants of Health"},field:"top_category",uniqueValueInfos:[{value:"Colleges, Universities, and Professional Schools",label:"Colleges, Universities, and Professional Schools",symbol:{type:"simple-marker",color:"#1D5C63",size:ni,outline:Tr}},{value:"Other Schools and Instruction",label:"Other Schools and Instruction",symbol:{type:"simple-marker",color:"#1D5C63",size:ni,outline:Tr}},{value:"Elementary and Secondary Schools",label:"Elementary and Secondary Schools",symbol:{type:"simple-marker",color:"#417D7A",size:ni,outline:Tr}},{value:"Technical and Trade Schools",label:"Technical and Trade Schools",symbol:{type:"simple-marker",color:"#EDE6DB",size:ni,outline:Tr}},{value:"Grocery Stores",label:"Grocery Stores",symbol:{type:"simple-marker",color:"#E6BA95",size:ni,outline:Tr}},{value:"Museums, Historical Sites, and Similar Institutions",label:"Natural Parks, Museums, Historical Sites, and Similar Institutions",symbol:{type:"simple-marker",color:"#A2B38B",size:ni,outline:Tr}},{value:"Employment Services",label:"Employment Services",symbol:{type:"simple-marker",color:"#AC7D88",size:ni,outline:Tr}}],defaultSymbol:{type:"simple-marker",color:"#1D5C63",size:ni}}});es("#indexAll").on("click",function(ot){ds(ot.target.id,r)}),es("#indexPopulation").on("click",function(ot){ds(ot.target.id,o)}),es("#indexProximity").on("click",function(ot){ds(ot.target.id,u)}),es("#indexHotzone").on("click",function(ot){ds(ot.target.id,y)}),es("#indexEmergency").on("click",function(ot){ds(ot.target.id,w)}),es("#checkboxWalkability").on("click",function(ot){ds(ot.target.id,_)}),es("#indexAccesibility").on("click",function(ot){ds(ot.target.id,M)}),es("#checkboxEmergency").on("click",function(ot){ds(ot.target.id,D)}),es("#checkboxCommercial").on("click",function(ot){ds(ot.target.id,st)}),es("#checkboxOTP").on("click",function(ot){ds(ot.target.id,vt)}),es("#checkboxBusStops").on("click",function(ot){ds(ot.target.id,Te)}),es("#checkboxDrugCrime").on("click",function(ot){ds(ot.target.id,te)}),es("#checkboxPopulation").on("click",function(ot){ds(ot.target.id,W)}),es("#checkboxSDH").on("click",function(ot){ds(ot.target.id,yr)}),es("#checkboxHospital").on("click",function(ot){ds(ot.target.id,yi)});const ns=new C6({basemap:"arcgis-light-gray",layers:[o,u,y,w,M,r,D,_,W,te,Te,vt,yi,st,yr]}),Hi=new Z1e({map:ns,center:[-71.41067701451892,41.82577313883494],zoom:12,container:"viewDiv"}),So=new sxe({view:Hi});new BTe({view:Hi,container:legendDiv});const tn=new qTe({view:Hi,content:document.getElementById("legendDiv"),expanded:!0});Hi.ui.add(tn,{position:"top-right"}),Hi.ui.add(So,{position:"top-left"}),Hi.whenLayerView(yr).then(ot=>{const $r="top_category";document.getElementById("filter").addEventListener("input",xo=>{let ya;xo.target.value==="1=1"?ya=xo.target.value:(ya=`${$r}='${xo.target.value}'`,console.log(ya)),ot.filter={where:ya}})})}},rMe={class:"p-3 navbar navbar-expand-lg navbar-light bg-hubbar text-white"},sMe={class:"container-fluid title-up"},nMe=Nr("a",{href:"/",class:"navbar-brand offset-lg-2 font-exo fw-bold brand text-white"},"HRC.",-1),oMe=Nr("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarTogglerDemo03","aria-controls":"navbarTogglerDemo03","aria-expanded":"false","aria-label":"Toggle navigation"},[Nr("span",{class:"navbar-toggler-icon"})],-1),aMe={class:"collapse navbar-collapse",id:"navbarTogglerDemo03"},lMe={class:"ti col-lg-8 container"},cMe={class:"d-flex flex-wrap"},uMe={class:"nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0"},dMe=AO("Find HRC"),hMe=AO("Resources"),pMe=AO("About"),fMe=Nr("li",null,null,-1),mMe={class:"text-end"},yMe=Nr("button",{class:"btn btn-light dash"},"Dashboard",-1),gMe=Nr("img",{class:"icon",src:NZ,alt:""},null,-1),vMe=Nr("strong",null,"Sign out ",-1),_Me=FZ('<div id="viewDiv"></div><div id="infoDiv"><div id="legendDiv"><h1>Data Maps</h1><div class="dropdown"><button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false"> Toggle Layers </button><ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1"><li><label for="indexAll">Combined_index:</label><input class="dropdown-item" type="checkbox" id="indexAll"></li><li><label for="indexAccesibility">Accesibility_inedx:</label><input class="dropdown-item" type="checkbox" id="indexAccesibility"></li><li><label for="indexEmergency">Emergency_response_index:</label><input class="dropdown-item" type="checkbox" id="indexEmergency"></li><li><label for="indexHotzone">Hotzone_index:</label><input class="dropdown-item" type="checkbox" id="indexHotzone"></li><li><label for="indexProximity">HRC_Provier_Proximity_index:</label><input class="dropdown-item" type="checkbox" id="indexProximity"></li><li><label for="indexPopulation">Population_index:</label><input class="dropdown-item" type="checkbox" id="indexPopulation"></li><li><label for="checkboxEmergency">Emergency Call Locations:</label><input class="dropdown-item" type="checkbox" id="checkboxEmergency"></li><li><label for="checkboxWalkability">WalkabilityIndex:</label><input class="dropdown-item" type="checkbox" id="checkboxWalkability"></li><li><label for="checkboxOTP">Opiod Treatment Provider:</label><input class="dropdown-item" type="checkbox" id="checkboxOTP"></li><li><label for="checkboxCommercial">Commercial:</label><input class="dropdown-item" type="checkbox" id="checkboxCommercial"></li><li><label for="checkboxBusStops">Bus Stops:</label><input class="dropdown-item" type="checkbox" id="checkboxBusStops"></li><li><label for="checkboxDrugCrime">Drug Crime:</label><input class="dropdown-item" type="checkbox" id="checkboxDrugCrime"></li><li><label for="checkboxPopulation">Population:</label><input class="dropdown-item" type="checkbox" id="checkboxPopulation"></li><li><label for="checkboxSDH">Social Determinants of Health:</label><input class="dropdown-item" type="checkbox" id="checkboxSDH"></li><li><label for="checkboxHospital">Hospital: </label><input class="dropdown-item" type="checkbox" id="checkboxHospital"></li></ul></div><select class="esri-select" id="filter"><option value="1=1">All</option><option value="Colleges, Universities, and Professional Schools"> Universities/ Professional Schools </option><option value="Elementary and Secondary Schools"> Elementary/Secondary Schools </option><option value="Technical and Trade Schools"> Technical/Trade Schools </option><option value="Other Schools and Instruction">Other Schools</option><option value="Grocery Stores">Grocery Stores</option><option value="Museums, Historical Sites, and Similar Institutions"> Park/Museum </option><option value="Employment Services">Employment Services</option></select></div></div>',2);function bMe(e,t,i,r,s,n){const o=kZ("router-link");return PZ(),LZ(RZ,null,[Nr("header",rMe,[Nr("div",sMe,[nMe,oMe,Nr("div",aMe,[Nr("div",lMe,[Nr("div",cMe,[Nr("ul",uMe,[Nr("li",null,[Lp(o,{to:"/findHRC/providence",class:"nav-link px-2 text-white"},{default:Rp(()=>[dMe]),_:1})]),Nr("li",null,[Lp(o,{to:"/resource",class:"nav-link px-2 text-white"},{default:Rp(()=>[hMe]),_:1})]),Nr("li",null,[Lp(o,{to:"/about",class:"nav-link px-2 text-white"},{default:Rp(()=>[pMe]),_:1})]),fMe]),Nr("div",mMe,[Lp(o,{to:"/HRCProvider"},{default:Rp(()=>[yMe]),_:1}),Lp(o,{to:"/HRCProvider/searchHistory"},{default:Rp(()=>[gMe]),_:1}),Lp(o,{to:"/",type:"button",class:"btn btn-outline-primary left text-white"},{default:Rp(()=>[vMe]),_:1})])])])])])]),_Me],64)}var wMe=DZ(iMe,[["render",bMe]]),FPe=Object.freeze(Object.defineProperty({__proto__:null,default:wMe},Symbol.toStringTag,{value:"Module"}));export{Fx as $,sy as A,ku as B,ft as C,MO as D,UMe as E,ji as F,Yu as G,CG as H,$m as I,sa as J,Pt as K,b1 as L,sL as M,S_ as N,Ga as O,vPe as P,mPe as Q,yPe as R,nk as S,fo as T,fr as U,yB as V,Xs as W,Ee as X,Jk as Y,c as Z,d as _,tY as a,RM as a$,O as a0,Zu as a1,qs as a2,ol as a3,qV as a4,ok as a5,JV as a6,Ka as a7,Le as a8,Jx as a9,uke as aA,Rn as aB,mo as aC,_ke as aD,wte as aE,H9 as aF,$ke as aG,dN as aH,q9 as aI,OOe as aJ,Ks as aK,tx as aL,dke as aM,kOe as aN,TOe as aO,Zx as aP,S1e as aQ,Bie as aR,qie as aS,Xe as aT,Jv as aU,cOe as aV,Xke as aW,ePe as aX,Qke as aY,mG as aZ,uL as a_,FI as aa,IOe as ab,oG as ac,Gq as ad,aG as ae,rbe as af,dPe as ag,fbe as ah,Mv as ai,hPe as aj,Ai as ak,Oz as al,YMe as am,rp as an,na as ao,Qh as ap,Xf as aq,fk as ar,pk as as,I6 as at,Dh as au,mk as av,dOe as aw,hX as ax,A0 as ay,kh as az,RMe as b,Lue as b$,qm as b0,Fbe as b1,yG as b2,K as b3,Uq as b4,ex as b5,_h as b6,Bm as b7,Abe as b8,$Oe as b9,ed as bA,ume as bB,TIe as bC,_4 as bD,xge as bE,Ige as bF,Tge as bG,Wfe as bH,mOe as bI,$e as bJ,PP as bK,em as bL,$fe as bM,K9 as bN,As as bO,Y9 as bP,xke as bQ,bke as bR,nue as bS,Ake as bT,sA as bU,nme as bV,OMe as bW,kMe as bX,Mge as bY,Nbe as bZ,Xo as b_,ua as ba,aPe as bb,il as bc,AOe as bd,rOe as be,Oe as bf,vg as bg,Va as bh,Wf as bi,w0 as bj,ZOe as bk,Zs as bl,Qs as bm,vw as bn,iF as bo,Vs as bp,Mke as bq,wke as br,Nt as bs,rPe as bt,OB as bu,dme as bv,FP as bw,kB as bx,zr as by,_i as bz,AMe as c,yOe as c$,Z9 as c0,fG as c1,yg as c2,nd as c3,TM as c4,It as c5,M0e as c6,PO as c7,A0e as c8,nPe as c9,Wx as cA,Hx as cB,a_ as cC,COe as cD,Mz as cE,Ux as cF,ny as cG,xs as cH,Gie as cI,vwe as cJ,pPe as cK,fPe as cL,St as cM,Ys as cN,Zh as cO,Od as cP,Hu as cQ,Vx as cR,X1 as cS,B1 as cT,pse as cU,Gm as cV,Cye as cW,$ye as cX,zye as cY,oa as cZ,gk as c_,e_ as ca,lPe as cb,cPe as cc,rt as cd,oPe as ce,gt as cf,ue as cg,ke as ch,mV as ci,lP as cj,xr as ck,dc as cl,Nx as cm,nde as cn,Ome as co,Et as cp,ul as cq,qce as cr,Ln as cs,_ge as ct,bge as cu,wge as cv,mi as cw,jge as cx,sS as cy,EOe as cz,re as d,Br as d$,Y0 as d0,Ss as d1,cke as d2,hc as d3,wOe as d4,gOe as d5,_Oe as d6,vOe as d7,bOe as d8,rv as d9,hbe as dA,Qe as dB,IV as dC,Hf as dD,qr as dE,Yh as dF,VOe as dG,ht as dH,tS as dI,$k as dJ,F3 as dK,hOe as dL,LOe as dM,bn as dN,QF as dO,iwe as dP,sme as dQ,RPe as dR,$_ as dS,LPe as dT,vh as dU,kO as dV,b_ as dW,Dme as dX,ZMe as dY,xe as dZ,t7 as d_,ho as da,hie as db,bp as dc,Ya as dd,iv as de,Zte as df,Wne as dg,ly as dh,fme as di,RP as dj,tV as dk,Am as dl,z0 as dm,lS as dn,ote as dp,Dbe as dq,Fm as dr,Nm as ds,op as dt,S2 as du,pi as dv,w2 as dw,I2 as dx,mS as dy,xne as dz,B as e,hp as e$,Ue as e0,h_ as e1,gV as e2,Ja as e3,pp as e4,pw as e5,Bme as e6,qye as e7,Zye as e8,FB as e9,vB as eA,_B as eB,bB as eC,uo as eD,Ffe as eE,$V as eF,PMe as eG,Ku as eH,Cx as eI,KMe as eJ,en as eK,gfe as eL,vfe as eM,Qte as eN,sl as eO,MQ as eP,Mpe as eQ,POe as eR,zOe as eS,Cke as eT,C0e as eU,cE as eV,S6 as eW,pOe as eX,uOe as eY,EB as eZ,Gke as e_,MMe as ea,SI as eb,Fye as ec,yk as ed,FMe as ee,CS as ef,BMe as eg,Nh as eh,CPe as ei,bPe as ej,SPe as ek,wPe as el,IPe as em,xPe as en,$Pe as eo,TPe as ep,APe as eq,EPe as er,DSe as es,OPe as et,MPe as eu,zSe as ev,jt as ew,p_ as ex,hI as ey,wI as ez,iOe as f,s6 as f$,Ha as f0,Yie as f1,Mq as f2,$Me as f3,Tse as f4,wV as f5,Eke as f6,gke as f7,W9 as f8,V9 as f9,WOe as fA,QOe as fB,D8 as fC,l_ as fD,dne as fE,See as fF,une as fG,BX as fH,QMe as fI,qx as fJ,Gx as fK,Mbe as fL,kbe as fM,mee as fN,XMe as fO,qbe as fP,Xbe as fQ,Rse as fR,Ise as fS,Rm as fT,Qn as fU,Ke as fV,kee as fW,Lee as fX,zee as fY,Gee as fZ,Hee as f_,lX as fa,fX as fb,eOe as fc,LMe as fd,cz as fe,e1e as ff,az as fg,eee as fh,iE as fi,NMe as fj,DMe as fk,tE as fl,QV as fm,cee as fn,nOe as fo,Iee as fp,GV as fq,ZV as fr,tOe as fs,Pee as ft,o6 as fu,zse as fv,Fse as fw,Lse as fx,Ose as fy,fee as fz,CMe as g,_s as g$,n6 as g0,qee as g1,Kee as g2,Qee as g3,Mee as g4,Fu as g5,GMe as g6,OO as g7,P9 as g8,A9 as g9,Wre as gA,Wke as gB,AY as gC,s$ as gD,n$ as gE,qZ as gF,GB as gG,li as gH,hke as gI,n1e as gJ,Ske as gK,pI as gL,jMe as gM,yee as gN,si as gO,OP as gP,Ife as gQ,zu as gR,wL as gS,JZ as gT,HOe as gU,GOe as gV,fQ as gW,so as gX,ZO as gY,Pte as gZ,ws as g_,pke as ga,Ike as gb,E9 as gc,oke as gd,k9 as ge,ake as gf,MOe as gg,uc as gh,pm as gi,tq as gj,XOe as gk,Lce as gl,vke as gm,ia as gn,SOe as go,nie as gp,xOe as gq,oOe as gr,H8 as gs,lOe as gt,lm as gu,Sue as gv,yue as gw,nN as gx,M9 as gy,Tke as gz,qh as h,FOe as h$,bs as h0,jr as h1,dl as h2,Zw as h3,Sv as h4,EP as h5,NS as h6,Az as h7,Gf as h8,Ti as h9,$P as hA,sfe as hB,rfe as hC,nfe as hD,wv as hE,Ope as hF,Ype as hG,Jpe as hH,Bpe as hI,ffe as hJ,dfe as hK,ufe as hL,zke as hM,hfe as hN,pfe as hO,qpe as hP,Gpe as hQ,FO as hR,Zpe as hS,lfe as hT,mP as hU,BR as hV,qke as hW,jpe as hX,zpe as hY,Npe as hZ,Fpe as h_,Xpe as ha,Wu as hb,ts as hc,Kpe as hd,yo as he,Hpe as hf,Upe as hg,Vpe as hh,up as hi,Cn as hj,nB as hk,yc as hl,$de as hm,Rpe as hn,Dpe as ho,Ve as hp,sB as hq,mr as hr,Qpe as hs,Wpe as ht,ZC as hu,wp as hv,ck as hw,efe as hx,tfe as hy,ife as hz,XZ as i,Cs as i$,UOe as i0,BOe as i1,nke as i2,ike as i3,eke as i4,LU as i5,Bae as i6,ske as i7,rke as i8,tke as i9,Xye as iA,hD as iB,Yke as iC,Fr as iD,Uge as iE,Lye as iF,pme as iG,YB as iH,kge as iI,Es as iJ,ZK as iK,K6 as iL,xae as iM,Rme as iN,fm as iO,lV as iP,Kke as iQ,Dye as iR,Vye as iS,jme as iT,zP as iU,Vme as iV,Ume as iW,Ak as iX,Vte as iY,Dte as iZ,v3 as i_,dH as ia,ir as ib,z0e as ic,JS as id,V0e as ie,iPe as ig,jI as ih,SM as ii,Jf as ij,P0e as ik,sPe as il,O0e as im,uPe as io,sp as ip,s_ as iq,gPe as ir,DO as is,KOe as it,WO as iu,YO as iv,HX as iw,Vse as ix,Iye as iy,ege as iz,_o as j,PPe as j$,ev as j0,Nye as j1,Nn as j2,n_ as j3,sd as j4,cl as j5,Wye as j6,Tye as j7,Eye as j8,rge as j9,CB as jA,zS as jB,NP as jC,qMe as jD,cB as jE,VS as jF,zme as jG,Gz as jH,cv as jI,Ru as jJ,On as jK,hre as jL,Bx as jM,Ox as jN,qOe as jO,YOe as jP,Kv as jQ,zMe as jR,it as jS,kPe as jT,lke as jU,NO as jV,pc as jW,yf as jX,Uce as jY,Fge as jZ,$n as j_,k3 as ja,M6 as jb,Ege as jc,KB as jd,JP as je,RD as jf,u1 as jg,PB as jh,Rye as ji,ZP as jj,lq as jk,ne as jl,mp as jm,kC as jn,yke as jo,Tue as jp,xue as jq,oK as jr,oo as js,Dge as jt,v_ as ju,Sfe as jv,pB as jw,rve as jx,Dfe as jy,sve as jz,Gi as k,fp as k$,j1 as k0,s5 as k1,gp as k2,E3 as k3,qk as k4,En as k5,tl as k6,Xa as k7,H6 as k8,zh as k9,ha as kA,iq as kB,Vke as kC,jke as kD,HN as kE,Oke as kF,GN as kG,afe as kH,Dke as kI,Bke as kJ,w9 as kK,Uke as kL,cp as kM,Pke as kN,kke as kO,Lke as kP,Rke as kQ,Nke as kR,Lpe as kS,JN as kT,Fke as kU,ofe as kV,bI as kW,aB as kX,lB as kY,uee as kZ,YV as k_,IB as ka,_L as kb,EMe as kc,LB as kd,h1 as ke,MD as kf,tv as kg,Bye as kh,Uye as ki,ty as kj,S8 as kk,Jke as kl,An as km,Zv as kn,ry as ko,HMe as kp,jye as kq,Zke as kr,VK as ks,VMe as kt,A as ku,JOe as kv,WP as kw,fOe as kx,fi as ky,oy as kz,xG as l,YZ as l0,FQ as l1,sOe as l2,NOe as l3,DOe as l4,KV as l5,aOe as l6,hne as l7,Av as l8,xI as l9,ROe as la,qX as lb,jOe as lc,WV as ld,WMe as le,Use as lf,ZY as lg,U1 as lh,Z_e as li,GX as lj,BV as lk,JMe as ll,JQ as lm,fke as ln,mke as lo,Hke as lp,tPe as lq,FPe as lr,qi as m,_Pe as n,Sr as o,da as p,Tt as q,N as r,fe as s,Q as t,br as u,rs as v,OC as w,Ei as x,vG as y,bo as z};
