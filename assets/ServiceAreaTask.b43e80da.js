var O=Object.defineProperty,x=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var $=(r,e,a)=>e in r?O(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,d=(r,e)=>{for(var a in e||(e={}))Z.call(e,a)&&$(r,a,e[a]);if(h)for(var a of h(e))q.call(e,a)&&$(r,a,e[a]);return r},g=(r,e)=>x(r,J(e));import{Z as s,_ as o,a8 as S,dZ as p,cH as E,aB as F,ck as v,a0 as R,cg as I,eG as T,r as _,bO as C,aT as G,g as H,dE as K,cj as M,C as Q,d_ as V}from"./GISSearch.b73a2371.js";import{a as z,i as B,u as D,f as L,d as U,o as W}from"./NAMessage.ba4db950.js";import"./index.8ac88fb7.js";import"./ProjectWeberRenew.dc78a7b0.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./GPMessage.9e6158b7.js";function b(r){return r.features.map(e=>{const a=G.fromJSON(r.spatialReference),l=v.fromJSON(e);return H(l.geometry).spatialReference=a,l})}function m(r){return T(r.features.map(e=>(_(e.geometry)&&(e.geometry.spatialReference=r.spatialReference),C(e.geometry))))}let t=class extends I{constructor(r){super(r),this.facilities=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.serviceAreaPolylines=null,this.serviceAreaPolygons=null}readFacilities(r){return m(r)}readPointBarriers(r,e){return m(e.barriers)}readPolylineBarriers(r){return m(r)}readPolygonBarriers(r){return m(r)}readIncidents(r,e){return b(e.saPolylines)}readServiceAreaPolygons(r,e){return b(e.saPolygons)}};s([o({type:[S]})],t.prototype,"facilities",void 0),s([p("facilities")],t.prototype,"readFacilities",null),s([o({type:[z]})],t.prototype,"messages",void 0),s([o({type:[S]})],t.prototype,"pointBarriers",void 0),s([p("pointBarriers",["barriers"])],t.prototype,"readPointBarriers",null),s([o({type:[E]})],t.prototype,"polylineBarriers",void 0),s([p("polylineBarriers")],t.prototype,"readPolylineBarriers",null),s([o({type:[F]})],t.prototype,"polygonBarriers",void 0),s([p("polygonBarriers")],t.prototype,"readPolygonBarriers",null),s([o({type:[v]})],t.prototype,"serviceAreaPolylines",void 0),s([p("serviceAreaPolylines",["saPolylines"])],t.prototype,"readIncidents",null),s([o({type:[v]})],t.prototype,"serviceAreaPolygons",void 0),s([p("serviceAreaPolygons",["saPolygons"])],t.prototype,"readServiceAreaPolygons",null),t=s([R("esri.rest.support.ServiceAreaSolveResult")],t);const X=t,Y=W({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,defaultBreaks:!0,facilities:!0,outSpatialReference:{name:"outSR",getter:r=>r.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},travelMode:!0});async function ee(r,e,a){const l=[],u=[],n={},c={},P=K(r),{path:A}=P;e.facilities&&e.facilities.features&&B(e.facilities.features,u,"facilities.features",n),e.pointBarriers&&e.pointBarriers.features&&B(e.pointBarriers.features,u,"pointBarriers.features",n),e.polylineBarriers&&e.polylineBarriers.features&&B(e.polylineBarriers.features,u,"polylineBarriers.features",n),e.polygonBarriers&&e.polygonBarriers.features&&B(e.polygonBarriers.features,u,"polygonBarriers.features",n);const k=await M(u);for(const i in n){const y=n[i];l.push(i),c[i]=k.slice(y[0],y[1])}if(D(c,l)){let i=null;try{i=await L(A,e.apiKey,a)}catch{}i&&!i.hasZ&&U(c,l)}for(const i in c)c[i].forEach((y,w)=>{e.get(i)[w].geometry=y});const j=g(d({},a),{query:g(d(d({},P.query),Y.toQueryParams(e)),{f:"json"})}),{data:N}=await Q(`${A}/solveServiceArea`,j);return X.fromJSON(N)}let f=class extends V{constructor(r){super(r),this.url=null}solve(r,e){return ee(this.url,r,e)}};s([o()],f.prototype,"url",void 0),f=s([R("esri.tasks.ServiceAreaTask")],f);const ne=f;export{ne as default};
